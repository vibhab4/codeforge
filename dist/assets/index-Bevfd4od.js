var Eb=n=>{throw TypeError(n)};var My=(n,e,t)=>e.has(n)||Eb("Cannot "+t);var z=(n,e,t)=>(My(n,e,"read from private field"),t?t.call(n):e.get(n)),De=(n,e,t)=>e.has(n)?Eb("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),ve=(n,e,t,r)=>(My(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),Yt=(n,e,t)=>(My(n,e,"access private method"),t);var Jf=(n,e,t,r)=>({set _(i){ve(n,e,i,t)},get _(){return z(n,e,r)}});function CF(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var Zf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fg(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var mP={exports:{}},dg={},gP={exports:{}},be={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tf=Symbol.for("react.element"),PF=Symbol.for("react.portal"),AF=Symbol.for("react.fragment"),RF=Symbol.for("react.strict_mode"),IF=Symbol.for("react.profiler"),NF=Symbol.for("react.provider"),DF=Symbol.for("react.context"),MF=Symbol.for("react.forward_ref"),LF=Symbol.for("react.suspense"),VF=Symbol.for("react.memo"),FF=Symbol.for("react.lazy"),kb=Symbol.iterator;function QF(n){return n===null||typeof n!="object"?null:(n=kb&&n[kb]||n["@@iterator"],typeof n=="function"?n:null)}var yP={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},vP=Object.assign,wP={};function _c(n,e,t){this.props=n,this.context=e,this.refs=wP,this.updater=t||yP}_c.prototype.isReactComponent={};_c.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};_c.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function OP(){}OP.prototype=_c.prototype;function jO(n,e,t){this.props=n,this.context=e,this.refs=wP,this.updater=t||yP}var zO=jO.prototype=new OP;zO.constructor=jO;vP(zO,_c.prototype);zO.isPureReactComponent=!0;var Cb=Array.isArray,xP=Object.prototype.hasOwnProperty,BO={current:null},SP={key:!0,ref:!0,__self:!0,__source:!0};function bP(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)xP.call(e,r)&&!SP.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:tf,type:n,key:s,ref:o,props:i,_owner:BO.current}}function $F(n,e){return{$$typeof:tf,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function UO(n){return typeof n=="object"&&n!==null&&n.$$typeof===tf}function jF(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var Pb=/\/+/g;function Ly(n,e){return typeof n=="object"&&n!==null&&n.key!=null?jF(""+n.key):e.toString(36)}function ep(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case tf:case PF:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+Ly(o,0):r,Cb(i)?(t="",n!=null&&(t=n.replace(Pb,"$&/")+"/"),ep(i,e,t,"",function(c){return c})):i!=null&&(UO(i)&&(i=$F(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Pb,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Cb(n))for(var a=0;a<n.length;a++){s=n[a];var l=r+Ly(s,a);o+=ep(s,e,t,l,i)}else if(l=QF(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=r+Ly(s,a++),o+=ep(s,e,t,l,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ed(n,e,t){if(n==null)return n;var r=[],i=0;return ep(n,r,"","",function(s){return e.call(t,s,i++)}),r}function zF(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var vn={current:null},tp={transition:null},BF={ReactCurrentDispatcher:vn,ReactCurrentBatchConfig:tp,ReactCurrentOwner:BO};function TP(){throw Error("act(...) is not supported in production builds of React.")}be.Children={map:ed,forEach:function(n,e,t){ed(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return ed(n,function(){e++}),e},toArray:function(n){return ed(n,function(e){return e})||[]},only:function(n){if(!UO(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};be.Component=_c;be.Fragment=AF;be.Profiler=IF;be.PureComponent=jO;be.StrictMode=RF;be.Suspense=LF;be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BF;be.act=TP;be.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=vP({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=BO.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)xP.call(e,l)&&!SP.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:tf,type:n.type,key:i,ref:s,props:r,_owner:o}};be.createContext=function(n){return n={$$typeof:DF,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:NF,_context:n},n.Consumer=n};be.createElement=bP;be.createFactory=function(n){var e=bP.bind(null,n);return e.type=n,e};be.createRef=function(){return{current:null}};be.forwardRef=function(n){return{$$typeof:MF,render:n}};be.isValidElement=UO;be.lazy=function(n){return{$$typeof:FF,_payload:{_status:-1,_result:n},_init:zF}};be.memo=function(n,e){return{$$typeof:VF,type:n,compare:e===void 0?null:e}};be.startTransition=function(n){var e=tp.transition;tp.transition={};try{n()}finally{tp.transition=e}};be.unstable_act=TP;be.useCallback=function(n,e){return vn.current.useCallback(n,e)};be.useContext=function(n){return vn.current.useContext(n)};be.useDebugValue=function(){};be.useDeferredValue=function(n){return vn.current.useDeferredValue(n)};be.useEffect=function(n,e){return vn.current.useEffect(n,e)};be.useId=function(){return vn.current.useId()};be.useImperativeHandle=function(n,e,t){return vn.current.useImperativeHandle(n,e,t)};be.useInsertionEffect=function(n,e){return vn.current.useInsertionEffect(n,e)};be.useLayoutEffect=function(n,e){return vn.current.useLayoutEffect(n,e)};be.useMemo=function(n,e){return vn.current.useMemo(n,e)};be.useReducer=function(n,e,t){return vn.current.useReducer(n,e,t)};be.useRef=function(n){return vn.current.useRef(n)};be.useState=function(n){return vn.current.useState(n)};be.useSyncExternalStore=function(n,e,t){return vn.current.useSyncExternalStore(n,e,t)};be.useTransition=function(){return vn.current.useTransition()};be.version="18.3.1";gP.exports=be;var k=gP.exports;const H=fg(k),_P=CF({__proto__:null,default:H},[k]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UF=k,WF=Symbol.for("react.element"),qF=Symbol.for("react.fragment"),HF=Object.prototype.hasOwnProperty,GF=UF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,XF={key:!0,ref:!0,__self:!0,__source:!0};function EP(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)HF.call(e,r)&&!XF.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:WF,type:n,key:s,ref:o,props:i,_owner:GF.current}}dg.Fragment=qF;dg.jsx=EP;dg.jsxs=EP;mP.exports=dg;var A=mP.exports,uv={},kP={exports:{}},Yn={},CP={exports:{}},PP={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(Q,$){var G=Q.length;Q.push($);e:for(;0<G;){var ce=G-1>>>1,Z=Q[ce];if(0<i(Z,$))Q[ce]=$,Q[G]=Z,G=ce;else break e}}function t(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var $=Q[0],G=Q.pop();if(G!==$){Q[0]=G;e:for(var ce=0,Z=Q.length,oe=Z>>>1;ce<oe;){var de=2*(ce+1)-1,Pe=Q[de],et=de+1,xe=Q[et];if(0>i(Pe,G))et<Z&&0>i(xe,Pe)?(Q[ce]=xe,Q[et]=G,ce=et):(Q[ce]=Pe,Q[de]=G,ce=de);else if(et<Z&&0>i(xe,G))Q[ce]=xe,Q[et]=G,ce=et;else break e}}return $}function i(Q,$){var G=Q.sortIndex-$.sortIndex;return G!==0?G:Q.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,d=3,p=!1,g=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(Q){for(var $=t(c);$!==null;){if($.callback===null)r(c);else if($.startTime<=Q)r(c),$.sortIndex=$.expirationTime,e(l,$);else break;$=t(c)}}function E(Q){if(y=!1,S(Q),!g)if(t(l)!==null)g=!0,te(R);else{var $=t(c);$!==null&&Y(E,$.startTime-Q)}}function R(Q,$){g=!1,y&&(y=!1,v(T),T=-1),p=!0;var G=d;try{for(S($),h=t(l);h!==null&&(!(h.expirationTime>$)||Q&&!D());){var ce=h.callback;if(typeof ce=="function"){h.callback=null,d=h.priorityLevel;var Z=ce(h.expirationTime<=$);$=n.unstable_now(),typeof Z=="function"?h.callback=Z:h===t(l)&&r(l),S($)}else r(l);h=t(l)}if(h!==null)var oe=!0;else{var de=t(c);de!==null&&Y(E,de.startTime-$),oe=!1}return oe}finally{h=null,d=G,p=!1}}var M=!1,b=null,T=-1,_=5,C=-1;function D(){return!(n.unstable_now()-C<_)}function N(){if(b!==null){var Q=n.unstable_now();C=Q;var $=!0;try{$=b(!0,Q)}finally{$?I():(M=!1,b=null)}}else M=!1}var I;if(typeof O=="function")I=function(){O(N)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,ee=j.port2;j.port1.onmessage=N,I=function(){ee.postMessage(null)}}else I=function(){w(N,0)};function te(Q){b=Q,M||(M=!0,I())}function Y(Q,$){T=w(function(){Q(n.unstable_now())},$)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Q){Q.callback=null},n.unstable_continueExecution=function(){g||p||(g=!0,te(R))},n.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<Q?Math.floor(1e3/Q):5},n.unstable_getCurrentPriorityLevel=function(){return d},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(Q){switch(d){case 1:case 2:case 3:var $=3;break;default:$=d}var G=d;d=$;try{return Q()}finally{d=G}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Q,$){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var G=d;d=Q;try{return $()}finally{d=G}},n.unstable_scheduleCallback=function(Q,$,G){var ce=n.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?ce+G:ce):G=ce,Q){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=G+Z,Q={id:u++,callback:$,priorityLevel:Q,startTime:G,expirationTime:Z,sortIndex:-1},G>ce?(Q.sortIndex=G,e(c,Q),t(l)===null&&Q===t(c)&&(y?(v(T),T=-1):y=!0,Y(E,G-ce))):(Q.sortIndex=Z,e(l,Q),g||p||(g=!0,te(R))),Q},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(Q){var $=d;return function(){var G=d;d=$;try{return Q.apply(this,arguments)}finally{d=G}}}})(PP);CP.exports=PP;var KF=CP.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YF=k,Kn=KF;function q(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var AP=new Set,sh={};function Qa(n,e){Zl(n,e),Zl(n+"Capture",e)}function Zl(n,e){for(sh[n]=e,n=0;n<e.length;n++)AP.add(e[n])}var Xi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hv=Object.prototype.hasOwnProperty,JF=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ab={},Rb={};function ZF(n){return hv.call(Rb,n)?!0:hv.call(Ab,n)?!1:JF.test(n)?Rb[n]=!0:(Ab[n]=!0,!1)}function e5(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function t5(n,e,t,r){if(e===null||typeof e>"u"||e5(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function wn(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Wt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Wt[n]=new wn(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Wt[e]=new wn(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Wt[n]=new wn(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Wt[n]=new wn(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Wt[n]=new wn(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Wt[n]=new wn(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Wt[n]=new wn(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Wt[n]=new wn(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Wt[n]=new wn(n,5,!1,n.toLowerCase(),null,!1,!1)});var WO=/[\-:]([a-z])/g;function qO(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(WO,qO);Wt[e]=new wn(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(WO,qO);Wt[e]=new wn(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(WO,qO);Wt[e]=new wn(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Wt[n]=new wn(n,1,!1,n.toLowerCase(),null,!1,!1)});Wt.xlinkHref=new wn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Wt[n]=new wn(n,1,!1,n.toLowerCase(),null,!0,!0)});function HO(n,e,t,r){var i=Wt.hasOwnProperty(e)?Wt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(t5(e,t,i,r)&&(t=null),r||i===null?ZF(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var cs=YF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,td=Symbol.for("react.element"),ll=Symbol.for("react.portal"),cl=Symbol.for("react.fragment"),GO=Symbol.for("react.strict_mode"),fv=Symbol.for("react.profiler"),RP=Symbol.for("react.provider"),IP=Symbol.for("react.context"),XO=Symbol.for("react.forward_ref"),dv=Symbol.for("react.suspense"),pv=Symbol.for("react.suspense_list"),KO=Symbol.for("react.memo"),Es=Symbol.for("react.lazy"),NP=Symbol.for("react.offscreen"),Ib=Symbol.iterator;function ru(n){return n===null||typeof n!="object"?null:(n=Ib&&n[Ib]||n["@@iterator"],typeof n=="function"?n:null)}var rt=Object.assign,Vy;function Ou(n){if(Vy===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Vy=e&&e[1]||""}return`
`+Vy+n}var Fy=!1;function Qy(n,e){if(!n||Fy)return"";Fy=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){r=c}n.call(e.prototype)}else{try{throw Error()}catch(c){r=c}n()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{Fy=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Ou(n):""}function n5(n){switch(n.tag){case 5:return Ou(n.type);case 16:return Ou("Lazy");case 13:return Ou("Suspense");case 19:return Ou("SuspenseList");case 0:case 2:case 15:return n=Qy(n.type,!1),n;case 11:return n=Qy(n.type.render,!1),n;case 1:return n=Qy(n.type,!0),n;default:return""}}function mv(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case cl:return"Fragment";case ll:return"Portal";case fv:return"Profiler";case GO:return"StrictMode";case dv:return"Suspense";case pv:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case IP:return(n.displayName||"Context")+".Consumer";case RP:return(n._context.displayName||"Context")+".Provider";case XO:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case KO:return e=n.displayName||null,e!==null?e:mv(n.type)||"Memo";case Es:e=n._payload,n=n._init;try{return mv(n(e))}catch{}}return null}function r5(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return mv(e);case 8:return e===GO?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ho(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function DP(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function i5(n){var e=DP(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function nd(n){n._valueTracker||(n._valueTracker=i5(n))}function MP(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=DP(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function $p(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function gv(n,e){var t=e.checked;return rt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function Nb(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=ho(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function LP(n,e){e=e.checked,e!=null&&HO(n,"checked",e,!1)}function yv(n,e){LP(n,e);var t=ho(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?vv(n,e.type,t):e.hasOwnProperty("defaultValue")&&vv(n,e.type,ho(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function Db(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function vv(n,e,t){(e!=="number"||$p(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var xu=Array.isArray;function Tl(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+ho(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function wv(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(q(91));return rt({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Mb(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(q(92));if(xu(t)){if(1<t.length)throw Error(q(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:ho(t)}}function VP(n,e){var t=ho(e.value),r=ho(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function Lb(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function FP(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ov(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?FP(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var rd,QP=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(rd=rd||document.createElement("div"),rd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=rd.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function oh(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Mu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},s5=["Webkit","ms","Moz","O"];Object.keys(Mu).forEach(function(n){s5.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Mu[e]=Mu[n]})});function $P(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Mu.hasOwnProperty(n)&&Mu[n]?(""+e).trim():e+"px"}function jP(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=$P(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var o5=rt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xv(n,e){if(e){if(o5[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(q(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(q(62))}}function Sv(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bv=null;function YO(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Tv=null,_l=null,El=null;function Vb(n){if(n=sf(n)){if(typeof Tv!="function")throw Error(q(280));var e=n.stateNode;e&&(e=vg(e),Tv(n.stateNode,n.type,e))}}function zP(n){_l?El?El.push(n):El=[n]:_l=n}function BP(){if(_l){var n=_l,e=El;if(El=_l=null,Vb(n),e)for(n=0;n<e.length;n++)Vb(e[n])}}function UP(n,e){return n(e)}function WP(){}var $y=!1;function qP(n,e,t){if($y)return n(e,t);$y=!0;try{return UP(n,e,t)}finally{$y=!1,(_l!==null||El!==null)&&(WP(),BP())}}function ah(n,e){var t=n.stateNode;if(t===null)return null;var r=vg(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(q(231,e,typeof t));return t}var _v=!1;if(Xi)try{var iu={};Object.defineProperty(iu,"passive",{get:function(){_v=!0}}),window.addEventListener("test",iu,iu),window.removeEventListener("test",iu,iu)}catch{_v=!1}function a5(n,e,t,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var Lu=!1,jp=null,zp=!1,Ev=null,l5={onError:function(n){Lu=!0,jp=n}};function c5(n,e,t,r,i,s,o,a,l){Lu=!1,jp=null,a5.apply(l5,arguments)}function u5(n,e,t,r,i,s,o,a,l){if(c5.apply(this,arguments),Lu){if(Lu){var c=jp;Lu=!1,jp=null}else throw Error(q(198));zp||(zp=!0,Ev=c)}}function $a(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function HP(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function Fb(n){if($a(n)!==n)throw Error(q(188))}function h5(n){var e=n.alternate;if(!e){if(e=$a(n),e===null)throw Error(q(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return Fb(i),n;if(s===r)return Fb(i),e;s=s.sibling}throw Error(q(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(q(189))}}if(t.alternate!==r)throw Error(q(190))}if(t.tag!==3)throw Error(q(188));return t.stateNode.current===t?n:e}function GP(n){return n=h5(n),n!==null?XP(n):null}function XP(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=XP(n);if(e!==null)return e;n=n.sibling}return null}var KP=Kn.unstable_scheduleCallback,Qb=Kn.unstable_cancelCallback,f5=Kn.unstable_shouldYield,d5=Kn.unstable_requestPaint,ht=Kn.unstable_now,p5=Kn.unstable_getCurrentPriorityLevel,JO=Kn.unstable_ImmediatePriority,YP=Kn.unstable_UserBlockingPriority,Bp=Kn.unstable_NormalPriority,m5=Kn.unstable_LowPriority,JP=Kn.unstable_IdlePriority,pg=null,si=null;function g5(n){if(si&&typeof si.onCommitFiberRoot=="function")try{si.onCommitFiberRoot(pg,n,void 0,(n.current.flags&128)===128)}catch{}}var Pr=Math.clz32?Math.clz32:w5,y5=Math.log,v5=Math.LN2;function w5(n){return n>>>=0,n===0?32:31-(y5(n)/v5|0)|0}var id=64,sd=4194304;function Su(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Up(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=Su(a):(s&=o,s!==0&&(r=Su(s)))}else o=t&~i,o!==0?r=Su(o):s!==0&&(r=Su(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-Pr(e),i=1<<t,r|=n[t],e&=~i;return r}function O5(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function x5(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-Pr(s),a=1<<o,l=i[o];l===-1?(!(a&t)||a&r)&&(i[o]=O5(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function kv(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function ZP(){var n=id;return id<<=1,!(id&4194240)&&(id=64),n}function jy(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function nf(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Pr(e),n[e]=t}function S5(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-Pr(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function ZO(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-Pr(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var Ve=0;function eA(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var tA,ex,nA,rA,iA,Cv=!1,od=[],Ks=null,Ys=null,Js=null,lh=new Map,ch=new Map,Rs=[],b5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $b(n,e){switch(n){case"focusin":case"focusout":Ks=null;break;case"dragenter":case"dragleave":Ys=null;break;case"mouseover":case"mouseout":Js=null;break;case"pointerover":case"pointerout":lh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ch.delete(e.pointerId)}}function su(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=sf(e),e!==null&&ex(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function T5(n,e,t,r,i){switch(e){case"focusin":return Ks=su(Ks,n,e,t,r,i),!0;case"dragenter":return Ys=su(Ys,n,e,t,r,i),!0;case"mouseover":return Js=su(Js,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return lh.set(s,su(lh.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ch.set(s,su(ch.get(s)||null,n,e,t,r,i)),!0}return!1}function sA(n){var e=ra(n.target);if(e!==null){var t=$a(e);if(t!==null){if(e=t.tag,e===13){if(e=HP(t),e!==null){n.blockedOn=e,iA(n.priority,function(){nA(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function np(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=Pv(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);bv=r,t.target.dispatchEvent(r),bv=null}else return e=sf(t),e!==null&&ex(e),n.blockedOn=t,!1;e.shift()}return!0}function jb(n,e,t){np(n)&&t.delete(e)}function _5(){Cv=!1,Ks!==null&&np(Ks)&&(Ks=null),Ys!==null&&np(Ys)&&(Ys=null),Js!==null&&np(Js)&&(Js=null),lh.forEach(jb),ch.forEach(jb)}function ou(n,e){n.blockedOn===e&&(n.blockedOn=null,Cv||(Cv=!0,Kn.unstable_scheduleCallback(Kn.unstable_NormalPriority,_5)))}function uh(n){function e(i){return ou(i,n)}if(0<od.length){ou(od[0],n);for(var t=1;t<od.length;t++){var r=od[t];r.blockedOn===n&&(r.blockedOn=null)}}for(Ks!==null&&ou(Ks,n),Ys!==null&&ou(Ys,n),Js!==null&&ou(Js,n),lh.forEach(e),ch.forEach(e),t=0;t<Rs.length;t++)r=Rs[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<Rs.length&&(t=Rs[0],t.blockedOn===null);)sA(t),t.blockedOn===null&&Rs.shift()}var kl=cs.ReactCurrentBatchConfig,Wp=!0;function E5(n,e,t,r){var i=Ve,s=kl.transition;kl.transition=null;try{Ve=1,tx(n,e,t,r)}finally{Ve=i,kl.transition=s}}function k5(n,e,t,r){var i=Ve,s=kl.transition;kl.transition=null;try{Ve=4,tx(n,e,t,r)}finally{Ve=i,kl.transition=s}}function tx(n,e,t,r){if(Wp){var i=Pv(n,e,t,r);if(i===null)Yy(n,e,r,qp,t),$b(n,r);else if(T5(i,n,e,t,r))r.stopPropagation();else if($b(n,r),e&4&&-1<b5.indexOf(n)){for(;i!==null;){var s=sf(i);if(s!==null&&tA(s),s=Pv(n,e,t,r),s===null&&Yy(n,e,r,qp,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else Yy(n,e,r,null,t)}}var qp=null;function Pv(n,e,t,r){if(qp=null,n=YO(r),n=ra(n),n!==null)if(e=$a(n),e===null)n=null;else if(t=e.tag,t===13){if(n=HP(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return qp=n,null}function oA(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(p5()){case JO:return 1;case YP:return 4;case Bp:case m5:return 16;case JP:return 536870912;default:return 16}default:return 16}}var Bs=null,nx=null,rp=null;function aA(){if(rp)return rp;var n,e=nx,t=e.length,r,i="value"in Bs?Bs.value:Bs.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return rp=i.slice(n,1<r?1-r:void 0)}function ip(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function ad(){return!0}function zb(){return!1}function Jn(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ad:zb,this.isPropagationStopped=zb,this}return rt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=ad)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=ad)},persist:function(){},isPersistent:ad}),e}var Ec={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rx=Jn(Ec),rf=rt({},Ec,{view:0,detail:0}),C5=Jn(rf),zy,By,au,mg=rt({},rf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ix,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==au&&(au&&n.type==="mousemove"?(zy=n.screenX-au.screenX,By=n.screenY-au.screenY):By=zy=0,au=n),zy)},movementY:function(n){return"movementY"in n?n.movementY:By}}),Bb=Jn(mg),P5=rt({},mg,{dataTransfer:0}),A5=Jn(P5),R5=rt({},rf,{relatedTarget:0}),Uy=Jn(R5),I5=rt({},Ec,{animationName:0,elapsedTime:0,pseudoElement:0}),N5=Jn(I5),D5=rt({},Ec,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),M5=Jn(D5),L5=rt({},Ec,{data:0}),Ub=Jn(L5),V5={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},F5={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Q5={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $5(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=Q5[n])?!!e[n]:!1}function ix(){return $5}var j5=rt({},rf,{key:function(n){if(n.key){var e=V5[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=ip(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?F5[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ix,charCode:function(n){return n.type==="keypress"?ip(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ip(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),z5=Jn(j5),B5=rt({},mg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wb=Jn(B5),U5=rt({},rf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ix}),W5=Jn(U5),q5=rt({},Ec,{propertyName:0,elapsedTime:0,pseudoElement:0}),H5=Jn(q5),G5=rt({},mg,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),X5=Jn(G5),K5=[9,13,27,32],sx=Xi&&"CompositionEvent"in window,Vu=null;Xi&&"documentMode"in document&&(Vu=document.documentMode);var Y5=Xi&&"TextEvent"in window&&!Vu,lA=Xi&&(!sx||Vu&&8<Vu&&11>=Vu),qb=" ",Hb=!1;function cA(n,e){switch(n){case"keyup":return K5.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uA(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ul=!1;function J5(n,e){switch(n){case"compositionend":return uA(e);case"keypress":return e.which!==32?null:(Hb=!0,qb);case"textInput":return n=e.data,n===qb&&Hb?null:n;default:return null}}function Z5(n,e){if(ul)return n==="compositionend"||!sx&&cA(n,e)?(n=aA(),rp=nx=Bs=null,ul=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return lA&&e.locale!=="ko"?null:e.data;default:return null}}var e4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gb(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!e4[n.type]:e==="textarea"}function hA(n,e,t,r){zP(r),e=Hp(e,"onChange"),0<e.length&&(t=new rx("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var Fu=null,hh=null;function t4(n){SA(n,0)}function gg(n){var e=dl(n);if(MP(e))return n}function n4(n,e){if(n==="change")return e}var fA=!1;if(Xi){var Wy;if(Xi){var qy="oninput"in document;if(!qy){var Xb=document.createElement("div");Xb.setAttribute("oninput","return;"),qy=typeof Xb.oninput=="function"}Wy=qy}else Wy=!1;fA=Wy&&(!document.documentMode||9<document.documentMode)}function Kb(){Fu&&(Fu.detachEvent("onpropertychange",dA),hh=Fu=null)}function dA(n){if(n.propertyName==="value"&&gg(hh)){var e=[];hA(e,hh,n,YO(n)),qP(t4,e)}}function r4(n,e,t){n==="focusin"?(Kb(),Fu=e,hh=t,Fu.attachEvent("onpropertychange",dA)):n==="focusout"&&Kb()}function i4(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return gg(hh)}function s4(n,e){if(n==="click")return gg(e)}function o4(n,e){if(n==="input"||n==="change")return gg(e)}function a4(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Rr=typeof Object.is=="function"?Object.is:a4;function fh(n,e){if(Rr(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!hv.call(e,i)||!Rr(n[i],e[i]))return!1}return!0}function Yb(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Jb(n,e){var t=Yb(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=Yb(t)}}function pA(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?pA(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function mA(){for(var n=window,e=$p();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=$p(n.document)}return e}function ox(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function l4(n){var e=mA(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&pA(t.ownerDocument.documentElement,t)){if(r!==null&&ox(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=Jb(t,s);var o=Jb(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var c4=Xi&&"documentMode"in document&&11>=document.documentMode,hl=null,Av=null,Qu=null,Rv=!1;function Zb(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Rv||hl==null||hl!==$p(r)||(r=hl,"selectionStart"in r&&ox(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Qu&&fh(Qu,r)||(Qu=r,r=Hp(Av,"onSelect"),0<r.length&&(e=new rx("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=hl)))}function ld(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var fl={animationend:ld("Animation","AnimationEnd"),animationiteration:ld("Animation","AnimationIteration"),animationstart:ld("Animation","AnimationStart"),transitionend:ld("Transition","TransitionEnd")},Hy={},gA={};Xi&&(gA=document.createElement("div").style,"AnimationEvent"in window||(delete fl.animationend.animation,delete fl.animationiteration.animation,delete fl.animationstart.animation),"TransitionEvent"in window||delete fl.transitionend.transition);function yg(n){if(Hy[n])return Hy[n];if(!fl[n])return n;var e=fl[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in gA)return Hy[n]=e[t];return n}var yA=yg("animationend"),vA=yg("animationiteration"),wA=yg("animationstart"),OA=yg("transitionend"),xA=new Map,eT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Io(n,e){xA.set(n,e),Qa(e,[n])}for(var Gy=0;Gy<eT.length;Gy++){var Xy=eT[Gy],u4=Xy.toLowerCase(),h4=Xy[0].toUpperCase()+Xy.slice(1);Io(u4,"on"+h4)}Io(yA,"onAnimationEnd");Io(vA,"onAnimationIteration");Io(wA,"onAnimationStart");Io("dblclick","onDoubleClick");Io("focusin","onFocus");Io("focusout","onBlur");Io(OA,"onTransitionEnd");Zl("onMouseEnter",["mouseout","mouseover"]);Zl("onMouseLeave",["mouseout","mouseover"]);Zl("onPointerEnter",["pointerout","pointerover"]);Zl("onPointerLeave",["pointerout","pointerover"]);Qa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Qa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Qa("onBeforeInput",["compositionend","keypress","textInput","paste"]);Qa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Qa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Qa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),f4=new Set("cancel close invalid load scroll toggle".split(" ").concat(bu));function tT(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,u5(r,e,void 0,n),n.currentTarget=null}function SA(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;tT(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;tT(i,a,c),s=l}}}if(zp)throw n=Ev,zp=!1,Ev=null,n}function qe(n,e){var t=e[Lv];t===void 0&&(t=e[Lv]=new Set);var r=n+"__bubble";t.has(r)||(bA(e,n,2,!1),t.add(r))}function Ky(n,e,t){var r=0;e&&(r|=4),bA(t,n,r,e)}var cd="_reactListening"+Math.random().toString(36).slice(2);function dh(n){if(!n[cd]){n[cd]=!0,AP.forEach(function(t){t!=="selectionchange"&&(f4.has(t)||Ky(t,!1,n),Ky(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[cd]||(e[cd]=!0,Ky("selectionchange",!1,e))}}function bA(n,e,t,r){switch(oA(e)){case 1:var i=E5;break;case 4:i=k5;break;default:i=tx}t=i.bind(null,e,t,n),i=void 0,!_v||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function Yy(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=ra(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}qP(function(){var c=s,u=YO(t),h=[];e:{var d=xA.get(n);if(d!==void 0){var p=rx,g=n;switch(n){case"keypress":if(ip(t)===0)break e;case"keydown":case"keyup":p=z5;break;case"focusin":g="focus",p=Uy;break;case"focusout":g="blur",p=Uy;break;case"beforeblur":case"afterblur":p=Uy;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Bb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=A5;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=W5;break;case yA:case vA:case wA:p=N5;break;case OA:p=H5;break;case"scroll":p=C5;break;case"wheel":p=X5;break;case"copy":case"cut":case"paste":p=M5;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Wb}var y=(e&4)!==0,w=!y&&n==="scroll",v=y?d!==null?d+"Capture":null:d;y=[];for(var O=c,S;O!==null;){S=O;var E=S.stateNode;if(S.tag===5&&E!==null&&(S=E,v!==null&&(E=ah(O,v),E!=null&&y.push(ph(O,E,S)))),w)break;O=O.return}0<y.length&&(d=new p(d,g,null,t,u),h.push({event:d,listeners:y}))}}if(!(e&7)){e:{if(d=n==="mouseover"||n==="pointerover",p=n==="mouseout"||n==="pointerout",d&&t!==bv&&(g=t.relatedTarget||t.fromElement)&&(ra(g)||g[Ki]))break e;if((p||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,p?(g=t.relatedTarget||t.toElement,p=c,g=g?ra(g):null,g!==null&&(w=$a(g),g!==w||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=c),p!==g)){if(y=Bb,E="onMouseLeave",v="onMouseEnter",O="mouse",(n==="pointerout"||n==="pointerover")&&(y=Wb,E="onPointerLeave",v="onPointerEnter",O="pointer"),w=p==null?d:dl(p),S=g==null?d:dl(g),d=new y(E,O+"leave",p,t,u),d.target=w,d.relatedTarget=S,E=null,ra(u)===c&&(y=new y(v,O+"enter",g,t,u),y.target=S,y.relatedTarget=w,E=y),w=E,p&&g)t:{for(y=p,v=g,O=0,S=y;S;S=el(S))O++;for(S=0,E=v;E;E=el(E))S++;for(;0<O-S;)y=el(y),O--;for(;0<S-O;)v=el(v),S--;for(;O--;){if(y===v||v!==null&&y===v.alternate)break t;y=el(y),v=el(v)}y=null}else y=null;p!==null&&nT(h,d,p,y,!1),g!==null&&w!==null&&nT(h,w,g,y,!0)}}e:{if(d=c?dl(c):window,p=d.nodeName&&d.nodeName.toLowerCase(),p==="select"||p==="input"&&d.type==="file")var R=n4;else if(Gb(d))if(fA)R=o4;else{R=i4;var M=r4}else(p=d.nodeName)&&p.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(R=s4);if(R&&(R=R(n,c))){hA(h,R,t,u);break e}M&&M(n,d,c),n==="focusout"&&(M=d._wrapperState)&&M.controlled&&d.type==="number"&&vv(d,"number",d.value)}switch(M=c?dl(c):window,n){case"focusin":(Gb(M)||M.contentEditable==="true")&&(hl=M,Av=c,Qu=null);break;case"focusout":Qu=Av=hl=null;break;case"mousedown":Rv=!0;break;case"contextmenu":case"mouseup":case"dragend":Rv=!1,Zb(h,t,u);break;case"selectionchange":if(c4)break;case"keydown":case"keyup":Zb(h,t,u)}var b;if(sx)e:{switch(n){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else ul?cA(n,t)&&(T="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(T="onCompositionStart");T&&(lA&&t.locale!=="ko"&&(ul||T!=="onCompositionStart"?T==="onCompositionEnd"&&ul&&(b=aA()):(Bs=u,nx="value"in Bs?Bs.value:Bs.textContent,ul=!0)),M=Hp(c,T),0<M.length&&(T=new Ub(T,n,null,t,u),h.push({event:T,listeners:M}),b?T.data=b:(b=uA(t),b!==null&&(T.data=b)))),(b=Y5?J5(n,t):Z5(n,t))&&(c=Hp(c,"onBeforeInput"),0<c.length&&(u=new Ub("onBeforeInput","beforeinput",null,t,u),h.push({event:u,listeners:c}),u.data=b))}SA(h,e)})}function ph(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Hp(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ah(n,t),s!=null&&r.unshift(ph(n,s,i)),s=ah(n,e),s!=null&&r.push(ph(n,s,i))),n=n.return}return r}function el(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function nT(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=ah(t,s),l!=null&&o.unshift(ph(t,l,a))):i||(l=ah(t,s),l!=null&&o.push(ph(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var d4=/\r\n?/g,p4=/\u0000|\uFFFD/g;function rT(n){return(typeof n=="string"?n:""+n).replace(d4,`
`).replace(p4,"")}function ud(n,e,t){if(e=rT(e),rT(n)!==e&&t)throw Error(q(425))}function Gp(){}var Iv=null,Nv=null;function Dv(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Mv=typeof setTimeout=="function"?setTimeout:void 0,m4=typeof clearTimeout=="function"?clearTimeout:void 0,iT=typeof Promise=="function"?Promise:void 0,g4=typeof queueMicrotask=="function"?queueMicrotask:typeof iT<"u"?function(n){return iT.resolve(null).then(n).catch(y4)}:Mv;function y4(n){setTimeout(function(){throw n})}function Jy(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),uh(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);uh(e)}function Zs(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function sT(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var kc=Math.random().toString(36).slice(2),Jr="__reactFiber$"+kc,mh="__reactProps$"+kc,Ki="__reactContainer$"+kc,Lv="__reactEvents$"+kc,v4="__reactListeners$"+kc,w4="__reactHandles$"+kc;function ra(n){var e=n[Jr];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Ki]||t[Jr]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=sT(n);n!==null;){if(t=n[Jr])return t;n=sT(n)}return e}n=t,t=n.parentNode}return null}function sf(n){return n=n[Jr]||n[Ki],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function dl(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(q(33))}function vg(n){return n[mh]||null}var Vv=[],pl=-1;function No(n){return{current:n}}function Ge(n){0>pl||(n.current=Vv[pl],Vv[pl]=null,pl--)}function Be(n,e){pl++,Vv[pl]=n.current,n.current=e}var fo={},ln=No(fo),In=No(!1),va=fo;function ec(n,e){var t=n.type.contextTypes;if(!t)return fo;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function Nn(n){return n=n.childContextTypes,n!=null}function Xp(){Ge(In),Ge(ln)}function oT(n,e,t){if(ln.current!==fo)throw Error(q(168));Be(ln,e),Be(In,t)}function TA(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(q(108,r5(n)||"Unknown",i));return rt({},t,r)}function Kp(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||fo,va=ln.current,Be(ln,n),Be(In,In.current),!0}function aT(n,e,t){var r=n.stateNode;if(!r)throw Error(q(169));t?(n=TA(n,e,va),r.__reactInternalMemoizedMergedChildContext=n,Ge(In),Ge(ln),Be(ln,n)):Ge(In),Be(In,t)}var Vi=null,wg=!1,Zy=!1;function _A(n){Vi===null?Vi=[n]:Vi.push(n)}function O4(n){wg=!0,_A(n)}function Do(){if(!Zy&&Vi!==null){Zy=!0;var n=0,e=Ve;try{var t=Vi;for(Ve=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}Vi=null,wg=!1}catch(i){throw Vi!==null&&(Vi=Vi.slice(n+1)),KP(JO,Do),i}finally{Ve=e,Zy=!1}}return null}var ml=[],gl=0,Yp=null,Jp=0,rr=[],ir=0,wa=null,ji=1,zi="";function Yo(n,e){ml[gl++]=Jp,ml[gl++]=Yp,Yp=n,Jp=e}function EA(n,e,t){rr[ir++]=ji,rr[ir++]=zi,rr[ir++]=wa,wa=n;var r=ji;n=zi;var i=32-Pr(r)-1;r&=~(1<<i),t+=1;var s=32-Pr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,ji=1<<32-Pr(e)+i|t<<i|r,zi=s+n}else ji=1<<s|t<<i|r,zi=n}function ax(n){n.return!==null&&(Yo(n,1),EA(n,1,0))}function lx(n){for(;n===Yp;)Yp=ml[--gl],ml[gl]=null,Jp=ml[--gl],ml[gl]=null;for(;n===wa;)wa=rr[--ir],rr[ir]=null,zi=rr[--ir],rr[ir]=null,ji=rr[--ir],rr[ir]=null}var Gn=null,Wn=null,Ye=!1,Er=null;function kA(n,e){var t=ar(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function lT(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Gn=n,Wn=Zs(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Gn=n,Wn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=wa!==null?{id:ji,overflow:zi}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=ar(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Gn=n,Wn=null,!0):!1;default:return!1}}function Fv(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Qv(n){if(Ye){var e=Wn;if(e){var t=e;if(!lT(n,e)){if(Fv(n))throw Error(q(418));e=Zs(t.nextSibling);var r=Gn;e&&lT(n,e)?kA(r,t):(n.flags=n.flags&-4097|2,Ye=!1,Gn=n)}}else{if(Fv(n))throw Error(q(418));n.flags=n.flags&-4097|2,Ye=!1,Gn=n}}}function cT(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Gn=n}function hd(n){if(n!==Gn)return!1;if(!Ye)return cT(n),Ye=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!Dv(n.type,n.memoizedProps)),e&&(e=Wn)){if(Fv(n))throw CA(),Error(q(418));for(;e;)kA(n,e),e=Zs(e.nextSibling)}if(cT(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(q(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Wn=Zs(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Wn=null}}else Wn=Gn?Zs(n.stateNode.nextSibling):null;return!0}function CA(){for(var n=Wn;n;)n=Zs(n.nextSibling)}function tc(){Wn=Gn=null,Ye=!1}function cx(n){Er===null?Er=[n]:Er.push(n)}var x4=cs.ReactCurrentBatchConfig;function lu(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(q(309));var r=t.stateNode}if(!r)throw Error(q(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(q(284));if(!t._owner)throw Error(q(290,n))}return n}function fd(n,e){throw n=Object.prototype.toString.call(e),Error(q(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function uT(n){var e=n._init;return e(n._payload)}function PA(n){function e(v,O){if(n){var S=v.deletions;S===null?(v.deletions=[O],v.flags|=16):S.push(O)}}function t(v,O){if(!n)return null;for(;O!==null;)e(v,O),O=O.sibling;return null}function r(v,O){for(v=new Map;O!==null;)O.key!==null?v.set(O.key,O):v.set(O.index,O),O=O.sibling;return v}function i(v,O){return v=ro(v,O),v.index=0,v.sibling=null,v}function s(v,O,S){return v.index=S,n?(S=v.alternate,S!==null?(S=S.index,S<O?(v.flags|=2,O):S):(v.flags|=2,O)):(v.flags|=1048576,O)}function o(v){return n&&v.alternate===null&&(v.flags|=2),v}function a(v,O,S,E){return O===null||O.tag!==6?(O=o0(S,v.mode,E),O.return=v,O):(O=i(O,S),O.return=v,O)}function l(v,O,S,E){var R=S.type;return R===cl?u(v,O,S.props.children,E,S.key):O!==null&&(O.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Es&&uT(R)===O.type)?(E=i(O,S.props),E.ref=lu(v,O,S),E.return=v,E):(E=hp(S.type,S.key,S.props,null,v.mode,E),E.ref=lu(v,O,S),E.return=v,E)}function c(v,O,S,E){return O===null||O.tag!==4||O.stateNode.containerInfo!==S.containerInfo||O.stateNode.implementation!==S.implementation?(O=a0(S,v.mode,E),O.return=v,O):(O=i(O,S.children||[]),O.return=v,O)}function u(v,O,S,E,R){return O===null||O.tag!==7?(O=ma(S,v.mode,E,R),O.return=v,O):(O=i(O,S),O.return=v,O)}function h(v,O,S){if(typeof O=="string"&&O!==""||typeof O=="number")return O=o0(""+O,v.mode,S),O.return=v,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case td:return S=hp(O.type,O.key,O.props,null,v.mode,S),S.ref=lu(v,null,O),S.return=v,S;case ll:return O=a0(O,v.mode,S),O.return=v,O;case Es:var E=O._init;return h(v,E(O._payload),S)}if(xu(O)||ru(O))return O=ma(O,v.mode,S,null),O.return=v,O;fd(v,O)}return null}function d(v,O,S,E){var R=O!==null?O.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return R!==null?null:a(v,O,""+S,E);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case td:return S.key===R?l(v,O,S,E):null;case ll:return S.key===R?c(v,O,S,E):null;case Es:return R=S._init,d(v,O,R(S._payload),E)}if(xu(S)||ru(S))return R!==null?null:u(v,O,S,E,null);fd(v,S)}return null}function p(v,O,S,E,R){if(typeof E=="string"&&E!==""||typeof E=="number")return v=v.get(S)||null,a(O,v,""+E,R);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case td:return v=v.get(E.key===null?S:E.key)||null,l(O,v,E,R);case ll:return v=v.get(E.key===null?S:E.key)||null,c(O,v,E,R);case Es:var M=E._init;return p(v,O,S,M(E._payload),R)}if(xu(E)||ru(E))return v=v.get(S)||null,u(O,v,E,R,null);fd(O,E)}return null}function g(v,O,S,E){for(var R=null,M=null,b=O,T=O=0,_=null;b!==null&&T<S.length;T++){b.index>T?(_=b,b=null):_=b.sibling;var C=d(v,b,S[T],E);if(C===null){b===null&&(b=_);break}n&&b&&C.alternate===null&&e(v,b),O=s(C,O,T),M===null?R=C:M.sibling=C,M=C,b=_}if(T===S.length)return t(v,b),Ye&&Yo(v,T),R;if(b===null){for(;T<S.length;T++)b=h(v,S[T],E),b!==null&&(O=s(b,O,T),M===null?R=b:M.sibling=b,M=b);return Ye&&Yo(v,T),R}for(b=r(v,b);T<S.length;T++)_=p(b,v,T,S[T],E),_!==null&&(n&&_.alternate!==null&&b.delete(_.key===null?T:_.key),O=s(_,O,T),M===null?R=_:M.sibling=_,M=_);return n&&b.forEach(function(D){return e(v,D)}),Ye&&Yo(v,T),R}function y(v,O,S,E){var R=ru(S);if(typeof R!="function")throw Error(q(150));if(S=R.call(S),S==null)throw Error(q(151));for(var M=R=null,b=O,T=O=0,_=null,C=S.next();b!==null&&!C.done;T++,C=S.next()){b.index>T?(_=b,b=null):_=b.sibling;var D=d(v,b,C.value,E);if(D===null){b===null&&(b=_);break}n&&b&&D.alternate===null&&e(v,b),O=s(D,O,T),M===null?R=D:M.sibling=D,M=D,b=_}if(C.done)return t(v,b),Ye&&Yo(v,T),R;if(b===null){for(;!C.done;T++,C=S.next())C=h(v,C.value,E),C!==null&&(O=s(C,O,T),M===null?R=C:M.sibling=C,M=C);return Ye&&Yo(v,T),R}for(b=r(v,b);!C.done;T++,C=S.next())C=p(b,v,T,C.value,E),C!==null&&(n&&C.alternate!==null&&b.delete(C.key===null?T:C.key),O=s(C,O,T),M===null?R=C:M.sibling=C,M=C);return n&&b.forEach(function(N){return e(v,N)}),Ye&&Yo(v,T),R}function w(v,O,S,E){if(typeof S=="object"&&S!==null&&S.type===cl&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case td:e:{for(var R=S.key,M=O;M!==null;){if(M.key===R){if(R=S.type,R===cl){if(M.tag===7){t(v,M.sibling),O=i(M,S.props.children),O.return=v,v=O;break e}}else if(M.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Es&&uT(R)===M.type){t(v,M.sibling),O=i(M,S.props),O.ref=lu(v,M,S),O.return=v,v=O;break e}t(v,M);break}else e(v,M);M=M.sibling}S.type===cl?(O=ma(S.props.children,v.mode,E,S.key),O.return=v,v=O):(E=hp(S.type,S.key,S.props,null,v.mode,E),E.ref=lu(v,O,S),E.return=v,v=E)}return o(v);case ll:e:{for(M=S.key;O!==null;){if(O.key===M)if(O.tag===4&&O.stateNode.containerInfo===S.containerInfo&&O.stateNode.implementation===S.implementation){t(v,O.sibling),O=i(O,S.children||[]),O.return=v,v=O;break e}else{t(v,O);break}else e(v,O);O=O.sibling}O=a0(S,v.mode,E),O.return=v,v=O}return o(v);case Es:return M=S._init,w(v,O,M(S._payload),E)}if(xu(S))return g(v,O,S,E);if(ru(S))return y(v,O,S,E);fd(v,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,O!==null&&O.tag===6?(t(v,O.sibling),O=i(O,S),O.return=v,v=O):(t(v,O),O=o0(S,v.mode,E),O.return=v,v=O),o(v)):t(v,O)}return w}var nc=PA(!0),AA=PA(!1),Zp=No(null),em=null,yl=null,ux=null;function hx(){ux=yl=em=null}function fx(n){var e=Zp.current;Ge(Zp),n._currentValue=e}function $v(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function Cl(n,e){em=n,ux=yl=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Pn=!0),n.firstContext=null)}function dr(n){var e=n._currentValue;if(ux!==n)if(n={context:n,memoizedValue:e,next:null},yl===null){if(em===null)throw Error(q(308));yl=n,em.dependencies={lanes:0,firstContext:n}}else yl=yl.next=n;return e}var ia=null;function dx(n){ia===null?ia=[n]:ia.push(n)}function RA(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,dx(e)):(t.next=i.next,i.next=t),e.interleaved=t,Yi(n,r)}function Yi(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var ks=!1;function px(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function IA(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Wi(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function eo(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,Ie&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Yi(n,t)}return i=r.interleaved,i===null?(e.next=e,dx(r)):(e.next=i.next,i.next=e),r.interleaved=e,Yi(n,t)}function sp(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,ZO(n,t)}}function hT(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function tm(n,e,t,r){var i=n.updateQueue;ks=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=n.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,u=c=l=null,a=s;do{var d=a.lane,p=a.eventTime;if((r&d)===d){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=n,y=a;switch(d=e,p=t,y.tag){case 1:if(g=y.payload,typeof g=="function"){h=g.call(p,h,d);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=y.payload,d=typeof g=="function"?g.call(p,h,d):g,d==null)break e;h=rt({},h,d);break e;case 2:ks=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else p={eventTime:p,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=h):u=u.next=p,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(u===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);xa|=o,n.lanes=o,n.memoizedState=h}}function fT(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(q(191,i));i.call(r)}}}var of={},oi=No(of),gh=No(of),yh=No(of);function sa(n){if(n===of)throw Error(q(174));return n}function mx(n,e){switch(Be(yh,e),Be(gh,n),Be(oi,of),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ov(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=Ov(e,n)}Ge(oi),Be(oi,e)}function rc(){Ge(oi),Ge(gh),Ge(yh)}function NA(n){sa(yh.current);var e=sa(oi.current),t=Ov(e,n.type);e!==t&&(Be(gh,n),Be(oi,t))}function gx(n){gh.current===n&&(Ge(oi),Ge(gh))}var tt=No(0);function nm(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var e0=[];function yx(){for(var n=0;n<e0.length;n++)e0[n]._workInProgressVersionPrimary=null;e0.length=0}var op=cs.ReactCurrentDispatcher,t0=cs.ReactCurrentBatchConfig,Oa=0,nt=null,wt=null,Pt=null,rm=!1,$u=!1,vh=0,S4=0;function Jt(){throw Error(q(321))}function vx(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Rr(n[t],e[t]))return!1;return!0}function wx(n,e,t,r,i,s){if(Oa=s,nt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,op.current=n===null||n.memoizedState===null?E4:k4,n=t(r,i),$u){s=0;do{if($u=!1,vh=0,25<=s)throw Error(q(301));s+=1,Pt=wt=null,e.updateQueue=null,op.current=C4,n=t(r,i)}while($u)}if(op.current=im,e=wt!==null&&wt.next!==null,Oa=0,Pt=wt=nt=null,rm=!1,e)throw Error(q(300));return n}function Ox(){var n=vh!==0;return vh=0,n}function Hr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?nt.memoizedState=Pt=n:Pt=Pt.next=n,Pt}function pr(){if(wt===null){var n=nt.alternate;n=n!==null?n.memoizedState:null}else n=wt.next;var e=Pt===null?nt.memoizedState:Pt.next;if(e!==null)Pt=e,wt=n;else{if(n===null)throw Error(q(310));wt=n,n={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},Pt===null?nt.memoizedState=Pt=n:Pt=Pt.next=n}return Pt}function wh(n,e){return typeof e=="function"?e(n):e}function n0(n){var e=pr(),t=e.queue;if(t===null)throw Error(q(311));t.lastRenderedReducer=n;var r=wt,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Oa&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:n(r,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,nt.lanes|=u,xa|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Rr(r,e.memoizedState)||(Pn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,nt.lanes|=s,xa|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function r0(n){var e=pr(),t=e.queue;if(t===null)throw Error(q(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);Rr(s,e.memoizedState)||(Pn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function DA(){}function MA(n,e){var t=nt,r=pr(),i=e(),s=!Rr(r.memoizedState,i);if(s&&(r.memoizedState=i,Pn=!0),r=r.queue,xx(FA.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||Pt!==null&&Pt.memoizedState.tag&1){if(t.flags|=2048,Oh(9,VA.bind(null,t,r,i,e),void 0,null),Rt===null)throw Error(q(349));Oa&30||LA(t,e,i)}return i}function LA(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=nt.updateQueue,e===null?(e={lastEffect:null,stores:null},nt.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function VA(n,e,t,r){e.value=t,e.getSnapshot=r,QA(e)&&$A(n)}function FA(n,e,t){return t(function(){QA(e)&&$A(n)})}function QA(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Rr(n,t)}catch{return!0}}function $A(n){var e=Yi(n,1);e!==null&&Ar(e,n,1,-1)}function dT(n){var e=Hr();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wh,lastRenderedState:n},e.queue=n,n=n.dispatch=_4.bind(null,nt,n),[e.memoizedState,n]}function Oh(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=nt.updateQueue,e===null?(e={lastEffect:null,stores:null},nt.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function jA(){return pr().memoizedState}function ap(n,e,t,r){var i=Hr();nt.flags|=n,i.memoizedState=Oh(1|e,t,void 0,r===void 0?null:r)}function Og(n,e,t,r){var i=pr();r=r===void 0?null:r;var s=void 0;if(wt!==null){var o=wt.memoizedState;if(s=o.destroy,r!==null&&vx(r,o.deps)){i.memoizedState=Oh(e,t,s,r);return}}nt.flags|=n,i.memoizedState=Oh(1|e,t,s,r)}function pT(n,e){return ap(8390656,8,n,e)}function xx(n,e){return Og(2048,8,n,e)}function zA(n,e){return Og(4,2,n,e)}function BA(n,e){return Og(4,4,n,e)}function UA(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function WA(n,e,t){return t=t!=null?t.concat([n]):null,Og(4,4,UA.bind(null,e,n),t)}function Sx(){}function qA(n,e){var t=pr();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&vx(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function HA(n,e){var t=pr();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&vx(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function GA(n,e,t){return Oa&21?(Rr(t,e)||(t=ZP(),nt.lanes|=t,xa|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Pn=!0),n.memoizedState=t)}function b4(n,e){var t=Ve;Ve=t!==0&&4>t?t:4,n(!0);var r=t0.transition;t0.transition={};try{n(!1),e()}finally{Ve=t,t0.transition=r}}function XA(){return pr().memoizedState}function T4(n,e,t){var r=no(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},KA(n))YA(e,t);else if(t=RA(n,e,t,r),t!==null){var i=pn();Ar(t,n,r,i),JA(t,e,r)}}function _4(n,e,t){var r=no(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(KA(n))YA(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,Rr(a,o)){var l=e.interleaved;l===null?(i.next=i,dx(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=RA(n,e,i,r),t!==null&&(i=pn(),Ar(t,n,r,i),JA(t,e,r))}}function KA(n){var e=n.alternate;return n===nt||e!==null&&e===nt}function YA(n,e){$u=rm=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function JA(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,ZO(n,t)}}var im={readContext:dr,useCallback:Jt,useContext:Jt,useEffect:Jt,useImperativeHandle:Jt,useInsertionEffect:Jt,useLayoutEffect:Jt,useMemo:Jt,useReducer:Jt,useRef:Jt,useState:Jt,useDebugValue:Jt,useDeferredValue:Jt,useTransition:Jt,useMutableSource:Jt,useSyncExternalStore:Jt,useId:Jt,unstable_isNewReconciler:!1},E4={readContext:dr,useCallback:function(n,e){return Hr().memoizedState=[n,e===void 0?null:e],n},useContext:dr,useEffect:pT,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,ap(4194308,4,UA.bind(null,e,n),t)},useLayoutEffect:function(n,e){return ap(4194308,4,n,e)},useInsertionEffect:function(n,e){return ap(4,2,n,e)},useMemo:function(n,e){var t=Hr();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=Hr();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=T4.bind(null,nt,n),[r.memoizedState,n]},useRef:function(n){var e=Hr();return n={current:n},e.memoizedState=n},useState:dT,useDebugValue:Sx,useDeferredValue:function(n){return Hr().memoizedState=n},useTransition:function(){var n=dT(!1),e=n[0];return n=b4.bind(null,n[1]),Hr().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=nt,i=Hr();if(Ye){if(t===void 0)throw Error(q(407));t=t()}else{if(t=e(),Rt===null)throw Error(q(349));Oa&30||LA(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,pT(FA.bind(null,r,s,n),[n]),r.flags|=2048,Oh(9,VA.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=Hr(),e=Rt.identifierPrefix;if(Ye){var t=zi,r=ji;t=(r&~(1<<32-Pr(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=vh++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=S4++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},k4={readContext:dr,useCallback:qA,useContext:dr,useEffect:xx,useImperativeHandle:WA,useInsertionEffect:zA,useLayoutEffect:BA,useMemo:HA,useReducer:n0,useRef:jA,useState:function(){return n0(wh)},useDebugValue:Sx,useDeferredValue:function(n){var e=pr();return GA(e,wt.memoizedState,n)},useTransition:function(){var n=n0(wh)[0],e=pr().memoizedState;return[n,e]},useMutableSource:DA,useSyncExternalStore:MA,useId:XA,unstable_isNewReconciler:!1},C4={readContext:dr,useCallback:qA,useContext:dr,useEffect:xx,useImperativeHandle:WA,useInsertionEffect:zA,useLayoutEffect:BA,useMemo:HA,useReducer:r0,useRef:jA,useState:function(){return r0(wh)},useDebugValue:Sx,useDeferredValue:function(n){var e=pr();return wt===null?e.memoizedState=n:GA(e,wt.memoizedState,n)},useTransition:function(){var n=r0(wh)[0],e=pr().memoizedState;return[n,e]},useMutableSource:DA,useSyncExternalStore:MA,useId:XA,unstable_isNewReconciler:!1};function xr(n,e){if(n&&n.defaultProps){e=rt({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function jv(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:rt({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var xg={isMounted:function(n){return(n=n._reactInternals)?$a(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=pn(),i=no(n),s=Wi(r,i);s.payload=e,t!=null&&(s.callback=t),e=eo(n,s,i),e!==null&&(Ar(e,n,i,r),sp(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=pn(),i=no(n),s=Wi(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=eo(n,s,i),e!==null&&(Ar(e,n,i,r),sp(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=pn(),r=no(n),i=Wi(t,r);i.tag=2,e!=null&&(i.callback=e),e=eo(n,i,r),e!==null&&(Ar(e,n,r,t),sp(e,n,r))}};function mT(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!fh(t,r)||!fh(i,s):!0}function ZA(n,e,t){var r=!1,i=fo,s=e.contextType;return typeof s=="object"&&s!==null?s=dr(s):(i=Nn(e)?va:ln.current,r=e.contextTypes,s=(r=r!=null)?ec(n,i):fo),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=xg,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function gT(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&xg.enqueueReplaceState(e,e.state,null)}function zv(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs={},px(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=dr(s):(s=Nn(e)?va:ln.current,i.context=ec(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(jv(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&xg.enqueueReplaceState(i,i.state,null),tm(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function ic(n,e){try{var t="",r=e;do t+=n5(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function i0(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function Bv(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var P4=typeof WeakMap=="function"?WeakMap:Map;function eR(n,e,t){t=Wi(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){om||(om=!0,Zv=r),Bv(n,e)},t}function tR(n,e,t){t=Wi(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){Bv(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){Bv(n,e),typeof r!="function"&&(to===null?to=new Set([this]):to.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function yT(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new P4;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=B4.bind(null,n,e,t),e.then(n,n))}function vT(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function wT(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Wi(-1,1),e.tag=2,eo(t,e,1))),t.lanes|=1),n)}var A4=cs.ReactCurrentOwner,Pn=!1;function fn(n,e,t,r){e.child=n===null?AA(e,null,t,r):nc(e,n.child,t,r)}function OT(n,e,t,r,i){t=t.render;var s=e.ref;return Cl(e,i),r=wx(n,e,t,r,s,i),t=Ox(),n!==null&&!Pn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Ji(n,e,i)):(Ye&&t&&ax(e),e.flags|=1,fn(n,e,r,i),e.child)}function xT(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!Ax(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,nR(n,e,s,r,i)):(n=hp(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:fh,t(o,r)&&n.ref===e.ref)return Ji(n,e,i)}return e.flags|=1,n=ro(s,r),n.ref=e.ref,n.return=e,e.child=n}function nR(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(fh(s,r)&&n.ref===e.ref)if(Pn=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(Pn=!0);else return e.lanes=n.lanes,Ji(n,e,i)}return Uv(n,e,t,r,i)}function rR(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Be(wl,zn),zn|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Be(wl,zn),zn|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,Be(wl,zn),zn|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,Be(wl,zn),zn|=r;return fn(n,e,i,t),e.child}function iR(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Uv(n,e,t,r,i){var s=Nn(t)?va:ln.current;return s=ec(e,s),Cl(e,i),t=wx(n,e,t,r,s,i),r=Ox(),n!==null&&!Pn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Ji(n,e,i)):(Ye&&r&&ax(e),e.flags|=1,fn(n,e,t,i),e.child)}function ST(n,e,t,r,i){if(Nn(t)){var s=!0;Kp(e)}else s=!1;if(Cl(e,i),e.stateNode===null)lp(n,e),ZA(e,t,r),zv(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=dr(c):(c=Nn(t)?va:ln.current,c=ec(e,c));var u=t.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&gT(e,o,r,c),ks=!1;var d=e.memoizedState;o.state=d,tm(e,r,o,i),l=e.memoizedState,a!==r||d!==l||In.current||ks?(typeof u=="function"&&(jv(e,t,u,r),l=e.memoizedState),(a=ks||mT(e,t,a,r,d,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,IA(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:xr(e.type,a),o.props=c,h=e.pendingProps,d=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=dr(l):(l=Nn(t)?va:ln.current,l=ec(e,l));var p=t.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||d!==l)&&gT(e,o,r,l),ks=!1,d=e.memoizedState,o.state=d,tm(e,r,o,i);var g=e.memoizedState;a!==h||d!==g||In.current||ks?(typeof p=="function"&&(jv(e,t,p,r),g=e.memoizedState),(c=ks||mT(e,t,c,r,d,g,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=1024),r=!1)}return Wv(n,e,t,r,s,i)}function Wv(n,e,t,r,i,s){iR(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&aT(e,t,!1),Ji(n,e,s);r=e.stateNode,A4.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=nc(e,n.child,null,s),e.child=nc(e,null,a,s)):fn(n,e,a,s),e.memoizedState=r.state,i&&aT(e,t,!0),e.child}function sR(n){var e=n.stateNode;e.pendingContext?oT(n,e.pendingContext,e.pendingContext!==e.context):e.context&&oT(n,e.context,!1),mx(n,e.containerInfo)}function bT(n,e,t,r,i){return tc(),cx(i),e.flags|=256,fn(n,e,t,r),e.child}var qv={dehydrated:null,treeContext:null,retryLane:0};function Hv(n){return{baseLanes:n,cachePool:null,transitions:null}}function oR(n,e,t){var r=e.pendingProps,i=tt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),Be(tt,i&1),n===null)return Qv(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Tg(o,r,0,null),n=ma(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=Hv(t),e.memoizedState=qv,n):bx(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return R4(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ro(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=ro(a,s):(s=ma(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?Hv(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=qv,r}return s=n.child,n=s.sibling,r=ro(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function bx(n,e){return e=Tg({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function dd(n,e,t,r){return r!==null&&cx(r),nc(e,n.child,null,t),n=bx(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function R4(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=i0(Error(q(422))),dd(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Tg({mode:"visible",children:r.children},i,0,null),s=ma(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&nc(e,n.child,null,o),e.child.memoizedState=Hv(o),e.memoizedState=qv,s);if(!(e.mode&1))return dd(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(q(419)),r=i0(s,r,void 0),dd(n,e,o,r)}if(a=(o&n.childLanes)!==0,Pn||a){if(r=Rt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Yi(n,i),Ar(r,n,i,-1))}return Px(),r=i0(Error(q(421))),dd(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=U4.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,Wn=Zs(i.nextSibling),Gn=e,Ye=!0,Er=null,n!==null&&(rr[ir++]=ji,rr[ir++]=zi,rr[ir++]=wa,ji=n.id,zi=n.overflow,wa=e),e=bx(e,r.children),e.flags|=4096,e)}function TT(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),$v(n.return,e,t)}function s0(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function aR(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(fn(n,e,r.children,t),r=tt.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&TT(n,t,e);else if(n.tag===19)TT(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(Be(tt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&nm(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),s0(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&nm(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}s0(e,!0,t,null,s);break;case"together":s0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function lp(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Ji(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),xa|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(q(153));if(e.child!==null){for(n=e.child,t=ro(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=ro(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function I4(n,e,t){switch(e.tag){case 3:sR(e),tc();break;case 5:NA(e);break;case 1:Nn(e.type)&&Kp(e);break;case 4:mx(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Be(Zp,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Be(tt,tt.current&1),e.flags|=128,null):t&e.child.childLanes?oR(n,e,t):(Be(tt,tt.current&1),n=Ji(n,e,t),n!==null?n.sibling:null);Be(tt,tt.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return aR(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Be(tt,tt.current),r)break;return null;case 22:case 23:return e.lanes=0,rR(n,e,t)}return Ji(n,e,t)}var lR,Gv,cR,uR;lR=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};Gv=function(){};cR=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,sa(oi.current);var s=null;switch(t){case"input":i=gv(n,i),r=gv(n,r),s=[];break;case"select":i=rt({},i,{value:void 0}),r=rt({},r,{value:void 0}),s=[];break;case"textarea":i=wv(n,i),r=wv(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=Gp)}xv(t,r);var o;t=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(sh.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(sh.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&qe("scroll",n),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};uR=function(n,e,t,r){t!==r&&(e.flags|=4)};function cu(n,e){if(!Ye)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function Zt(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function N4(n,e,t){var r=e.pendingProps;switch(lx(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zt(e),null;case 1:return Nn(e.type)&&Xp(),Zt(e),null;case 3:return r=e.stateNode,rc(),Ge(In),Ge(ln),yx(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(hd(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Er!==null&&(nw(Er),Er=null))),Gv(n,e),Zt(e),null;case 5:gx(e);var i=sa(yh.current);if(t=e.type,n!==null&&e.stateNode!=null)cR(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(q(166));return Zt(e),null}if(n=sa(oi.current),hd(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[Jr]=e,r[mh]=s,n=(e.mode&1)!==0,t){case"dialog":qe("cancel",r),qe("close",r);break;case"iframe":case"object":case"embed":qe("load",r);break;case"video":case"audio":for(i=0;i<bu.length;i++)qe(bu[i],r);break;case"source":qe("error",r);break;case"img":case"image":case"link":qe("error",r),qe("load",r);break;case"details":qe("toggle",r);break;case"input":Nb(r,s),qe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},qe("invalid",r);break;case"textarea":Mb(r,s),qe("invalid",r)}xv(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&ud(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&ud(r.textContent,a,n),i=["children",""+a]):sh.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&qe("scroll",r)}switch(t){case"input":nd(r),Db(r,s,!0);break;case"textarea":nd(r),Lb(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Gp)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=FP(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[Jr]=e,n[mh]=r,lR(n,e,!1,!1),e.stateNode=n;e:{switch(o=Sv(t,r),t){case"dialog":qe("cancel",n),qe("close",n),i=r;break;case"iframe":case"object":case"embed":qe("load",n),i=r;break;case"video":case"audio":for(i=0;i<bu.length;i++)qe(bu[i],n);i=r;break;case"source":qe("error",n),i=r;break;case"img":case"image":case"link":qe("error",n),qe("load",n),i=r;break;case"details":qe("toggle",n),i=r;break;case"input":Nb(n,r),i=gv(n,r),qe("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=rt({},r,{value:void 0}),qe("invalid",n);break;case"textarea":Mb(n,r),i=wv(n,r),qe("invalid",n);break;default:i=r}xv(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?jP(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&QP(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&oh(n,l):typeof l=="number"&&oh(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(sh.hasOwnProperty(s)?l!=null&&s==="onScroll"&&qe("scroll",n):l!=null&&HO(n,s,l,o))}switch(t){case"input":nd(n),Db(n,r,!1);break;case"textarea":nd(n),Lb(n);break;case"option":r.value!=null&&n.setAttribute("value",""+ho(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?Tl(n,!!r.multiple,s,!1):r.defaultValue!=null&&Tl(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=Gp)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Zt(e),null;case 6:if(n&&e.stateNode!=null)uR(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(q(166));if(t=sa(yh.current),sa(oi.current),hd(e)){if(r=e.stateNode,t=e.memoizedProps,r[Jr]=e,(s=r.nodeValue!==t)&&(n=Gn,n!==null))switch(n.tag){case 3:ud(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&ud(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Jr]=e,e.stateNode=r}return Zt(e),null;case 13:if(Ge(tt),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Ye&&Wn!==null&&e.mode&1&&!(e.flags&128))CA(),tc(),e.flags|=98560,s=!1;else if(s=hd(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(q(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(q(317));s[Jr]=e}else tc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Zt(e),s=!1}else Er!==null&&(nw(Er),Er=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||tt.current&1?Tt===0&&(Tt=3):Px())),e.updateQueue!==null&&(e.flags|=4),Zt(e),null);case 4:return rc(),Gv(n,e),n===null&&dh(e.stateNode.containerInfo),Zt(e),null;case 10:return fx(e.type._context),Zt(e),null;case 17:return Nn(e.type)&&Xp(),Zt(e),null;case 19:if(Ge(tt),s=e.memoizedState,s===null)return Zt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)cu(s,!1);else{if(Tt!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=nm(n),o!==null){for(e.flags|=128,cu(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Be(tt,tt.current&1|2),e.child}n=n.sibling}s.tail!==null&&ht()>sc&&(e.flags|=128,r=!0,cu(s,!1),e.lanes=4194304)}else{if(!r)if(n=nm(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),cu(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ye)return Zt(e),null}else 2*ht()-s.renderingStartTime>sc&&t!==1073741824&&(e.flags|=128,r=!0,cu(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ht(),e.sibling=null,t=tt.current,Be(tt,r?t&1|2:t&1),e):(Zt(e),null);case 22:case 23:return Cx(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?zn&1073741824&&(Zt(e),e.subtreeFlags&6&&(e.flags|=8192)):Zt(e),null;case 24:return null;case 25:return null}throw Error(q(156,e.tag))}function D4(n,e){switch(lx(e),e.tag){case 1:return Nn(e.type)&&Xp(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return rc(),Ge(In),Ge(ln),yx(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return gx(e),null;case 13:if(Ge(tt),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(q(340));tc()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Ge(tt),null;case 4:return rc(),null;case 10:return fx(e.type._context),null;case 22:case 23:return Cx(),null;case 24:return null;default:return null}}var pd=!1,sn=!1,M4=typeof WeakSet=="function"?WeakSet:Set,se=null;function vl(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){lt(n,e,r)}else t.current=null}function Xv(n,e,t){try{t()}catch(r){lt(n,e,r)}}var _T=!1;function L4(n,e){if(Iv=Wp,n=mA(),ox(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,u=0,h=n,d=null;t:for(;;){for(var p;h!==t||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)d=h,h=p;for(;;){if(h===n)break t;if(d===t&&++c===i&&(a=o),d===s&&++u===r&&(l=o),(p=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=p}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(Nv={focusedElem:n,selectionRange:t},Wp=!1,se=e;se!==null;)if(e=se,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,se=n;else for(;se!==null;){e=se;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var y=g.memoizedProps,w=g.memoizedState,v=e.stateNode,O=v.getSnapshotBeforeUpdate(e.elementType===e.type?y:xr(e.type,y),w);v.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(E){lt(e,e.return,E)}if(n=e.sibling,n!==null){n.return=e.return,se=n;break}se=e.return}return g=_T,_T=!1,g}function ju(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&Xv(e,t,s)}i=i.next}while(i!==r)}}function Sg(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function Kv(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function hR(n){var e=n.alternate;e!==null&&(n.alternate=null,hR(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Jr],delete e[mh],delete e[Lv],delete e[v4],delete e[w4])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function fR(n){return n.tag===5||n.tag===3||n.tag===4}function ET(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||fR(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Yv(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Gp));else if(r!==4&&(n=n.child,n!==null))for(Yv(n,e,t),n=n.sibling;n!==null;)Yv(n,e,t),n=n.sibling}function Jv(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(Jv(n,e,t),n=n.sibling;n!==null;)Jv(n,e,t),n=n.sibling}var Vt=null,_r=!1;function xs(n,e,t){for(t=t.child;t!==null;)dR(n,e,t),t=t.sibling}function dR(n,e,t){if(si&&typeof si.onCommitFiberUnmount=="function")try{si.onCommitFiberUnmount(pg,t)}catch{}switch(t.tag){case 5:sn||vl(t,e);case 6:var r=Vt,i=_r;Vt=null,xs(n,e,t),Vt=r,_r=i,Vt!==null&&(_r?(n=Vt,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Vt.removeChild(t.stateNode));break;case 18:Vt!==null&&(_r?(n=Vt,t=t.stateNode,n.nodeType===8?Jy(n.parentNode,t):n.nodeType===1&&Jy(n,t),uh(n)):Jy(Vt,t.stateNode));break;case 4:r=Vt,i=_r,Vt=t.stateNode.containerInfo,_r=!0,xs(n,e,t),Vt=r,_r=i;break;case 0:case 11:case 14:case 15:if(!sn&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Xv(t,e,o),i=i.next}while(i!==r)}xs(n,e,t);break;case 1:if(!sn&&(vl(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){lt(t,e,a)}xs(n,e,t);break;case 21:xs(n,e,t);break;case 22:t.mode&1?(sn=(r=sn)||t.memoizedState!==null,xs(n,e,t),sn=r):xs(n,e,t);break;default:xs(n,e,t)}}function kT(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new M4),e.forEach(function(r){var i=W4.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function wr(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Vt=a.stateNode,_r=!1;break e;case 3:Vt=a.stateNode.containerInfo,_r=!0;break e;case 4:Vt=a.stateNode.containerInfo,_r=!0;break e}a=a.return}if(Vt===null)throw Error(q(160));dR(s,o,i),Vt=null,_r=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){lt(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)pR(e,n),e=e.sibling}function pR(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(wr(e,n),zr(n),r&4){try{ju(3,n,n.return),Sg(3,n)}catch(y){lt(n,n.return,y)}try{ju(5,n,n.return)}catch(y){lt(n,n.return,y)}}break;case 1:wr(e,n),zr(n),r&512&&t!==null&&vl(t,t.return);break;case 5:if(wr(e,n),zr(n),r&512&&t!==null&&vl(t,t.return),n.flags&32){var i=n.stateNode;try{oh(i,"")}catch(y){lt(n,n.return,y)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&LP(i,s),Sv(a,o);var c=Sv(a,s);for(o=0;o<l.length;o+=2){var u=l[o],h=l[o+1];u==="style"?jP(i,h):u==="dangerouslySetInnerHTML"?QP(i,h):u==="children"?oh(i,h):HO(i,u,h,c)}switch(a){case"input":yv(i,s);break;case"textarea":VP(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?Tl(i,!!s.multiple,p,!1):d!==!!s.multiple&&(s.defaultValue!=null?Tl(i,!!s.multiple,s.defaultValue,!0):Tl(i,!!s.multiple,s.multiple?[]:"",!1))}i[mh]=s}catch(y){lt(n,n.return,y)}}break;case 6:if(wr(e,n),zr(n),r&4){if(n.stateNode===null)throw Error(q(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(y){lt(n,n.return,y)}}break;case 3:if(wr(e,n),zr(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{uh(e.containerInfo)}catch(y){lt(n,n.return,y)}break;case 4:wr(e,n),zr(n);break;case 13:wr(e,n),zr(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Ex=ht())),r&4&&kT(n);break;case 22:if(u=t!==null&&t.memoizedState!==null,n.mode&1?(sn=(c=sn)||u,wr(e,n),sn=c):wr(e,n),zr(n),r&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!u&&n.mode&1)for(se=n,u=n.child;u!==null;){for(h=se=u;se!==null;){switch(d=se,p=d.child,d.tag){case 0:case 11:case 14:case 15:ju(4,d,d.return);break;case 1:vl(d,d.return);var g=d.stateNode;if(typeof g.componentWillUnmount=="function"){r=d,t=d.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(y){lt(r,t,y)}}break;case 5:vl(d,d.return);break;case 22:if(d.memoizedState!==null){PT(h);continue}}p!==null?(p.return=d,se=p):PT(h)}u=u.sibling}e:for(u=null,h=n;;){if(h.tag===5){if(u===null){u=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=$P("display",o))}catch(y){lt(n,n.return,y)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(y){lt(n,n.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:wr(e,n),zr(n),r&4&&kT(n);break;case 21:break;default:wr(e,n),zr(n)}}function zr(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(fR(t)){var r=t;break e}t=t.return}throw Error(q(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(oh(i,""),r.flags&=-33);var s=ET(n);Jv(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=ET(n);Yv(n,a,o);break;default:throw Error(q(161))}}catch(l){lt(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function V4(n,e,t){se=n,mR(n)}function mR(n,e,t){for(var r=(n.mode&1)!==0;se!==null;){var i=se,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||pd;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||sn;a=pd;var c=sn;if(pd=o,(sn=l)&&!c)for(se=i;se!==null;)o=se,l=o.child,o.tag===22&&o.memoizedState!==null?AT(i):l!==null?(l.return=o,se=l):AT(i);for(;s!==null;)se=s,mR(s),s=s.sibling;se=i,pd=a,sn=c}CT(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,se=s):CT(n)}}function CT(n){for(;se!==null;){var e=se;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:sn||Sg(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!sn)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:xr(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&fT(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}fT(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&uh(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}sn||e.flags&512&&Kv(e)}catch(d){lt(e,e.return,d)}}if(e===n){se=null;break}if(t=e.sibling,t!==null){t.return=e.return,se=t;break}se=e.return}}function PT(n){for(;se!==null;){var e=se;if(e===n){se=null;break}var t=e.sibling;if(t!==null){t.return=e.return,se=t;break}se=e.return}}function AT(n){for(;se!==null;){var e=se;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Sg(4,e)}catch(l){lt(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){lt(e,i,l)}}var s=e.return;try{Kv(e)}catch(l){lt(e,s,l)}break;case 5:var o=e.return;try{Kv(e)}catch(l){lt(e,o,l)}}}catch(l){lt(e,e.return,l)}if(e===n){se=null;break}var a=e.sibling;if(a!==null){a.return=e.return,se=a;break}se=e.return}}var F4=Math.ceil,sm=cs.ReactCurrentDispatcher,Tx=cs.ReactCurrentOwner,ur=cs.ReactCurrentBatchConfig,Ie=0,Rt=null,mt=null,Ut=0,zn=0,wl=No(0),Tt=0,xh=null,xa=0,bg=0,_x=0,zu=null,Tn=null,Ex=0,sc=1/0,Li=null,om=!1,Zv=null,to=null,md=!1,Us=null,am=0,Bu=0,ew=null,cp=-1,up=0;function pn(){return Ie&6?ht():cp!==-1?cp:cp=ht()}function no(n){return n.mode&1?Ie&2&&Ut!==0?Ut&-Ut:x4.transition!==null?(up===0&&(up=ZP()),up):(n=Ve,n!==0||(n=window.event,n=n===void 0?16:oA(n.type)),n):1}function Ar(n,e,t,r){if(50<Bu)throw Bu=0,ew=null,Error(q(185));nf(n,t,r),(!(Ie&2)||n!==Rt)&&(n===Rt&&(!(Ie&2)&&(bg|=t),Tt===4&&Is(n,Ut)),Dn(n,r),t===1&&Ie===0&&!(e.mode&1)&&(sc=ht()+500,wg&&Do()))}function Dn(n,e){var t=n.callbackNode;x5(n,e);var r=Up(n,n===Rt?Ut:0);if(r===0)t!==null&&Qb(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&Qb(t),e===1)n.tag===0?O4(RT.bind(null,n)):_A(RT.bind(null,n)),g4(function(){!(Ie&6)&&Do()}),t=null;else{switch(eA(r)){case 1:t=JO;break;case 4:t=YP;break;case 16:t=Bp;break;case 536870912:t=JP;break;default:t=Bp}t=bR(t,gR.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function gR(n,e){if(cp=-1,up=0,Ie&6)throw Error(q(327));var t=n.callbackNode;if(Pl()&&n.callbackNode!==t)return null;var r=Up(n,n===Rt?Ut:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=lm(n,r);else{e=r;var i=Ie;Ie|=2;var s=vR();(Rt!==n||Ut!==e)&&(Li=null,sc=ht()+500,pa(n,e));do try{j4();break}catch(a){yR(n,a)}while(!0);hx(),sm.current=s,Ie=i,mt!==null?e=0:(Rt=null,Ut=0,e=Tt)}if(e!==0){if(e===2&&(i=kv(n),i!==0&&(r=i,e=tw(n,i))),e===1)throw t=xh,pa(n,0),Is(n,r),Dn(n,ht()),t;if(e===6)Is(n,r);else{if(i=n.current.alternate,!(r&30)&&!Q4(i)&&(e=lm(n,r),e===2&&(s=kv(n),s!==0&&(r=s,e=tw(n,s))),e===1))throw t=xh,pa(n,0),Is(n,r),Dn(n,ht()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(q(345));case 2:Jo(n,Tn,Li);break;case 3:if(Is(n,r),(r&130023424)===r&&(e=Ex+500-ht(),10<e)){if(Up(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){pn(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=Mv(Jo.bind(null,n,Tn,Li),e);break}Jo(n,Tn,Li);break;case 4:if(Is(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-Pr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=ht()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*F4(r/1960))-r,10<r){n.timeoutHandle=Mv(Jo.bind(null,n,Tn,Li),r);break}Jo(n,Tn,Li);break;case 5:Jo(n,Tn,Li);break;default:throw Error(q(329))}}}return Dn(n,ht()),n.callbackNode===t?gR.bind(null,n):null}function tw(n,e){var t=zu;return n.current.memoizedState.isDehydrated&&(pa(n,e).flags|=256),n=lm(n,e),n!==2&&(e=Tn,Tn=t,e!==null&&nw(e)),n}function nw(n){Tn===null?Tn=n:Tn.push.apply(Tn,n)}function Q4(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!Rr(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Is(n,e){for(e&=~_x,e&=~bg,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Pr(e),r=1<<t;n[t]=-1,e&=~r}}function RT(n){if(Ie&6)throw Error(q(327));Pl();var e=Up(n,0);if(!(e&1))return Dn(n,ht()),null;var t=lm(n,e);if(n.tag!==0&&t===2){var r=kv(n);r!==0&&(e=r,t=tw(n,r))}if(t===1)throw t=xh,pa(n,0),Is(n,e),Dn(n,ht()),t;if(t===6)throw Error(q(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Jo(n,Tn,Li),Dn(n,ht()),null}function kx(n,e){var t=Ie;Ie|=1;try{return n(e)}finally{Ie=t,Ie===0&&(sc=ht()+500,wg&&Do())}}function Sa(n){Us!==null&&Us.tag===0&&!(Ie&6)&&Pl();var e=Ie;Ie|=1;var t=ur.transition,r=Ve;try{if(ur.transition=null,Ve=1,n)return n()}finally{Ve=r,ur.transition=t,Ie=e,!(Ie&6)&&Do()}}function Cx(){zn=wl.current,Ge(wl)}function pa(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,m4(t)),mt!==null)for(t=mt.return;t!==null;){var r=t;switch(lx(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Xp();break;case 3:rc(),Ge(In),Ge(ln),yx();break;case 5:gx(r);break;case 4:rc();break;case 13:Ge(tt);break;case 19:Ge(tt);break;case 10:fx(r.type._context);break;case 22:case 23:Cx()}t=t.return}if(Rt=n,mt=n=ro(n.current,null),Ut=zn=e,Tt=0,xh=null,_x=bg=xa=0,Tn=zu=null,ia!==null){for(e=0;e<ia.length;e++)if(t=ia[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}ia=null}return n}function yR(n,e){do{var t=mt;try{if(hx(),op.current=im,rm){for(var r=nt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}rm=!1}if(Oa=0,Pt=wt=nt=null,$u=!1,vh=0,Tx.current=null,t===null||t.return===null){Tt=1,xh=e,mt=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=Ut,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=vT(o);if(p!==null){p.flags&=-257,wT(p,o,a,s,e),p.mode&1&&yT(s,c,e),e=p,l=c;var g=e.updateQueue;if(g===null){var y=new Set;y.add(l),e.updateQueue=y}else g.add(l);break e}else{if(!(e&1)){yT(s,c,e),Px();break e}l=Error(q(426))}}else if(Ye&&a.mode&1){var w=vT(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),wT(w,o,a,s,e),cx(ic(l,a));break e}}s=l=ic(l,a),Tt!==4&&(Tt=2),zu===null?zu=[s]:zu.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=eR(s,l,e);hT(s,v);break e;case 1:a=l;var O=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof O.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(to===null||!to.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var E=tR(s,a,e);hT(s,E);break e}}s=s.return}while(s!==null)}OR(t)}catch(R){e=R,mt===t&&t!==null&&(mt=t=t.return);continue}break}while(!0)}function vR(){var n=sm.current;return sm.current=im,n===null?im:n}function Px(){(Tt===0||Tt===3||Tt===2)&&(Tt=4),Rt===null||!(xa&268435455)&&!(bg&268435455)||Is(Rt,Ut)}function lm(n,e){var t=Ie;Ie|=2;var r=vR();(Rt!==n||Ut!==e)&&(Li=null,pa(n,e));do try{$4();break}catch(i){yR(n,i)}while(!0);if(hx(),Ie=t,sm.current=r,mt!==null)throw Error(q(261));return Rt=null,Ut=0,Tt}function $4(){for(;mt!==null;)wR(mt)}function j4(){for(;mt!==null&&!f5();)wR(mt)}function wR(n){var e=SR(n.alternate,n,zn);n.memoizedProps=n.pendingProps,e===null?OR(n):mt=e,Tx.current=null}function OR(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=D4(t,e),t!==null){t.flags&=32767,mt=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Tt=6,mt=null;return}}else if(t=N4(t,e,zn),t!==null){mt=t;return}if(e=e.sibling,e!==null){mt=e;return}mt=e=n}while(e!==null);Tt===0&&(Tt=5)}function Jo(n,e,t){var r=Ve,i=ur.transition;try{ur.transition=null,Ve=1,z4(n,e,t,r)}finally{ur.transition=i,Ve=r}return null}function z4(n,e,t,r){do Pl();while(Us!==null);if(Ie&6)throw Error(q(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(q(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(S5(n,s),n===Rt&&(mt=Rt=null,Ut=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||md||(md=!0,bR(Bp,function(){return Pl(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=ur.transition,ur.transition=null;var o=Ve;Ve=1;var a=Ie;Ie|=4,Tx.current=null,L4(n,t),pR(t,n),l4(Nv),Wp=!!Iv,Nv=Iv=null,n.current=t,V4(t),d5(),Ie=a,Ve=o,ur.transition=s}else n.current=t;if(md&&(md=!1,Us=n,am=i),s=n.pendingLanes,s===0&&(to=null),g5(t.stateNode),Dn(n,ht()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(om)throw om=!1,n=Zv,Zv=null,n;return am&1&&n.tag!==0&&Pl(),s=n.pendingLanes,s&1?n===ew?Bu++:(Bu=0,ew=n):Bu=0,Do(),null}function Pl(){if(Us!==null){var n=eA(am),e=ur.transition,t=Ve;try{if(ur.transition=null,Ve=16>n?16:n,Us===null)var r=!1;else{if(n=Us,Us=null,am=0,Ie&6)throw Error(q(331));var i=Ie;for(Ie|=4,se=n.current;se!==null;){var s=se,o=s.child;if(se.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(se=c;se!==null;){var u=se;switch(u.tag){case 0:case 11:case 15:ju(8,u,s)}var h=u.child;if(h!==null)h.return=u,se=h;else for(;se!==null;){u=se;var d=u.sibling,p=u.return;if(hR(u),u===c){se=null;break}if(d!==null){d.return=p,se=d;break}se=p}}}var g=s.alternate;if(g!==null){var y=g.child;if(y!==null){g.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}se=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,se=o;else e:for(;se!==null;){if(s=se,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ju(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,se=v;break e}se=s.return}}var O=n.current;for(se=O;se!==null;){o=se;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,se=S;else e:for(o=O;se!==null;){if(a=se,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Sg(9,a)}}catch(R){lt(a,a.return,R)}if(a===o){se=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,se=E;break e}se=a.return}}if(Ie=i,Do(),si&&typeof si.onPostCommitFiberRoot=="function")try{si.onPostCommitFiberRoot(pg,n)}catch{}r=!0}return r}finally{Ve=t,ur.transition=e}}return!1}function IT(n,e,t){e=ic(t,e),e=eR(n,e,1),n=eo(n,e,1),e=pn(),n!==null&&(nf(n,1,e),Dn(n,e))}function lt(n,e,t){if(n.tag===3)IT(n,n,t);else for(;e!==null;){if(e.tag===3){IT(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(to===null||!to.has(r))){n=ic(t,n),n=tR(e,n,1),e=eo(e,n,1),n=pn(),e!==null&&(nf(e,1,n),Dn(e,n));break}}e=e.return}}function B4(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=pn(),n.pingedLanes|=n.suspendedLanes&t,Rt===n&&(Ut&t)===t&&(Tt===4||Tt===3&&(Ut&130023424)===Ut&&500>ht()-Ex?pa(n,0):_x|=t),Dn(n,e)}function xR(n,e){e===0&&(n.mode&1?(e=sd,sd<<=1,!(sd&130023424)&&(sd=4194304)):e=1);var t=pn();n=Yi(n,e),n!==null&&(nf(n,e,t),Dn(n,t))}function U4(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),xR(n,t)}function W4(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(q(314))}r!==null&&r.delete(e),xR(n,t)}var SR;SR=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||In.current)Pn=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Pn=!1,I4(n,e,t);Pn=!!(n.flags&131072)}else Pn=!1,Ye&&e.flags&1048576&&EA(e,Jp,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;lp(n,e),n=e.pendingProps;var i=ec(e,ln.current);Cl(e,t),i=wx(null,e,r,n,i,t);var s=Ox();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Nn(r)?(s=!0,Kp(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,px(e),i.updater=xg,e.stateNode=i,i._reactInternals=e,zv(e,r,n,t),e=Wv(null,e,r,!0,s,t)):(e.tag=0,Ye&&s&&ax(e),fn(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(lp(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=H4(r),n=xr(r,n),i){case 0:e=Uv(null,e,r,n,t);break e;case 1:e=ST(null,e,r,n,t);break e;case 11:e=OT(null,e,r,n,t);break e;case 14:e=xT(null,e,r,xr(r.type,n),t);break e}throw Error(q(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:xr(r,i),Uv(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:xr(r,i),ST(n,e,r,i,t);case 3:e:{if(sR(e),n===null)throw Error(q(387));r=e.pendingProps,s=e.memoizedState,i=s.element,IA(n,e),tm(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ic(Error(q(423)),e),e=bT(n,e,r,t,i);break e}else if(r!==i){i=ic(Error(q(424)),e),e=bT(n,e,r,t,i);break e}else for(Wn=Zs(e.stateNode.containerInfo.firstChild),Gn=e,Ye=!0,Er=null,t=AA(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(tc(),r===i){e=Ji(n,e,t);break e}fn(n,e,r,t)}e=e.child}return e;case 5:return NA(e),n===null&&Qv(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,Dv(r,i)?o=null:s!==null&&Dv(r,s)&&(e.flags|=32),iR(n,e),fn(n,e,o,t),e.child;case 6:return n===null&&Qv(e),null;case 13:return oR(n,e,t);case 4:return mx(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=nc(e,null,r,t):fn(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:xr(r,i),OT(n,e,r,i,t);case 7:return fn(n,e,e.pendingProps,t),e.child;case 8:return fn(n,e,e.pendingProps.children,t),e.child;case 12:return fn(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Be(Zp,r._currentValue),r._currentValue=o,s!==null)if(Rr(s.value,o)){if(s.children===i.children&&!In.current){e=Ji(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Wi(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),$v(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(q(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),$v(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}fn(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Cl(e,t),i=dr(i),r=r(i),e.flags|=1,fn(n,e,r,t),e.child;case 14:return r=e.type,i=xr(r,e.pendingProps),i=xr(r.type,i),xT(n,e,r,i,t);case 15:return nR(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:xr(r,i),lp(n,e),e.tag=1,Nn(r)?(n=!0,Kp(e)):n=!1,Cl(e,t),ZA(e,r,i),zv(e,r,i,t),Wv(null,e,r,!0,n,t);case 19:return aR(n,e,t);case 22:return rR(n,e,t)}throw Error(q(156,e.tag))};function bR(n,e){return KP(n,e)}function q4(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ar(n,e,t,r){return new q4(n,e,t,r)}function Ax(n){return n=n.prototype,!(!n||!n.isReactComponent)}function H4(n){if(typeof n=="function")return Ax(n)?1:0;if(n!=null){if(n=n.$$typeof,n===XO)return 11;if(n===KO)return 14}return 2}function ro(n,e){var t=n.alternate;return t===null?(t=ar(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function hp(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")Ax(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case cl:return ma(t.children,i,s,e);case GO:o=8,i|=8;break;case fv:return n=ar(12,t,e,i|2),n.elementType=fv,n.lanes=s,n;case dv:return n=ar(13,t,e,i),n.elementType=dv,n.lanes=s,n;case pv:return n=ar(19,t,e,i),n.elementType=pv,n.lanes=s,n;case NP:return Tg(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case RP:o=10;break e;case IP:o=9;break e;case XO:o=11;break e;case KO:o=14;break e;case Es:o=16,r=null;break e}throw Error(q(130,n==null?n:typeof n,""))}return e=ar(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function ma(n,e,t,r){return n=ar(7,n,r,e),n.lanes=t,n}function Tg(n,e,t,r){return n=ar(22,n,r,e),n.elementType=NP,n.lanes=t,n.stateNode={isHidden:!1},n}function o0(n,e,t){return n=ar(6,n,null,e),n.lanes=t,n}function a0(n,e,t){return e=ar(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function G4(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jy(0),this.expirationTimes=jy(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jy(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Rx(n,e,t,r,i,s,o,a,l){return n=new G4(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=ar(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},px(s),n}function X4(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ll,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function TR(n){if(!n)return fo;n=n._reactInternals;e:{if($a(n)!==n||n.tag!==1)throw Error(q(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Nn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(q(171))}if(n.tag===1){var t=n.type;if(Nn(t))return TA(n,t,e)}return e}function _R(n,e,t,r,i,s,o,a,l){return n=Rx(t,r,!0,n,i,s,o,a,l),n.context=TR(null),t=n.current,r=pn(),i=no(t),s=Wi(r,i),s.callback=e??null,eo(t,s,i),n.current.lanes=i,nf(n,i,r),Dn(n,r),n}function _g(n,e,t,r){var i=e.current,s=pn(),o=no(i);return t=TR(t),e.context===null?e.context=t:e.pendingContext=t,e=Wi(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=eo(i,e,o),n!==null&&(Ar(n,i,o,s),sp(n,i,o)),o}function cm(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function NT(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function Ix(n,e){NT(n,e),(n=n.alternate)&&NT(n,e)}function K4(){return null}var ER=typeof reportError=="function"?reportError:function(n){console.error(n)};function Nx(n){this._internalRoot=n}Eg.prototype.render=Nx.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(q(409));_g(n,e,null,null)};Eg.prototype.unmount=Nx.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Sa(function(){_g(null,n,null,null)}),e[Ki]=null}};function Eg(n){this._internalRoot=n}Eg.prototype.unstable_scheduleHydration=function(n){if(n){var e=rA();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Rs.length&&e!==0&&e<Rs[t].priority;t++);Rs.splice(t,0,n),t===0&&sA(n)}};function Dx(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function kg(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function DT(){}function Y4(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=cm(o);s.call(c)}}var o=_R(e,r,n,0,null,!1,!1,"",DT);return n._reactRootContainer=o,n[Ki]=o.current,dh(n.nodeType===8?n.parentNode:n),Sa(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=cm(l);a.call(c)}}var l=Rx(n,0,!1,null,null,!1,!1,"",DT);return n._reactRootContainer=l,n[Ki]=l.current,dh(n.nodeType===8?n.parentNode:n),Sa(function(){_g(e,l,t,r)}),l}function Cg(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=cm(o);a.call(l)}}_g(e,o,n,i)}else o=Y4(t,e,n,i,r);return cm(o)}tA=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Su(e.pendingLanes);t!==0&&(ZO(e,t|1),Dn(e,ht()),!(Ie&6)&&(sc=ht()+500,Do()))}break;case 13:Sa(function(){var r=Yi(n,1);if(r!==null){var i=pn();Ar(r,n,1,i)}}),Ix(n,1)}};ex=function(n){if(n.tag===13){var e=Yi(n,134217728);if(e!==null){var t=pn();Ar(e,n,134217728,t)}Ix(n,134217728)}};nA=function(n){if(n.tag===13){var e=no(n),t=Yi(n,e);if(t!==null){var r=pn();Ar(t,n,e,r)}Ix(n,e)}};rA=function(){return Ve};iA=function(n,e){var t=Ve;try{return Ve=n,e()}finally{Ve=t}};Tv=function(n,e,t){switch(e){case"input":if(yv(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=vg(r);if(!i)throw Error(q(90));MP(r),yv(r,i)}}}break;case"textarea":VP(n,t);break;case"select":e=t.value,e!=null&&Tl(n,!!t.multiple,e,!1)}};UP=kx;WP=Sa;var J4={usingClientEntryPoint:!1,Events:[sf,dl,vg,zP,BP,kx]},uu={findFiberByHostInstance:ra,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Z4={bundleType:uu.bundleType,version:uu.version,rendererPackageName:uu.rendererPackageName,rendererConfig:uu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:cs.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=GP(n),n===null?null:n.stateNode},findFiberByHostInstance:uu.findFiberByHostInstance||K4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gd.isDisabled&&gd.supportsFiber)try{pg=gd.inject(Z4),si=gd}catch{}}Yn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J4;Yn.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Dx(e))throw Error(q(200));return X4(n,e,null,t)};Yn.createRoot=function(n,e){if(!Dx(n))throw Error(q(299));var t=!1,r="",i=ER;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Rx(n,1,!1,null,null,t,!1,r,i),n[Ki]=e.current,dh(n.nodeType===8?n.parentNode:n),new Nx(e)};Yn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(q(188)):(n=Object.keys(n).join(","),Error(q(268,n)));return n=GP(e),n=n===null?null:n.stateNode,n};Yn.flushSync=function(n){return Sa(n)};Yn.hydrate=function(n,e,t){if(!kg(e))throw Error(q(200));return Cg(null,n,e,!0,t)};Yn.hydrateRoot=function(n,e,t){if(!Dx(n))throw Error(q(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=ER;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=_R(e,null,n,1,t??null,i,!1,s,o),n[Ki]=e.current,dh(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new Eg(e)};Yn.render=function(n,e,t){if(!kg(e))throw Error(q(200));return Cg(null,n,e,!1,t)};Yn.unmountComponentAtNode=function(n){if(!kg(n))throw Error(q(40));return n._reactRootContainer?(Sa(function(){Cg(null,null,n,!1,function(){n._reactRootContainer=null,n[Ki]=null})}),!0):!1};Yn.unstable_batchedUpdates=kx;Yn.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!kg(t))throw Error(q(200));if(n==null||n._reactInternals===void 0)throw Error(q(38));return Cg(n,e,t,!1,r)};Yn.version="18.3.1-next-f1338f8080-20240426";function kR(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(kR)}catch(n){console.error(n)}}kR(),kP.exports=Yn;var af=kP.exports;const CR=fg(af);var MT=af;uv.createRoot=MT.createRoot,uv.hydrateRoot=MT.hydrateRoot;const eQ=1,tQ=1e6;let l0=0;function nQ(){return l0=(l0+1)%Number.MAX_SAFE_INTEGER,l0.toString()}const c0=new Map,LT=n=>{if(c0.has(n))return;const e=setTimeout(()=>{c0.delete(n),Uu({type:"REMOVE_TOAST",toastId:n})},tQ);c0.set(n,e)},rQ=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,eQ)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?LT(t):n.toasts.forEach(r=>{LT(r.id)}),{...n,toasts:n.toasts.map(r=>r.id===t||t===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},fp=[];let dp={toasts:[]};function Uu(n){dp=rQ(dp,n),fp.forEach(e=>{e(dp)})}function iQ({...n}){const e=nQ(),t=i=>Uu({type:"UPDATE_TOAST",toast:{...i,id:e}}),r=()=>Uu({type:"DISMISS_TOAST",toastId:e});return Uu({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:t}}function Mx(){const[n,e]=k.useState(dp);return k.useEffect(()=>(fp.push(e),()=>{const t=fp.indexOf(e);t>-1&&fp.splice(t,1)}),[n]),{...n,toast:iQ,dismiss:t=>Uu({type:"DISMISS_TOAST",toastId:t})}}function xt(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n==null||n(i),t===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function VT(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function PR(...n){return e=>{let t=!1;const r=n.map(i=>{const s=VT(i,e);return!t&&typeof s=="function"&&(t=!0),s});if(t)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():VT(n[i],null)}}}}function Ir(...n){return k.useCallback(PR(...n),n)}function lf(n,e=[]){let t=[];function r(s,o){const a=k.createContext(o),l=t.length;t=[...t,o];const c=h=>{var v;const{scope:d,children:p,...g}=h,y=((v=d==null?void 0:d[n])==null?void 0:v[l])||a,w=k.useMemo(()=>g,Object.values(g));return A.jsx(y.Provider,{value:w,children:p})};c.displayName=s+"Provider";function u(h,d){var y;const p=((y=d==null?void 0:d[n])==null?void 0:y[l])||a,g=k.useContext(p);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${s}\``)}return[c,u]}const i=()=>{const s=t.map(o=>k.createContext(o));return function(a){const l=(a==null?void 0:a[n])||s;return k.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return i.scopeName=n,[r,sQ(i,...e)]}function sQ(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(s)[`__scope${c}`];return{...a,...h}},{});return k.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function um(n){const e=aQ(n),t=k.forwardRef((r,i)=>{const{children:s,...o}=r,a=k.Children.toArray(s),l=a.find(cQ);if(l){const c=l.props.children,u=a.map(h=>h===l?k.Children.count(c)>1?k.Children.only(null):k.isValidElement(c)?c.props.children:null:h);return A.jsx(e,{...o,ref:i,children:k.isValidElement(c)?k.cloneElement(c,void 0,u):null})}return A.jsx(e,{...o,ref:i,children:s})});return t.displayName=`${n}.Slot`,t}var oQ=um("Slot");function aQ(n){const e=k.forwardRef((t,r)=>{const{children:i,...s}=t;if(k.isValidElement(i)){const o=hQ(i),a=uQ(s,i.props);return i.type!==k.Fragment&&(a.ref=r?PR(r,o):o),k.cloneElement(i,a)}return k.Children.count(i)>1?k.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var AR=Symbol("radix.slottable");function lQ(n){const e=({children:t})=>A.jsx(A.Fragment,{children:t});return e.displayName=`${n}.Slottable`,e.__radixId=AR,e}function cQ(n){return k.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===AR}function uQ(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?t[r]=(...a)=>{s(...a),i(...a)}:i&&(t[r]=i):r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}function hQ(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function fQ(n){const e=n+"CollectionProvider",[t,r]=lf(e),[i,s]=t(e,{collectionRef:{current:null},itemMap:new Map}),o=y=>{const{scope:w,children:v}=y,O=H.useRef(null),S=H.useRef(new Map).current;return A.jsx(i,{scope:w,itemMap:S,collectionRef:O,children:v})};o.displayName=e;const a=n+"CollectionSlot",l=um(a),c=H.forwardRef((y,w)=>{const{scope:v,children:O}=y,S=s(a,v),E=Ir(w,S.collectionRef);return A.jsx(l,{ref:E,children:O})});c.displayName=a;const u=n+"CollectionItemSlot",h="data-radix-collection-item",d=um(u),p=H.forwardRef((y,w)=>{const{scope:v,children:O,...S}=y,E=H.useRef(null),R=Ir(w,E),M=s(u,v);return H.useEffect(()=>(M.itemMap.set(E,{ref:E,...S}),()=>void M.itemMap.delete(E))),A.jsx(d,{[h]:"",ref:R,children:O})});p.displayName=u;function g(y){const w=s(n+"CollectionConsumer",y);return H.useCallback(()=>{const O=w.collectionRef.current;if(!O)return[];const S=Array.from(O.querySelectorAll(`[${h}]`));return Array.from(w.itemMap.values()).sort((M,b)=>S.indexOf(M.ref.current)-S.indexOf(b.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:o,Slot:c,ItemSlot:p},g,r]}var dQ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ht=dQ.reduce((n,e)=>{const t=um(`Primitive.${e}`),r=k.forwardRef((i,s)=>{const{asChild:o,...a}=i,l=o?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),A.jsx(l,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function RR(n,e){n&&af.flushSync(()=>n.dispatchEvent(e))}function po(n){const e=k.useRef(n);return k.useEffect(()=>{e.current=n}),k.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function pQ(n,e=globalThis==null?void 0:globalThis.document){const t=po(n);k.useEffect(()=>{const r=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var mQ="DismissableLayer",rw="dismissableLayer.update",gQ="dismissableLayer.pointerDownOutside",yQ="dismissableLayer.focusOutside",FT,IR=k.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Lx=k.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=n,c=k.useContext(IR),[u,h]=k.useState(null),d=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=k.useState({}),g=Ir(e,b=>h(b)),y=Array.from(c.layers),[w]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),v=y.indexOf(w),O=u?y.indexOf(u):-1,S=c.layersWithOutsidePointerEventsDisabled.size>0,E=O>=v,R=wQ(b=>{const T=b.target,_=[...c.branches].some(C=>C.contains(T));!E||_||(i==null||i(b),o==null||o(b),b.defaultPrevented||a==null||a())},d),M=OQ(b=>{const T=b.target;[...c.branches].some(C=>C.contains(T))||(s==null||s(b),o==null||o(b),b.defaultPrevented||a==null||a())},d);return pQ(b=>{O===c.layers.size-1&&(r==null||r(b),!b.defaultPrevented&&a&&(b.preventDefault(),a()))},d),k.useEffect(()=>{if(u)return t&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(FT=d.body.style.pointerEvents,d.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),QT(),()=>{t&&c.layersWithOutsidePointerEventsDisabled.size===1&&(d.body.style.pointerEvents=FT)}},[u,d,t,c]),k.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),QT())},[u,c]),k.useEffect(()=>{const b=()=>p({});return document.addEventListener(rw,b),()=>document.removeEventListener(rw,b)},[]),A.jsx(Ht.div,{...l,ref:g,style:{pointerEvents:S?E?"auto":"none":void 0,...n.style},onFocusCapture:xt(n.onFocusCapture,M.onFocusCapture),onBlurCapture:xt(n.onBlurCapture,M.onBlurCapture),onPointerDownCapture:xt(n.onPointerDownCapture,R.onPointerDownCapture)})});Lx.displayName=mQ;var vQ="DismissableLayerBranch",NR=k.forwardRef((n,e)=>{const t=k.useContext(IR),r=k.useRef(null),i=Ir(e,r);return k.useEffect(()=>{const s=r.current;if(s)return t.branches.add(s),()=>{t.branches.delete(s)}},[t.branches]),A.jsx(Ht.div,{...n,ref:i})});NR.displayName=vQ;function wQ(n,e=globalThis==null?void 0:globalThis.document){const t=po(n),r=k.useRef(!1),i=k.useRef(()=>{});return k.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){DR(gQ,t,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function OQ(n,e=globalThis==null?void 0:globalThis.document){const t=po(n),r=k.useRef(!1);return k.useEffect(()=>{const i=s=>{s.target&&!r.current&&DR(yQ,t,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function QT(){const n=new CustomEvent(rw);document.dispatchEvent(n)}function DR(n,e,t,{discrete:r}){const i=t.originalEvent.target,s=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?RR(i,s):i.dispatchEvent(s)}var xQ=Lx,SQ=NR,mo=globalThis!=null&&globalThis.document?k.useLayoutEffect:()=>{},bQ="Portal",MR=k.forwardRef((n,e)=>{var a;const{container:t,...r}=n,[i,s]=k.useState(!1);mo(()=>s(!0),[]);const o=t||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?CR.createPortal(A.jsx(Ht.div,{...r,ref:e}),o):null});MR.displayName=bQ;function TQ(n,e){return k.useReducer((t,r)=>e[t][r]??t,n)}var Vx=n=>{const{present:e,children:t}=n,r=_Q(e),i=typeof t=="function"?t({present:r.isPresent}):k.Children.only(t),s=Ir(r.ref,EQ(i));return typeof t=="function"||r.isPresent?k.cloneElement(i,{ref:s}):null};Vx.displayName="Presence";function _Q(n){const[e,t]=k.useState(),r=k.useRef(null),i=k.useRef(n),s=k.useRef("none"),o=n?"mounted":"unmounted",[a,l]=TQ(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return k.useEffect(()=>{const c=yd(r.current);s.current=a==="mounted"?c:"none"},[a]),mo(()=>{const c=r.current,u=i.current;if(u!==n){const d=s.current,p=yd(c);n?l("MOUNT"):p==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&d!==p?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,l]),mo(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,h=p=>{const y=yd(r.current).includes(p.animationName);if(p.target===e&&y&&(l("ANIMATION_END"),!i.current)){const w=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=w)})}},d=p=>{p.target===e&&(s.current=yd(r.current))};return e.addEventListener("animationstart",d),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",d),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:k.useCallback(c=>{r.current=c?getComputedStyle(c):null,t(c)},[])}}function yd(n){return(n==null?void 0:n.animationName)||"none"}function EQ(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var kQ=_P[" useInsertionEffect ".trim().toString()]||mo;function CQ({prop:n,defaultProp:e,onChange:t=()=>{},caller:r}){const[i,s,o]=PQ({defaultProp:e,onChange:t}),a=n!==void 0,l=a?n:i;{const u=k.useRef(n!==void 0);k.useEffect(()=>{const h=u.current;h!==a&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,r])}const c=k.useCallback(u=>{var h;if(a){const d=AQ(u)?u(n):u;d!==n&&((h=o.current)==null||h.call(o,d))}else s(u)},[a,n,s,o]);return[l,c]}function PQ({defaultProp:n,onChange:e}){const[t,r]=k.useState(n),i=k.useRef(t),s=k.useRef(e);return kQ(()=>{s.current=e},[e]),k.useEffect(()=>{var o;i.current!==t&&((o=s.current)==null||o.call(s,t),i.current=t)},[t,i]),[t,r,s]}function AQ(n){return typeof n=="function"}var RQ=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),IQ="VisuallyHidden",Pg=k.forwardRef((n,e)=>A.jsx(Ht.span,{...n,ref:e,style:{...RQ,...n.style}}));Pg.displayName=IQ;var NQ=Pg,Fx="ToastProvider",[Qx,DQ,MQ]=fQ("Toast"),[LR,bre]=lf("Toast",[MQ]),[LQ,Ag]=LR(Fx),VR=n=>{const{__scopeToast:e,label:t="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:o}=n,[a,l]=k.useState(null),[c,u]=k.useState(0),h=k.useRef(!1),d=k.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${Fx}\`. Expected non-empty \`string\`.`),A.jsx(Qx.Provider,{scope:e,children:A.jsx(LQ,{scope:e,label:t,duration:r,swipeDirection:i,swipeThreshold:s,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:k.useCallback(()=>u(p=>p+1),[]),onToastRemove:k.useCallback(()=>u(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:d,children:o})})};VR.displayName=Fx;var FR="ToastViewport",VQ=["F8"],iw="toast.viewportPause",sw="toast.viewportResume",QR=k.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:r=VQ,label:i="Notifications ({hotkey})",...s}=n,o=Ag(FR,t),a=DQ(t),l=k.useRef(null),c=k.useRef(null),u=k.useRef(null),h=k.useRef(null),d=Ir(e,h,o.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=o.toastCount>0;k.useEffect(()=>{const w=v=>{var S;r.length!==0&&r.every(E=>v[E]||v.code===E)&&((S=h.current)==null||S.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[r]),k.useEffect(()=>{const w=l.current,v=h.current;if(g&&w&&v){const O=()=>{if(!o.isClosePausedRef.current){const M=new CustomEvent(iw);v.dispatchEvent(M),o.isClosePausedRef.current=!0}},S=()=>{if(o.isClosePausedRef.current){const M=new CustomEvent(sw);v.dispatchEvent(M),o.isClosePausedRef.current=!1}},E=M=>{!w.contains(M.relatedTarget)&&S()},R=()=>{w.contains(document.activeElement)||S()};return w.addEventListener("focusin",O),w.addEventListener("focusout",E),w.addEventListener("pointermove",O),w.addEventListener("pointerleave",R),window.addEventListener("blur",O),window.addEventListener("focus",S),()=>{w.removeEventListener("focusin",O),w.removeEventListener("focusout",E),w.removeEventListener("pointermove",O),w.removeEventListener("pointerleave",R),window.removeEventListener("blur",O),window.removeEventListener("focus",S)}}},[g,o.isClosePausedRef]);const y=k.useCallback(({tabbingDirection:w})=>{const O=a().map(S=>{const E=S.ref.current,R=[E,...KQ(E)];return w==="forwards"?R:R.reverse()});return(w==="forwards"?O.reverse():O).flat()},[a]);return k.useEffect(()=>{const w=h.current;if(w){const v=O=>{var R,M,b;const S=O.altKey||O.ctrlKey||O.metaKey;if(O.key==="Tab"&&!S){const T=document.activeElement,_=O.shiftKey;if(O.target===w&&_){(R=c.current)==null||R.focus();return}const N=y({tabbingDirection:_?"backwards":"forwards"}),I=N.findIndex(j=>j===T);u0(N.slice(I+1))?O.preventDefault():_?(M=c.current)==null||M.focus():(b=u.current)==null||b.focus()}};return w.addEventListener("keydown",v),()=>w.removeEventListener("keydown",v)}},[a,y]),A.jsxs(SQ,{ref:l,role:"region","aria-label":i.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&A.jsx(ow,{ref:c,onFocusFromOutsideViewport:()=>{const w=y({tabbingDirection:"forwards"});u0(w)}}),A.jsx(Qx.Slot,{scope:t,children:A.jsx(Ht.ol,{tabIndex:-1,...s,ref:d})}),g&&A.jsx(ow,{ref:u,onFocusFromOutsideViewport:()=>{const w=y({tabbingDirection:"backwards"});u0(w)}})]})});QR.displayName=FR;var $R="ToastFocusProxy",ow=k.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...i}=n,s=Ag($R,t);return A.jsx(Pg,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=s.viewport)!=null&&c.contains(a))&&r()}})});ow.displayName=$R;var cf="Toast",FQ="toast.swipeStart",QQ="toast.swipeMove",$Q="toast.swipeCancel",jQ="toast.swipeEnd",jR=k.forwardRef((n,e)=>{const{forceMount:t,open:r,defaultOpen:i,onOpenChange:s,...o}=n,[a,l]=CQ({prop:r,defaultProp:i??!0,onChange:s,caller:cf});return A.jsx(Vx,{present:t||a,children:A.jsx(UQ,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:po(n.onPause),onResume:po(n.onResume),onSwipeStart:xt(n.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:xt(n.onSwipeMove,c=>{const{x:u,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:xt(n.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:xt(n.onSwipeEnd,c=>{const{x:u,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),l(!1)})})})});jR.displayName=cf;var[zQ,BQ]=LR(cf,{onClose(){}}),UQ=k.forwardRef((n,e)=>{const{__scopeToast:t,type:r="foreground",duration:i,open:s,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:h,onSwipeCancel:d,onSwipeEnd:p,...g}=n,y=Ag(cf,t),[w,v]=k.useState(null),O=Ir(e,j=>v(j)),S=k.useRef(null),E=k.useRef(null),R=i||y.duration,M=k.useRef(0),b=k.useRef(R),T=k.useRef(0),{onToastAdd:_,onToastRemove:C}=y,D=po(()=>{var ee;(w==null?void 0:w.contains(document.activeElement))&&((ee=y.viewport)==null||ee.focus()),o()}),N=k.useCallback(j=>{!j||j===1/0||(window.clearTimeout(T.current),M.current=new Date().getTime(),T.current=window.setTimeout(D,j))},[D]);k.useEffect(()=>{const j=y.viewport;if(j){const ee=()=>{N(b.current),c==null||c()},te=()=>{const Y=new Date().getTime()-M.current;b.current=b.current-Y,window.clearTimeout(T.current),l==null||l()};return j.addEventListener(iw,te),j.addEventListener(sw,ee),()=>{j.removeEventListener(iw,te),j.removeEventListener(sw,ee)}}},[y.viewport,R,l,c,N]),k.useEffect(()=>{s&&!y.isClosePausedRef.current&&N(R)},[s,R,y.isClosePausedRef,N]),k.useEffect(()=>(_(),()=>C()),[_,C]);const I=k.useMemo(()=>w?GR(w):null,[w]);return y.viewport?A.jsxs(A.Fragment,{children:[I&&A.jsx(WQ,{__scopeToast:t,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:I}),A.jsx(zQ,{scope:t,onClose:D,children:af.createPortal(A.jsx(Qx.ItemSlot,{scope:t,children:A.jsx(xQ,{asChild:!0,onEscapeKeyDown:xt(a,()=>{y.isFocusedToastEscapeKeyDownRef.current||D(),y.isFocusedToastEscapeKeyDownRef.current=!1}),children:A.jsx(Ht.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":y.swipeDirection,...g,ref:O,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:xt(n.onKeyDown,j=>{j.key==="Escape"&&(a==null||a(j.nativeEvent),j.nativeEvent.defaultPrevented||(y.isFocusedToastEscapeKeyDownRef.current=!0,D()))}),onPointerDown:xt(n.onPointerDown,j=>{j.button===0&&(S.current={x:j.clientX,y:j.clientY})}),onPointerMove:xt(n.onPointerMove,j=>{if(!S.current)return;const ee=j.clientX-S.current.x,te=j.clientY-S.current.y,Y=!!E.current,Q=["left","right"].includes(y.swipeDirection),$=["left","up"].includes(y.swipeDirection)?Math.min:Math.max,G=Q?$(0,ee):0,ce=Q?0:$(0,te),Z=j.pointerType==="touch"?10:2,oe={x:G,y:ce},de={originalEvent:j,delta:oe};Y?(E.current=oe,vd(QQ,h,de,{discrete:!1})):$T(oe,y.swipeDirection,Z)?(E.current=oe,vd(FQ,u,de,{discrete:!1}),j.target.setPointerCapture(j.pointerId)):(Math.abs(ee)>Z||Math.abs(te)>Z)&&(S.current=null)}),onPointerUp:xt(n.onPointerUp,j=>{const ee=E.current,te=j.target;if(te.hasPointerCapture(j.pointerId)&&te.releasePointerCapture(j.pointerId),E.current=null,S.current=null,ee){const Y=j.currentTarget,Q={originalEvent:j,delta:ee};$T(ee,y.swipeDirection,y.swipeThreshold)?vd(jQ,p,Q,{discrete:!0}):vd($Q,d,Q,{discrete:!0}),Y.addEventListener("click",$=>$.preventDefault(),{once:!0})}})})})}),y.viewport)})]}):null}),WQ=n=>{const{__scopeToast:e,children:t,...r}=n,i=Ag(cf,e),[s,o]=k.useState(!1),[a,l]=k.useState(!1);return GQ(()=>o(!0)),k.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:A.jsx(MR,{asChild:!0,children:A.jsx(Pg,{...r,children:s&&A.jsxs(A.Fragment,{children:[i.label," ",t]})})})},qQ="ToastTitle",zR=k.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return A.jsx(Ht.div,{...r,ref:e})});zR.displayName=qQ;var HQ="ToastDescription",BR=k.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return A.jsx(Ht.div,{...r,ref:e})});BR.displayName=HQ;var UR="ToastAction",WR=k.forwardRef((n,e)=>{const{altText:t,...r}=n;return t.trim()?A.jsx(HR,{altText:t,asChild:!0,children:A.jsx($x,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${UR}\`. Expected non-empty \`string\`.`),null)});WR.displayName=UR;var qR="ToastClose",$x=k.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n,i=BQ(qR,t);return A.jsx(HR,{asChild:!0,children:A.jsx(Ht.button,{type:"button",...r,ref:e,onClick:xt(n.onClick,i.onClose)})})});$x.displayName=qR;var HR=k.forwardRef((n,e)=>{const{__scopeToast:t,altText:r,...i}=n;return A.jsx(Ht.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function GR(n){const e=[];return Array.from(n.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),XQ(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...GR(r))}}),e}function vd(n,e,t,{discrete:r}){const i=t.originalEvent.currentTarget,s=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?RR(i,s):i.dispatchEvent(s)}var $T=(n,e,t=0)=>{const r=Math.abs(n.x),i=Math.abs(n.y),s=r>i;return e==="left"||e==="right"?s&&r>t:!s&&i>t};function GQ(n=()=>{}){const e=po(n);mo(()=>{let t=0,r=0;return t=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}},[e])}function XQ(n){return n.nodeType===n.ELEMENT_NODE}function KQ(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function u0(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var YQ=VR,XR=QR,KR=jR,YR=zR,JR=BR,ZR=WR,eI=$x;function tI(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=tI(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function nI(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=tI(n))&&(r&&(r+=" "),r+=e);return r}const jT=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,zT=nI,jx=(n,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return zT(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(c=>{const u=t==null?void 0:t[c],h=s==null?void 0:s[c];if(u===null)return null;const d=jT(u)||jT(h);return i[c][d]}),a=t&&Object.entries(t).reduce((c,u)=>{let[h,d]=u;return d===void 0||(c[h]=d),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:h,className:d,...p}=u;return Object.entries(p).every(g=>{let[y,w]=g;return Array.isArray(w)?w.includes({...s,...a}[y]):{...s,...a}[y]===w})?[...c,h,d]:c},[]);return zT(n,o,l,t==null?void 0:t.class,t==null?void 0:t.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JQ=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),rI=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ZQ={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e$=k.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>k.createElement("svg",{ref:l,...ZQ,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:rI("lucide",i),...a},[...o.map(([c,u])=>k.createElement(c,u)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=(n,e)=>{const t=k.forwardRef(({className:r,...i},s)=>k.createElement(e$,{ref:s,iconNode:e,className:rI(`lucide-${JQ(n)}`,r),...i}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t$=us("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n$=us("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iI=us("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r$=us("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i$=us("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ai=us("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s$=us("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o$=us("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a$=us("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),zx="-",l$=n=>{const e=u$(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:o=>{const a=o.split(zx);return a[0]===""&&a.length!==1&&a.shift(),sI(a,e)||c$(o)},getConflictingClassGroupIds:(o,a)=>{const l=t[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},sI=(n,e)=>{var o;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),i=r?sI(n.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=n.join(zx);return(o=e.validators.find(({validator:a})=>a(s)))==null?void 0:o.classGroupId},BT=/^\[(.+)\]$/,c$=n=>{if(BT.test(n)){const e=BT.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},u$=n=>{const{theme:e,prefix:t}=n,r={nextPart:new Map,validators:[]};return f$(Object.entries(n.classGroups),t).forEach(([s,o])=>{aw(o,r,s,e)}),r},aw=(n,e,t,r)=>{n.forEach(i=>{if(typeof i=="string"){const s=i===""?e:UT(e,i);s.classGroupId=t;return}if(typeof i=="function"){if(h$(i)){aw(i(r),e,t,r);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(([s,o])=>{aw(o,UT(e,s),t,r)})})},UT=(n,e)=>{let t=n;return e.split(zx).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},h$=n=>n.isThemeGetter,f$=(n,e)=>e?n.map(([t,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,a])=>[e+o,a])):s);return[t,i]}):n,d$=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const i=(s,o)=>{t.set(s,o),e++,e>n&&(e=0,r=t,t=new Map)};return{get(s){let o=t.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){t.has(s)?t.set(s,o):i(s,o)}}},oI="!",p$=n=>{const{separator:e,experimentalParseClassName:t}=n,r=e.length===1,i=e[0],s=e.length,o=a=>{const l=[];let c=0,u=0,h;for(let w=0;w<a.length;w++){let v=a[w];if(c===0){if(v===i&&(r||a.slice(w,w+s)===e)){l.push(a.slice(u,w)),u=w+s;continue}if(v==="/"){h=w;continue}}v==="["?c++:v==="]"&&c--}const d=l.length===0?a:a.substring(u),p=d.startsWith(oI),g=p?d.substring(1):d,y=h&&h>u?h-u:void 0;return{modifiers:l,hasImportantModifier:p,baseClassName:g,maybePostfixModifierPosition:y}};return t?a=>t({className:a,parseClassName:o}):o},m$=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(r=>{r[0]==="["?(e.push(...t.sort(),r),t=[]):t.push(r)}),e.push(...t.sort()),e},g$=n=>({cache:d$(n.cacheSize),parseClassName:p$(n),...l$(n)}),y$=/\s+/,v$=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=[],o=n.trim().split(y$);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:u,hasImportantModifier:h,baseClassName:d,maybePostfixModifierPosition:p}=t(c);let g=!!p,y=r(g?d.substring(0,p):d);if(!y){if(!g){a=c+(a.length>0?" "+a:a);continue}if(y=r(d),!y){a=c+(a.length>0?" "+a:a);continue}g=!1}const w=m$(u).join(":"),v=h?w+oI:w,O=v+y;if(s.includes(O))continue;s.push(O);const S=i(y,g);for(let E=0;E<S.length;++E){const R=S[E];s.push(v+R)}a=c+(a.length>0?" "+a:a)}return a};function w$(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=aI(e))&&(r&&(r+=" "),r+=t);return r}const aI=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=aI(n[r]))&&(t&&(t+=" "),t+=e);return t};function O$(n,...e){let t,r,i,s=o;function o(l){const c=e.reduce((u,h)=>h(u),n());return t=g$(c),r=t.cache.get,i=t.cache.set,s=a,a(l)}function a(l){const c=r(l);if(c)return c;const u=v$(l,t);return i(l,u),u}return function(){return s(w$.apply(null,arguments))}}const We=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},lI=/^\[(?:([a-z-]+):)?(.+)\]$/i,x$=/^\d+\/\d+$/,S$=new Set(["px","full","screen"]),b$=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,T$=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,_$=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,E$=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,k$=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Pi=n=>Al(n)||S$.has(n)||x$.test(n),Ss=n=>Cc(n,"length",M$),Al=n=>!!n&&!Number.isNaN(Number(n)),h0=n=>Cc(n,"number",Al),hu=n=>!!n&&Number.isInteger(Number(n)),C$=n=>n.endsWith("%")&&Al(n.slice(0,-1)),we=n=>lI.test(n),bs=n=>b$.test(n),P$=new Set(["length","size","percentage"]),A$=n=>Cc(n,P$,cI),R$=n=>Cc(n,"position",cI),I$=new Set(["image","url"]),N$=n=>Cc(n,I$,V$),D$=n=>Cc(n,"",L$),fu=()=>!0,Cc=(n,e,t)=>{const r=lI.exec(n);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):t(r[2]):!1},M$=n=>T$.test(n)&&!_$.test(n),cI=()=>!1,L$=n=>E$.test(n),V$=n=>k$.test(n),F$=()=>{const n=We("colors"),e=We("spacing"),t=We("blur"),r=We("brightness"),i=We("borderColor"),s=We("borderRadius"),o=We("borderSpacing"),a=We("borderWidth"),l=We("contrast"),c=We("grayscale"),u=We("hueRotate"),h=We("invert"),d=We("gap"),p=We("gradientColorStops"),g=We("gradientColorStopPositions"),y=We("inset"),w=We("margin"),v=We("opacity"),O=We("padding"),S=We("saturate"),E=We("scale"),R=We("sepia"),M=We("skew"),b=We("space"),T=We("translate"),_=()=>["auto","contain","none"],C=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto",we,e],N=()=>[we,e],I=()=>["",Pi,Ss],j=()=>["auto",Al,we],ee=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],te=()=>["solid","dashed","dotted","double","none"],Y=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Q=()=>["start","end","center","between","around","evenly","stretch"],$=()=>["","0",we],G=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ce=()=>[Al,we];return{cacheSize:500,separator:":",theme:{colors:[fu],spacing:[Pi,Ss],blur:["none","",bs,we],brightness:ce(),borderColor:[n],borderRadius:["none","","full",bs,we],borderSpacing:N(),borderWidth:I(),contrast:ce(),grayscale:$(),hueRotate:ce(),invert:$(),gap:N(),gradientColorStops:[n],gradientColorStopPositions:[C$,Ss],inset:D(),margin:D(),opacity:ce(),padding:N(),saturate:ce(),scale:ce(),sepia:$(),skew:ce(),space:N(),translate:N()},classGroups:{aspect:[{aspect:["auto","square","video",we]}],container:["container"],columns:[{columns:[bs]}],"break-after":[{"break-after":G()}],"break-before":[{"break-before":G()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ee(),we]}],overflow:[{overflow:C()}],"overflow-x":[{"overflow-x":C()}],"overflow-y":[{"overflow-y":C()}],overscroll:[{overscroll:_()}],"overscroll-x":[{"overscroll-x":_()}],"overscroll-y":[{"overscroll-y":_()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",hu,we]}],basis:[{basis:D()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",we]}],grow:[{grow:$()}],shrink:[{shrink:$()}],order:[{order:["first","last","none",hu,we]}],"grid-cols":[{"grid-cols":[fu]}],"col-start-end":[{col:["auto",{span:["full",hu,we]},we]}],"col-start":[{"col-start":j()}],"col-end":[{"col-end":j()}],"grid-rows":[{"grid-rows":[fu]}],"row-start-end":[{row:["auto",{span:[hu,we]},we]}],"row-start":[{"row-start":j()}],"row-end":[{"row-end":j()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",we]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",we]}],gap:[{gap:[d]}],"gap-x":[{"gap-x":[d]}],"gap-y":[{"gap-y":[d]}],"justify-content":[{justify:["normal",...Q()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...Q(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...Q(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[O]}],px:[{px:[O]}],py:[{py:[O]}],ps:[{ps:[O]}],pe:[{pe:[O]}],pt:[{pt:[O]}],pr:[{pr:[O]}],pb:[{pb:[O]}],pl:[{pl:[O]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[b]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[b]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",we,e]}],"min-w":[{"min-w":[we,e,"min","max","fit"]}],"max-w":[{"max-w":[we,e,"none","full","min","max","fit","prose",{screen:[bs]},bs]}],h:[{h:[we,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[we,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[we,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[we,e,"auto","min","max","fit"]}],"font-size":[{text:["base",bs,Ss]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",h0]}],"font-family":[{font:[fu]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",we]}],"line-clamp":[{"line-clamp":["none",Al,h0]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Pi,we]}],"list-image":[{"list-image":["none",we]}],"list-style-type":[{list:["none","disc","decimal",we]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...te(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Pi,Ss]}],"underline-offset":[{"underline-offset":["auto",Pi,we]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",we]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",we]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ee(),R$]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",A$]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},N$]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...te(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:te()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...te()]}],"outline-offset":[{"outline-offset":[Pi,we]}],"outline-w":[{outline:[Pi,Ss]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:I()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[Pi,Ss]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",bs,D$]}],"shadow-color":[{shadow:[fu]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...Y(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Y()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",bs,we]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[S]}],sepia:[{sepia:[R]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[S]}],"backdrop-sepia":[{"backdrop-sepia":[R]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",we]}],duration:[{duration:ce()}],ease:[{ease:["linear","in","out","in-out",we]}],delay:[{delay:ce()}],animate:[{animate:["none","spin","ping","pulse","bounce",we]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[E]}],"scale-x":[{"scale-x":[E]}],"scale-y":[{"scale-y":[E]}],rotate:[{rotate:[hu,we]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[M]}],"skew-y":[{"skew-y":[M]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",we]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",we]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",we]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[Pi,Ss,h0]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Q$=O$(F$);function Gt(...n){return Q$(nI(n))}const $$=YQ,uI=k.forwardRef(({className:n,...e},t)=>A.jsx(XR,{ref:t,className:Gt("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));uI.displayName=XR.displayName;const j$=jx("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),hI=k.forwardRef(({className:n,variant:e,...t},r)=>A.jsx(KR,{ref:r,className:Gt(j$({variant:e}),n),...t}));hI.displayName=KR.displayName;const z$=k.forwardRef(({className:n,...e},t)=>A.jsx(ZR,{ref:t,className:Gt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));z$.displayName=ZR.displayName;const fI=k.forwardRef(({className:n,...e},t)=>A.jsx(eI,{ref:t,className:Gt("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:A.jsx(a$,{className:"h-4 w-4"})}));fI.displayName=eI.displayName;const dI=k.forwardRef(({className:n,...e},t)=>A.jsx(YR,{ref:t,className:Gt("text-sm font-semibold",n),...e}));dI.displayName=YR.displayName;const pI=k.forwardRef(({className:n,...e},t)=>A.jsx(JR,{ref:t,className:Gt("text-sm opacity-90",n),...e}));pI.displayName=JR.displayName;function B$(){const{toasts:n}=Mx();return A.jsxs($$,{children:[n.map(function({id:e,title:t,description:r,action:i,...s}){return A.jsxs(hI,{...s,children:[A.jsxs("div",{className:"grid gap-1",children:[t&&A.jsx(dI,{children:t}),r&&A.jsx(pI,{children:r})]}),i,A.jsx(fI,{})]},e)}),A.jsx(uI,{})]})}var WT=["light","dark"],U$="(prefers-color-scheme: dark)",W$=k.createContext(void 0),q$={setTheme:n=>{},themes:[]},H$=()=>{var n;return(n=k.useContext(W$))!=null?n:q$};k.memo(({forcedTheme:n,storageKey:e,attribute:t,enableSystem:r,enableColorScheme:i,defaultTheme:s,value:o,attrs:a,nonce:l})=>{let c=s==="system",u=t==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(g=>`'${g}'`).join(",")})`};`:`var d=document.documentElement,n='${t}',s='setAttribute';`,h=i?WT.includes(s)&&s?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${s}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",d=(g,y=!1,w=!0)=>{let v=o?o[g]:g,O=y?g+"|| ''":`'${v}'`,S="";return i&&w&&!y&&WT.includes(g)&&(S+=`d.style.colorScheme = '${g}';`),t==="class"?y||v?S+=`c.add(${O})`:S+="null":v&&(S+=`d[s](n,${O})`),S},p=n?`!function(){${u}${d(n)}}()`:r?`!function(){try{${u}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${c})){var t='${U$}',m=window.matchMedia(t);if(m.media!==t||m.matches){${d("dark")}}else{${d("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${d(o?"x[e]":"e",!0)}}${c?"":"else{"+d(s,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${d(o?"x[e]":"e",!0)}}else{${d(s,!1,!1)};}${h}}catch(t){}}();`;return k.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:p}})});var G$=n=>{switch(n){case"success":return Y$;case"info":return Z$;case"warning":return J$;case"error":return ej;default:return null}},X$=Array(12).fill(0),K$=({visible:n,className:e})=>H.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":n},H.createElement("div",{className:"sonner-spinner"},X$.map((t,r)=>H.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),Y$=H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},H.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),J$=H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},H.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Z$=H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},H.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),ej=H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},H.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),tj=H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},H.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),H.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),nj=()=>{let[n,e]=H.useState(document.hidden);return H.useEffect(()=>{let t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n},lw=1,rj=class{constructor(){this.subscribe=n=>(this.subscribers.push(n),()=>{let e=this.subscribers.indexOf(n);this.subscribers.splice(e,1)}),this.publish=n=>{this.subscribers.forEach(e=>e(n))},this.addToast=n=>{this.publish(n),this.toasts=[...this.toasts,n]},this.create=n=>{var e;let{message:t,...r}=n,i=typeof(n==null?void 0:n.id)=="number"||((e=n.id)==null?void 0:e.length)>0?n.id:lw++,s=this.toasts.find(a=>a.id===i),o=n.dismissible===void 0?!0:n.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),s?this.toasts=this.toasts.map(a=>a.id===i?(this.publish({...a,...n,id:i,title:t}),{...a,...n,id:i,dismissible:o,title:t}):a):this.addToast({title:t,...r,dismissible:o,id:i}),i},this.dismiss=n=>(this.dismissedToasts.add(n),n||this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:n,dismiss:!0})),n),this.message=(n,e)=>this.create({...e,message:n}),this.error=(n,e)=>this.create({...e,message:n,type:"error"}),this.success=(n,e)=>this.create({...e,type:"success",message:n}),this.info=(n,e)=>this.create({...e,type:"info",message:n}),this.warning=(n,e)=>this.create({...e,type:"warning",message:n}),this.loading=(n,e)=>this.create({...e,type:"loading",message:n}),this.promise=(n,e)=>{if(!e)return;let t;e.loading!==void 0&&(t=this.create({...e,promise:n,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let r=n instanceof Promise?n:n(),i=t!==void 0,s,o=r.then(async l=>{if(s=["resolve",l],H.isValidElement(l))i=!1,this.create({id:t,type:"default",message:l});else if(sj(l)&&!l.ok){i=!1;let c=typeof e.error=="function"?await e.error(`HTTP error! status: ${l.status}`):e.error,u=typeof e.description=="function"?await e.description(`HTTP error! status: ${l.status}`):e.description;this.create({id:t,type:"error",message:c,description:u})}else if(e.success!==void 0){i=!1;let c=typeof e.success=="function"?await e.success(l):e.success,u=typeof e.description=="function"?await e.description(l):e.description;this.create({id:t,type:"success",message:c,description:u})}}).catch(async l=>{if(s=["reject",l],e.error!==void 0){i=!1;let c=typeof e.error=="function"?await e.error(l):e.error,u=typeof e.description=="function"?await e.description(l):e.description;this.create({id:t,type:"error",message:c,description:u})}}).finally(()=>{var l;i&&(this.dismiss(t),t=void 0),(l=e.finally)==null||l.call(e)}),a=()=>new Promise((l,c)=>o.then(()=>s[0]==="reject"?c(s[1]):l(s[1])).catch(c));return typeof t!="string"&&typeof t!="number"?{unwrap:a}:Object.assign(t,{unwrap:a})},this.custom=(n,e)=>{let t=(e==null?void 0:e.id)||lw++;return this.create({jsx:n(t),id:t,...e}),t},this.getActiveToasts=()=>this.toasts.filter(n=>!this.dismissedToasts.has(n.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Sn=new rj,ij=(n,e)=>{let t=(e==null?void 0:e.id)||lw++;return Sn.addToast({title:n,...e,id:t}),t},sj=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",oj=ij,aj=()=>Sn.toasts,lj=()=>Sn.getActiveToasts();Object.assign(oj,{success:Sn.success,info:Sn.info,warning:Sn.warning,error:Sn.error,custom:Sn.custom,message:Sn.message,promise:Sn.promise,dismiss:Sn.dismiss,loading:Sn.loading},{getHistory:aj,getToasts:lj});function cj(n,{insertAt:e}={}){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n))}cj(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function wd(n){return n.label!==void 0}var uj=3,hj="32px",fj="16px",qT=4e3,dj=356,pj=14,mj=20,gj=200;function Or(...n){return n.filter(Boolean).join(" ")}function yj(n){let[e,t]=n.split("-"),r=[];return e&&r.push(e),t&&r.push(t),r}var vj=n=>{var e,t,r,i,s,o,a,l,c,u,h;let{invert:d,toast:p,unstyled:g,interacting:y,setHeights:w,visibleToasts:v,heights:O,index:S,toasts:E,expanded:R,removeToast:M,defaultRichColors:b,closeButton:T,style:_,cancelButtonStyle:C,actionButtonStyle:D,className:N="",descriptionClassName:I="",duration:j,position:ee,gap:te,loadingIcon:Y,expandByDefault:Q,classNames:$,icons:G,closeButtonAriaLabel:ce="Close toast",pauseWhenPageIsHidden:Z}=n,[oe,de]=H.useState(null),[Pe,et]=H.useState(null),[xe,ds]=H.useState(!1),[Qr,Zn]=H.useState(!1),[Vn,$r]=H.useState(!1),[er,ps]=H.useState(!1),[jo,zo]=H.useState(!1),[Uc,Bo]=H.useState(0),[Ti,qa]=H.useState(0),ms=H.useRef(p.duration||j||qT),Mf=H.useRef(null),yr=H.useRef(null),Wc=S===0,Lf=S+1<=v,Le=p.type,st=p.dismissible!==!1,Ha=p.className||"",Vf=p.descriptionClassName||"",Uo=H.useMemo(()=>O.findIndex(pe=>pe.toastId===p.id)||0,[O,p.id]),xy=H.useMemo(()=>{var pe;return(pe=p.closeButton)!=null?pe:T},[p.closeButton,T]),gs=H.useMemo(()=>p.duration||j||qT,[p.duration,j]),Ga=H.useRef(0),_i=H.useRef(0),Xa=H.useRef(0),ys=H.useRef(null),[Sy,qc]=ee.split("-"),Hc=H.useMemo(()=>O.reduce((pe,Ae,Fe)=>Fe>=Uo?pe:pe+Ae.height,0),[O,Uo]),Gc=nj(),Wo=p.invert||d,qo=Le==="loading";_i.current=H.useMemo(()=>Uo*te+Hc,[Uo,Hc]),H.useEffect(()=>{ms.current=gs},[gs]),H.useEffect(()=>{ds(!0)},[]),H.useEffect(()=>{let pe=yr.current;if(pe){let Ae=pe.getBoundingClientRect().height;return qa(Ae),w(Fe=>[{toastId:p.id,height:Ae,position:p.position},...Fe]),()=>w(Fe=>Fe.filter(Dt=>Dt.toastId!==p.id))}},[w,p.id]),H.useLayoutEffect(()=>{if(!xe)return;let pe=yr.current,Ae=pe.style.height;pe.style.height="auto";let Fe=pe.getBoundingClientRect().height;pe.style.height=Ae,qa(Fe),w(Dt=>Dt.find(On=>On.toastId===p.id)?Dt.map(On=>On.toastId===p.id?{...On,height:Fe}:On):[{toastId:p.id,height:Fe,position:p.position},...Dt])},[xe,p.title,p.description,w,p.id]);let tr=H.useCallback(()=>{Zn(!0),Bo(_i.current),w(pe=>pe.filter(Ae=>Ae.toastId!==p.id)),setTimeout(()=>{M(p)},gj)},[p,M,w,_i]);H.useEffect(()=>{if(p.promise&&Le==="loading"||p.duration===1/0||p.type==="loading")return;let pe;return R||y||Z&&Gc?(()=>{if(Xa.current<Ga.current){let Ae=new Date().getTime()-Ga.current;ms.current=ms.current-Ae}Xa.current=new Date().getTime()})():ms.current!==1/0&&(Ga.current=new Date().getTime(),pe=setTimeout(()=>{var Ae;(Ae=p.onAutoClose)==null||Ae.call(p,p),tr()},ms.current)),()=>clearTimeout(pe)},[R,y,p,Le,Z,Gc,tr]),H.useEffect(()=>{p.delete&&tr()},[tr,p.delete]);function Ei(){var pe,Ae,Fe;return G!=null&&G.loading?H.createElement("div",{className:Or($==null?void 0:$.loader,(pe=p==null?void 0:p.classNames)==null?void 0:pe.loader,"sonner-loader"),"data-visible":Le==="loading"},G.loading):Y?H.createElement("div",{className:Or($==null?void 0:$.loader,(Ae=p==null?void 0:p.classNames)==null?void 0:Ae.loader,"sonner-loader"),"data-visible":Le==="loading"},Y):H.createElement(K$,{className:Or($==null?void 0:$.loader,(Fe=p==null?void 0:p.classNames)==null?void 0:Fe.loader),visible:Le==="loading"})}return H.createElement("li",{tabIndex:0,ref:yr,className:Or(N,Ha,$==null?void 0:$.toast,(e=p==null?void 0:p.classNames)==null?void 0:e.toast,$==null?void 0:$.default,$==null?void 0:$[Le],(t=p==null?void 0:p.classNames)==null?void 0:t[Le]),"data-sonner-toast":"","data-rich-colors":(r=p.richColors)!=null?r:b,"data-styled":!(p.jsx||p.unstyled||g),"data-mounted":xe,"data-promise":!!p.promise,"data-swiped":jo,"data-removed":Qr,"data-visible":Lf,"data-y-position":Sy,"data-x-position":qc,"data-index":S,"data-front":Wc,"data-swiping":Vn,"data-dismissible":st,"data-type":Le,"data-invert":Wo,"data-swipe-out":er,"data-swipe-direction":Pe,"data-expanded":!!(R||Q&&xe),style:{"--index":S,"--toasts-before":S,"--z-index":E.length-S,"--offset":`${Qr?Uc:_i.current}px`,"--initial-height":Q?"auto":`${Ti}px`,..._,...p.style},onDragEnd:()=>{$r(!1),de(null),ys.current=null},onPointerDown:pe=>{qo||!st||(Mf.current=new Date,Bo(_i.current),pe.target.setPointerCapture(pe.pointerId),pe.target.tagName!=="BUTTON"&&($r(!0),ys.current={x:pe.clientX,y:pe.clientY}))},onPointerUp:()=>{var pe,Ae,Fe,Dt;if(er||!st)return;ys.current=null;let On=Number(((pe=yr.current)==null?void 0:pe.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Ke=Number(((Ae=yr.current)==null?void 0:Ae.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),jr=new Date().getTime()-((Fe=Mf.current)==null?void 0:Fe.getTime()),Mt=oe==="x"?On:Ke,xn=Math.abs(Mt)/jr;if(Math.abs(Mt)>=mj||xn>.11){Bo(_i.current),(Dt=p.onDismiss)==null||Dt.call(p,p),et(oe==="x"?On>0?"right":"left":Ke>0?"down":"up"),tr(),ps(!0),zo(!1);return}$r(!1),de(null)},onPointerMove:pe=>{var Ae,Fe,Dt,On;if(!ys.current||!st||((Ae=window.getSelection())==null?void 0:Ae.toString().length)>0)return;let Ke=pe.clientY-ys.current.y,jr=pe.clientX-ys.current.x,Mt=(Fe=n.swipeDirections)!=null?Fe:yj(ee);!oe&&(Math.abs(jr)>1||Math.abs(Ke)>1)&&de(Math.abs(jr)>Math.abs(Ke)?"x":"y");let xn={x:0,y:0};oe==="y"?(Mt.includes("top")||Mt.includes("bottom"))&&(Mt.includes("top")&&Ke<0||Mt.includes("bottom")&&Ke>0)&&(xn.y=Ke):oe==="x"&&(Mt.includes("left")||Mt.includes("right"))&&(Mt.includes("left")&&jr<0||Mt.includes("right")&&jr>0)&&(xn.x=jr),(Math.abs(xn.x)>0||Math.abs(xn.y)>0)&&zo(!0),(Dt=yr.current)==null||Dt.style.setProperty("--swipe-amount-x",`${xn.x}px`),(On=yr.current)==null||On.style.setProperty("--swipe-amount-y",`${xn.y}px`)}},xy&&!p.jsx?H.createElement("button",{"aria-label":ce,"data-disabled":qo,"data-close-button":!0,onClick:qo||!st?()=>{}:()=>{var pe;tr(),(pe=p.onDismiss)==null||pe.call(p,p)},className:Or($==null?void 0:$.closeButton,(i=p==null?void 0:p.classNames)==null?void 0:i.closeButton)},(s=G==null?void 0:G.close)!=null?s:tj):null,p.jsx||k.isValidElement(p.title)?p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title:H.createElement(H.Fragment,null,Le||p.icon||p.promise?H.createElement("div",{"data-icon":"",className:Or($==null?void 0:$.icon,(o=p==null?void 0:p.classNames)==null?void 0:o.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||Ei():null,p.type!=="loading"?p.icon||(G==null?void 0:G[Le])||G$(Le):null):null,H.createElement("div",{"data-content":"",className:Or($==null?void 0:$.content,(a=p==null?void 0:p.classNames)==null?void 0:a.content)},H.createElement("div",{"data-title":"",className:Or($==null?void 0:$.title,(l=p==null?void 0:p.classNames)==null?void 0:l.title)},typeof p.title=="function"?p.title():p.title),p.description?H.createElement("div",{"data-description":"",className:Or(I,Vf,$==null?void 0:$.description,(c=p==null?void 0:p.classNames)==null?void 0:c.description)},typeof p.description=="function"?p.description():p.description):null),k.isValidElement(p.cancel)?p.cancel:p.cancel&&wd(p.cancel)?H.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||C,onClick:pe=>{var Ae,Fe;wd(p.cancel)&&st&&((Fe=(Ae=p.cancel).onClick)==null||Fe.call(Ae,pe),tr())},className:Or($==null?void 0:$.cancelButton,(u=p==null?void 0:p.classNames)==null?void 0:u.cancelButton)},p.cancel.label):null,k.isValidElement(p.action)?p.action:p.action&&wd(p.action)?H.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||D,onClick:pe=>{var Ae,Fe;wd(p.action)&&((Fe=(Ae=p.action).onClick)==null||Fe.call(Ae,pe),!pe.defaultPrevented&&tr())},className:Or($==null?void 0:$.actionButton,(h=p==null?void 0:p.classNames)==null?void 0:h.actionButton)},p.action.label):null))};function HT(){if(typeof window>"u"||typeof document>"u")return"ltr";let n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function wj(n,e){let t={};return[n,e].forEach((r,i)=>{let s=i===1,o=s?"--mobile-offset":"--offset",a=s?fj:hj;function l(c){["top","right","bottom","left"].forEach(u=>{t[`${o}-${u}`]=typeof c=="number"?`${c}px`:c})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(c=>{r[c]===void 0?t[`${o}-${c}`]=a:t[`${o}-${c}`]=typeof r[c]=="number"?`${r[c]}px`:r[c]}):l(a)}),t}var Oj=k.forwardRef(function(n,e){let{invert:t,position:r="bottom-right",hotkey:i=["altKey","KeyT"],expand:s,closeButton:o,className:a,offset:l,mobileOffset:c,theme:u="light",richColors:h,duration:d,style:p,visibleToasts:g=uj,toastOptions:y,dir:w=HT(),gap:v=pj,loadingIcon:O,icons:S,containerAriaLabel:E="Notifications",pauseWhenPageIsHidden:R}=n,[M,b]=H.useState([]),T=H.useMemo(()=>Array.from(new Set([r].concat(M.filter(Z=>Z.position).map(Z=>Z.position)))),[M,r]),[_,C]=H.useState([]),[D,N]=H.useState(!1),[I,j]=H.useState(!1),[ee,te]=H.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Y=H.useRef(null),Q=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),$=H.useRef(null),G=H.useRef(!1),ce=H.useCallback(Z=>{b(oe=>{var de;return(de=oe.find(Pe=>Pe.id===Z.id))!=null&&de.delete||Sn.dismiss(Z.id),oe.filter(({id:Pe})=>Pe!==Z.id)})},[]);return H.useEffect(()=>Sn.subscribe(Z=>{if(Z.dismiss){b(oe=>oe.map(de=>de.id===Z.id?{...de,delete:!0}:de));return}setTimeout(()=>{CR.flushSync(()=>{b(oe=>{let de=oe.findIndex(Pe=>Pe.id===Z.id);return de!==-1?[...oe.slice(0,de),{...oe[de],...Z},...oe.slice(de+1)]:[Z,...oe]})})})}),[]),H.useEffect(()=>{if(u!=="system"){te(u);return}if(u==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?te("dark"):te("light")),typeof window>"u")return;let Z=window.matchMedia("(prefers-color-scheme: dark)");try{Z.addEventListener("change",({matches:oe})=>{te(oe?"dark":"light")})}catch{Z.addListener(({matches:de})=>{try{te(de?"dark":"light")}catch(Pe){console.error(Pe)}})}},[u]),H.useEffect(()=>{M.length<=1&&N(!1)},[M]),H.useEffect(()=>{let Z=oe=>{var de,Pe;i.every(et=>oe[et]||oe.code===et)&&(N(!0),(de=Y.current)==null||de.focus()),oe.code==="Escape"&&(document.activeElement===Y.current||(Pe=Y.current)!=null&&Pe.contains(document.activeElement))&&N(!1)};return document.addEventListener("keydown",Z),()=>document.removeEventListener("keydown",Z)},[i]),H.useEffect(()=>{if(Y.current)return()=>{$.current&&($.current.focus({preventScroll:!0}),$.current=null,G.current=!1)}},[Y.current]),H.createElement("section",{ref:e,"aria-label":`${E} ${Q}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},T.map((Z,oe)=>{var de;let[Pe,et]=Z.split("-");return M.length?H.createElement("ol",{key:Z,dir:w==="auto"?HT():w,tabIndex:-1,ref:Y,className:a,"data-sonner-toaster":!0,"data-theme":ee,"data-y-position":Pe,"data-lifted":D&&M.length>1&&!s,"data-x-position":et,style:{"--front-toast-height":`${((de=_[0])==null?void 0:de.height)||0}px`,"--width":`${dj}px`,"--gap":`${v}px`,...p,...wj(l,c)},onBlur:xe=>{G.current&&!xe.currentTarget.contains(xe.relatedTarget)&&(G.current=!1,$.current&&($.current.focus({preventScroll:!0}),$.current=null))},onFocus:xe=>{xe.target instanceof HTMLElement&&xe.target.dataset.dismissible==="false"||G.current||(G.current=!0,$.current=xe.relatedTarget)},onMouseEnter:()=>N(!0),onMouseMove:()=>N(!0),onMouseLeave:()=>{I||N(!1)},onDragEnd:()=>N(!1),onPointerDown:xe=>{xe.target instanceof HTMLElement&&xe.target.dataset.dismissible==="false"||j(!0)},onPointerUp:()=>j(!1)},M.filter(xe=>!xe.position&&oe===0||xe.position===Z).map((xe,ds)=>{var Qr,Zn;return H.createElement(vj,{key:xe.id,icons:S,index:ds,toast:xe,defaultRichColors:h,duration:(Qr=y==null?void 0:y.duration)!=null?Qr:d,className:y==null?void 0:y.className,descriptionClassName:y==null?void 0:y.descriptionClassName,invert:t,visibleToasts:g,closeButton:(Zn=y==null?void 0:y.closeButton)!=null?Zn:o,interacting:I,position:Z,style:y==null?void 0:y.style,unstyled:y==null?void 0:y.unstyled,classNames:y==null?void 0:y.classNames,cancelButtonStyle:y==null?void 0:y.cancelButtonStyle,actionButtonStyle:y==null?void 0:y.actionButtonStyle,removeToast:ce,toasts:M.filter(Vn=>Vn.position==xe.position),heights:_.filter(Vn=>Vn.position==xe.position),setHeights:C,expandByDefault:s,gap:v,loadingIcon:O,expanded:D,pauseWhenPageIsHidden:R,swipeDirections:n.swipeDirections})})):null}))});const xj=({...n})=>{const{theme:e="system"}=H$();return A.jsx(Oj,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...n})},Sj=["top","right","bottom","left"],go=Math.min,Un=Math.max,hm=Math.round,Od=Math.floor,li=n=>({x:n,y:n}),bj={left:"right",right:"left",bottom:"top",top:"bottom"},Tj={start:"end",end:"start"};function cw(n,e,t){return Un(n,go(e,t))}function Zi(n,e){return typeof n=="function"?n(e):n}function es(n){return n.split("-")[0]}function Pc(n){return n.split("-")[1]}function Bx(n){return n==="x"?"y":"x"}function Ux(n){return n==="y"?"height":"width"}function yo(n){return["top","bottom"].includes(es(n))?"y":"x"}function Wx(n){return Bx(yo(n))}function _j(n,e,t){t===void 0&&(t=!1);const r=Pc(n),i=Wx(n),s=Ux(i);let o=i==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=fm(o)),[o,fm(o)]}function Ej(n){const e=fm(n);return[uw(n),e,uw(e)]}function uw(n){return n.replace(/start|end/g,e=>Tj[e])}function kj(n,e,t){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(n){case"top":case"bottom":return t?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function Cj(n,e,t,r){const i=Pc(n);let s=kj(es(n),t==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(uw)))),s}function fm(n){return n.replace(/left|right|bottom|top/g,e=>bj[e])}function Pj(n){return{top:0,right:0,bottom:0,left:0,...n}}function mI(n){return typeof n!="number"?Pj(n):{top:n,right:n,bottom:n,left:n}}function dm(n){const{x:e,y:t,width:r,height:i}=n;return{width:r,height:i,top:t,left:e,right:e+r,bottom:t+i,x:e,y:t}}function GT(n,e,t){let{reference:r,floating:i}=n;const s=yo(e),o=Wx(e),a=Ux(o),l=es(e),c=s==="y",u=r.x+r.width/2-i.width/2,h=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let p;switch(l){case"top":p={x:u,y:r.y-i.height};break;case"bottom":p={x:u,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:h};break;case"left":p={x:r.x-i.width,y:h};break;default:p={x:r.x,y:r.y}}switch(Pc(e)){case"start":p[o]-=d*(t&&c?-1:1);break;case"end":p[o]+=d*(t&&c?-1:1);break}return p}const Aj=async(n,e,t)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=t,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:n,floating:e,strategy:i}),{x:u,y:h}=GT(c,r,l),d=r,p={},g=0;for(let y=0;y<a.length;y++){const{name:w,fn:v}=a[y],{x:O,y:S,data:E,reset:R}=await v({x:u,y:h,initialPlacement:r,placement:d,strategy:i,middlewareData:p,rects:c,platform:o,elements:{reference:n,floating:e}});u=O??u,h=S??h,p={...p,[w]:{...p[w],...E}},R&&g<=50&&(g++,typeof R=="object"&&(R.placement&&(d=R.placement),R.rects&&(c=R.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:i}):R.rects),{x:u,y:h}=GT(c,d,l)),y=-1)}return{x:u,y:h,placement:d,strategy:i,middlewareData:p}};async function Sh(n,e){var t;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=n,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:d=!1,padding:p=0}=Zi(e,n),g=mI(p),w=a[d?h==="floating"?"reference":"floating":h],v=dm(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(w)))==null||t?w:w.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),O=h==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,S=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),E=await(s.isElement==null?void 0:s.isElement(S))?await(s.getScale==null?void 0:s.getScale(S))||{x:1,y:1}:{x:1,y:1},R=dm(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:O,offsetParent:S,strategy:l}):O);return{top:(v.top-R.top+g.top)/E.y,bottom:(R.bottom-v.bottom+g.bottom)/E.y,left:(v.left-R.left+g.left)/E.x,right:(R.right-v.right+g.right)/E.x}}const Rj=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=Zi(n,e)||{};if(c==null)return{};const h=mI(u),d={x:t,y:r},p=Wx(i),g=Ux(p),y=await o.getDimensions(c),w=p==="y",v=w?"top":"left",O=w?"bottom":"right",S=w?"clientHeight":"clientWidth",E=s.reference[g]+s.reference[p]-d[p]-s.floating[g],R=d[p]-s.reference[p],M=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let b=M?M[S]:0;(!b||!await(o.isElement==null?void 0:o.isElement(M)))&&(b=a.floating[S]||s.floating[g]);const T=E/2-R/2,_=b/2-y[g]/2-1,C=go(h[v],_),D=go(h[O],_),N=C,I=b-y[g]-D,j=b/2-y[g]/2+T,ee=cw(N,j,I),te=!l.arrow&&Pc(i)!=null&&j!==ee&&s.reference[g]/2-(j<N?C:D)-y[g]/2<0,Y=te?j<N?j-N:j-I:0;return{[p]:d[p]+Y,data:{[p]:ee,centerOffset:j-ee-Y,...te&&{alignmentOffset:Y}},reset:te}}}),Ij=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:d,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:y=!0,...w}=Zi(n,e);if((t=s.arrow)!=null&&t.alignmentOffset)return{};const v=es(i),O=yo(a),S=es(a)===a,E=await(l.isRTL==null?void 0:l.isRTL(c.floating)),R=d||(S||!y?[fm(a)]:Ej(a)),M=g!=="none";!d&&M&&R.push(...Cj(a,y,g,E));const b=[a,...R],T=await Sh(e,w),_=[];let C=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&_.push(T[v]),h){const j=_j(i,o,E);_.push(T[j[0]],T[j[1]])}if(C=[...C,{placement:i,overflows:_}],!_.every(j=>j<=0)){var D,N;const j=(((D=s.flip)==null?void 0:D.index)||0)+1,ee=b[j];if(ee)return{data:{index:j,overflows:C},reset:{placement:ee}};let te=(N=C.filter(Y=>Y.overflows[0]<=0).sort((Y,Q)=>Y.overflows[1]-Q.overflows[1])[0])==null?void 0:N.placement;if(!te)switch(p){case"bestFit":{var I;const Y=(I=C.filter(Q=>{if(M){const $=yo(Q.placement);return $===O||$==="y"}return!0}).map(Q=>[Q.placement,Q.overflows.filter($=>$>0).reduce(($,G)=>$+G,0)]).sort((Q,$)=>Q[1]-$[1])[0])==null?void 0:I[0];Y&&(te=Y);break}case"initialPlacement":te=a;break}if(i!==te)return{reset:{placement:te}}}return{}}}};function XT(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function KT(n){return Sj.some(e=>n[e]>=0)}const Nj=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...i}=Zi(n,e);switch(r){case"referenceHidden":{const s=await Sh(e,{...i,elementContext:"reference"}),o=XT(s,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:KT(o)}}}case"escaped":{const s=await Sh(e,{...i,altBoundary:!0}),o=XT(s,t.floating);return{data:{escapedOffsets:o,escaped:KT(o)}}}default:return{}}}}};async function Dj(n,e){const{placement:t,platform:r,elements:i}=n,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=es(t),a=Pc(t),l=yo(t)==="y",c=["left","top"].includes(o)?-1:1,u=s&&l?-1:1,h=Zi(e,n);let{mainAxis:d,crossAxis:p,alignmentAxis:g}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof g=="number"&&(p=a==="end"?g*-1:g),l?{x:p*u,y:d*c}:{x:d*c,y:p*u}}const Mj=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await Dj(e,n);return o===((t=a.offset)==null?void 0:t.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},Lj=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:w=>{let{x:v,y:O}=w;return{x:v,y:O}}},...l}=Zi(n,e),c={x:t,y:r},u=await Sh(e,l),h=yo(es(i)),d=Bx(h);let p=c[d],g=c[h];if(s){const w=d==="y"?"top":"left",v=d==="y"?"bottom":"right",O=p+u[w],S=p-u[v];p=cw(O,p,S)}if(o){const w=h==="y"?"top":"left",v=h==="y"?"bottom":"right",O=g+u[w],S=g-u[v];g=cw(O,g,S)}const y=a.fn({...e,[d]:p,[h]:g});return{...y,data:{x:y.x-t,y:y.y-r,enabled:{[d]:s,[h]:o}}}}}},Vj=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Zi(n,e),u={x:t,y:r},h=yo(i),d=Bx(h);let p=u[d],g=u[h];const y=Zi(a,e),w=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(l){const S=d==="y"?"height":"width",E=s.reference[d]-s.floating[S]+w.mainAxis,R=s.reference[d]+s.reference[S]-w.mainAxis;p<E?p=E:p>R&&(p=R)}if(c){var v,O;const S=d==="y"?"width":"height",E=["top","left"].includes(es(i)),R=s.reference[h]-s.floating[S]+(E&&((v=o.offset)==null?void 0:v[h])||0)+(E?0:w.crossAxis),M=s.reference[h]+s.reference[S]+(E?0:((O=o.offset)==null?void 0:O[h])||0)-(E?w.crossAxis:0);g<R?g=R:g>M&&(g=M)}return{[d]:p,[h]:g}}}},Fj=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...c}=Zi(n,e),u=await Sh(e,c),h=es(i),d=Pc(i),p=yo(i)==="y",{width:g,height:y}=s.floating;let w,v;h==="top"||h==="bottom"?(w=h,v=d===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(v=h,w=d==="end"?"top":"bottom");const O=y-u.top-u.bottom,S=g-u.left-u.right,E=go(y-u[w],O),R=go(g-u[v],S),M=!e.middlewareData.shift;let b=E,T=R;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(T=S),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(b=O),M&&!d){const C=Un(u.left,0),D=Un(u.right,0),N=Un(u.top,0),I=Un(u.bottom,0);p?T=g-2*(C!==0||D!==0?C+D:Un(u.left,u.right)):b=y-2*(N!==0||I!==0?N+I:Un(u.top,u.bottom))}await l({...e,availableWidth:T,availableHeight:b});const _=await o.getDimensions(a.floating);return g!==_.width||y!==_.height?{reset:{rects:!0}}:{}}}};function Rg(){return typeof window<"u"}function Ac(n){return gI(n)?(n.nodeName||"").toLowerCase():"#document"}function Xn(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function wi(n){var e;return(e=(gI(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function gI(n){return Rg()?n instanceof Node||n instanceof Xn(n).Node:!1}function Nr(n){return Rg()?n instanceof Element||n instanceof Xn(n).Element:!1}function mi(n){return Rg()?n instanceof HTMLElement||n instanceof Xn(n).HTMLElement:!1}function YT(n){return!Rg()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Xn(n).ShadowRoot}function uf(n){const{overflow:e,overflowX:t,overflowY:r,display:i}=Dr(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(i)}function Qj(n){return["table","td","th"].includes(Ac(n))}function Ig(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function qx(n){const e=Hx(),t=Nr(n)?Dr(n):n;return["transform","translate","scale","rotate","perspective"].some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function $j(n){let e=vo(n);for(;mi(e)&&!oc(e);){if(qx(e))return e;if(Ig(e))return null;e=vo(e)}return null}function Hx(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function oc(n){return["html","body","#document"].includes(Ac(n))}function Dr(n){return Xn(n).getComputedStyle(n)}function Ng(n){return Nr(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function vo(n){if(Ac(n)==="html")return n;const e=n.assignedSlot||n.parentNode||YT(n)&&n.host||wi(n);return YT(e)?e.host:e}function yI(n){const e=vo(n);return oc(e)?n.ownerDocument?n.ownerDocument.body:n.body:mi(e)&&uf(e)?e:yI(e)}function bh(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=yI(n),s=i===((r=n.ownerDocument)==null?void 0:r.body),o=Xn(i);if(s){const a=hw(o);return e.concat(o,o.visualViewport||[],uf(i)?i:[],a&&t?bh(a):[])}return e.concat(i,bh(i,[],t))}function hw(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function vI(n){const e=Dr(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=mi(n),s=i?n.offsetWidth:t,o=i?n.offsetHeight:r,a=hm(t)!==s||hm(r)!==o;return a&&(t=s,r=o),{width:t,height:r,$:a}}function Gx(n){return Nr(n)?n:n.contextElement}function Rl(n){const e=Gx(n);if(!mi(e))return li(1);const t=e.getBoundingClientRect(),{width:r,height:i,$:s}=vI(e);let o=(s?hm(t.width):t.width)/r,a=(s?hm(t.height):t.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const jj=li(0);function wI(n){const e=Xn(n);return!Hx()||!e.visualViewport?jj:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function zj(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Xn(n)?!1:e}function ba(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=n.getBoundingClientRect(),s=Gx(n);let o=li(1);e&&(r?Nr(r)&&(o=Rl(r)):o=Rl(n));const a=zj(s,t,r)?wI(s):li(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,h=i.height/o.y;if(s){const d=Xn(s),p=r&&Nr(r)?Xn(r):r;let g=d,y=hw(g);for(;y&&r&&p!==g;){const w=Rl(y),v=y.getBoundingClientRect(),O=Dr(y),S=v.left+(y.clientLeft+parseFloat(O.paddingLeft))*w.x,E=v.top+(y.clientTop+parseFloat(O.paddingTop))*w.y;l*=w.x,c*=w.y,u*=w.x,h*=w.y,l+=S,c+=E,g=Xn(y),y=hw(g)}}return dm({width:u,height:h,x:l,y:c})}function Xx(n,e){const t=Ng(n).scrollLeft;return e?e.left+t:ba(wi(n)).left+t}function OI(n,e,t){t===void 0&&(t=!1);const r=n.getBoundingClientRect(),i=r.left+e.scrollLeft-(t?0:Xx(n,r)),s=r.top+e.scrollTop;return{x:i,y:s}}function Bj(n){let{elements:e,rect:t,offsetParent:r,strategy:i}=n;const s=i==="fixed",o=wi(r),a=e?Ig(e.floating):!1;if(r===o||a&&s)return t;let l={scrollLeft:0,scrollTop:0},c=li(1);const u=li(0),h=mi(r);if((h||!h&&!s)&&((Ac(r)!=="body"||uf(o))&&(l=Ng(r)),mi(r))){const p=ba(r);c=Rl(r),u.x=p.x+r.clientLeft,u.y=p.y+r.clientTop}const d=o&&!h&&!s?OI(o,l,!0):li(0);return{width:t.width*c.x,height:t.height*c.y,x:t.x*c.x-l.scrollLeft*c.x+u.x+d.x,y:t.y*c.y-l.scrollTop*c.y+u.y+d.y}}function Uj(n){return Array.from(n.getClientRects())}function Wj(n){const e=wi(n),t=Ng(n),r=n.ownerDocument.body,i=Un(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Un(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-t.scrollLeft+Xx(n);const a=-t.scrollTop;return Dr(r).direction==="rtl"&&(o+=Un(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function qj(n,e){const t=Xn(n),r=wi(n),i=t.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const c=Hx();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function Hj(n,e){const t=ba(n,!0,e==="fixed"),r=t.top+n.clientTop,i=t.left+n.clientLeft,s=mi(n)?Rl(n):li(1),o=n.clientWidth*s.x,a=n.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function JT(n,e,t){let r;if(e==="viewport")r=qj(n,t);else if(e==="document")r=Wj(wi(n));else if(Nr(e))r=Hj(e,t);else{const i=wI(n);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return dm(r)}function xI(n,e){const t=vo(n);return t===e||!Nr(t)||oc(t)?!1:Dr(t).position==="fixed"||xI(t,e)}function Gj(n,e){const t=e.get(n);if(t)return t;let r=bh(n,[],!1).filter(a=>Nr(a)&&Ac(a)!=="body"),i=null;const s=Dr(n).position==="fixed";let o=s?vo(n):n;for(;Nr(o)&&!oc(o);){const a=Dr(o),l=qx(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||uf(o)&&!l&&xI(n,o))?r=r.filter(u=>u!==o):i=a,o=vo(o)}return e.set(n,r),r}function Xj(n){let{element:e,boundary:t,rootBoundary:r,strategy:i}=n;const o=[...t==="clippingAncestors"?Ig(e)?[]:Gj(e,this._c):[].concat(t),r],a=o[0],l=o.reduce((c,u)=>{const h=JT(e,u,i);return c.top=Un(h.top,c.top),c.right=go(h.right,c.right),c.bottom=go(h.bottom,c.bottom),c.left=Un(h.left,c.left),c},JT(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Kj(n){const{width:e,height:t}=vI(n);return{width:e,height:t}}function Yj(n,e,t){const r=mi(e),i=wi(e),s=t==="fixed",o=ba(n,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=li(0);if(r||!r&&!s)if((Ac(e)!=="body"||uf(i))&&(a=Ng(e)),r){const d=ba(e,!0,s,e);l.x=d.x+e.clientLeft,l.y=d.y+e.clientTop}else i&&(l.x=Xx(i));const c=i&&!r&&!s?OI(i,a):li(0),u=o.left+a.scrollLeft-l.x-c.x,h=o.top+a.scrollTop-l.y-c.y;return{x:u,y:h,width:o.width,height:o.height}}function f0(n){return Dr(n).position==="static"}function ZT(n,e){if(!mi(n)||Dr(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return wi(n)===t&&(t=t.ownerDocument.body),t}function SI(n,e){const t=Xn(n);if(Ig(n))return t;if(!mi(n)){let i=vo(n);for(;i&&!oc(i);){if(Nr(i)&&!f0(i))return i;i=vo(i)}return t}let r=ZT(n,e);for(;r&&Qj(r)&&f0(r);)r=ZT(r,e);return r&&oc(r)&&f0(r)&&!qx(r)?t:r||$j(n)||t}const Jj=async function(n){const e=this.getOffsetParent||SI,t=this.getDimensions,r=await t(n.floating);return{reference:Yj(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Zj(n){return Dr(n).direction==="rtl"}const ez={convertOffsetParentRelativeRectToViewportRelativeRect:Bj,getDocumentElement:wi,getClippingRect:Xj,getOffsetParent:SI,getElementRects:Jj,getClientRects:Uj,getDimensions:Kj,getScale:Rl,isElement:Nr,isRTL:Zj};function bI(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function tz(n,e){let t=null,r;const i=wi(n);function s(){var a;clearTimeout(r),(a=t)==null||a.disconnect(),t=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=n.getBoundingClientRect(),{left:u,top:h,width:d,height:p}=c;if(a||e(),!d||!p)return;const g=Od(h),y=Od(i.clientWidth-(u+d)),w=Od(i.clientHeight-(h+p)),v=Od(u),S={rootMargin:-g+"px "+-y+"px "+-w+"px "+-v+"px",threshold:Un(0,go(1,l))||1};let E=!0;function R(M){const b=M[0].intersectionRatio;if(b!==l){if(!E)return o();b?o(!1,b):r=setTimeout(()=>{o(!1,1e-7)},1e3)}b===1&&!bI(c,n.getBoundingClientRect())&&o(),E=!1}try{t=new IntersectionObserver(R,{...S,root:i.ownerDocument})}catch{t=new IntersectionObserver(R,S)}t.observe(n)}return o(!0),s}function nz(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=Gx(n),u=i||s?[...c?bh(c):[],...bh(e)]:[];u.forEach(v=>{i&&v.addEventListener("scroll",t,{passive:!0}),s&&v.addEventListener("resize",t)});const h=c&&a?tz(c,t):null;let d=-1,p=null;o&&(p=new ResizeObserver(v=>{let[O]=v;O&&O.target===c&&p&&(p.unobserve(e),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var S;(S=p)==null||S.observe(e)})),t()}),c&&!l&&p.observe(c),p.observe(e));let g,y=l?ba(n):null;l&&w();function w(){const v=ba(n);y&&!bI(y,v)&&t(),y=v,g=requestAnimationFrame(w)}return t(),()=>{var v;u.forEach(O=>{i&&O.removeEventListener("scroll",t),s&&O.removeEventListener("resize",t)}),h==null||h(),(v=p)==null||v.disconnect(),p=null,l&&cancelAnimationFrame(g)}}const rz=Mj,iz=Lj,sz=Ij,oz=Fj,az=Nj,e_=Rj,lz=Vj,cz=(n,e,t)=>{const r=new Map,i={platform:ez,...t},s={...i.platform,_c:r};return Aj(n,e,{...i,platform:s})};var pp=typeof document<"u"?k.useLayoutEffect:k.useEffect;function pm(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,i;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!pm(n[r],e[r]))return!1;return!0}if(i=Object.keys(n),t=i.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=t;r--!==0;){const s=i[r];if(!(s==="_owner"&&n.$$typeof)&&!pm(n[s],e[s]))return!1}return!0}return n!==n&&e!==e}function TI(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function t_(n,e){const t=TI(n);return Math.round(e*t)/t}function d0(n){const e=k.useRef(n);return pp(()=>{e.current=n}),e}function uz(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=n,[u,h]=k.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[d,p]=k.useState(r);pm(d,r)||p(r);const[g,y]=k.useState(null),[w,v]=k.useState(null),O=k.useCallback(Q=>{Q!==M.current&&(M.current=Q,y(Q))},[]),S=k.useCallback(Q=>{Q!==b.current&&(b.current=Q,v(Q))},[]),E=s||g,R=o||w,M=k.useRef(null),b=k.useRef(null),T=k.useRef(u),_=l!=null,C=d0(l),D=d0(i),N=d0(c),I=k.useCallback(()=>{if(!M.current||!b.current)return;const Q={placement:e,strategy:t,middleware:d};D.current&&(Q.platform=D.current),cz(M.current,b.current,Q).then($=>{const G={...$,isPositioned:N.current!==!1};j.current&&!pm(T.current,G)&&(T.current=G,af.flushSync(()=>{h(G)}))})},[d,e,t,D,N]);pp(()=>{c===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,h(Q=>({...Q,isPositioned:!1})))},[c]);const j=k.useRef(!1);pp(()=>(j.current=!0,()=>{j.current=!1}),[]),pp(()=>{if(E&&(M.current=E),R&&(b.current=R),E&&R){if(C.current)return C.current(E,R,I);I()}},[E,R,I,C,_]);const ee=k.useMemo(()=>({reference:M,floating:b,setReference:O,setFloating:S}),[O,S]),te=k.useMemo(()=>({reference:E,floating:R}),[E,R]),Y=k.useMemo(()=>{const Q={position:t,left:0,top:0};if(!te.floating)return Q;const $=t_(te.floating,u.x),G=t_(te.floating,u.y);return a?{...Q,transform:"translate("+$+"px, "+G+"px)",...TI(te.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:$,top:G}},[t,a,te.floating,u.x,u.y]);return k.useMemo(()=>({...u,update:I,refs:ee,elements:te,floatingStyles:Y}),[u,I,ee,te,Y])}const hz=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:i}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?e_({element:r.current,padding:i}).fn(t):{}:r?e_({element:r,padding:i}).fn(t):{}}}},fz=(n,e)=>({...rz(n),options:[n,e]}),dz=(n,e)=>({...iz(n),options:[n,e]}),pz=(n,e)=>({...lz(n),options:[n,e]}),mz=(n,e)=>({...sz(n),options:[n,e]}),gz=(n,e)=>({...oz(n),options:[n,e]}),yz=(n,e)=>({...az(n),options:[n,e]}),vz=(n,e)=>({...hz(n),options:[n,e]});var wz="Arrow",_I=k.forwardRef((n,e)=>{const{children:t,width:r=10,height:i=5,...s}=n;return A.jsx(Ht.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:A.jsx("polygon",{points:"0,0 30,0 15,10"})})});_I.displayName=wz;var Oz=_I;function xz(n){const[e,t]=k.useState(void 0);return mo(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=n.offsetWidth,a=n.offsetHeight;t({width:o,height:a})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var EI="Popper",[kI,CI]=lf(EI),[Tre,PI]=kI(EI),AI="PopperAnchor",RI=k.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...i}=n,s=PI(AI,t),o=k.useRef(null),a=Ir(e,o);return k.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:A.jsx(Ht.div,{...i,ref:a})});RI.displayName=AI;var Kx="PopperContent",[Sz,bz]=kI(Kx),II=k.forwardRef((n,e)=>{var xe,ds,Qr,Zn,Vn,$r;const{__scopePopper:t,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:h="partial",hideWhenDetached:d=!1,updatePositionStrategy:p="optimized",onPlaced:g,...y}=n,w=PI(Kx,t),[v,O]=k.useState(null),S=Ir(e,er=>O(er)),[E,R]=k.useState(null),M=xz(E),b=(M==null?void 0:M.width)??0,T=(M==null?void 0:M.height)??0,_=r+(s!=="center"?"-"+s:""),C=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},D=Array.isArray(c)?c:[c],N=D.length>0,I={padding:C,boundary:D.filter(_z),altBoundary:N},{refs:j,floatingStyles:ee,placement:te,isPositioned:Y,middlewareData:Q}=uz({strategy:"fixed",placement:_,whileElementsMounted:(...er)=>nz(...er,{animationFrame:p==="always"}),elements:{reference:w.anchor},middleware:[fz({mainAxis:i+T,alignmentAxis:o}),l&&dz({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?pz():void 0,...I}),l&&mz({...I}),gz({...I,apply:({elements:er,rects:ps,availableWidth:jo,availableHeight:zo})=>{const{width:Uc,height:Bo}=ps.reference,Ti=er.floating.style;Ti.setProperty("--radix-popper-available-width",`${jo}px`),Ti.setProperty("--radix-popper-available-height",`${zo}px`),Ti.setProperty("--radix-popper-anchor-width",`${Uc}px`),Ti.setProperty("--radix-popper-anchor-height",`${Bo}px`)}}),E&&vz({element:E,padding:a}),Ez({arrowWidth:b,arrowHeight:T}),d&&yz({strategy:"referenceHidden",...I})]}),[$,G]=MI(te),ce=po(g);mo(()=>{Y&&(ce==null||ce())},[Y,ce]);const Z=(xe=Q.arrow)==null?void 0:xe.x,oe=(ds=Q.arrow)==null?void 0:ds.y,de=((Qr=Q.arrow)==null?void 0:Qr.centerOffset)!==0,[Pe,et]=k.useState();return mo(()=>{v&&et(window.getComputedStyle(v).zIndex)},[v]),A.jsx("div",{ref:j.setFloating,"data-radix-popper-content-wrapper":"",style:{...ee,transform:Y?ee.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Pe,"--radix-popper-transform-origin":[(Zn=Q.transformOrigin)==null?void 0:Zn.x,(Vn=Q.transformOrigin)==null?void 0:Vn.y].join(" "),...(($r=Q.hide)==null?void 0:$r.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:A.jsx(Sz,{scope:t,placedSide:$,onArrowChange:R,arrowX:Z,arrowY:oe,shouldHideArrow:de,children:A.jsx(Ht.div,{"data-side":$,"data-align":G,...y,ref:S,style:{...y.style,animation:Y?void 0:"none"}})})})});II.displayName=Kx;var NI="PopperArrow",Tz={top:"bottom",right:"left",bottom:"top",left:"right"},DI=k.forwardRef(function(e,t){const{__scopePopper:r,...i}=e,s=bz(NI,r),o=Tz[s.placedSide];return A.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:A.jsx(Oz,{...i,ref:t,style:{...i.style,display:"block"}})})});DI.displayName=NI;function _z(n){return n!==null}var Ez=n=>({name:"transformOrigin",options:n,fn(e){var w,v,O;const{placement:t,rects:r,middlewareData:i}=e,o=((w=i.arrow)==null?void 0:w.centerOffset)!==0,a=o?0:n.arrowWidth,l=o?0:n.arrowHeight,[c,u]=MI(t),h={start:"0%",center:"50%",end:"100%"}[u],d=(((v=i.arrow)==null?void 0:v.x)??0)+a/2,p=(((O=i.arrow)==null?void 0:O.y)??0)+l/2;let g="",y="";return c==="bottom"?(g=o?h:`${d}px`,y=`${-l}px`):c==="top"?(g=o?h:`${d}px`,y=`${r.floating.height+l}px`):c==="right"?(g=`${-l}px`,y=o?h:`${p}px`):c==="left"&&(g=`${r.floating.width+l}px`,y=o?h:`${p}px`),{data:{x:g,y}}}});function MI(n){const[e,t="center"]=n.split("-");return[e,t]}var kz=RI,Cz=II,Pz=DI,[Dg,_re]=lf("Tooltip",[CI]),Yx=CI(),LI="TooltipProvider",Az=700,n_="tooltip.open",[Rz,VI]=Dg(LI),FI=n=>{const{__scopeTooltip:e,delayDuration:t=Az,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:s}=n,o=k.useRef(!0),a=k.useRef(!1),l=k.useRef(0);return k.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),A.jsx(Rz,{scope:e,isOpenDelayedRef:o,delayDuration:t,onOpen:k.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:k.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:k.useCallback(c=>{a.current=c},[]),disableHoverableContent:i,children:s})};FI.displayName=LI;var QI="Tooltip",[Ere,Mg]=Dg(QI),fw="TooltipTrigger",Iz=k.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=Mg(fw,t),s=VI(fw,t),o=Yx(t),a=k.useRef(null),l=Ir(e,a,i.onTriggerChange),c=k.useRef(!1),u=k.useRef(!1),h=k.useCallback(()=>c.current=!1,[]);return k.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),A.jsx(kz,{asChild:!0,...o,children:A.jsx(Ht.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:l,onPointerMove:xt(n.onPointerMove,d=>{d.pointerType!=="touch"&&!u.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),u.current=!0)}),onPointerLeave:xt(n.onPointerLeave,()=>{i.onTriggerLeave(),u.current=!1}),onPointerDown:xt(n.onPointerDown,()=>{i.open&&i.onClose(),c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:xt(n.onFocus,()=>{c.current||i.onOpen()}),onBlur:xt(n.onBlur,i.onClose),onClick:xt(n.onClick,i.onClose)})})});Iz.displayName=fw;var Nz="TooltipPortal",[kre,Dz]=Dg(Nz,{forceMount:void 0}),ac="TooltipContent",$I=k.forwardRef((n,e)=>{const t=Dz(ac,n.__scopeTooltip),{forceMount:r=t.forceMount,side:i="top",...s}=n,o=Mg(ac,n.__scopeTooltip);return A.jsx(Vx,{present:r||o.open,children:o.disableHoverableContent?A.jsx(jI,{side:i,...s,ref:e}):A.jsx(Mz,{side:i,...s,ref:e})})}),Mz=k.forwardRef((n,e)=>{const t=Mg(ac,n.__scopeTooltip),r=VI(ac,n.__scopeTooltip),i=k.useRef(null),s=Ir(e,i),[o,a]=k.useState(null),{trigger:l,onClose:c}=t,u=i.current,{onPointerInTransitChange:h}=r,d=k.useCallback(()=>{a(null),h(!1)},[h]),p=k.useCallback((g,y)=>{const w=g.currentTarget,v={x:g.clientX,y:g.clientY},O=$z(v,w.getBoundingClientRect()),S=jz(v,O),E=zz(y.getBoundingClientRect()),R=Uz([...S,...E]);a(R),h(!0)},[h]);return k.useEffect(()=>()=>d(),[d]),k.useEffect(()=>{if(l&&u){const g=w=>p(w,u),y=w=>p(w,l);return l.addEventListener("pointerleave",g),u.addEventListener("pointerleave",y),()=>{l.removeEventListener("pointerleave",g),u.removeEventListener("pointerleave",y)}}},[l,u,p,d]),k.useEffect(()=>{if(o){const g=y=>{const w=y.target,v={x:y.clientX,y:y.clientY},O=(l==null?void 0:l.contains(w))||(u==null?void 0:u.contains(w)),S=!Bz(v,o);O?d():S&&(d(),c())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[l,u,o,c,d]),A.jsx(jI,{...n,ref:s})}),[Lz,Vz]=Dg(QI,{isInside:!1}),Fz=lQ("TooltipContent"),jI=k.forwardRef((n,e)=>{const{__scopeTooltip:t,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=n,l=Mg(ac,t),c=Yx(t),{onClose:u}=l;return k.useEffect(()=>(document.addEventListener(n_,u),()=>document.removeEventListener(n_,u)),[u]),k.useEffect(()=>{if(l.trigger){const h=d=>{const p=d.target;p!=null&&p.contains(l.trigger)&&u()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,u]),A.jsx(Lx,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:u,children:A.jsxs(Cz,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[A.jsx(Fz,{children:r}),A.jsx(Lz,{scope:t,isInside:!0,children:A.jsx(NQ,{id:l.contentId,role:"tooltip",children:i||r})})]})})});$I.displayName=ac;var zI="TooltipArrow",Qz=k.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=Yx(t);return Vz(zI,t).isInside?null:A.jsx(Pz,{...i,...r,ref:e})});Qz.displayName=zI;function $z(n,e){const t=Math.abs(e.top-n.y),r=Math.abs(e.bottom-n.y),i=Math.abs(e.right-n.x),s=Math.abs(e.left-n.x);switch(Math.min(t,r,i,s)){case s:return"left";case i:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function jz(n,e,t=5){const r=[];switch(e){case"top":r.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":r.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":r.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":r.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return r}function zz(n){const{top:e,right:t,bottom:r,left:i}=n;return[{x:i,y:e},{x:t,y:e},{x:t,y:r},{x:i,y:r}]}function Bz(n,e){const{x:t,y:r}=n;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],l=e[o],c=a.x,u=a.y,h=l.x,d=l.y;u>r!=d>r&&t<(h-c)*(r-u)/(d-u)+c&&(i=!i)}return i}function Uz(n){const e=n.slice();return e.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),Wz(e)}function Wz(n){if(n.length<=1)return n.slice();const e=[];for(let r=0;r<n.length;r++){const i=n[r];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const t=[];for(let r=n.length-1;r>=0;r--){const i=n[r];for(;t.length>=2;){const s=t[t.length-1],o=t[t.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))t.pop();else break}t.push(i)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var qz=FI,BI=$I;const Hz=qz,Gz=k.forwardRef(({className:n,sideOffset:e=4,...t},r)=>A.jsx(BI,{ref:r,sideOffset:e,className:Gt("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t}));Gz.displayName=BI.displayName;var Lg=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Vg=typeof window>"u"||"Deno"in globalThis;function Sr(){}function Xz(n,e){return typeof n=="function"?n(e):n}function Kz(n){return typeof n=="number"&&n>=0&&n!==1/0}function Yz(n,e){return Math.max(n+(e||0)-Date.now(),0)}function r_(n,e){return typeof n=="function"?n(e):n}function Jz(n,e){return typeof n=="function"?n(e):n}function i_(n,e){const{type:t="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:a}=n;if(o){if(r){if(e.queryHash!==Jx(o,e.options))return!1}else if(!_h(e.queryKey,o))return!1}if(t!=="all"){const l=e.isActive();if(t==="active"&&!l||t==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||s&&!s(e))}function s_(n,e){const{exact:t,status:r,predicate:i,mutationKey:s}=n;if(s){if(!e.options.mutationKey)return!1;if(t){if(Th(e.options.mutationKey)!==Th(s))return!1}else if(!_h(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function Jx(n,e){return((e==null?void 0:e.queryKeyHashFn)||Th)(n)}function Th(n){return JSON.stringify(n,(e,t)=>dw(t)?Object.keys(t).sort().reduce((r,i)=>(r[i]=t[i],r),{}):t)}function _h(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(t=>_h(n[t],e[t])):!1}function UI(n,e){if(n===e)return n;const t=o_(n)&&o_(e);if(t||dw(n)&&dw(e)){const r=t?n:Object.keys(n),i=r.length,s=t?e:Object.keys(e),o=s.length,a=t?[]:{};let l=0;for(let c=0;c<o;c++){const u=t?c:s[c];(!t&&r.includes(u)||t)&&n[u]===void 0&&e[u]===void 0?(a[u]=void 0,l++):(a[u]=UI(n[u],e[u]),a[u]===n[u]&&n[u]!==void 0&&l++)}return i===o&&l===i?n:a}return e}function o_(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function dw(n){if(!a_(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!a_(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function a_(n){return Object.prototype.toString.call(n)==="[object Object]"}function Zz(n){return new Promise(e=>{setTimeout(e,n)})}function eB(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?UI(n,e):e}function tB(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function nB(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var Zx=Symbol();function WI(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===Zx?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var ca,Fs,Ul,aP,rB=(aP=class extends Lg{constructor(){super();De(this,ca);De(this,Fs);De(this,Ul);ve(this,Ul,e=>{if(!Vg&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){z(this,Fs)||this.setEventListener(z(this,Ul))}onUnsubscribe(){var e;this.hasListeners()||((e=z(this,Fs))==null||e.call(this),ve(this,Fs,void 0))}setEventListener(e){var t;ve(this,Ul,e),(t=z(this,Fs))==null||t.call(this),ve(this,Fs,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){z(this,ca)!==e&&(ve(this,ca,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof z(this,ca)=="boolean"?z(this,ca):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},ca=new WeakMap,Fs=new WeakMap,Ul=new WeakMap,aP),qI=new rB,Wl,Qs,ql,lP,iB=(lP=class extends Lg{constructor(){super();De(this,Wl,!0);De(this,Qs);De(this,ql);ve(this,ql,e=>{if(!Vg&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){z(this,Qs)||this.setEventListener(z(this,ql))}onUnsubscribe(){var e;this.hasListeners()||((e=z(this,Qs))==null||e.call(this),ve(this,Qs,void 0))}setEventListener(e){var t;ve(this,ql,e),(t=z(this,Qs))==null||t.call(this),ve(this,Qs,e(this.setOnline.bind(this)))}setOnline(e){z(this,Wl)!==e&&(ve(this,Wl,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return z(this,Wl)}},Wl=new WeakMap,Qs=new WeakMap,ql=new WeakMap,lP),mm=new iB;function sB(){let n,e;const t=new Promise((i,s)=>{n=i,e=s});t.status="pending",t.catch(()=>{});function r(i){Object.assign(t,i),delete t.resolve,delete t.reject}return t.resolve=i=>{r({status:"fulfilled",value:i}),n(i)},t.reject=i=>{r({status:"rejected",reason:i}),e(i)},t}function oB(n){return Math.min(1e3*2**n,3e4)}function HI(n){return(n??"online")==="online"?mm.isOnline():!0}var GI=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function p0(n){return n instanceof GI}function XI(n){let e=!1,t=0,r=!1,i;const s=sB(),o=y=>{var w;r||(d(new GI(y)),(w=n.abort)==null||w.call(n))},a=()=>{e=!0},l=()=>{e=!1},c=()=>qI.isFocused()&&(n.networkMode==="always"||mm.isOnline())&&n.canRun(),u=()=>HI(n.networkMode)&&n.canRun(),h=y=>{var w;r||(r=!0,(w=n.onSuccess)==null||w.call(n,y),i==null||i(),s.resolve(y))},d=y=>{var w;r||(r=!0,(w=n.onError)==null||w.call(n,y),i==null||i(),s.reject(y))},p=()=>new Promise(y=>{var w;i=v=>{(r||c())&&y(v)},(w=n.onPause)==null||w.call(n)}).then(()=>{var y;i=void 0,r||(y=n.onContinue)==null||y.call(n)}),g=()=>{if(r)return;let y;const w=t===0?n.initialPromise:void 0;try{y=w??n.fn()}catch(v){y=Promise.reject(v)}Promise.resolve(y).then(h).catch(v=>{var M;if(r)return;const O=n.retry??(Vg?0:3),S=n.retryDelay??oB,E=typeof S=="function"?S(t,v):S,R=O===!0||typeof O=="number"&&t<O||typeof O=="function"&&O(t,v);if(e||!R){d(v);return}t++,(M=n.onFail)==null||M.call(n,t,v),Zz(E).then(()=>c()?void 0:p()).then(()=>{e?d(v):g()})})};return{promise:s,cancel:o,continue:()=>(i==null||i(),s),cancelRetry:a,continueRetry:l,canStart:u,start:()=>(u()?g():p().then(g),s)}}var aB=n=>setTimeout(n,0);function lB(){let n=[],e=0,t=a=>{a()},r=a=>{a()},i=aB;const s=a=>{e?n.push(a):i(()=>{t(a)})},o=()=>{const a=n;n=[],a.length&&i(()=>{r(()=>{a.forEach(l=>{t(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{s(()=>{a(...l)})},schedule:s,setNotifyFunction:a=>{t=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{i=a}}}var dn=lB(),ua,cP,KI=(cP=class{constructor(){De(this,ua)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Kz(this.gcTime)&&ve(this,ua,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(Vg?1/0:5*60*1e3))}clearGcTimeout(){z(this,ua)&&(clearTimeout(z(this,ua)),ve(this,ua,void 0))}},ua=new WeakMap,cP),Hl,Gl,nr,ha,tn,Zh,fa,br,Ri,uP,cB=(uP=class extends KI{constructor(t){super();De(this,br);De(this,Hl);De(this,Gl);De(this,nr);De(this,ha);De(this,tn);De(this,Zh);De(this,fa);ve(this,fa,!1),ve(this,Zh,t.defaultOptions),this.setOptions(t.options),this.observers=[],ve(this,ha,t.client),ve(this,nr,z(this,ha).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,ve(this,Hl,hB(this.options)),this.state=t.state??z(this,Hl),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=z(this,tn))==null?void 0:t.promise}setOptions(t){this.options={...z(this,Zh),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&z(this,nr).remove(this)}setData(t,r){const i=eB(this.state.data,t,this.options);return Yt(this,br,Ri).call(this,{data:i,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),i}setState(t,r){Yt(this,br,Ri).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var i,s;const r=(i=z(this,tn))==null?void 0:i.promise;return(s=z(this,tn))==null||s.cancel(t),r?r.then(Sr).catch(Sr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(z(this,Hl))}isActive(){return this.observers.some(t=>Jz(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Zx||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!Yz(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(i=>i.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=z(this,tn))==null||r.continue()}onOnline(){var r;const t=this.observers.find(i=>i.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=z(this,tn))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),z(this,nr).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(z(this,tn)&&(z(this,fa)?z(this,tn).cancel({revert:!0}):z(this,tn).cancelRetry()),this.scheduleGc()),z(this,nr).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Yt(this,br,Ri).call(this,{type:"invalidate"})}fetch(t,r){var c,u,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(z(this,tn))return z(this,tn).continueRetry(),z(this,tn).promise}if(t&&this.setOptions(t),!this.options.queryFn){const d=this.observers.find(p=>p.options.queryFn);d&&this.setOptions(d.options)}const i=new AbortController,s=d=>{Object.defineProperty(d,"signal",{enumerable:!0,get:()=>(ve(this,fa,!0),i.signal)})},o=()=>{const d=WI(this.options,r),p={client:z(this,ha),queryKey:this.queryKey,meta:this.meta};return s(p),ve(this,fa,!1),this.options.persister?this.options.persister(d,p,this):d(p)},a={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:z(this,ha),state:this.state,fetchFn:o};s(a),(c=this.options.behavior)==null||c.onFetch(a,this),ve(this,Gl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&Yt(this,br,Ri).call(this,{type:"fetch",meta:(h=a.fetchOptions)==null?void 0:h.meta});const l=d=>{var p,g,y,w;p0(d)&&d.silent||Yt(this,br,Ri).call(this,{type:"error",error:d}),p0(d)||((g=(p=z(this,nr).config).onError)==null||g.call(p,d,this),(w=(y=z(this,nr).config).onSettled)==null||w.call(y,this.state.data,d,this)),this.scheduleGc()};return ve(this,tn,XI({initialPromise:r==null?void 0:r.initialPromise,fn:a.fetchFn,abort:i.abort.bind(i),onSuccess:d=>{var p,g,y,w;if(d===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(d)}catch(v){l(v);return}(g=(p=z(this,nr).config).onSuccess)==null||g.call(p,d,this),(w=(y=z(this,nr).config).onSettled)==null||w.call(y,d,this.state.error,this),this.scheduleGc()},onError:l,onFail:(d,p)=>{Yt(this,br,Ri).call(this,{type:"failed",failureCount:d,error:p})},onPause:()=>{Yt(this,br,Ri).call(this,{type:"pause"})},onContinue:()=>{Yt(this,br,Ri).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),z(this,tn).start()}},Hl=new WeakMap,Gl=new WeakMap,nr=new WeakMap,ha=new WeakMap,tn=new WeakMap,Zh=new WeakMap,fa=new WeakMap,br=new WeakSet,Ri=function(t){const r=i=>{switch(t.type){case"failed":return{...i,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...uB(i.data,this.options),fetchMeta:t.meta??null};case"success":return{...i,data:t.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=t.error;return p0(s)&&s.revert&&z(this,Gl)?{...z(this,Gl),fetchStatus:"idle"}:{...i,error:s,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...t.state}}};this.state=r(this.state),dn.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),z(this,nr).notify({query:this,type:"updated",action:t})})},uP);function uB(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:HI(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function hB(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var Xr,hP,fB=(hP=class extends Lg{constructor(e={}){super();De(this,Xr);this.config=e,ve(this,Xr,new Map)}build(e,t,r){const i=t.queryKey,s=t.queryHash??Jx(i,t);let o=this.get(s);return o||(o=new cB({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){z(this,Xr).has(e.queryHash)||(z(this,Xr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=z(this,Xr).get(e.queryHash);t&&(e.destroy(),t===e&&z(this,Xr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){dn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return z(this,Xr).get(e)}getAll(){return[...z(this,Xr).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>i_(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>i_(e,r)):t}notify(e){dn.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){dn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){dn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Xr=new WeakMap,hP),Kr,hn,da,Yr,_s,fP,dB=(fP=class extends KI{constructor(t){super();De(this,Yr);De(this,Kr);De(this,hn);De(this,da);this.mutationId=t.mutationId,ve(this,hn,t.mutationCache),ve(this,Kr,[]),this.state=t.state||pB(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){z(this,Kr).includes(t)||(z(this,Kr).push(t),this.clearGcTimeout(),z(this,hn).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){ve(this,Kr,z(this,Kr).filter(r=>r!==t)),this.scheduleGc(),z(this,hn).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){z(this,Kr).length||(this.state.status==="pending"?this.scheduleGc():z(this,hn).remove(this))}continue(){var t;return((t=z(this,da))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,a,l,c,u,h,d,p,g,y,w,v,O,S,E,R,M,b,T,_;const r=()=>{Yt(this,Yr,_s).call(this,{type:"continue"})};ve(this,da,XI({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(C,D)=>{Yt(this,Yr,_s).call(this,{type:"failed",failureCount:C,error:D})},onPause:()=>{Yt(this,Yr,_s).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>z(this,hn).canRun(this)}));const i=this.state.status==="pending",s=!z(this,da).canStart();try{if(i)r();else{Yt(this,Yr,_s).call(this,{type:"pending",variables:t,isPaused:s}),await((a=(o=z(this,hn).config).onMutate)==null?void 0:a.call(o,t,this));const D=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,t));D!==this.state.context&&Yt(this,Yr,_s).call(this,{type:"pending",context:D,variables:t,isPaused:s})}const C=await z(this,da).start();return await((h=(u=z(this,hn).config).onSuccess)==null?void 0:h.call(u,C,t,this.state.context,this)),await((p=(d=this.options).onSuccess)==null?void 0:p.call(d,C,t,this.state.context)),await((y=(g=z(this,hn).config).onSettled)==null?void 0:y.call(g,C,null,this.state.variables,this.state.context,this)),await((v=(w=this.options).onSettled)==null?void 0:v.call(w,C,null,t,this.state.context)),Yt(this,Yr,_s).call(this,{type:"success",data:C}),C}catch(C){try{throw await((S=(O=z(this,hn).config).onError)==null?void 0:S.call(O,C,t,this.state.context,this)),await((R=(E=this.options).onError)==null?void 0:R.call(E,C,t,this.state.context)),await((b=(M=z(this,hn).config).onSettled)==null?void 0:b.call(M,void 0,C,this.state.variables,this.state.context,this)),await((_=(T=this.options).onSettled)==null?void 0:_.call(T,void 0,C,t,this.state.context)),C}finally{Yt(this,Yr,_s).call(this,{type:"error",error:C})}}finally{z(this,hn).runNext(this)}}},Kr=new WeakMap,hn=new WeakMap,da=new WeakMap,Yr=new WeakSet,_s=function(t){const r=i=>{switch(t.type){case"failed":return{...i,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...i,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:t.error,failureCount:i.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),dn.batch(()=>{z(this,Kr).forEach(i=>{i.onMutationUpdate(t)}),z(this,hn).notify({mutation:this,type:"updated",action:t})})},fP);function pB(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Qi,Tr,ef,dP,mB=(dP=class extends Lg{constructor(e={}){super();De(this,Qi);De(this,Tr);De(this,ef);this.config=e,ve(this,Qi,new Set),ve(this,Tr,new Map),ve(this,ef,0)}build(e,t,r){const i=new dB({mutationCache:this,mutationId:++Jf(this,ef)._,options:e.defaultMutationOptions(t),state:r});return this.add(i),i}add(e){z(this,Qi).add(e);const t=xd(e);if(typeof t=="string"){const r=z(this,Tr).get(t);r?r.push(e):z(this,Tr).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(z(this,Qi).delete(e)){const t=xd(e);if(typeof t=="string"){const r=z(this,Tr).get(t);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&z(this,Tr).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=xd(e);if(typeof t=="string"){const r=z(this,Tr).get(t),i=r==null?void 0:r.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){var r;const t=xd(e);if(typeof t=="string"){const i=(r=z(this,Tr).get(t))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){dn.batch(()=>{z(this,Qi).forEach(e=>{this.notify({type:"removed",mutation:e})}),z(this,Qi).clear(),z(this,Tr).clear()})}getAll(){return Array.from(z(this,Qi))}find(e){const t={exact:!0,...e};return this.getAll().find(r=>s_(t,r))}findAll(e={}){return this.getAll().filter(t=>s_(e,t))}notify(e){dn.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return dn.batch(()=>Promise.all(e.map(t=>t.continue().catch(Sr))))}},Qi=new WeakMap,Tr=new WeakMap,ef=new WeakMap,dP);function xd(n){var e;return(e=n.options.scope)==null?void 0:e.id}function l_(n){return{onFetch:(e,t)=>{var u,h,d,p,g;const r=e.options,i=(d=(h=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:h.fetchMore)==null?void 0:d.direction,s=((p=e.state.data)==null?void 0:p.pages)||[],o=((g=e.state.data)==null?void 0:g.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let y=!1;const w=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(e.signal.aborted?y=!0:e.signal.addEventListener("abort",()=>{y=!0}),e.signal)})},v=WI(e.options,e.fetchOptions),O=async(S,E,R)=>{if(y)return Promise.reject();if(E==null&&S.pages.length)return Promise.resolve(S);const M={client:e.client,queryKey:e.queryKey,pageParam:E,direction:R?"backward":"forward",meta:e.options.meta};w(M);const b=await v(M),{maxPages:T}=e.options,_=R?nB:tB;return{pages:_(S.pages,b,T),pageParams:_(S.pageParams,E,T)}};if(i&&s.length){const S=i==="backward",E=S?gB:c_,R={pages:s,pageParams:o},M=E(r,R);a=await O(R,M,S)}else{const S=n??s.length;do{const E=l===0?o[0]??r.initialPageParam:c_(r,a);if(l>0&&E==null)break;a=await O(a,E),l++}while(l<S)}return a};e.options.persister?e.fetchFn=()=>{var y,w;return(w=(y=e.options).persister)==null?void 0:w.call(y,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=c}}}function c_(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function gB(n,{pages:e,pageParams:t}){var r;return e.length>0?(r=n.getPreviousPageParam)==null?void 0:r.call(n,e[0],e,t[0],t):void 0}var at,$s,js,Xl,Kl,zs,Yl,Jl,pP,yB=(pP=class{constructor(n={}){De(this,at);De(this,$s);De(this,js);De(this,Xl);De(this,Kl);De(this,zs);De(this,Yl);De(this,Jl);ve(this,at,n.queryCache||new fB),ve(this,$s,n.mutationCache||new mB),ve(this,js,n.defaultOptions||{}),ve(this,Xl,new Map),ve(this,Kl,new Map),ve(this,zs,0)}mount(){Jf(this,zs)._++,z(this,zs)===1&&(ve(this,Yl,qI.subscribe(async n=>{n&&(await this.resumePausedMutations(),z(this,at).onFocus())})),ve(this,Jl,mm.subscribe(async n=>{n&&(await this.resumePausedMutations(),z(this,at).onOnline())})))}unmount(){var n,e;Jf(this,zs)._--,z(this,zs)===0&&((n=z(this,Yl))==null||n.call(this),ve(this,Yl,void 0),(e=z(this,Jl))==null||e.call(this),ve(this,Jl,void 0))}isFetching(n){return z(this,at).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return z(this,$s).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=z(this,at).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=z(this,at).build(this,e),r=t.state.data;return r===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(r_(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(n){return z(this,at).findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),i=z(this,at).get(r.queryHash),s=i==null?void 0:i.state.data,o=Xz(e,s);if(o!==void 0)return z(this,at).build(this,r).setData(o,{...t,manual:!0})}setQueriesData(n,e,t){return dn.batch(()=>z(this,at).findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=z(this,at).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=z(this,at);dn.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=z(this,at);return dn.batch(()=>(t.findAll(n).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},r=dn.batch(()=>z(this,at).findAll(n).map(i=>i.cancel(t)));return Promise.all(r).then(Sr).catch(Sr)}invalidateQueries(n,e={}){return dn.batch(()=>(z(this,at).findAll(n).forEach(t=>{t.invalidate()}),(n==null?void 0:n.refetchType)==="none"?Promise.resolve():this.refetchQueries({...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},r=dn.batch(()=>z(this,at).findAll(n).filter(i=>!i.isDisabled()).map(i=>{let s=i.fetch(void 0,t);return t.throwOnError||(s=s.catch(Sr)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(Sr)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=z(this,at).build(this,e);return t.isStaleByTime(r_(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(Sr).catch(Sr)}fetchInfiniteQuery(n){return n.behavior=l_(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(Sr).catch(Sr)}ensureInfiniteQueryData(n){return n.behavior=l_(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return mm.isOnline()?z(this,$s).resumePausedMutations():Promise.resolve()}getQueryCache(){return z(this,at)}getMutationCache(){return z(this,$s)}getDefaultOptions(){return z(this,js)}setDefaultOptions(n){ve(this,js,n)}setQueryDefaults(n,e){z(this,Xl).set(Th(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...z(this,Xl).values()],t={};return e.forEach(r=>{_h(n,r.queryKey)&&Object.assign(t,r.defaultOptions)}),t}setMutationDefaults(n,e){z(this,Kl).set(Th(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...z(this,Kl).values()],t={};return e.forEach(r=>{_h(n,r.mutationKey)&&Object.assign(t,r.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...z(this,js).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=Jx(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Zx&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...z(this,js).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){z(this,at).clear(),z(this,$s).clear()}},at=new WeakMap,$s=new WeakMap,js=new WeakMap,Xl=new WeakMap,Kl=new WeakMap,zs=new WeakMap,Yl=new WeakMap,Jl=new WeakMap,pP),vB=k.createContext(void 0),wB=({client:n,children:e})=>(k.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),A.jsx(vB.Provider,{value:n,children:e}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Eh(){return Eh=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Eh.apply(this,arguments)}var Ws;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Ws||(Ws={}));const u_="popstate";function OB(n){n===void 0&&(n={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return pw("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:gm(i)}return SB(e,t,null,n)}function vt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function YI(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function xB(){return Math.random().toString(36).substr(2,8)}function h_(n,e){return{usr:n.state,key:n.key,idx:e}}function pw(n,e,t,r){return t===void 0&&(t=null),Eh({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Rc(e):e,{state:t,key:e&&e.key||r||xB()})}function gm(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Rc(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function SB(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Ws.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(Eh({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function h(){a=Ws.Pop;let w=u(),v=w==null?null:w-c;c=w,l&&l({action:a,location:y.location,delta:v})}function d(w,v){a=Ws.Push;let O=pw(y.location,w,v);c=u()+1;let S=h_(O,c),E=y.createHref(O);try{o.pushState(S,"",E)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;i.location.assign(E)}s&&l&&l({action:a,location:y.location,delta:1})}function p(w,v){a=Ws.Replace;let O=pw(y.location,w,v);c=u();let S=h_(O,c),E=y.createHref(O);o.replaceState(S,"",E),s&&l&&l({action:a,location:y.location,delta:0})}function g(w){let v=i.location.origin!=="null"?i.location.origin:i.location.href,O=typeof w=="string"?w:gm(w);return O=O.replace(/ $/,"%20"),vt(v,"No window.location.(origin|href) available to create URL for href: "+O),new URL(O,v)}let y={get action(){return a},get location(){return n(i,o)},listen(w){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(u_,h),l=w,()=>{i.removeEventListener(u_,h),l=null}},createHref(w){return e(i,w)},createURL:g,encodeLocation(w){let v=g(w);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:d,replace:p,go(w){return o.go(w)}};return y}var f_;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(f_||(f_={}));function bB(n,e,t){return t===void 0&&(t="/"),TB(n,e,t)}function TB(n,e,t,r){let i=typeof e=="string"?Rc(e):e,s=e1(i.pathname||"/",t);if(s==null)return null;let o=JI(n);_B(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=VB(s);a=DB(o[l],c)}return a}function JI(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(vt(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=io([r,l.relativePath]),u=t.concat(l);s.children&&s.children.length>0&&(vt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),JI(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:IB(c,s.index),routesMeta:u})};return n.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of ZI(s.path))i(s,o,l)}),e}function ZI(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=ZI(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function _B(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:NB(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const EB=/^:[\w-]+$/,kB=3,CB=2,PB=1,AB=10,RB=-2,d_=n=>n==="*";function IB(n,e){let t=n.split("/"),r=t.length;return t.some(d_)&&(r+=RB),e&&(r+=CB),t.filter(i=>!d_(i)).reduce((i,s)=>i+(EB.test(s)?kB:s===""?PB:AB),r)}function NB(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function DB(n,e,t){let{routesMeta:r}=n,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=s==="/"?e:e.slice(s.length)||"/",h=MB({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),d=l.route;if(!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:io([s,h.pathname]),pathnameBase:jB(io([s,h.pathnameBase])),route:d}),h.pathnameBase!=="/"&&(s=io([s,h.pathnameBase]))}return o}function MB(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=LB(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,u,h)=>{let{paramName:d,isOptional:p}=u;if(d==="*"){let y=a[h]||"";o=s.slice(0,s.length-y.length).replace(/(.)\/+$/,"$1")}const g=a[h];return p&&!g?c[d]=void 0:c[d]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:n}}function LB(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),YI(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function VB(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return YI(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function e1(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function FB(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Rc(n):n;return{pathname:t?t.startsWith("/")?t:QB(t,e):e,search:zB(r),hash:BB(i)}}function QB(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function m0(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function $B(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function e2(n,e){let t=$B(n);return e?t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function t2(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=Rc(n):(i=Eh({},n),vt(!i.pathname||!i.pathname.includes("?"),m0("?","pathname","search",i)),vt(!i.pathname||!i.pathname.includes("#"),m0("#","pathname","hash",i)),vt(!i.search||!i.search.includes("#"),m0("#","search","hash",i)));let s=n===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=t;else{let h=e.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),h-=1;i.pathname=d.join("/")}a=h>=0?e[h]:"/"}let l=FB(i,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const io=n=>n.join("/").replace(/\/\/+/g,"/"),jB=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),zB=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,BB=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function UB(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const n2=["post","put","patch","delete"];new Set(n2);const WB=["get",...n2];new Set(WB);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kh(){return kh=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},kh.apply(this,arguments)}const t1=k.createContext(null),qB=k.createContext(null),ja=k.createContext(null),Fg=k.createContext(null),za=k.createContext({outlet:null,matches:[],isDataRoute:!1}),r2=k.createContext(null);function HB(n,e){let{relative:t}=e===void 0?{}:e;hf()||vt(!1);let{basename:r,navigator:i}=k.useContext(ja),{hash:s,pathname:o,search:a}=s2(n,{relative:t}),l=o;return r!=="/"&&(l=o==="/"?r:io([r,o])),i.createHref({pathname:l,search:a,hash:s})}function hf(){return k.useContext(Fg)!=null}function Ic(){return hf()||vt(!1),k.useContext(Fg).location}function i2(n){k.useContext(ja).static||k.useLayoutEffect(n)}function Mo(){let{isDataRoute:n}=k.useContext(za);return n?oU():GB()}function GB(){hf()||vt(!1);let n=k.useContext(t1),{basename:e,future:t,navigator:r}=k.useContext(ja),{matches:i}=k.useContext(za),{pathname:s}=Ic(),o=JSON.stringify(e2(i,t.v7_relativeSplatPath)),a=k.useRef(!1);return i2(()=>{a.current=!0}),k.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=t2(c,JSON.parse(o),s,u.relative==="path");n==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:io([e,h.pathname])),(u.replace?r.replace:r.push)(h,u.state,u)},[e,r,o,s,n])}function s2(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=k.useContext(ja),{matches:i}=k.useContext(za),{pathname:s}=Ic(),o=JSON.stringify(e2(i,r.v7_relativeSplatPath));return k.useMemo(()=>t2(n,JSON.parse(o),s,t==="path"),[n,o,s,t])}function XB(n,e){return KB(n,e)}function KB(n,e,t,r){hf()||vt(!1);let{navigator:i,static:s}=k.useContext(ja),{matches:o}=k.useContext(za),a=o[o.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=Ic(),h;if(e){var d;let v=typeof e=="string"?Rc(e):e;c==="/"||(d=v.pathname)!=null&&d.startsWith(c)||vt(!1),h=v}else h=u;let p=h.pathname||"/",g=p;if(c!=="/"){let v=c.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(v.length).join("/")}let y=bB(n,{pathname:g}),w=tU(y&&y.map(v=>Object.assign({},v,{params:Object.assign({},l,v.params),pathname:io([c,i.encodeLocation?i.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:io([c,i.encodeLocation?i.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),o,t,r);return e&&w?k.createElement(Fg.Provider,{value:{location:kh({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Ws.Pop}},w):w}function YB(){let n=sU(),e=UB(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),t?k.createElement("pre",{style:i},t):null,null)}const JB=k.createElement(YB,null);class ZB extends k.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?k.createElement(za.Provider,{value:this.props.routeContext},k.createElement(r2.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function eU(n){let{routeContext:e,match:t,children:r}=n,i=k.useContext(t1);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),k.createElement(za.Provider,{value:e},r)}function tU(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var s;if(!t)return null;if(t.errors)n=t.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,a=(i=t)==null?void 0:i.errors;if(a!=null){let u=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);u>=0||vt(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(t&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=u),h.route.id){let{loaderData:d,errors:p}=t,g=h.route.loader&&d[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||g){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,h,d)=>{let p,g=!1,y=null,w=null;t&&(p=a&&h.route.id?a[h.route.id]:void 0,y=h.route.errorElement||JB,l&&(c<0&&d===0?(aU("route-fallback"),g=!0,w=null):c===d&&(g=!0,w=h.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,d+1)),O=()=>{let S;return p?S=y:g?S=w:h.route.Component?S=k.createElement(h.route.Component,null):h.route.element?S=h.route.element:S=u,k.createElement(eU,{match:h,routeContext:{outlet:u,matches:v,isDataRoute:t!=null},children:S})};return t&&(h.route.ErrorBoundary||h.route.errorElement||d===0)?k.createElement(ZB,{location:t.location,revalidation:t.revalidation,component:y,error:p,children:O(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):O()},null)}var o2=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(o2||{}),a2=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(a2||{});function nU(n){let e=k.useContext(t1);return e||vt(!1),e}function rU(n){let e=k.useContext(qB);return e||vt(!1),e}function iU(n){let e=k.useContext(za);return e||vt(!1),e}function l2(n){let e=iU(),t=e.matches[e.matches.length-1];return t.route.id||vt(!1),t.route.id}function sU(){var n;let e=k.useContext(r2),t=rU(),r=l2();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function oU(){let{router:n}=nU(o2.UseNavigateStable),e=l2(a2.UseNavigateStable),t=k.useRef(!1);return i2(()=>{t.current=!0}),k.useCallback(function(i,s){s===void 0&&(s={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,kh({fromRouteId:e},s)))},[n,e])}const p_={};function aU(n,e,t){p_[n]||(p_[n]=!0)}function lU(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function Zo(n){vt(!1)}function cU(n){let{basename:e="/",children:t=null,location:r,navigationType:i=Ws.Pop,navigator:s,static:o=!1,future:a}=n;hf()&&vt(!1);let l=e.replace(/^\/*/,"/"),c=k.useMemo(()=>({basename:l,navigator:s,static:o,future:kh({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=Rc(r));let{pathname:u="/",search:h="",hash:d="",state:p=null,key:g="default"}=r,y=k.useMemo(()=>{let w=e1(u,l);return w==null?null:{location:{pathname:w,search:h,hash:d,state:p,key:g},navigationType:i}},[l,u,h,d,p,g,i]);return y==null?null:k.createElement(ja.Provider,{value:c},k.createElement(Fg.Provider,{children:t,value:y}))}function uU(n){let{children:e,location:t}=n;return XB(mw(e),t)}new Promise(()=>{});function mw(n,e){e===void 0&&(e=[]);let t=[];return k.Children.forEach(n,(r,i)=>{if(!k.isValidElement(r))return;let s=[...e,i];if(r.type===k.Fragment){t.push.apply(t,mw(r.props.children,s));return}r.type!==Zo&&vt(!1),!r.props.index||!r.props.children||vt(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=mw(r.props.children,s)),t.push(o)}),t}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gw(){return gw=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},gw.apply(this,arguments)}function hU(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function fU(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function dU(n,e){return n.button===0&&(!e||e==="_self")&&!fU(n)}const pU=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],mU="6";try{window.__reactRouterVersion=mU}catch{}const gU="startTransition",m_=_P[gU];function yU(n){let{basename:e,children:t,future:r,window:i}=n,s=k.useRef();s.current==null&&(s.current=OB({window:i,v5Compat:!0}));let o=s.current,[a,l]=k.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=k.useCallback(h=>{c&&m_?m_(()=>l(h)):l(h)},[l,c]);return k.useLayoutEffect(()=>o.listen(u),[o,u]),k.useEffect(()=>lU(r),[r]),k.createElement(cU,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o,future:r})}const vU=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",wU=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Wu=k.forwardRef(function(e,t){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:h}=e,d=hU(e,pU),{basename:p}=k.useContext(ja),g,y=!1;if(typeof c=="string"&&wU.test(c)&&(g=c,vU))try{let S=new URL(window.location.href),E=c.startsWith("//")?new URL(S.protocol+c):new URL(c),R=e1(E.pathname,p);E.origin===S.origin&&R!=null?c=R+E.search+E.hash:y=!0}catch{}let w=HB(c,{relative:i}),v=OU(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:i,viewTransition:h});function O(S){r&&r(S),S.defaultPrevented||v(S)}return k.createElement("a",gw({},d,{href:g||w,onClick:y||s?r:O,ref:t,target:l}))});var g_;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(g_||(g_={}));var y_;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(y_||(y_={}));function OU(n,e){let{target:t,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=Mo(),c=Ic(),u=s2(n,{relative:o});return k.useCallback(h=>{if(dU(h,t)){h.preventDefault();let d=r!==void 0?r:gm(c)===gm(u);l(n,{replace:d,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,u,r,i,t,n,s,o,a])}const xU=jx("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ts=k.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...i},s)=>{const o=r?oQ:"button";return A.jsx(o,{className:Gt(xU({variant:e,size:t,className:n})),ref:s,...i})});ts.displayName="Button";const SU=()=>{};var v_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},bU=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],o=n[t++],a=n[t++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},u2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,a=o?n[i+1]:0,l=i+2<n.length,c=l?n[i+2]:0,u=s>>2,h=(s&3)<<4|a>>4;let d=(a&15)<<2|c>>6,p=c&63;l||(p=64,o||(d=64)),r.push(t[u],t[h],t[d],t[p])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(c2(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):bU(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const c=i<n.length?t[n.charAt(i)]:64;++i;const h=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||c==null||h==null)throw new TU;const d=s<<2|a>>4;if(r.push(d),c!==64){const p=a<<4&240|c>>2;if(r.push(p),h!==64){const g=c<<6&192|h;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class TU extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _U=function(n){const e=c2(n);return u2.encodeByteArray(e,!0)},ym=function(n){return _U(n).replace(/\./g,"")},h2=function(n){try{return u2.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EU(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kU=()=>EU().__FIREBASE_DEFAULTS__,CU=()=>{if(typeof process>"u"||typeof v_>"u")return;const n=v_.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},PU=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&h2(n[1]);return e&&JSON.parse(e)},Qg=()=>{try{return SU()||kU()||CU()||PU()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},f2=n=>{var e,t;return(t=(e=Qg())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},AU=n=>{const e=f2(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},d2=()=>{var n;return(n=Qg())===null||n===void 0?void 0:n.config},p2=n=>{var e;return(e=Qg())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RU{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IU(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[ym(JSON.stringify(t)),ym(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function NU(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(cn())}function DU(){var n;const e=(n=Qg())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function MU(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function LU(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function VU(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function FU(){const n=cn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function QU(){return!DU()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $U(){try{return typeof indexedDB=="object"}catch{return!1}}function jU(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zU="FirebaseError";class hs extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=zU,Object.setPrototypeOf(this,hs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ff.prototype.create)}}class ff{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?BU(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new hs(i,a,r)}}function BU(n,e){return n.replace(UU,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const UU=/\{\$([^}]+)}/g;function WU(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ta(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if(w_(s)&&w_(o)){if(!Ta(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function w_(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function df(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Tu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function _u(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function qU(n,e){const t=new HU(n,e);return t.subscribe.bind(t)}class HU{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");GU(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=g0),i.error===void 0&&(i.error=g0),i.complete===void 0&&(i.complete=g0);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function GU(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function g0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(n){return n&&n._delegate?n._delegate:n}class _a{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XU{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new RU;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(YU(e))try{this.getOrInitializeService({instanceIdentifier:ea})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ea){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ea){return this.instances.has(e)}getOptions(e=ea){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:KU(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ea){return this.component?this.component.multipleInstances?e:ea:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function KU(n){return n===ea?void 0:n}function YU(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JU{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new XU(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Te;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Te||(Te={}));const ZU={debug:Te.DEBUG,verbose:Te.VERBOSE,info:Te.INFO,warn:Te.WARN,error:Te.ERROR,silent:Te.SILENT},e3=Te.INFO,t3={[Te.DEBUG]:"log",[Te.VERBOSE]:"log",[Te.INFO]:"info",[Te.WARN]:"warn",[Te.ERROR]:"error"},n3=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=t3[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class n1{constructor(e){this.name=e,this._logLevel=e3,this._logHandler=n3,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Te))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ZU[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Te.DEBUG,...e),this._logHandler(this,Te.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Te.VERBOSE,...e),this._logHandler(this,Te.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Te.INFO,...e),this._logHandler(this,Te.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Te.WARN,...e),this._logHandler(this,Te.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Te.ERROR,...e),this._logHandler(this,Te.ERROR,...e)}}const r3=(n,e)=>e.some(t=>n instanceof t);let O_,x_;function i3(){return O_||(O_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function s3(){return x_||(x_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const m2=new WeakMap,yw=new WeakMap,g2=new WeakMap,y0=new WeakMap,r1=new WeakMap;function o3(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(so(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&m2.set(t,n)}).catch(()=>{}),r1.set(e,n),e}function a3(n){if(yw.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});yw.set(n,e)}let vw={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return yw.get(n);if(e==="objectStoreNames")return n.objectStoreNames||g2.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return so(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function l3(n){vw=n(vw)}function c3(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(v0(this),e,...t);return g2.set(r,e.sort?e.sort():[e]),so(r)}:s3().includes(n)?function(...e){return n.apply(v0(this),e),so(m2.get(this))}:function(...e){return so(n.apply(v0(this),e))}}function u3(n){return typeof n=="function"?c3(n):(n instanceof IDBTransaction&&a3(n),r3(n,i3())?new Proxy(n,vw):n)}function so(n){if(n instanceof IDBRequest)return o3(n);if(y0.has(n))return y0.get(n);const e=u3(n);return e!==n&&(y0.set(n,e),r1.set(e,n)),e}const v0=n=>r1.get(n);function h3(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),a=so(o);return r&&o.addEventListener("upgradeneeded",l=>{r(so(o.result),l.oldVersion,l.newVersion,so(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const f3=["get","getKey","getAll","getAllKeys","count"],d3=["put","add","delete","clear"],w0=new Map;function S_(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(w0.get(e))return w0.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=d3.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||f3.includes(t)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[t](...a),i&&l.done]))[0]};return w0.set(e,s),s}l3(n=>({...n,get:(e,t,r)=>S_(e,t)||n.get(e,t,r),has:(e,t)=>!!S_(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(m3(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function m3(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ww="@firebase/app",b_="0.11.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns=new n1("@firebase/app"),g3="@firebase/app-compat",y3="@firebase/analytics-compat",v3="@firebase/analytics",w3="@firebase/app-check-compat",O3="@firebase/app-check",x3="@firebase/auth",S3="@firebase/auth-compat",b3="@firebase/database",T3="@firebase/data-connect",_3="@firebase/database-compat",E3="@firebase/functions",k3="@firebase/functions-compat",C3="@firebase/installations",P3="@firebase/installations-compat",A3="@firebase/messaging",R3="@firebase/messaging-compat",I3="@firebase/performance",N3="@firebase/performance-compat",D3="@firebase/remote-config",M3="@firebase/remote-config-compat",L3="@firebase/storage",V3="@firebase/storage-compat",F3="@firebase/firestore",Q3="@firebase/vertexai",$3="@firebase/firestore-compat",j3="firebase",z3="11.6.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow="[DEFAULT]",B3={[ww]:"fire-core",[g3]:"fire-core-compat",[v3]:"fire-analytics",[y3]:"fire-analytics-compat",[O3]:"fire-app-check",[w3]:"fire-app-check-compat",[x3]:"fire-auth",[S3]:"fire-auth-compat",[b3]:"fire-rtdb",[T3]:"fire-data-connect",[_3]:"fire-rtdb-compat",[E3]:"fire-fn",[k3]:"fire-fn-compat",[C3]:"fire-iid",[P3]:"fire-iid-compat",[A3]:"fire-fcm",[R3]:"fire-fcm-compat",[I3]:"fire-perf",[N3]:"fire-perf-compat",[D3]:"fire-rc",[M3]:"fire-rc-compat",[L3]:"fire-gcs",[V3]:"fire-gcs-compat",[F3]:"fire-fst",[$3]:"fire-fst-compat",[Q3]:"fire-vertex","fire-js":"fire-js",[j3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm=new Map,U3=new Map,xw=new Map;function T_(n,e){try{n.container.addComponent(e)}catch(t){ns.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function lc(n){const e=n.name;if(xw.has(e))return ns.debug(`There were multiple attempts to register component ${e}.`),!1;xw.set(e,n);for(const t of vm.values())T_(t,n);for(const t of U3.values())T_(t,n);return!0}function i1(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function or(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},oo=new ff("app","Firebase",W3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new _a("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw oo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nc=z3;function y2(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ow,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw oo.create("bad-app-name",{appName:String(i)});if(t||(t=d2()),!t)throw oo.create("no-options");const s=vm.get(i);if(s){if(Ta(t,s.options)&&Ta(r,s.config))return s;throw oo.create("duplicate-app",{appName:i})}const o=new JU(i);for(const l of xw.values())o.addComponent(l);const a=new q3(t,r,o);return vm.set(i,a),a}function v2(n=Ow){const e=vm.get(n);if(!e&&n===Ow&&d2())return y2();if(!e)throw oo.create("no-app",{appName:n});return e}function ao(n,e,t){var r;let i=(r=B3[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ns.warn(a.join(" "));return}lc(new _a(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H3="firebase-heartbeat-database",G3=1,Ch="firebase-heartbeat-store";let O0=null;function w2(){return O0||(O0=h3(H3,G3,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ch)}catch(t){console.warn(t)}}}}).catch(n=>{throw oo.create("idb-open",{originalErrorMessage:n.message})})),O0}async function X3(n){try{const t=(await w2()).transaction(Ch),r=await t.objectStore(Ch).get(O2(n));return await t.done,r}catch(e){if(e instanceof hs)ns.warn(e.message);else{const t=oo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ns.warn(t.message)}}}async function __(n,e){try{const r=(await w2()).transaction(Ch,"readwrite");await r.objectStore(Ch).put(e,O2(n)),await r.done}catch(t){if(t instanceof hs)ns.warn(t.message);else{const r=oo.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ns.warn(r.message)}}}function O2(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K3=1024,Y3=30;class J3{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new e9(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=E_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>Y3){const o=t9(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ns.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=E_(),{heartbeatsToSend:r,unsentEntries:i}=Z3(this._heartbeatsCache.heartbeats),s=ym(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return ns.warn(t),""}}}function E_(){return new Date().toISOString().substring(0,10)}function Z3(n,e=K3){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),k_(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),k_(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class e9{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $U()?jU().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await X3(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return __(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return __(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function k_(n){return ym(JSON.stringify({version:2,heartbeats:n})).length}function t9(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n9(n){lc(new _a("platform-logger",e=>new p3(e),"PRIVATE")),lc(new _a("heartbeat",e=>new J3(e),"PRIVATE")),ao(ww,b_,n),ao(ww,b_,"esm2017"),ao("fire-js","")}n9("");var r9="firebase",i9="11.6.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ao(r9,i9,"app");function s1(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function x2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const s9=x2,S2=new ff("auth","Firebase",x2());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wm=new n1("@firebase/auth");function o9(n,...e){wm.logLevel<=Te.WARN&&wm.warn(`Auth (${Nc}): ${n}`,...e)}function mp(n,...e){wm.logLevel<=Te.ERROR&&wm.error(`Auth (${Nc}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mr(n,...e){throw o1(n,...e)}function ci(n,...e){return o1(n,...e)}function b2(n,e,t){const r=Object.assign(Object.assign({},s9()),{[e]:t});return new ff("auth","Firebase",r).create(e,{appName:n.name})}function qi(n){return b2(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function o1(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return S2.create(n,...e)}function he(n,e,...t){if(!n)throw o1(e,...t)}function Bi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw mp(e),new Error(e)}function rs(n,e){n||Bi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sw(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function a9(){return C_()==="http:"||C_()==="https:"}function C_(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l9(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(a9()||LU()||"connection"in navigator)?navigator.onLine:!0}function c9(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(e,t){this.shortDelay=e,this.longDelay=t,rs(t>e,"Short delay should be less than long delay!"),this.isMobile=NU()||VU()}get(){return l9()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a1(n,e){rs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Bi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Bi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Bi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u9={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h9=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],f9=new pf(3e4,6e4);function Lo(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function fs(n,e,t,r,i={}){return _2(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=df(Object.assign({key:n.config.apiKey},o)).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const c=Object.assign({method:e,headers:l},s);return MU()||(c.referrerPolicy="no-referrer"),T2.fetch()(await E2(n,n.config.apiHost,t,a),c)})}async function _2(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},u9),e);try{const i=new p9(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Sd(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Sd(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Sd(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw Sd(n,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw b2(n,u,c);Mr(n,u)}}catch(i){if(i instanceof hs)throw i;Mr(n,"network-request-failed",{message:String(i)})}}async function mf(n,e,t,r,i={}){const s=await fs(n,e,t,r,i);return"mfaPendingCredential"in s&&Mr(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function E2(n,e,t,r){const i=`${e}${t}?${r}`,s=n,o=s.config.emulator?a1(n.config,i):`${n.config.apiScheme}://${i}`;return h9.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function d9(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class p9{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ci(this.auth,"network-request-failed")),f9.get())})}}function Sd(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=ci(n,e,r);return i.customData._tokenResponse=t,i}function P_(n){return n!==void 0&&n.enterprise!==void 0}class m9{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return d9(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function g9(n,e){return fs(n,"GET","/v2/recaptchaConfig",Lo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y9(n,e){return fs(n,"POST","/v1/accounts:delete",e)}async function Om(n,e){return fs(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function v9(n,e=!1){const t=kt(n),r=await t.getIdToken(e),i=l1(r);he(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:qu(x0(i.auth_time)),issuedAtTime:qu(x0(i.iat)),expirationTime:qu(x0(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function x0(n){return Number(n)*1e3}function l1(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return mp("JWT malformed, contained fewer than 3 sections"),null;try{const i=h2(t);return i?JSON.parse(i):(mp("Failed to decode base64 JWT payload"),null)}catch(i){return mp("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function A_(n){const e=l1(n);return he(e,"internal-error"),he(typeof e.exp<"u","internal-error"),he(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cc(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof hs&&w9(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function w9({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O9{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=qu(this.lastLoginAt),this.creationTime=qu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xm(n){var e;const t=n.auth,r=await n.getIdToken(),i=await cc(n,Om(t,{idToken:r}));he(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?k2(s.providerUserInfo):[],a=S9(n.providerData,o),l=n.isAnonymous,c=!(n.email&&s.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new bw(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(n,h)}async function x9(n){const e=kt(n);await xm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function S9(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function k2(n){return n.map(e=>{var{providerId:t}=e,r=s1(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b9(n,e){const t=await _2(n,{},async()=>{const r=df({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=await E2(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",T2.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function T9(n,e){return fs(n,"POST","/v2/accounts:revokeToken",Lo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){he(e.idToken,"internal-error"),he(typeof e.idToken<"u","internal-error"),he(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):A_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){he(e.length!==0,"internal-error");const t=A_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(he(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await b9(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new Il;return r&&(he(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(he(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(he(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Il,this.toJSON())}_performRefresh(){return Bi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ts(n,e){he(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class kr{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=s1(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new O9(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new bw(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await cc(this,this.stsTokenManager.getToken(this.auth,e));return he(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return v9(this,e)}reload(){return x9(this)}_assign(e){this!==e&&(he(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new kr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await xm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(or(this.auth.app))return Promise.reject(qi(this.auth));const e=await this.getIdToken();return await cc(this,y9(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,l,c,u;const h=(r=t.displayName)!==null&&r!==void 0?r:void 0,d=(i=t.email)!==null&&i!==void 0?i:void 0,p=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,g=(o=t.photoURL)!==null&&o!==void 0?o:void 0,y=(a=t.tenantId)!==null&&a!==void 0?a:void 0,w=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,v=(c=t.createdAt)!==null&&c!==void 0?c:void 0,O=(u=t.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:S,emailVerified:E,isAnonymous:R,providerData:M,stsTokenManager:b}=t;he(S&&b,e,"internal-error");const T=Il.fromJSON(this.name,b);he(typeof S=="string",e,"internal-error"),Ts(h,e.name),Ts(d,e.name),he(typeof E=="boolean",e,"internal-error"),he(typeof R=="boolean",e,"internal-error"),Ts(p,e.name),Ts(g,e.name),Ts(y,e.name),Ts(w,e.name),Ts(v,e.name),Ts(O,e.name);const _=new kr({uid:S,auth:e,email:d,emailVerified:E,displayName:h,isAnonymous:R,photoURL:g,phoneNumber:p,tenantId:y,stsTokenManager:T,createdAt:v,lastLoginAt:O});return M&&Array.isArray(M)&&(_.providerData=M.map(C=>Object.assign({},C))),w&&(_._redirectEventId=w),_}static async _fromIdTokenResponse(e,t,r=!1){const i=new Il;i.updateFromServerResponse(t);const s=new kr({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await xm(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];he(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?k2(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Il;a.updateFromIdToken(r);const l=new kr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new bw(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R_=new Map;function Ui(n){rs(n instanceof Function,"Expected a class definition");let e=R_.get(n);return e?(rs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,R_.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}C2.type="NONE";const I_=C2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gp(n,e,t){return`firebase:${n}:${e}:${t}`}class Nl{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=gp(this.userKey,i.apiKey,s),this.fullPersistenceKey=gp("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Om(this.auth,{idToken:e}).catch(()=>{});return t?kr._fromGetAccountInfoResponse(this.auth,t,e):null}return kr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Nl(Ui(I_),e,r);const i=(await Promise.all(t.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Ui(I_);const o=gp(r,e.config.apiKey,e.name);let a=null;for(const c of t)try{const u=await c._get(o);if(u){let h;if(typeof u=="string"){const d=await Om(e,{idToken:u}).catch(()=>{});if(!d)break;h=await kr._fromGetAccountInfoResponse(e,d,u)}else h=kr._fromJSON(e,u);c!==s&&(a=h),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Nl(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Nl(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N_(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(I2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(P2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(D2(e))return"Blackberry";if(M2(e))return"Webos";if(A2(e))return"Safari";if((e.includes("chrome/")||R2(e))&&!e.includes("edge/"))return"Chrome";if(N2(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function P2(n=cn()){return/firefox\//i.test(n)}function A2(n=cn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function R2(n=cn()){return/crios\//i.test(n)}function I2(n=cn()){return/iemobile/i.test(n)}function N2(n=cn()){return/android/i.test(n)}function D2(n=cn()){return/blackberry/i.test(n)}function M2(n=cn()){return/webos/i.test(n)}function c1(n=cn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function _9(n=cn()){var e;return c1(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function E9(){return FU()&&document.documentMode===10}function L2(n=cn()){return c1(n)||N2(n)||M2(n)||D2(n)||/windows phone/i.test(n)||I2(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V2(n,e=[]){let t;switch(n){case"Browser":t=N_(cn());break;case"Worker":t=`${N_(cn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Nc}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k9{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C9(n,e={}){return fs(n,"GET","/v2/passwordPolicy",Lo(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P9=6;class A9{constructor(e){var t,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:P9,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R9{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new D_(this),this.idTokenSubscription=new D_(this),this.beforeStateQueue=new k9(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=S2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ui(t)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await Nl.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Om(this,{idToken:e}),r=await kr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(or(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return he(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await xm(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=c9()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(or(this.app))return Promise.reject(qi(this));const t=e?kt(e):null;return t&&he(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&he(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return or(this.app)?Promise.reject(qi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return or(this.app)?Promise.reject(qi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ui(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await C9(this),t=new A9(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ff("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await T9(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ui(e)||this._popupRedirectResolver;he(t,this,"argument-error"),this.redirectPersistenceManager=await Nl.create(this,[Ui(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(he(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(t);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=V2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(or(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&o9(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Ba(n){return kt(n)}class D_{constructor(e){this.auth=e,this.observer=null,this.addObserver=qU(t=>this.observer=t)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $g={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function I9(n){$g=n}function F2(n){return $g.loadJS(n)}function N9(){return $g.recaptchaEnterpriseScript}function D9(){return $g.gapiScript}function M9(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class L9{constructor(){this.enterprise=new V9}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class V9{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const F9="recaptcha-enterprise",Q2="NO_RECAPTCHA";class Q9{constructor(e){this.type=F9,this.auth=Ba(e)}async verify(e="verify",t=!1){async function r(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{g9(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new m9(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;P_(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(Q2)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new L9().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!t&&P_(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=N9();l.length!==0&&(l+=a),F2(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function M_(n,e,t,r=!1,i=!1){const s=new Q9(n);let o;if(i)o=Q2;else try{o=await s.verify(t)}catch{o=await s.verify(t,!0)}const a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Tw(n,e,t,r,i){var s;if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await M_(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await M_(n,e,t,t==="getOobCode");return r(n,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $9(n,e){const t=i1(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(Ta(s,e??{}))return i;Mr(i,"already-initialized")}return t.initialize({options:e})}function j9(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Ui);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function z9(n,e,t){const r=Ba(n);he(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=$2(e),{host:o,port:a}=B9(e),l=a===null?"":`:${a}`,c={url:`${s}//${o}${l}/`},u=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){he(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),he(Ta(c,r.config.emulator)&&Ta(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,U9()}function $2(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function B9(n){const e=$2(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:L_(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:L_(o)}}}function L_(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function U9(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Bi("not implemented")}_getIdTokenResponse(e){return Bi("not implemented")}_linkToIdToken(e,t){return Bi("not implemented")}_getReauthenticationResolver(e){return Bi("not implemented")}}async function W9(n,e){return fs(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q9(n,e){return mf(n,"POST","/v1/accounts:signInWithPassword",Lo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H9(n,e){return mf(n,"POST","/v1/accounts:signInWithEmailLink",Lo(n,e))}async function G9(n,e){return mf(n,"POST","/v1/accounts:signInWithEmailLink",Lo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph extends u1{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Ph(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Ph(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Tw(e,t,"signInWithPassword",q9);case"emailLink":return H9(e,{email:this._email,oobCode:this._password});default:Mr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Tw(e,r,"signUpPassword",W9);case"emailLink":return G9(e,{idToken:t,email:this._email,oobCode:this._password});default:Mr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dl(n,e){return mf(n,"POST","/v1/accounts:signInWithIdp",Lo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X9="http://localhost";class Ea extends u1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ea(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Mr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=s1(t,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Ea(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return Dl(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Dl(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Dl(e,t)}buildRequest(){const e={requestUri:X9,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=df(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K9(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Y9(n){const e=Tu(_u(n)).link,t=e?Tu(_u(e)).deep_link_id:null,r=Tu(_u(n)).deep_link_id;return(r?Tu(_u(r)).link:null)||r||t||e||n}class h1{constructor(e){var t,r,i,s,o,a;const l=Tu(_u(e)),c=(t=l.apiKey)!==null&&t!==void 0?t:null,u=(r=l.oobCode)!==null&&r!==void 0?r:null,h=K9((i=l.mode)!==null&&i!==void 0?i:null);he(c&&u&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=u,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.lang)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const t=Y9(e);try{return new h1(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(){this.providerId=Dc.PROVIDER_ID}static credential(e,t){return Ph._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=h1.parseLink(t);return he(r,"argument-error"),Ph._fromEmailAndCode(e,r.code,r.tenantId)}}Dc.PROVIDER_ID="password";Dc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Dc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf extends j2{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns extends gf{constructor(){super("facebook.com")}static credential(e){return Ea._fromParams({providerId:Ns.PROVIDER_ID,signInMethod:Ns.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ns.credentialFromTaggedObject(e)}static credentialFromError(e){return Ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ns.credential(e.oauthAccessToken)}catch{return null}}}Ns.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ns.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds extends gf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ea._fromParams({providerId:Ds.PROVIDER_ID,signInMethod:Ds.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ds.credentialFromTaggedObject(e)}static credentialFromError(e){return Ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Ds.credential(t,r)}catch{return null}}}Ds.GOOGLE_SIGN_IN_METHOD="google.com";Ds.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms extends gf{constructor(){super("github.com")}static credential(e){return Ea._fromParams({providerId:Ms.PROVIDER_ID,signInMethod:Ms.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ms.credentialFromTaggedObject(e)}static credentialFromError(e){return Ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ms.credential(e.oauthAccessToken)}catch{return null}}}Ms.GITHUB_SIGN_IN_METHOD="github.com";Ms.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls extends gf{constructor(){super("twitter.com")}static credential(e,t){return Ea._fromParams({providerId:Ls.PROVIDER_ID,signInMethod:Ls.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ls.credentialFromTaggedObject(e)}static credentialFromError(e){return Ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Ls.credential(t,r)}catch{return null}}}Ls.TWITTER_SIGN_IN_METHOD="twitter.com";Ls.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J9(n,e){return mf(n,"POST","/v1/accounts:signUp",Lo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await kr._fromIdTokenResponse(e,r,i),o=V_(r);return new ka({user:s,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=V_(r);return new ka({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function V_(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm extends hs{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Sm.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Sm(e,t,r,i)}}function z2(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Sm._fromErrorAndOperation(n,s,e,r):s})}async function Z9(n,e,t=!1){const r=await cc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ka._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eW(n,e,t=!1){const{auth:r}=n;if(or(r.app))return Promise.reject(qi(r));const i="reauthenticate";try{const s=await cc(n,z2(r,i,e,n),t);he(s.idToken,r,"internal-error");const o=l1(s.idToken);he(o,r,"internal-error");const{sub:a}=o;return he(n.uid===a,r,"user-mismatch"),ka._forOperation(n,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Mr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B2(n,e,t=!1){if(or(n.app))return Promise.reject(qi(n));const r="signIn",i=await z2(n,r,e),s=await ka._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}async function tW(n,e){return B2(Ba(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U2(n){const e=Ba(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function nW(n,e,t){if(or(n.app))return Promise.reject(qi(n));const r=Ba(n),o=await Tw(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",J9).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&U2(n),l}),a=await ka._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function rW(n,e,t){return or(n.app)?Promise.reject(qi(n)):tW(kt(n),Dc.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&U2(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iW(n,e){return fs(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sW(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=kt(n),s={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},o=await cc(r,iW(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function oW(n,e,t,r){return kt(n).onIdTokenChanged(e,t,r)}function aW(n,e,t){return kt(n).beforeAuthStateChanged(e,t)}function lW(n,e,t,r){return kt(n).onAuthStateChanged(e,t,r)}function cW(n){return kt(n).signOut()}const bm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(bm,"1"),this.storage.removeItem(bm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uW=1e3,hW=10;class q2 extends W2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=L2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);E9()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,hW):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},uW)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}q2.type="LOCAL";const fW=q2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2 extends W2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}H2.type="SESSION";const G2=H2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dW(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new jg(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(t.origin,s)),l=await dW(a);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}jg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f1(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pW{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=f1("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const d=h;if(d.data.eventId===c)switch(d.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ui(){return window}function mW(n){ui().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X2(){return typeof ui().WorkerGlobalScope<"u"&&typeof ui().importScripts=="function"}async function gW(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function yW(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function vW(){return X2()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2="firebaseLocalStorageDb",wW=1,Tm="firebaseLocalStorage",Y2="fbase_key";class yf{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function zg(n,e){return n.transaction([Tm],e?"readwrite":"readonly").objectStore(Tm)}function OW(){const n=indexedDB.deleteDatabase(K2);return new yf(n).toPromise()}function _w(){const n=indexedDB.open(K2,wW);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Tm,{keyPath:Y2})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Tm)?e(r):(r.close(),await OW(),e(await _w()))})})}async function F_(n,e,t){const r=zg(n,!0).put({[Y2]:e,value:t});return new yf(r).toPromise()}async function xW(n,e){const t=zg(n,!1).get(e),r=await new yf(t).toPromise();return r===void 0?null:r.value}function Q_(n,e){const t=zg(n,!0).delete(e);return new yf(t).toPromise()}const SW=800,bW=3;class J2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _w(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>bW)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return X2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=jg._getInstance(vW()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await gW(),!this.activeServiceWorker)return;this.sender=new pW(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||yW()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _w();return await F_(e,bm,"1"),await Q_(e,bm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>F_(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>xW(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Q_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=zg(i,!1).getAll();return new yf(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),SW)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}J2.type="LOCAL";const TW=J2;new pf(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _W(n,e){return e?Ui(e):(he(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1 extends u1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Dl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Dl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Dl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function EW(n){return B2(n.auth,new d1(n),n.bypassAuthState)}function kW(n){const{auth:e,user:t}=n;return he(t,e,"internal-error"),eW(t,new d1(n),n.bypassAuthState)}async function CW(n){const{auth:e,user:t}=n;return he(t,e,"internal-error"),Z9(t,new d1(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return EW;case"linkViaPopup":case"linkViaRedirect":return CW;case"reauthViaPopup":case"reauthViaRedirect":return kW;default:Mr(this.auth,"internal-error")}}resolve(e){rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PW=new pf(2e3,1e4);class Ol extends Z2{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Ol.currentPopupAction&&Ol.currentPopupAction.cancel(),Ol.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return he(e,this.auth,"internal-error"),e}async onExecution(){rs(this.filter.length===1,"Popup operations only handle one event");const e=f1();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ci(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ci(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ol.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ci(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,PW.get())};e()}}Ol.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AW="pendingRedirect",yp=new Map;class RW extends Z2{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=yp.get(this.auth._key());if(!e){try{const r=await IW(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}yp.set(this.auth._key(),e)}return this.bypassAuthState||yp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function IW(n,e){const t=MW(e),r=DW(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function NW(n,e){yp.set(n._key(),e)}function DW(n){return Ui(n._redirectPersistence)}function MW(n){return gp(AW,n.config.apiKey,n.name)}async function LW(n,e,t=!1){if(or(n.app))return Promise.reject(qi(n));const r=Ba(n),i=_W(r,e),o=await new RW(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VW=10*60*1e3;class FW{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!QW(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!eN(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(ci(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=VW&&this.cachedEventUids.clear(),this.cachedEventUids.has($_(e))}saveEventToCache(e){this.cachedEventUids.add($_(e)),this.lastProcessedEventTime=Date.now()}}function $_(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function eN({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function QW(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return eN(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $W(n,e={}){return fs(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jW=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,zW=/^https?/;async function BW(n){if(n.config.emulator)return;const{authorizedDomains:e}=await $W(n);for(const t of e)try{if(UW(t))return}catch{}Mr(n,"unauthorized-domain")}function UW(n){const e=Sw(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!zW.test(t))return!1;if(jW.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WW=new pf(3e4,6e4);function j_(){const n=ui().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function qW(n){return new Promise((e,t)=>{var r,i,s;function o(){j_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{j_(),t(ci(n,"network-request-failed"))},timeout:WW.get()})}if(!((i=(r=ui().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=ui().gapi)===null||s===void 0)&&s.load)o();else{const a=M9("iframefcb");return ui()[a]=()=>{gapi.load?o():t(ci(n,"network-request-failed"))},F2(`${D9()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw vp=null,e})}let vp=null;function HW(n){return vp=vp||qW(n),vp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GW=new pf(5e3,15e3),XW="__/auth/iframe",KW="emulator/auth/iframe",YW={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},JW=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ZW(n){const e=n.config;he(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?a1(e,KW):`https://${n.config.authDomain}/${XW}`,r={apiKey:e.apiKey,appName:n.name,v:Nc},i=JW.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${df(r).slice(1)}`}async function eq(n){const e=await HW(n),t=ui().gapi;return he(t,n,"internal-error"),e.open({where:document.body,url:ZW(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:YW,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=ci(n,"network-request-failed"),a=ui().setTimeout(()=>{s(o)},GW.get());function l(){ui().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tq={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},nq=500,rq=600,iq="_blank",sq="http://localhost";class z_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function oq(n,e,t,r=nq,i=rq){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},tq),{width:r.toString(),height:i.toString(),top:s,left:o}),c=cn().toLowerCase();t&&(a=R2(c)?iq:t),P2(c)&&(e=e||sq,l.scrollbars="yes");const u=Object.entries(l).reduce((d,[p,g])=>`${d}${p}=${g},`,"");if(_9(c)&&a!=="_self")return aq(e||"",a),new z_(null);const h=window.open(e||"",a,u);he(h,n,"popup-blocked");try{h.focus()}catch{}return new z_(h)}function aq(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lq="__/auth/handler",cq="emulator/auth/handler",uq=encodeURIComponent("fac");async function B_(n,e,t,r,i,s){he(n.config.authDomain,n,"auth-domain-config-required"),he(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Nc,eventId:i};if(e instanceof j2){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",WU(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries({}))o[u]=h}if(e instanceof gf){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(o.scopes=u.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await n._getAppCheckToken(),c=l?`#${uq}=${encodeURIComponent(l)}`:"";return`${hq(n)}?${df(a).slice(1)}${c}`}function hq({config:n}){return n.emulator?a1(n,cq):`https://${n.authDomain}/${lq}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0="webStorageSupport";class fq{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=G2,this._completeRedirectFn=LW,this._overrideRedirectResult=NW}async _openPopup(e,t,r,i){var s;rs((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await B_(e,t,r,Sw(),i);return oq(e,o,f1())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await B_(e,t,r,Sw(),i);return mW(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(rs(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await eq(e),r=new FW(e);return t.register("authEvent",i=>(he(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(S0,{type:S0},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[S0];o!==void 0&&t(!!o),Mr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=BW(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return L2()||A2()||c1()}}const dq=fq;var U_="@firebase/auth",W_="1.10.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pq{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mq(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function gq(n){lc(new _a("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;he(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:V2(n)},c=new R9(r,i,s,l);return j9(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),lc(new _a("auth-internal",e=>{const t=Ba(e.getProvider("auth").getImmediate());return(r=>new pq(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ao(U_,W_,mq(n)),ao(U_,W_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yq=5*60,vq=p2("authIdTokenMaxAge")||yq;let q_=null;const wq=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>vq)return;const i=t==null?void 0:t.token;q_!==i&&(q_=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Oq(n=v2()){const e=i1(n,"auth");if(e.isInitialized())return e.getImmediate();const t=$9(n,{popupRedirectResolver:dq,persistence:[TW,fW,G2]}),r=p2("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=wq(s.toString());aW(t,o,()=>o(t.currentUser)),oW(t,a=>o(a))}}const i=f2("auth");return i&&z9(t,`http://${i}`),t}function xq(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}I9({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=ci("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",xq().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});gq("Browser");var H_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var lo,tN;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,T){function _(){}_.prototype=T.prototype,b.D=T.prototype,b.prototype=new _,b.prototype.constructor=b,b.C=function(C,D,N){for(var I=Array(arguments.length-2),j=2;j<arguments.length;j++)I[j-2]=arguments[j];return T.prototype[D].apply(C,I)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,T,_){_||(_=0);var C=Array(16);if(typeof T=="string")for(var D=0;16>D;++D)C[D]=T.charCodeAt(_++)|T.charCodeAt(_++)<<8|T.charCodeAt(_++)<<16|T.charCodeAt(_++)<<24;else for(D=0;16>D;++D)C[D]=T[_++]|T[_++]<<8|T[_++]<<16|T[_++]<<24;T=b.g[0],_=b.g[1],D=b.g[2];var N=b.g[3],I=T+(N^_&(D^N))+C[0]+3614090360&4294967295;T=_+(I<<7&4294967295|I>>>25),I=N+(D^T&(_^D))+C[1]+3905402710&4294967295,N=T+(I<<12&4294967295|I>>>20),I=D+(_^N&(T^_))+C[2]+606105819&4294967295,D=N+(I<<17&4294967295|I>>>15),I=_+(T^D&(N^T))+C[3]+3250441966&4294967295,_=D+(I<<22&4294967295|I>>>10),I=T+(N^_&(D^N))+C[4]+4118548399&4294967295,T=_+(I<<7&4294967295|I>>>25),I=N+(D^T&(_^D))+C[5]+1200080426&4294967295,N=T+(I<<12&4294967295|I>>>20),I=D+(_^N&(T^_))+C[6]+2821735955&4294967295,D=N+(I<<17&4294967295|I>>>15),I=_+(T^D&(N^T))+C[7]+4249261313&4294967295,_=D+(I<<22&4294967295|I>>>10),I=T+(N^_&(D^N))+C[8]+1770035416&4294967295,T=_+(I<<7&4294967295|I>>>25),I=N+(D^T&(_^D))+C[9]+2336552879&4294967295,N=T+(I<<12&4294967295|I>>>20),I=D+(_^N&(T^_))+C[10]+4294925233&4294967295,D=N+(I<<17&4294967295|I>>>15),I=_+(T^D&(N^T))+C[11]+2304563134&4294967295,_=D+(I<<22&4294967295|I>>>10),I=T+(N^_&(D^N))+C[12]+1804603682&4294967295,T=_+(I<<7&4294967295|I>>>25),I=N+(D^T&(_^D))+C[13]+4254626195&4294967295,N=T+(I<<12&4294967295|I>>>20),I=D+(_^N&(T^_))+C[14]+2792965006&4294967295,D=N+(I<<17&4294967295|I>>>15),I=_+(T^D&(N^T))+C[15]+1236535329&4294967295,_=D+(I<<22&4294967295|I>>>10),I=T+(D^N&(_^D))+C[1]+4129170786&4294967295,T=_+(I<<5&4294967295|I>>>27),I=N+(_^D&(T^_))+C[6]+3225465664&4294967295,N=T+(I<<9&4294967295|I>>>23),I=D+(T^_&(N^T))+C[11]+643717713&4294967295,D=N+(I<<14&4294967295|I>>>18),I=_+(N^T&(D^N))+C[0]+3921069994&4294967295,_=D+(I<<20&4294967295|I>>>12),I=T+(D^N&(_^D))+C[5]+3593408605&4294967295,T=_+(I<<5&4294967295|I>>>27),I=N+(_^D&(T^_))+C[10]+38016083&4294967295,N=T+(I<<9&4294967295|I>>>23),I=D+(T^_&(N^T))+C[15]+3634488961&4294967295,D=N+(I<<14&4294967295|I>>>18),I=_+(N^T&(D^N))+C[4]+3889429448&4294967295,_=D+(I<<20&4294967295|I>>>12),I=T+(D^N&(_^D))+C[9]+568446438&4294967295,T=_+(I<<5&4294967295|I>>>27),I=N+(_^D&(T^_))+C[14]+3275163606&4294967295,N=T+(I<<9&4294967295|I>>>23),I=D+(T^_&(N^T))+C[3]+4107603335&4294967295,D=N+(I<<14&4294967295|I>>>18),I=_+(N^T&(D^N))+C[8]+1163531501&4294967295,_=D+(I<<20&4294967295|I>>>12),I=T+(D^N&(_^D))+C[13]+2850285829&4294967295,T=_+(I<<5&4294967295|I>>>27),I=N+(_^D&(T^_))+C[2]+4243563512&4294967295,N=T+(I<<9&4294967295|I>>>23),I=D+(T^_&(N^T))+C[7]+1735328473&4294967295,D=N+(I<<14&4294967295|I>>>18),I=_+(N^T&(D^N))+C[12]+2368359562&4294967295,_=D+(I<<20&4294967295|I>>>12),I=T+(_^D^N)+C[5]+4294588738&4294967295,T=_+(I<<4&4294967295|I>>>28),I=N+(T^_^D)+C[8]+2272392833&4294967295,N=T+(I<<11&4294967295|I>>>21),I=D+(N^T^_)+C[11]+1839030562&4294967295,D=N+(I<<16&4294967295|I>>>16),I=_+(D^N^T)+C[14]+4259657740&4294967295,_=D+(I<<23&4294967295|I>>>9),I=T+(_^D^N)+C[1]+2763975236&4294967295,T=_+(I<<4&4294967295|I>>>28),I=N+(T^_^D)+C[4]+1272893353&4294967295,N=T+(I<<11&4294967295|I>>>21),I=D+(N^T^_)+C[7]+4139469664&4294967295,D=N+(I<<16&4294967295|I>>>16),I=_+(D^N^T)+C[10]+3200236656&4294967295,_=D+(I<<23&4294967295|I>>>9),I=T+(_^D^N)+C[13]+681279174&4294967295,T=_+(I<<4&4294967295|I>>>28),I=N+(T^_^D)+C[0]+3936430074&4294967295,N=T+(I<<11&4294967295|I>>>21),I=D+(N^T^_)+C[3]+3572445317&4294967295,D=N+(I<<16&4294967295|I>>>16),I=_+(D^N^T)+C[6]+76029189&4294967295,_=D+(I<<23&4294967295|I>>>9),I=T+(_^D^N)+C[9]+3654602809&4294967295,T=_+(I<<4&4294967295|I>>>28),I=N+(T^_^D)+C[12]+3873151461&4294967295,N=T+(I<<11&4294967295|I>>>21),I=D+(N^T^_)+C[15]+530742520&4294967295,D=N+(I<<16&4294967295|I>>>16),I=_+(D^N^T)+C[2]+3299628645&4294967295,_=D+(I<<23&4294967295|I>>>9),I=T+(D^(_|~N))+C[0]+4096336452&4294967295,T=_+(I<<6&4294967295|I>>>26),I=N+(_^(T|~D))+C[7]+1126891415&4294967295,N=T+(I<<10&4294967295|I>>>22),I=D+(T^(N|~_))+C[14]+2878612391&4294967295,D=N+(I<<15&4294967295|I>>>17),I=_+(N^(D|~T))+C[5]+4237533241&4294967295,_=D+(I<<21&4294967295|I>>>11),I=T+(D^(_|~N))+C[12]+1700485571&4294967295,T=_+(I<<6&4294967295|I>>>26),I=N+(_^(T|~D))+C[3]+2399980690&4294967295,N=T+(I<<10&4294967295|I>>>22),I=D+(T^(N|~_))+C[10]+4293915773&4294967295,D=N+(I<<15&4294967295|I>>>17),I=_+(N^(D|~T))+C[1]+2240044497&4294967295,_=D+(I<<21&4294967295|I>>>11),I=T+(D^(_|~N))+C[8]+1873313359&4294967295,T=_+(I<<6&4294967295|I>>>26),I=N+(_^(T|~D))+C[15]+4264355552&4294967295,N=T+(I<<10&4294967295|I>>>22),I=D+(T^(N|~_))+C[6]+2734768916&4294967295,D=N+(I<<15&4294967295|I>>>17),I=_+(N^(D|~T))+C[13]+1309151649&4294967295,_=D+(I<<21&4294967295|I>>>11),I=T+(D^(_|~N))+C[4]+4149444226&4294967295,T=_+(I<<6&4294967295|I>>>26),I=N+(_^(T|~D))+C[11]+3174756917&4294967295,N=T+(I<<10&4294967295|I>>>22),I=D+(T^(N|~_))+C[2]+718787259&4294967295,D=N+(I<<15&4294967295|I>>>17),I=_+(N^(D|~T))+C[9]+3951481745&4294967295,b.g[0]=b.g[0]+T&4294967295,b.g[1]=b.g[1]+(D+(I<<21&4294967295|I>>>11))&4294967295,b.g[2]=b.g[2]+D&4294967295,b.g[3]=b.g[3]+N&4294967295}r.prototype.u=function(b,T){T===void 0&&(T=b.length);for(var _=T-this.blockSize,C=this.B,D=this.h,N=0;N<T;){if(D==0)for(;N<=_;)i(this,b,N),N+=this.blockSize;if(typeof b=="string"){for(;N<T;)if(C[D++]=b.charCodeAt(N++),D==this.blockSize){i(this,C),D=0;break}}else for(;N<T;)if(C[D++]=b[N++],D==this.blockSize){i(this,C),D=0;break}}this.h=D,this.o+=T},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var T=1;T<b.length-8;++T)b[T]=0;var _=8*this.o;for(T=b.length-8;T<b.length;++T)b[T]=_&255,_/=256;for(this.u(b),b=Array(16),T=_=0;4>T;++T)for(var C=0;32>C;C+=8)b[_++]=this.g[T]>>>C&255;return b};function s(b,T){var _=a;return Object.prototype.hasOwnProperty.call(_,b)?_[b]:_[b]=T(b)}function o(b,T){this.h=T;for(var _=[],C=!0,D=b.length-1;0<=D;D--){var N=b[D]|0;C&&N==T||(_[D]=N,C=!1)}this.g=_}var a={};function l(b){return-128<=b&&128>b?s(b,function(T){return new o([T|0],0>T?-1:0)}):new o([b|0],0>b?-1:0)}function c(b){if(isNaN(b)||!isFinite(b))return h;if(0>b)return w(c(-b));for(var T=[],_=1,C=0;b>=_;C++)T[C]=b/_|0,_*=4294967296;return new o(T,0)}function u(b,T){if(b.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(b.charAt(0)=="-")return w(u(b.substring(1),T));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=c(Math.pow(T,8)),C=h,D=0;D<b.length;D+=8){var N=Math.min(8,b.length-D),I=parseInt(b.substring(D,D+N),T);8>N?(N=c(Math.pow(T,N)),C=C.j(N).add(c(I))):(C=C.j(_),C=C.add(c(I)))}return C}var h=l(0),d=l(1),p=l(16777216);n=o.prototype,n.m=function(){if(y(this))return-w(this).m();for(var b=0,T=1,_=0;_<this.g.length;_++){var C=this.i(_);b+=(0<=C?C:4294967296+C)*T,T*=4294967296}return b},n.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(g(this))return"0";if(y(this))return"-"+w(this).toString(b);for(var T=c(Math.pow(b,6)),_=this,C="";;){var D=E(_,T).g;_=v(_,D.j(T));var N=((0<_.g.length?_.g[0]:_.h)>>>0).toString(b);if(_=D,g(_))return N+C;for(;6>N.length;)N="0"+N;C=N+C}},n.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function g(b){if(b.h!=0)return!1;for(var T=0;T<b.g.length;T++)if(b.g[T]!=0)return!1;return!0}function y(b){return b.h==-1}n.l=function(b){return b=v(this,b),y(b)?-1:g(b)?0:1};function w(b){for(var T=b.g.length,_=[],C=0;C<T;C++)_[C]=~b.g[C];return new o(_,~b.h).add(d)}n.abs=function(){return y(this)?w(this):this},n.add=function(b){for(var T=Math.max(this.g.length,b.g.length),_=[],C=0,D=0;D<=T;D++){var N=C+(this.i(D)&65535)+(b.i(D)&65535),I=(N>>>16)+(this.i(D)>>>16)+(b.i(D)>>>16);C=I>>>16,N&=65535,I&=65535,_[D]=I<<16|N}return new o(_,_[_.length-1]&-2147483648?-1:0)};function v(b,T){return b.add(w(T))}n.j=function(b){if(g(this)||g(b))return h;if(y(this))return y(b)?w(this).j(w(b)):w(w(this).j(b));if(y(b))return w(this.j(w(b)));if(0>this.l(p)&&0>b.l(p))return c(this.m()*b.m());for(var T=this.g.length+b.g.length,_=[],C=0;C<2*T;C++)_[C]=0;for(C=0;C<this.g.length;C++)for(var D=0;D<b.g.length;D++){var N=this.i(C)>>>16,I=this.i(C)&65535,j=b.i(D)>>>16,ee=b.i(D)&65535;_[2*C+2*D]+=I*ee,O(_,2*C+2*D),_[2*C+2*D+1]+=N*ee,O(_,2*C+2*D+1),_[2*C+2*D+1]+=I*j,O(_,2*C+2*D+1),_[2*C+2*D+2]+=N*j,O(_,2*C+2*D+2)}for(C=0;C<T;C++)_[C]=_[2*C+1]<<16|_[2*C];for(C=T;C<2*T;C++)_[C]=0;return new o(_,0)};function O(b,T){for(;(b[T]&65535)!=b[T];)b[T+1]+=b[T]>>>16,b[T]&=65535,T++}function S(b,T){this.g=b,this.h=T}function E(b,T){if(g(T))throw Error("division by zero");if(g(b))return new S(h,h);if(y(b))return T=E(w(b),T),new S(w(T.g),w(T.h));if(y(T))return T=E(b,w(T)),new S(w(T.g),T.h);if(30<b.g.length){if(y(b)||y(T))throw Error("slowDivide_ only works with positive integers.");for(var _=d,C=T;0>=C.l(b);)_=R(_),C=R(C);var D=M(_,1),N=M(C,1);for(C=M(C,2),_=M(_,2);!g(C);){var I=N.add(C);0>=I.l(b)&&(D=D.add(_),N=I),C=M(C,1),_=M(_,1)}return T=v(b,D.j(T)),new S(D,T)}for(D=h;0<=b.l(T);){for(_=Math.max(1,Math.floor(b.m()/T.m())),C=Math.ceil(Math.log(_)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),N=c(_),I=N.j(T);y(I)||0<I.l(b);)_-=C,N=c(_),I=N.j(T);g(N)&&(N=d),D=D.add(N),b=v(b,I)}return new S(D,b)}n.A=function(b){return E(this,b).h},n.and=function(b){for(var T=Math.max(this.g.length,b.g.length),_=[],C=0;C<T;C++)_[C]=this.i(C)&b.i(C);return new o(_,this.h&b.h)},n.or=function(b){for(var T=Math.max(this.g.length,b.g.length),_=[],C=0;C<T;C++)_[C]=this.i(C)|b.i(C);return new o(_,this.h|b.h)},n.xor=function(b){for(var T=Math.max(this.g.length,b.g.length),_=[],C=0;C<T;C++)_[C]=this.i(C)^b.i(C);return new o(_,this.h^b.h)};function R(b){for(var T=b.g.length+1,_=[],C=0;C<T;C++)_[C]=b.i(C)<<1|b.i(C-1)>>>31;return new o(_,b.h)}function M(b,T){var _=T>>5;T%=32;for(var C=b.g.length-_,D=[],N=0;N<C;N++)D[N]=0<T?b.i(N+_)>>>T|b.i(N+_+1)<<32-T:b.i(N+_);return new o(D,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,tN=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,lo=o}).apply(typeof H_<"u"?H_:typeof self<"u"?self:typeof window<"u"?window:{});var bd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var nN,Eu,rN,wp,Ew,iN,sN,oN;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,m,x){return f==Array.prototype||f==Object.prototype||(f[m]=x.value),f};function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof bd=="object"&&bd];for(var m=0;m<f.length;++m){var x=f[m];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var r=t(this);function i(f,m){if(m)e:{var x=r;f=f.split(".");for(var P=0;P<f.length-1;P++){var L=f[P];if(!(L in x))break e;x=x[L]}f=f[f.length-1],P=x[f],m=m(P),m!=P&&m!=null&&e(x,f,{configurable:!0,writable:!0,value:m})}}function s(f,m){f instanceof String&&(f+="");var x=0,P=!1,L={next:function(){if(!P&&x<f.length){var F=x++;return{value:m(F,f[F]),done:!1}}return P=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(f){return f||function(){return s(this,function(m,x){return x})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(f){var m=typeof f;return m=m!="object"?m:f?Array.isArray(f)?"array":m:"null",m=="array"||m=="object"&&typeof f.length=="number"}function c(f){var m=typeof f;return m=="object"&&f!=null||m=="function"}function u(f,m,x){return f.call.apply(f.bind,arguments)}function h(f,m,x){if(!f)throw Error();if(2<arguments.length){var P=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,P),f.apply(m,L)}}return function(){return f.apply(m,arguments)}}function d(f,m,x){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:h,d.apply(null,arguments)}function p(f,m){var x=Array.prototype.slice.call(arguments,1);return function(){var P=x.slice();return P.push.apply(P,arguments),f.apply(this,P)}}function g(f,m){function x(){}x.prototype=m.prototype,f.aa=m.prototype,f.prototype=new x,f.prototype.constructor=f,f.Qb=function(P,L,F){for(var X=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)X[Qe-2]=arguments[Qe];return m.prototype[L].apply(P,X)}}function y(f){const m=f.length;if(0<m){const x=Array(m);for(let P=0;P<m;P++)x[P]=f[P];return x}return[]}function w(f,m){for(let x=1;x<arguments.length;x++){const P=arguments[x];if(l(P)){const L=f.length||0,F=P.length||0;f.length=L+F;for(let X=0;X<F;X++)f[L+X]=P[X]}else f.push(P)}}class v{constructor(m,x){this.i=m,this.j=x,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function O(f){return/^[\s\xa0]*$/.test(f)}function S(){var f=a.navigator;return f&&(f=f.userAgent)?f:""}function E(f){return E[" "](f),f}E[" "]=function(){};var R=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function M(f,m,x){for(const P in f)m.call(x,f[P],P,f)}function b(f,m){for(const x in f)m.call(void 0,f[x],x,f)}function T(f){const m={};for(const x in f)m[x]=f[x];return m}const _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(f,m){let x,P;for(let L=1;L<arguments.length;L++){P=arguments[L];for(x in P)f[x]=P[x];for(let F=0;F<_.length;F++)x=_[F],Object.prototype.hasOwnProperty.call(P,x)&&(f[x]=P[x])}}function D(f){var m=1;f=f.split(":");const x=[];for(;0<m&&f.length;)x.push(f.shift()),m--;return f.length&&x.push(f.join(":")),x}function N(f){a.setTimeout(()=>{throw f},0)}function I(){var f=$;let m=null;return f.g&&(m=f.g,f.g=f.g.next,f.g||(f.h=null),m.next=null),m}class j{constructor(){this.h=this.g=null}add(m,x){const P=ee.get();P.set(m,x),this.h?this.h.next=P:this.g=P,this.h=P}}var ee=new v(()=>new te,f=>f.reset());class te{constructor(){this.next=this.g=this.h=null}set(m,x){this.h=m,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let Y,Q=!1,$=new j,G=()=>{const f=a.Promise.resolve(void 0);Y=()=>{f.then(ce)}};var ce=()=>{for(var f;f=I();){try{f.h.call(f.g)}catch(x){N(x)}var m=ee;m.j(f),100>m.h&&(m.h++,f.next=m.g,m.g=f)}Q=!1};function Z(){this.s=this.s,this.C=this.C}Z.prototype.s=!1,Z.prototype.ma=function(){this.s||(this.s=!0,this.N())},Z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function oe(f,m){this.type=f,this.g=this.target=m,this.defaultPrevented=!1}oe.prototype.h=function(){this.defaultPrevented=!0};var de=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var f=!1,m=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const x=()=>{};a.addEventListener("test",x,m),a.removeEventListener("test",x,m)}catch{}return f}();function Pe(f,m){if(oe.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var x=this.type=f.type,P=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=m,m=f.relatedTarget){if(R){e:{try{E(m.nodeName);var L=!0;break e}catch{}L=!1}L||(m=null)}}else x=="mouseover"?m=f.fromElement:x=="mouseout"&&(m=f.toElement);this.relatedTarget=m,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:et[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&Pe.aa.h.call(this)}}g(Pe,oe);var et={2:"touch",3:"pen",4:"mouse"};Pe.prototype.h=function(){Pe.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var xe="closure_listenable_"+(1e6*Math.random()|0),ds=0;function Qr(f,m,x,P,L){this.listener=f,this.proxy=null,this.src=m,this.type=x,this.capture=!!P,this.ha=L,this.key=++ds,this.da=this.fa=!1}function Zn(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Vn(f){this.src=f,this.g={},this.h=0}Vn.prototype.add=function(f,m,x,P,L){var F=f.toString();f=this.g[F],f||(f=this.g[F]=[],this.h++);var X=er(f,m,P,L);return-1<X?(m=f[X],x||(m.fa=!1)):(m=new Qr(m,this.src,F,!!P,L),m.fa=x,f.push(m)),m};function $r(f,m){var x=m.type;if(x in f.g){var P=f.g[x],L=Array.prototype.indexOf.call(P,m,void 0),F;(F=0<=L)&&Array.prototype.splice.call(P,L,1),F&&(Zn(m),f.g[x].length==0&&(delete f.g[x],f.h--))}}function er(f,m,x,P){for(var L=0;L<f.length;++L){var F=f[L];if(!F.da&&F.listener==m&&F.capture==!!x&&F.ha==P)return L}return-1}var ps="closure_lm_"+(1e6*Math.random()|0),jo={};function zo(f,m,x,P,L){if(Array.isArray(m)){for(var F=0;F<m.length;F++)zo(f,m[F],x,P,L);return null}return x=Lf(x),f&&f[xe]?f.K(m,x,c(P)?!!P.capture:!1,L):Uc(f,m,x,!1,P,L)}function Uc(f,m,x,P,L,F){if(!m)throw Error("Invalid event type");var X=c(L)?!!L.capture:!!L,Qe=yr(f);if(Qe||(f[ps]=Qe=new Vn(f)),x=Qe.add(m,x,P,X,F),x.proxy)return x;if(P=Bo(),x.proxy=P,P.src=f,P.listener=x,f.addEventListener)de||(L=X),L===void 0&&(L=!1),f.addEventListener(m.toString(),P,L);else if(f.attachEvent)f.attachEvent(ms(m.toString()),P);else if(f.addListener&&f.removeListener)f.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return x}function Bo(){function f(x){return m.call(f.src,f.listener,x)}const m=Mf;return f}function Ti(f,m,x,P,L){if(Array.isArray(m))for(var F=0;F<m.length;F++)Ti(f,m[F],x,P,L);else P=c(P)?!!P.capture:!!P,x=Lf(x),f&&f[xe]?(f=f.i,m=String(m).toString(),m in f.g&&(F=f.g[m],x=er(F,x,P,L),-1<x&&(Zn(F[x]),Array.prototype.splice.call(F,x,1),F.length==0&&(delete f.g[m],f.h--)))):f&&(f=yr(f))&&(m=f.g[m.toString()],f=-1,m&&(f=er(m,x,P,L)),(x=-1<f?m[f]:null)&&qa(x))}function qa(f){if(typeof f!="number"&&f&&!f.da){var m=f.src;if(m&&m[xe])$r(m.i,f);else{var x=f.type,P=f.proxy;m.removeEventListener?m.removeEventListener(x,P,f.capture):m.detachEvent?m.detachEvent(ms(x),P):m.addListener&&m.removeListener&&m.removeListener(P),(x=yr(m))?($r(x,f),x.h==0&&(x.src=null,m[ps]=null)):Zn(f)}}}function ms(f){return f in jo?jo[f]:jo[f]="on"+f}function Mf(f,m){if(f.da)f=!0;else{m=new Pe(m,this);var x=f.listener,P=f.ha||f.src;f.fa&&qa(f),f=x.call(P,m)}return f}function yr(f){return f=f[ps],f instanceof Vn?f:null}var Wc="__closure_events_fn_"+(1e9*Math.random()>>>0);function Lf(f){return typeof f=="function"?f:(f[Wc]||(f[Wc]=function(m){return f.handleEvent(m)}),f[Wc])}function Le(){Z.call(this),this.i=new Vn(this),this.M=this,this.F=null}g(Le,Z),Le.prototype[xe]=!0,Le.prototype.removeEventListener=function(f,m,x,P){Ti(this,f,m,x,P)};function st(f,m){var x,P=f.F;if(P)for(x=[];P;P=P.F)x.push(P);if(f=f.M,P=m.type||m,typeof m=="string")m=new oe(m,f);else if(m instanceof oe)m.target=m.target||f;else{var L=m;m=new oe(P,f),C(m,L)}if(L=!0,x)for(var F=x.length-1;0<=F;F--){var X=m.g=x[F];L=Ha(X,P,!0,m)&&L}if(X=m.g=f,L=Ha(X,P,!0,m)&&L,L=Ha(X,P,!1,m)&&L,x)for(F=0;F<x.length;F++)X=m.g=x[F],L=Ha(X,P,!1,m)&&L}Le.prototype.N=function(){if(Le.aa.N.call(this),this.i){var f=this.i,m;for(m in f.g){for(var x=f.g[m],P=0;P<x.length;P++)Zn(x[P]);delete f.g[m],f.h--}}this.F=null},Le.prototype.K=function(f,m,x,P){return this.i.add(String(f),m,!1,x,P)},Le.prototype.L=function(f,m,x,P){return this.i.add(String(f),m,!0,x,P)};function Ha(f,m,x,P){if(m=f.i.g[String(m)],!m)return!0;m=m.concat();for(var L=!0,F=0;F<m.length;++F){var X=m[F];if(X&&!X.da&&X.capture==x){var Qe=X.listener,Lt=X.ha||X.src;X.fa&&$r(f.i,X),L=Qe.call(Lt,P)!==!1&&L}}return L&&!P.defaultPrevented}function Vf(f,m,x){if(typeof f=="function")x&&(f=d(f,x));else if(f&&typeof f.handleEvent=="function")f=d(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:a.setTimeout(f,m||0)}function Uo(f){f.g=Vf(()=>{f.g=null,f.i&&(f.i=!1,Uo(f))},f.l);const m=f.h;f.h=null,f.m.apply(null,m)}class xy extends Z{constructor(m,x){super(),this.m=m,this.l=x,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Uo(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gs(f){Z.call(this),this.h=f,this.g={}}g(gs,Z);var Ga=[];function _i(f){M(f.g,function(m,x){this.g.hasOwnProperty(x)&&qa(m)},f),f.g={}}gs.prototype.N=function(){gs.aa.N.call(this),_i(this)},gs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Xa=a.JSON.stringify,ys=a.JSON.parse,Sy=class{stringify(f){return a.JSON.stringify(f,void 0)}parse(f){return a.JSON.parse(f,void 0)}};function qc(){}qc.prototype.h=null;function Hc(f){return f.h||(f.h=f.i())}function Gc(){}var Wo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function qo(){oe.call(this,"d")}g(qo,oe);function tr(){oe.call(this,"c")}g(tr,oe);var Ei={},pe=null;function Ae(){return pe=pe||new Le}Ei.La="serverreachability";function Fe(f){oe.call(this,Ei.La,f)}g(Fe,oe);function Dt(f){const m=Ae();st(m,new Fe(m))}Ei.STAT_EVENT="statevent";function On(f,m){oe.call(this,Ei.STAT_EVENT,f),this.stat=m}g(On,oe);function Ke(f){const m=Ae();st(m,new On(m,f))}Ei.Ma="timingevent";function jr(f,m){oe.call(this,Ei.Ma,f),this.size=m}g(jr,oe);function Mt(f,m){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){f()},m)}function xn(){this.g=!0}xn.prototype.xa=function(){this.g=!1};function sF(f,m,x,P,L,F){f.info(function(){if(f.g)if(F)for(var X="",Qe=F.split("&"),Lt=0;Lt<Qe.length;Lt++){var Ne=Qe[Lt].split("=");if(1<Ne.length){var Xt=Ne[0];Ne=Ne[1];var Kt=Xt.split("_");X=2<=Kt.length&&Kt[1]=="type"?X+(Xt+"="+Ne+"&"):X+(Xt+"=redacted&")}}else X=null;else X=F;return"XMLHTTP REQ ("+P+") [attempt "+L+"]: "+m+`
`+x+`
`+X})}function oF(f,m,x,P,L,F,X){f.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+L+"]: "+m+`
`+x+`
`+F+" "+X})}function Ka(f,m,x,P){f.info(function(){return"XMLHTTP TEXT ("+m+"): "+lF(f,x)+(P?" "+P:"")})}function aF(f,m){f.info(function(){return"TIMEOUT: "+m})}xn.prototype.info=function(){};function lF(f,m){if(!f.g)return m;if(!m)return null;try{var x=JSON.parse(m);if(x){for(f=0;f<x.length;f++)if(Array.isArray(x[f])){var P=x[f];if(!(2>P.length)){var L=P[1];if(Array.isArray(L)&&!(1>L.length)){var F=L[0];if(F!="noop"&&F!="stop"&&F!="close")for(var X=1;X<L.length;X++)L[X]=""}}}}return Xa(x)}catch{return m}}var Ff={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},jS={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},by;function Qf(){}g(Qf,qc),Qf.prototype.g=function(){return new XMLHttpRequest},Qf.prototype.i=function(){return{}},by=new Qf;function vs(f,m,x,P){this.j=f,this.i=m,this.l=x,this.R=P||1,this.U=new gs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new zS}function zS(){this.i=null,this.g="",this.h=!1}var BS={},Ty={};function _y(f,m,x){f.L=1,f.v=Bf(ki(m)),f.m=x,f.P=!0,US(f,null)}function US(f,m){f.F=Date.now(),$f(f),f.A=ki(f.v);var x=f.A,P=f.R;Array.isArray(P)||(P=[String(P)]),ib(x.i,"t",P),f.C=0,x=f.j.J,f.h=new zS,f.g=Sb(f.j,x?m:null,!f.m),0<f.O&&(f.M=new xy(d(f.Y,f,f.g),f.O)),m=f.U,x=f.g,P=f.ca;var L="readystatechange";Array.isArray(L)||(L&&(Ga[0]=L.toString()),L=Ga);for(var F=0;F<L.length;F++){var X=zo(x,L[F],P||m.handleEvent,!1,m.h||m);if(!X)break;m.g[X.key]=X}m=f.H?T(f.H):{},f.m?(f.u||(f.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,m)):(f.u="GET",f.g.ea(f.A,f.u,null,m)),Dt(),sF(f.i,f.u,f.A,f.l,f.R,f.m)}vs.prototype.ca=function(f){f=f.target;const m=this.M;m&&Ci(f)==3?m.j():this.Y(f)},vs.prototype.Y=function(f){try{if(f==this.g)e:{const Kt=Ci(this.g);var m=this.g.Ba();const Za=this.g.Z();if(!(3>Kt)&&(Kt!=3||this.g&&(this.h.h||this.g.oa()||hb(this.g)))){this.J||Kt!=4||m==7||(m==8||0>=Za?Dt(3):Dt(2)),Ey(this);var x=this.g.Z();this.X=x;t:if(WS(this)){var P=hb(this.g);f="";var L=P.length,F=Ci(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ho(this),Xc(this);var X="";break t}this.h.i=new a.TextDecoder}for(m=0;m<L;m++)this.h.h=!0,f+=this.h.i.decode(P[m],{stream:!(F&&m==L-1)});P.length=0,this.h.g+=f,this.C=0,X=this.h.g}else X=this.g.oa();if(this.o=x==200,oF(this.i,this.u,this.A,this.l,this.R,Kt,x),this.o){if(this.T&&!this.K){t:{if(this.g){var Qe,Lt=this.g;if((Qe=Lt.g?Lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(Qe)){var Ne=Qe;break t}}Ne=null}if(x=Ne)Ka(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ky(this,x);else{this.o=!1,this.s=3,Ke(12),Ho(this),Xc(this);break e}}if(this.P){x=!0;let vr;for(;!this.J&&this.C<X.length;)if(vr=cF(this,X),vr==Ty){Kt==4&&(this.s=4,Ke(14),x=!1),Ka(this.i,this.l,null,"[Incomplete Response]");break}else if(vr==BS){this.s=4,Ke(15),Ka(this.i,this.l,X,"[Invalid Chunk]"),x=!1;break}else Ka(this.i,this.l,vr,null),ky(this,vr);if(WS(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Kt!=4||X.length!=0||this.h.h||(this.s=1,Ke(16),x=!1),this.o=this.o&&x,!x)Ka(this.i,this.l,X,"[Invalid Chunked Response]"),Ho(this),Xc(this);else if(0<X.length&&!this.W){this.W=!0;var Xt=this.j;Xt.g==this&&Xt.ba&&!Xt.M&&(Xt.j.info("Great, no buffering proxy detected. Bytes received: "+X.length),Ny(Xt),Xt.M=!0,Ke(11))}}else Ka(this.i,this.l,X,null),ky(this,X);Kt==4&&Ho(this),this.o&&!this.J&&(Kt==4?vb(this.j,this):(this.o=!1,$f(this)))}else EF(this.g),x==400&&0<X.indexOf("Unknown SID")?(this.s=3,Ke(12)):(this.s=0,Ke(13)),Ho(this),Xc(this)}}}catch{}finally{}};function WS(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function cF(f,m){var x=f.C,P=m.indexOf(`
`,x);return P==-1?Ty:(x=Number(m.substring(x,P)),isNaN(x)?BS:(P+=1,P+x>m.length?Ty:(m=m.slice(P,P+x),f.C=P+x,m)))}vs.prototype.cancel=function(){this.J=!0,Ho(this)};function $f(f){f.S=Date.now()+f.I,qS(f,f.I)}function qS(f,m){if(f.B!=null)throw Error("WatchDog timer not null");f.B=Mt(d(f.ba,f),m)}function Ey(f){f.B&&(a.clearTimeout(f.B),f.B=null)}vs.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(aF(this.i,this.A),this.L!=2&&(Dt(),Ke(17)),Ho(this),this.s=2,Xc(this)):qS(this,this.S-f)};function Xc(f){f.j.G==0||f.J||vb(f.j,f)}function Ho(f){Ey(f);var m=f.M;m&&typeof m.ma=="function"&&m.ma(),f.M=null,_i(f.U),f.g&&(m=f.g,f.g=null,m.abort(),m.ma())}function ky(f,m){try{var x=f.j;if(x.G!=0&&(x.g==f||Cy(x.h,f))){if(!f.K&&Cy(x.h,f)&&x.G==3){try{var P=x.Da.g.parse(m)}catch{P=null}if(Array.isArray(P)&&P.length==3){var L=P;if(L[0]==0){e:if(!x.u){if(x.g)if(x.g.F+3e3<f.F)Xf(x),Hf(x);else break e;Iy(x),Ke(18)}}else x.za=L[1],0<x.za-x.T&&37500>L[2]&&x.F&&x.v==0&&!x.C&&(x.C=Mt(d(x.Za,x),6e3));if(1>=XS(x.h)&&x.ca){try{x.ca()}catch{}x.ca=void 0}}else Xo(x,11)}else if((f.K||x.g==f)&&Xf(x),!O(m))for(L=x.Da.g.parse(m),m=0;m<L.length;m++){let Ne=L[m];if(x.T=Ne[0],Ne=Ne[1],x.G==2)if(Ne[0]=="c"){x.K=Ne[1],x.ia=Ne[2];const Xt=Ne[3];Xt!=null&&(x.la=Xt,x.j.info("VER="+x.la));const Kt=Ne[4];Kt!=null&&(x.Aa=Kt,x.j.info("SVER="+x.Aa));const Za=Ne[5];Za!=null&&typeof Za=="number"&&0<Za&&(P=1.5*Za,x.L=P,x.j.info("backChannelRequestTimeoutMs_="+P)),P=x;const vr=f.g;if(vr){const Yf=vr.g?vr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Yf){var F=P.h;F.g||Yf.indexOf("spdy")==-1&&Yf.indexOf("quic")==-1&&Yf.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(Py(F,F.h),F.h=null))}if(P.D){const Dy=vr.g?vr.g.getResponseHeader("X-HTTP-Session-Id"):null;Dy&&(P.ya=Dy,Ue(P.I,P.D,Dy))}}x.G=3,x.l&&x.l.ua(),x.ba&&(x.R=Date.now()-f.F,x.j.info("Handshake RTT: "+x.R+"ms")),P=x;var X=f;if(P.qa=xb(P,P.J?P.ia:null,P.W),X.K){KS(P.h,X);var Qe=X,Lt=P.L;Lt&&(Qe.I=Lt),Qe.B&&(Ey(Qe),$f(Qe)),P.g=X}else gb(P);0<x.i.length&&Gf(x)}else Ne[0]!="stop"&&Ne[0]!="close"||Xo(x,7);else x.G==3&&(Ne[0]=="stop"||Ne[0]=="close"?Ne[0]=="stop"?Xo(x,7):Ry(x):Ne[0]!="noop"&&x.l&&x.l.ta(Ne),x.v=0)}}Dt(4)}catch{}}var uF=class{constructor(f,m){this.g=f,this.map=m}};function HS(f){this.l=f||10,a.PerformanceNavigationTiming?(f=a.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function GS(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function XS(f){return f.h?1:f.g?f.g.size:0}function Cy(f,m){return f.h?f.h==m:f.g?f.g.has(m):!1}function Py(f,m){f.g?f.g.add(m):f.h=m}function KS(f,m){f.h&&f.h==m?f.h=null:f.g&&f.g.has(m)&&f.g.delete(m)}HS.prototype.cancel=function(){if(this.i=YS(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function YS(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let m=f.i;for(const x of f.g.values())m=m.concat(x.D);return m}return y(f.i)}function hF(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(l(f)){for(var m=[],x=f.length,P=0;P<x;P++)m.push(f[P]);return m}m=[],x=0;for(P in f)m[x++]=f[P];return m}function fF(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(l(f)||typeof f=="string"){var m=[];f=f.length;for(var x=0;x<f;x++)m.push(x);return m}m=[],x=0;for(const P in f)m[x++]=P;return m}}}function JS(f,m){if(f.forEach&&typeof f.forEach=="function")f.forEach(m,void 0);else if(l(f)||typeof f=="string")Array.prototype.forEach.call(f,m,void 0);else for(var x=fF(f),P=hF(f),L=P.length,F=0;F<L;F++)m.call(void 0,P[F],x&&x[F],f)}var ZS=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dF(f,m){if(f){f=f.split("&");for(var x=0;x<f.length;x++){var P=f[x].indexOf("="),L=null;if(0<=P){var F=f[x].substring(0,P);L=f[x].substring(P+1)}else F=f[x];m(F,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Go(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Go){this.h=f.h,jf(this,f.j),this.o=f.o,this.g=f.g,zf(this,f.s),this.l=f.l;var m=f.i,x=new Jc;x.i=m.i,m.g&&(x.g=new Map(m.g),x.h=m.h),eb(this,x),this.m=f.m}else f&&(m=String(f).match(ZS))?(this.h=!1,jf(this,m[1]||"",!0),this.o=Kc(m[2]||""),this.g=Kc(m[3]||"",!0),zf(this,m[4]),this.l=Kc(m[5]||"",!0),eb(this,m[6]||"",!0),this.m=Kc(m[7]||"")):(this.h=!1,this.i=new Jc(null,this.h))}Go.prototype.toString=function(){var f=[],m=this.j;m&&f.push(Yc(m,tb,!0),":");var x=this.g;return(x||m=="file")&&(f.push("//"),(m=this.o)&&f.push(Yc(m,tb,!0),"@"),f.push(encodeURIComponent(String(x)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.s,x!=null&&f.push(":",String(x))),(x=this.l)&&(this.g&&x.charAt(0)!="/"&&f.push("/"),f.push(Yc(x,x.charAt(0)=="/"?gF:mF,!0))),(x=this.i.toString())&&f.push("?",x),(x=this.m)&&f.push("#",Yc(x,vF)),f.join("")};function ki(f){return new Go(f)}function jf(f,m,x){f.j=x?Kc(m,!0):m,f.j&&(f.j=f.j.replace(/:$/,""))}function zf(f,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);f.s=m}else f.s=null}function eb(f,m,x){m instanceof Jc?(f.i=m,wF(f.i,f.h)):(x||(m=Yc(m,yF)),f.i=new Jc(m,f.h))}function Ue(f,m,x){f.i.set(m,x)}function Bf(f){return Ue(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function Kc(f,m){return f?m?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Yc(f,m,x){return typeof f=="string"?(f=encodeURI(f).replace(m,pF),x&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function pF(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var tb=/[#\/\?@]/g,mF=/[#\?:]/g,gF=/[#\?]/g,yF=/[#\?@]/g,vF=/#/g;function Jc(f,m){this.h=this.g=null,this.i=f||null,this.j=!!m}function ws(f){f.g||(f.g=new Map,f.h=0,f.i&&dF(f.i,function(m,x){f.add(decodeURIComponent(m.replace(/\+/g," ")),x)}))}n=Jc.prototype,n.add=function(f,m){ws(this),this.i=null,f=Ya(this,f);var x=this.g.get(f);return x||this.g.set(f,x=[]),x.push(m),this.h+=1,this};function nb(f,m){ws(f),m=Ya(f,m),f.g.has(m)&&(f.i=null,f.h-=f.g.get(m).length,f.g.delete(m))}function rb(f,m){return ws(f),m=Ya(f,m),f.g.has(m)}n.forEach=function(f,m){ws(this),this.g.forEach(function(x,P){x.forEach(function(L){f.call(m,L,P,this)},this)},this)},n.na=function(){ws(this);const f=Array.from(this.g.values()),m=Array.from(this.g.keys()),x=[];for(let P=0;P<m.length;P++){const L=f[P];for(let F=0;F<L.length;F++)x.push(m[P])}return x},n.V=function(f){ws(this);let m=[];if(typeof f=="string")rb(this,f)&&(m=m.concat(this.g.get(Ya(this,f))));else{f=Array.from(this.g.values());for(let x=0;x<f.length;x++)m=m.concat(f[x])}return m},n.set=function(f,m){return ws(this),this.i=null,f=Ya(this,f),rb(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[m]),this.h+=1,this},n.get=function(f,m){return f?(f=this.V(f),0<f.length?String(f[0]):m):m};function ib(f,m,x){nb(f,m),0<x.length&&(f.i=null,f.g.set(Ya(f,m),y(x)),f.h+=x.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],m=Array.from(this.g.keys());for(var x=0;x<m.length;x++){var P=m[x];const F=encodeURIComponent(String(P)),X=this.V(P);for(P=0;P<X.length;P++){var L=F;X[P]!==""&&(L+="="+encodeURIComponent(String(X[P]))),f.push(L)}}return this.i=f.join("&")};function Ya(f,m){return m=String(m),f.j&&(m=m.toLowerCase()),m}function wF(f,m){m&&!f.j&&(ws(f),f.i=null,f.g.forEach(function(x,P){var L=P.toLowerCase();P!=L&&(nb(this,P),ib(this,L,x))},f)),f.j=m}function OF(f,m){const x=new xn;if(a.Image){const P=new Image;P.onload=p(Os,x,"TestLoadImage: loaded",!0,m,P),P.onerror=p(Os,x,"TestLoadImage: error",!1,m,P),P.onabort=p(Os,x,"TestLoadImage: abort",!1,m,P),P.ontimeout=p(Os,x,"TestLoadImage: timeout",!1,m,P),a.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=f}else m(!1)}function xF(f,m){const x=new xn,P=new AbortController,L=setTimeout(()=>{P.abort(),Os(x,"TestPingServer: timeout",!1,m)},1e4);fetch(f,{signal:P.signal}).then(F=>{clearTimeout(L),F.ok?Os(x,"TestPingServer: ok",!0,m):Os(x,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(L),Os(x,"TestPingServer: error",!1,m)})}function Os(f,m,x,P,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),P(x)}catch{}}function SF(){this.g=new Sy}function bF(f,m,x){const P=x||"";try{JS(f,function(L,F){let X=L;c(L)&&(X=Xa(L)),m.push(P+F+"="+encodeURIComponent(X))})}catch(L){throw m.push(P+"type="+encodeURIComponent("_badmap")),L}}function Uf(f){this.l=f.Ub||null,this.j=f.eb||!1}g(Uf,qc),Uf.prototype.g=function(){return new Wf(this.l,this.j)},Uf.prototype.i=function(f){return function(){return f}}({});function Wf(f,m){Le.call(this),this.D=f,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(Wf,Le),n=Wf.prototype,n.open=function(f,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=m,this.readyState=1,eu(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(m.body=f),(this.D||a).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Zc(this)),this.readyState=0},n.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,eu(this)),this.g&&(this.readyState=3,eu(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;sb(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function sb(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}n.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var m=f.value?f.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!f.done}))&&(this.response=this.responseText+=m)}f.done?Zc(this):eu(this),this.readyState==3&&sb(this)}},n.Ra=function(f){this.g&&(this.response=this.responseText=f,Zc(this))},n.Qa=function(f){this.g&&(this.response=f,Zc(this))},n.ga=function(){this.g&&Zc(this)};function Zc(f){f.readyState=4,f.l=null,f.j=null,f.v=null,eu(f)}n.setRequestHeader=function(f,m){this.u.append(f,m)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],m=this.h.entries();for(var x=m.next();!x.done;)x=x.value,f.push(x[0]+": "+x[1]),x=m.next();return f.join(`\r
`)};function eu(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Wf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function ob(f){let m="";return M(f,function(x,P){m+=P,m+=":",m+=x,m+=`\r
`}),m}function Ay(f,m,x){e:{for(P in x){var P=!1;break e}P=!0}P||(x=ob(x),typeof f=="string"?x!=null&&encodeURIComponent(String(x)):Ue(f,m,x))}function ot(f){Le.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(ot,Le);var TF=/^https?$/i,_F=["POST","PUT"];n=ot.prototype,n.Ha=function(f){this.J=f},n.ea=function(f,m,x,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);m=m?m.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():by.g(),this.v=this.o?Hc(this.o):Hc(by),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(m,String(f),!0),this.B=!1}catch(F){ab(this,F);return}if(f=x||"",x=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var L in P)x.set(L,P[L]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const F of P.keys())x.set(F,P.get(F));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(x.keys()).find(F=>F.toLowerCase()=="content-type"),L=a.FormData&&f instanceof a.FormData,!(0<=Array.prototype.indexOf.call(_F,m,void 0))||P||L||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,X]of x)this.g.setRequestHeader(F,X);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ub(this),this.u=!0,this.g.send(f),this.u=!1}catch(F){ab(this,F)}};function ab(f,m){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=m,f.m=5,lb(f),qf(f)}function lb(f){f.A||(f.A=!0,st(f,"complete"),st(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,st(this,"complete"),st(this,"abort"),qf(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qf(this,!0)),ot.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?cb(this):this.bb())},n.bb=function(){cb(this)};function cb(f){if(f.h&&typeof o<"u"&&(!f.v[1]||Ci(f)!=4||f.Z()!=2)){if(f.u&&Ci(f)==4)Vf(f.Ea,0,f);else if(st(f,"readystatechange"),Ci(f)==4){f.h=!1;try{const X=f.Z();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var x;if(!(x=m)){var P;if(P=X===0){var L=String(f.D).match(ZS)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),P=!TF.test(L?L.toLowerCase():"")}x=P}if(x)st(f,"complete"),st(f,"success");else{f.m=6;try{var F=2<Ci(f)?f.g.statusText:""}catch{F=""}f.l=F+" ["+f.Z()+"]",lb(f)}}finally{qf(f)}}}}function qf(f,m){if(f.g){ub(f);const x=f.g,P=f.v[0]?()=>{}:null;f.g=null,f.v=null,m||st(f,"ready");try{x.onreadystatechange=P}catch{}}}function ub(f){f.I&&(a.clearTimeout(f.I),f.I=null)}n.isActive=function(){return!!this.g};function Ci(f){return f.g?f.g.readyState:0}n.Z=function(){try{return 2<Ci(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(f){if(this.g){var m=this.g.responseText;return f&&m.indexOf(f)==0&&(m=m.substring(f.length)),ys(m)}};function hb(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function EF(f){const m={};f=(f.g&&2<=Ci(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<f.length;P++){if(O(f[P]))continue;var x=D(f[P]);const L=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const F=m[L]||[];m[L]=F,F.push(x)}b(m,function(P){return P.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function tu(f,m,x){return x&&x.internalChannelParams&&x.internalChannelParams[f]||m}function fb(f){this.Aa=0,this.i=[],this.j=new xn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=tu("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=tu("baseRetryDelayMs",5e3,f),this.cb=tu("retryDelaySeedMs",1e4,f),this.Wa=tu("forwardChannelMaxRetries",2,f),this.wa=tu("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new HS(f&&f.concurrentRequestLimit),this.Da=new SF,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=fb.prototype,n.la=8,n.G=1,n.connect=function(f,m,x,P){Ke(0),this.W=f,this.H=m||{},x&&P!==void 0&&(this.H.OSID=x,this.H.OAID=P),this.F=this.X,this.I=xb(this,null,this.W),Gf(this)};function Ry(f){if(db(f),f.G==3){var m=f.U++,x=ki(f.I);if(Ue(x,"SID",f.K),Ue(x,"RID",m),Ue(x,"TYPE","terminate"),nu(f,x),m=new vs(f,f.j,m),m.L=2,m.v=Bf(ki(x)),x=!1,a.navigator&&a.navigator.sendBeacon)try{x=a.navigator.sendBeacon(m.v.toString(),"")}catch{}!x&&a.Image&&(new Image().src=m.v,x=!0),x||(m.g=Sb(m.j,null),m.g.ea(m.v)),m.F=Date.now(),$f(m)}Ob(f)}function Hf(f){f.g&&(Ny(f),f.g.cancel(),f.g=null)}function db(f){Hf(f),f.u&&(a.clearTimeout(f.u),f.u=null),Xf(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&a.clearTimeout(f.s),f.s=null)}function Gf(f){if(!GS(f.h)&&!f.s){f.s=!0;var m=f.Ga;Y||G(),Q||(Y(),Q=!0),$.add(m,f),f.B=0}}function kF(f,m){return XS(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=m.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=Mt(d(f.Ga,f,m),wb(f,f.B)),f.B++,!0)}n.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const L=new vs(this,this.j,f);let F=this.o;if(this.S&&(F?(F=T(F),C(F,this.S)):F=this.S),this.m!==null||this.O||(L.H=F,F=null),this.P)e:{for(var m=0,x=0;x<this.i.length;x++){t:{var P=this.i[x];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(m+=P,4096<m){m=x;break e}if(m===4096||x===this.i.length-1){m=x+1;break e}}m=1e3}else m=1e3;m=mb(this,L,m),x=ki(this.I),Ue(x,"RID",f),Ue(x,"CVER",22),this.D&&Ue(x,"X-HTTP-Session-Id",this.D),nu(this,x),F&&(this.O?m="headers="+encodeURIComponent(String(ob(F)))+"&"+m:this.m&&Ay(x,this.m,F)),Py(this.h,L),this.Ua&&Ue(x,"TYPE","init"),this.P?(Ue(x,"$req",m),Ue(x,"SID","null"),L.T=!0,_y(L,x,null)):_y(L,x,m),this.G=2}}else this.G==3&&(f?pb(this,f):this.i.length==0||GS(this.h)||pb(this))};function pb(f,m){var x;m?x=m.l:x=f.U++;const P=ki(f.I);Ue(P,"SID",f.K),Ue(P,"RID",x),Ue(P,"AID",f.T),nu(f,P),f.m&&f.o&&Ay(P,f.m,f.o),x=new vs(f,f.j,x,f.B+1),f.m===null&&(x.H=f.o),m&&(f.i=m.D.concat(f.i)),m=mb(f,x,1e3),x.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),Py(f.h,x),_y(x,P,m)}function nu(f,m){f.H&&M(f.H,function(x,P){Ue(m,P,x)}),f.l&&JS({},function(x,P){Ue(m,P,x)})}function mb(f,m,x){x=Math.min(f.i.length,x);var P=f.l?d(f.l.Na,f.l,f):null;e:{var L=f.i;let F=-1;for(;;){const X=["count="+x];F==-1?0<x?(F=L[0].g,X.push("ofs="+F)):F=0:X.push("ofs="+F);let Qe=!0;for(let Lt=0;Lt<x;Lt++){let Ne=L[Lt].g;const Xt=L[Lt].map;if(Ne-=F,0>Ne)F=Math.max(0,L[Lt].g-100),Qe=!1;else try{bF(Xt,X,"req"+Ne+"_")}catch{P&&P(Xt)}}if(Qe){P=X.join("&");break e}}}return f=f.i.splice(0,x),m.D=f,P}function gb(f){if(!f.g&&!f.u){f.Y=1;var m=f.Fa;Y||G(),Q||(Y(),Q=!0),$.add(m,f),f.v=0}}function Iy(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=Mt(d(f.Fa,f),wb(f,f.v)),f.v++,!0)}n.Fa=function(){if(this.u=null,yb(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Mt(d(this.ab,this),f)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ke(10),Hf(this),yb(this))};function Ny(f){f.A!=null&&(a.clearTimeout(f.A),f.A=null)}function yb(f){f.g=new vs(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var m=ki(f.qa);Ue(m,"RID","rpc"),Ue(m,"SID",f.K),Ue(m,"AID",f.T),Ue(m,"CI",f.F?"0":"1"),!f.F&&f.ja&&Ue(m,"TO",f.ja),Ue(m,"TYPE","xmlhttp"),nu(f,m),f.m&&f.o&&Ay(m,f.m,f.o),f.L&&(f.g.I=f.L);var x=f.g;f=f.ia,x.L=1,x.v=Bf(ki(m)),x.m=null,x.P=!0,US(x,f)}n.Za=function(){this.C!=null&&(this.C=null,Hf(this),Iy(this),Ke(19))};function Xf(f){f.C!=null&&(a.clearTimeout(f.C),f.C=null)}function vb(f,m){var x=null;if(f.g==m){Xf(f),Ny(f),f.g=null;var P=2}else if(Cy(f.h,m))x=m.D,KS(f.h,m),P=1;else return;if(f.G!=0){if(m.o)if(P==1){x=m.m?m.m.length:0,m=Date.now()-m.F;var L=f.B;P=Ae(),st(P,new jr(P,x)),Gf(f)}else gb(f);else if(L=m.s,L==3||L==0&&0<m.X||!(P==1&&kF(f,m)||P==2&&Iy(f)))switch(x&&0<x.length&&(m=f.h,m.i=m.i.concat(x)),L){case 1:Xo(f,5);break;case 4:Xo(f,10);break;case 3:Xo(f,6);break;default:Xo(f,2)}}}function wb(f,m){let x=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(x*=2),x*m}function Xo(f,m){if(f.j.info("Error code "+m),m==2){var x=d(f.fb,f),P=f.Xa;const L=!P;P=new Go(P||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||jf(P,"https"),Bf(P),L?OF(P.toString(),x):xF(P.toString(),x)}else Ke(2);f.G=0,f.l&&f.l.sa(m),Ob(f),db(f)}n.fb=function(f){f?(this.j.info("Successfully pinged google.com"),Ke(2)):(this.j.info("Failed to ping google.com"),Ke(1))};function Ob(f){if(f.G=0,f.ka=[],f.l){const m=YS(f.h);(m.length!=0||f.i.length!=0)&&(w(f.ka,m),w(f.ka,f.i),f.h.i.length=0,y(f.i),f.i.length=0),f.l.ra()}}function xb(f,m,x){var P=x instanceof Go?ki(x):new Go(x);if(P.g!="")m&&(P.g=m+"."+P.g),zf(P,P.s);else{var L=a.location;P=L.protocol,m=m?m+"."+L.hostname:L.hostname,L=+L.port;var F=new Go(null);P&&jf(F,P),m&&(F.g=m),L&&zf(F,L),x&&(F.l=x),P=F}return x=f.D,m=f.ya,x&&m&&Ue(P,x,m),Ue(P,"VER",f.la),nu(f,P),P}function Sb(f,m,x){if(m&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=f.Ca&&!f.pa?new ot(new Uf({eb:x})):new ot(f.pa),m.Ha(f.J),m}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function bb(){}n=bb.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Kf(){}Kf.prototype.g=function(f,m){return new Fn(f,m)};function Fn(f,m){Le.call(this),this.g=new fb(m),this.l=f,this.h=m&&m.messageUrlParams||null,f=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(f?f["X-WebChannel-Content-Type"]=m.messageContentType:f={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(f?f["X-WebChannel-Client-Profile"]=m.va:f={"X-WebChannel-Client-Profile":m.va}),this.g.S=f,(f=m&&m.Sb)&&!O(f)&&(this.g.m=f),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!O(m)&&(this.g.D=m,f=this.h,f!==null&&m in f&&(f=this.h,m in f&&delete f[m])),this.j=new Ja(this)}g(Fn,Le),Fn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Fn.prototype.close=function(){Ry(this.g)},Fn.prototype.o=function(f){var m=this.g;if(typeof f=="string"){var x={};x.__data__=f,f=x}else this.u&&(x={},x.__data__=Xa(f),f=x);m.i.push(new uF(m.Ya++,f)),m.G==3&&Gf(m)},Fn.prototype.N=function(){this.g.l=null,delete this.j,Ry(this.g),delete this.g,Fn.aa.N.call(this)};function Tb(f){qo.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var m=f.__sm__;if(m){e:{for(const x in m){f=x;break e}f=void 0}(this.i=f)&&(f=this.i,m=m!==null&&f in m?m[f]:void 0),this.data=m}else this.data=f}g(Tb,qo);function _b(){tr.call(this),this.status=1}g(_b,tr);function Ja(f){this.g=f}g(Ja,bb),Ja.prototype.ua=function(){st(this.g,"a")},Ja.prototype.ta=function(f){st(this.g,new Tb(f))},Ja.prototype.sa=function(f){st(this.g,new _b)},Ja.prototype.ra=function(){st(this.g,"b")},Kf.prototype.createWebChannel=Kf.prototype.g,Fn.prototype.send=Fn.prototype.o,Fn.prototype.open=Fn.prototype.m,Fn.prototype.close=Fn.prototype.close,oN=function(){return new Kf},sN=function(){return Ae()},iN=Ei,Ew={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ff.NO_ERROR=0,Ff.TIMEOUT=8,Ff.HTTP_ERROR=6,wp=Ff,jS.COMPLETE="complete",rN=jS,Gc.EventType=Wo,Wo.OPEN="a",Wo.CLOSE="b",Wo.ERROR="c",Wo.MESSAGE="d",Le.prototype.listen=Le.prototype.K,Eu=Gc,ot.prototype.listenOnce=ot.prototype.L,ot.prototype.getLastError=ot.prototype.Ka,ot.prototype.getLastErrorCode=ot.prototype.Ba,ot.prototype.getStatus=ot.prototype.Z,ot.prototype.getResponseJson=ot.prototype.Oa,ot.prototype.getResponseText=ot.prototype.oa,ot.prototype.send=ot.prototype.ea,ot.prototype.setWithCredentials=ot.prototype.Ha,nN=ot}).apply(typeof bd<"u"?bd:typeof self<"u"?self:typeof window<"u"?window:{});const G_="@firebase/firestore",X_="4.7.11";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mc="11.6.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca=new n1("@firebase/firestore");function nl(){return Ca.logLevel}function re(n,...e){if(Ca.logLevel<=Te.DEBUG){const t=e.map(p1);Ca.debug(`Firestore (${Mc}): ${n}`,...t)}}function is(n,...e){if(Ca.logLevel<=Te.ERROR){const t=e.map(p1);Ca.error(`Firestore (${Mc}): ${n}`,...t)}}function uc(n,...e){if(Ca.logLevel<=Te.WARN){const t=e.map(p1);Ca.warn(`Firestore (${Mc}): ${n}`,...t)}}function p1(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fe(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,aN(n,r,t)}function aN(n,e,t){let r=`FIRESTORE (${Mc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw is(r),new Error(r)}function Me(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||aN(e,i,r)}function ye(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends hs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Sq{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(nn.UNAUTHENTICATED))}shutdown(){}}class bq{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Tq{constructor(e){this.t=e,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Me(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let s=new Hi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Hi,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Hi)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Me(typeof r.accessToken=="string",31837,{l:r}),new lN(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Me(e===null||typeof e=="string",2055,{h:e}),new nn(e)}}class _q{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Eq{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new _q(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(nn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class K_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class kq{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,or(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Me(this.o===void 0,3512);const r=s=>{s.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,re("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new K_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Me(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new K_(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cq(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cN(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=Cq(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}}function Oe(n,e){return n<e?-1:n>e?1:0}function kw(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return Oe(r,i);{const s=cN(),o=Pq(s.encode(Y_(n,t)),s.encode(Y_(e,t)));return o!==0?o:Oe(r,i)}}t+=r>65535?2:1}return Oe(n.length,e.length)}function Y_(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function Pq(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Oe(n[t],e[t]);return Oe(n.length,e.length)}function hc(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_=-62135596800,Z_=1e6;class _t{static now(){return _t.fromMillis(Date.now())}static fromDate(e){return _t.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Z_);return new _t(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new le(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new le(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<J_)throw new le(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Z_}_compareTo(e){return this.seconds===e.seconds?Oe(this.nanoseconds,e.nanoseconds):Oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-J_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{static fromTimestamp(e){return new me(e)}static min(){return new me(new _t(0,0))}static max(){return new me(new _t(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE="__name__";class Gr{constructor(e,t,r){t===void 0?t=0:t>e.length&&fe(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&fe(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Gr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Gr?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=Gr.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return Oe(e.length,t.length)}static compareSegments(e,t){const r=Gr.isNumericId(e),i=Gr.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Gr.extractNumericId(e).compare(Gr.extractNumericId(t)):kw(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return lo.fromString(e.substring(4,e.length-2))}}class Je extends Gr{construct(e,t,r){return new Je(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new le(W.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Je(t)}static emptyPath(){return new Je([])}}const Aq=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class jt extends Gr{construct(e,t,r){return new jt(e,t,r)}static isValidIdentifier(e){return Aq.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),jt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===eE}static keyField(){return new jt([eE])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new le(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new le(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new le(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new le(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new jt(t)}static emptyPath(){return new jt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.path=e}static fromPath(e){return new ue(Je.fromString(e))}static fromName(e){return new ue(Je.fromString(e).popFirst(5))}static empty(){return new ue(Je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Je.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ue(new Je(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ah=-1;function Rq(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=me.fromTimestamp(r===1e9?new _t(t+1,0):new _t(t,r));return new wo(i,ue.empty(),e)}function Iq(n){return new wo(n.readTime,n.key,Ah)}class wo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new wo(me.min(),ue.empty(),Ah)}static max(){return new wo(me.max(),ue.empty(),Ah)}}function Nq(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ue.comparator(n.documentKey,e.documentKey),t!==0?t:Oe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dq="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Mq{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lc(n){if(n.code!==W.FAILED_PRECONDITION||n.message!==Dq)throw n;re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&fe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new U((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof U?t:U.resolve(t)}catch(t){return U.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):U.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):U.reject(t)}static resolve(e){return new U((t,r)=>{t(e)})}static reject(e){return new U((t,r)=>{r(e)})}static waitFor(e){return new U((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},l=>r(l))}),o=!0,s===i&&t()})}static or(e){let t=U.resolve(!1);for(const r of e)t=t.next(i=>i?U.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new U((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;t(e[c]).next(u=>{o[c]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,t){return new U((r,i)=>{const s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}}function Lq(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Vc(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>t.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Bg.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m1=-1;function Ug(n){return n==null}function _m(n){return n===0&&1/n==-1/0}function Vq(n){return typeof n=="number"&&Number.isInteger(n)&&!_m(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN="";function Fq(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=tE(e)),e=Qq(n.get(t),e);return tE(e)}function Qq(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case hN:t+="";break;default:t+=s}}return t}function tE(n){return n+hN+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Vo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function fN(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e,t){this.comparator=e,this.root=t||Qt.EMPTY}insert(e,t){return new it(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Qt.BLACK,null,null))}remove(e){return new it(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Td(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Td(this.root,e,this.comparator,!1)}getReverseIterator(){return new Td(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Td(this.root,e,this.comparator,!0)}}class Td{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qt{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Qt.RED,this.left=i??Qt.EMPTY,this.right=s??Qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Qt(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Qt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Qt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw fe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw fe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw fe(27949);return e+(this.isRed()?0:1)}}Qt.EMPTY=null,Qt.RED=!0,Qt.BLACK=!1;Qt.EMPTY=new class{constructor(){this.size=0}get key(){throw fe(57766)}get value(){throw fe(16141)}get color(){throw fe(16727)}get left(){throw fe(29726)}get right(){throw fe(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new Qt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.comparator=e,this.data=new it(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new rE(this.data.getIterator())}getIteratorFrom(e){return new rE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Et)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Et(this.comparator);return t.data=e,t}}class rE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e){this.fields=e,e.sort(jt.comparator)}static empty(){return new qn([])}unionWith(e){let t=new Et(jt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new qn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return hc(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new dN("Invalid base64 string: "+s):s}}(e);return new qt(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new qt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qt.EMPTY_BYTE_STRING=new qt("");const $q=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Oo(n){if(Me(!!n,39018),typeof n=="string"){let e=0;const t=$q.exec(n);if(Me(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ut(n.seconds),nanos:ut(n.nanos)}}function ut(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function xo(n){return typeof n=="string"?qt.fromBase64String(n):qt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN="server_timestamp",mN="__type__",gN="__previous_value__",yN="__local_write_time__";function g1(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[mN])===null||t===void 0?void 0:t.stringValue)===pN}function Wg(n){const e=n.mapValue.fields[gN];return g1(e)?Wg(e):e}function Rh(n){const e=Oo(n.mapValue.fields[yN].timestampValue);return new _t(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jq{constructor(e,t,r,i,s,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}const Em="(default)";class Ih{constructor(e,t){this.projectId=e,this.database=t||Em}static empty(){return new Ih("","")}get isDefaultDatabase(){return this.database===Em}isEqual(e){return e instanceof Ih&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN="__type__",zq="__max__",_d={mapValue:{}},wN="__vector__",km="value";function So(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?g1(n)?4:Uq(n)?9007199254740991:Bq(n)?10:11:fe(28295,{value:n})}function gi(n,e){if(n===e)return!0;const t=So(n);if(t!==So(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Rh(n).isEqual(Rh(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Oo(i.timestampValue),a=Oo(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return xo(i.bytesValue).isEqual(xo(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return ut(i.geoPointValue.latitude)===ut(s.geoPointValue.latitude)&&ut(i.geoPointValue.longitude)===ut(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ut(i.integerValue)===ut(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=ut(i.doubleValue),a=ut(s.doubleValue);return o===a?_m(o)===_m(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return hc(n.arrayValue.values||[],e.arrayValue.values||[],gi);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(nE(o)!==nE(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!gi(o[l],a[l])))return!1;return!0}(n,e);default:return fe(52216,{left:n})}}function Nh(n,e){return(n.values||[]).find(t=>gi(t,e))!==void 0}function fc(n,e){if(n===e)return 0;const t=So(n),r=So(e);if(t!==r)return Oe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Oe(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=ut(s.integerValue||s.doubleValue),l=ut(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return iE(n.timestampValue,e.timestampValue);case 4:return iE(Rh(n),Rh(e));case 5:return kw(n.stringValue,e.stringValue);case 6:return function(s,o){const a=xo(s),l=xo(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=Oe(a[c],l[c]);if(u!==0)return u}return Oe(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Oe(ut(s.latitude),ut(o.latitude));return a!==0?a:Oe(ut(s.longitude),ut(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return sE(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,u;const h=s.fields||{},d=o.fields||{},p=(a=h[km])===null||a===void 0?void 0:a.arrayValue,g=(l=d[km])===null||l===void 0?void 0:l.arrayValue,y=Oe(((c=p==null?void 0:p.values)===null||c===void 0?void 0:c.length)||0,((u=g==null?void 0:g.values)===null||u===void 0?void 0:u.length)||0);return y!==0?y:sE(p,g)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===_d.mapValue&&o===_d.mapValue)return 0;if(s===_d.mapValue)return 1;if(o===_d.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){const d=kw(l[h],u[h]);if(d!==0)return d;const p=fc(a[l[h]],c[u[h]]);if(p!==0)return p}return Oe(l.length,u.length)}(n.mapValue,e.mapValue);default:throw fe(23264,{Pe:t})}}function iE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Oe(n,e);const t=Oo(n),r=Oo(e),i=Oe(t.seconds,r.seconds);return i!==0?i:Oe(t.nanos,r.nanos)}function sE(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=fc(t[i],r[i]);if(s)return s}return Oe(t.length,r.length)}function dc(n){return Cw(n)}function Cw(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Oo(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return xo(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ue.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=Cw(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Cw(t.fields[o])}`;return i+"}"}(n.mapValue):fe(61005,{value:n})}function Op(n){switch(So(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Wg(n);return e?16+Op(e):16;case 5:return 2*n.stringValue.length;case 6:return xo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Op(s),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Vo(r.fields,(s,o)=>{i+=s.length+Op(o)}),i}(n.mapValue);default:throw fe(13486,{value:n})}}function Pw(n){return!!n&&"integerValue"in n}function y1(n){return!!n&&"arrayValue"in n}function oE(n){return!!n&&"nullValue"in n}function aE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function xp(n){return!!n&&"mapValue"in n}function Bq(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[vN])===null||t===void 0?void 0:t.stringValue)===wN}function Hu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Vo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Hu(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Hu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Uq(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===zq}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.value=e}static empty(){return new Cn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!xp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hu(t)}setAll(e){let t=jt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Hu(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());xp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return gi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];xp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Vo(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Cn(Hu(this.value))}}function ON(n){const e=[];return Vo(n.fields,(t,r)=>{const i=new jt([t]);if(xp(r)){const s=ON(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new qn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new on(e,0,me.min(),me.min(),me.min(),Cn.empty(),0)}static newFoundDocument(e,t,r,i){return new on(e,1,t,me.min(),r,i,0)}static newNoDocument(e,t){return new on(e,2,t,me.min(),me.min(),Cn.empty(),0)}static newUnknownDocument(e,t){return new on(e,3,t,me.min(),me.min(),Cn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Cn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof on&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new on(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(e,t){this.position=e,this.inclusive=t}}function lE(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(s.field.isKeyField()?r=ue.comparator(ue.fromName(o.referenceValue),t.key):r=fc(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function cE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!gi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(e,t="asc"){this.field=e,this.dir=t}}function Wq(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{}class bt extends xN{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Hq(e,t,r):t==="array-contains"?new Kq(e,r):t==="in"?new Yq(e,r):t==="not-in"?new Jq(e,r):t==="array-contains-any"?new Zq(e,r):new bt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Gq(e,r):new Xq(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(fc(t,this.value)):t!==null&&So(this.value)===So(t)&&this.matchesComparison(fc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class yi extends xN{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new yi(e,t)}matches(e){return SN(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function SN(n){return n.op==="and"}function bN(n){return qq(n)&&SN(n)}function qq(n){for(const e of n.filters)if(e instanceof yi)return!1;return!0}function Aw(n){if(n instanceof bt)return n.field.canonicalString()+n.op.toString()+dc(n.value);if(bN(n))return n.filters.map(e=>Aw(e)).join(",");{const e=n.filters.map(t=>Aw(t)).join(",");return`${n.op}(${e})`}}function TN(n,e){return n instanceof bt?function(r,i){return i instanceof bt&&r.op===i.op&&r.field.isEqual(i.field)&&gi(r.value,i.value)}(n,e):n instanceof yi?function(r,i){return i instanceof yi&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&TN(o,i.filters[a]),!0):!1}(n,e):void fe(19439)}function _N(n){return n instanceof bt?function(t){return`${t.field.canonicalString()} ${t.op} ${dc(t.value)}`}(n):n instanceof yi?function(t){return t.op.toString()+" {"+t.getFilters().map(_N).join(" ,")+"}"}(n):"Filter"}class Hq extends bt{constructor(e,t,r){super(e,t,r),this.key=ue.fromName(r.referenceValue)}matches(e){const t=ue.comparator(e.key,this.key);return this.matchesComparison(t)}}class Gq extends bt{constructor(e,t){super(e,"in",t),this.keys=EN("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Xq extends bt{constructor(e,t){super(e,"not-in",t),this.keys=EN("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function EN(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ue.fromName(r.referenceValue))}class Kq extends bt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return y1(t)&&Nh(t.arrayValue,this.value)}}class Yq extends bt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Nh(this.value.arrayValue,t)}}class Jq extends bt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Nh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Nh(this.value.arrayValue,t)}}class Zq extends bt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!y1(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Nh(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e6{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Ie=null}}function uE(n,e=null,t=[],r=[],i=null,s=null,o=null){return new e6(n,e,t,r,i,s,o)}function v1(n){const e=ye(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Aw(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Ug(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>dc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>dc(r)).join(",")),e.Ie=t}return e.Ie}function w1(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Wq(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!TN(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!cE(n.startAt,e.startAt)&&cE(n.endAt,e.endAt)}function Rw(n){return ue.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function t6(n,e,t,r,i,s,o,a){return new qg(n,e,t,r,i,s,o,a)}function Hg(n){return new qg(n)}function hE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function n6(n){return n.collectionGroup!==null}function Gu(n){const e=ye(n);if(e.Ee===null){e.Ee=[];const t=new Set;for(const s of e.explicitOrderBy)e.Ee.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Et(jt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ee.push(new Pm(s,r))}),t.has(jt.keyField().canonicalString())||e.Ee.push(new Pm(jt.keyField(),r))}return e.Ee}function hi(n){const e=ye(n);return e.de||(e.de=r6(e,Gu(n))),e.de}function r6(n,e){if(n.limitType==="F")return uE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Pm(i.field,s)});const t=n.endAt?new Cm(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Cm(n.startAt.position,n.startAt.inclusive):null;return uE(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Iw(n,e,t){return new qg(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Gg(n,e){return w1(hi(n),hi(e))&&n.limitType===e.limitType}function kN(n){return`${v1(hi(n))}|lt:${n.limitType}`}function rl(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>_N(i)).join(", ")}]`),Ug(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>dc(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>dc(i)).join(",")),`Target(${r})`}(hi(n))}; limitType=${n.limitType})`}function Xg(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ue.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of Gu(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=lE(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Gu(r),i)||r.endAt&&!function(o,a,l){const c=lE(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Gu(r),i))}(n,e)}function i6(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function CN(n){return(e,t)=>{let r=!1;for(const i of Gu(n)){const s=s6(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function s6(n,e,t){const r=n.field.isKeyField()?ue.comparator(e.key,t.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?fc(l,c):fe(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return fe(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Vo(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return fN(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o6=new it(ue.comparator);function ss(){return o6}const PN=new it(ue.comparator);function ku(...n){let e=PN;for(const t of n)e=e.insert(t.key,t);return e}function AN(n){let e=PN;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function oa(){return Xu()}function RN(){return Xu()}function Xu(){return new Ua(n=>n.toString(),(n,e)=>n.isEqual(e))}const a6=new it(ue.comparator),l6=new Et(ue.comparator);function _e(...n){let e=l6;for(const t of n)e=e.add(t);return e}const c6=new Et(Oe);function u6(){return c6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O1(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_m(e)?"-0":e}}function IN(n){return{integerValue:""+n}}function h6(n,e){return Vq(e)?IN(e):O1(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(){this._=void 0}}function f6(n,e,t){return n instanceof Am?function(i,s){const o={fields:{[mN]:{stringValue:pN},[yN]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&g1(s)&&(s=Wg(s)),s&&(o.fields[gN]=s),{mapValue:o}}(t,e):n instanceof Dh?DN(n,e):n instanceof Mh?MN(n,e):function(i,s){const o=NN(i,s),a=fE(o)+fE(i.Re);return Pw(o)&&Pw(i.Re)?IN(a):O1(i.serializer,a)}(n,e)}function d6(n,e,t){return n instanceof Dh?DN(n,e):n instanceof Mh?MN(n,e):t}function NN(n,e){return n instanceof Rm?function(r){return Pw(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Am extends Kg{}class Dh extends Kg{constructor(e){super(),this.elements=e}}function DN(n,e){const t=LN(e);for(const r of n.elements)t.some(i=>gi(i,r))||t.push(r);return{arrayValue:{values:t}}}class Mh extends Kg{constructor(e){super(),this.elements=e}}function MN(n,e){let t=LN(e);for(const r of n.elements)t=t.filter(i=>!gi(i,r));return{arrayValue:{values:t}}}class Rm extends Kg{constructor(e,t){super(),this.serializer=e,this.Re=t}}function fE(n){return ut(n.integerValue||n.doubleValue)}function LN(n){return y1(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function p6(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Dh&&i instanceof Dh||r instanceof Mh&&i instanceof Mh?hc(r.elements,i.elements,gi):r instanceof Rm&&i instanceof Rm?gi(r.Re,i.Re):r instanceof Am&&i instanceof Am}(n.transform,e.transform)}class m6{constructor(e,t){this.version=e,this.transformResults=t}}class fi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new fi}static exists(e){return new fi(void 0,e)}static updateTime(e){return new fi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Sp(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Yg{}function VN(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new QN(n.key,fi.none()):new vf(n.key,n.data,fi.none());{const t=n.data,r=Cn.empty();let i=new Et(jt.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Fo(n.key,r,new qn(i.toArray()),fi.none())}}function g6(n,e,t){n instanceof vf?function(i,s,o){const a=i.value.clone(),l=pE(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Fo?function(i,s,o){if(!Sp(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=pE(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(FN(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Ku(n,e,t,r){return n instanceof vf?function(s,o,a,l){if(!Sp(s.precondition,o))return a;const c=s.value.clone(),u=mE(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,e,t,r):n instanceof Fo?function(s,o,a,l){if(!Sp(s.precondition,o))return a;const c=mE(s.fieldTransforms,l,o),u=o.data;return u.setAll(FN(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(n,e,t,r):function(s,o,a){return Sp(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function y6(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=NN(r.transform,i||null);s!=null&&(t===null&&(t=Cn.empty()),t.set(r.field,s))}return t||null}function dE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&hc(r,i,(s,o)=>p6(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class vf extends Yg{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Fo extends Yg{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function FN(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function pE(n,e,t){const r=new Map;Me(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,d6(o,a,t[i]))}return r}function mE(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,f6(s,o,e))}return r}class QN extends Yg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class v6 extends Yg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&g6(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ku(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Ku(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=RN();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const l=VN(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(me.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),_e())}isEqual(e){return this.batchId===e.batchId&&hc(this.mutations,e.mutations,(t,r)=>dE(t,r))&&hc(this.baseMutations,e.baseMutations,(t,r)=>dE(t,r))}}class x1{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Me(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let i=function(){return a6}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new x1(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x6{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dt,ke;function S6(n){switch(n){case W.OK:return fe(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return fe(15467,{code:n})}}function $N(n){if(n===void 0)return is("GRPC error has no .code"),W.UNKNOWN;switch(n){case dt.OK:return W.OK;case dt.CANCELLED:return W.CANCELLED;case dt.UNKNOWN:return W.UNKNOWN;case dt.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case dt.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case dt.INTERNAL:return W.INTERNAL;case dt.UNAVAILABLE:return W.UNAVAILABLE;case dt.UNAUTHENTICATED:return W.UNAUTHENTICATED;case dt.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case dt.NOT_FOUND:return W.NOT_FOUND;case dt.ALREADY_EXISTS:return W.ALREADY_EXISTS;case dt.PERMISSION_DENIED:return W.PERMISSION_DENIED;case dt.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case dt.ABORTED:return W.ABORTED;case dt.OUT_OF_RANGE:return W.OUT_OF_RANGE;case dt.UNIMPLEMENTED:return W.UNIMPLEMENTED;case dt.DATA_LOSS:return W.DATA_LOSS;default:return fe(39323,{code:n})}}(ke=dt||(dt={}))[ke.OK=0]="OK",ke[ke.CANCELLED=1]="CANCELLED",ke[ke.UNKNOWN=2]="UNKNOWN",ke[ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ke[ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ke[ke.NOT_FOUND=5]="NOT_FOUND",ke[ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",ke[ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",ke[ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",ke[ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ke[ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ke[ke.ABORTED=10]="ABORTED",ke[ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",ke[ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",ke[ke.INTERNAL=13]="INTERNAL",ke[ke.UNAVAILABLE=14]="UNAVAILABLE",ke[ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b6=new lo([4294967295,4294967295],0);function gE(n){const e=cN().encode(n),t=new tN;return t.update(e),new Uint8Array(t.digest())}function yE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new lo([t,r],0),new lo([i,s],0)]}class S1{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Cu(`Invalid padding: ${t}`);if(r<0)throw new Cu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Cu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Cu(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=lo.fromNumber(this.pe)}we(e,t,r){let i=e.add(t.multiply(lo.fromNumber(r)));return i.compare(b6)===1&&(i=new lo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=gE(e),[r,i]=yE(t);for(let s=0;s<this.hashCount;s++){const o=this.we(r,i,s);if(!this.be(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new S1(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.pe===0)return;const t=gE(e),[r,i]=yE(t);for(let s=0;s<this.hashCount;s++){const o=this.we(r,i,s);this.Se(o)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Cu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,wf.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Jg(me.min(),i,new it(Oe),ss(),_e())}}class wf{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new wf(r,t,_e(),_e(),_e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(e,t,r,i){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=i}}class jN{constructor(e,t){this.targetId=e,this.Ce=t}}class zN{constructor(e,t,r=qt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class vE{constructor(){this.Fe=0,this.Me=wE(),this.xe=qt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=_e(),t=_e(),r=_e();return this.Me.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:fe(38017,{changeType:s})}}),new wf(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=wE()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Me(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class T6{constructor(e){this.ze=e,this.je=new Map,this.He=ss(),this.Je=Ed(),this.Ye=Ed(),this.Ze=new it(Oe)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:fe(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,i)=>{this.it(i)&&t(i)})}ot(e){const t=e.targetId,r=e.Ce.count,i=this._t(t);if(i){const s=i.target;if(Rw(s))if(r===0){const o=new ue(s.path);this.tt(t,o,on.newNoDocument(o,me.min()))}else Me(r===1,20013,{expectedCount:r});else{const o=this.ut(t);if(o!==r){const a=this.ct(e),l=a?this.lt(a,e,o):1;if(l!==0){this.st(t);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,c)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=xo(r).toUint8Array()}catch(l){if(l instanceof dN)return uc("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new S1(o,i,s)}catch(l){return uc(l instanceof Cu?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.pe===0?null:a}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){const r=this.ze.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.ze.Pt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.tt(t,s,null),i++)}),i}It(e){const t=new Map;this.je.forEach((s,o)=>{const a=this._t(o);if(a){if(s.current&&Rw(a.target)){const l=new ue(a.target.path);this.Et(l).has(o)||this.dt(o,l)||this.tt(o,l,on.newNoDocument(l,e))}s.Le&&(t.set(o,s.qe()),s.Qe())}});let r=_e();this.Ye.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this._t(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.He.forEach((s,o)=>o.setReadTime(e));const i=new Jg(e,t,this.Ze,this.He,r);return this.He=ss(),this.Je=Ed(),this.Ye=Ed(),this.Ze=new it(Oe),i}et(e,t){if(!this.it(e))return;const r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;const i=this.rt(e);this.dt(e,t)?i.$e(t,1):i.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new vE,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new Et(Oe),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new Et(Oe),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||re("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new vE),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function Ed(){return new it(ue.comparator)}function wE(){return new it(ue.comparator)}const _6={asc:"ASCENDING",desc:"DESCENDING"},E6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},k6={and:"AND",or:"OR"};class C6{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Nw(n,e){return n.useProto3Json||Ug(e)?e:{value:e}}function Im(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function BN(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function P6(n,e){return Im(n,e.toTimestamp())}function di(n){return Me(!!n,49232),me.fromTimestamp(function(t){const r=Oo(t);return new _t(r.seconds,r.nanos)}(n))}function b1(n,e){return Dw(n,e).canonicalString()}function Dw(n,e){const t=function(i){return new Je(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function UN(n){const e=Je.fromString(n);return Me(XN(e),10190,{key:e.toString()}),e}function Mw(n,e){return b1(n.databaseId,e.path)}function b0(n,e){const t=UN(e);if(t.get(1)!==n.databaseId.projectId)throw new le(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new le(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ue(qN(t))}function WN(n,e){return b1(n.databaseId,e)}function A6(n){const e=UN(n);return e.length===4?Je.emptyPath():qN(e)}function Lw(n){return new Je(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function qN(n){return Me(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function OE(n,e,t){return{name:Mw(n,e),fields:t.value.mapValue.fields}}function R6(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:fe(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(Me(u===void 0||typeof u=="string",58123),qt.fromBase64String(u||"")):(Me(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),qt.fromUint8Array(u||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?W.UNKNOWN:$N(c.code);return new le(u,c.message||"")}(o);t=new zN(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=b0(n,r.document.name),s=di(r.document.updateTime),o=r.document.createTime?di(r.document.createTime):me.min(),a=new Cn({mapValue:{fields:r.document.fields}}),l=on.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];t=new bp(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=b0(n,r.document),s=r.readTime?di(r.readTime):me.min(),o=on.newNoDocument(i,s),a=r.removedTargetIds||[];t=new bp([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=b0(n,r.document),s=r.removedTargetIds||[];t=new bp([],s,i,null)}else{if(!("filter"in e))return fe(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new x6(i,s),a=r.targetId;t=new jN(a,o)}}return t}function I6(n,e){let t;if(e instanceof vf)t={update:OE(n,e.key,e.value)};else if(e instanceof QN)t={delete:Mw(n,e.key)};else if(e instanceof Fo)t={update:OE(n,e.key,e.data),updateMask:j6(e.fieldMask)};else{if(!(e instanceof v6))return fe(16599,{ft:e.type});t={verify:Mw(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Am)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Dh)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Mh)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Rm)return{fieldPath:o.field.canonicalString(),increment:a.Re};throw fe(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:P6(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:fe(27497)}(n,e.precondition)),t}function N6(n,e){return n&&n.length>0?(Me(e!==void 0,14353),n.map(t=>function(i,s){let o=i.updateTime?di(i.updateTime):di(s);return o.isEqual(me.min())&&(o=di(s)),new m6(o,i.transformResults||[])}(t,e))):[]}function D6(n,e){return{documents:[WN(n,e.path)]}}function M6(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=WN(n,i);const s=function(c){if(c.length!==0)return GN(yi.create(c,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(u=>function(d){return{field:il(d.field),direction:F6(d.dir)}}(u))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=Nw(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{gt:t,parent:i}}function L6(n){let e=A6(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Me(r===1,65062);const u=t.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];t.where&&(s=function(h){const d=HN(h);return d instanceof yi&&bN(d)?d.getFilters():[d]}(t.where));let o=[];t.orderBy&&(o=function(h){return h.map(d=>function(g){return new Pm(sl(g.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(d))}(t.orderBy));let a=null;t.limit&&(a=function(h){let d;return d=typeof h=="object"?h.value:h,Ug(d)?null:d}(t.limit));let l=null;t.startAt&&(l=function(h){const d=!!h.before,p=h.values||[];return new Cm(p,d)}(t.startAt));let c=null;return t.endAt&&(c=function(h){const d=!h.before,p=h.values||[];return new Cm(p,d)}(t.endAt)),t6(e,i,o,s,a,"F",l,c)}function V6(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fe(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function HN(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=sl(t.unaryFilter.field);return bt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=sl(t.unaryFilter.field);return bt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=sl(t.unaryFilter.field);return bt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=sl(t.unaryFilter.field);return bt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return fe(61313);default:return fe(60726)}}(n):n.fieldFilter!==void 0?function(t){return bt.create(sl(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return fe(58110);default:return fe(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return yi.create(t.compositeFilter.filters.map(r=>HN(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return fe(1026)}}(t.compositeFilter.op))}(n):fe(30097,{filter:n})}function F6(n){return _6[n]}function Q6(n){return E6[n]}function $6(n){return k6[n]}function il(n){return{fieldPath:n.canonicalString()}}function sl(n){return jt.fromServerFormat(n.fieldPath)}function GN(n){return n instanceof bt?function(t){if(t.op==="=="){if(aE(t.value))return{unaryFilter:{field:il(t.field),op:"IS_NAN"}};if(oE(t.value))return{unaryFilter:{field:il(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(aE(t.value))return{unaryFilter:{field:il(t.field),op:"IS_NOT_NAN"}};if(oE(t.value))return{unaryFilter:{field:il(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:il(t.field),op:Q6(t.op),value:t.value}}}(n):n instanceof yi?function(t){const r=t.getFilters().map(i=>GN(i));return r.length===1?r[0]:{compositeFilter:{op:$6(t.op),filters:r}}}(n):fe(54877,{filter:n})}function j6(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function XN(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e,t,r,i,s=me.min(),o=me.min(),a=qt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new qs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new qs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new qs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new qs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z6{constructor(e){this.wt=e}}function B6(n){const e=L6({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Iw(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U6{constructor(){this.yn=new W6}addToCollectionParentIndex(e,t){return this.yn.add(t),U.resolve()}getCollectionParents(e,t){return U.resolve(this.yn.getEntries(t))}addFieldIndex(e,t){return U.resolve()}deleteFieldIndex(e,t){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,t){return U.resolve()}getDocumentsMatchingTarget(e,t){return U.resolve(null)}getIndexType(e,t){return U.resolve(0)}getFieldIndexes(e,t){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,t){return U.resolve(wo.min())}getMinOffsetFromCollectionGroup(e,t){return U.resolve(wo.min())}updateCollectionGroup(e,t,r){return U.resolve()}updateIndexEntries(e,t){return U.resolve()}}class W6{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Et(Je.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Et(Je.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},KN=41943040;class bn{static withCacheSize(e){return new bn(e,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bn.DEFAULT_COLLECTION_PERCENTILE=10,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bn.DEFAULT=new bn(KN,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bn.DISABLED=new bn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new pc(0)}static ir(){return new pc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE="LruGarbageCollector",q6=1048576;function bE([n,e],[t,r]){const i=Oe(n,t);return i===0?Oe(e,r):i}class H6{constructor(e){this.cr=e,this.buffer=new Et(bE),this.lr=0}hr(){return++this.lr}Pr(e){const t=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();bE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class G6{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){re(SE,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Vc(t)?re(SE,"Ignoring IndexedDB error during garbage collection: ",t):await Lc(t)}await this.Ir(3e5)})}}class X6{constructor(e,t){this.Er=e,this.params=t}calculateTargetCount(e,t){return this.Er.dr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return U.resolve(Bg.le);const r=new H6(t);return this.Er.forEachTarget(e,i=>r.Pr(i.sequenceNumber)).next(()=>this.Er.Ar(e,i=>r.Pr(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Er.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Er.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(re("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(xE)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(re("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xE):this.Rr(e,t))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,t){let r,i,s,o,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,o=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,t))).next(h=>(s=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),nl()<=Te.DEBUG&&re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h})))}}function K6(n,e){return new X6(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y6{constructor(){this.changes=new Ua(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,on.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?U.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J6{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z6{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Ku(r.mutation,i,qn.empty(),_t.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,_e()).next(()=>r))}getLocalViewOfDocuments(e,t,r=_e()){const i=oa();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=ku();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=oa();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,_e()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=ss();const o=Xu(),a=function(){return Xu()}();return t.forEach((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof Fo)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),Ku(u.mutation,c,u.mutation.getFieldMask(),_t.now())):o.set(c.key,qn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),t.forEach((c,u)=>{var h;return a.set(c,new J6(u,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,t){const r=Xu();let i=new it((o,a)=>o-a),s=_e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=t.get(l);if(c===null)return;let u=r.get(l)||qn.empty();u=a.applyToLocalView(c,u),r.set(l,u);const h=(i.get(a.batchId)||_e()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,h=RN();u.forEach(d=>{if(!s.has(d)){const p=VN(t.get(d),r.get(d));p!==null&&h.set(d,p),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return ue.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):n6(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):U.resolve(oa());let a=Ah,l=s;return o.next(c=>U.forEach(c,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(u)?U.resolve():this.remoteDocumentCache.getEntry(e,u).next(d=>{l=l.insert(u,d)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,_e())).next(u=>({batchId:a,changes:AN(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ue(t)).next(r=>{let i=ku();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=ku();return this.indexManager.getCollectionParents(e,s).next(a=>U.forEach(a,l=>{const c=function(h,d){return new qg(d,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(u=>{u.forEach((h,d)=>{o=o.insert(h,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,on.newInvalidDocument(u)))});let a=ku();return o.forEach((l,c)=>{const u=s.get(l);u!==void 0&&Ku(u.mutation,c,qn.empty(),_t.now()),Xg(t,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e8{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,t){return U.resolve(this.Fr.get(t))}saveBundleMetadata(e,t){return this.Fr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:di(i.createTime)}}(t)),U.resolve()}getNamedQuery(e,t){return U.resolve(this.Mr.get(t))}saveNamedQuery(e,t){return this.Mr.set(t.name,function(i){return{name:i.name,query:B6(i.bundledQuery),readTime:di(i.readTime)}}(t)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t8{constructor(){this.overlays=new it(ue.comparator),this.Or=new Map}getOverlay(e,t){return U.resolve(this.overlays.get(t))}getOverlays(e,t){const r=oa();return U.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.St(e,t,s)}),U.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Or.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Or.delete(r)),U.resolve()}getOverlaysForCollection(e,t,r){const i=oa(),s=t.length+1,o=new ue(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return U.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new it((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>r){let u=s.get(c.largestBatchId);u===null&&(u=oa(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=oa(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return U.resolve(a)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Or.get(i.largestBatchId).delete(r.key);this.Or.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new O6(t,r));let s=this.Or.get(t);s===void 0&&(s=_e(),this.Or.set(t,s)),this.Or.set(t,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n8{constructor(){this.sessionToken=qt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(){this.Nr=new Et(Ct.Br),this.Lr=new Et(Ct.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,t){const r=new Ct(e,t);this.Nr=this.Nr.add(r),this.Lr=this.Lr.add(r)}qr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Qr(new Ct(e,t))}$r(e,t){e.forEach(r=>this.removeReference(r,t))}Ur(e){const t=new ue(new Je([])),r=new Ct(t,e),i=new Ct(t,e+1),s=[];return this.Lr.forEachInRange([r,i],o=>{this.Qr(o),s.push(o.key)}),s}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const t=new ue(new Je([])),r=new Ct(t,e),i=new Ct(t,e+1);let s=_e();return this.Lr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new Ct(e,0),r=this.Nr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Ct{constructor(e,t){this.key=e,this.Gr=t}static Br(e,t){return ue.comparator(e.key,t.key)||Oe(e.Gr,t.Gr)}static kr(e,t){return Oe(e.Gr,t.Gr)||ue.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r8{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Jn=1,this.zr=new Et(Ct.Br)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new w6(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.zr=this.zr.add(new Ct(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,t){return U.resolve(this.jr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.Hr(r),s=i<0?0:i;return U.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?m1:this.Jn-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ct(t,0),i=new Ct(t,Number.POSITIVE_INFINITY),s=[];return this.zr.forEachInRange([r,i],o=>{const a=this.jr(o.Gr);s.push(a)}),U.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Et(Oe);return t.forEach(i=>{const s=new Ct(i,0),o=new Ct(i,Number.POSITIVE_INFINITY);this.zr.forEachInRange([s,o],a=>{r=r.add(a.Gr)})}),U.resolve(this.Jr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;ue.isDocumentKey(s)||(s=s.child(""));const o=new Ct(new ue(s),0);let a=new Et(Oe);return this.zr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.Gr)),!0)},o),U.resolve(this.Jr(a))}Jr(e){const t=[];return e.forEach(r=>{const i=this.jr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Me(this.Yr(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.zr;return U.forEach(t.mutations,i=>{const s=new Ct(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.zr=r})}Xn(e){}containsKey(e,t){const r=new Ct(t,0),i=this.zr.firstAfterOrEqual(r);return U.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Yr(e,t){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){const t=this.Hr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i8{constructor(e){this.Zr=e,this.docs=function(){return new it(ue.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Zr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return U.resolve(r?r.document.mutableCopy():on.newInvalidDocument(t))}getEntries(e,t){let r=ss();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():on.newInvalidDocument(i))}),U.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=ss();const o=t.path,a=new ue(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Nq(Iq(u),r)<=0||(i.has(u.key)||Xg(t,u))&&(s=s.insert(u.key,u.mutableCopy()))}return U.resolve(s)}getAllFromCollectionGroup(e,t,r,i){fe(9500)}Xr(e,t){return U.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new s8(this)}getSize(e){return U.resolve(this.size)}}class s8 extends Y6{constructor(e){super(),this.vr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.vr.addEntry(e,i)):this.vr.removeEntry(r)}),U.waitFor(t)}getFromCache(e,t){return this.vr.getEntry(e,t)}getAllFromCache(e,t){return this.vr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o8{constructor(e){this.persistence=e,this.ei=new Ua(t=>v1(t),w1),this.lastRemoteSnapshotVersion=me.min(),this.highestTargetId=0,this.ti=0,this.ni=new T1,this.targetCount=0,this.ri=pc.rr()}forEachTarget(e,t){return this.ei.forEach((r,i)=>t(i)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ti&&(this.ti=t),U.resolve()}ar(e){this.ei.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ri=new pc(t),this.highestTargetId=t),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,t){return this.ar(t),this.targetCount+=1,U.resolve()}updateTargetData(e,t){return this.ar(t),U.resolve()}removeTargetData(e,t){return this.ei.delete(t.target),this.ni.Ur(t.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.ei.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ei.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),U.waitFor(s).next(()=>i)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,t){const r=this.ei.get(t)||null;return U.resolve(r)}addMatchingKeys(e,t,r){return this.ni.qr(t,r),U.resolve()}removeMatchingKeys(e,t,r){this.ni.$r(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),U.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ni.Ur(t),U.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ni.Wr(t);return U.resolve(r)}containsKey(e,t){return U.resolve(this.ni.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(e,t){this.ii={},this.overlays={},this.si=new Bg(0),this.oi=!1,this.oi=!0,this._i=new n8,this.referenceDelegate=e(this),this.ai=new o8(this),this.indexManager=new U6,this.remoteDocumentCache=function(i){return new i8(i)}(r=>this.referenceDelegate.ui(r)),this.serializer=new z6(t),this.ci=new e8(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new t8,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ii[e.toKey()];return r||(r=new r8(t,this.referenceDelegate),this.ii[e.toKey()]=r),r}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,t,r){re("MemoryPersistence","Starting transaction:",e);const i=new a8(this.si.next());return this.referenceDelegate.li(),r(i).next(s=>this.referenceDelegate.hi(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Pi(e,t){return U.or(Object.values(this.ii).map(r=>()=>r.containsKey(e,t)))}}class a8 extends Mq{constructor(e){super(),this.currentSequenceNumber=e}}class _1{constructor(e){this.persistence=e,this.Ti=new T1,this.Ii=null}static Ei(e){return new _1(e)}get di(){if(this.Ii)return this.Ii;throw fe(60996)}addReference(e,t,r){return this.Ti.addReference(r,t),this.di.delete(r.toString()),U.resolve()}removeReference(e,t,r){return this.Ti.removeReference(r,t),this.di.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),U.resolve()}removeTarget(e,t){this.Ti.Ur(t.targetId).forEach(i=>this.di.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.di.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}li(){this.Ii=new Set}hi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.di,r=>{const i=ue.fromPath(r);return this.Ai(e,i).next(s=>{s||t.removeEntry(i,me.min())})}).next(()=>(this.Ii=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ai(e,t).next(r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())})}ui(e){return 0}Ai(e,t){return U.or([()=>U.resolve(this.Ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Pi(e,t)])}}class Nm{constructor(e,t){this.persistence=e,this.Ri=new Ua(r=>Fq(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=K6(this,t)}static Ei(e,t){return new Nm(e,t)}li(){}hi(e){return U.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Vr(e){let t=0;return this.Ar(e,r=>{t++}).next(()=>t)}Ar(e,t){return U.forEach(this.Ri,(r,i)=>this.gr(e,r,i).next(s=>s?U.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.Xr(e,o=>this.gr(e,o,t).next(a=>{a||(r++,s.removeEntry(o,me.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.Ri.set(t,e.currentSequenceNumber),U.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.Ri.set(r,e.currentSequenceNumber),U.resolve()}removeReference(e,t,r){return this.Ri.set(r,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,t){return this.Ri.set(t,e.currentSequenceNumber),U.resolve()}ui(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Op(e.data.value)),t}gr(e,t,r){return U.or([()=>this.persistence.Pi(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.Ri.get(t);return U.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.ls=r,this.hs=i}static Ps(e,t){let r=_e(),i=_e();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new E1(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l8{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c8{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return QU()?8:Lq(cn())>0?6:4}()}initialize(e,t){this.As=e,this.indexManager=t,this.Ts=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.Rs(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Vs(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new l8;return this.fs(e,t,o).next(a=>{if(s.result=a,this.Is)return this.gs(e,t,o,a.size)})}).next(()=>s.result)}gs(e,t,r,i){return r.documentReadCount<this.Es?(nl()<=Te.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",rl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),U.resolve()):(nl()<=Te.DEBUG&&re("QueryEngine","Query:",rl(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(nl()<=Te.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",rl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,hi(t))):U.resolve())}Rs(e,t){if(hE(t))return U.resolve(null);let r=hi(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Iw(t,null,"F"),r=hi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=_e(...s);return this.As.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ps(t,a);return this.ys(t,c,o,l.readTime)?this.Rs(e,Iw(t,null,"F")):this.ws(e,c,t,l)}))})))}Vs(e,t,r,i){return hE(t)||i.isEqual(me.min())?U.resolve(null):this.As.getDocuments(e,r).next(s=>{const o=this.ps(t,s);return this.ys(t,o,r,i)?U.resolve(null):(nl()<=Te.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),rl(t)),this.ws(e,o,t,Rq(i,Ah)).next(a=>a))})}ps(e,t){let r=new Et(CN(e));return t.forEach((i,s)=>{Xg(e,s)&&(r=r.add(s))}),r}ys(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}fs(e,t,r){return nl()<=Te.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",rl(t)),this.As.getDocumentsMatchingQuery(e,t,wo.min(),r)}ws(e,t,r,i){return this.As.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1="LocalStore",u8=3e8;class h8{constructor(e,t,r,i){this.persistence=e,this.bs=t,this.serializer=i,this.Ss=new it(Oe),this.Ds=new Ua(s=>v1(s),w1),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(r)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Z6(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ss))}}function f8(n,e,t,r){return new h8(n,e,t,r)}async function JN(n,e){const t=ye(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Fs(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=_e();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return t.localDocuments.getDocuments(r,l).next(c=>({Ms:c,removedBatchIds:o,addedBatchIds:a}))})})}function d8(n,e){const t=ye(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.Cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const h=c.batch,d=h.keys();let p=U.resolve();return d.forEach(g=>{p=p.next(()=>u.getEntry(l,g)).next(y=>{const w=c.docVersions.get(g);Me(w!==null,48541),y.version.compareTo(w)<0&&(h.applyToRemoteDocument(y,c),y.isValidDocument()&&(y.setReadTime(c.commitVersion),u.addEntry(y)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=_e();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function ZN(n){const e=ye(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ai.getLastRemoteSnapshotVersion(t))}function p8(n,e){const t=ye(n),r=e.snapshotVersion;let i=t.Ss;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.Cs.newChangeBuffer({trackRemovals:!0});i=t.Ss;const a=[];e.targetChanges.forEach((u,h)=>{const d=i.get(h);if(!d)return;a.push(t.ai.removeMatchingKeys(s,u.removedDocuments,h).next(()=>t.ai.addMatchingKeys(s,u.addedDocuments,h)));let p=d.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?p=p.withResumeToken(qt.EMPTY_BYTE_STRING,me.min()).withLastLimboFreeSnapshotVersion(me.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,r)),i=i.insert(h,p),function(y,w,v){return y.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=u8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(d,p,u)&&a.push(t.ai.updateTargetData(s,p))});let l=ss(),c=_e();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(m8(s,o,e.documentUpdates).next(u=>{l=u.xs,c=u.Os})),!r.isEqual(me.min())){const u=t.ai.getLastRemoteSnapshotVersion(s).next(h=>t.ai.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return U.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(t.Ss=i,s))}function m8(n,e,t){let r=_e(),i=_e();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=ss();return t.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(me.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):re(k1,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{xs:o,Os:i}})}function g8(n,e){const t=ye(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=m1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function y8(n,e){const t=ye(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.ai.getTargetData(r,e).next(s=>s?(i=s,U.resolve(i)):t.ai.allocateTargetId(r).next(o=>(i=new qs(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.ai.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ss.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ss=t.Ss.insert(r.targetId,r),t.Ds.set(e,r.targetId)),r})}async function Vw(n,e,t){const r=ye(n),i=r.Ss.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Vc(o))throw o;re(k1,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ss=r.Ss.remove(e),r.Ds.delete(i.target)}function TE(n,e,t){const r=ye(n);let i=me.min(),s=_e();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const h=ye(l),d=h.Ds.get(u);return d!==void 0?U.resolve(h.Ss.get(d)):h.ai.getTargetData(c,u)}(r,o,hi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.ai.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.bs.getDocumentsMatchingQuery(o,e,t?i:me.min(),t?s:_e())).next(a=>(v8(r,i6(e),a),{documents:a,Ns:s})))}function v8(n,e,t){let r=n.vs.get(e)||me.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.vs.set(e,r)}class _E{constructor(){this.activeTargetIds=u6()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class w8{constructor(){this.So=new _E,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,t,r){this.Do[e]=t}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new _E,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O8{vo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE="ConnectivityMonitor";class kE{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){re(EE,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){re(EE,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kd=null;function Fw(){return kd===null?kd=function(){return 268435456+Math.round(2147483648*Math.random())}():kd++,"0x"+kd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0="RestConnection",x8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class S8{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Lo=t+"://"+e.host,this.ko=`projects/${r}/databases/${i}`,this.qo=this.databaseId.database===Em?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Qo(e,t,r,i,s){const o=Fw(),a=this.$o(e,t.toUriEncodedString());re(T0,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};return this.Uo(l,i,s),this.Ko(e,a,l,r).then(c=>(re(T0,`Received RPC '${e}' ${o}: `,c),c),c=>{throw uc(T0,`RPC '${e}' ${o} failed with error: `,c,"url: ",a,"request:",r),c})}Wo(e,t,r,i,s,o){return this.Qo(e,t,r,i,s)}Uo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Mc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}$o(e,t){const r=x8[e];return`${this.Lo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b8{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en="WebChannelConnection";class T8 extends S8{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,t,r,i){const s=Fw();return new Promise((o,a)=>{const l=new nN;l.setWithCredentials(!0),l.listenOnce(rN.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case wp.NO_ERROR:const u=l.getResponseJson();re(en,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case wp.TIMEOUT:re(en,`RPC '${e}' ${s} timed out`),a(new le(W.DEADLINE_EXCEEDED,"Request time out"));break;case wp.HTTP_ERROR:const h=l.getStatus();if(re(en,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let d=l.getResponseJson();Array.isArray(d)&&(d=d[0]);const p=d==null?void 0:d.error;if(p&&p.status&&p.message){const g=function(w){const v=w.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(v)>=0?v:W.UNKNOWN}(p.status);a(new le(g,p.message))}else a(new le(W.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new le(W.UNAVAILABLE,"Connection failed."));break;default:fe(9055,{s_:e,streamId:s,o_:l.getLastErrorCode(),__:l.getLastError()})}}finally{re(en,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);re(en,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",c,r,15)})}a_(e,t,r){const i=Fw(),s=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=oN(),a=sN(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Uo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const u=s.join("");re(en,`Creating RPC '${e}' stream ${i}: ${u}`,l);const h=o.createWebChannel(u,l);let d=!1,p=!1;const g=new b8({Go:w=>{p?re(en,`Not sending because RPC '${e}' stream ${i} is closed:`,w):(d||(re(en,`Opening RPC '${e}' stream ${i} transport.`),h.open(),d=!0),re(en,`RPC '${e}' stream ${i} sending:`,w),h.send(w))},zo:()=>h.close()}),y=(w,v,O)=>{w.listen(v,S=>{try{O(S)}catch(E){setTimeout(()=>{throw E},0)}})};return y(h,Eu.EventType.OPEN,()=>{p||(re(en,`RPC '${e}' stream ${i} transport opened.`),g.t_())}),y(h,Eu.EventType.CLOSE,()=>{p||(p=!0,re(en,`RPC '${e}' stream ${i} transport closed`),g.r_())}),y(h,Eu.EventType.ERROR,w=>{p||(p=!0,uc(en,`RPC '${e}' stream ${i} transport errored. Name:`,w.name,"Message:",w.message),g.r_(new le(W.UNAVAILABLE,"The operation could not be completed")))}),y(h,Eu.EventType.MESSAGE,w=>{var v;if(!p){const O=w.data[0];Me(!!O,16349);const S=O,E=(S==null?void 0:S.error)||((v=S[0])===null||v===void 0?void 0:v.error);if(E){re(en,`RPC '${e}' stream ${i} received error:`,E);const R=E.status;let M=function(_){const C=dt[_];if(C!==void 0)return $N(C)}(R),b=E.message;M===void 0&&(M=W.INTERNAL,b="Unknown error status: "+R+" with message "+E.message),p=!0,g.r_(new le(M,b)),h.close()}else re(en,`RPC '${e}' stream ${i} received:`,O),g.i_(O)}}),y(a,iN.STAT_EVENT,w=>{w.stat===Ew.PROXY?re(en,`RPC '${e}' stream ${i} detected buffering proxy`):w.stat===Ew.NOPROXY&&re(en,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{g.n_()},0),g}}function _0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zg(n){return new C6(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(e,t,r=1e3,i=1.5,s=6e4){this.bi=e,this.timerId=t,this.u_=r,this.c_=i,this.l_=s,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const t=Math.floor(this.h_+this.d_()),r=Math.max(0,Date.now()-this.T_),i=Math.max(0,t-r);i>0&&re("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.h_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,i,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE="PersistentStream";class tD{constructor(e,t,r,i,s,o,a,l){this.bi=e,this.R_=r,this.V_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new eD(e,t)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,t){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():t&&t.code===W.RESOURCE_EXHAUSTED?(is(t.toString()),is("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):t&&t.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(t)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),t=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.m_===t&&this.B_(r,i)},r=>{e(()=>{const i=new le(W.UNKNOWN,"Fetching auth token failed: "+r.message);return this.L_(i)})})}B_(e,t){const r=this.N_(this.m_);this.stream=this.k_(e,t),this.stream.jo(()=>{r(()=>this.listener.jo())}),this.stream.Jo(()=>{r(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(i=>{r(()=>this.L_(i))}),this.stream.onMessage(i=>{r(()=>++this.p_==1?this.q_(i):this.onNext(i))})}S_(){this.state=5,this.y_.E_(async()=>{this.state=0,this.start()})}L_(e){return re(CE,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return t=>{this.bi.enqueueAndForget(()=>this.m_===e?t():(re(CE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class _8 extends tD{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}k_(e,t){return this.connection.a_("Listen",e,t)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const t=R6(this.serializer,e),r=function(s){if(!("targetChange"in s))return me.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?me.min():o.readTime?di(o.readTime):me.min()}(e);return this.listener.Q_(t,r)}U_(e){const t={};t.database=Lw(this.serializer),t.addTarget=function(s,o){let a;const l=o.target;if(a=Rw(l)?{documents:D6(s,l)}:{query:M6(s,l).gt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=BN(s,o.resumeToken);const c=Nw(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(me.min())>0){a.readTime=Im(s,o.snapshotVersion.toTimestamp());const c=Nw(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=V6(this.serializer,e);r&&(t.labels=r),this.F_(t)}K_(e){const t={};t.database=Lw(this.serializer),t.removeTarget=e,this.F_(t)}}class E8 extends tD{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,t){return this.connection.a_("Write",e,t)}q_(e){return Me(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Me(!e.writeResults||e.writeResults.length===0,55816),this.listener.z_()}onNext(e){Me(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const t=N6(e.writeResults,e.commitTime),r=di(e.commitTime);return this.listener.j_(r,t)}H_(){const e={};e.database=Lw(this.serializer),this.F_(e)}G_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>I6(this.serializer,r))};this.F_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k8{}class C8 extends k8{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.J_=!1}Y_(){if(this.J_)throw new le(W.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,t,r,i){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Qo(e,Dw(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new le(W.UNKNOWN,s.toString())})}Wo(e,t,r,i,s){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Wo(e,Dw(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new le(W.UNKNOWN,o.toString())})}terminate(){this.J_=!0,this.connection.terminate()}}class P8{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(is(t),this.ea=!1):re("OnlineStateTracker",t)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pa="RemoteStore";class A8{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=s,this.ca.vo(o=>{r.enqueueAndForget(async()=>{Wa(this)&&(re(Pa,"Restarting streams for network reachability change."),await async function(l){const c=ye(l);c.aa.add(4),await Of(c),c.la.set("Unknown"),c.aa.delete(4),await ey(c)}(this))})}),this.la=new P8(r,i)}}async function ey(n){if(Wa(n))for(const e of n.ua)await e(!0)}async function Of(n){for(const e of n.ua)await e(!1)}function nD(n,e){const t=ye(n);t._a.has(e.targetId)||(t._a.set(e.targetId,e),R1(t)?A1(t):Fc(t).b_()&&P1(t,e))}function C1(n,e){const t=ye(n),r=Fc(t);t._a.delete(e),r.b_()&&rD(t,e),t._a.size===0&&(r.b_()?r.v_():Wa(t)&&t.la.set("Unknown"))}function P1(n,e){if(n.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(me.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Fc(n).U_(e)}function rD(n,e){n.ha.Ke(e),Fc(n).K_(e)}function A1(n){n.ha=new T6({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n._a.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),Fc(n).start(),n.la.ta()}function R1(n){return Wa(n)&&!Fc(n).w_()&&n._a.size>0}function Wa(n){return ye(n).aa.size===0}function iD(n){n.ha=void 0}async function R8(n){n.la.set("Online")}async function I8(n){n._a.forEach((e,t)=>{P1(n,e)})}async function N8(n,e){iD(n),R1(n)?(n.la.ia(e),A1(n)):n.la.set("Unknown")}async function D8(n,e,t){if(n.la.set("Online"),e instanceof zN&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i._a.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i._a.delete(a),i.ha.removeTarget(a))}(n,e)}catch(r){re(Pa,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Dm(n,r)}else if(e instanceof bp?n.ha.Xe(e):e instanceof jN?n.ha.ot(e):n.ha.nt(e),!t.isEqual(me.min()))try{const r=await ZN(n.localStore);t.compareTo(r)>=0&&await function(s,o){const a=s.ha.It(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s._a.get(c);u&&s._a.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=s._a.get(l);if(!u)return;s._a.set(l,u.withResumeToken(qt.EMPTY_BYTE_STRING,u.snapshotVersion)),rD(s,l);const h=new qs(u.target,l,c,u.sequenceNumber);P1(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t)}catch(r){re(Pa,"Failed to raise snapshot:",r),await Dm(n,r)}}async function Dm(n,e,t){if(!Vc(e))throw e;n.aa.add(1),await Of(n),n.la.set("Offline"),t||(t=()=>ZN(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{re(Pa,"Retrying IndexedDB access"),await t(),n.aa.delete(1),await ey(n)})}function sD(n,e){return e().catch(t=>Dm(n,t,e))}async function ty(n){const e=ye(n),t=bo(e);let r=e.oa.length>0?e.oa[e.oa.length-1].batchId:m1;for(;M8(e);)try{const i=await g8(e.localStore,r);if(i===null){e.oa.length===0&&t.v_();break}r=i.batchId,L8(e,i)}catch(i){await Dm(e,i)}oD(e)&&aD(e)}function M8(n){return Wa(n)&&n.oa.length<10}function L8(n,e){n.oa.push(e);const t=bo(n);t.b_()&&t.W_&&t.G_(e.mutations)}function oD(n){return Wa(n)&&!bo(n).w_()&&n.oa.length>0}function aD(n){bo(n).start()}async function V8(n){bo(n).H_()}async function F8(n){const e=bo(n);for(const t of n.oa)e.G_(t.mutations)}async function Q8(n,e,t){const r=n.oa.shift(),i=x1.from(r,e,t);await sD(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await ty(n)}async function $8(n,e){e&&bo(n).W_&&await async function(r,i){if(function(o){return S6(o)&&o!==W.ABORTED}(i.code)){const s=r.oa.shift();bo(r).D_(),await sD(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await ty(r)}}(n,e),oD(n)&&aD(n)}async function PE(n,e){const t=ye(n);t.asyncQueue.verifyOperationInProgress(),re(Pa,"RemoteStore received new credentials");const r=Wa(t);t.aa.add(3),await Of(t),r&&t.la.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.aa.delete(3),await ey(t)}async function j8(n,e){const t=ye(n);e?(t.aa.delete(2),await ey(t)):e||(t.aa.add(2),await Of(t),t.la.set("Unknown"))}function Fc(n){return n.Pa||(n.Pa=function(t,r,i){const s=ye(t);return s.Y_(),new _8(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{jo:R8.bind(null,n),Jo:I8.bind(null,n),Zo:N8.bind(null,n),Q_:D8.bind(null,n)}),n.ua.push(async e=>{e?(n.Pa.D_(),R1(n)?A1(n):n.la.set("Unknown")):(await n.Pa.stop(),iD(n))})),n.Pa}function bo(n){return n.Ta||(n.Ta=function(t,r,i){const s=ye(t);return s.Y_(),new E8(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{jo:()=>Promise.resolve(),Jo:V8.bind(null,n),Zo:$8.bind(null,n),z_:F8.bind(null,n),j_:Q8.bind(null,n)}),n.ua.push(async e=>{e?(n.Ta.D_(),await ty(n)):(await n.Ta.stop(),n.oa.length>0&&(re(Pa,`Stopping write stream with ${n.oa.length} pending writes`),n.oa=[]))})),n.Ta}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Hi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new I1(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function N1(n,e){if(is("AsyncQueue",`${e}: ${n}`),Vc(n))return new le(W.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{static emptySet(e){return new Ml(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ue.comparator(t.key,r.key):(t,r)=>ue.comparator(t.key,r.key),this.keyedMap=ku(),this.sortedSet=new it(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ml)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Ml;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(){this.Ia=new it(ue.comparator)}track(e){const t=e.doc.key,r=this.Ia.get(t);r?e.type!==0&&r.type===3?this.Ia=this.Ia.insert(t,e):e.type===3&&r.type!==1?this.Ia=this.Ia.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Ia=this.Ia.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Ia=this.Ia.remove(t):e.type===1&&r.type===2?this.Ia=this.Ia.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):fe(63341,{Vt:e,Ea:r}):this.Ia=this.Ia.insert(t,e)}da(){const e=[];return this.Ia.inorderTraversal((t,r)=>{e.push(r)}),e}}class mc{constructor(e,t,r,i,s,o,a,l,c){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new mc(e,t,Ml.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z8{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}}class B8{constructor(){this.queries=RE(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(t,r){const i=ye(t),s=i.queries;i.queries=RE(),s.forEach((o,a)=>{for(const l of a.Ra)l.onError(r)})})(this,new le(W.ABORTED,"Firestore shutting down"))}}function RE(){return new Ua(n=>kN(n),Gg)}async function D1(n,e){const t=ye(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.Va()&&e.ma()&&(r=2):(s=new z8,r=e.ma()?0:1);try{switch(r){case 0:s.Aa=await t.onListen(i,!0);break;case 1:s.Aa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){const a=N1(o,`Initialization of query '${rl(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.Ra.push(e),e.ga(t.onlineState),s.Aa&&e.pa(s.Aa)&&L1(t)}async function M1(n,e){const t=ye(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.Ra.indexOf(e);o>=0&&(s.Ra.splice(o,1),s.Ra.length===0?i=e.ma()?0:1:!s.Va()&&e.ma()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function U8(n,e){const t=ye(n);let r=!1;for(const i of e){const s=i.query,o=t.queries.get(s);if(o){for(const a of o.Ra)a.pa(i)&&(r=!0);o.Aa=i}}r&&L1(t)}function W8(n,e,t){const r=ye(n),i=r.queries.get(e);if(i)for(const s of i.Ra)s.onError(t);r.queries.delete(e)}function L1(n){n.fa.forEach(e=>{e.next()})}var Qw,IE;(IE=Qw||(Qw={})).ya="default",IE.Cache="cache";class V1{constructor(e,t,r){this.query=e,this.wa=t,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=r||{}}pa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new mc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ba?this.Da(e)&&(this.wa.next(e),t=!0):this.va(e,this.onlineState)&&(this.Ca(e),t=!0),this.Sa=e,t}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let t=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),t=!0),t}va(e,t){if(!e.fromCache||!this.ma())return!0;const r=t!=="Offline";return(!this.options.Fa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Da(e){if(e.docChanges.length>0)return!0;const t=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Ca(e){e=mc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==Qw.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(e){this.key=e}}class cD{constructor(e){this.key=e}}class q8{constructor(e,t){this.query=e,this.qa=t,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=_e(),this.mutatedKeys=_e(),this.Ua=CN(e),this.Ka=new Ml(this.Ua)}get Wa(){return this.qa}Ga(e,t){const r=t?t.za:new AE,i=t?t.Ka:this.Ka;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,h)=>{const d=i.get(u),p=Xg(this.query,h)?h:null,g=!!d&&this.mutatedKeys.has(d.key),y=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let w=!1;d&&p?d.data.isEqual(p.data)?g!==y&&(r.track({type:3,doc:p}),w=!0):this.ja(d,p)||(r.track({type:2,doc:p}),w=!0,(l&&this.Ua(p,l)>0||c&&this.Ua(p,c)<0)&&(a=!0)):!d&&p?(r.track({type:0,doc:p}),w=!0):d&&!p&&(r.track({type:1,doc:d}),w=!0,(l||c)&&(a=!0)),w&&(p?(o=o.add(p),s=y?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{Ka:o,za:r,ys:a,mutatedKeys:s}}ja(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const o=e.za.da();o.sort((u,h)=>function(p,g){const y=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fe(20277,{Vt:w})}};return y(p)-y(g)}(u.type,h.type)||this.Ua(u.doc,h.doc)),this.Ha(r),i=i!=null&&i;const a=t&&!i?this.Ja():[],l=this.$a.size===0&&this.current&&!i?1:0,c=l!==this.Qa;return this.Qa=l,o.length!==0||c?{snapshot:new mc(this.query,e.Ka,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ya:a}:{Ya:a}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new AE,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(t=>this.qa=this.qa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qa=this.qa.delete(t)),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=_e(),this.Ka.forEach(r=>{this.Za(r.key)&&(this.$a=this.$a.add(r.key))});const t=[];return e.forEach(r=>{this.$a.has(r)||t.push(new cD(r))}),this.$a.forEach(r=>{e.has(r)||t.push(new lD(r))}),t}Xa(e){this.qa=e.Ns,this.$a=_e();const t=this.Ga(e.documents);return this.applyChanges(t,!0)}eu(){return mc.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}}const F1="SyncEngine";class H8{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class G8{constructor(e){this.key=e,this.tu=!1}}class X8{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.nu={},this.ru=new Ua(a=>kN(a),Gg),this.iu=new Map,this.su=new Set,this.ou=new it(ue.comparator),this._u=new Map,this.au=new T1,this.uu={},this.cu=new Map,this.lu=pc.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}}async function K8(n,e,t=!0){const r=mD(n);let i;const s=r.ru.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.eu()):i=await uD(r,e,t,!0),i}async function Y8(n,e){const t=mD(n);await uD(t,e,!0,!1)}async function uD(n,e,t,r){const i=await y8(n.localStore,hi(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t);let a;return r&&(a=await J8(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&nD(n.remoteStore,i),a}async function J8(n,e,t,r,i){n.Pu=(h,d,p)=>async function(y,w,v,O){let S=w.view.Ga(v);S.ys&&(S=await TE(y.localStore,w.query,!1).then(({documents:b})=>w.view.Ga(b,S)));const E=O&&O.targetChanges.get(w.targetId),R=O&&O.targetMismatches.get(w.targetId)!=null,M=w.view.applyChanges(S,y.isPrimaryClient,E,R);return DE(y,w.targetId,M.Ya),M.snapshot}(n,h,d,p);const s=await TE(n.localStore,e,!0),o=new q8(e,s.Ns),a=o.Ga(s.documents),l=wf.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),c=o.applyChanges(a,n.isPrimaryClient,l);DE(n,t,c.Ya);const u=new H8(e,t,o);return n.ru.set(e,u),n.iu.has(t)?n.iu.get(t).push(e):n.iu.set(t,[e]),c.snapshot}async function Z8(n,e,t){const r=ye(n),i=r.ru.get(e),s=r.iu.get(i.targetId);if(s.length>1)return r.iu.set(i.targetId,s.filter(o=>!Gg(o,e))),void r.ru.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Vw(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&C1(r.remoteStore,i.targetId),$w(r,i.targetId)}).catch(Lc)):($w(r,i.targetId),await Vw(r.localStore,i.targetId,!0))}async function e7(n,e){const t=ye(n),r=t.ru.get(e),i=t.iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),C1(t.remoteStore,r.targetId))}async function t7(n,e,t){const r=l7(n);try{const i=await function(o,a){const l=ye(o),c=_t.now(),u=a.reduce((p,g)=>p.add(g.key),_e());let h,d;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let g=ss(),y=_e();return l.Cs.getEntries(p,u).next(w=>{g=w,g.forEach((v,O)=>{O.isValidDocument()||(y=y.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,g)).next(w=>{h=w;const v=[];for(const O of a){const S=y6(O,h.get(O.key).overlayedDocument);S!=null&&v.push(new Fo(O.key,S,ON(S.value.mapValue),fi.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,v,a)}).next(w=>{d=w;const v=w.applyToLocalDocumentSet(h,y);return l.documentOverlayCache.saveOverlays(p,w.batchId,v)})}).then(()=>({batchId:d.batchId,changes:AN(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.uu[o.currentUser.toKey()];c||(c=new it(Oe)),c=c.insert(a,l),o.uu[o.currentUser.toKey()]=c}(r,i.batchId,t),await xf(r,i.changes),await ty(r.remoteStore)}catch(i){const s=N1(i,"Failed to persist write");t.reject(s)}}async function hD(n,e){const t=ye(n);try{const r=await p8(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t._u.get(s);o&&(Me(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.tu=!0:i.modifiedDocuments.size>0?Me(o.tu,14607):i.removedDocuments.size>0&&(Me(o.tu,42227),o.tu=!1))}),await xf(t,r,e)}catch(r){await Lc(r)}}function NE(n,e,t){const r=ye(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.ru.forEach((s,o)=>{const a=o.view.ga(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=ye(o);l.onlineState=a;let c=!1;l.queries.forEach((u,h)=>{for(const d of h.Ra)d.ga(a)&&(c=!0)}),c&&L1(l)}(r.eventManager,e),i.length&&r.nu.Q_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function n7(n,e,t){const r=ye(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r._u.get(e),s=i&&i.key;if(s){let o=new it(ue.comparator);o=o.insert(s,on.newNoDocument(s,me.min()));const a=_e().add(s),l=new Jg(me.min(),new Map,new it(Oe),o,a);await hD(r,l),r.ou=r.ou.remove(s),r._u.delete(e),Q1(r)}else await Vw(r.localStore,e,!1).then(()=>$w(r,e,t)).catch(Lc)}async function r7(n,e){const t=ye(n),r=e.batch.batchId;try{const i=await d8(t.localStore,e);dD(t,r,null),fD(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await xf(t,i)}catch(i){await Lc(i)}}async function i7(n,e,t){const r=ye(n);try{const i=await function(o,a){const l=ye(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(Me(h!==null,37113),u=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);dD(r,e,t),fD(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await xf(r,i)}catch(i){await Lc(i)}}function fD(n,e){(n.cu.get(e)||[]).forEach(t=>{t.resolve()}),n.cu.delete(e)}function dD(n,e,t){const r=ye(n);let i=r.uu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.uu[r.currentUser.toKey()]=i}}function $w(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.iu.get(e))n.ru.delete(r),t&&n.nu.Tu(r,t);n.iu.delete(e),n.isPrimaryClient&&n.au.Ur(e).forEach(r=>{n.au.containsKey(r)||pD(n,r)})}function pD(n,e){n.su.delete(e.path.canonicalString());const t=n.ou.get(e);t!==null&&(C1(n.remoteStore,t),n.ou=n.ou.remove(e),n._u.delete(t),Q1(n))}function DE(n,e,t){for(const r of t)r instanceof lD?(n.au.addReference(r.key,e),s7(n,r)):r instanceof cD?(re(F1,"Document no longer in limbo: "+r.key),n.au.removeReference(r.key,e),n.au.containsKey(r.key)||pD(n,r.key)):fe(19791,{Iu:r})}function s7(n,e){const t=e.key,r=t.path.canonicalString();n.ou.get(t)||n.su.has(r)||(re(F1,"New document in limbo: "+t),n.su.add(r),Q1(n))}function Q1(n){for(;n.su.size>0&&n.ou.size<n.maxConcurrentLimboResolutions;){const e=n.su.values().next().value;n.su.delete(e);const t=new ue(Je.fromString(e)),r=n.lu.next();n._u.set(r,new G8(t)),n.ou=n.ou.insert(t,r),nD(n.remoteStore,new qs(hi(Hg(t.path)),r,"TargetPurposeLimboResolution",Bg.le))}}async function xf(n,e,t){const r=ye(n),i=[],s=[],o=[];r.ru.isEmpty()||(r.ru.forEach((a,l)=>{o.push(r.Pu(l,e,t).then(c=>{var u;if((c||t)&&r.isPrimaryClient){const h=c?!c.fromCache:(u=t==null?void 0:t.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){i.push(c);const h=E1.Ps(l.targetId,c);s.push(h)}}))}),await Promise.all(o),r.nu.Q_(i),await async function(l,c){const u=ye(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>U.forEach(c,d=>U.forEach(d.ls,p=>u.persistence.referenceDelegate.addReference(h,d.targetId,p)).next(()=>U.forEach(d.hs,p=>u.persistence.referenceDelegate.removeReference(h,d.targetId,p)))))}catch(h){if(!Vc(h))throw h;re(k1,"Failed to update sequence numbers: "+h)}for(const h of c){const d=h.targetId;if(!h.fromCache){const p=u.Ss.get(d),g=p.snapshotVersion,y=p.withLastLimboFreeSnapshotVersion(g);u.Ss=u.Ss.insert(d,y)}}}(r.localStore,s))}async function o7(n,e){const t=ye(n);if(!t.currentUser.isEqual(e)){re(F1,"User change. New user:",e.toKey());const r=await JN(t.localStore,e);t.currentUser=e,function(s,o){s.cu.forEach(a=>{a.forEach(l=>{l.reject(new le(W.CANCELLED,o))})}),s.cu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await xf(t,r.Ms)}}function a7(n,e){const t=ye(n),r=t._u.get(e);if(r&&r.tu)return _e().add(r.key);{let i=_e();const s=t.iu.get(e);if(!s)return i;for(const o of s){const a=t.ru.get(o);i=i.unionWith(a.view.Wa)}return i}}function mD(n){const e=ye(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=hD.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=a7.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=n7.bind(null,e),e.nu.Q_=U8.bind(null,e.eventManager),e.nu.Tu=W8.bind(null,e.eventManager),e}function l7(n){const e=ye(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=r7.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=i7.bind(null,e),e}class Mm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Zg(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,t){return null}fu(e,t){return null}Vu(e){return f8(this.persistence,new c8,e.initialUser,this.serializer)}Ru(e){return new YN(_1.Ei,this.serializer)}Au(e){return new w8}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Mm.provider={build:()=>new Mm};class c7 extends Mm{constructor(e){super(),this.cacheSizeBytes=e}mu(e,t){Me(this.persistence.referenceDelegate instanceof Nm,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new G6(r,e.asyncQueue,t)}Ru(e){const t=this.cacheSizeBytes!==void 0?bn.withCacheSize(this.cacheSizeBytes):bn.DEFAULT;return new YN(r=>Nm.Ei(r,t),this.serializer)}}class jw{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>NE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=o7.bind(null,this.syncEngine),await j8(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new B8}()}createDatastore(e){const t=Zg(e.databaseInfo.databaseId),r=function(s){return new T8(s)}(e.databaseInfo);return function(s,o,a,l){return new C8(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,s,o,a){return new A8(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>NE(this.syncEngine,t,0),function(){return kE.C()?new kE:new O8}())}createSyncEngine(e,t){return function(i,s,o,a,l,c,u){const h=new X8(i,s,o,a,l,c);return u&&(h.hu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const s=ye(i);re(Pa,"RemoteStore shutting down."),s.aa.add(5),await Of(s),s.ca.shutdown(),s.la.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}jw.provider={build:()=>new jw};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):is("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To="FirestoreClient";class u7{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=nn.UNAUTHENTICATED,this.clientId=uN.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{re(To,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(re(To,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Hi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=N1(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function E0(n,e){n.asyncQueue.verifyOperationInProgress(),re(To,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await JN(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function ME(n,e){n.asyncQueue.verifyOperationInProgress();const t=await h7(n);re(To,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>PE(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>PE(e.remoteStore,i)),n._onlineComponents=e}async function h7(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){re(To,"Using user provided OfflineComponentProvider");try{await E0(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===W.FAILED_PRECONDITION||i.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;uc("Error using user provided cache. Falling back to memory cache: "+t),await E0(n,new Mm)}}else re(To,"Using default OfflineComponentProvider"),await E0(n,new c7(void 0));return n._offlineComponents}async function gD(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(re(To,"Using user provided OnlineComponentProvider"),await ME(n,n._uninitializedComponentsProvider._online)):(re(To,"Using default OnlineComponentProvider"),await ME(n,new jw))),n._onlineComponents}function f7(n){return gD(n).then(e=>e.syncEngine)}async function Lm(n){const e=await gD(n),t=e.eventManager;return t.onListen=K8.bind(null,e.syncEngine),t.onUnlisten=Z8.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Y8.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=e7.bind(null,e.syncEngine),t}function d7(n,e,t={}){const r=new Hi;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new $1({next:d=>{u.yu(),o.enqueueAndForget(()=>M1(s,h));const p=d.docs.has(a);!p&&d.fromCache?c.reject(new le(W.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&d.fromCache&&l&&l.source==="server"?c.reject(new le(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(d)},error:d=>c.reject(d)}),h=new V1(Hg(a.path),u,{includeMetadataChanges:!0,Fa:!0});return D1(s,h)}(await Lm(n),n.asyncQueue,e,t,r)),r.promise}function p7(n,e,t={}){const r=new Hi;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new $1({next:d=>{u.yu(),o.enqueueAndForget(()=>M1(s,h)),d.fromCache&&l.source==="server"?c.reject(new le(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(d)},error:d=>c.reject(d)}),h=new V1(a,u,{includeMetadataChanges:!0,Fa:!0});return D1(s,h)}(await Lm(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yD(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vD(n,e,t){if(!t)throw new le(W.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function m7(n,e,t,r){if(e===!0&&r===!0)throw new le(W.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function VE(n){if(!ue.isDocumentKey(n))throw new le(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function FE(n){if(ue.isDocumentKey(n))throw new le(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function j1(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":fe(12329,{type:typeof n})}function hr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new le(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=j1(n);throw new le(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD="firestore.googleapis.com",QE=!0;class $E{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new le(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=wD,this.ssl=QE}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:QE;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=KN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<q6)throw new le(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}m7("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yD((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new le(W.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new le(W.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new le(W.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ny{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $E({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $E(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Sq;switch(r.type){case"firstParty":return new Eq(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new le(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=LE.get(t);r&&(re("ComponentProvider","Removing Datastore"),LE.delete(t),r.terminate())}(this),Promise.resolve()}}function g7(n,e,t,r={}){var i;const s=(n=hr(n,ny))._getSettings(),o=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),a=`${e}:${t}`;s.host!==wD&&s.host!==a&&uc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=Object.assign(Object.assign({},s),{host:a,ssl:!1,emulatorOptions:r});if(!Ta(l,o)&&(n._setSettings(l),r.mockUserToken)){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=nn.MOCK_USER;else{c=IU(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new le(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new nn(h)}n._authCredentials=new bq(new lN(c,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Sf(this.firestore,e,this._query)}}class mn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new co(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mn(this.firestore,e,this._key)}}class co extends Sf{constructor(e,t,r){super(e,t,Hg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mn(this.firestore,null,new ue(e))}withConverter(e){return new co(this.firestore,e,this._path)}}function y7(n,e,...t){if(n=kt(n),vD("collection","path",e),n instanceof ny){const r=Je.fromString(e,...t);return FE(r),new co(n,null,r)}{if(!(n instanceof mn||n instanceof co))throw new le(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Je.fromString(e,...t));return FE(r),new co(n.firestore,null,r)}}function ry(n,e,...t){if(n=kt(n),arguments.length===1&&(e=uN.newId()),vD("doc","path",e),n instanceof ny){const r=Je.fromString(e,...t);return VE(r),new mn(n,null,new ue(r))}{if(!(n instanceof mn||n instanceof co))throw new le(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Je.fromString(e,...t));return VE(r),new mn(n.firestore,n instanceof co?n.converter:null,new ue(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE="AsyncQueue";class zE{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new eD(this,"async_queue_retry"),this.ju=()=>{const r=_0();r&&re(jE,"Visibility state changed to "+r.visibilityState),this.y_.A_()},this.Hu=e;const t=_0();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const t=_0();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});const t=new Hi;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}async Zu(){if(this.Qu.length!==0){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!Vc(e))throw e;re(jE,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}}Yu(e){const t=this.Hu.then(()=>(this.Wu=!0,e().catch(r=>{throw this.Ku=r,this.Wu=!1,is("INTERNAL UNHANDLED ERROR: ",BE(r)),r}).then(r=>(this.Wu=!1,r))));return this.Hu=t,t}enqueueAfterDelay(e,t,r){this.Ju(),this.zu.indexOf(e)>-1&&(t=0);const i=I1.createAndSchedule(this,e,t,r,s=>this.Xu(s));return this.Uu.push(i),i}Ju(){this.Ku&&fe(47125,{ec:BE(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do e=this.Hu,await e;while(e!==this.Hu)}nc(e){for(const t of this.Uu)if(t.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){const t=this.Uu.indexOf(e);this.Uu.splice(t,1)}}function BE(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UE(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}class Aa extends ny{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new zE,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new zE(e),this._firestoreClient=void 0,await e}}}function v7(n,e){const t=typeof n=="object"?n:v2(),r=typeof n=="string"?n:Em,i=i1(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=AU("firestore");s&&g7(i,...s)}return i}function iy(n){if(n._terminated)throw new le(W.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||w7(n),n._firestoreClient}function w7(n){var e,t,r;const i=n._freezeSettings(),s=function(a,l,c,u){return new jq(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,yD(u.experimentalLongPollingOptions),u.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new u7(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new gc(qt.fromBase64String(e))}catch(t){throw new le(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new gc(qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new le(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new le(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new le(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Oe(this._lat,e._lat)||Oe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O7=/^__.*__$/;class x7{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Fo(e,this.data,this.fieldMask,t,this.fieldTransforms):new vf(e,this.data,t,this.fieldTransforms)}}class OD{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Fo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function xD(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fe(40011,{oc:n})}}class W1{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this._c(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new W1(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ac({path:r,cc:!1});return i.lc(e),i}hc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ac({path:r,cc:!1});return i._c(),i}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return Vm(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(e.length===0)throw this.Tc("Document fields must not be empty");if(xD(this.oc)&&O7.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}}class S7{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Zg(e)}dc(e,t,r,i=!1){return new W1({oc:e,methodName:t,Ec:r,path:jt.emptyPath(),cc:!1,Ic:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function SD(n){const e=n._freezeSettings(),t=Zg(n._databaseId);return new S7(n._databaseId,!!e.ignoreUndefinedProperties,t)}function b7(n,e,t,r,i,s={}){const o=n.dc(s.merge||s.mergeFields?2:0,e,t,i);q1("Data must be an object, but it was:",o,r);const a=bD(r,o);let l,c;if(s.merge)l=new qn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const h of s.mergeFields){const d=zw(e,h,t);if(!o.contains(d))throw new le(W.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);_D(u,d)||u.push(d)}l=new qn(u),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new x7(new Cn(a),l,c)}class oy extends z1{_toFieldTransform(e){if(e.oc!==2)throw e.oc===1?e.Tc(`${this._methodName}() can only appear at the top level of your update data`):e.Tc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof oy}}function T7(n,e,t,r){const i=n.dc(1,e,t);q1("Data must be an object, but it was:",i,r);const s=[],o=Cn.empty();Vo(r,(l,c)=>{const u=H1(e,l,t);c=kt(c);const h=i.hc(u);if(c instanceof oy)s.push(u);else{const d=ay(c,h);d!=null&&(s.push(u),o.set(u,d))}});const a=new qn(s);return new OD(o,a,i.fieldTransforms)}function _7(n,e,t,r,i,s){const o=n.dc(1,e,t),a=[zw(e,r,t)],l=[i];if(s.length%2!=0)throw new le(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(zw(e,s[d])),l.push(s[d+1]);const c=[],u=Cn.empty();for(let d=a.length-1;d>=0;--d)if(!_D(c,a[d])){const p=a[d];let g=l[d];g=kt(g);const y=o.hc(p);if(g instanceof oy)c.push(p);else{const w=ay(g,y);w!=null&&(c.push(p),u.set(p,w))}}const h=new qn(c);return new OD(u,h,o.fieldTransforms)}function ay(n,e){if(TD(n=kt(n)))return q1("Unsupported field value:",e,n),bD(n,e);if(n instanceof z1)return function(r,i){if(!xD(i.oc))throw i.Tc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Tc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.cc&&e.oc!==4)throw e.Tc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=ay(a,i.Pc(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=kt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return h6(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=_t.fromDate(r);return{timestampValue:Im(i.serializer,s)}}if(r instanceof _t){const s=new _t(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Im(i.serializer,s)}}if(r instanceof B1)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof gc)return{bytesValue:BN(i.serializer,r._byteString)};if(r instanceof mn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Tc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:b1(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof U1)return function(o,a){return{mapValue:{fields:{[vN]:{stringValue:wN},[km]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Tc("VectorValues must only contain numeric values.");return O1(a.serializer,c)})}}}}}}(r,i);throw i.Tc(`Unsupported field value: ${j1(r)}`)}(n,e)}function bD(n,e){const t={};return fN(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Vo(n,(r,i)=>{const s=ay(i,e.uc(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function TD(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof _t||n instanceof B1||n instanceof gc||n instanceof mn||n instanceof z1||n instanceof U1)}function q1(n,e,t){if(!TD(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=j1(t);throw r==="an object"?e.Tc(n+" a custom object"):e.Tc(n+" "+r)}}function zw(n,e,t){if((e=kt(e))instanceof sy)return e._internalPath;if(typeof e=="string")return H1(n,e);throw Vm("Field path arguments must be of type string or ",n,!1,void 0,t)}const E7=new RegExp("[~\\*/\\[\\]]");function H1(n,e,t){if(e.search(E7)>=0)throw Vm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new sy(...e.split("."))._internalPath}catch{throw Vm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Vm(n,e,t,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new le(W.INVALID_ARGUMENT,a+n+l)}function _D(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new mn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new k7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(kD("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class k7 extends ED{data(){return super.data()}}function kD(n,e){return typeof e=="string"?H1(n,e):e instanceof sy?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CD(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new le(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class C7{convertValue(e,t="none"){switch(So(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(xo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw fe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Vo(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[km].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>ut(o.doubleValue));return new U1(s)}convertGeoPoint(e){return new B1(ut(e.latitude),ut(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Wg(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Rh(e));default:return null}}convertTimestamp(e){const t=Oo(e);return new _t(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Je.fromString(e);Me(XN(r),9688,{name:e});const i=new Ih(r.get(1),r.get(3)),s=new ue(r.popFirst(5));return i.isEqual(t)||is(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P7(n,e,t){let r;return r=n?n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class PD extends ED{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Tp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(kD("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Tp extends PD{data(e={}){return super.data(e)}}class AD{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Pu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Tp(this._firestore,this._userDataWriter,r.key,r,new Pu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new le(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Tp(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Pu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Tp(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Pu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:A7(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function A7(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fe(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RD(n){n=hr(n,mn);const e=hr(n.firestore,Aa);return d7(iy(e),n._key).then(t=>ND(e,n,t))}class G1 extends C7{constructor(e){super(),this.firestore=e}convertBytes(e){return new gc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new mn(this.firestore,null,t)}}function R7(n){n=hr(n,Sf);const e=hr(n.firestore,Aa),t=iy(e),r=new G1(e);return CD(n._query),p7(t,n._query).then(i=>new AD(e,r,n,i))}function I7(n,e,t){n=hr(n,mn);const r=hr(n.firestore,Aa),i=P7(n.converter,e);return ID(r,[b7(SD(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,fi.none())])}function N7(n,e,t,...r){n=hr(n,mn);const i=hr(n.firestore,Aa),s=SD(i);let o;return o=typeof(e=kt(e))=="string"||e instanceof sy?_7(s,"updateDoc",n._key,e,t,r):T7(s,"updateDoc",n._key,e),ID(i,[o.toMutation(n._key,fi.exists(!0))])}function D7(n,...e){var t,r,i;n=kt(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||UE(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(UE(e[o])){const h=e[o];e[o]=(t=h.next)===null||t===void 0?void 0:t.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let l,c,u;if(n instanceof mn)c=hr(n.firestore,Aa),u=Hg(n._key.path),l={next:h=>{e[o]&&e[o](ND(c,n,h))},error:e[o+1],complete:e[o+2]};else{const h=hr(n,Sf);c=hr(h.firestore,Aa),u=h._query;const d=new G1(c);l={next:p=>{e[o]&&e[o](new AD(c,d,h,p))},error:e[o+1],complete:e[o+2]},CD(n._query)}return function(d,p,g,y){const w=new $1(y),v=new V1(p,w,g);return d.asyncQueue.enqueueAndForget(async()=>D1(await Lm(d),v)),()=>{w.yu(),d.asyncQueue.enqueueAndForget(async()=>M1(await Lm(d),v))}}(iy(c),u,a,l)}function ID(n,e){return function(r,i){const s=new Hi;return r.asyncQueue.enqueueAndForget(async()=>t7(await f7(r),i,s)),s.promise}(iy(n),e)}function ND(n,e,t){const r=t.docs.get(e._key),i=new G1(n);return new PD(n,i,e._key,r,new Pu(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Mc=i})(Nc),lc(new _a("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Aa(new Tq(r.getProvider("auth-internal")),new kq(o,r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new le(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ih(c.options.projectId,u)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),ao(G_,X_,e),ao(G_,X_,"esm2017")})();const M7={apiKey:"AIzaSyDqg7rDC-uqyjDzY237owKsutO--mwbVDI",authDomain:"dailycodeapp-49ed5.firebaseapp.com",projectId:"dailycodeapp-49ed5",storageBucket:"dailycodeapp-49ed5.firebasestorage.app",messagingSenderId:"278175968722",appId:"1:278175968722:web:39de453654ad9a58e6ec0b"},DD=y2(M7),bf=v7(DD),Cd=Oq(DD),MD=k.createContext(null),L7=({children:n})=>{const[e,t]=k.useState(null),[r,i]=k.useState(!0),s=Mo(),{toast:o}=Mx();k.useEffect(()=>{const u=lW(Cd,h=>{t(h),i(!1)});return()=>u()},[]);const a=async(u,h,d)=>{i(!0);try{const g=(await nW(Cd,u,h)).user;if(!g)throw new Error("User creation failed.");await sW(g,{displayName:d}),await I7(ry(bf,"users",g.uid),{name:d,email:g.email,createdAt:new Date,challengesSolved:0,streak:0,progress:[]}),o({title:"Registration successful",description:`Welcome, ${d}!`}),s("/challenge")}catch(p){throw o({title:"Registration failed",description:p.message,variant:"destructive"}),p}finally{i(!1)}},l=async(u,h)=>{i(!0);try{await rW(Cd,u,h),o({title:"Login successful",description:"Welcome back!"}),s("/challenge")}catch(d){throw o({title:"Login failed",description:d.message,variant:"destructive"}),d}finally{i(!1)}},c=async()=>{await cW(Cd),t(null),s("/login"),o({title:"Logged out",description:"See you soon!"})};return A.jsx(MD.Provider,{value:{user:e,isAuthenticated:!!e,isLoading:r,register:a,login:l,logout:c},children:n})},Qc=()=>{const n=k.useContext(MD);if(!n)throw new Error("useAuth must be used inside AuthProvider");return n},V7=()=>{const{isAuthenticated:n}=Qc(),e=Mo();return k.useEffect(()=>{n&&e("/challenge")},[n,e]),A.jsxs("div",{className:"min-h-screen flex flex-col",children:[A.jsx("div",{className:"bg-primary text-white py-16",children:A.jsxs("div",{className:"container mx-auto px-4 text-center",children:[A.jsx("div",{className:"mx-auto mb-6",children:A.jsx(ai,{className:"h-16 w-16 inline-block"})}),A.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"CodeForge"}),A.jsx("p",{className:"text-xl mb-8 max-w-2xl mx-auto",children:"One coding challenge every day to improve your skills and maintain your streak."}),A.jsx(ts,{size:"lg",onClick:()=>e("/login"),className:"bg-white text-primary hover:bg-gray-100",children:"Get Started"})]})}),A.jsx("div",{className:"py-16 bg-white",children:A.jsxs("div",{className:"container mx-auto px-4",children:[A.jsx("h2",{className:"text-3xl font-bold text-center mb-12",children:"How It Works"}),A.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[A.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 text-center",children:[A.jsx("div",{className:"mx-auto mb-4 bg-primary/10 p-3 rounded-full w-16 h-16 flex items-center justify-center",children:A.jsx(ai,{className:"h-8 w-8 text-primary"})}),A.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Daily Challenges"}),A.jsx("p",{className:"text-gray-600",children:"Get a new coding problem every day to solve and practice your skills."})]}),A.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 text-center",children:[A.jsx("div",{className:"mx-auto mb-4 bg-primary/10 p-3 rounded-full w-16 h-16 flex items-center justify-center",children:A.jsx(iI,{className:"h-8 w-8 text-primary"})}),A.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Track Progress"}),A.jsx("p",{className:"text-gray-600",children:"Mark challenges as solved, unsolved, or skipped to track your journey."})]}),A.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 text-center",children:[A.jsx("div",{className:"mx-auto mb-4 bg-primary/10 p-3 rounded-full w-16 h-16 flex items-center justify-center",children:A.jsx(t$,{className:"h-8 w-8 text-primary"})}),A.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Build Streaks"}),A.jsx("p",{className:"text-gray-600",children:"Maintain your streak by solving problems daily and watch your skills grow."})]})]})]})}),A.jsx("div",{className:"py-16 bg-gray-50",children:A.jsxs("div",{className:"container mx-auto px-4 text-center",children:[A.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Ready to start coding?"}),A.jsx("p",{className:"text-xl text-gray-600 mb-8 max-w-2xl mx-auto",children:"Join today and start improving your coding skills one challenge at a time."}),A.jsx(ts,{size:"lg",onClick:()=>e("/login"),children:"Sign In"})]})}),A.jsx("footer",{className:"py-8 bg-gray-900 text-white mt-auto",children:A.jsxs("div",{className:"container mx-auto px-4 text-center",children:[A.jsx("div",{className:"flex justify-center mb-4",children:A.jsx(ai,{className:"h-6 w-6 text-white opacity-80"})}),A.jsxs("p",{className:"text-gray-400 text-sm",children:["© ",new Date().getFullYear()," CodeForge. All rights reserved."]})]})})]})},_o=k.forwardRef(({className:n,...e},t)=>A.jsx("div",{ref:t,className:Gt("rounded-lg border bg-card text-card-foreground shadow-sm",n),...e}));_o.displayName="Card";const Ra=k.forwardRef(({className:n,...e},t)=>A.jsx("div",{ref:t,className:Gt("flex flex-col space-y-1.5 p-6",n),...e}));Ra.displayName="CardHeader";const Ia=k.forwardRef(({className:n,...e},t)=>A.jsx("h3",{ref:t,className:Gt("text-2xl font-semibold leading-none tracking-tight",n),...e}));Ia.displayName="CardTitle";const X1=k.forwardRef(({className:n,...e},t)=>A.jsx("p",{ref:t,className:Gt("text-sm text-muted-foreground",n),...e}));X1.displayName="CardDescription";const Eo=k.forwardRef(({className:n,...e},t)=>A.jsx("div",{ref:t,className:Gt("p-6 pt-0",n),...e}));Eo.displayName="CardContent";const K1=k.forwardRef(({className:n,...e},t)=>A.jsx("div",{ref:t,className:Gt("flex items-center p-6 pt-0",n),...e}));K1.displayName="CardFooter";const Ll=k.forwardRef(({className:n,type:e,...t},r)=>A.jsx("input",{type:e,className:Gt("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:r,...t}));Ll.displayName="Input";var F7="Label",LD=k.forwardRef((n,e)=>A.jsx(Ht.label,{...n,ref:e,onMouseDown:t=>{var i;t.target.closest("button, input, select, textarea")||((i=n.onMouseDown)==null||i.call(n,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));LD.displayName=F7;var VD=LD;const Q7=jx("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Vl=k.forwardRef(({className:n,...e},t)=>A.jsx(VD,{ref:t,className:Gt(Q7(),n),...e}));Vl.displayName=VD.displayName;const $7=()=>{const[n,e]=k.useState(""),[t,r]=k.useState(""),[i,s]=k.useState(""),{login:o}=Qc(),a=Mo(),[l,c]=k.useState(!1),u=async h=>{h.preventDefault(),s(""),c(!0);try{await o(n,t),a("/challenge")}catch(d){s(d.message||"Failed to log in.")}c(!1)};return A.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50 px-4",children:A.jsxs("div",{className:"w-full max-w-md",children:[A.jsxs("div",{className:"text-center mb-8",children:[A.jsx("div",{className:"flex justify-center mb-2",children:A.jsx(ai,{className:"h-12 w-12 text-primary"})}),A.jsx("h1",{className:"text-3xl font-bold",children:"CodeForge"}),A.jsx("p",{className:"text-gray-600 mt-1",children:"One coding challenge every day"})]}),A.jsxs(_o,{children:[A.jsxs(Ra,{children:[A.jsx(Ia,{children:"Sign In"}),A.jsx(X1,{children:"Enter your credentials to access your account"})]}),A.jsxs("form",{onSubmit:u,children:[A.jsxs(Eo,{className:"space-y-4",children:[i&&A.jsx("div",{className:"text-red-500 text-sm",children:i}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(Vl,{htmlFor:"email",children:"Email"}),A.jsx(Ll,{id:"email",type:"email",placeholder:"you@example.com",value:n,onChange:h=>e(h.target.value),required:!0})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(Vl,{htmlFor:"password",children:"Password"}),A.jsx(Ll,{id:"password",type:"password",placeholder:"••••••••",value:t,onChange:h=>r(h.target.value),required:!0})]})]}),A.jsx(K1,{children:A.jsx(ts,{type:"submit",className:"w-full",disabled:l,children:l?"Signing in...":"Sign In"})})]})]}),A.jsx("div",{className:"text-center mt-6 text-sm text-gray-600",children:A.jsxs("p",{children:["Don't have an account? ",A.jsx(Wu,{to:"/register",className:"text-primary font-semibold",children:"Register"})]})})]})})},j7=async()=>{const n=await R7(y7(bf,"challenges")),e=[];return n.forEach(t=>{e.push({id:t.id,...t.data()})}),e},z7=async()=>{const n=await j7();if(n.length===0)return null;const t=new Date().getDate()%n.length;return n[t]},B7=async(n,e)=>{const t=ry(bf,"users",n),r=await RD(t);if(!r.exists())return console.warn("User not found in Firestore"),"unsolved";const i=r.data(),s=(i==null?void 0:i.progress)||[],o=new Date().toISOString().split("T")[0],a=s.find(l=>l.date===o);return a?a.status:"unsolved"},FD=()=>{const{isAuthenticated:n,logout:e}=Qc(),t=Ic();return n?A.jsx("nav",{className:"bg-white border-b border-gray-200 px-4 py-2.5 fixed w-full top-0 left-0 z-50",children:A.jsxs("div",{className:"flex flex-wrap justify-between items-center",children:[A.jsx("div",{className:"flex items-center",children:A.jsxs(Wu,{to:"/",className:"flex items-center",children:[A.jsx(ai,{className:"h-6 w-6 text-primary mr-2"}),A.jsx("span",{className:"self-center text-xl font-semibold whitespace-nowrap",children:"CodeForge"})]})}),A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsxs(Wu,{to:"/challenge",className:`flex items-center px-3 py-2 rounded-md ${t.pathname==="/challenge"?"text-white bg-primary":"text-gray-700 hover:bg-gray-100"}`,children:[A.jsx(ai,{className:"h-5 w-5 mr-1"}),A.jsx("span",{children:"Challenge"})]}),A.jsxs(Wu,{to:"/dashboard",className:`flex items-center px-3 py-2 rounded-md ${t.pathname==="/dashboard"?"text-white bg-primary":"text-gray-700 hover:bg-gray-100"}`,children:[A.jsx(n$,{className:"h-5 w-5 mr-1"}),A.jsx("span",{children:"Dashboard"})]}),A.jsxs(ts,{variant:"ghost",size:"sm",onClick:e,className:"text-gray-700 hover:bg-gray-100",children:[A.jsx(o$,{className:"h-4 w-4 mr-1"}),"Logout"]})]})]})}):null};function Bw(){return Bw=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Bw.apply(null,arguments)}function U7(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}let Uw=[],QD=[];(()=>{let n="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,t=0;e<n.length;e++)(e%2?QD:Uw).push(t=t+n[e])})();function W7(n){if(n<768)return!1;for(let e=0,t=Uw.length;;){let r=e+t>>1;if(n<Uw[r])t=r;else if(n>=QD[r])e=r+1;else return!0;if(e==t)return!1}}function WE(n){return n>=127462&&n<=127487}const qE=8205;function q7(n,e,t=!0,r=!0){return(t?$D:H7)(n,e,r)}function $D(n,e,t){if(e==n.length)return e;e&&jD(n.charCodeAt(e))&&zD(n.charCodeAt(e-1))&&e--;let r=k0(n,e);for(e+=HE(r);e<n.length;){let i=k0(n,e);if(r==qE||i==qE||t&&W7(i))e+=HE(i),r=i;else if(WE(i)){let s=0,o=e-2;for(;o>=0&&WE(k0(n,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function H7(n,e,t){for(;e>0;){let r=$D(n,e-2,t);if(r<e)return r;e--}return 0}function k0(n,e){let t=n.charCodeAt(e);if(!zD(t)||e+1==n.length)return t;let r=n.charCodeAt(e+1);return jD(r)?(t-55296<<10)+(r-56320)+65536:t}function jD(n){return n>=56320&&n<57344}function zD(n){return n>=55296&&n<56320}function HE(n){return n<65536?1:2}class Ce{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,r){[e,t]=yc(this,e,t);let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(t,this.length,i,1),Zr.from(i,this.length-(t-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=yc(this,e,t);let r=[];return this.decompose(e,t,r,0),Zr.from(r,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new Yu(this),s=new Yu(e);for(let o=t,a=t;;){if(i.next(o),s.next(o),o=0,i.lineBreak!=s.lineBreak||i.done!=s.done||i.value!=s.value)return!1;if(a+=i.value.length,i.done||a>=r)return!0}}iter(e=1){return new Yu(this,e)}iterRange(e,t=this.length){return new BD(this,e,t)}iterLines(e,t){let r;if(e==null)r=this.iter();else{t==null&&(t=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new UD(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Ce.empty:e.length<=32?new ct(e):Zr.from(ct.split(e,[]))}}class ct extends Ce{constructor(e,t=G7(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,r,i){for(let s=0;;s++){let o=this.text[s],a=i+o.length;if((t?r:a)>=e)return new X7(i,a,r,o);i=a+1,r++}}decompose(e,t,r,i){let s=e<=0&&t>=this.length?this:new ct(GE(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(i&1){let o=r.pop(),a=_p(s.text,o.text.slice(),0,s.length);if(a.length<=32)r.push(new ct(a,o.length+s.length));else{let l=a.length>>1;r.push(new ct(a.slice(0,l)),new ct(a.slice(l)))}}else r.push(s)}replace(e,t,r){if(!(r instanceof ct))return super.replace(e,t,r);[e,t]=yc(this,e,t);let i=_p(this.text,_p(r.text,GE(this.text,0,e)),t),s=this.length+r.length-(t-e);return i.length<=32?new ct(i,s):Zr.from(ct.split(i,[]),s)}sliceString(e,t=this.length,r=`
`){[e,t]=yc(this,e,t);let i="";for(let s=0,o=0;s<=t&&o<this.text.length;o++){let a=this.text[o],l=s+a.length;s>e&&o&&(i+=r),e<l&&t>s&&(i+=a.slice(Math.max(0,e-s),t-s)),s=l+1}return i}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let r=[],i=-1;for(let s of e)r.push(s),i+=s.length+1,r.length==32&&(t.push(new ct(r,i)),r=[],i=-1);return i>-1&&t.push(new ct(r,i)),t}}class Zr extends Ce{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,t,r,i){for(let s=0;;s++){let o=this.children[s],a=i+o.length,l=r+o.lines-1;if((t?l:a)>=e)return o.lineInner(e,t,r,i);i=a+1,r=l+1}}decompose(e,t,r,i){for(let s=0,o=0;o<=t&&s<this.children.length;s++){let a=this.children[s],l=o+a.length;if(e<=l&&t>=o){let c=i&((o<=e?1:0)|(l>=t?2:0));o>=e&&l<=t&&!c?r.push(a):a.decompose(e-o,t-o,r,c)}o=l+1}}replace(e,t,r){if([e,t]=yc(this,e,t),r.lines<this.lines)for(let i=0,s=0;i<this.children.length;i++){let o=this.children[i],a=s+o.length;if(e>=s&&t<=a){let l=o.replace(e-s,t-s,r),c=this.lines-o.lines+l.lines;if(l.lines<c>>4&&l.lines>c>>6){let u=this.children.slice();return u[i]=l,new Zr(u,this.length-(t-e)+r.length)}return super.replace(s,a,l)}s=a+1}return super.replace(e,t,r)}sliceString(e,t=this.length,r=`
`){[e,t]=yc(this,e,t);let i="";for(let s=0,o=0;s<this.children.length&&o<=t;s++){let a=this.children[s],l=o+a.length;o>e&&s&&(i+=r),e<l&&t>o&&(i+=a.sliceString(e-o,t-o,r)),o=l+1}return i}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof Zr))return 0;let r=0,[i,s,o,a]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=t,s+=t){if(i==o||s==a)return r;let l=this.children[i],c=e.children[s];if(l!=c)return r+l.scanIdentical(c,t);r+=l.length+1}}static from(e,t=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let p of e)r+=p.lines;if(r<32){let p=[];for(let g of e)g.flatten(p);return new ct(p,t)}let i=Math.max(32,r>>5),s=i<<1,o=i>>1,a=[],l=0,c=-1,u=[];function h(p){let g;if(p.lines>s&&p instanceof Zr)for(let y of p.children)h(y);else p.lines>o&&(l>o||!l)?(d(),a.push(p)):p instanceof ct&&l&&(g=u[u.length-1])instanceof ct&&p.lines+g.lines<=32?(l+=p.lines,c+=p.length+1,u[u.length-1]=new ct(g.text.concat(p.text),g.length+1+p.length)):(l+p.lines>i&&d(),l+=p.lines,c+=p.length+1,u.push(p))}function d(){l!=0&&(a.push(u.length==1?u[0]:Zr.from(u,c)),c=-1,l=u.length=0)}for(let p of e)h(p);return d(),a.length==1?a[0]:new Zr(a,t)}}Ce.empty=new ct([""],0);function G7(n){let e=-1;for(let t of n)e+=t.length+1;return e}function _p(n,e,t=0,r=1e9){for(let i=0,s=0,o=!0;s<n.length&&i<=r;s++){let a=n[s],l=i+a.length;l>=t&&(l>r&&(a=a.slice(0,r-i)),i<t&&(a=a.slice(t-i)),o?(e[e.length-1]+=a,o=!1):e.push(a)),i=l+1}return e}function GE(n,e,t){return _p(n,[""],e,t)}class Yu{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof ct?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],s=this.offsets[r],o=s>>1,a=i instanceof ct?i.text.length:i.children.length;if(o==(t>0?a:0)){if(r==0)return this.done=!0,this.value="",this;t>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(t>0?0:1)){if(this.offsets[r]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof ct){let l=i.text[o+(t<0?-1:0)];if(this.offsets[r]+=t,l.length>Math.max(0,e))return this.value=e==0?l:t>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=i.children[o+(t<0?-1:0)];e>l.length?(e-=l.length,this.offsets[r]+=t):(t<0&&this.offsets[r]--,this.nodes.push(l),this.offsets.push(t>0?1:(l instanceof ct?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class BD{constructor(e,t,r){this.value="",this.done=!1,this.cursor=new Yu(e,t>r?-1:1),this.pos=t>r?e.length:0,this.from=Math.min(t,r),this.to=Math.max(t,r)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let r=t<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*t,this.value=i.length<=r?i:t<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class UD{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:r,value:i}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Ce.prototype[Symbol.iterator]=function(){return this.iter()},Yu.prototype[Symbol.iterator]=BD.prototype[Symbol.iterator]=UD.prototype[Symbol.iterator]=function(){return this});class X7{constructor(e,t,r,i){this.from=e,this.to=t,this.number=r,this.text=i}get length(){return this.to-this.from}}function yc(n,e,t){return e=Math.max(0,Math.min(n.length,e)),[e,Math.max(e,Math.min(n.length,t))]}function Bt(n,e,t=!0,r=!0){return q7(n,e,t,r)}function K7(n){return n>=56320&&n<57344}function Y7(n){return n>=55296&&n<56320}function _n(n,e){let t=n.charCodeAt(e);if(!Y7(t)||e+1==n.length)return t;let r=n.charCodeAt(e+1);return K7(r)?(t-55296<<10)+(r-56320)+65536:t}function Y1(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode((n>>10)+55296,(n&1023)+56320))}function ei(n){return n<65536?1:2}const Ww=/\r\n?|\n/;var zt=function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n}(zt||(zt={}));class pi{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t+1];e+=r<0?this.sections[t]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,r=0,i=0;t<this.sections.length;){let s=this.sections[t++],o=this.sections[t++];o<0?(e(r,i,s),i+=s):i+=o,r+=s}}iterChangedRanges(e,t=!1){qw(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let r=this.sections[t++],i=this.sections[t++];i<0?e.push(r,i):e.push(i,r)}return new pi(e)}composeDesc(e){return this.empty?e:e.empty?this:WD(this,e)}mapDesc(e,t=!1){return e.empty?this:Hw(this,e,t)}mapPos(e,t=-1,r=zt.Simple){let i=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],c=i+a;if(l<0){if(c>e)return s+(e-i);s+=a}else{if(r!=zt.Simple&&c>=e&&(r==zt.TrackDel&&i<e&&c>e||r==zt.TrackBefore&&i<e||r==zt.TrackAfter&&c>e))return null;if(c>e||c==e&&t<0&&!a)return e==i||t<0?s:s+l;s+=l}i=c}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return s}touchesRange(e,t=e){for(let r=0,i=0;r<this.sections.length&&i<=t;){let s=this.sections[r++],o=this.sections[r++],a=i+s;if(o>=0&&i<=t&&a>=e)return i<e&&a>t?"cover":!0;i=a}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let r=this.sections[t++],i=this.sections[t++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new pi(e)}static create(e){return new pi(e)}}class Ot extends pi{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return qw(this,(t,r,i,s,o)=>e=e.replace(i,i+(r-t),o),!1),e}mapDesc(e,t=!1){return Hw(this,e,t,!0)}invert(e){let t=this.sections.slice(),r=[];for(let i=0,s=0;i<t.length;i+=2){let o=t[i],a=t[i+1];if(a>=0){t[i]=a,t[i+1]=o;let l=i>>1;for(;r.length<l;)r.push(Ce.empty);r.push(o?e.slice(s,s+o):Ce.empty)}s+=o}return new Ot(t,r)}compose(e){return this.empty?e:e.empty?this:WD(this,e,!0)}map(e,t=!1){return e.empty?this:Hw(this,e,t,!0)}iterChanges(e,t=!1){qw(this,e,t)}get desc(){return pi.create(this.sections)}filter(e){let t=[],r=[],i=[],s=new Lh(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&s.len==0;){if(s.done)break e;let u=Math.min(s.len,l-a);rn(i,u,-1);let h=s.ins==-1?-1:s.off==0?s.ins:0;rn(t,u,h),h>0&&Hs(r,t,s.text),s.forward(u),a+=u}let c=e[o++];for(;a<c;){if(s.done)break e;let u=Math.min(s.len,c-a);rn(t,u,-1),rn(i,u,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(u),a+=u}}return{changes:new Ot(t,r),filtered:pi.create(i)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t],i=this.sections[t+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,r){let i=[],s=[],o=0,a=null;function l(u=!1){if(!u&&!i.length)return;o<t&&rn(i,t-o,-1);let h=new Ot(i,s);a=a?a.compose(h.map(a)):h,i=[],s=[],o=0}function c(u){if(Array.isArray(u))for(let h of u)c(h);else if(u instanceof Ot){if(u.length!=t)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${t})`);l(),a=a?a.compose(u.map(a)):u}else{let{from:h,to:d=h,insert:p}=u;if(h>d||h<0||d>t)throw new RangeError(`Invalid change range ${h} to ${d} (in doc of length ${t})`);let g=p?typeof p=="string"?Ce.of(p.split(r||Ww)):p:Ce.empty,y=g.length;if(h==d&&y==0)return;h<o&&l(),h>o&&rn(i,h-o,-1),rn(i,d-h,y),Hs(s,i,g),o=d}}return c(e),l(!a),a}static empty(e){return new Ot(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],r=[];for(let i=0;i<e.length;i++){let s=e[i];if(typeof s=="number")t.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)t.push(s[0],0);else{for(;r.length<i;)r.push(Ce.empty);r[i]=Ce.of(s.slice(1)),t.push(s[0],r[i].length)}}}return new Ot(t,r)}static createSet(e,t){return new Ot(e,t)}}function rn(n,e,t,r=!1){if(e==0&&t<=0)return;let i=n.length-2;i>=0&&t<=0&&t==n[i+1]?n[i]+=e:i>=0&&e==0&&n[i]==0?n[i+1]+=t:r?(n[i]+=e,n[i+1]+=t):n.push(e,t)}function Hs(n,e,t){if(t.length==0)return;let r=e.length-2>>1;if(r<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<r;)n.push(Ce.empty);n.push(t)}}function qw(n,e,t){let r=n.inserted;for(let i=0,s=0,o=0;o<n.sections.length;){let a=n.sections[o++],l=n.sections[o++];if(l<0)i+=a,s+=a;else{let c=i,u=s,h=Ce.empty;for(;c+=a,u+=l,l&&r&&(h=h.append(r[o-2>>1])),!(t||o==n.sections.length||n.sections[o+1]<0);)a=n.sections[o++],l=n.sections[o++];e(i,c,s,u,h),i=c,s=u}}}function Hw(n,e,t,r=!1){let i=[],s=r?[]:null,o=new Lh(n),a=new Lh(e);for(let l=-1;;){if(o.done&&a.len||a.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&a.ins==-1){let c=Math.min(o.len,a.len);rn(i,c,-1),o.forward(c),a.forward(c)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!t))){let c=a.len;for(rn(i,a.ins,-1);c;){let u=Math.min(o.len,c);o.ins>=0&&l<o.i&&o.len<=u&&(rn(i,0,o.ins),s&&Hs(s,i,o.text),l=o.i),o.forward(u),c-=u}a.next()}else if(o.ins>=0){let c=0,u=o.len;for(;u;)if(a.ins==-1){let h=Math.min(u,a.len);c+=h,u-=h,a.forward(h)}else if(a.ins==0&&a.len<u)u-=a.len,a.next();else break;rn(i,c,l<o.i?o.ins:0),s&&l<o.i&&Hs(s,i,o.text),l=o.i,o.forward(o.len-u)}else{if(o.done&&a.done)return s?Ot.createSet(i,s):pi.create(i);throw new Error("Mismatched change set lengths")}}}function WD(n,e,t=!1){let r=[],i=t?[]:null,s=new Lh(n),o=new Lh(e);for(let a=!1;;){if(s.done&&o.done)return i?Ot.createSet(r,i):pi.create(r);if(s.ins==0)rn(r,s.len,0,a),s.next();else if(o.len==0&&!o.done)rn(r,0,o.ins,a),i&&Hs(i,r,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(s.len2,o.len),c=r.length;if(s.ins==-1){let u=o.ins==-1?-1:o.off?0:o.ins;rn(r,l,u,a),i&&u&&Hs(i,r,o.text)}else o.ins==-1?(rn(r,s.off?0:s.len,l,a),i&&Hs(i,r,s.textBit(l))):(rn(r,s.off?0:s.len,o.off?0:o.ins,a),i&&!o.off&&Hs(i,r,o.text));a=(s.ins>l||o.ins>=0&&o.len>l)&&(a||r.length>c),s.forward2(l),o.forward(l)}}}}class Lh{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Ce.empty:e[t]}textBit(e){let{inserted:t}=this.set,r=this.i-2>>1;return r>=t.length&&!e?Ce.empty:t[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class aa{constructor(e,t,r){this.from=e,this.to=t,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,t):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new aa(r,i,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return B.range(e,t);let r=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return B.range(this.anchor,r)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return B.range(e.anchor,e.head)}static create(e,t,r){return new aa(e,t,r)}}class B{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:B.create(this.ranges.map(r=>r.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new B([this.main],0)}addRange(e,t=!0){return B.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let r=this.ranges.slice();return r[t]=e,B.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new B(e.ranges.map(t=>aa.fromJSON(t)),e.main)}static single(e,t=e){return new B([B.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let s=e[i];if(s.empty?s.from<=r:s.from<r)return B.normalized(e.slice(),t);r=s.to}return new B(e,t)}static cursor(e,t=0,r,i){return aa.create(e,e,(t==0?0:t<0?8:16)|(r==null?7:Math.min(6,r))|(i??16777215)<<6)}static range(e,t,r,i){let s=(r??16777215)<<6|(i==null?7:Math.min(6,i));return t<e?aa.create(t,e,48|s):aa.create(e,t,(t>e?8:0)|s)}static normalized(e,t=0){let r=e[t];e.sort((i,s)=>i.from-s.from),t=e.indexOf(r);for(let i=1;i<e.length;i++){let s=e[i],o=e[i-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,l=Math.max(s.to,o.to);i<=t&&t--,e.splice(--i,2,s.anchor>s.head?B.range(l,a):B.range(a,l))}}return new B(e,t)}}function qD(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let J1=0;class ne{constructor(e,t,r,i,s){this.combine=e,this.compareInput=t,this.compare=r,this.isStatic=i,this.id=J1++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new ne(e.combine||(t=>t),e.compareInput||((t,r)=>t===r),e.compare||(e.combine?(t,r)=>t===r:Z1),!!e.static,e.enables)}of(e){return new Ep([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Ep(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Ep(e,this,2,t)}from(e,t){return t||(t=r=>r),this.compute([e],r=>t(r.field(e)))}}function Z1(n,e){return n==e||n.length==e.length&&n.every((t,r)=>t===e[r])}class Ep{constructor(e,t,r,i){this.dependencies=e,this.facet=t,this.type=r,this.value=i,this.id=J1++}dynamicSlot(e){var t;let r=this.value,i=this.facet.compareInput,s=this.id,o=e[s]>>1,a=this.type==2,l=!1,c=!1,u=[];for(let h of this.dependencies)h=="doc"?l=!0:h=="selection"?c=!0:((t=e[h.id])!==null&&t!==void 0?t:1)&1||u.push(e[h.id]);return{create(h){return h.values[o]=r(h),1},update(h,d){if(l&&d.docChanged||c&&(d.docChanged||d.selection)||Gw(h,u)){let p=r(h);if(a?!XE(p,h.values[o],i):!i(p,h.values[o]))return h.values[o]=p,1}return 0},reconfigure:(h,d)=>{let p,g=d.config.address[s];if(g!=null){let y=Qm(d,g);if(this.dependencies.every(w=>w instanceof ne?d.facet(w)===h.facet(w):w instanceof Nt?d.field(w,!1)==h.field(w,!1):!0)||(a?XE(p=r(h),y,i):i(p=r(h),y)))return h.values[o]=y,0}else p=r(h);return h.values[o]=p,1}}}}function XE(n,e,t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!t(n[r],e[r]))return!1;return!0}function Gw(n,e){let t=!1;for(let r of e)Ju(n,r)&1&&(t=!0);return t}function J7(n,e,t){let r=t.map(l=>n[l.id]),i=t.map(l=>l.type),s=r.filter(l=>!(l&1)),o=n[e.id]>>1;function a(l){let c=[];for(let u=0;u<r.length;u++){let h=Qm(l,r[u]);if(i[u]==2)for(let d of h)c.push(d);else c.push(h)}return e.combine(c)}return{create(l){for(let c of r)Ju(l,c);return l.values[o]=a(l),1},update(l,c){if(!Gw(l,s))return 0;let u=a(l);return e.compare(u,l.values[o])?0:(l.values[o]=u,1)},reconfigure(l,c){let u=Gw(l,r),h=c.config.facets[e.id],d=c.facet(e);if(h&&!u&&Z1(t,h))return l.values[o]=d,0;let p=a(l);return e.compare(p,d)?(l.values[o]=d,0):(l.values[o]=p,1)}}}const Pd=ne.define({static:!0});class Nt{constructor(e,t,r,i,s){this.id=e,this.createF=t,this.updateF=r,this.compareF=i,this.spec=s,this.provides=void 0}static define(e){let t=new Nt(J1++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(Pd).find(r=>r.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:r=>(r.values[t]=this.create(r),1),update:(r,i)=>{let s=r.values[t],o=this.updateF(s,i);return this.compareF(s,o)?0:(r.values[t]=o,1)},reconfigure:(r,i)=>{let s=r.facet(Pd),o=i.facet(Pd),a;return(a=s.find(l=>l.field==this))&&a!=o.find(l=>l.field==this)?(r.values[t]=a.create(r),1):i.config.address[this.id]!=null?(r.values[t]=i.field(this),0):(r.values[t]=this.create(r),1)}}}init(e){return[this,Pd.of({field:this,create:e})]}get extension(){return this}}const ta={lowest:4,low:3,default:2,high:1,highest:0};function du(n){return e=>new HD(e,n)}const Qo={highest:du(ta.highest),high:du(ta.high),default:du(ta.default),low:du(ta.low),lowest:du(ta.lowest)};class HD{constructor(e,t){this.inner=e,this.prec=t}}class ly{of(e){return new Xw(this,e)}reconfigure(e){return ly.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Xw{constructor(e,t){this.compartment=e,this.inner=t}}class Fm{constructor(e,t,r,i,s,o){for(this.base=e,this.compartments=t,this.dynamicSlots=r,this.address=i,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,r){let i=[],s=Object.create(null),o=new Map;for(let d of Z7(e,t,o))d instanceof Nt?i.push(d):(s[d.facet.id]||(s[d.facet.id]=[])).push(d);let a=Object.create(null),l=[],c=[];for(let d of i)a[d.id]=c.length<<1,c.push(p=>d.slot(p));let u=r==null?void 0:r.config.facets;for(let d in s){let p=s[d],g=p[0].facet,y=u&&u[d]||[];if(p.every(w=>w.type==0))if(a[g.id]=l.length<<1|1,Z1(y,p))l.push(r.facet(g));else{let w=g.combine(p.map(v=>v.value));l.push(r&&g.compare(w,r.facet(g))?r.facet(g):w)}else{for(let w of p)w.type==0?(a[w.id]=l.length<<1|1,l.push(w.value)):(a[w.id]=c.length<<1,c.push(v=>w.dynamicSlot(v)));a[g.id]=c.length<<1,c.push(w=>J7(w,g,p))}}let h=c.map(d=>d(a));return new Fm(e,o,h,a,l,s)}}function Z7(n,e,t){let r=[[],[],[],[],[]],i=new Map;function s(o,a){let l=i.get(o);if(l!=null){if(l<=a)return;let c=r[l].indexOf(o);c>-1&&r[l].splice(c,1),o instanceof Xw&&t.delete(o.compartment)}if(i.set(o,a),Array.isArray(o))for(let c of o)s(c,a);else if(o instanceof Xw){if(t.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=e.get(o.compartment)||o.inner;t.set(o.compartment,c),s(c,a)}else if(o instanceof HD)s(o.inner,o.prec);else if(o instanceof Nt)r[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof Ep)r[a].push(o),o.facet.extensions&&s(o.facet.extensions,ta.default);else{let c=o.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(c,a)}}return s(n,ta.default),r.reduce((o,a)=>o.concat(a))}function Ju(n,e){if(e&1)return 2;let t=e>>1,r=n.status[t];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;n.status[t]=4;let i=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|i}function Qm(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const GD=ne.define(),Kw=ne.define({combine:n=>n.some(e=>e),static:!0}),XD=ne.define({combine:n=>n.length?n[0]:void 0,static:!0}),KD=ne.define(),YD=ne.define(),JD=ne.define(),ZD=ne.define({combine:n=>n.length?n[0]:!1});class Oi{constructor(e,t){this.type=e,this.value=t}static define(){return new eH}}class eH{of(e){return new Oi(this,e)}}class tH{constructor(e){this.map=e}of(e){return new ge(this,e)}}class ge{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new ge(this.type,t)}is(e){return this.type==e}static define(e={}){return new tH(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let r=[];for(let i of e){let s=i.map(t);s&&r.push(s)}return r}}ge.reconfigure=ge.define();ge.appendConfig=ge.define();class gt{constructor(e,t,r,i,s,o){this.startState=e,this.changes=t,this.selection=r,this.effects=i,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,r&&qD(r,t.newLength),s.some(a=>a.type==gt.time)||(this.annotations=s.concat(gt.time.of(Date.now())))}static create(e,t,r,i,s,o){return new gt(e,t,r,i,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(gt.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}gt.time=Oi.define();gt.userEvent=Oi.define();gt.addToHistory=Oi.define();gt.remote=Oi.define();function nH(n,e){let t=[];for(let r=0,i=0;;){let s,o;if(r<n.length&&(i==e.length||e[i]>=n[r]))s=n[r++],o=n[r++];else if(i<e.length)s=e[i++],o=e[i++];else return t;!t.length||t[t.length-1]<s?t.push(s,o):t[t.length-1]<o&&(t[t.length-1]=o)}}function eM(n,e,t){var r;let i,s,o;return t?(i=e.changes,s=Ot.empty(e.changes.length),o=n.changes.compose(e.changes)):(i=e.changes.map(n.changes),s=n.changes.mapDesc(e.changes,!0),o=n.changes.compose(i)),{changes:o,selection:e.selection?e.selection.map(s):(r=n.selection)===null||r===void 0?void 0:r.map(i),effects:ge.mapEffects(n.effects,i).concat(ge.mapEffects(e.effects,s)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function Yw(n,e,t){let r=e.selection,i=Fl(e.annotations);return e.userEvent&&(i=i.concat(gt.userEvent.of(e.userEvent))),{changes:e.changes instanceof Ot?e.changes:Ot.of(e.changes||[],t,n.facet(XD)),selection:r&&(r instanceof B?r:B.single(r.anchor,r.head)),effects:Fl(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function tM(n,e,t){let r=Yw(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(t=!1);let o=!!e[s].sequential;r=eM(r,Yw(n,e[s],o?r.changes.newLength:n.doc.length),o)}let i=gt.create(n,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return iH(t?rH(i):i)}function rH(n){let e=n.startState,t=!0;for(let i of e.facet(KD)){let s=i(n);if(s===!1){t=!1;break}Array.isArray(s)&&(t=t===!0?s:nH(t,s))}if(t!==!0){let i,s;if(t===!1)s=n.changes.invertedDesc,i=Ot.empty(e.doc.length);else{let o=n.changes.filter(t);i=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}n=gt.create(e,i,n.selection&&n.selection.map(s),ge.mapEffects(n.effects,s),n.annotations,n.scrollIntoView)}let r=e.facet(YD);for(let i=r.length-1;i>=0;i--){let s=r[i](n);s instanceof gt?n=s:Array.isArray(s)&&s.length==1&&s[0]instanceof gt?n=s[0]:n=tM(e,Fl(s),!1)}return n}function iH(n){let e=n.startState,t=e.facet(JD),r=n;for(let i=t.length-1;i>=0;i--){let s=t[i](n);s&&Object.keys(s).length&&(r=eM(r,Yw(e,s,n.changes.newLength),!0))}return r==n?n:gt.create(e,n.changes,n.selection,r.effects,r.annotations,r.scrollIntoView)}const sH=[];function Fl(n){return n==null?sH:Array.isArray(n)?n:[n]}var Ze=function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n}(Ze||(Ze={}));const oH=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Jw;try{Jw=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function aH(n){if(Jw)return Jw.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||oH.test(t)))return!0}return!1}function lH(n){return e=>{if(!/\S/.test(e))return Ze.Space;if(aH(e))return Ze.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return Ze.Word;return Ze.Other}}class Ee{constructor(e,t,r,i,s,o){this.config=e,this.doc=t,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)Ju(this,a<<1);this.computeSlot=null}field(e,t=!0){let r=this.config.address[e.id];if(r==null){if(t)throw new RangeError("Field is not present in this state");return}return Ju(this,r),Qm(this,r)}update(...e){return tM(this,e,!0)}applyTransaction(e){let t=this.config,{base:r,compartments:i}=t;for(let a of e.effects)a.is(ly.reconfigure)?(t&&(i=new Map,t.compartments.forEach((l,c)=>i.set(c,l)),t=null),i.set(a.value.compartment,a.value.extension)):a.is(ge.reconfigure)?(t=null,r=a.value):a.is(ge.appendConfig)&&(t=null,r=Fl(r).concat(a.value));let s;t?s=e.startState.values.slice():(t=Fm.resolve(r,i,this),s=new Ee(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(l,c)=>c.reconfigure(l,this),null).values);let o=e.startState.facet(Kw)?e.newSelection:e.newSelection.asSingle();new Ee(t,e.newDoc,o,s,(a,l)=>l.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:B.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,r=e(t.ranges[0]),i=this.changes(r.changes),s=[r.range],o=Fl(r.effects);for(let a=1;a<t.ranges.length;a++){let l=e(t.ranges[a]),c=this.changes(l.changes),u=c.map(i);for(let d=0;d<a;d++)s[d]=s[d].map(u);let h=i.mapDesc(c,!0);s.push(l.range.map(h)),i=i.compose(u),o=ge.mapEffects(o,u).concat(ge.mapEffects(Fl(l.effects),h))}return{changes:i,selection:B.create(s,t.mainIndex),effects:o}}changes(e=[]){return e instanceof Ot?e:Ot.of(e,this.doc.length,this.facet(Ee.lineSeparator))}toText(e){return Ce.of(e.split(this.facet(Ee.lineSeparator)||Ww))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(Ju(this,t),Qm(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof Nt&&this.config.address[i.id]!=null&&(t[r]=i.spec.toJSON(this.field(e[r]),this))}return t}static fromJSON(e,t={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let s in r)if(Object.prototype.hasOwnProperty.call(e,s)){let o=r[s],a=e[s];i.push(o.init(l=>o.spec.fromJSON(a,l)))}}return Ee.create({doc:e.doc,selection:B.fromJSON(e.selection),extensions:t.extensions?i.concat([t.extensions]):i})}static create(e={}){let t=Fm.resolve(e.extensions||[],new Map),r=e.doc instanceof Ce?e.doc:Ce.of((e.doc||"").split(t.staticFacet(Ee.lineSeparator)||Ww)),i=e.selection?e.selection instanceof B?e.selection:B.single(e.selection.anchor,e.selection.head):B.single(0);return qD(i,r.length),t.staticFacet(Kw)||(i=i.asSingle()),new Ee(t,r,i,t.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(Ee.tabSize)}get lineBreak(){return this.facet(Ee.lineSeparator)||`
`}get readOnly(){return this.facet(ZD)}phrase(e,...t){for(let r of this.facet(Ee.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let s=+(i||1);return!s||s>t.length?r:t[s-1]})),e}languageDataAt(e,t,r=-1){let i=[];for(let s of this.facet(GD))for(let o of s(this,t,r))Object.prototype.hasOwnProperty.call(o,e)&&i.push(o[e]);return i}charCategorizer(e){return lH(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:r,length:i}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-r,a=e-r;for(;o>0;){let l=Bt(t,o,!1);if(s(t.slice(l,o))!=Ze.Word)break;o=l}for(;a<i;){let l=Bt(t,a);if(s(t.slice(a,l))!=Ze.Word)break;a=l}return o==a?null:B.range(o+r,a+r)}}Ee.allowMultipleSelections=Kw;Ee.tabSize=ne.define({combine:n=>n.length?n[0]:4});Ee.lineSeparator=XD;Ee.readOnly=ZD;Ee.phrases=ne.define({compare(n,e){let t=Object.keys(n),r=Object.keys(e);return t.length==r.length&&t.every(i=>n[i]==e[i])}});Ee.languageData=GD;Ee.changeFilter=KD;Ee.transactionFilter=YD;Ee.transactionExtender=JD;ly.reconfigure=ge.define();function xi(n,e,t={}){let r={};for(let i of n)for(let s of Object.keys(i)){let o=i[s],a=r[s];if(a===void 0)r[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(t,s))r[s]=t[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}class Na{eq(e){return this==e}range(e,t=e){return Zw.create(e,t,this)}}Na.prototype.startSide=Na.prototype.endSide=0;Na.prototype.point=!1;Na.prototype.mapMode=zt.TrackDel;let Zw=class nM{constructor(e,t,r){this.from=e,this.to=t,this.value=r}static create(e,t,r){return new nM(e,t,r)}};function eO(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class eS{constructor(e,t,r,i){this.from=e,this.to=t,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,t,r,i=0){let s=r?this.to:this.from;for(let o=i,a=s.length;;){if(o==a)return o;let l=o+a>>1,c=s[l]-e||(r?this.value[l].endSide:this.value[l].startSide)-t;if(l==o)return c>=0?o:a;c>=0?a=l:o=l+1}}between(e,t,r,i){for(let s=this.findIndex(t,-1e9,!0),o=this.findIndex(r,1e9,!1,s);s<o;s++)if(i(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,t){let r=[],i=[],s=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let c=this.value[l],u=this.from[l]+e,h=this.to[l]+e,d,p;if(u==h){let g=t.mapPos(u,c.startSide,c.mapMode);if(g==null||(d=p=g,c.startSide!=c.endSide&&(p=t.mapPos(u,c.endSide),p<d)))continue}else if(d=t.mapPos(u,c.startSide),p=t.mapPos(h,c.endSide),d>p||d==p&&c.startSide>0&&c.endSide<=0)continue;(p-d||c.endSide-c.startSide)<0||(o<0&&(o=d),c.point&&(a=Math.max(a,p-d)),r.push(c),i.push(d-o),s.push(p-o))}return{mapped:r.length?new eS(i,s,r,a):null,pos:o}}}class Re{constructor(e,t,r,i){this.chunkPos=e,this.chunk=t,this.nextLayer=r,this.maxPoint=i}static create(e,t,r,i){return new Re(e,t,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:r=!1,filterFrom:i=0,filterTo:s=this.length}=e,o=e.filter;if(t.length==0&&!o)return this;if(r&&(t=t.slice().sort(eO)),this.isEmpty)return t.length?Re.of(t):this;let a=new rM(this,null,-1).goto(0),l=0,c=[],u=new os;for(;a.value||l<t.length;)if(l<t.length&&(a.from-t[l].from||a.startSide-t[l].value.startSide)>=0){let h=t[l++];u.addInner(h.from,h.to,h.value)||c.push(h)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==t.length||this.chunkEnd(a.chunkIndex)<t[l].from)&&(!o||i>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&u.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||i>a.to||s<a.from||o(a.from,a.to,a.value))&&(u.addInner(a.from,a.to,a.value)||c.push(Zw.create(a.from,a.to,a.value))),a.next());return u.finishInner(this.nextLayer.isEmpty&&!c.length?Re.empty:this.nextLayer.update({add:c,filter:o,filterFrom:i,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],r=[],i=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],c=e.touchesRange(a,a+l.length);if(c===!1)i=Math.max(i,l.maxPoint),t.push(l),r.push(e.mapPos(a));else if(c===!0){let{mapped:u,pos:h}=l.map(a,e);u&&(i=Math.max(i,u.maxPoint),t.push(u),r.push(h))}}let s=this.nextLayer.map(e);return t.length==0?s:new Re(r,t,s||Re.empty,i)}between(e,t,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let s=this.chunkPos[i],o=this.chunk[i];if(t>=s&&e<=s+o.length&&o.between(s,e-s,t-s,r)===!1)return}this.nextLayer.between(e,t,r)}}iter(e=0){return Vh.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return Vh.from(e).goto(t)}static compare(e,t,r,i,s=-1){let o=e.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=s),a=t.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=s),l=KE(o,a,r),c=new pu(o,l,s),u=new pu(a,l,s);r.iterGaps((h,d,p)=>YE(c,h,u,d,p,i)),r.empty&&r.length==0&&YE(c,0,u,0,0,i)}static eq(e,t,r=0,i){i==null&&(i=999999999);let s=e.filter(u=>!u.isEmpty&&t.indexOf(u)<0),o=t.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=KE(s,o),l=new pu(s,a,0).goto(r),c=new pu(o,a,0).goto(r);for(;;){if(l.to!=c.to||!tO(l.active,c.active)||l.point&&(!c.point||!l.point.eq(c.point)))return!1;if(l.to>i)return!0;l.next(),c.next()}}static spans(e,t,r,i,s=-1){let o=new pu(e,null,s).goto(t),a=t,l=o.openStart;for(;;){let c=Math.min(o.to,r);if(o.point){let u=o.activeForPoint(o.to),h=o.pointFrom<t?u.length+1:o.point.startSide<0?u.length:Math.min(u.length,l);i.point(a,c,o.point,u,h,o.pointRank),l=Math.min(o.openEnd(c),u.length)}else c>a&&(i.span(a,c,o.active,l),l=o.openEnd(c));if(o.to>r)return l+(o.point&&o.to>r?1:0);a=o.to,o.next()}}static of(e,t=!1){let r=new os;for(let i of e instanceof Zw?[e]:t?cH(e):e)r.add(i.from,i.to,i.value);return r.finish()}static join(e){if(!e.length)return Re.empty;let t=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let i=e[r];i!=Re.empty;i=i.nextLayer)t=new Re(i.chunkPos,i.chunk,t,Math.max(i.maxPoint,t.maxPoint));return t}}Re.empty=new Re([],[],null,-1);function cH(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let r=n[t];if(eO(e,r)>0)return n.slice().sort(eO);e=r}return n}Re.empty.nextLayer=Re.empty;class os{finishChunk(e){this.chunks.push(new eS(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,r){this.addInner(e,t,r)||(this.nextLayer||(this.nextLayer=new os)).add(e,t,r)}addInner(e,t,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=t,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let r=t.value.length-1;return this.last=t.value[r],this.lastFrom=t.from[r]+e,this.lastTo=t.to[r]+e,!0}finish(){return this.finishInner(Re.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=Re.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function KE(n,e,t){let r=new Map;for(let s of n)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&r.set(s.chunk[o],s.chunkPos[o]);let i=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let a=r.get(s.chunk[o]);a!=null&&(t?t.mapPos(a):a)==s.chunkPos[o]&&!(t!=null&&t.touchesRange(a,a+s.chunk[o].length))&&i.add(s.chunk[o])}return i}class rM{constructor(e,t,r,i=0){this.layer=e,this.skip=t,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],r=e+t.from[this.rangeIndex];if(this.from=r,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Vh{constructor(e){this.heap=e}static from(e,t=null,r=-1){let i=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=r&&i.push(new rM(o,t,r,s));return i.length==1?i[0]:new Vh(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let r of this.heap)r.goto(e,t);for(let r=this.heap.length>>1;r>=0;r--)C0(this.heap,r);return this.next(),this}forward(e,t){for(let r of this.heap)r.forward(e,t);for(let r=this.heap.length>>1;r>=0;r--)C0(this.heap,r);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),C0(this.heap,0)}}}function C0(n,e){for(let t=n[e];;){let r=(e<<1)+1;if(r>=n.length)break;let i=n[r];if(r+1<n.length&&i.compare(n[r+1])>=0&&(i=n[r+1],r++),t.compare(i)<0)break;n[r]=t,n[e]=i,e=r}}class pu{constructor(e,t,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Vh.from(e,t,r)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){Ad(this.active,e),Ad(this.activeTo,e),Ad(this.activeRank,e),this.minActive=JE(this.active,this.activeTo)}addActive(e){let t=0,{value:r,to:i,rank:s}=this.cursor;for(;t<this.activeRank.length&&(s-this.activeRank[t]||i-this.activeTo[t])>0;)t++;Rd(this.active,t,r),Rd(this.activeTo,t,i),Rd(this.activeRank,t,s),e&&Rd(e,t,this.cursor.from),this.minActive=JE(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&Ad(r,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(r),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&t.push(this.active[r]);return t.reverse()}openEnd(e){let t=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)t++;return t}}function YE(n,e,t,r,i,s){n.goto(e),t.goto(r);let o=r+i,a=r,l=r-e;for(;;){let c=n.to+l-t.to,u=c||n.endSide-t.endSide,h=u<0?n.to+l:t.to,d=Math.min(h,o);if(n.point||t.point?n.point&&t.point&&(n.point==t.point||n.point.eq(t.point))&&tO(n.activeForPoint(n.to),t.activeForPoint(t.to))||s.comparePoint(a,d,n.point,t.point):d>a&&!tO(n.active,t.active)&&s.compareRange(a,d,n.active,t.active),h>o)break;(c||n.openEnd!=t.openEnd)&&s.boundChange&&s.boundChange(h),a=h,u<=0&&n.next(),u>=0&&t.next()}}function tO(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!n[t].eq(e[t]))return!1;return!0}function Ad(n,e){for(let t=e,r=n.length-1;t<r;t++)n[t]=n[t+1];n.pop()}function Rd(n,e,t){for(let r=n.length-1;r>=e;r--)n[r+1]=n[r];n[e]=t}function JE(n,e){let t=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||n[i].endSide-n[t].endSide)<0&&(t=i,r=e[i]);return t}function $c(n,e,t=n.length){let r=0;for(let i=0;i<t&&i<n.length;)n.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=Bt(n,i));return r}function nO(n,e,t,r){for(let i=0,s=0;;){if(s>=e)return i;if(i==n.length)break;s+=n.charCodeAt(i)==9?t-s%t:1,i=Bt(n,i)}return r===!0?-1:n.length}const rO="ͼ",ZE=typeof Symbol>"u"?"__"+rO:Symbol.for(rO),iO=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),ek=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class ko{constructor(e,t){this.rules=[];let{finish:r}=t||{};function i(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,l,c){let u=[],h=/^@(\w+)\b/.exec(o[0]),d=h&&h[1]=="keyframes";if(h&&a==null)return l.push(o[0]+";");for(let p in a){let g=a[p];if(/&/.test(p))s(p.split(/,\s*/).map(y=>o.map(w=>y.replace(/&/,w))).reduce((y,w)=>y.concat(w)),g,l);else if(g&&typeof g=="object"){if(!h)throw new RangeError("The value of a property ("+p+") should be a primitive value.");s(i(p),g,u,d)}else g!=null&&u.push(p.replace(/_.*/,"").replace(/[A-Z]/g,y=>"-"+y.toLowerCase())+": "+g+";")}(u.length||d)&&l.push((r&&!h&&!c?o.map(r):o).join(", ")+" {"+u.join(" ")+"}")}for(let o in e)s(i(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=ek[ZE]||1;return ek[ZE]=e+1,rO+e.toString(36)}static mount(e,t,r){let i=e[iO],s=r&&r.nonce;i?s&&i.setNonce(s):i=new uH(e,s),i.mount(Array.isArray(t)?t:[t],e)}}let tk=new Map;class uH{constructor(e,t){let r=e.ownerDocument||e,i=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let s=tk.get(r);if(s)return e[iO]=s;this.sheet=new i.CSSStyleSheet,tk.set(r,this)}else this.styleTag=r.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[iO]=this}mount(e,t){let r=this.sheet,i=0,s=0;for(let o=0;o<e.length;o++){let a=e[o],l=this.modules.indexOf(a);if(l<s&&l>-1&&(this.modules.splice(l,1),s--,l=-1),l==-1){if(this.modules.splice(s++,0,a),r)for(let c=0;c<a.rules.length;c++)r.insertRule(a.rules[c],i++)}else{for(;s<l;)i+=this.modules[s++].rules.length;i+=a.rules.length,s++}}if(r)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let o="";for(let l=0;l<this.modules.length;l++)o+=this.modules[l].getRules()+`
`;this.styleTag.textContent=o;let a=t.head||t;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var Co={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Fh={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},hH=typeof navigator<"u"&&/Mac/.test(navigator.platform),fH=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var $t=0;$t<10;$t++)Co[48+$t]=Co[96+$t]=String($t);for(var $t=1;$t<=24;$t++)Co[$t+111]="F"+$t;for(var $t=65;$t<=90;$t++)Co[$t]=String.fromCharCode($t+32),Fh[$t]=String.fromCharCode($t);for(var P0 in Co)Fh.hasOwnProperty(P0)||(Fh[P0]=Co[P0]);function dH(n){var e=hH&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||fH&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Fh:Co)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function Qh(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function sO(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function kp(n,e){if(!e.anchorNode)return!1;try{return sO(n,e.anchorNode)}catch{return!1}}function vc(n){return n.nodeType==3?Ma(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function Zu(n,e,t,r){return t?nk(n,e,t,r,-1)||nk(n,e,t,r,1):!1}function Da(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function $m(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}function nk(n,e,t,r,i){for(;;){if(n==t&&e==r)return!0;if(e==(i<0?0:vi(n))){if(n.nodeName=="DIV")return!1;let s=n.parentNode;if(!s||s.nodeType!=1)return!1;e=Da(n)+(i<0?0:1),n=s}else if(n.nodeType==1){if(n=n.childNodes[e+(i<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=i<0?vi(n):0}else return!1}}function vi(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Tf(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function pH(n){let e=n.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function iM(n,e){let t=e.width/n.offsetWidth,r=e.height/n.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-n.offsetWidth)<1)&&(t=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-n.offsetHeight)<1)&&(r=1),{scaleX:t,scaleY:r}}function mH(n,e,t,r,i,s,o,a){let l=n.ownerDocument,c=l.defaultView||window;for(let u=n,h=!1;u&&!h;)if(u.nodeType==1){let d,p=u==l.body,g=1,y=1;if(p)d=pH(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(u).position)&&(h=!0),u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let O=u.getBoundingClientRect();({scaleX:g,scaleY:y}=iM(u,O)),d={left:O.left,right:O.left+u.clientWidth*g,top:O.top,bottom:O.top+u.clientHeight*y}}let w=0,v=0;if(i=="nearest")e.top<d.top?(v=e.top-(d.top+o),t>0&&e.bottom>d.bottom+v&&(v=e.bottom-d.bottom+o)):e.bottom>d.bottom&&(v=e.bottom-d.bottom+o,t<0&&e.top-v<d.top&&(v=e.top-(d.top+o)));else{let O=e.bottom-e.top,S=d.bottom-d.top;v=(i=="center"&&O<=S?e.top+O/2-S/2:i=="start"||i=="center"&&t<0?e.top-o:e.bottom-S+o)-d.top}if(r=="nearest"?e.left<d.left?(w=e.left-(d.left+s),t>0&&e.right>d.right+w&&(w=e.right-d.right+s)):e.right>d.right&&(w=e.right-d.right+s,t<0&&e.left<d.left+w&&(w=e.left-(d.left+s))):w=(r=="center"?e.left+(e.right-e.left)/2-(d.right-d.left)/2:r=="start"==a?e.left-s:e.right-(d.right-d.left)+s)-d.left,w||v)if(p)c.scrollBy(w,v);else{let O=0,S=0;if(v){let E=u.scrollTop;u.scrollTop+=v/y,S=(u.scrollTop-E)*y}if(w){let E=u.scrollLeft;u.scrollLeft+=w/g,O=(u.scrollLeft-E)*g}e={left:e.left-O,top:e.top-S,right:e.right-O,bottom:e.bottom-S},O&&Math.abs(O-w)<1&&(r="nearest"),S&&Math.abs(S-v)<1&&(i="nearest")}if(p)break;(e.top<d.top||e.bottom>d.bottom||e.left<d.left||e.right>d.right)&&(e={left:Math.max(e.left,d.left),right:Math.min(e.right,d.right),top:Math.max(e.top,d.top),bottom:Math.min(e.bottom,d.bottom)}),u=u.assignedSlot||u.parentNode}else if(u.nodeType==11)u=u.host;else break}function gH(n){let e=n.ownerDocument,t,r;for(let i=n.parentNode;i&&!(i==e.body||t&&r);)if(i.nodeType==1)!r&&i.scrollHeight>i.clientHeight&&(r=i),!t&&i.scrollWidth>i.clientWidth&&(t=i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;return{x:t,y:r}}class yH{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:r}=e;this.set(t,Math.min(e.anchorOffset,t?vi(t):0),r,Math.min(e.focusOffset,r?vi(r):0))}set(e,t,r,i){this.anchorNode=e,this.anchorOffset=t,this.focusNode=r,this.focusOffset=i}}let tl=null;function sM(n){if(n.setActive)return n.setActive();if(tl)return n.focus(tl);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(tl==null?{get preventScroll(){return tl={preventScroll:!0},!0}}:void 0),!tl){tl=!1;for(let t=0;t<e.length;){let r=e[t++],i=e[t++],s=e[t++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=s&&(r.scrollLeft=s)}}}let rk;function Ma(n,e,t=e){let r=rk||(rk=document.createRange());return r.setEnd(n,t),r.setStart(n,e),r}function Ql(n,e,t,r){let i={key:e,code:e,keyCode:t,which:t,cancelable:!0};r&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=r);let s=new KeyboardEvent("keydown",i);s.synthetic=!0,n.dispatchEvent(s);let o=new KeyboardEvent("keyup",i);return o.synthetic=!0,n.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function vH(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function oM(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}function wH(n,e){let t=e.focusNode,r=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=r)return!1;for(r=Math.min(r,vi(t));;)if(r){if(t.nodeType!=1)return!1;let i=t.childNodes[r-1];i.contentEditable=="false"?r--:(t=i,r=vi(t))}else{if(t==n)return!0;r=Da(t),t=t.parentNode}}function aM(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}function lM(n,e){for(let t=n,r=e;;){if(t.nodeType==3&&r>0)return{node:t,offset:r};if(t.nodeType==1&&r>0){if(t.contentEditable=="false")return null;t=t.childNodes[r-1],r=vi(t)}else if(t.parentNode&&!$m(t))r=Da(t),t=t.parentNode;else return null}}function cM(n,e){for(let t=n,r=e;;){if(t.nodeType==3&&r<t.nodeValue.length)return{node:t,offset:r};if(t.nodeType==1&&r<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[r],r=0}else if(t.parentNode&&!$m(t))r=Da(t)+1,t=t.parentNode;else return null}}class an{constructor(e,t,r=!0){this.node=e,this.offset=t,this.precise=r}static before(e,t){return new an(e.parentNode,Da(e),t)}static after(e,t){return new an(e.parentNode,Da(e)+1,t)}}const tS=[];class ze{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let r of this.children){if(r==e)return t;t+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let r=this.dom,i=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=i?i.nextSibling:r.firstChild)){let a=ze.get(s);(!a||!a.parent&&a.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,t),o.flags&=-8}if(s=i?i.nextSibling:r.firstChild,t&&!t.written&&t.node==r&&s!=o.dom&&(t.written=!0),o.dom.parentNode==r)for(;s&&s!=o.dom;)s=ik(s);else r.insertBefore(o.dom,s);i=o.dom}for(s=i?i.nextSibling:r.firstChild,s&&t&&t.node==r&&(t.written=!0);s;)s=ik(s)}else if(this.flags&1)for(let r of this.children)r.flags&7&&(r.sync(e,t),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let r;if(e==this.dom)r=this.dom.childNodes[t];else{let i=vi(e)==0?0:t==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;i==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?i=-1:i=1),e=s}i<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!ze.get(r);)r=r.nextSibling;if(!r)return this.length;for(let i=0,s=0;;i++){let o=this.children[i];if(o.dom==r)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,t,r=0){let i=-1,s=-1,o=-1,a=-1;for(let l=0,c=r,u=r;l<this.children.length;l++){let h=this.children[l],d=c+h.length;if(c<e&&d>t)return h.domBoundsAround(e,t,c);if(d>=e&&i==-1&&(i=l,s=c),c>t&&h.dom.parentNode==this.dom){o=l,a=u;break}u=d,c=d+h.breakAfter}return{from:s,to:a<0?r+this.length:a,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,r=tS){this.markDirty();for(let i=e;i<t;i++){let s=this.children[i];s.parent==this&&r.indexOf(s)<0&&s.destroy()}r.length<250?this.children.splice(e,t-e,...r):this.children=[].concat(this.children.slice(0,e),r,this.children.slice(t));for(let i=0;i<r.length;i++)r[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new uM(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,r,i,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}ze.prototype.breakAfter=0;function ik(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class uM{constructor(e,t,r){this.children=e,this.pos=t,this.i=r,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function hM(n,e,t,r,i,s,o,a,l){let{children:c}=n,u=c.length?c[e]:null,h=s.length?s[s.length-1]:null,d=h?h.breakAfter:o;if(!(e==r&&u&&!o&&!d&&s.length<2&&u.merge(t,i,s.length?h:null,t==0,a,l))){if(r<c.length){let p=c[r];p&&(i<p.length||p.breakAfter&&(h!=null&&h.breakAfter))?(e==r&&(p=p.split(i),i=0),!d&&h&&p.merge(0,i,h,!0,0,l)?s[s.length-1]=p:((i||p.children.length&&!p.children[0].length)&&p.merge(0,i,null,!1,0,l),s.push(p))):p!=null&&p.breakAfter&&(h?h.breakAfter=1:o=1),r++}for(u&&(u.breakAfter=o,t>0&&(!o&&s.length&&u.merge(t,u.length,s[0],!1,a,0)?u.breakAfter=s.shift().breakAfter:(t<u.length||u.children.length&&u.children[u.children.length-1].length==0)&&u.merge(t,u.length,null,!1,a,0),e++));e<r&&s.length;)if(c[r-1].become(s[s.length-1]))r--,s.pop(),l=s.length?0:a;else if(c[e].become(s[0]))e++,s.shift(),a=s.length?0:l;else break;!s.length&&e&&r<c.length&&!c[e-1].breakAfter&&c[r].merge(0,0,c[e-1],!1,a,l)&&e--,(e<r||s.length)&&n.replaceChildren(e,r,s)}}function fM(n,e,t,r,i,s){let o=n.childCursor(),{i:a,off:l}=o.findPos(t,1),{i:c,off:u}=o.findPos(e,-1),h=e-t;for(let d of r)h+=d.length;n.length+=h,hM(n,c,u,a,l,r,0,i,s)}let En=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},oO=typeof document<"u"?document:{documentElement:{style:{}}};const aO=/Edge\/(\d+)/.exec(En.userAgent),dM=/MSIE \d/.test(En.userAgent),lO=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(En.userAgent),cy=!!(dM||lO||aO),sk=!cy&&/gecko\/(\d+)/i.test(En.userAgent),A0=!cy&&/Chrome\/(\d+)/.exec(En.userAgent),OH="webkitFontSmoothing"in oO.documentElement.style,pM=!cy&&/Apple Computer/.test(En.vendor),ok=pM&&(/Mobile\/\w+/.test(En.userAgent)||En.maxTouchPoints>2);var ie={mac:ok||/Mac/.test(En.platform),windows:/Win/.test(En.platform),linux:/Linux|X11/.test(En.platform),ie:cy,ie_version:dM?oO.documentMode||6:lO?+lO[1]:aO?+aO[1]:0,gecko:sk,gecko_version:sk?+(/Firefox\/(\d+)/.exec(En.userAgent)||[0,0])[1]:0,chrome:!!A0,chrome_version:A0?+A0[1]:0,ios:ok,android:/Android\b/.test(En.userAgent),safari:pM,webkit_version:OH?+(/\bAppleWebKit\/(\d+)/.exec(En.userAgent)||[0,0])[1]:0,tabSize:oO.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const xH=256;class Lr extends ze{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,r){return this.flags&8||r&&(!(r instanceof Lr)||this.length-(t-e)+r.length>xH||r.flags&8)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new Lr(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new an(this.dom,e)}domBoundsAround(e,t,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return SH(this.dom,e,t)}}class as extends ze{constructor(e,t=[],r=0){super(),this.mark=e,this.children=t,this.length=r;for(let i of t)i.setParent(this)}setAttrs(e){if(oM(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,r,i,s,o){return r&&(!(r instanceof as&&r.mark.eq(this.mark))||e&&s<=0||t<this.length&&o<=0)?!1:(fM(this,e,t,r?r.children.slice():[],s-1,o-1),this.markDirty(),!0)}split(e){let t=[],r=0,i=-1,s=0;for(let a of this.children){let l=r+a.length;l>e&&t.push(r<e?a.split(e-r):a),i<0&&r>=e&&(i=s),r=l,s++}let o=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new as(this.mark,t,o)}domAtPos(e){return mM(this,e)}coordsAt(e,t){return yM(this,e,t)}}function SH(n,e,t){let r=n.nodeValue.length;e>r&&(e=r);let i=e,s=e,o=0;e==0&&t<0||e==r&&t>=0?ie.chrome||ie.gecko||(e?(i--,o=1):s<r&&(s++,o=-1)):t<0?i--:s<r&&s++;let a=Ma(n,i,s).getClientRects();if(!a.length)return null;let l=a[(o?o<0:t>=0)?0:a.length-1];return ie.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,c=>c.width)||l),o?Tf(l,o<0):l||null}class Gs extends ze{static create(e,t,r){return new Gs(e,t,r)}constructor(e,t,r){super(),this.widget=e,this.length=t,this.side=r,this.prevWidget=null}split(e){let t=Gs.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,r,i,s,o){return r&&(!(r instanceof Gs)||!this.widget.compare(r.widget)||e>0&&s<=0||t<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-t),!0)}become(e){return e instanceof Gs&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Ce.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,r=t&&t.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):Ce.empty}domAtPos(e){return(this.length?e==0:this.side>0)?an.before(this.dom):an.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let r=this.widget.coordsAt(this.dom,e,t);if(r)return r;let i=this.dom.getClientRects(),s=null;if(!i.length)return null;let o=this.side?this.side<0:e>0;for(let a=o?i.length-1:0;s=i[a],!(e>0?a==0:a==i.length-1||s.top<s.bottom);a+=o?-1:1);return Tf(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class wc extends ze{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof wc&&e.side==this.side}split(){return new wc(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?an.before(this.dom):an.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Ce.empty}get isHidden(){return!0}}Lr.prototype.children=Gs.prototype.children=wc.prototype.children=tS;function mM(n,e){let t=n.dom,{children:r}=n,i=0;for(let s=0;i<r.length;i++){let o=r[i],a=s+o.length;if(!(a==s&&o.getSide()<=0)){if(e>s&&e<a&&o.dom.parentNode==t)return o.domAtPos(e-s);if(e<=s)break;s=a}}for(let s=i;s>0;s--){let o=r[s-1];if(o.dom.parentNode==t)return o.domAtPos(o.length)}for(let s=i;s<r.length;s++){let o=r[s];if(o.dom.parentNode==t)return o.domAtPos(0)}return new an(t,0)}function gM(n,e,t){let r,{children:i}=n;t>0&&e instanceof as&&i.length&&(r=i[i.length-1])instanceof as&&r.mark.eq(e.mark)?gM(r,e.children[0],t-1):(i.push(e),e.setParent(n)),n.length+=e.length}function yM(n,e,t){let r=null,i=-1,s=null,o=-1;function a(c,u){for(let h=0,d=0;h<c.children.length&&d<=u;h++){let p=c.children[h],g=d+p.length;g>=u&&(p.children.length?a(p,u-d):(!s||s.isHidden&&(t>0||TH(s,p)))&&(g>u||d==g&&p.getSide()>0)?(s=p,o=u-d):(d<u||d==g&&p.getSide()<0&&!p.isHidden)&&(r=p,i=u-d)),d=g}}a(n,e);let l=(t<0?r:s)||r||s;return l?l.coordsAt(Math.max(0,l==r?i:o),t):bH(n)}function bH(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=vc(e);return t[t.length-1]||null}function TH(n,e){let t=n.coordsAt(0,1),r=e.coordsAt(0,1);return t&&r&&r.top<t.bottom}function cO(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}const ak=Object.create(null);function jm(n,e,t){if(n==e)return!0;n||(n=ak),e||(e=ak);let r=Object.keys(n),i=Object.keys(e);if(r.length-(t&&r.indexOf(t)>-1?1:0)!=i.length-(t&&i.indexOf(t)>-1?1:0))return!1;for(let s of r)if(s!=t&&(i.indexOf(s)==-1||n[s]!==e[s]))return!1;return!0}function uO(n,e,t){let r=!1;if(e)for(let i in e)t&&i in t||(r=!0,i=="style"?n.style.cssText="":n.removeAttribute(i));if(t)for(let i in t)e&&e[i]==t[i]||(r=!0,i=="style"?n.style.cssText=t[i]:n.setAttribute(i,t[i]));return r}function _H(n){let e=Object.create(null);for(let t=0;t<n.attributes.length;t++){let r=n.attributes[t];e[r.name]=r.value}return e}class Si{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var gn=function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n}(gn||(gn={}));class ae extends Na{constructor(e,t,r,i){super(),this.startSide=e,this.endSide=t,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new _f(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return t+=r&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new Po(e,t,t,r,e.widget||null,!1)}static replace(e){let t=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:s,end:o}=vM(e,t);r=(s?t?-3e8:-1:5e8)-1,i=(o?t?2e8:1:-6e8)+1}return new Po(e,r,i,t,e.widget||null,!0)}static line(e){return new Ef(e)}static set(e,t=!1){return Re.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}ae.none=Re.empty;class _f extends ae{constructor(e){let{start:t,end:r}=vM(e);super(t?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,r;return this==e||e instanceof _f&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((r=e.attrs)===null||r===void 0?void 0:r.class))&&jm(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}_f.prototype.point=!1;class Ef extends ae{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Ef&&this.spec.class==e.spec.class&&jm(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}Ef.prototype.mapMode=zt.TrackBefore;Ef.prototype.point=!0;class Po extends ae{constructor(e,t,r,i,s,o){super(t,r,s,e),this.block=i,this.isReplace=o,this.mapMode=i?t<=0?zt.TrackBefore:zt.TrackAfter:zt.TrackDel}get type(){return this.startSide!=this.endSide?gn.WidgetRange:this.startSide<=0?gn.WidgetBefore:gn.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Po&&EH(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}Po.prototype.point=!0;function vM(n,e=!1){let{inclusiveStart:t,inclusiveEnd:r}=n;return t==null&&(t=n.inclusive),r==null&&(r=n.inclusive),{start:t??e,end:r??e}}function EH(n,e){return n==e||!!(n&&e&&n.compare(e))}function Cp(n,e,t,r=0){let i=t.length-1;i>=0&&t[i]+r>=n?t[i]=Math.max(t[i],e):t.push(n,e)}class pt extends ze{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,r,i,s,o){if(r){if(!(r instanceof pt))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),fM(this,e,t,r?r.children.slice():[],s,o),!0}split(e){let t=new pt;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i:r,off:i}=this.childPos(e);i&&(t.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let s=r;s<this.children.length;s++)t.append(this.children[s],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){jm(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){gM(this,e,t)}addLineDeco(e){let t=e.spec.attributes,r=e.spec.class;t&&(this.attrs=cO(t,this.attrs||{})),r&&(this.attrs=cO({class:r},this.attrs||{}))}domAtPos(e){return mM(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var r;this.dom?this.flags&4&&(oM(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(uO(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let i=this.dom.lastChild;for(;i&&ze.get(i)instanceof as;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((r=ze.get(i))===null||r===void 0?void 0:r.isEditable)==!1&&(!ie.ios||!this.children.some(s=>s instanceof Lr))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let r of this.children){if(!(r instanceof Lr)||/[^ -~]/.test(r.text))return null;let i=vc(r.dom);if(i.length!=1)return null;e+=i[0].width,t=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let r=yM(this,e,t);if(!this.children.length&&r&&this.parent){let{heightOracle:i}=this.parent.view.viewState,s=r.bottom-r.top;if(Math.abs(s-i.lineHeight)<2&&i.textHeight<s){let o=(s-i.textHeight)/2;return{top:r.top+o,bottom:r.bottom-o,left:r.left,right:r.left}}}return r}become(e){return e instanceof pt&&this.children.length==0&&e.children.length==0&&jm(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let r=0,i=0;r<e.children.length;r++){let s=e.children[r],o=i+s.length;if(o>=t){if(s instanceof pt)return s;if(o>t)break}i=o+s.breakAfter}return null}}class Gi extends ze{constructor(e,t,r){super(),this.widget=e,this.length=t,this.deco=r,this.breakAfter=0,this.prevWidget=null}merge(e,t,r,i,s,o){return r&&(!(r instanceof Gi)||!this.widget.compare(r.widget)||e>0&&s<=0||t<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?an.before(this.dom):an.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let r=new Gi(this.widget,t,this.deco);return r.breakAfter=this.breakAfter,r}get children(){return tS}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Ce.empty}domBoundsAround(){return null}become(e){return e instanceof Gi&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){let r=this.widget.coordsAt(this.dom,e,t);return r||(this.widget instanceof hO?null:Tf(this.dom.getBoundingClientRect(),this.length?e==0:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:r}=this.deco;return t==r?!1:e<0?t<0:r>0}}class hO extends Si{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class eh{constructor(e,t,r,i){this.doc=e,this.pos=t,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Gi&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new pt),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Id(new wc(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Gi)&&this.getLine()}buildText(e,t,r){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-r)),this.getLine().append(Id(new Lr(this.text.slice(this.textOff,this.textOff+i)),t),r),this.atCursorPos=!0,this.textOff+=i,e-=i,r=0}}span(e,t,r,i){this.buildText(t-e,r,i),this.pos=t,this.openStart<0&&(this.openStart=i)}point(e,t,r,i,s,o){if(this.disallowBlockEffectsFor[o]&&r instanceof Po){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=t-e;if(r instanceof Po)if(r.block)r.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Gi(r.widget||Oc.block,a,r));else{let l=Gs.create(r.widget||Oc.inline,a,a?0:r.startSide),c=this.atCursorPos&&!l.isEditable&&s<=i.length&&(e<t||r.startSide>0),u=!l.isEditable&&(e<t||s>i.length||r.startSide<=0),h=this.getLine();this.pendingBuffer==2&&!c&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),c&&(h.append(Id(new wc(1),i),s),s=i.length+Math.max(0,s-i.length)),h.append(Id(l,i),s),this.atCursorPos=u,this.pendingBuffer=u?e<t||s>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=s)}static build(e,t,r,i,s){let o=new eh(e,t,r,s);return o.openEnd=Re.spans(i,t,r,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function Id(n,e){for(let t of e)n=new as(t,[n],n.length);return n}class Oc extends Si{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Oc.inline=new Oc("span");Oc.block=new Oc("div");var Xe=function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n}(Xe||(Xe={}));const La=Xe.LTR,nS=Xe.RTL;function wM(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const kH=wM("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),CH=wM("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),fO=Object.create(null),Br=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);fO[e]=t,fO[t]=-e}function OM(n){return n<=247?kH[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?CH[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8204?256:64336<=n&&n<=65023?4:1}const PH=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Xs{get dir(){return this.level%2?nS:La}constructor(e,t,r){this.from=e,this.to=t,this.level=r}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,r,i){let s=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=t&&a.to>=t){if(a.level==r)return o;(s<0||(i!=0?i<0?a.from<t:a.to>t:e[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}function xM(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++){let r=n[t],i=e[t];if(r.from!=i.from||r.to!=i.to||r.direction!=i.direction||!xM(r.inner,i.inner))return!1}return!0}const je=[];function AH(n,e,t,r,i){for(let s=0;s<=r.length;s++){let o=s?r[s-1].to:e,a=s<r.length?r[s].from:t,l=s?256:i;for(let c=o,u=l,h=l;c<a;c++){let d=OM(n.charCodeAt(c));d==512?d=u:d==8&&h==4&&(d=16),je[c]=d==4?2:d,d&7&&(h=d),u=d}for(let c=o,u=l,h=l;c<a;c++){let d=je[c];if(d==128)c<a-1&&u==je[c+1]&&u&24?d=je[c]=u:je[c]=256;else if(d==64){let p=c+1;for(;p<a&&je[p]==64;)p++;let g=c&&u==8||p<t&&je[p]==8?h==1?1:8:256;for(let y=c;y<p;y++)je[y]=g;c=p-1}else d==8&&h==1&&(je[c]=1);u=d,d&7&&(h=d)}}}function RH(n,e,t,r,i){let s=i==1?2:1;for(let o=0,a=0,l=0;o<=r.length;o++){let c=o?r[o-1].to:e,u=o<r.length?r[o].from:t;for(let h=c,d,p,g;h<u;h++)if(p=fO[d=n.charCodeAt(h)])if(p<0){for(let y=a-3;y>=0;y-=3)if(Br[y+1]==-p){let w=Br[y+2],v=w&2?i:w&4?w&1?s:i:0;v&&(je[h]=je[Br[y]]=v),a=y;break}}else{if(Br.length==189)break;Br[a++]=h,Br[a++]=d,Br[a++]=l}else if((g=je[h])==2||g==1){let y=g==i;l=y?0:1;for(let w=a-3;w>=0;w-=3){let v=Br[w+2];if(v&2)break;if(y)Br[w+2]|=2;else{if(v&4)break;Br[w+2]|=4}}}}}function IH(n,e,t,r){for(let i=0,s=r;i<=t.length;i++){let o=i?t[i-1].to:n,a=i<t.length?t[i].from:e;for(let l=o;l<a;){let c=je[l];if(c==256){let u=l+1;for(;;)if(u==a){if(i==t.length)break;u=t[i++].to,a=i<t.length?t[i].from:e}else if(je[u]==256)u++;else break;let h=s==1,d=(u<e?je[u]:r)==1,p=h==d?h?1:2:r;for(let g=u,y=i,w=y?t[y-1].to:n;g>l;)g==w&&(g=t[--y].from,w=y?t[y-1].to:n),je[--g]=p;l=u}else s=c,l++}}}function dO(n,e,t,r,i,s,o){let a=r%2?2:1;if(r%2==i%2)for(let l=e,c=0;l<t;){let u=!0,h=!1;if(c==s.length||l<s[c].from){let y=je[l];y!=a&&(u=!1,h=y==16)}let d=!u&&a==1?[]:null,p=u?r:r+1,g=l;e:for(;;)if(c<s.length&&g==s[c].from){if(h)break e;let y=s[c];if(!u)for(let w=y.to,v=c+1;;){if(w==t)break e;if(v<s.length&&s[v].from==w)w=s[v++].to;else{if(je[w]==a)break e;break}}if(c++,d)d.push(y);else{y.from>l&&o.push(new Xs(l,y.from,p));let w=y.direction==La!=!(p%2);pO(n,w?r+1:r,i,y.inner,y.from,y.to,o),l=y.to}g=y.to}else{if(g==t||(u?je[g]!=a:je[g]==a))break;g++}d?dO(n,l,g,r+1,i,d,o):l<g&&o.push(new Xs(l,g,p)),l=g}else for(let l=t,c=s.length;l>e;){let u=!0,h=!1;if(!c||l>s[c-1].to){let y=je[l-1];y!=a&&(u=!1,h=y==16)}let d=!u&&a==1?[]:null,p=u?r:r+1,g=l;e:for(;;)if(c&&g==s[c-1].to){if(h)break e;let y=s[--c];if(!u)for(let w=y.from,v=c;;){if(w==e)break e;if(v&&s[v-1].to==w)w=s[--v].from;else{if(je[w-1]==a)break e;break}}if(d)d.push(y);else{y.to<l&&o.push(new Xs(y.to,l,p));let w=y.direction==La!=!(p%2);pO(n,w?r+1:r,i,y.inner,y.from,y.to,o),l=y.from}g=y.from}else{if(g==e||(u?je[g-1]!=a:je[g-1]==a))break;g--}d?dO(n,g,l,r+1,i,d,o):g<l&&o.push(new Xs(g,l,p)),l=g}}function pO(n,e,t,r,i,s,o){let a=e%2?2:1;AH(n,i,s,r,a),RH(n,i,s,r,a),IH(i,s,r,a),dO(n,i,s,e,t,r,o)}function NH(n,e,t){if(!n)return[new Xs(0,0,e==nS?1:0)];if(e==La&&!t.length&&!PH.test(n))return SM(n.length);if(t.length)for(;n.length>je.length;)je[je.length]=256;let r=[],i=e==La?0:1;return pO(n,i,i,t,0,n.length,r),r}function SM(n){return[new Xs(0,n,0)]}let bM="";function DH(n,e,t,r,i){var s;let o=r.head-n.from,a=Xs.find(e,o,(s=r.bidiLevel)!==null&&s!==void 0?s:-1,r.assoc),l=e[a],c=l.side(i,t);if(o==c){let d=a+=i?1:-1;if(d<0||d>=e.length)return null;l=e[a=d],o=l.side(!i,t),c=l.side(i,t)}let u=Bt(n.text,o,l.forward(i,t));(u<l.from||u>l.to)&&(u=c),bM=n.text.slice(Math.min(o,u),Math.max(o,u));let h=a==(i?e.length-1:0)?null:e[a+(i?1:-1)];return h&&u==c&&h.level+(i?0:1)<l.level?B.cursor(h.side(!i,t)+n.from,h.forward(i,t)?1:-1,h.level):B.cursor(u+n.from,l.forward(i,t)?-1:1,l.level)}function MH(n,e,t){for(let r=e;r<t;r++){let i=OM(n.charCodeAt(r));if(i==1)return La;if(i==2||i==4)return nS}return La}const TM=ne.define(),_M=ne.define(),EM=ne.define(),kM=ne.define(),mO=ne.define(),CM=ne.define(),PM=ne.define(),rS=ne.define(),iS=ne.define(),AM=ne.define({combine:n=>n.some(e=>e)}),RM=ne.define({combine:n=>n.some(e=>e)}),IM=ne.define();class $l{constructor(e,t="nearest",r="nearest",i=5,s=5,o=!1){this.range=e,this.y=t,this.x=r,this.yMargin=i,this.xMargin=s,this.isSnapshot=o}map(e){return e.empty?this:new $l(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new $l(B.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Nd=ge.define({map:(n,e)=>n.map(e)}),NM=ge.define();function An(n,e,t){let r=n.facet(kM);r.length?r[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const $i=ne.define({combine:n=>n.length?n[0]:!0});let LH=0;const Au=ne.define();class ft{constructor(e,t,r,i,s){this.id=e,this.create=t,this.domEventHandlers=r,this.domEventObservers=i,this.extension=s(this)}static define(e,t){const{eventHandlers:r,eventObservers:i,provide:s,decorations:o}=t||{};return new ft(LH++,e,r,i,a=>{let l=[Au.of(a)];return o&&l.push($h.of(c=>{let u=c.plugin(a);return u?o(u):ae.none})),s&&l.push(s(a)),l})}static fromClass(e,t){return ft.define(r=>new e(r),t)}}class R0{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(r){if(An(t.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){An(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(r){An(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const DM=ne.define(),sS=ne.define(),$h=ne.define(),MM=ne.define(),oS=ne.define(),LM=ne.define();function lk(n,e){let t=n.state.facet(LM);if(!t.length)return t;let r=t.map(s=>s instanceof Function?s(n):s),i=[];return Re.spans(r,e.from,e.to,{point(){},span(s,o,a,l){let c=s-e.from,u=o-e.from,h=i;for(let d=a.length-1;d>=0;d--,l--){let p=a[d].spec.bidiIsolate,g;if(p==null&&(p=MH(e.text,c,u)),l>0&&h.length&&(g=h[h.length-1]).to==c&&g.direction==p)g.to=u,h=g.inner;else{let y={from:c,to:u,direction:p,inner:[]};h.push(y),h=y.inner}}}}),i}const VM=ne.define();function aS(n){let e=0,t=0,r=0,i=0;for(let s of n.state.facet(VM)){let o=s(n);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(t=Math.max(t,o.right)),o.top!=null&&(r=Math.max(r,o.top)),o.bottom!=null&&(i=Math.max(i,o.bottom)))}return{left:e,right:t,top:r,bottom:i}}const Ru=ne.define();class fr{constructor(e,t,r,i){this.fromA=e,this.toA=t,this.fromB=r,this.toB=i}join(e){return new fr(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,r=this;for(;t>0;t--){let i=e[t-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(t-1,1)}}return e.splice(t,0,r),e}static extendWithRanges(e,t){if(t.length==0)return e;let r=[];for(let i=0,s=0,o=0,a=0;;i++){let l=i==e.length?null:e[i],c=o-a,u=l?l.fromB:1e9;for(;s<t.length&&t[s]<u;){let h=t[s],d=t[s+1],p=Math.max(a,h),g=Math.min(u,d);if(p<=g&&new fr(p+c,g+c,p,g).addToSet(r),d>u)break;s+=2}if(!l)return r;new fr(l.fromA,l.toA,l.fromB,l.toB).addToSet(r),o=l.toA,a=l.toB}}}class zm{constructor(e,t,r){this.view=e,this.state=t,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=Ot.empty(this.startState.doc.length);for(let s of r)this.changes=this.changes.compose(s.changes);let i=[];this.changes.iterChangedRanges((s,o,a,l)=>i.push(new fr(s,o,a,l))),this.changedRanges=i}static create(e,t,r){return new zm(e,t,r)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class ck extends ze{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=ae.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new pt],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new fr(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:c,toA:u})=>u<this.minWidthFrom||c>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?i=this.domChanged.newSel.head:!BH(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let s=i>-1?FH(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:c,to:u}=this.hasComposition;r=new fr(c,u,e.changes.mapPos(c,-1),e.changes.mapPos(u,1)).addToSet(r.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(ie.ie||ie.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,a=this.updateDeco(),l=jH(o,a,e.changes);return r=fr.extendWithRanges(r,l),!(this.flags&7)&&r.length==0?!1:(this.updateInner(r,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,r);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=ie.chrome||ie.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||i.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof Gi&&o.widget instanceof hO&&s.push(o.dom);i.updateGaps(s)}updateChildren(e,t,r){let i=r?r.range.addToSet(e.slice()):e,s=this.childCursor(t);for(let o=i.length-1;;o--){let a=o>=0?i[o]:null;if(!a)break;let{fromA:l,toA:c,fromB:u,toB:h}=a,d,p,g,y;if(r&&r.range.fromB<h&&r.range.toB>u){let E=eh.build(this.view.state.doc,u,r.range.fromB,this.decorations,this.dynamicDecorationMap),R=eh.build(this.view.state.doc,r.range.toB,h,this.decorations,this.dynamicDecorationMap);p=E.breakAtStart,g=E.openStart,y=R.openEnd;let M=this.compositionView(r);R.breakAtStart?M.breakAfter=1:R.content.length&&M.merge(M.length,M.length,R.content[0],!1,R.openStart,0)&&(M.breakAfter=R.content[0].breakAfter,R.content.shift()),E.content.length&&M.merge(0,0,E.content[E.content.length-1],!0,0,E.openEnd)&&E.content.pop(),d=E.content.concat(M).concat(R.content)}else({content:d,breakAtStart:p,openStart:g,openEnd:y}=eh.build(this.view.state.doc,u,h,this.decorations,this.dynamicDecorationMap));let{i:w,off:v}=s.findPos(c,1),{i:O,off:S}=s.findPos(l,-1);hM(this,O,S,w,v,d,p,g,y)}r&&this.fixCompositionDOM(r)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let r of t.effects)r.is(NM)&&(this.editContextFormatting=r.value)}compositionView(e){let t=new Lr(e.text.nodeValue);t.flags|=8;for(let{deco:i}of e.marks)t=new as(i,[t],t.length);let r=new pt;return r.append(t,0),r}fixCompositionDOM(e){let t=(s,o)=>{o.flags|=8|(o.children.some(l=>l.flags&7)?1:0),this.markedForComposition.add(o);let a=ze.get(s);a&&a!=o&&(a.dom=null),o.setDOM(s)},r=this.childPos(e.range.fromB,1),i=this.children[r.i];t(e.line,i);for(let s=e.marks.length-1;s>=-1;s--)r=i.childPos(r.off,1),i=i.children[r.i],t(s>=0?e.marks[s].node:e.text,i)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,i=r==this.dom,s=!i&&!(this.view.state.facet($i)||this.dom.tabIndex>-1)&&kp(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(i||t||s))return;let o=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(a.anchor)),c=a.empty?l:this.moveToLine(this.domAtPos(a.head));if(ie.gecko&&a.empty&&!this.hasComposition&&VH(l)){let h=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(h,l.node.childNodes[l.offset]||null)),l=c=new an(h,0),o=!0}let u=this.view.observer.selectionRange;(o||!u.focusNode||(!Zu(l.node,l.offset,u.anchorNode,u.anchorOffset)||!Zu(c.node,c.offset,u.focusNode,u.focusOffset))&&!this.suppressWidgetCursorChange(u,a))&&(this.view.observer.ignore(()=>{ie.android&&ie.chrome&&this.dom.contains(u.focusNode)&&zH(u.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let h=Qh(this.view.root);if(h)if(a.empty){if(ie.gecko){let d=QH(l.node,l.offset);if(d&&d!=3){let p=(d==1?lM:cM)(l.node,l.offset);p&&(l=new an(p.node,p.offset))}}h.collapse(l.node,l.offset),a.bidiLevel!=null&&h.caretBidiLevel!==void 0&&(h.caretBidiLevel=a.bidiLevel)}else if(h.extend){h.collapse(l.node,l.offset);try{h.extend(c.node,c.offset)}catch{}}else{let d=document.createRange();a.anchor>a.head&&([l,c]=[c,l]),d.setEnd(c.node,c.offset),d.setStart(l.node,l.offset),h.removeAllRanges(),h.addRange(d)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(l,c)),this.impreciseAnchor=l.precise?null:new an(u.anchorNode,u.anchorOffset),this.impreciseHead=c.precise?null:new an(u.focusNode,u.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&Zu(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,r=Qh(e.root),{anchorNode:i,anchorOffset:s}=e.observer.selectionRange;if(!r||!t.empty||!t.assoc||!r.modify)return;let o=pt.find(this,t.head);if(!o)return;let a=o.posAtStart;if(t.head==a||t.head==a+o.length)return;let l=this.coordsAt(t.head,-1),c=this.coordsAt(t.head,1);if(!l||!c||l.bottom>c.top)return;let u=this.domAtPos(t.head+t.assoc);r.collapse(u.node,u.offset),r.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let h=e.observer.selectionRange;e.docView.posFromDOM(h.anchorNode,h.anchorOffset)!=t.from&&r.collapse(i,s)}moveToLine(e){let t=this.dom,r;if(e.node!=t)return e;for(let i=e.offset;!r&&i<t.childNodes.length;i++){let s=ze.get(t.childNodes[i]);s instanceof pt&&(r=s.domAtPos(0))}for(let i=e.offset-1;!r&&i>=0;i--){let s=ze.get(t.childNodes[i]);s instanceof pt&&(r=s.domAtPos(s.length))}return r?new an(r.node,r.offset,!0):e}nearest(e){for(let t=e;t;){let r=ze.get(t);if(r&&r.rootView==this)return r;t=t.parentNode}return null}posFromDOM(e,t){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,t)+r.posAtStart}domAtPos(e){let{i:t,off:r}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let i=this.children[t];if(r<i.length||i instanceof pt)break;t++,r=0}return this.children[t].domAtPos(r)}coordsAt(e,t){let r=null,i=0;for(let s=this.length,o=this.children.length-1;o>=0;o--){let a=this.children[o],l=s-a.breakAfter,c=l-a.length;if(l<e)break;if(c<=e&&(c<e||a.covers(-1))&&(l>e||a.covers(1))&&(!r||a instanceof pt&&!(r instanceof pt&&t>=0)))r=a,i=c;else if(r&&c==e&&l==e&&a instanceof Gi&&Math.abs(t)<2){if(a.deco.startSide<0)break;o&&(r=null)}s=c}return r?r.coordsAt(e-i,t):null}coordsForChar(e){let{i:t,off:r}=this.childPos(e,1),i=this.children[t];if(!(i instanceof pt))return null;for(;i.children.length;){let{i:a,off:l}=i.childPos(r,1);for(;;a++){if(a==i.children.length)return null;if((i=i.children[a]).length)break}r=l}if(!(i instanceof Lr))return null;let s=Bt(i.text,r);if(s==r)return null;let o=Ma(i.dom,r,s).getClientRects();for(let a=0;a<o.length;a++){let l=o[a];if(a==o.length-1||l.top<l.bottom&&l.left<l.right)return l}return null}measureVisibleLineHeights(e){let t=[],{from:r,to:i}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==Xe.LTR;for(let c=0,u=0;u<this.children.length;u++){let h=this.children[u],d=c+h.length;if(d>i)break;if(c>=r){let p=h.dom.getBoundingClientRect();if(t.push(p.height),o){let g=h.dom.lastChild,y=g?vc(g):[];if(y.length){let w=y[y.length-1],v=l?w.right-p.left:p.right-w.left;v>a&&(a=v,this.minWidth=s,this.minWidthFrom=c,this.minWidthTo=d)}}}c=d+h.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?Xe.RTL:Xe.LTR}measureTextSize(){for(let s of this.children)if(s instanceof pt){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),t,r,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=vc(e.firstChild)[0];t=e.getBoundingClientRect().height,r=s?s.width/27:7,i=s?s.height:t,e.remove()}),{lineHeight:t,charWidth:r,textHeight:i}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new uM(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let r=0,i=0;;i++){let s=i==t.viewports.length?null:t.viewports[i],o=s?s.from-1:this.length;if(o>r){let a=(t.lineBlockAt(o).bottom-t.lineBlockAt(r).top)/this.view.scaleY;e.push(ae.replace({widget:new hO(a),block:!0,inclusive:!0,isBlockGap:!0}).range(r,o))}if(!s)break;r=s.to+1}return ae.set(e)}updateDeco(){let e=1,t=this.view.state.facet($h).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),r=!1,i=this.view.state.facet(MM).map((s,o)=>{let a=typeof s=="function";return a&&(r=!0),a?s(this.view):s});for(i.length&&(this.dynamicDecorationMap[e++]=r,t.push(Re.join(i))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let c=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=c.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let c of this.view.state.facet(IM))try{if(c(this.view,e.range,e))return!0}catch(u){An(this.view.state,u,"scroll handler")}let{range:t}=e,r=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),i;if(!r)return;!t.empty&&(i=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let s=aS(this.view),o={left:r.left-s.left,top:r.top-s.top,right:r.right+s.right,bottom:r.bottom+s.bottom},{offsetWidth:a,offsetHeight:l}=this.view.scrollDOM;mH(this.view.scrollDOM,o,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==Xe.LTR)}}function VH(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}function FM(n,e){let t=n.observer.selectionRange;if(!t.focusNode)return null;let r=lM(t.focusNode,t.focusOffset),i=cM(t.focusNode,t.focusOffset),s=r||i;if(i&&r&&i.node!=r.node){let a=ze.get(i.node);if(!a||a instanceof Lr&&a.text!=i.node.nodeValue)s=i;else if(n.docView.lastCompositionAfterCursor){let l=ze.get(r.node);!l||l instanceof Lr&&l.text!=r.node.nodeValue||(s=i)}}if(n.docView.lastCompositionAfterCursor=s!=r,!s)return null;let o=e-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}function FH(n,e,t){let r=FM(n,t);if(!r)return null;let{node:i,from:s,to:o}=r,a=i.nodeValue;if(/[\n\r]/.test(a)||n.state.doc.sliceString(r.from,r.to)!=a)return null;let l=e.invertedDesc,c=new fr(l.mapPos(s),l.mapPos(o),s,o),u=[];for(let h=i.parentNode;;h=h.parentNode){let d=ze.get(h);if(d instanceof as)u.push({node:h,deco:d.mark});else{if(d instanceof pt||h.nodeName=="DIV"&&h.parentNode==n.contentDOM)return{range:c,text:i,marks:u,line:h};if(h!=n.contentDOM)u.push({node:h,deco:new _f({inclusive:!0,attributes:_H(h),tagName:h.tagName.toLowerCase()})});else return null}}}function QH(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}let $H=class{constructor(){this.changes=[]}compareRange(e,t){Cp(e,t,this.changes)}comparePoint(e,t){Cp(e,t,this.changes)}boundChange(e){Cp(e,e,this.changes)}};function jH(n,e,t){let r=new $H;return Re.compare(n,e,t,r),r.changes}function zH(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function BH(n,e){let t=!1;return e&&n.iterChangedRanges((r,i)=>{r<e.to&&i>e.from&&(t=!0)}),t}function UH(n,e,t=1){let r=n.charCategorizer(e),i=n.doc.lineAt(e),s=e-i.from;if(i.length==0)return B.cursor(e);s==0?t=1:s==i.length&&(t=-1);let o=s,a=s;t<0?o=Bt(i.text,s,!1):a=Bt(i.text,s);let l=r(i.text.slice(o,a));for(;o>0;){let c=Bt(i.text,o,!1);if(r(i.text.slice(c,o))!=l)break;o=c}for(;a<i.length;){let c=Bt(i.text,a);if(r(i.text.slice(a,c))!=l)break;a=c}return B.range(o+i.from,a+i.from)}function WH(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}function qH(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}function I0(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}function uk(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}function hk(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}function gO(n,e,t){let r,i,s,o,a=!1,l,c,u,h;for(let g=n.firstChild;g;g=g.nextSibling){let y=vc(g);for(let w=0;w<y.length;w++){let v=y[w];i&&I0(i,v)&&(v=uk(hk(v,i.bottom),i.top));let O=WH(e,v),S=qH(t,v);if(O==0&&S==0)return g.nodeType==3?fk(g,e,t):gO(g,e,t);if(!r||o>S||o==S&&s>O){r=g,i=v,s=O,o=S;let E=S?t<v.top?-1:1:O?e<v.left?-1:1:0;a=!E||(E>0?w<y.length-1:w>0)}O==0?t>v.bottom&&(!u||u.bottom<v.bottom)?(l=g,u=v):t<v.top&&(!h||h.top>v.top)&&(c=g,h=v):u&&I0(u,v)?u=hk(u,v.bottom):h&&I0(h,v)&&(h=uk(h,v.top))}}if(u&&u.bottom>=t?(r=l,i=u):h&&h.top<=t&&(r=c,i=h),!r)return{node:n,offset:0};let d=Math.max(i.left,Math.min(i.right,e));if(r.nodeType==3)return fk(r,d,t);if(a&&r.contentEditable!="false")return gO(r,d,t);let p=Array.prototype.indexOf.call(n.childNodes,r)+(e>=(i.left+i.right)/2?1:0);return{node:n,offset:p}}function fk(n,e,t){let r=n.nodeValue.length,i=-1,s=1e9,o=0;for(let a=0;a<r;a++){let l=Ma(n,a,a+1).getClientRects();for(let c=0;c<l.length;c++){let u=l[c];if(u.top==u.bottom)continue;o||(o=e-u.left);let h=(u.top>t?u.top-t:t-u.bottom)-1;if(u.left-1<=e&&u.right+1>=e&&h<s){let d=e>=(u.left+u.right)/2,p=d;if((ie.chrome||ie.gecko)&&Ma(n,a).getBoundingClientRect().left==u.right&&(p=!d),h<=0)return{node:n,offset:a+(p?1:0)};i=a+(p?1:0),s=h}}}return{node:n,offset:i>-1?i:o>0?n.nodeValue.length:0}}function QM(n,e,t,r=-1){var i,s;let o=n.contentDOM.getBoundingClientRect(),a=o.top+n.viewState.paddingTop,l,{docHeight:c}=n.viewState,{x:u,y:h}=e,d=h-a;if(d<0)return 0;if(d>c)return n.state.doc.length;for(let E=n.viewState.heightOracle.textHeight/2,R=!1;l=n.elementAtHeight(d),l.type!=gn.Text;)for(;d=r>0?l.bottom+E:l.top-E,!(d>=0&&d<=c);){if(R)return t?null:0;R=!0,r=-r}h=a+d;let p=l.from;if(p<n.viewport.from)return n.viewport.from==0?0:t?null:dk(n,o,l,u,h);if(p>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:t?null:dk(n,o,l,u,h);let g=n.dom.ownerDocument,y=n.root.elementFromPoint?n.root:g,w=y.elementFromPoint(u,h);w&&!n.contentDOM.contains(w)&&(w=null),w||(u=Math.max(o.left+1,Math.min(o.right-1,u)),w=y.elementFromPoint(u,h),w&&!n.contentDOM.contains(w)&&(w=null));let v,O=-1;if(w&&((i=n.docView.nearest(w))===null||i===void 0?void 0:i.isEditable)!=!1){if(g.caretPositionFromPoint){let E=g.caretPositionFromPoint(u,h);E&&({offsetNode:v,offset:O}=E)}else if(g.caretRangeFromPoint){let E=g.caretRangeFromPoint(u,h);E&&({startContainer:v,startOffset:O}=E,(!n.contentDOM.contains(v)||ie.safari&&HH(v,O,u)||ie.chrome&&GH(v,O,u))&&(v=void 0))}v&&(O=Math.min(vi(v),O))}if(!v||!n.docView.dom.contains(v)){let E=pt.find(n.docView,p);if(!E)return d>l.top+l.height/2?l.to:l.from;({node:v,offset:O}=gO(E.dom,u,h))}let S=n.docView.nearest(v);if(!S)return null;if(S.isWidget&&((s=S.dom)===null||s===void 0?void 0:s.nodeType)==1){let E=S.dom.getBoundingClientRect();return e.y<E.top||e.y<=E.bottom&&e.x<=(E.left+E.right)/2?S.posAtStart:S.posAtEnd}else return S.localPosFromDOM(v,O)+S.posAtStart}function dk(n,e,t,r,i){let s=Math.round((r-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&t.height>n.defaultLineHeight*1.5){let a=n.viewState.heightOracle.textHeight,l=Math.floor((i-t.top-(n.defaultLineHeight-a)*.5)/a);s+=l*n.viewState.heightOracle.lineLength}let o=n.state.sliceDoc(t.from,t.to);return t.from+nO(o,s,n.state.tabSize)}function HH(n,e,t){let r;if(n.nodeType!=3||e!=(r=n.nodeValue.length))return!1;for(let i=n.nextSibling;i;i=i.nextSibling)if(i.nodeType!=1||i.nodeName!="BR")return!1;return Ma(n,r-1,r).getBoundingClientRect().left>t}function GH(n,e,t){if(e!=0)return!1;for(let i=n;;){let s=i.parentNode;if(!s||s.nodeType!=1||s.firstChild!=i)return!1;if(s.classList.contains("cm-line"))break;i=s}let r=n.nodeType==1?n.getBoundingClientRect():Ma(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect();return t-r.left>5}function yO(n,e,t){let r=n.lineBlockAt(e);if(Array.isArray(r.type)){let i;for(let s of r.type){if(s.from>e)break;if(!(s.to<e)){if(s.from<e&&s.to>e)return s;(!i||s.type==gn.Text&&(i.type!=s.type||(t<0?s.from<e:s.to>e)))&&(i=s)}}return i||r}return r}function XH(n,e,t,r){let i=yO(n,e.head,e.assoc||-1),s=!r||i.type!=gn.Text||!(n.lineWrapping||i.widgetLineBreaks)?null:n.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(s){let o=n.dom.getBoundingClientRect(),a=n.textDirectionAt(i.from),l=n.posAtCoords({x:t==(a==Xe.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(l!=null)return B.cursor(l,t?-1:1)}return B.cursor(t?i.to:i.from,t?-1:1)}function pk(n,e,t,r){let i=n.state.doc.lineAt(e.head),s=n.bidiSpans(i),o=n.textDirectionAt(i.from);for(let a=e,l=null;;){let c=DH(i,s,o,a,t),u=bM;if(!c){if(i.number==(t?n.state.doc.lines:1))return a;u=`
`,i=n.state.doc.line(i.number+(t?1:-1)),s=n.bidiSpans(i),c=n.visualLineSide(i,!t)}if(l){if(!l(u))return a}else{if(!r)return c;l=r(u)}a=c}}function KH(n,e,t){let r=n.state.charCategorizer(e),i=r(t);return s=>{let o=r(s);return i==Ze.Space&&(i=o),i==o}}function YH(n,e,t,r){let i=e.head,s=t?1:-1;if(i==(t?n.state.doc.length:0))return B.cursor(i,e.assoc);let o=e.goalColumn,a,l=n.contentDOM.getBoundingClientRect(),c=n.coordsAtPos(i,e.assoc||-1),u=n.documentTop;if(c)o==null&&(o=c.left-l.left),a=s<0?c.top:c.bottom;else{let p=n.viewState.lineBlockAt(i);o==null&&(o=Math.min(l.right-l.left,n.defaultCharacterWidth*(i-p.from))),a=(s<0?p.top:p.bottom)+u}let h=l.left+o,d=r??n.viewState.heightOracle.textHeight>>1;for(let p=0;;p+=10){let g=a+(d+p)*s,y=QM(n,{x:h,y:g},!1,s);if(g<l.top||g>l.bottom||(s<0?y<i:y>i)){let w=n.docView.coordsForChar(y),v=!w||g<w.top?-1:1;return B.cursor(y,v,void 0,o)}}}function Pp(n,e,t){for(;;){let r=0;for(let i of n)i.between(e-1,e+1,(s,o,a)=>{if(e>s&&e<o){let l=r||t||(e-s<o-e?-1:1);e=l<0?s:o,r=l}});if(!r)return e}}function N0(n,e,t){let r=Pp(n.state.facet(oS).map(i=>i(n)),t.from,e.head>t.from?-1:1);return r==t.from?t:B.cursor(r,r<t.from?1:-1)}const Iu="￿";class JH{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(Ee.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Iu}readRange(e,t){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i);let s=this.text.length;this.readNode(i);let o=i.nextSibling;if(o==t)break;let a=ze.get(i),l=ze.get(o);(a&&l?a.breakAfter:(a?a.breakAfter:$m(i))||$m(o)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>s)&&this.lineBreak(),i=o}return this.findPointBefore(r,t),this}readTextNode(e){let t=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,t.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=t.indexOf(this.lineSeparator,r),o=this.lineSeparator.length):(a=i.exec(t))&&(s=a.index,o=a[0].length),this.append(t.slice(r,s<0?t.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);r=s+o}}readNode(e){if(e.cmIgnore)return;let t=ze.get(e),r=t&&t.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==t&&(r.pos=this.text.length)}findPointInside(e,t){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(ZH(e,r.node,r.offset)?t:0))}}function ZH(n,e,t){for(;;){if(!e||t<vi(e))return!1;if(e==n)return!0;t=Da(e)+1,e=e.parentNode}}class mk{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class eG{constructor(e,t,r,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,r,0))){let a=s||o?[]:rG(e),l=new JH(a,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=iG(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=s&&s.node==a.focusNode&&s.offset==a.focusOffset||!sO(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),c=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!sO(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),u=e.viewport;if((ie.ios||ie.chrome)&&e.state.selection.main.empty&&l!=c&&(u.from>0||u.to<e.state.doc.length)){let h=Math.min(l,c),d=Math.max(l,c),p=u.from-h,g=u.to-d;(p==0||p==1||h==0)&&(g==0||g==-1||d==e.state.doc.length)&&(l=0,c=e.state.doc.length)}this.newSel=B.single(c,l)}}}function $M(n,e){let t,{newSel:r}=e,i=n.state.selection.main,s=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,l=i.from,c=null;(s===8||ie.android&&e.text.length<a-o)&&(l=i.to,c="end");let u=nG(n.state.doc.sliceString(o,a,Iu),e.text,l-o,c);u&&(ie.chrome&&s==13&&u.toB==u.from+2&&e.text.slice(u.from,u.toB)==Iu+Iu&&u.toB--,t={from:o+u.from,to:o+u.toA,insert:Ce.of(e.text.slice(u.from,u.toB).split(Iu))})}else r&&(!n.hasFocus&&n.state.facet($i)||r.main.eq(i))&&(r=null);if(!t&&!r)return!1;if(!t&&e.typeOver&&!i.empty&&r&&r.main.empty?t={from:i.from,to:i.to,insert:n.state.doc.slice(i.from,i.to)}:(ie.mac||ie.android)&&t&&t.from==t.to&&t.from==i.head-1&&/^\. ?$/.test(t.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(r&&t.insert.length==2&&(r=B.single(r.main.anchor-1,r.main.head-1)),t={from:t.from,to:t.to,insert:Ce.of([t.insert.toString().replace("."," ")])}):t&&t.from>=i.from&&t.to<=i.to&&(t.from!=i.from||t.to!=i.to)&&i.to-i.from-(t.to-t.from)<=4?t={from:i.from,to:i.to,insert:n.state.doc.slice(i.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,i.to))}:ie.chrome&&t&&t.from==t.to&&t.from==i.head&&t.insert.toString()==`
 `&&n.lineWrapping&&(r&&(r=B.single(r.main.anchor-1,r.main.head-1)),t={from:i.from,to:i.to,insert:Ce.of([" "])}),t)return lS(n,t,r,s);if(r&&!r.main.eq(i)){let o=!1,a="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(o=!0),a=n.inputState.lastSelectionOrigin),n.dispatch({selection:r,scrollIntoView:o,userEvent:a}),!0}else return!1}function lS(n,e,t,r=-1){if(ie.ios&&n.inputState.flushIOSKey(e))return!0;let i=n.state.selection.main;if(ie.android&&(e.to==i.to&&(e.from==i.from||e.from==i.from-1&&n.state.sliceDoc(e.from,i.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&Ql(n.contentDOM,"Enter",13)||(e.from==i.from-1&&e.to==i.to&&e.insert.length==0||r==8&&e.insert.length<e.to-e.from&&e.to>i.head)&&Ql(n.contentDOM,"Backspace",8)||e.from==i.from&&e.to==i.to+1&&e.insert.length==0&&Ql(n.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();n.inputState.composing>=0&&n.inputState.composing++;let o,a=()=>o||(o=tG(n,e,t));return n.state.facet(CM).some(l=>l(n,e.from,e.to,s,a))||n.dispatch(a()),!0}function tG(n,e,t){let r,i=n.state,s=i.selection.main;if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&n.inputState.composing<0){let a=s.from<e.from?i.sliceDoc(s.from,e.from):"",l=s.to>e.to?i.sliceDoc(e.to,s.to):"";r=i.replaceSelection(n.state.toText(a+e.insert.sliceString(0,void 0,n.state.lineBreak)+l))}else{let a=i.changes(e),l=t&&t.main.to<=a.newLength?t.main:void 0;if(i.selection.ranges.length>1&&n.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let c=n.state.sliceDoc(e.from,e.to),u,h=t&&FM(n,t.main.head);if(h){let g=e.insert.length-(e.to-e.from);u={from:h.from,to:h.to-g}}else u=n.state.doc.lineAt(s.head);let d=s.to-e.to,p=s.to-s.from;r=i.changeByRange(g=>{if(g.from==s.from&&g.to==s.to)return{changes:a,range:l||g.map(a)};let y=g.to-d,w=y-c.length;if(g.to-g.from!=p||n.state.sliceDoc(w,y)!=c||g.to>=u.from&&g.from<=u.to)return{range:g};let v=i.changes({from:w,to:y,insert:e.insert}),O=g.to-s.to;return{changes:v,range:l?B.range(Math.max(0,l.anchor+O),Math.max(0,l.head+O)):g.map(v)}})}else r={changes:a,selection:l&&i.selection.replaceRange(l)}}let o="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,o+=".compose",n.inputState.compositionFirstChange&&(o+=".start",n.inputState.compositionFirstChange=!1)),i.update(r,{userEvent:o,scrollIntoView:!0})}function nG(n,e,t,r){let i=Math.min(n.length,e.length),s=0;for(;s<i&&n.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==i&&n.length==e.length)return null;let o=n.length,a=e.length;for(;o>0&&a>0&&n.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(r=="end"){let l=Math.max(0,s-Math.min(o,a));t-=o+l-s}if(o<s&&n.length<e.length){let l=t<=s&&t>=o?s-t:0;s-=l,a=s+(a-o),o=s}else if(a<s){let l=t<=s&&t>=a?s-t:0;s-=l,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}function rG(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:s}=n.observer.selectionRange;return t&&(e.push(new mk(t,r)),(i!=t||s!=r)&&e.push(new mk(i,s))),e}function iG(n,e){if(n.length==0)return null;let t=n[0].pos,r=n.length==2?n[1].pos:t;return t>-1&&r>-1?B.single(t+e,r+e):null}class sG{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,ie.safari&&e.contentDOM.addEventListener("input",()=>null),ie.gecko&&xG(e.contentDOM.ownerDocument)}handleEvent(e){!dG(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,t){let r=this.handlers[e];if(r){for(let i of r.observers)i(this.view,t);for(let i of r.handlers){if(t.defaultPrevented)break;if(i(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=oG(e),r=this.handlers,i=this.view.contentDOM;for(let s in t)if(s!="scroll"){let o=!t[s].handlers.length,a=r[s];a&&o!=!a.handlers.length&&(i.removeEventListener(s,this.handleEvent),a=null),a||i.addEventListener(s,this.handleEvent,{passive:o})}for(let s in r)s!="scroll"&&!t[s]&&i.removeEventListener(s,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&zM.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),ie.android&&ie.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return ie.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=jM.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||aG.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Ql(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:ie.safari&&!ie.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function gk(n,e){return(t,r)=>{try{return e.call(n,r,t)}catch(i){An(t.state,i)}}}function oG(n){let e=Object.create(null);function t(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of n){let i=r.spec;if(i&&i.domEventHandlers)for(let s in i.domEventHandlers){let o=i.domEventHandlers[s];o&&t(s).handlers.push(gk(r.value,o))}if(i&&i.domEventObservers)for(let s in i.domEventObservers){let o=i.domEventObservers[s];o&&t(s).observers.push(gk(r.value,o))}}for(let r in Vr)t(r).handlers.push(Vr[r]);for(let r in mr)t(r).observers.push(mr[r]);return e}const jM=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],aG="dthko",zM=[16,17,18,20,91,92,224,225],Dd=6;function Md(n){return Math.max(0,n)*.7+8}function lG(n,e){return Math.max(Math.abs(n.clientX-e.clientX),Math.abs(n.clientY-e.clientY))}class cG{constructor(e,t,r,i){this.view=e,this.startEvent=t,this.style=r,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=gH(e.contentDOM),this.atoms=e.state.facet(oS).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(Ee.allowMultipleSelections)&&uG(e,t),this.dragging=fG(e,t)&&WM(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&lG(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,r=0,i=0,s=0,o=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:i,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:a}=this.scrollParents.y.getBoundingClientRect());let l=aS(this.view);e.clientX-l.left<=i+Dd?t=-Md(i-e.clientX):e.clientX+l.right>=o-Dd&&(t=Md(e.clientX-o)),e.clientY-l.top<=s+Dd?r=-Md(s-e.clientY):e.clientY+l.bottom>=a-Dd&&(r=Md(e.clientY-a)),this.setScrollSpeed(t,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let r=0;r<e.ranges.length;r++){let i=e.ranges[r],s=null;if(i.empty){let o=Pp(this.atoms,i.from,0);o!=i.from&&(s=B.cursor(o,-1))}else{let o=Pp(this.atoms,i.from,-1),a=Pp(this.atoms,i.to,1);(o!=i.from||a!=i.to)&&(s=B.range(i.from==i.anchor?o:a,i.from==i.head?o:a))}s&&(t||(t=e.ranges.slice()),t[r]=s)}return t?B.create(t,e.mainIndex):e}select(e){let{view:t}=this,r=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function uG(n,e){let t=n.state.facet(TM);return t.length?t[0](e):ie.mac?e.metaKey:e.ctrlKey}function hG(n,e){let t=n.state.facet(_M);return t.length?t[0](e):ie.mac?!e.altKey:!e.ctrlKey}function fG(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let r=Qh(n.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let s=0;s<i.length;s++){let o=i[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function dG(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,r;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(r=ze.get(t))&&r.ignoreEvent(e))return!1;return!0}const Vr=Object.create(null),mr=Object.create(null),BM=ie.ie&&ie.ie_version<15||ie.ios&&ie.webkit_version<604;function pG(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),UM(n,t.value)},50)}function uy(n,e,t){for(let r of n.facet(e))t=r(t,n);return t}function UM(n,e){e=uy(n.state,rS,e);let{state:t}=n,r,i=1,s=t.toText(e),o=s.lines==t.selection.ranges.length;if(vO!=null&&t.selection.ranges.every(l=>l.empty)&&vO==s.toString()){let l=-1;r=t.changeByRange(c=>{let u=t.doc.lineAt(c.from);if(u.from==l)return{range:c};l=u.from;let h=t.toText((o?s.line(i++).text:e)+t.lineBreak);return{changes:{from:u.from,insert:h},range:B.cursor(c.from+h.length)}})}else o?r=t.changeByRange(l=>{let c=s.line(i++);return{changes:{from:l.from,to:l.to,insert:c.text},range:B.cursor(l.from+c.length)}}):r=t.replaceSelection(s);n.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}mr.scroll=n=>{n.inputState.lastScrollTop=n.scrollDOM.scrollTop,n.inputState.lastScrollLeft=n.scrollDOM.scrollLeft};Vr.keydown=(n,e)=>(n.inputState.setSelectionOrigin("select"),e.keyCode==27&&n.inputState.tabFocusMode!=0&&(n.inputState.tabFocusMode=Date.now()+2e3),!1);mr.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};mr.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};Vr.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let r of n.state.facet(EM))if(t=r(n,e),t)break;if(!t&&e.button==0&&(t=yG(n,e)),t){let r=!n.hasFocus;n.inputState.startMouseSelection(new cG(n,e,t,r)),r&&n.observer.ignore(()=>{sM(n.contentDOM);let s=n.root.activeElement;s&&!s.contains(n.contentDOM)&&s.blur()});let i=n.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}return!1};function yk(n,e,t,r){if(r==1)return B.cursor(e,t);if(r==2)return UH(n.state,e,t);{let i=pt.find(n.docView,e),s=n.state.doc.lineAt(i?i.posAtEnd:e),o=i?i.posAtStart:s.from,a=i?i.posAtEnd:s.to;return a<n.state.doc.length&&a==s.to&&a++,B.range(o,a)}}let vk=(n,e,t)=>e>=t.top&&e<=t.bottom&&n>=t.left&&n<=t.right;function mG(n,e,t,r){let i=pt.find(n.docView,e);if(!i)return 1;let s=e-i.posAtStart;if(s==0)return 1;if(s==i.length)return-1;let o=i.coordsAt(s,-1);if(o&&vk(t,r,o))return-1;let a=i.coordsAt(s,1);return a&&vk(t,r,a)?1:o&&o.bottom>=r?-1:1}function wk(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:mG(n,t,e.clientX,e.clientY)}}const gG=ie.ie&&ie.ie_version<=11;let Ok=null,xk=0,Sk=0;function WM(n){if(!gG)return n.detail;let e=Ok,t=Sk;return Ok=n,Sk=Date.now(),xk=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(xk+1)%3:1}function yG(n,e){let t=wk(n,e),r=WM(e),i=n.state.selection;return{update(s){s.docChanged&&(t.pos=s.changes.mapPos(t.pos),i=i.map(s.changes))},get(s,o,a){let l=wk(n,s),c,u=yk(n,l.pos,l.bias,r);if(t.pos!=l.pos&&!o){let h=yk(n,t.pos,t.bias,r),d=Math.min(h.from,u.from),p=Math.max(h.to,u.to);u=d<u.from?B.range(d,p):B.range(p,d)}return o?i.replaceRange(i.main.extend(u.from,u.to)):a&&r==1&&i.ranges.length>1&&(c=vG(i,l.pos))?c:a?i.addRange(u):B.create([u])}}}function vG(n,e){for(let t=0;t<n.ranges.length;t++){let{from:r,to:i}=n.ranges[t];if(r<=e&&i>=e)return B.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}return null}Vr.dragstart=(n,e)=>{let{selection:{main:t}}=n.state;if(e.target.draggable){let i=n.docView.nearest(e.target);if(i&&i.isWidget){let s=i.posAtStart,o=s+i.length;(s>=t.to||o<=t.from)&&(t=B.range(s,o))}}let{inputState:r}=n;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",uy(n.state,iS,n.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Vr.dragend=n=>(n.inputState.draggedContent=null,!1);function bk(n,e,t,r){if(t=uy(n.state,rS,t),!t)return;let i=n.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=n.inputState,o=r&&s&&hG(n,e)?{from:s.from,to:s.to}:null,a={from:i,insert:t},l=n.state.changes(o?[o,a]:a);n.focus(),n.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:o?"move.drop":"input.drop"}),n.inputState.draggedContent=null}Vr.drop=(n,e)=>{if(!e.dataTransfer)return!1;if(n.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let r=Array(t.length),i=0,s=()=>{++i==t.length&&bk(n,e,r.filter(o=>o!=null).join(n.state.lineBreak),!1)};for(let o=0;o<t.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(r[o]=a.result),s()},a.readAsText(t[o])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return bk(n,e,r,!0),!0}return!1};Vr.paste=(n,e)=>{if(n.state.readOnly)return!0;n.observer.flush();let t=BM?null:e.clipboardData;return t?(UM(n,t.getData("text/plain")||t.getData("text/uri-list")),!0):(pG(n),!1)};function wG(n,e){let t=n.dom.parentNode;if(!t)return;let r=t.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),n.focus()},50)}function OG(n){let e=[],t=[],r=!1;for(let i of n.selection.ranges)i.empty||(e.push(n.sliceDoc(i.from,i.to)),t.push(i));if(!e.length){let i=-1;for(let{from:s}of n.selection.ranges){let o=n.doc.lineAt(s);o.number>i&&(e.push(o.text),t.push({from:o.from,to:Math.min(n.doc.length,o.to+1)})),i=o.number}r=!0}return{text:uy(n,iS,e.join(n.lineBreak)),ranges:t,linewise:r}}let vO=null;Vr.copy=Vr.cut=(n,e)=>{let{text:t,ranges:r,linewise:i}=OG(n.state);if(!t&&!i)return!1;vO=i?t:null,e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let s=BM?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",t),!0):(wG(n,t),!1)};const qM=Oi.define();function HM(n,e){let t=[];for(let r of n.facet(PM)){let i=r(n,e);i&&t.push(i)}return t.length?n.update({effects:t,annotations:qM.of(!0)}):null}function GM(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let t=HM(n.state,e);t?n.dispatch(t):n.update([])}},10)}mr.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),GM(n)};mr.blur=n=>{n.observer.clearSelectionRange(),GM(n)};mr.compositionstart=mr.compositionupdate=n=>{n.observer.editContext||(n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0))};mr.compositionend=n=>{n.observer.editContext||(n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,ie.chrome&&ie.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50))};mr.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};Vr.beforeinput=(n,e)=>{var t,r;if(e.inputType=="insertReplacementText"&&n.observer.editContext){let s=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),o=e.getTargetRanges();if(s&&o.length){let a=o[0],l=n.posAtDOM(a.startContainer,a.startOffset),c=n.posAtDOM(a.endContainer,a.endOffset);return lS(n,{from:l,to:c,insert:n.state.toText(s)},null),!0}}let i;if(ie.chrome&&ie.android&&(i=jM.find(s=>s.inputType==e.inputType))&&(n.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let s=((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>s+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}return ie.ios&&e.inputType=="deleteContentForward"&&n.observer.flushSoon(),ie.safari&&e.inputType=="insertText"&&n.inputState.composing>=0&&setTimeout(()=>mr.compositionend(n,e),20),!1};const Tk=new Set;function xG(n){Tk.has(n)||(Tk.add(n),n.addEventListener("copy",()=>{}),n.addEventListener("cut",()=>{}))}const _k=["pre-wrap","normal","pre-line","break-spaces"];let xc=!1;function Ek(){xc=!1}class SG{constructor(e){this.lineWrapping=e,this.doc=Ce.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let r=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((t-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return _k.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(t=!0,this.heightSamples[Math.floor(i*10)]=!0)}return t}refresh(e,t,r,i,s,o){let a=_k.indexOf(e)>-1,l=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=t,this.charWidth=r,this.textHeight=i,this.lineLength=s,l){this.heightSamples={};for(let c=0;c<o.length;c++){let u=o[c];u<0?c++:this.heightSamples[Math.floor(u*10)]=!0}}return l}}class bG{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class ti{constructor(e,t,r,i,s){this.from=e,this.length=t,this.top=r,this.height=i,this._content=s}get type(){return typeof this._content=="number"?gn.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Po?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new ti(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var He=function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n}(He||(He={}));const Ap=.001;class yn{constructor(e,t,r=2){this.length=e,this.height=t,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>Ap&&(xc=!0),this.height=e)}replace(e,t,r){return yn.of(r)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,r,i){let s=this,o=r.doc;for(let a=i.length-1;a>=0;a--){let{fromA:l,toA:c,fromB:u,toB:h}=i[a],d=s.lineAt(l,He.ByPosNoHeight,r.setDoc(t),0,0),p=d.to>=c?d:s.lineAt(c,He.ByPosNoHeight,r,0,0);for(h+=p.to-c,c=p.to;a>0&&d.from<=i[a-1].toA;)l=i[a-1].fromA,u=i[a-1].fromB,a--,l<d.from&&(d=s.lineAt(l,He.ByPosNoHeight,r,0,0));u+=d.from-l,l=d.from;let g=cS.build(r.setDoc(o),e,u,h);s=Bm(s,s.replace(l,c,g))}return s.updateHeight(r,0)}static empty(){return new Bn(0,0)}static of(e){if(e.length==1)return e[0];let t=0,r=e.length,i=0,s=0;for(;;)if(t==r)if(i>s*2){let a=e[t-1];a.break?e.splice(--t,1,a.left,null,a.right):e.splice(--t,1,a.left,a.right),r+=1+a.break,i-=a.size}else if(s>i*2){let a=e[r];a.break?e.splice(r,1,a.left,null,a.right):e.splice(r,1,a.left,a.right),r+=2+a.break,s-=a.size}else break;else if(i<s){let a=e[t++];a&&(i+=a.size)}else{let a=e[--r];a&&(s+=a.size)}let o=0;return e[t-1]==null?(o=1,t--):e[t]==null&&(o=1,r++),new TG(yn.of(e.slice(0,t)),o,yn.of(e.slice(r)))}}function Bm(n,e){return n==e?n:(n.constructor!=e.constructor&&(xc=!0),e)}yn.prototype.size=1;class XM extends yn{constructor(e,t,r){super(e,t),this.deco=r}blockAt(e,t,r,i){return new ti(i,this.length,r,this.height,this.deco||0)}lineAt(e,t,r,i,s){return this.blockAt(0,r,i,s)}forEachLine(e,t,r,i,s,o){e<=s+this.length&&t>=s&&o(this.blockAt(0,r,i,s))}updateHeight(e,t=0,r=!1,i){return i&&i.from<=t&&i.more&&this.setHeight(i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Bn extends XM{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,r,i){return new ti(i,this.length,r,this.height,this.breaks)}replace(e,t,r){let i=r[0];return r.length==1&&(i instanceof Bn||i instanceof Ft&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof Ft?i=new Bn(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):yn.of(r)}updateHeight(e,t=0,r=!1,i){return i&&i.from<=t&&i.more?this.setHeight(i.heights[i.index++]):(r||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Ft extends yn{constructor(e){super(e,0)}heightMetrics(e,t){let r=e.doc.lineAt(t).number,i=e.doc.lineAt(t+this.length).number,s=i-r+1,o,a=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*s);o=l/s,this.length>s+1&&(a=(this.height-l)/(this.length-s-1))}else o=this.height/s;return{firstLine:r,lastLine:i,perLine:o,perChar:a}}blockAt(e,t,r,i){let{firstLine:s,lastLine:o,perLine:a,perChar:l}=this.heightMetrics(t,i);if(t.lineWrapping){let c=i+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),u=t.doc.lineAt(c),h=a+u.length*l,d=Math.max(r,e-h/2);return new ti(u.from,u.length,d,h,0)}else{let c=Math.max(0,Math.min(o-s,Math.floor((e-r)/a))),{from:u,length:h}=t.doc.line(s+c);return new ti(u,h,r+a*c,a,0)}}lineAt(e,t,r,i,s){if(t==He.ByHeight)return this.blockAt(e,r,i,s);if(t==He.ByPosNoHeight){let{from:p,to:g}=r.doc.lineAt(e);return new ti(p,g-p,0,0,0)}let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(r,s),c=r.doc.lineAt(e),u=a+c.length*l,h=c.number-o,d=i+a*h+l*(c.from-s-h);return new ti(c.from,c.length,Math.max(i,Math.min(d,i+this.height-u)),u,0)}forEachLine(e,t,r,i,s,o){e=Math.max(e,s),t=Math.min(t,s+this.length);let{firstLine:a,perLine:l,perChar:c}=this.heightMetrics(r,s);for(let u=e,h=i;u<=t;){let d=r.doc.lineAt(u);if(u==e){let g=d.number-a;h+=l*g+c*(e-s-g)}let p=l+c*d.length;o(new ti(d.from,d.length,h,p,0)),h+=p,u=d.to+1}}replace(e,t,r){let i=this.length-t;if(i>0){let s=r[r.length-1];s instanceof Ft?r[r.length-1]=new Ft(s.length+i):r.push(null,new Ft(i-1))}if(e>0){let s=r[0];s instanceof Ft?r[0]=new Ft(e+s.length):r.unshift(new Ft(e-1),null)}return yn.of(r)}decomposeLeft(e,t){t.push(new Ft(e-1),null)}decomposeRight(e,t){t.push(null,new Ft(this.length-e-1))}updateHeight(e,t=0,r=!1,i){let s=t+this.length;if(i&&i.from<=t+this.length&&i.more){let o=[],a=Math.max(t,i.from),l=-1;for(i.from>t&&o.push(new Ft(i.from-t-1).updateHeight(e,t));a<=s&&i.more;){let u=e.doc.lineAt(a).length;o.length&&o.push(null);let h=i.heights[i.index++];l==-1?l=h:Math.abs(h-l)>=Ap&&(l=-2);let d=new Bn(u,h);d.outdated=!1,o.push(d),a+=u+1}a<=s&&o.push(null,new Ft(s-a).updateHeight(e,a));let c=yn.of(o);return(l<0||Math.abs(c.height-this.height)>=Ap||Math.abs(l-this.heightMetrics(e,t).perLine)>=Ap)&&(xc=!0),Bm(this,c)}else(r||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class TG extends yn{constructor(e,t,r){super(e.length+t+r.length,e.height+r.height,t|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,t,r,i){let s=r+this.left.height;return e<s?this.left.blockAt(e,t,r,i):this.right.blockAt(e,t,s,i+this.left.length+this.break)}lineAt(e,t,r,i,s){let o=i+this.left.height,a=s+this.left.length+this.break,l=t==He.ByHeight?e<o:e<a,c=l?this.left.lineAt(e,t,r,i,s):this.right.lineAt(e,t,r,o,a);if(this.break||(l?c.to<a:c.from>a))return c;let u=t==He.ByPosNoHeight?He.ByPosNoHeight:He.ByPos;return l?c.join(this.right.lineAt(a,u,r,o,a)):this.left.lineAt(a,u,r,i,s).join(c)}forEachLine(e,t,r,i,s,o){let a=i+this.left.height,l=s+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,t,r,i,s,o),t>=l&&this.right.forEachLine(e,t,r,a,l,o);else{let c=this.lineAt(l,He.ByPos,r,i,s);e<c.from&&this.left.forEachLine(e,c.from-1,r,i,s,o),c.to>=e&&c.from<=t&&o(c),t>c.to&&this.right.forEachLine(c.to+1,t,r,a,l,o)}}replace(e,t,r){let i=this.left.length+this.break;if(t<i)return this.balanced(this.left.replace(e,t,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,t-i,r));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let a of r)s.push(a);if(e>0&&kk(s,o-1),t<this.length){let a=s.length;this.decomposeRight(t,s),kk(s,a)}return yn.of(s)}decomposeLeft(e,t){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(r++,e>=r&&t.push(null)),e>r&&this.right.decomposeLeft(e-r,t)}decomposeRight(e,t){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,t);e<r&&this.left.decomposeRight(e,t),this.break&&e<i&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?yn.of(this.break?[e,null,t]:[e,t]):(this.left=Bm(this.left,e),this.right=Bm(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,r=!1,i){let{left:s,right:o}=this,a=t+s.length+this.break,l=null;return i&&i.from<=t+s.length&&i.more?l=s=s.updateHeight(e,t,r,i):s.updateHeight(e,t,r),i&&i.from<=a+o.length&&i.more?l=o=o.updateHeight(e,a,r,i):o.updateHeight(e,a,r),l?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function kk(n,e){let t,r;n[e]==null&&(t=n[e-1])instanceof Ft&&(r=n[e+1])instanceof Ft&&n.splice(e-1,3,new Ft(t.length+1+r.length))}const _G=5;class cS{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let r=Math.min(t,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof Bn?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new Bn(r-this.pos,-1)),this.writtenTo=r,t>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,r){if(e<t||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0,s=r.widget?r.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let o=t-e;r.block?this.addBlock(new XM(o,i,r)):(o||s||i>=_G)&&this.addLineDeco(i,s,o)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Bn(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let r=new Ft(t-e);return this.oracle.doc.lineAt(e).to==t&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Bn)return e;let t=new Bn(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,r){let i=this.ensureLine();i.length+=r,i.collapsed+=r,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=t,this.writtenTo=this.pos=this.pos+r}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof Bn)&&!this.isCovered?this.nodes.push(new Bn(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof Bn&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,t,r,i){let s=new cS(r,e);return Re.spans(t,r,i,s,0),s.finish(r)}}function EG(n,e,t){let r=new kG;return Re.compare(n,e,t,r,0),r.changes}class kG{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,r,i){(e<t||r&&r.heightRelevant||i&&i.heightRelevant)&&Cp(e,t,this.changes,5)}}function CG(n,e){let t=n.getBoundingClientRect(),r=n.ownerDocument,i=r.defaultView||window,s=Math.max(0,t.left),o=Math.min(i.innerWidth,t.right),a=Math.max(0,t.top),l=Math.min(i.innerHeight,t.bottom);for(let c=n.parentNode;c&&c!=r.body;)if(c.nodeType==1){let u=c,h=window.getComputedStyle(u);if((u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth)&&h.overflow!="visible"){let d=u.getBoundingClientRect();s=Math.max(s,d.left),o=Math.min(o,d.right),a=Math.max(a,d.top),l=Math.min(c==n.parentNode?i.innerHeight:l,d.bottom)}c=h.position=="absolute"||h.position=="fixed"?u.offsetParent:u.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:s-t.left,right:Math.max(s,o)-t.left,top:a-(t.top+e),bottom:Math.max(a,l)-(t.top+e)}}function PG(n){let e=n.getBoundingClientRect(),t=n.ownerDocument.defaultView||window;return e.left<t.innerWidth&&e.right>0&&e.top<t.innerHeight&&e.bottom>0}function AG(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class D0{constructor(e,t,r,i){this.from=e,this.to=t,this.size=r,this.displaySize=i}static same(e,t){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=t[r];if(i.from!=s.from||i.to!=s.to||i.size!=s.size)return!1}return!0}draw(e,t){return ae.replace({widget:new RG(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class RG extends Si{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class Ck{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=Pk,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Xe.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(sS).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new SG(t),this.stateDeco=e.facet($h).filter(r=>typeof r!="function"),this.heightMap=yn.empty().applyChanges(this.stateDeco,Ce.empty,this.heightOracle.setDoc(e.doc),[new fr(0,0,0,e.doc.length)]);for(let r=0;r<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());r++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=ae.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let r=0;r<=1;r++){let i=r?t.head:t.anchor;if(!e.some(({from:s,to:o})=>i>=s&&i<=o)){let{from:s,to:o}=this.lineBlockAt(i);e.push(new Ld(s,o))}}return this.viewports=e.sort((r,i)=>r.from-i.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?Pk:new uS(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Nu(e,this.scaler))})}update(e,t=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet($h).filter(u=>typeof u!="function");let i=e.changedRanges,s=fr.extendWithRanges(i,EG(r,this.stateDeco,e?e.changes:Ot.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);Ek(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=o||xc)&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<l.from||t.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,t));let c=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,e.flags|=this.updateForViewport(),(c||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(RM)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,r=window.getComputedStyle(t),i=this.heightOracle,s=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?Xe.RTL:Xe.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),a=t.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let c=0,u=0;if(a.width&&a.height){let{scaleX:E,scaleY:R}=iM(t,a);(E>.005&&Math.abs(this.scaleX-E)>.005||R>.005&&Math.abs(this.scaleY-R)>.005)&&(this.scaleX=E,this.scaleY=R,c|=16,o=l=!0)}let h=(parseInt(r.paddingTop)||0)*this.scaleY,d=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=h||this.paddingBottom!=d)&&(this.paddingTop=h,this.paddingBottom=d,c|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,c|=16);let p=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=p&&(this.scrollAnchorHeight=-1,this.scrollTop=p),this.scrolledToBottom=aM(e.scrollDOM);let g=(this.printing?AG:CG)(t,this.paddingTop),y=g.top-this.pixelViewport.top,w=g.bottom-this.pixelViewport.bottom;this.pixelViewport=g;let v=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(v!=this.inView&&(this.inView=v,v&&(l=!0)),!this.inView&&!this.scrollTarget&&!PG(e.dom))return 0;let O=a.width;if((this.contentDOMWidth!=O||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,c|=16),l){let E=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(E)&&(o=!0),o||i.lineWrapping&&Math.abs(O-this.contentDOMWidth)>i.charWidth){let{lineHeight:R,charWidth:M,textHeight:b}=e.docView.measureTextSize();o=R>0&&i.refresh(s,R,M,b,O/M,E),o&&(e.docView.minWidth=0,c|=16)}y>0&&w>0?u=Math.max(y,w):y<0&&w<0&&(u=Math.min(y,w)),Ek();for(let R of this.viewports){let M=R.from==this.viewport.from?E:e.docView.measureVisibleLineHeights(R);this.heightMap=(o?yn.empty().applyChanges(this.stateDeco,Ce.empty,this.heightOracle,[new fr(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,o,new bG(R.from,M))}xc&&(c|=2)}let S=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return S&&(c&2&&(c|=this.updateScaler()),this.viewport=this.getViewport(u,this.scrollTarget),c|=this.updateForViewport()),(c&2||S)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),c|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),c}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,l=new Ld(i.lineAt(o-r*1e3,He.ByHeight,s,0,0).from,i.lineAt(a+(1-r)*1e3,He.ByHeight,s,0,0).to);if(t){let{head:c}=t.range;if(c<l.from||c>l.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),h=i.lineAt(c,He.ByPos,s,0,0),d;t.y=="center"?d=(h.top+h.bottom)/2-u/2:t.y=="start"||t.y=="nearest"&&c<l.from?d=h.top:d=h.bottom-u,l=new Ld(i.lineAt(d-1e3/2,He.ByHeight,s,0,0).from,i.lineAt(d+u+1e3/2,He.ByHeight,s,0,0).to)}}return l}mapViewport(e,t){let r=t.mapPos(e.from,-1),i=t.mapPos(e.to,1);return new Ld(this.heightMap.lineAt(r,He.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,He.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,He.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(t,He.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||i<=o-Math.max(10,Math.min(-r,250)))&&(t==this.state.doc.length||s>=a+Math.max(10,Math.min(r,250)))&&i>o-2*1e3&&s<a+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let r=[];for(let i of e)t.touchesRange(i.from,i.to)||r.push(new D0(t.mapPos(i.from),t.mapPos(i.to),i.size,i.displaySize));return r}ensureLineGaps(e,t){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,s=i>>1,o=i<<1;if(this.defaultTextDirection!=Xe.LTR&&!r)return[];let a=[],l=(u,h,d,p)=>{if(h-u<s)return;let g=this.state.selection.main,y=[g.from];g.empty||y.push(g.to);for(let v of y)if(v>u&&v<h){l(u,v-10,d,p),l(v+10,h,d,p);return}let w=NG(e,v=>v.from>=d.from&&v.to<=d.to&&Math.abs(v.from-u)<s&&Math.abs(v.to-h)<s&&!y.some(O=>v.from<O&&v.to>O));if(!w){if(h<d.to&&t&&r&&t.visibleRanges.some(S=>S.from<=h&&S.to>=h)){let S=t.moveToLineBoundary(B.cursor(h),!1,!0).head;S>u&&(h=S)}let v=this.gapSize(d,u,h,p),O=r||v<2e6?v:2e6;w=new D0(u,h,v,O)}a.push(w)},c=u=>{if(u.length<o||u.type!=gn.Text)return;let h=IG(u.from,u.to,this.stateDeco);if(h.total<o)return;let d=this.scrollTarget?this.scrollTarget.range.head:null,p,g;if(r){let y=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,w,v;if(d!=null){let O=Fd(h,d),S=((this.visibleBottom-this.visibleTop)/2+y)/u.height;w=O-S,v=O+S}else w=(this.visibleTop-u.top-y)/u.height,v=(this.visibleBottom-u.top+y)/u.height;p=Vd(h,w),g=Vd(h,v)}else{let y=h.total*this.heightOracle.charWidth,w=i*this.heightOracle.charWidth,v=0;if(y>2e6)for(let M of e)M.from>=u.from&&M.from<u.to&&M.size!=M.displaySize&&M.from*this.heightOracle.charWidth+v<this.pixelViewport.left&&(v=M.size-M.displaySize);let O=this.pixelViewport.left+v,S=this.pixelViewport.right+v,E,R;if(d!=null){let M=Fd(h,d),b=((S-O)/2+w)/y;E=M-b,R=M+b}else E=(O-w)/y,R=(S+w)/y;p=Vd(h,E),g=Vd(h,R)}p>u.from&&l(u.from,p,u,h),g<u.to&&l(g,u.to,u,h)};for(let u of this.viewportLines)Array.isArray(u.type)?u.type.forEach(c):c(u);return a}gapSize(e,t,r,i){let s=Fd(i,r)-Fd(i,t);return this.heightOracle.lineWrapping?e.height*s:i.total*this.heightOracle.charWidth*s}updateLineGaps(e){D0.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=ae.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let r=[];Re.spans(t,this.viewport.from,this.viewport.to,{span(s,o){r.push({from:s,to:o})},point(){}},20);let i=0;if(r.length!=this.visibleRanges.length)i=12;else for(let s=0;s<r.length&&!(i&8);s++){let o=this.visibleRanges[s],a=r[s];(o.from!=a.from||o.to!=a.to)&&(i|=4,e&&e.mapPos(o.from,-1)==a.from&&e.mapPos(o.to,1)==a.to||(i|=8))}return this.visibleRanges=r,i}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||Nu(this.heightMap.lineAt(e,He.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||Nu(this.heightMap.lineAt(this.scaler.fromDOM(e),He.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return Nu(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Ld{constructor(e,t){this.from=e,this.to=t}}function IG(n,e,t){let r=[],i=n,s=0;return Re.spans(t,n,e,{span(){},point(o,a){o>i&&(r.push({from:i,to:o}),s+=o-i),i=a}},20),i<e&&(r.push({from:i,to:e}),s+=e-i),{total:s,ranges:r}}function Vd({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let r=Math.floor(n*t);for(let i=0;;i++){let{from:s,to:o}=e[i],a=o-s;if(r<=a)return s+r;r-=a}}function Fd(n,e){let t=0;for(let{from:r,to:i}of n.ranges){if(e<=i){t+=e-r;break}t+=i-r}return t/n.total}function NG(n,e){for(let t of n)if(e(t))return t}const Pk={toDOM(n){return n},fromDOM(n){return n},scale:1,eq(n){return n==this}};class uS{constructor(e,t,r){let i=0,s=0,o=0;this.viewports=r.map(({from:a,to:l})=>{let c=t.lineAt(a,He.ByPos,e,0,0).top,u=t.lineAt(l,He.ByPos,e,0,0).bottom;return i+=u-c,{from:a,to:l,top:c,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(t.height-i);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(e){for(let t=0,r=0,i=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.top)return i+(e-r)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);r=s.bottom,i=s.domBottom}}fromDOM(e){for(let t=0,r=0,i=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.domTop)return r+(e-i)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);r=s.bottom,i=s.domBottom}}eq(e){return e instanceof uS?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,r)=>t.from==e.viewports[r].from&&t.to==e.viewports[r].to):!1}}function Nu(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),r=e.toDOM(n.bottom);return new ti(n.from,n.length,t,r-t,Array.isArray(n._content)?n._content.map(i=>Nu(i,e)):n._content)}const Qd=ne.define({combine:n=>n.join(" ")}),wO=ne.define({combine:n=>n.indexOf(!0)>-1}),OO=ko.newName(),KM=ko.newName(),YM=ko.newName(),JM={"&light":"."+KM,"&dark":"."+YM};function xO(n,e,t){return new ko(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return n;if(!t||!t[i])throw new RangeError(`Unsupported selector: ${i}`);return t[i]}):n+" "+r}})}const DG=xO("."+OO,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},JM),MG={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},M0=ie.ie&&ie.ie_version<=11;class LG{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new yH,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let r of t)this.queue.push(r);(ie.ie&&ie.ie_version<=11||ie.ios&&e.composing)&&t.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&e.constructor.EDIT_CONTEXT!==!1&&!(ie.chrome&&ie.chrome_version<126)&&(this.editContext=new FG(e),e.state.facet($i)&&(e.contentDOM.editContext=this.editContext.editContext)),M0&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,r)=>t!=e[r]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet($i)?r.root.activeElement!=this.dom:!kp(this.dom,i))return;let s=i.anchorNode&&r.docView.nearest(i.anchorNode);if(s&&s.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(ie.ie&&ie.ie_version<=11||ie.android&&ie.chrome)&&!r.state.selection.main.empty&&i.focusNode&&Zu(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=Qh(e.root);if(!t)return!1;let r=ie.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&VG(this.view,t)||t;if(!r||this.selectionRange.eq(r))return!1;let i=kp(this.dom,r);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&wH(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let r=this.dom;r;)if(r.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=t)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,MG),M0&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),M0&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var r;if(!this.delayedAndroidKey){let i=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&Ql(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,r=-1,i=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(i=!0),t==-1?{from:t,to:r}=o:(t=Math.min(o.from,t),r=Math.max(o.to,r)))}return{from:t,to:r,typeOver:i}}readChange(){let{from:e,to:t,typeOver:r}=this.processRecords(),i=this.selectionChanged&&kp(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new eG(this.view,e,t,r);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let r=this.view.state,i=$M(this.view,t);return this.view.state==r&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let r=Ak(t,e.previousSibling||e.target.previousSibling,-1),i=Ak(t,e.nextSibling||e.target.nextSibling,1);return{from:r?t.posAfter(r):t.posAtStart,to:i?t.posBefore(i):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet($i)!=e.state.facet($i)&&(e.view.contentDOM.editContext=e.state.facet($i)?this.editContext.editContext:null))}destroy(){var e,t,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function Ak(n,e,t){for(;e;){let r=ze.get(e);if(r&&r.parent==n)return r;let i=e.parentNode;e=i!=n.dom?i:t>0?e.nextSibling:e.previousSibling}return null}function Rk(n,e){let t=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=n.docView.domAtPos(n.state.selection.main.anchor);return Zu(o.node,o.offset,i,s)&&([t,r,i,s]=[i,s,t,r]),{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:s}}function VG(n,e){if(e.getComposedRanges){let i=e.getComposedRanges(n.root)[0];if(i)return Rk(n,i)}let t=null;function r(i){i.preventDefault(),i.stopImmediatePropagation(),t=i.getTargetRanges()[0]}return n.contentDOM.addEventListener("beforeinput",r,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",r,!0),t?Rk(n,t):null}class FG{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=r=>{let i=e.state.selection.main,{anchor:s,head:o}=i,a=this.toEditorPos(r.updateRangeStart),l=this.toEditorPos(r.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:r.updateRangeStart,editorBase:a,drifted:!1});let c={from:a,to:l,insert:Ce.of(r.text.split(`
`))};if(c.from==this.from&&s<this.from?c.from=s:c.to==this.to&&s>this.to&&(c.to=s),c.from==c.to&&!c.insert.length){let u=B.single(this.toEditorPos(r.selectionStart),this.toEditorPos(r.selectionEnd));u.main.eq(i)||e.dispatch({selection:u,userEvent:"select"});return}if((ie.mac||ie.android)&&c.from==o-1&&/^\. ?$/.test(r.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(c={from:a,to:l,insert:Ce.of([r.text.replace("."," ")])}),this.pendingContextChange=c,!e.state.readOnly){let u=this.to-this.from+(c.to-c.from+c.insert.length);lS(e,c,B.single(this.toEditorPos(r.selectionStart,u),this.toEditorPos(r.selectionEnd,u)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state))},this.handlers.characterboundsupdate=r=>{let i=[],s=null;for(let o=this.toEditorPos(r.rangeStart),a=this.toEditorPos(r.rangeEnd);o<a;o++){let l=e.coordsForChar(o);s=l&&new DOMRect(l.left,l.top,l.right-l.left,l.bottom-l.top)||s||new DOMRect,i.push(s)}t.updateCharacterBounds(r.rangeStart,i)},this.handlers.textformatupdate=r=>{let i=[];for(let s of r.getTextFormats()){let o=s.underlineStyle,a=s.underlineThickness;if(o!="None"&&a!="None"){let l=this.toEditorPos(s.rangeStart),c=this.toEditorPos(s.rangeEnd);if(l<c){let u=`text-decoration: underline ${o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${a=="Thin"?1:2}px`;i.push(ae.mark({attributes:{style:u}}).range(l,c))}}}e.dispatch({effects:NM.of(ae.set(i))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:r}=this.composing;this.composing=null,r&&this.reset(e.state)}};for(let r in this.handlers)t.addEventListener(r,this.handlers[r]);this.measureReq={read:r=>{this.editContext.updateControlBounds(r.contentDOM.getBoundingClientRect());let i=Qh(r.root);i&&i.rangeCount&&this.editContext.updateSelectionBounds(i.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,r=!1,i=this.pendingContextChange;return e.changes.iterChanges((s,o,a,l,c)=>{if(r)return;let u=c.length-(o-s);if(i&&o>=i.to)if(i.from==s&&i.to==o&&i.insert.eq(c)){i=this.pendingContextChange=null,t+=u,this.to+=u;return}else i=null,this.revertPending(e.state);if(s+=t,o+=t,o<=this.from)this.from+=u,this.to+=u;else if(s<this.to){if(s<this.from||o>this.to||this.to-this.from+c.length>3e4){r=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(o),c.toString()),this.to+=u}t+=u}),i&&!r&&this.revertPending(e.state),!r}update(e){let t=this.pendingContextChange,r=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(r.from,r.to)&&e.transactions.some(i=>!i.isUserEvent("input.type")&&i.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),i=this.toContextPos(t.head);(this.editContext.selectionStart!=r||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(r,i)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let r=this.composing;return r&&r.drifted?r.editorBase+(e-r.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class J{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:r}=e;this.dispatchTransactions=e.dispatchTransactions||r&&(i=>i.forEach(s=>r(s,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=e.root||vH(e.parent)||document,this.viewState=new Ck(e.state||Ee.create(e)),e.scrollTo&&e.scrollTo.is(Nd)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Au).map(i=>new R0(i));for(let i of this.plugins)i.update(this);this.observer=new LG(this),this.inputState=new sG(this),this.inputState.ensureHandlers(this.plugins),this.docView=new ck(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=e.length==1&&e[0]instanceof gt?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,r=!1,i,s=this.state;for(let d of e){if(d.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=d.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,a=0,l=null;e.some(d=>d.annotation(qM))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=HM(s,o),l||(a=1));let c=this.observer.delayedAndroidKey,u=null;if(c?(this.observer.clearDelayedAndroidKey(),u=this.observer.readChange(),(u&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(u=null)):this.observer.clear(),s.facet(Ee.phrases)!=this.state.facet(Ee.phrases))return this.setState(s);i=zm.create(this,s,e),i.flags|=a;let h=this.viewState.scrollTarget;try{this.updateState=2;for(let d of e){if(h&&(h=h.map(d.changes)),d.scrollIntoView){let{main:p}=d.state.selection;h=new $l(p.empty?p:B.cursor(p.head,p.head>p.anchor?-1:1))}for(let p of d.effects)p.is(Nd)&&(h=p.value.clip(this.state))}this.viewState.update(i,h),this.bidiCache=Um.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),t=this.docView.update(i),this.state.facet(Ru)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(d=>d.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(Qd)!=i.state.facet(Qd)&&(this.viewState.mustMeasureContent=!0),(t||r||h||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!i.empty)for(let d of this.state.facet(mO))try{d(i)}catch(p){An(this.state,p,"update listener")}(l||u)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),u&&!$M(this,u)&&c.force&&Ql(this.contentDOM,c.key,c.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new Ck(e),this.plugins=e.facet(Au).map(r=>new R0(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new ck(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(Au),r=e.state.facet(Au);if(t!=r){let i=[];for(let s of r){let o=t.indexOf(s);if(o<0)i.push(new R0(s));else{let a=this.plugins[o];a.mustUpdate=e,i.push(a)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);t!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(r){An(this.state,r,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,r=this.scrollDOM,i=r.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(aM(r))s=-1,o=this.viewState.heightMap.height;else{let p=this.viewState.scrollAnchorAt(i);s=p.from,o=p.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let c=[];l&4||([this.measureRequests,c]=[c,this.measureRequests]);let u=c.map(p=>{try{return p.read(this)}catch(g){return An(this.state,g),Ik}}),h=zm.create(this,this.state,[]),d=!1;h.flags|=l,t?t.flags|=l:t=h,this.updateState=2,h.empty||(this.updatePlugins(h),this.inputState.update(h),this.updateAttrs(),d=this.docView.update(h),d&&this.docViewUpdate());for(let p=0;p<c.length;p++)if(u[p]!=Ik)try{let g=c[p];g.write&&g.write(u[p],this)}catch(g){An(this.state,g)}if(d&&this.docView.updateSelection(!0),!h.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let g=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(g>1||g<-1){i=i+g,r.scrollTop=i/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let a of this.state.facet(mO))a(t)}get themeClasses(){return OO+" "+(this.state.facet(wO)?YM:KM)+" "+this.state.facet(Qd)}updateAttrs(){let e=Nk(this,DM,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet($i)?"true":"false",class:"cm-content",style:`${ie.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),Nk(this,sS,t);let r=this.observer.ignore(()=>{let i=uO(this.contentDOM,this.contentAttrs,t),s=uO(this.dom,this.editorAttrs,e);return i||s});return this.editorAttrs=e,this.contentAttrs=t,r}showAnnouncements(e){let t=!0;for(let r of e)for(let i of r.effects)if(i.is(J.announce)){t&&(this.announceDOM.textContent=""),t=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(Ru);let e=this.state.facet(J.cspNonce);ko.mount(this.root,this.styleModules.concat(DG).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(r=>r.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,r){return N0(this,e,pk(this,e,t,r))}moveByGroup(e,t){return N0(this,e,pk(this,e,t,r=>KH(this,e.head,r)))}visualLineSide(e,t){let r=this.bidiSpans(e),i=this.textDirectionAt(e.from),s=r[t?r.length-1:0];return B.cursor(s.side(t,i)+e.from,s.forward(!t,i)?1:-1)}moveToLineBoundary(e,t,r=!0){return XH(this,e,t,r)}moveVertically(e,t,r){return N0(this,e,YH(this,e,t,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),QM(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let r=this.docView.coordsAt(e,t);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),s=this.bidiSpans(i),o=s[Xs.find(s,e-i.from,-1,t)];return Tf(r,o.dir==Xe.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(AM)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>QG)return SM(e.length);let t=this.textDirectionAt(e.from),r;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==t&&(s.fresh||xM(s.isolates,r=lk(this,e))))return s.order;r||(r=lk(this,e));let i=NH(e.text,t,r);return this.bidiCache.push(new Um(e.from,e.to,t,r,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||ie.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{sM(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return Nd.of(new $l(typeof e=="number"?B.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return Nd.of(new $l(B.cursor(r.from),"start","start",r.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return ft.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return ft.define(()=>({}),{eventObservers:e})}static theme(e,t){let r=ko.newName(),i=[Qd.of(r),Ru.of(xO(`.${r}`,e))];return t&&t.dark&&i.push(wO.of(!0)),i}static baseTheme(e){return Qo.lowest(Ru.of(xO("."+OO,e,JM)))}static findFromDOM(e){var t;let r=e.querySelector(".cm-content"),i=r&&ze.get(r)||ze.get(e);return((t=i==null?void 0:i.rootView)===null||t===void 0?void 0:t.view)||null}}J.styleModule=Ru;J.inputHandler=CM;J.clipboardInputFilter=rS;J.clipboardOutputFilter=iS;J.scrollHandler=IM;J.focusChangeEffect=PM;J.perLineTextDirection=AM;J.exceptionSink=kM;J.updateListener=mO;J.editable=$i;J.mouseSelectionStyle=EM;J.dragMovesSelection=_M;J.clickAddsSelectionRange=TM;J.decorations=$h;J.outerDecorations=MM;J.atomicRanges=oS;J.bidiIsolatedRanges=LM;J.scrollMargins=VM;J.darkTheme=wO;J.cspNonce=ne.define({combine:n=>n.length?n[0]:""});J.contentAttributes=sS;J.editorAttributes=DM;J.lineWrapping=J.contentAttributes.of({class:"cm-lineWrapping"});J.announce=ge.define();const QG=4096,Ik={};class Um{constructor(e,t,r,i,s,o){this.from=e,this.to=t,this.dir=r,this.isolates=i,this.fresh=s,this.order=o}static update(e,t){if(t.empty&&!e.some(s=>s.fresh))return e;let r=[],i=e.length?e[e.length-1].dir:Xe.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==i&&!t.touchesRange(o.from,o.to)&&r.push(new Um(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return r}}function Nk(n,e,t){for(let r=n.state.facet(e),i=r.length-1;i>=0;i--){let s=r[i],o=typeof s=="function"?s(n):s;o&&cO(o,t)}return t}const $G=ie.mac?"mac":ie.windows?"win":ie.linux?"linux":"key";function jG(n,e){const t=n.split(/-(?!$)/);let r=t[t.length-1];r=="Space"&&(r=" ");let i,s,o,a;for(let l=0;l<t.length-1;++l){const c=t[l];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))i=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))e=="mac"?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+c)}return i&&(r="Alt-"+r),s&&(r="Ctrl-"+r),a&&(r="Meta-"+r),o&&(r="Shift-"+r),r}function $d(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}const zG=Qo.default(J.domEventHandlers({keydown(n,e){return eL(ZM(e.state),n,e,"editor")}})),kf=ne.define({enables:zG}),Dk=new WeakMap;function ZM(n){let e=n.facet(kf),t=Dk.get(e);return t||Dk.set(e,t=WG(e.reduce((r,i)=>r.concat(i),[]))),t}function BG(n,e,t){return eL(ZM(n.state),e,n,t)}let Vs=null;const UG=4e3;function WG(n,e=$G){let t=Object.create(null),r=Object.create(null),i=(o,a)=>{let l=r[o];if(l==null)r[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,a,l,c,u)=>{var h,d;let p=t[o]||(t[o]=Object.create(null)),g=a.split(/ (?!$)/).map(v=>jG(v,e));for(let v=1;v<g.length;v++){let O=g.slice(0,v).join(" ");i(O,!0),p[O]||(p[O]={preventDefault:!0,stopPropagation:!1,run:[S=>{let E=Vs={view:S,prefix:O,scope:o};return setTimeout(()=>{Vs==E&&(Vs=null)},UG),!0}]})}let y=g.join(" ");i(y,!1);let w=p[y]||(p[y]={preventDefault:!1,stopPropagation:!1,run:((d=(h=p._any)===null||h===void 0?void 0:h.run)===null||d===void 0?void 0:d.slice())||[]});l&&w.run.push(l),c&&(w.preventDefault=!0),u&&(w.stopPropagation=!0)};for(let o of n){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let c of a){let u=t[c]||(t[c]=Object.create(null));u._any||(u._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:h}=o;for(let d in u)u[d].run.push(p=>h(p,SO))}let l=o[e]||o.key;if(l)for(let c of a)s(c,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(c,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return t}let SO=null;function eL(n,e,t,r){SO=e;let i=dH(e),s=_n(i,0),o=ei(s)==i.length&&i!=" ",a="",l=!1,c=!1,u=!1;Vs&&Vs.view==t&&Vs.scope==r&&(a=Vs.prefix+" ",zM.indexOf(e.keyCode)<0&&(c=!0,Vs=null));let h=new Set,d=w=>{if(w){for(let v of w.run)if(!h.has(v)&&(h.add(v),v(t)))return w.stopPropagation&&(u=!0),!0;w.preventDefault&&(w.stopPropagation&&(u=!0),c=!0)}return!1},p=n[r],g,y;return p&&(d(p[a+$d(i,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(ie.windows&&e.ctrlKey&&e.altKey)&&(g=Co[e.keyCode])&&g!=i?(d(p[a+$d(g,e,!0)])||e.shiftKey&&(y=Fh[e.keyCode])!=i&&y!=g&&d(p[a+$d(y,e,!1)]))&&(l=!0):o&&e.shiftKey&&d(p[a+$d(i,e,!0)])&&(l=!0),!l&&d(p._any)&&(l=!0)),c&&(l=!0),l&&u&&e.stopPropagation(),SO=null,l}class Cf{constructor(e,t,r,i,s){this.className=e,this.left=t,this.top=r,this.width=i,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,r){if(r.empty){let i=e.coordsAtPos(r.head,r.assoc||1);if(!i)return[];let s=tL(e);return[new Cf(t,i.left-s.left,i.top-s.top,null,i.bottom-i.top)]}else return qG(e,t,r)}}function tL(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==Xe.LTR?e.left:e.right-n.scrollDOM.clientWidth*n.scaleX)-n.scrollDOM.scrollLeft*n.scaleX,top:e.top-n.scrollDOM.scrollTop*n.scaleY}}function Mk(n,e,t,r){let i=n.coordsAtPos(e,t*2);if(!i)return r;let s=n.dom.getBoundingClientRect(),o=(i.top+i.bottom)/2,a=n.posAtCoords({x:s.left+1,y:o}),l=n.posAtCoords({x:s.right-1,y:o});return a==null||l==null?r:{from:Math.max(r.from,Math.min(a,l)),to:Math.min(r.to,Math.max(a,l))}}function qG(n,e,t){if(t.to<=n.viewport.from||t.from>=n.viewport.to)return[];let r=Math.max(t.from,n.viewport.from),i=Math.min(t.to,n.viewport.to),s=n.textDirection==Xe.LTR,o=n.contentDOM,a=o.getBoundingClientRect(),l=tL(n),c=o.querySelector(".cm-line"),u=c&&window.getComputedStyle(c),h=a.left+(u?parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)):0),d=a.right-(u?parseInt(u.paddingRight):0),p=yO(n,r,1),g=yO(n,i,-1),y=p.type==gn.Text?p:null,w=g.type==gn.Text?g:null;if(y&&(n.lineWrapping||p.widgetLineBreaks)&&(y=Mk(n,r,1,y)),w&&(n.lineWrapping||g.widgetLineBreaks)&&(w=Mk(n,i,-1,w)),y&&w&&y.from==w.from&&y.to==w.to)return O(S(t.from,t.to,y));{let R=y?S(t.from,null,y):E(p,!1),M=w?S(null,t.to,w):E(g,!0),b=[];return(y||p).to<(w||g).from-(y&&w?1:0)||p.widgetLineBreaks>1&&R.bottom+n.defaultLineHeight/2<M.top?b.push(v(h,R.bottom,d,M.top)):R.bottom<M.top&&n.elementAtHeight((R.bottom+M.top)/2).type==gn.Text&&(R.bottom=M.top=(R.bottom+M.top)/2),O(R).concat(b).concat(O(M))}function v(R,M,b,T){return new Cf(e,R-l.left,M-l.top,b-R,T-M)}function O({top:R,bottom:M,horizontal:b}){let T=[];for(let _=0;_<b.length;_+=2)T.push(v(b[_],R,b[_+1],M));return T}function S(R,M,b){let T=1e9,_=-1e9,C=[];function D(j,ee,te,Y,Q){let $=n.coordsAtPos(j,j==b.to?-2:2),G=n.coordsAtPos(te,te==b.from?2:-2);!$||!G||(T=Math.min($.top,G.top,T),_=Math.max($.bottom,G.bottom,_),Q==Xe.LTR?C.push(s&&ee?h:$.left,s&&Y?d:G.right):C.push(!s&&Y?h:G.left,!s&&ee?d:$.right))}let N=R??b.from,I=M??b.to;for(let j of n.visibleRanges)if(j.to>N&&j.from<I)for(let ee=Math.max(j.from,N),te=Math.min(j.to,I);;){let Y=n.state.doc.lineAt(ee);for(let Q of n.bidiSpans(Y)){let $=Q.from+Y.from,G=Q.to+Y.from;if($>=te)break;G>ee&&D(Math.max($,ee),R==null&&$<=N,Math.min(G,te),M==null&&G>=I,Q.dir)}if(ee=Y.to+1,ee>=te)break}return C.length==0&&D(N,R==null,I,M==null,n.textDirection),{top:T,bottom:_,horizontal:C}}function E(R,M){let b=a.top+(M?R.top:R.bottom);return{top:b,bottom:b,horizontal:[]}}}function HG(n,e){return n.constructor==e.constructor&&n.eq(e)}class GG{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(Rp)!=e.state.facet(Rp)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,r=e.facet(Rp);for(;t<r.length&&r[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,r)=>!HG(t,this.drawn[r]))){let t=this.dom.firstChild,r=0;for(let i of e)i.update&&t&&i.constructor&&this.drawn[r].constructor&&i.update(t,this.drawn[r])?(t=t.nextSibling,r++):this.dom.insertBefore(i.draw(),t);for(;t;){let i=t.nextSibling;t.remove(),t=i}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Rp=ne.define();function nL(n){return[ft.define(e=>new GG(e,n)),Rp.of(n)]}const jh=ne.define({combine(n){return xi(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function XG(n={}){return[jh.of(n),KG,YG,JG,RM.of(!0)]}function rL(n){return n.startState.facet(jh)!=n.state.facet(jh)}const KG=nL({above:!0,markers(n){let{state:e}=n,t=e.facet(jh),r=[];for(let i of e.selection.ranges){let s=i==e.selection.main;if(i.empty||t.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=i.empty?i:B.cursor(i.head,i.head>i.anchor?-1:1);for(let l of Cf.forRange(n,o,a))r.push(l)}}return r},update(n,e){n.transactions.some(r=>r.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=rL(n);return t&&Lk(n.state,e),n.docChanged||n.selectionSet||t},mount(n,e){Lk(e.state,n)},class:"cm-cursorLayer"});function Lk(n,e){e.style.animationDuration=n.facet(jh).cursorBlinkRate+"ms"}const YG=nL({above:!1,markers(n){return n.state.selection.ranges.map(e=>e.empty?[]:Cf.forRange(n,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(n,e){return n.docChanged||n.selectionSet||n.viewportChanged||rL(n)},class:"cm-selectionLayer"}),JG=Qo.highest(J.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),iL=ge.define({map(n,e){return n==null?null:e.mapPos(n)}}),Du=Nt.define({create(){return null},update(n,e){return n!=null&&(n=e.changes.mapPos(n)),e.effects.reduce((t,r)=>r.is(iL)?r.value:t,n)}}),ZG=ft.fromClass(class{constructor(n){this.view=n,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(n){var e;let t=n.state.field(Du);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(n.startState.field(Du)!=t||n.docChanged||n.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:n}=this,e=n.state.field(Du),t=e!=null&&n.coordsAtPos(e);if(!t)return null;let r=n.scrollDOM.getBoundingClientRect();return{left:t.left-r.left+n.scrollDOM.scrollLeft*n.scaleX,top:t.top-r.top+n.scrollDOM.scrollTop*n.scaleY,height:t.bottom-t.top}}drawCursor(n){if(this.cursor){let{scaleX:e,scaleY:t}=this.view;n?(this.cursor.style.left=n.left/e+"px",this.cursor.style.top=n.top/t+"px",this.cursor.style.height=n.height/t+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(n){this.view.state.field(Du)!=n&&this.view.dispatch({effects:iL.of(n)})}},{eventObservers:{dragover(n){this.setDropPos(this.view.posAtCoords({x:n.clientX,y:n.clientY}))},dragleave(n){(n.target==this.view.contentDOM||!this.view.contentDOM.contains(n.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function eX(){return[Du,ZG]}function Vk(n,e,t,r,i){e.lastIndex=0;for(let s=n.iterRange(t,r),o=t,a;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;a=e.exec(s.value);)i(o+a.index,a)}function tX(n,e){let t=n.visibleRanges;if(t.length==1&&t[0].from==n.viewport.from&&t[0].to==n.viewport.to)return t;let r=[];for(let{from:i,to:s}of t)i=Math.max(n.state.doc.lineAt(i).from,i-e),s=Math.min(n.state.doc.lineAt(s).to,s+e),r.length&&r[r.length-1].to>=i?r[r.length-1].to=s:r.push({from:i,to:s});return r}class nX{constructor(e){const{regexp:t,decoration:r,decorate:i,boundary:s,maxLength:o=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,i)this.addMatch=(a,l,c,u)=>i(u,c,c+a[0].length,a,l);else if(typeof r=="function")this.addMatch=(a,l,c,u)=>{let h=r(a,l,c);h&&u(c,c+a[0].length,h)};else if(r)this.addMatch=(a,l,c,u)=>u(c,c+a[0].length,r);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let t=new os,r=t.add.bind(t);for(let{from:i,to:s}of tX(e,this.maxLength))Vk(e.state.doc,this.regexp,i,s,(o,a)=>this.addMatch(a,e,o,r));return t.finish()}updateDeco(e,t){let r=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((s,o,a,l)=>{l>=e.view.viewport.from&&a<=e.view.viewport.to&&(r=Math.min(a,r),i=Math.max(l,i))}),e.viewportMoved||i-r>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,t.map(e.changes),r,i):t}updateRange(e,t,r,i){for(let s of e.visibleRanges){let o=Math.max(s.from,r),a=Math.min(s.to,i);if(a>o){let l=e.state.doc.lineAt(o),c=l.to<a?e.state.doc.lineAt(a):l,u=Math.max(s.from,l.from),h=Math.min(s.to,c.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){u=o;break}for(;a<c.to;a++)if(this.boundary.test(c.text[a-c.from])){h=a;break}}let d=[],p,g=(y,w,v)=>d.push(v.range(y,w));if(l==c)for(this.regexp.lastIndex=u-l.from;(p=this.regexp.exec(l.text))&&p.index<h-l.from;)this.addMatch(p,e,p.index+l.from,g);else Vk(e.state.doc,this.regexp,u,h,(y,w)=>this.addMatch(w,e,y,g));t=t.update({filterFrom:u,filterTo:h,filter:(y,w)=>y<u||w>h,add:d})}}return t}}const bO=/x/.unicode!=null?"gu":"g",rX=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,bO),iX={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let L0=null;function sX(){var n;if(L0==null&&typeof document<"u"&&document.body){let e=document.body.style;L0=((n=e.tabSize)!==null&&n!==void 0?n:e.MozTabSize)!=null}return L0||!1}const Ip=ne.define({combine(n){let e=xi(n,{render:null,specialChars:rX,addSpecialChars:null});return(e.replaceTabs=!sX())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,bO)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,bO)),e}});function oX(n={}){return[Ip.of(n),aX()]}let Fk=null;function aX(){return Fk||(Fk=ft.fromClass(class{constructor(n){this.view=n,this.decorations=ae.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(n.state.facet(Ip)),this.decorations=this.decorator.createDeco(n)}makeDecorator(n){return new nX({regexp:n.specialChars,decoration:(e,t,r)=>{let{doc:i}=t.state,s=_n(e[0],0);if(s==9){let o=i.lineAt(r),a=t.state.tabSize,l=$c(o.text,a,r-o.from);return ae.replace({widget:new hX((a-l%a)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=ae.replace({widget:new uX(n,s)}))},boundary:n.replaceTabs?void 0:/[^]/})}update(n){let e=n.state.facet(Ip);n.startState.facet(Ip)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(n.view)):this.decorations=this.decorator.updateDeco(n,this.decorations)}},{decorations:n=>n.decorations}))}const lX="•";function cX(n){return n>=32?lX:n==10?"␤":String.fromCharCode(9216+n)}class uX extends Si{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=cX(this.code),r=e.state.phrase("Control character")+" "+(iX[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,r,t);if(i)return i;let s=document.createElement("span");return s.textContent=t,s.title=r,s.setAttribute("aria-label",r),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class hX extends Si{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function fX(){return pX}const dX=ae.line({class:"cm-activeLine"}),pX=ft.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,t=[];for(let r of n.state.selection.ranges){let i=n.lineBlockAt(r.head);i.from>e&&(t.push(dX.range(i.from)),e=i.from)}return ae.set(t)}},{decorations:n=>n.decorations});class mX extends Si{constructor(e){super(),this.content=e}toDOM(e){let t=document.createElement("span");return t.className="cm-placeholder",t.style.pointerEvents="none",t.appendChild(typeof this.content=="string"?document.createTextNode(this.content):typeof this.content=="function"?this.content(e):this.content.cloneNode(!0)),typeof this.content=="string"?t.setAttribute("aria-label","placeholder "+this.content):t.setAttribute("aria-hidden","true"),t}coordsAt(e){let t=e.firstChild?vc(e.firstChild):[];if(!t.length)return null;let r=window.getComputedStyle(e.parentNode),i=Tf(t[0],r.direction!="rtl"),s=parseInt(r.lineHeight);return i.bottom-i.top>s*1.5?{left:i.left,right:i.right,top:i.top,bottom:i.top+s}:i}ignoreEvent(){return!1}}function gX(n){return ft.fromClass(class{constructor(e){this.view=e,this.placeholder=n?ae.set([ae.widget({widget:new mX(n),side:1}).range(0)]):ae.none}get decorations(){return this.view.state.doc.length?ae.none:this.placeholder}},{decorations:e=>e.decorations})}const TO=2e3;function yX(n,e,t){let r=Math.min(e.line,t.line),i=Math.max(e.line,t.line),s=[];if(e.off>TO||t.off>TO||e.col<0||t.col<0){let o=Math.min(e.off,t.off),a=Math.max(e.off,t.off);for(let l=r;l<=i;l++){let c=n.doc.line(l);c.length<=a&&s.push(B.range(c.from+o,c.to+a))}}else{let o=Math.min(e.col,t.col),a=Math.max(e.col,t.col);for(let l=r;l<=i;l++){let c=n.doc.line(l),u=nO(c.text,o,n.tabSize,!0);if(u<0)s.push(B.cursor(c.to));else{let h=nO(c.text,a,n.tabSize);s.push(B.range(c.from+u,c.from+h))}}}return s}function vX(n,e){let t=n.coordsAtPos(n.viewport.from);return t?Math.round(Math.abs((t.left-e)/n.defaultCharacterWidth)):-1}function Qk(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1),r=n.state.doc.lineAt(t),i=t-r.from,s=i>TO?-1:i==r.length?vX(n,e.clientX):$c(r.text,n.state.tabSize,t-r.from);return{line:r.number,col:s,off:i}}function wX(n,e){let t=Qk(n,e),r=n.state.selection;return t?{update(i){if(i.docChanged){let s=i.changes.mapPos(i.startState.doc.line(t.line).from),o=i.state.doc.lineAt(s);t={line:o.number,col:t.col,off:Math.min(t.off,o.length)},r=r.map(i.changes)}},get(i,s,o){let a=Qk(n,i);if(!a)return r;let l=yX(n.state,t,a);return l.length?o?B.create(l.concat(r.ranges)):B.create(l):r}}:null}function OX(n){let e=t=>t.altKey&&t.button==0;return J.mouseSelectionStyle.of((t,r)=>e(r)?wX(t,r):null)}const xX={Alt:[18,n=>!!n.altKey],Control:[17,n=>!!n.ctrlKey],Shift:[16,n=>!!n.shiftKey],Meta:[91,n=>!!n.metaKey]},SX={style:"cursor: crosshair"};function bX(n={}){let[e,t]=xX[n.key||"Alt"],r=ft.fromClass(class{constructor(i){this.view=i,this.isDown=!1}set(i){this.isDown!=i&&(this.isDown=i,this.view.update([]))}},{eventObservers:{keydown(i){this.set(i.keyCode==e||t(i))},keyup(i){(i.keyCode==e||!t(i))&&this.set(!1)},mousemove(i){this.set(t(i))}}});return[r,J.contentAttributes.of(i=>{var s;return!((s=i.plugin(r))===null||s===void 0)&&s.isDown?SX:null})]}const mu="-10000px";class sL{constructor(e,t,r,i){this.facet=t,this.createTooltipView=r,this.removeTooltipView=i,this.input=e.state.facet(t),this.tooltips=this.input.filter(o=>o);let s=null;this.tooltipViews=this.tooltips.map(o=>s=r(o,s))}update(e,t){var r;let i=e.state.facet(this.facet),s=i.filter(l=>l);if(i===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let o=[],a=t?[]:null;for(let l=0;l<s.length;l++){let c=s[l],u=-1;if(c){for(let h=0;h<this.tooltips.length;h++){let d=this.tooltips[h];d&&d.create==c.create&&(u=h)}if(u<0)o[l]=this.createTooltipView(c,l?o[l-1]:null),a&&(a[l]=!!c.above);else{let h=o[l]=this.tooltipViews[u];a&&(a[l]=t[u]),h.update&&h.update(e)}}}for(let l of this.tooltipViews)o.indexOf(l)<0&&(this.removeTooltipView(l),(r=l.destroy)===null||r===void 0||r.call(l));return t&&(a.forEach((l,c)=>t[c]=l),t.length=a.length),this.input=i,this.tooltips=s,this.tooltipViews=o,!0}}function TX(n){let e=n.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const V0=ne.define({combine:n=>{var e,t,r;return{position:ie.ios?"absolute":((e=n.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=n.find(i=>i.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((r=n.find(i=>i.tooltipSpace))===null||r===void 0?void 0:r.tooltipSpace)||TX}}}),$k=new WeakMap,hS=ft.fromClass(class{constructor(n){this.view=n,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=n.state.facet(V0);this.position=e.position,this.parent=e.parent,this.classes=n.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new sL(n,fS,(t,r)=>this.createTooltip(t,r),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),n.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let n of this.manager.tooltipViews)this.intersectionObserver.observe(n.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(n){n.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(n,this.above);e&&this.observeIntersection();let t=e||n.geometryChanged,r=n.state.facet(V0);if(r.position!=this.position&&!this.madeAbsolute){this.position=r.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;t=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(n,e){let t=n.create(this.view),r=e?e.dom:null;if(t.dom.classList.add("cm-tooltip"),n.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let i=document.createElement("div");i.className="cm-tooltip-arrow",t.dom.appendChild(i)}return t.dom.style.position=this.position,t.dom.style.top=mu,t.dom.style.left="0px",this.container.insertBefore(t.dom,r),t.mount&&t.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(t.dom),t}destroy(){var n,e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let r of this.manager.tooltipViews)r.dom.remove(),(n=r.destroy)===null||n===void 0||n.call(r);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let n=1,e=1,t=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:s}=this.manager.tooltipViews[0];if(ie.gecko)t=s.offsetParent!=this.container.ownerDocument.body;else if(s.style.top==mu&&s.style.left=="0px"){let o=s.getBoundingClientRect();t=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(t||this.position=="absolute")if(this.parent){let s=this.parent.getBoundingClientRect();s.width&&s.height&&(n=s.width/this.parent.offsetWidth,e=s.height/this.parent.offsetHeight)}else({scaleX:n,scaleY:e}=this.view.viewState);let r=this.view.scrollDOM.getBoundingClientRect(),i=aS(this.view);return{visible:{left:r.left+i.left,top:r.top+i.top,right:r.right-i.right,bottom:r.bottom-i.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((s,o)=>{let a=this.manager.tooltipViews[o];return a.getCoords?a.getCoords(s.pos):this.view.coordsAtPos(s.pos)}),size:this.manager.tooltipViews.map(({dom:s})=>s.getBoundingClientRect()),space:this.view.state.facet(V0).tooltipSpace(this.view),scaleX:n,scaleY:e,makeAbsolute:t}}writeMeasure(n){var e;if(n.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{visible:t,space:r,scaleX:i,scaleY:s}=n,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],c=this.manager.tooltipViews[a],{dom:u}=c,h=n.pos[a],d=n.size[a];if(!h||l.clip!==!1&&(h.bottom<=Math.max(t.top,r.top)||h.top>=Math.min(t.bottom,r.bottom)||h.right<Math.max(t.left,r.left)-.1||h.left>Math.min(t.right,r.right)+.1)){u.style.top=mu;continue}let p=l.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,g=p?7:0,y=d.right-d.left,w=(e=$k.get(c))!==null&&e!==void 0?e:d.bottom-d.top,v=c.offset||EX,O=this.view.textDirection==Xe.LTR,S=d.width>r.right-r.left?O?r.left:r.right-d.width:O?Math.max(r.left,Math.min(h.left-(p?14:0)+v.x,r.right-y)):Math.min(Math.max(r.left,h.left-y+(p?14:0)-v.x),r.right-y),E=this.above[a];!l.strictSide&&(E?h.top-w-g-v.y<r.top:h.bottom+w+g+v.y>r.bottom)&&E==r.bottom-h.bottom>h.top-r.top&&(E=this.above[a]=!E);let R=(E?h.top-r.top:r.bottom-h.bottom)-g;if(R<w&&c.resize!==!1){if(R<this.view.defaultLineHeight){u.style.top=mu;continue}$k.set(c,w),u.style.height=(w=R)/s+"px"}else u.style.height&&(u.style.height="");let M=E?h.top-w-g-v.y:h.bottom+g+v.y,b=S+y;if(c.overlap!==!0)for(let T of o)T.left<b&&T.right>S&&T.top<M+w&&T.bottom>M&&(M=E?T.top-w-2-g:T.bottom+g+2);if(this.position=="absolute"?(u.style.top=(M-n.parent.top)/s+"px",jk(u,(S-n.parent.left)/i)):(u.style.top=M/s+"px",jk(u,S/i)),p){let T=h.left+(O?v.x:-v.x)-(S+14-7);p.style.left=T/i+"px"}c.overlap!==!0&&o.push({left:S,top:M,right:b,bottom:M+w}),u.classList.toggle("cm-tooltip-above",E),u.classList.toggle("cm-tooltip-below",!E),c.positioned&&c.positioned(n.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let n of this.manager.tooltipViews)n.dom.style.top=mu}},{eventObservers:{scroll(){this.maybeMeasure()}}});function jk(n,e){let t=parseInt(n.style.left,10);(isNaN(t)||Math.abs(e-t)>1)&&(n.style.left=e+"px")}const _X=J.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),EX={x:0,y:0},fS=ne.define({enables:[hS,_X]}),Wm=ne.define({combine:n=>n.reduce((e,t)=>e.concat(t),[])});class hy{static create(e){return new hy(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new sL(e,Wm,(t,r)=>this.createHostedView(t,r),t=>t.dom.remove())}createHostedView(e,t){let r=e.create(this.view);return r.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(r.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&r.mount&&r.mount(this.view),r}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let r of this.manager.tooltipViews){let i=r[e];if(i!==void 0){if(t===void 0)t=i;else if(t!==i)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const kX=fS.compute([Wm],n=>{let e=n.facet(Wm);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.map(t=>{var r;return(r=t.end)!==null&&r!==void 0?r:t.pos})),create:hy.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class CX{constructor(e,t,r,i,s){this.view=e,this.source=t,this.field=r,this.setHover=i,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,r=e.docView.nearest(t.target);if(!r)return;let i,s=1;if(r instanceof Gs)i=r.posAtStart;else{if(i=e.posAtCoords(t),i==null)return;let a=e.coordsAtPos(i);if(!a||t.y<a.top||t.y>a.bottom||t.x<a.left-e.defaultCharacterWidth||t.x>a.right+e.defaultCharacterWidth)return;let l=e.bidiSpans(e.state.doc.lineAt(i)).find(u=>u.from<=i&&u.to>=i),c=l&&l.dir==Xe.RTL?-1:1;s=t.x<a.left?-c:c}let o=this.source(e,i,s);if(o!=null&&o.then){let a=this.pending={pos:i};o.then(l=>{this.pending==a&&(this.pending=null,l&&!(Array.isArray(l)&&!l.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(l)?l:[l])}))},l=>An(e.state,l,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(hS),t=e?e.manager.tooltips.findIndex(r=>r.create==hy.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,r;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:i,tooltip:s}=this;if(i.length&&s&&!PX(s.dom,e)||this.pending){let{pos:o}=i[0]||this.pending,a=(r=(t=i[0])===null||t===void 0?void 0:t.end)!==null&&r!==void 0?r:o;(o==a?this.view.posAtCoords(this.lastMove)!=o:!AX(this.view,o,a,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:r}=this;r&&r.dom.contains(e.relatedTarget)?this.watchTooltipLeave(r.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=r=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(r.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const jd=4;function PX(n,e){let{left:t,right:r,top:i,bottom:s}=n.getBoundingClientRect(),o;if(o=n.querySelector(".cm-tooltip-arrow")){let a=o.getBoundingClientRect();i=Math.min(a.top,i),s=Math.max(a.bottom,s)}return e.clientX>=t-jd&&e.clientX<=r+jd&&e.clientY>=i-jd&&e.clientY<=s+jd}function AX(n,e,t,r,i,s){let o=n.scrollDOM.getBoundingClientRect(),a=n.documentTop+n.documentPadding.top+n.contentHeight;if(o.left>r||o.right<r||o.top>i||Math.min(o.bottom,a)<i)return!1;let l=n.posAtCoords({x:r,y:i},!1);return l>=e&&l<=t}function RX(n,e={}){let t=ge.define(),r=Nt.define({create(){return[]},update(i,s){if(i.length&&(e.hideOnChange&&(s.docChanged||s.selection)?i=[]:e.hideOn&&(i=i.filter(o=>!e.hideOn(s,o))),s.docChanged)){let o=[];for(let a of i){let l=s.changes.mapPos(a.pos,-1,zt.TrackDel);if(l!=null){let c=Object.assign(Object.create(null),a);c.pos=l,c.end!=null&&(c.end=s.changes.mapPos(c.end)),o.push(c)}}i=o}for(let o of s.effects)o.is(t)&&(i=o.value),o.is(IX)&&(i=[]);return i},provide:i=>Wm.from(i)});return{active:r,extension:[r,ft.define(i=>new CX(i,n,r,t,e.hoverTime||300)),kX]}}function oL(n,e){let t=n.plugin(hS);if(!t)return null;let r=t.manager.tooltips.indexOf(e);return r<0?null:t.manager.tooltipViews[r]}const IX=ge.define(),zk=ne.define({combine(n){let e,t;for(let r of n)e=e||r.topContainer,t=t||r.bottomContainer;return{topContainer:e,bottomContainer:t}}});function zh(n,e){let t=n.plugin(aL),r=t?t.specs.indexOf(e):-1;return r>-1?t.panels[r]:null}const aL=ft.fromClass(class{constructor(n){this.input=n.state.facet(Bh),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(n));let e=n.state.facet(zk);this.top=new zd(n,!0,e.topContainer),this.bottom=new zd(n,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(n){let e=n.state.facet(zk);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new zd(n.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new zd(n.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=n.state.facet(Bh);if(t!=this.input){let r=t.filter(l=>l),i=[],s=[],o=[],a=[];for(let l of r){let c=this.specs.indexOf(l),u;c<0?(u=l(n.view),a.push(u)):(u=this.panels[c],u.update&&u.update(n)),i.push(u),(u.top?s:o).push(u)}this.specs=r,this.panels=i,this.top.sync(s),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let r of this.panels)r.update&&r.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>J.scrollMargins.of(e=>{let t=e.plugin(n);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class zd{constructor(e,t,r){this.view=e,this.top=t,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=Bk(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=Bk(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function Bk(n){let e=n.nextSibling;return n.remove(),e}const Bh=ne.define({enables:aL});class ls extends Na{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}ls.prototype.elementClass="";ls.prototype.toDOM=void 0;ls.prototype.mapMode=zt.TrackBefore;ls.prototype.startSide=ls.prototype.endSide=-1;ls.prototype.point=!0;const Np=ne.define(),NX=ne.define(),DX={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Re.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},th=ne.define();function MX(n){return[lL(),th.of(Object.assign(Object.assign({},DX),n))]}const Uk=ne.define({combine:n=>n.some(e=>e)});function lL(n){return[LX]}const LX=ft.fromClass(class{constructor(n){this.view=n,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=n.state.facet(th).map(e=>new qk(n,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!n.state.facet(Uk),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,r=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(r<(t.to-t.from)*.8)}n.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(Uk)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&this.dom.remove();let t=Re.iter(this.view.state.facet(Np),this.view.viewport.from),r=[],i=this.gutters.map(s=>new VX(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(s.type)){let o=!0;for(let a of s.type)if(a.type==gn.Text&&o){_O(t,r,a.from);for(let l of i)l.line(this.view,a,r);o=!1}else if(a.widget)for(let l of i)l.widget(this.view,a)}else if(s.type==gn.Text){_O(t,r,s.from);for(let o of i)o.line(this.view,s,r)}else if(s.widget)for(let o of i)o.widget(this.view,s);for(let s of i)s.finish();n&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(n){let e=n.startState.facet(th),t=n.state.facet(th),r=n.docChanged||n.heightChanged||n.viewportChanged||!Re.eq(n.startState.facet(Np),n.state.facet(Np),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let i of this.gutters)i.update(n)&&(r=!0);else{r=!0;let i=[];for(let s of t){let o=e.indexOf(s);o<0?i.push(new qk(this.view,s)):(this.gutters[o].update(n),i.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),i.indexOf(s)<0&&s.destroy();for(let s of i)this.dom.appendChild(s.dom);this.gutters=i}return r}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove()}},{provide:n=>J.scrollMargins.of(e=>{let t=e.plugin(n);return!t||t.gutters.length==0||!t.fixed?null:e.textDirection==Xe.LTR?{left:t.dom.offsetWidth*e.scaleX}:{right:t.dom.offsetWidth*e.scaleX}})});function Wk(n){return Array.isArray(n)?n:[n]}function _O(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}class VX{constructor(e,t,r){this.gutter=e,this.height=r,this.i=0,this.cursor=Re.iter(e.markers,t.from)}addElement(e,t,r){let{gutter:i}=this,s=(t.top-this.height)/e.scaleY,o=t.height/e.scaleY;if(this.i==i.elements.length){let a=new cL(e,o,s,r);i.elements.push(a),i.dom.appendChild(a.dom)}else i.elements[this.i].update(e,o,s,r);this.height=t.bottom,this.i++}line(e,t,r){let i=[];_O(this.cursor,i,t.from),r.length&&(i=i.concat(r));let s=this.gutter.config.lineMarker(e,t,i);s&&i.unshift(s);let o=this.gutter;i.length==0&&!o.config.renderEmptyElements||this.addElement(e,t,i)}widget(e,t){let r=this.gutter.config.widgetMarker(e,t.widget,t),i=r?[r]:null;for(let s of e.state.facet(NX)){let o=s(e,t.widget,t);o&&(i||(i=[])).push(o)}i&&this.addElement(e,t,i)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class qk{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in t.domEventHandlers)this.dom.addEventListener(r,i=>{let s=i.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let l=s.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=i.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);t.domEventHandlers[r](e,a,i)&&i.preventDefault()});this.markers=Wk(t.markers(e)),t.initialSpacer&&(this.spacer=new cL(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=Wk(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!Re.eq(this.markers,t,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class cL{constructor(e,t,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,r,i)}update(e,t,r,i){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),FX(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,t){let r="cm-gutterElement",i=this.dom.firstChild;for(let s=0,o=0;;){let a=o,l=s<t.length?t[s++]:null,c=!1;if(l){let u=l.elementClass;u&&(r+=" "+u);for(let h=o;h<this.markers.length;h++)if(this.markers[h].compare(l)){a=h,c=!0;break}}else a=this.markers.length;for(;o<a;){let u=this.markers[o++];if(u.toDOM){u.destroy(i);let h=i.nextSibling;i.remove(),i=h}}if(!l)break;l.toDOM&&(c?i=i.nextSibling:this.dom.insertBefore(l.toDOM(e),i)),c&&o++}this.dom.className=r,this.markers=t}destroy(){this.setMarkers(null,[])}}function FX(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}const QX=ne.define(),$X=ne.define(),xl=ne.define({combine(n){return xi(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let r=Object.assign({},e);for(let i in t){let s=r[i],o=t[i];r[i]=s?(a,l,c)=>s(a,l,c)||o(a,l,c):o}return r}})}});class F0 extends ls{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Q0(n,e){return n.state.facet(xl).formatNumber(e,n.state)}const jX=th.compute([xl],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(QX)},lineMarker(e,t,r){return r.some(i=>i.toDOM)?null:new F0(Q0(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,r)=>{for(let i of e.state.facet($X)){let s=i(e,t,r);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(xl)!=e.state.facet(xl),initialSpacer(e){return new F0(Q0(e,Hk(e.state.doc.lines)))},updateSpacer(e,t){let r=Q0(t.view,Hk(t.view.state.doc.lines));return r==e.number?e:new F0(r)},domEventHandlers:n.facet(xl).domEventHandlers}));function zX(n={}){return[xl.of(n),lL(),jX]}function Hk(n){let e=9;for(;e<n;)e=e*10+9;return e}const BX=new class extends ls{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},UX=Np.compute(["selection"],n=>{let e=[],t=-1;for(let r of n.selection.ranges){let i=n.doc.lineAt(r.head).from;i>t&&(t=i,e.push(BX.range(i)))}return Re.of(e)});function WX(){return UX}const uL=1024;let qX=0;class $0{constructor(e,t){this.from=e,this.to=t}}class Se{constructor(e={}){this.id=qX++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Ln.match(e)),t=>{let r=e(t);return r===void 0?null:[this,r]}}}Se.closedBy=new Se({deserialize:n=>n.split(" ")});Se.openedBy=new Se({deserialize:n=>n.split(" ")});Se.group=new Se({deserialize:n=>n.split(" ")});Se.isolate=new Se({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}});Se.contextHash=new Se({perNode:!0});Se.lookAhead=new Se({perNode:!0});Se.mounted=new Se({perNode:!0});class qm{constructor(e,t,r){this.tree=e,this.overlay=t,this.parser=r}static get(e){return e&&e.props&&e.props[Se.mounted.id]}}const HX=Object.create(null);class Ln{constructor(e,t,r,i=0){this.name=e,this.props=t,this.id=r,this.flags=i}static define(e){let t=e.props&&e.props.length?Object.create(null):HX,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new Ln(e.name||"",t,e.id,r);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(i)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[s[0].id]=s[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(Se.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let r in e)for(let i of r.split(" "))t[i]=e[r];return r=>{for(let i=r.prop(Se.group),s=-1;s<(i?i.length:0);s++){let o=t[s<0?r.name:i[s]];if(o)return o}}}}Ln.none=new Ln("",Object.create(null),0,8);class dS{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let r of this.types){let i=null;for(let s of e){let o=s(r);o&&(i||(i=Object.assign({},r.props)),i[o[0].id]=o[1])}t.push(i?new Ln(r.name,i,r.id,r.flags):r)}return new dS(t)}}const Bd=new WeakMap,Gk=new WeakMap;var St;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(St||(St={}));class yt{constructor(e,t,r,i,s){if(this.type=e,this.children=t,this.positions=r,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=qm.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let r of this.children){let i=r.toString();i&&(t&&(t+=","),t+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new kO(this.topNode,e)}cursorAt(e,t=0,r=0){let i=Bd.get(this)||this.topNode,s=new kO(i);return s.moveTo(e,t),Bd.set(this,s._tree),s}get topNode(){return new Mn(this,0,0,null)}resolve(e,t=0){let r=Uh(Bd.get(this)||this.topNode,e,t,!1);return Bd.set(this,r),r}resolveInner(e,t=0){let r=Uh(Gk.get(this)||this.topNode,e,t,!0);return Gk.set(this,r),r}resolveStack(e,t=0){return KX(this,e,t)}iterate(e){let{enter:t,leave:r,from:i=0,to:s=this.length}=e,o=e.mode||0,a=(o&St.IncludeAnonymous)>0;for(let l=this.cursor(o|St.IncludeAnonymous);;){let c=!1;if(l.from<=s&&l.to>=i&&(!a&&l.type.isAnonymous||t(l)!==!1)){if(l.firstChild())continue;c=!0}for(;c&&r&&(a||!l.type.isAnonymous)&&r(l),!l.nextSibling();){if(!l.parent())return;c=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:gS(Ln.none,this.children,this.positions,0,this.children.length,0,this.length,(t,r,i)=>new yt(this.type,t,r,i,this.propValues),e.makeTree||((t,r,i)=>new yt(Ln.none,t,r,i)))}static build(e){return YX(e)}}yt.empty=new yt(Ln.none,[],[],0);class pS{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new pS(this.buffer,this.index)}}class Ao{constructor(e,t,r){this.buffer=e,this.length=t,this.set=r}get type(){return Ln.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],r=this.buffer[e+3],i=this.set.types[t],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),e+=4,r==e)return s;let o=[];for(;e<r;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,t,r,i,s){let{buffer:o}=this,a=-1;for(let l=e;l!=t&&!(hL(s,i,o[l+1],o[l+2])&&(a=l,r>0));l=o[l+3]);return a}slice(e,t,r){let i=this.buffer,s=new Uint16Array(t-e),o=0;for(let a=e,l=0;a<t;){s[l++]=i[a++],s[l++]=i[a++]-r;let c=s[l++]=i[a++]-r;s[l++]=i[a++]-e,o=Math.max(o,c)}return new Ao(s,o,this.set)}}function hL(n,e,t,r){switch(n){case-2:return t<e;case-1:return r>=e&&t<e;case 0:return t<e&&r>e;case 1:return t<=e&&r>e;case 2:return r>e;case 4:return!0}}function Uh(n,e,t,r){for(var i;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let o=!r&&n instanceof Mn&&n.index<0?null:n.parent;if(!o)return n;n=o}let s=r?0:St.IgnoreOverlays;if(r)for(let o=n,a=o.parent;a;o=a,a=o.parent)o instanceof Mn&&o.index<0&&((i=a.enter(e,t,s))===null||i===void 0?void 0:i.from)!=o.from&&(n=a);for(;;){let o=n.enter(e,t,s);if(!o)return n;n=o}}class fL{cursor(e=0){return new kO(this,e)}getChild(e,t=null,r=null){let i=Xk(this,e,t,r);return i.length?i[0]:null}getChildren(e,t=null,r=null){return Xk(this,e,t,r)}resolve(e,t=0){return Uh(this,e,t,!1)}resolveInner(e,t=0){return Uh(this,e,t,!0)}matchContext(e){return EO(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),r=this;for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(r=t,t=i.prevSibling):t=i}return r}get node(){return this}get next(){return this.parent}}class Mn extends fL{constructor(e,t,r,i){super(),this._tree=e,this.from=t,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,r,i,s=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,c=t>0?a.length:-1;e!=c;e+=t){let u=a[e],h=l[e]+o.from;if(hL(i,r,h,h+u.length)){if(u instanceof Ao){if(s&St.ExcludeBuffers)continue;let d=u.findChild(0,u.buffer.length,t,r-h,i);if(d>-1)return new ni(new GX(o,u,e,h),null,d)}else if(s&St.IncludeAnonymous||!u.type.isAnonymous||mS(u)){let d;if(!(s&St.IgnoreMounts)&&(d=qm.get(u))&&!d.overlay)return new Mn(d.tree,h,e,o);let p=new Mn(u,h,e,o);return s&St.IncludeAnonymous||!p.type.isAnonymous?p:p.nextChild(t<0?u.children.length-1:0,t,r,i)}}}if(s&St.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,r=0){let i;if(!(r&St.IgnoreOverlays)&&(i=qm.get(this._tree))&&i.overlay){let s=e-this.from;for(let{from:o,to:a}of i.overlay)if((t>0?o<=s:o<s)&&(t<0?a>=s:a>s))return new Mn(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function Xk(n,e,t,r){let i=n.cursor(),s=[];if(!i.firstChild())return s;if(t!=null){for(let o=!1;!o;)if(o=i.type.is(t),!i.nextSibling())return s}for(;;){if(r!=null&&i.type.is(r))return s;if(i.type.is(e)&&s.push(i.node),!i.nextSibling())return r==null?s:[]}}function EO(n,e,t=e.length-1){for(let r=n;t>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[t]&&e[t]!=r.name)return!1;t--}}return!0}class GX{constructor(e,t,r,i){this.parent=e,this.buffer=t,this.index=r,this.start=i}}class ni extends fL{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,r){super(),this.context=e,this._parent=t,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,t,r){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.context.start,r);return s<0?null:new ni(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,r=0){if(r&St.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return s<0?null:new ni(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new ni(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new ni(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:r}=this.context,i=this.index+4,s=r.buffer[this.index+3];if(s>i){let o=r.buffer[this.index+1];e.push(r.slice(i,s,o)),t.push(0)}return new yt(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function dL(n){if(!n.length)return null;let e=0,t=n[0];for(let s=1;s<n.length;s++){let o=n[s];(o.from>t.from||o.to<t.to)&&(t=o,e=s)}let r=t instanceof Mn&&t.index<0?null:t.parent,i=n.slice();return r?i[e]=r:i.splice(e,1),new XX(i,t)}class XX{constructor(e,t){this.heads=e,this.node=t}get next(){return dL(this.heads)}}function KX(n,e,t){let r=n.resolveInner(e,t),i=null;for(let s=r instanceof Mn?r:r.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(i||(i=[r])).push(o.resolve(e,t)),s=o}else{let o=qm.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let a=new Mn(o.tree,o.overlay[0].from+s.from,-1,s);(i||(i=[r])).push(Uh(a,e,t,!1))}}return i?dL(i):r}class kO{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Mn)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=t||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof Mn?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,r,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,r);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,r=this.mode){return this.buffer?r&St.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&St.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&St.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(t.findChild(i,this.index,-1,0,4))}else{let i=t.buffer[this.index+3];if(i<(r<0?t.buffer.length:t.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(i.buffer.buffer[s+3]<this.index)return!1;({index:t,parent:r}=i)}else({index:t,_parent:r}=this._tree);for(;r;{index:t,_parent:r}=r)if(t>-1)for(let s=t+e,o=e<0?-1:r._tree.children.length;s!=o;s+=e){let a=r._tree.children[s];if(this.mode&St.IncludeAnonymous||a instanceof Ao||!a.type.isAnonymous||mS(a))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==i){if(i==this.index)return o;t=o,r=s+1;break e}i=this.stack[--s]}for(let i=r;i<this.stack.length;i++)t=new ni(this.buffer,t,this.stack[i]);return this.bufferNode=new ni(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&t&&t(this),i=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return EO(this.node.parent,e);let{buffer:t}=this.buffer,{types:r}=t.set;for(let i=e.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return EO(this._tree,e,i);let o=r[t.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[i]&&e[i]!=o.name)return!1;i--}}return!0}}function mS(n){return n.children.some(e=>e instanceof Ao||!e.type.isAnonymous||mS(e))}function YX(n){var e;let{buffer:t,nodeSet:r,maxBufferLength:i=uL,reused:s=[],minRepeatType:o=r.types.length}=n,a=Array.isArray(t)?new pS(t,t.length):t,l=r.types,c=0,u=0;function h(R,M,b,T,_,C){let{id:D,start:N,end:I,size:j}=a,ee=u,te=c;for(;j<0;)if(a.next(),j==-1){let ce=s[D];b.push(ce),T.push(N-R);return}else if(j==-3){c=D;return}else if(j==-4){u=D;return}else throw new RangeError(`Unrecognized record size: ${j}`);let Y=l[D],Q,$,G=N-R;if(I-N<=i&&($=w(a.pos-M,_))){let ce=new Uint16Array($.size-$.skip),Z=a.pos-$.size,oe=ce.length;for(;a.pos>Z;)oe=v($.start,ce,oe);Q=new Ao(ce,I-$.start,r),G=$.start-R}else{let ce=a.pos-j;a.next();let Z=[],oe=[],de=D>=o?D:-1,Pe=0,et=I;for(;a.pos>ce;)de>=0&&a.id==de&&a.size>=0?(a.end<=et-i&&(g(Z,oe,N,Pe,a.end,et,de,ee,te),Pe=Z.length,et=a.end),a.next()):C>2500?d(N,ce,Z,oe):h(N,ce,Z,oe,de,C+1);if(de>=0&&Pe>0&&Pe<Z.length&&g(Z,oe,N,Pe,N,et,de,ee,te),Z.reverse(),oe.reverse(),de>-1&&Pe>0){let xe=p(Y,te);Q=gS(Y,Z,oe,0,Z.length,0,I-N,xe,xe)}else Q=y(Y,Z,oe,I-N,ee-I,te)}b.push(Q),T.push(G)}function d(R,M,b,T){let _=[],C=0,D=-1;for(;a.pos>M;){let{id:N,start:I,end:j,size:ee}=a;if(ee>4)a.next();else{if(D>-1&&I<D)break;D<0&&(D=j-i),_.push(N,I,j),C++,a.next()}}if(C){let N=new Uint16Array(C*4),I=_[_.length-2];for(let j=_.length-3,ee=0;j>=0;j-=3)N[ee++]=_[j],N[ee++]=_[j+1]-I,N[ee++]=_[j+2]-I,N[ee++]=ee;b.push(new Ao(N,_[2]-I,r)),T.push(I-R)}}function p(R,M){return(b,T,_)=>{let C=0,D=b.length-1,N,I;if(D>=0&&(N=b[D])instanceof yt){if(!D&&N.type==R&&N.length==_)return N;(I=N.prop(Se.lookAhead))&&(C=T[D]+N.length+I)}return y(R,b,T,_,C,M)}}function g(R,M,b,T,_,C,D,N,I){let j=[],ee=[];for(;R.length>T;)j.push(R.pop()),ee.push(M.pop()+b-_);R.push(y(r.types[D],j,ee,C-_,N-C,I)),M.push(_-b)}function y(R,M,b,T,_,C,D){if(C){let N=[Se.contextHash,C];D=D?[N].concat(D):[N]}if(_>25){let N=[Se.lookAhead,_];D=D?[N].concat(D):[N]}return new yt(R,M,b,T,D)}function w(R,M){let b=a.fork(),T=0,_=0,C=0,D=b.end-i,N={size:0,start:0,skip:0};e:for(let I=b.pos-R;b.pos>I;){let j=b.size;if(b.id==M&&j>=0){N.size=T,N.start=_,N.skip=C,C+=4,T+=4,b.next();continue}let ee=b.pos-j;if(j<0||ee<I||b.start<D)break;let te=b.id>=o?4:0,Y=b.start;for(b.next();b.pos>ee;){if(b.size<0)if(b.size==-3)te+=4;else break e;else b.id>=o&&(te+=4);b.next()}_=Y,T+=j,C+=te}return(M<0||T==R)&&(N.size=T,N.start=_,N.skip=C),N.size>4?N:void 0}function v(R,M,b){let{id:T,start:_,end:C,size:D}=a;if(a.next(),D>=0&&T<o){let N=b;if(D>4){let I=a.pos-(D-4);for(;a.pos>I;)b=v(R,M,b)}M[--b]=N,M[--b]=C-R,M[--b]=_-R,M[--b]=T}else D==-3?c=T:D==-4&&(u=T);return b}let O=[],S=[];for(;a.pos>0;)h(n.start||0,n.bufferStart||0,O,S,-1,0);let E=(e=n.length)!==null&&e!==void 0?e:O.length?S[0]+O[0].length:0;return new yt(l[n.topID],O.reverse(),S.reverse(),E)}const Kk=new WeakMap;function Dp(n,e){if(!n.isAnonymous||e instanceof Ao||e.type!=n)return 1;let t=Kk.get(e);if(t==null){t=1;for(let r of e.children){if(r.type!=n||!(r instanceof yt)){t=1;break}t+=Dp(n,r)}Kk.set(e,t)}return t}function gS(n,e,t,r,i,s,o,a,l){let c=0;for(let g=r;g<i;g++)c+=Dp(n,e[g]);let u=Math.ceil(c*1.5/8),h=[],d=[];function p(g,y,w,v,O){for(let S=w;S<v;){let E=S,R=y[S],M=Dp(n,g[S]);for(S++;S<v;S++){let b=Dp(n,g[S]);if(M+b>=u)break;M+=b}if(S==E+1){if(M>u){let b=g[E];p(b.children,b.positions,0,b.children.length,y[E]+O);continue}h.push(g[E])}else{let b=y[S-1]+g[S-1].length-R;h.push(gS(n,g,y,E,S,R,b,null,l))}d.push(R+O-s)}}return p(e,t,r,i,0),(a||l)(h,d,o)}class JX{constructor(){this.map=new WeakMap}setBuffer(e,t,r){let i=this.map.get(e);i||this.map.set(e,i=new Map),i.set(t,r)}getBuffer(e,t){let r=this.map.get(e);return r&&r.get(t)}set(e,t){e instanceof ni?this.setBuffer(e.context.buffer,e.index,t):e instanceof Mn&&this.map.set(e.tree,t)}get(e){return e instanceof ni?this.getBuffer(e.context.buffer,e.index):e instanceof Mn?this.map.get(e.tree):void 0}cursorSet(e,t){e.buffer?this.setBuffer(e.buffer.buffer,e.index,t):this.map.set(e.tree,t)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class ga{constructor(e,t,r,i,s=!1,o=!1){this.from=e,this.to=t,this.tree=r,this.offset=i,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],r=!1){let i=[new ga(0,e.length,e,0,!1,r)];for(let s of t)s.to>e.length&&i.push(s);return i}static applyChanges(e,t,r=128){if(!t.length)return e;let i=[],s=1,o=e.length?e[0]:null;for(let a=0,l=0,c=0;;a++){let u=a<t.length?t[a]:null,h=u?u.fromA:1e9;if(h-l>=r)for(;o&&o.from<h;){let d=o;if(l>=d.from||h<=d.to||c){let p=Math.max(d.from,l)-c,g=Math.min(d.to,h)-c;d=p>=g?null:new ga(p,g,d.tree,d.offset+c,a>0,!!u)}if(d&&i.push(d),o.to>h)break;o=s<e.length?e[s++]:null}if(!u)break;l=u.toA,c=u.toA-u.toB}return i}}class pL{startParse(e,t,r){return typeof e=="string"&&(e=new ZX(e)),r=r?r.length?r.map(i=>new $0(i.from,i.to)):[new $0(0,0)]:[new $0(0,e.length)],this.createParse(e,t||[],r)}parse(e,t,r){let i=this.startParse(e,t,r);for(;;){let s=i.advance();if(s)return s}}}class ZX{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new Se({perNode:!0});let eK=0;class sr{constructor(e,t,r,i){this.name=e,this.set=t,this.base=r,this.modified=i,this.id=eK++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let r=typeof e=="string"?e:"?";if(e instanceof sr&&(t=e),t!=null&&t.base)throw new Error("Can not derive from a modified tag");let i=new sr(r,[],null,[]);if(i.set.push(i),t)for(let s of t.set)i.set.push(s);return i}static defineModifier(e){let t=new Hm(e);return r=>r.modified.indexOf(t)>-1?r:Hm.get(r.base||r,r.modified.concat(t).sort((i,s)=>i.id-s.id))}}let tK=0;class Hm{constructor(e){this.name=e,this.instances=[],this.id=tK++}static get(e,t){if(!t.length)return e;let r=t[0].instances.find(a=>a.base==e&&nK(t,a.modified));if(r)return r;let i=[],s=new sr(e.name,i,e,t);for(let a of t)a.instances.push(s);let o=rK(t);for(let a of e.set)if(!a.modified.length)for(let l of o)i.push(Hm.get(a,l));return s}}function nK(n,e){return n.length==e.length&&n.every((t,r)=>t==e[r])}function rK(n){let e=[[]];for(let t=0;t<n.length;t++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(n[t]));return e.sort((t,r)=>r.length-t.length)}function mL(n){let e=Object.create(null);for(let t in n){let r=n[t];Array.isArray(r)||(r=[r]);for(let i of t.split(" "))if(i){let s=[],o=2,a=i;for(let h=0;;){if(a=="..."&&h>0&&h+3==i.length){o=1;break}let d=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!d)throw new RangeError("Invalid path: "+i);if(s.push(d[0]=="*"?"":d[0][0]=='"'?JSON.parse(d[0]):d[0]),h+=d[0].length,h==i.length)break;let p=i[h++];if(h==i.length&&p=="!"){o=0;break}if(p!="/")throw new RangeError("Invalid path: "+i);a=i.slice(h)}let l=s.length-1,c=s[l];if(!c)throw new RangeError("Invalid path: "+i);let u=new Gm(r,o,l>0?s.slice(0,l):null);e[c]=u.sort(e[c])}}return gL.add(e)}const gL=new Se;class Gm{constructor(e,t,r,i){this.tags=e,this.mode=t,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Gm.empty=new Gm([],2,null);function yL(n,e){let t=Object.create(null);for(let s of n)if(!Array.isArray(s.tag))t[s.tag.id]=s.class;else for(let o of s.tag)t[o.id]=s.class;let{scope:r,all:i=null}=e||{};return{style:s=>{let o=i;for(let a of s)for(let l of a.set){let c=t[l.id];if(c){o=o?o+" "+c:c;break}}return o},scope:r}}function iK(n,e){let t=null;for(let r of n){let i=r.style(e);i&&(t=t?t+" "+i:i)}return t}function sK(n,e,t,r=0,i=n.length){let s=new oK(r,Array.isArray(e)?e:[e],t);s.highlightRange(n.cursor(),r,i,"",s.highlighters),s.flush(i)}class oK{constructor(e,t,r){this.at=e,this.highlighters=t,this.span=r,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,r,i,s){let{type:o,from:a,to:l}=e;if(a>=r||l<=t)return;o.isTop&&(s=this.highlighters.filter(p=>!p.scope||p.scope(o)));let c=i,u=aK(e)||Gm.empty,h=iK(s,u.tags);if(h&&(c&&(c+=" "),c+=h,u.mode==1&&(i+=(i?" ":"")+h)),this.startSpan(Math.max(t,a),c),u.opaque)return;let d=e.tree&&e.tree.prop(Se.mounted);if(d&&d.overlay){let p=e.node.enter(d.overlay[0].from+a,1),g=this.highlighters.filter(w=>!w.scope||w.scope(d.tree.type)),y=e.firstChild();for(let w=0,v=a;;w++){let O=w<d.overlay.length?d.overlay[w]:null,S=O?O.from+a:l,E=Math.max(t,v),R=Math.min(r,S);if(E<R&&y)for(;e.from<R&&(this.highlightRange(e,E,R,i,s),this.startSpan(Math.min(R,e.to),c),!(e.to>=S||!e.nextSibling())););if(!O||S>r)break;v=O.to+a,v>t&&(this.highlightRange(p.cursor(),Math.max(t,O.from+a),Math.min(r,v),"",g),this.startSpan(Math.min(r,v),c))}y&&e.parent()}else if(e.firstChild()){d&&(i="");do if(!(e.to<=t)){if(e.from>=r)break;this.highlightRange(e,t,r,i,s),this.startSpan(Math.min(r,e.to),c)}while(e.nextSibling());e.parent()}}}function aK(n){let e=n.type.prop(gL);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const K=sr.define,Ud=K(),Cs=K(),Yk=K(Cs),Jk=K(Cs),Ps=K(),Wd=K(Ps),j0=K(Ps),qr=K(),Ko=K(qr),Ur=K(),Wr=K(),CO=K(),gu=K(CO),qd=K(),V={comment:Ud,lineComment:K(Ud),blockComment:K(Ud),docComment:K(Ud),name:Cs,variableName:K(Cs),typeName:Yk,tagName:K(Yk),propertyName:Jk,attributeName:K(Jk),className:K(Cs),labelName:K(Cs),namespace:K(Cs),macroName:K(Cs),literal:Ps,string:Wd,docString:K(Wd),character:K(Wd),attributeValue:K(Wd),number:j0,integer:K(j0),float:K(j0),bool:K(Ps),regexp:K(Ps),escape:K(Ps),color:K(Ps),url:K(Ps),keyword:Ur,self:K(Ur),null:K(Ur),atom:K(Ur),unit:K(Ur),modifier:K(Ur),operatorKeyword:K(Ur),controlKeyword:K(Ur),definitionKeyword:K(Ur),moduleKeyword:K(Ur),operator:Wr,derefOperator:K(Wr),arithmeticOperator:K(Wr),logicOperator:K(Wr),bitwiseOperator:K(Wr),compareOperator:K(Wr),updateOperator:K(Wr),definitionOperator:K(Wr),typeOperator:K(Wr),controlOperator:K(Wr),punctuation:CO,separator:K(CO),bracket:gu,angleBracket:K(gu),squareBracket:K(gu),paren:K(gu),brace:K(gu),content:qr,heading:Ko,heading1:K(Ko),heading2:K(Ko),heading3:K(Ko),heading4:K(Ko),heading5:K(Ko),heading6:K(Ko),contentSeparator:K(qr),list:K(qr),quote:K(qr),emphasis:K(qr),strong:K(qr),link:K(qr),monospace:K(qr),strikethrough:K(qr),inserted:K(),deleted:K(),changed:K(),invalid:K(),meta:qd,documentMeta:K(qd),annotation:K(qd),processingInstruction:K(qd),definition:sr.defineModifier("definition"),constant:sr.defineModifier("constant"),function:sr.defineModifier("function"),standard:sr.defineModifier("standard"),local:sr.defineModifier("local"),special:sr.defineModifier("special")};for(let n in V){let e=V[n];e instanceof sr&&(e.name=n)}yL([{tag:V.link,class:"tok-link"},{tag:V.heading,class:"tok-heading"},{tag:V.emphasis,class:"tok-emphasis"},{tag:V.strong,class:"tok-strong"},{tag:V.keyword,class:"tok-keyword"},{tag:V.atom,class:"tok-atom"},{tag:V.bool,class:"tok-bool"},{tag:V.url,class:"tok-url"},{tag:V.labelName,class:"tok-labelName"},{tag:V.inserted,class:"tok-inserted"},{tag:V.deleted,class:"tok-deleted"},{tag:V.literal,class:"tok-literal"},{tag:V.string,class:"tok-string"},{tag:V.number,class:"tok-number"},{tag:[V.regexp,V.escape,V.special(V.string)],class:"tok-string2"},{tag:V.variableName,class:"tok-variableName"},{tag:V.local(V.variableName),class:"tok-variableName tok-local"},{tag:V.definition(V.variableName),class:"tok-variableName tok-definition"},{tag:V.special(V.variableName),class:"tok-variableName2"},{tag:V.definition(V.propertyName),class:"tok-propertyName tok-definition"},{tag:V.typeName,class:"tok-typeName"},{tag:V.namespace,class:"tok-namespace"},{tag:V.className,class:"tok-className"},{tag:V.macroName,class:"tok-macroName"},{tag:V.propertyName,class:"tok-propertyName"},{tag:V.operator,class:"tok-operator"},{tag:V.comment,class:"tok-comment"},{tag:V.meta,class:"tok-meta"},{tag:V.invalid,class:"tok-invalid"},{tag:V.punctuation,class:"tok-punctuation"}]);var z0;const Sl=new Se;function lK(n){return ne.define({combine:n?e=>e.concat(n):void 0})}const cK=new Se;class Cr{constructor(e,t,r=[],i=""){this.data=e,this.name=i,Ee.prototype.hasOwnProperty("tree")||Object.defineProperty(Ee.prototype,"tree",{get(){return It(this)}}),this.parser=t,this.extension=[Ro.of(this),Ee.languageData.of((s,o,a)=>{let l=Zk(s,o,a),c=l.type.prop(Sl);if(!c)return[];let u=s.facet(c),h=l.type.prop(cK);if(h){let d=l.resolve(o-l.from,a);for(let p of h)if(p.test(d,s)){let g=s.facet(p.facet);return p.type=="replace"?g:g.concat(u)}}return u})].concat(r)}isActiveAt(e,t,r=-1){return Zk(e,t,r).type.prop(Sl)==this.data}findRegions(e){let t=e.facet(Ro);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let r=[],i=(s,o)=>{if(s.prop(Sl)==this.data){r.push({from:o,to:o+s.length});return}let a=s.prop(Se.mounted);if(a){if(a.tree.prop(Sl)==this.data){if(a.overlay)for(let l of a.overlay)r.push({from:l.from+o,to:l.to+o});else r.push({from:o,to:o+s.length});return}else if(a.overlay){let l=r.length;if(i(a.tree,a.overlay[0].from+o),r.length>l)return}}for(let l=0;l<s.children.length;l++){let c=s.children[l];c instanceof yt&&i(c,s.positions[l]+o)}};return i(It(e),0),r}get allowsNesting(){return!0}}Cr.setState=ge.define();function Zk(n,e,t){let r=n.facet(Ro),i=It(n).topNode;if(!r||r.allowsNesting)for(let s=i;s;s=s.enter(e,t,St.ExcludeBuffers))s.type.isTop&&(i=s);return i}class Xm extends Cr{constructor(e,t,r){super(e,t,[],r),this.parser=t}static define(e){let t=lK(e.languageData);return new Xm(t,e.parser.configure({props:[Sl.add(r=>r.isTop?t:void 0)]}),e.name)}configure(e,t){return new Xm(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function It(n){let e=n.field(Cr.state,!1);return e?e.tree:yt.empty}class uK{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let r=this.cursorPos-this.string.length;return e<r||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-r,t-r)}}let yu=null;class Km{constructor(e,t,r=[],i,s,o,a,l){this.parser=e,this.state=t,this.fragments=r,this.tree=i,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,t,r){return new Km(e,t,[],yt.empty,0,r,[],null)}startParse(){return this.parser.startParse(new uK(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=yt.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(ga.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(ga.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=yu;yu=this;try{return e()}finally{yu=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=eC(e,t.from,t.to);return e}changes(e,t){let{fragments:r,tree:i,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((c,u,h,d)=>l.push({fromA:c,toA:u,fromB:h,toB:d})),r=ga.applyChanges(r,l),i=yt.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let c of this.skipped){let u=e.mapPos(c.from,1),h=e.mapPos(c.to,-1);u<h&&a.push({from:u,to:h})}}}return new Km(this.parser,t,r,i,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:s}=this.skipped[r];i<e.to&&s>e.from&&(this.fragments=eC(this.fragments,i,s),this.skipped.splice(r--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends pL{createParse(t,r,i){let s=i[0].from,o=i[i.length-1].to;return{parsedPos:s,advance(){let l=yu;if(l){for(let c of i)l.tempSkipped.push(c);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new yt(Ln.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return yu}}function eC(n,e,t){return ga.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class Sc{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,r)||t.takeTree(),new Sc(t)}static init(e){let t=Math.min(3e3,e.doc.length),r=Km.create(e.facet(Ro).parser,e,{from:0,to:t});return r.work(20,t)||r.takeTree(),new Sc(r)}}Cr.state=Nt.define({create:Sc.init,update(n,e){for(let t of e.effects)if(t.is(Cr.setState))return t.value;return e.startState.facet(Ro)!=e.state.facet(Ro)?Sc.init(e.state):n.apply(e)}});let vL=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(vL=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const B0=typeof navigator<"u"&&(!((z0=navigator.scheduling)===null||z0===void 0)&&z0.isInputPending)?()=>navigator.scheduling.isInputPending():null,hK=ft.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Cr.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Cr.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=vL(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,s=r.field(Cr.state);if(s.tree==s.context.tree&&s.context.isDone(i+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!B0?Math.max(25,e.timeRemaining()-5):1e9),a=s.context.treeLen<i&&r.doc.length>i+1e3,l=s.context.work(()=>B0&&B0()||Date.now()>o,i+(a?0:1e5));this.chunkBudget-=Date.now()-t,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:Cr.setState.of(new Sc(s.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>An(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Ro=ne.define({combine(n){return n.length?n[0]:null},enables:n=>[Cr.state,hK,J.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]});class fK{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const dK=ne.define(),Pf=ne.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function Ym(n){let e=n.facet(Pf);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function Wh(n,e){let t="",r=n.tabSize,i=n.facet(Pf)[0];if(i=="	"){for(;e>=r;)t+="	",e-=r;i=" "}for(let s=0;s<e;s++)t+=i;return t}function yS(n,e){n instanceof Ee&&(n=new fy(n));for(let r of n.state.facet(dK)){let i=r(n,e);if(i!==void 0)return i}let t=It(n.state);return t.length>=e?pK(n,t,e):null}class fy{constructor(e,t={}){this.state=e,this.options=t,this.unit=Ym(e)}lineAt(e,t=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:s}=this.options;return i!=null&&i>=r.from&&i<=r.to?s&&i==e?{text:"",from:e}:(t<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,t);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,t=1){let{text:r,from:i}=this.lineAt(e,t),s=this.countColumn(r,e-i),o=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return o>-1&&(s+=o-this.countColumn(r,r.search(/\S|$/))),s}countColumn(e,t=e.length){return $c(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:r,from:i}=this.lineAt(e,t),s=this.options.overrideIndentation;if(s){let o=s(i);if(o>-1)return o}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const wL=new Se;function pK(n,e,t){let r=e.resolveStack(t),i=e.resolveInner(t,-1).resolve(t,0).enterUnfinishedNodesBefore(t);if(i!=r.node){let s=[];for(let o=i;o&&!(o.from==r.node.from&&o.type==r.node.type);o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)r={node:s[o],next:r}}return OL(r,n,t)}function OL(n,e,t){for(let r=n;r;r=r.next){let i=gK(r.node);if(i)return i(vS.create(e,t,r))}return 0}function mK(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function gK(n){let e=n.type.prop(wL);if(e)return e;let t=n.firstChild,r;if(t&&(r=t.type.prop(Se.closedBy))){let i=n.lastChild,s=i&&r.indexOf(i.name)>-1;return o=>xL(o,!0,1,void 0,s&&!mK(o)?i.from:void 0)}return n.parent==null?yK:null}function yK(){return 0}class vS extends fy{constructor(e,t,r){super(e.state,e.options),this.base=e,this.pos=t,this.context=r}get node(){return this.context.node}static create(e,t,r){return new vS(e,t,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(t.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(vK(r,e))break;t=this.state.doc.lineAt(r.from)}return this.lineIndent(t.from)}continue(){return OL(this.context.next,this.base,this.pos)}}function vK(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function wK(n){let e=n.node,t=e.childAfter(e.from),r=e.lastChild;if(!t)return null;let i=n.options.simulateBreak,s=n.state.doc.lineAt(t.from),o=i==null||i<=s.from?s.to:Math.min(s.to,i);for(let a=t.to;;){let l=e.childAfter(a);if(!l||l==r)return null;if(!l.type.isSkipped){if(l.from>=o)return null;let c=/^ */.exec(s.text.slice(t.to-s.from))[0].length;return{from:t.from,to:t.to+c}}a=l.to}}function U0({closing:n,align:e=!0,units:t=1}){return r=>xL(r,e,t,n)}function xL(n,e,t,r,i){let s=n.textAfter,o=s.match(/^\s*/)[0].length,a=r&&s.slice(o,o+r.length)==r||i==n.pos+o,l=e?wK(n):null;return l?a?n.column(l.from):n.column(l.to):n.baseIndent+(a?0:n.unit*t)}const OK=200;function xK(){return Ee.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let e=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!e.length)return n;let t=n.newDoc,{head:r}=n.newSelection.main,i=t.lineAt(r);if(r>i.from+OK)return n;let s=t.sliceString(i.from,r);if(!e.some(c=>c.test(s)))return n;let{state:o}=n,a=-1,l=[];for(let{head:c}of o.selection.ranges){let u=o.doc.lineAt(c);if(u.from==a)continue;a=u.from;let h=yS(o,u.from);if(h==null)continue;let d=/^\s*/.exec(u.text)[0],p=Wh(o,h);d!=p&&l.push({from:u.from,to:u.from+d.length,insert:p})}return l.length?[n,{changes:l,sequential:!0}]:n})}const SK=ne.define(),SL=new Se;function bK(n){let e=n.firstChild,t=n.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?n.to:t.from}:null}function TK(n,e,t){let r=It(n);if(r.length<t)return null;let i=r.resolveStack(t,1),s=null;for(let o=i;o;o=o.next){let a=o.node;if(a.to<=t||a.from>t)continue;if(s&&a.from<e)break;let l=a.type.prop(SL);if(l&&(a.to<r.length-50||r.length==n.doc.length||!_K(a))){let c=l(a,n);c&&c.from<=t&&c.from>=e&&c.to>t&&(s=c)}}return s}function _K(n){let e=n.lastChild;return e&&e.to==n.to&&e.type.isError}function Jm(n,e,t){for(let r of n.facet(SK)){let i=r(n,e,t);if(i)return i}return TK(n,e,t)}function bL(n,e){let t=e.mapPos(n.from,1),r=e.mapPos(n.to,-1);return t>=r?void 0:{from:t,to:r}}const dy=ge.define({map:bL}),Af=ge.define({map:bL});function TL(n){let e=[];for(let{head:t}of n.state.selection.ranges)e.some(r=>r.from<=t&&r.to>=t)||e.push(n.lineBlockAt(t));return e}const Va=Nt.define({create(){return ae.none},update(n,e){n=n.map(e.changes);for(let t of e.effects)if(t.is(dy)&&!EK(n,t.value.from,t.value.to)){let{preparePlaceholder:r}=e.state.facet(kL),i=r?ae.replace({widget:new NK(r(e.state,t.value))}):tC;n=n.update({add:[i.range(t.value.from,t.value.to)]})}else t.is(Af)&&(n=n.update({filter:(r,i)=>t.value.from!=r||t.value.to!=i,filterFrom:t.value.from,filterTo:t.value.to}));if(e.selection){let t=!1,{head:r}=e.selection.main;n.between(r,r,(i,s)=>{i<r&&s>r&&(t=!0)}),t&&(n=n.update({filterFrom:r,filterTo:r,filter:(i,s)=>s<=r||i>=r}))}return n},provide:n=>J.decorations.from(n),toJSON(n,e){let t=[];return n.between(0,e.doc.length,(r,i)=>{t.push(r,i)}),t},fromJSON(n){if(!Array.isArray(n)||n.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<n.length;){let r=n[t++],i=n[t++];if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(tC.range(r,i))}return ae.set(e,!0)}});function Zm(n,e,t){var r;let i=null;return(r=n.field(Va,!1))===null||r===void 0||r.between(e,t,(s,o)=>{(!i||i.from>s)&&(i={from:s,to:o})}),i}function EK(n,e,t){let r=!1;return n.between(e,e,(i,s)=>{i==e&&s==t&&(r=!0)}),r}function _L(n,e){return n.field(Va,!1)?e:e.concat(ge.appendConfig.of(CL()))}const kK=n=>{for(let e of TL(n)){let t=Jm(n.state,e.from,e.to);if(t)return n.dispatch({effects:_L(n.state,[dy.of(t),EL(n,t)])}),!0}return!1},CK=n=>{if(!n.state.field(Va,!1))return!1;let e=[];for(let t of TL(n)){let r=Zm(n.state,t.from,t.to);r&&e.push(Af.of(r),EL(n,r,!1))}return e.length&&n.dispatch({effects:e}),e.length>0};function EL(n,e,t=!0){let r=n.state.doc.lineAt(e.from).number,i=n.state.doc.lineAt(e.to).number;return J.announce.of(`${n.state.phrase(t?"Folded lines":"Unfolded lines")} ${r} ${n.state.phrase("to")} ${i}.`)}const PK=n=>{let{state:e}=n,t=[];for(let r=0;r<e.doc.length;){let i=n.lineBlockAt(r),s=Jm(e,i.from,i.to);s&&t.push(dy.of(s)),r=(s?n.lineBlockAt(s.to):i).to+1}return t.length&&n.dispatch({effects:_L(n.state,t)}),!!t.length},AK=n=>{let e=n.state.field(Va,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,n.state.doc.length,(r,i)=>{t.push(Af.of({from:r,to:i}))}),n.dispatch({effects:t}),!0},RK=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:kK},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:CK},{key:"Ctrl-Alt-[",run:PK},{key:"Ctrl-Alt-]",run:AK}],IK={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},kL=ne.define({combine(n){return xi(n,IK)}});function CL(n){return[Va,LK]}function PL(n,e){let{state:t}=n,r=t.facet(kL),i=o=>{let a=n.lineBlockAt(n.posAtDOM(o.target)),l=Zm(n.state,a.from,a.to);l&&n.dispatch({effects:Af.of(l)}),o.preventDefault()};if(r.placeholderDOM)return r.placeholderDOM(n,i,e);let s=document.createElement("span");return s.textContent=r.placeholderText,s.setAttribute("aria-label",t.phrase("folded code")),s.title=t.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=i,s}const tC=ae.replace({widget:new class extends Si{toDOM(n){return PL(n,null)}}});class NK extends Si{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return PL(e,this.value)}}const DK={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class W0 extends ls{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function MK(n={}){let e=Object.assign(Object.assign({},DK),n),t=new W0(e,!0),r=new W0(e,!1),i=ft.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(Ro)!=o.state.facet(Ro)||o.startState.field(Va,!1)!=o.state.field(Va,!1)||It(o.startState)!=It(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let a=new os;for(let l of o.viewportLineBlocks){let c=Zm(o.state,l.from,l.to)?r:Jm(o.state,l.from,l.to)?t:null;c&&a.add(l.from,l.from,c)}return a.finish()}}),{domEventHandlers:s}=e;return[i,MX({class:"cm-foldGutter",markers(o){var a;return((a=o.plugin(i))===null||a===void 0?void 0:a.markers)||Re.empty},initialSpacer(){return new W0(e,!1)},domEventHandlers:Object.assign(Object.assign({},s),{click:(o,a,l)=>{if(s.click&&s.click(o,a,l))return!0;let c=Zm(o.state,a.from,a.to);if(c)return o.dispatch({effects:Af.of(c)}),!0;let u=Jm(o.state,a.from,a.to);return u?(o.dispatch({effects:dy.of(u)}),!0):!1}})}),CL()]}const LK=J.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Rf{constructor(e,t){this.specs=e;let r;function i(a){let l=ko.newName();return(r||(r=Object.create(null)))["."+l]=a,l}const s=typeof t.all=="string"?t.all:t.all?i(t.all):void 0,o=t.scope;this.scope=o instanceof Cr?a=>a.prop(Sl)==o.data:o?a=>a==o:void 0,this.style=yL(e.map(a=>({tag:a.tag,class:a.class||i(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=r?new ko(r):null,this.themeType=t.themeType}static define(e,t){return new Rf(e,t||{})}}const PO=ne.define(),AL=ne.define({combine(n){return n.length?[n[0]]:null}});function q0(n){let e=n.facet(PO);return e.length?e:n.facet(AL)}function RL(n,e){let t=[FK],r;return n instanceof Rf&&(n.module&&t.push(J.styleModule.of(n.module)),r=n.themeType),e!=null&&e.fallback?t.push(AL.of(n)):r?t.push(PO.computeN([J.darkTheme],i=>i.facet(J.darkTheme)==(r=="dark")?[n]:[])):t.push(PO.of(n)),t}class VK{constructor(e){this.markCache=Object.create(null),this.tree=It(e.state),this.decorations=this.buildDeco(e,q0(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=It(e.state),r=q0(e.state),i=r!=q0(e.startState),{viewport:s}=e.view,o=e.changes.mapPos(this.decoratedTo,1);t.length<s.to&&!i&&t.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(t!=this.tree||e.viewportChanged||i)&&(this.tree=t,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=s.to)}buildDeco(e,t){if(!t||!this.tree.length)return ae.none;let r=new os;for(let{from:i,to:s}of e.visibleRanges)sK(this.tree,t,(o,a,l)=>{r.add(o,a,this.markCache[l]||(this.markCache[l]=ae.mark({class:l})))},i,s);return r.finish()}}const FK=Qo.high(ft.fromClass(VK,{decorations:n=>n.decorations})),QK=Rf.define([{tag:V.meta,color:"#404740"},{tag:V.link,textDecoration:"underline"},{tag:V.heading,textDecoration:"underline",fontWeight:"bold"},{tag:V.emphasis,fontStyle:"italic"},{tag:V.strong,fontWeight:"bold"},{tag:V.strikethrough,textDecoration:"line-through"},{tag:V.keyword,color:"#708"},{tag:[V.atom,V.bool,V.url,V.contentSeparator,V.labelName],color:"#219"},{tag:[V.literal,V.inserted],color:"#164"},{tag:[V.string,V.deleted],color:"#a11"},{tag:[V.regexp,V.escape,V.special(V.string)],color:"#e40"},{tag:V.definition(V.variableName),color:"#00f"},{tag:V.local(V.variableName),color:"#30a"},{tag:[V.typeName,V.namespace],color:"#085"},{tag:V.className,color:"#167"},{tag:[V.special(V.variableName),V.macroName],color:"#256"},{tag:V.definition(V.propertyName),color:"#00c"},{tag:V.comment,color:"#940"},{tag:V.invalid,color:"#f00"}]),$K=J.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),IL=1e4,NL="()[]{}",DL=ne.define({combine(n){return xi(n,{afterCursor:!0,brackets:NL,maxScanDistance:IL,renderMatch:BK})}}),jK=ae.mark({class:"cm-matchingBracket"}),zK=ae.mark({class:"cm-nonmatchingBracket"});function BK(n){let e=[],t=n.matched?jK:zK;return e.push(t.range(n.start.from,n.start.to)),n.end&&e.push(t.range(n.end.from,n.end.to)),e}const UK=Nt.define({create(){return ae.none},update(n,e){if(!e.docChanged&&!e.selection)return n;let t=[],r=e.state.facet(DL);for(let i of e.state.selection.ranges){if(!i.empty)continue;let s=ri(e.state,i.head,-1,r)||i.head>0&&ri(e.state,i.head-1,1,r)||r.afterCursor&&(ri(e.state,i.head,1,r)||i.head<e.state.doc.length&&ri(e.state,i.head+1,-1,r));s&&(t=t.concat(r.renderMatch(s,e.state)))}return ae.set(t,!0)},provide:n=>J.decorations.from(n)}),WK=[UK,$K];function qK(n={}){return[DL.of(n),WK]}const HK=new Se;function AO(n,e,t){let r=n.prop(e<0?Se.openedBy:Se.closedBy);if(r)return r;if(n.name.length==1){let i=t.indexOf(n.name);if(i>-1&&i%2==(e<0?1:0))return[t[i+e]]}return null}function RO(n){let e=n.type.prop(HK);return e?e(n.node):n}function ri(n,e,t,r={}){let i=r.maxScanDistance||IL,s=r.brackets||NL,o=It(n),a=o.resolveInner(e,t);for(let l=a;l;l=l.parent){let c=AO(l.type,t,s);if(c&&l.from<l.to){let u=RO(l);if(u&&(t>0?e>=u.from&&e<u.to:e>u.from&&e<=u.to))return GK(n,e,t,l,u,c,s)}}return XK(n,e,t,o,a.type,i,s)}function GK(n,e,t,r,i,s,o){let a=r.parent,l={from:i.from,to:i.to},c=0,u=a==null?void 0:a.cursor();if(u&&(t<0?u.childBefore(r.from):u.childAfter(r.to)))do if(t<0?u.to<=r.from:u.from>=r.to){if(c==0&&s.indexOf(u.type.name)>-1&&u.from<u.to){let h=RO(u);return{start:l,end:h?{from:h.from,to:h.to}:void 0,matched:!0}}else if(AO(u.type,t,o))c++;else if(AO(u.type,-t,o)){if(c==0){let h=RO(u);return{start:l,end:h&&h.from<h.to?{from:h.from,to:h.to}:void 0,matched:!1}}c--}}while(t<0?u.prevSibling():u.nextSibling());return{start:l,matched:!1}}function XK(n,e,t,r,i,s,o){let a=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=t>0)return null;let c={from:t<0?e-1:e,to:t>0?e+1:e},u=n.doc.iterRange(e,t>0?n.doc.length:0),h=0;for(let d=0;!u.next().done&&d<=s;){let p=u.value;t<0&&(d+=p.length);let g=e+d*t;for(let y=t>0?0:p.length-1,w=t>0?p.length:-1;y!=w;y+=t){let v=o.indexOf(p[y]);if(!(v<0||r.resolveInner(g+y,1).type!=i))if(v%2==0==t>0)h++;else{if(h==1)return{start:c,end:{from:g+y,to:g+y+1},matched:v>>1==l>>1};h--}}t>0&&(d+=p.length)}return u.done?{start:c,matched:!1}:null}const KK=Object.create(null),nC=[Ln.none],rC=[],iC=Object.create(null),YK=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])YK[n]=JK(KK,e);function H0(n,e){rC.indexOf(n)>-1||(rC.push(n),console.warn(e))}function JK(n,e){let t=[];for(let a of e.split(" ")){let l=[];for(let c of a.split(".")){let u=n[c]||V[c];u?typeof u=="function"?l.length?l=l.map(u):H0(c,`Modifier ${c} used at start of tag`):l.length?H0(c,`Tag ${c} used as modifier`):l=Array.isArray(u)?u:[u]:H0(c,`Unknown highlighting tag ${c}`)}for(let c of l)t.push(c)}if(!t.length)return 0;let r=e.replace(/ /g,"_"),i=r+" "+t.map(a=>a.id),s=iC[i];if(s)return s.id;let o=iC[i]=Ln.define({id:nC.length,name:r,props:[mL({[r]:t})]});return nC.push(o),o.id}Xe.RTL,Xe.LTR;const ZK=n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.from),r=OS(n.state,t.from);return r.line?eY(n):r.block?nY(n):!1};function wS(n,e){return({state:t,dispatch:r})=>{if(t.readOnly)return!1;let i=n(e,t);return i?(r(t.update(i)),!0):!1}}const eY=wS(sY,0),tY=wS(ML,0),nY=wS((n,e)=>ML(n,e,iY(e)),0);function OS(n,e){let t=n.languageDataAt("commentTokens",e,1);return t.length?t[0]:{}}const vu=50;function rY(n,{open:e,close:t},r,i){let s=n.sliceDoc(r-vu,r),o=n.sliceDoc(i,i+vu),a=/\s*$/.exec(s)[0].length,l=/^\s*/.exec(o)[0].length,c=s.length-a;if(s.slice(c-e.length,c)==e&&o.slice(l,l+t.length)==t)return{open:{pos:r-a,margin:a&&1},close:{pos:i+l,margin:l&&1}};let u,h;i-r<=2*vu?u=h=n.sliceDoc(r,i):(u=n.sliceDoc(r,r+vu),h=n.sliceDoc(i-vu,i));let d=/^\s*/.exec(u)[0].length,p=/\s*$/.exec(h)[0].length,g=h.length-p-t.length;return u.slice(d,d+e.length)==e&&h.slice(g,g+t.length)==t?{open:{pos:r+d+e.length,margin:/\s/.test(u.charAt(d+e.length))?1:0},close:{pos:i-p-t.length,margin:/\s/.test(h.charAt(g-1))?1:0}}:null}function iY(n){let e=[];for(let t of n.selection.ranges){let r=n.doc.lineAt(t.from),i=t.to<=r.to?r:n.doc.lineAt(t.to);i.from>r.from&&i.from==t.to&&(i=t.to==r.to+1?r:n.doc.lineAt(t.to-1));let s=e.length-1;s>=0&&e[s].to>r.from?e[s].to=i.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return e}function ML(n,e,t=e.selection.ranges){let r=t.map(s=>OS(e,s.from).block);if(!r.every(s=>s))return null;let i=t.map((s,o)=>rY(e,r[o],s.from,s.to));if(n!=2&&!i.every(s=>s))return{changes:e.changes(t.map((s,o)=>i[o]?[]:[{from:s.from,insert:r[o].open+" "},{from:s.to,insert:" "+r[o].close}]))};if(n!=1&&i.some(s=>s)){let s=[];for(let o=0,a;o<i.length;o++)if(a=i[o]){let l=r[o],{open:c,close:u}=a;s.push({from:c.pos-l.open.length,to:c.pos+c.margin},{from:u.pos-u.margin,to:u.pos+l.close.length})}return{changes:s}}return null}function sY(n,e,t=e.selection.ranges){let r=[],i=-1;for(let{from:s,to:o}of t){let a=r.length,l=1e9,c=OS(e,s).line;if(c){for(let u=s;u<=o;){let h=e.doc.lineAt(u);if(h.from>i&&(s==o||o>h.from)){i=h.from;let d=/^\s*/.exec(h.text)[0].length,p=d==h.length,g=h.text.slice(d,d+c.length)==c?d:-1;d<h.text.length&&d<l&&(l=d),r.push({line:h,comment:g,token:c,indent:d,empty:p,single:!1})}u=h.to+1}if(l<1e9)for(let u=a;u<r.length;u++)r[u].indent<r[u].line.text.length&&(r[u].indent=l);r.length==a+1&&(r[a].single=!0)}}if(n!=2&&r.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:a,token:l,indent:c,empty:u,single:h}of r)(h||!u)&&s.push({from:a.from+c,insert:l+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(n!=1&&r.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:a,token:l}of r)if(a>=0){let c=o.from+a,u=c+l.length;o.text[u-o.from]==" "&&u++,s.push({from:c,to:u})}return{changes:s}}return null}const IO=Oi.define(),oY=Oi.define(),aY=ne.define(),LL=ne.define({combine(n){return xi(n,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(r,i)=>e(r,i)||t(r,i)})}}),VL=Nt.define({create(){return ii.empty},update(n,e){let t=e.state.facet(LL),r=e.annotation(IO);if(r){let l=Rn.fromTransaction(e,r.selection),c=r.side,u=c==0?n.undone:n.done;return l?u=eg(u,u.length,t.minDepth,l):u=$L(u,e.startState.selection),new ii(c==0?r.rest:u,c==0?u:r.rest)}let i=e.annotation(oY);if((i=="full"||i=="before")&&(n=n.isolate()),e.annotation(gt.addToHistory)===!1)return e.changes.empty?n:n.addMapping(e.changes.desc);let s=Rn.fromTransaction(e),o=e.annotation(gt.time),a=e.annotation(gt.userEvent);return s?n=n.addChanges(s,o,a,t,e):e.selection&&(n=n.addSelection(e.startState.selection,o,a,t.newGroupDelay)),(i=="full"||i=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}},fromJSON(n){return new ii(n.done.map(Rn.fromJSON),n.undone.map(Rn.fromJSON))}});function lY(n={}){return[VL,LL.of(n),J.domEventHandlers({beforeinput(e,t){let r=e.inputType=="historyUndo"?FL:e.inputType=="historyRedo"?NO:null;return r?(e.preventDefault(),r(t)):!1}})]}function py(n,e){return function({state:t,dispatch:r}){if(!e&&t.readOnly)return!1;let i=t.field(VL,!1);if(!i)return!1;let s=i.pop(n,t,e);return s?(r(s),!0):!1}}const FL=py(0,!1),NO=py(1,!1),cY=py(0,!0),uY=py(1,!0);class Rn{constructor(e,t,r,i,s){this.changes=e,this.effects=t,this.mapped=r,this.startSelection=i,this.selectionsAfter=s}setSelAfter(e){return new Rn(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,r;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new Rn(e.changes&&Ot.fromJSON(e.changes),[],e.mapped&&pi.fromJSON(e.mapped),e.startSelection&&B.fromJSON(e.startSelection),e.selectionsAfter.map(B.fromJSON))}static fromTransaction(e,t){let r=lr;for(let i of e.startState.facet(aY)){let s=i(e);s.length&&(r=r.concat(s))}return!r.length&&e.changes.empty?null:new Rn(e.changes.invert(e.startState.doc),r,void 0,t||e.startState.selection,lr)}static selection(e){return new Rn(void 0,lr,void 0,void 0,e)}}function eg(n,e,t,r){let i=e+1>t+20?e-t-1:0,s=n.slice(i,e);return s.push(r),s}function hY(n,e){let t=[],r=!1;return n.iterChangedRanges((i,s)=>t.push(i,s)),e.iterChangedRanges((i,s,o,a)=>{for(let l=0;l<t.length;){let c=t[l++],u=t[l++];a>=c&&o<=u&&(r=!0)}}),r}function fY(n,e){return n.ranges.length==e.ranges.length&&n.ranges.filter((t,r)=>t.empty!=e.ranges[r].empty).length===0}function QL(n,e){return n.length?e.length?n.concat(e):n:e}const lr=[],dY=200;function $L(n,e){if(n.length){let t=n[n.length-1],r=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-dY));return r.length&&r[r.length-1].eq(e)?n:(r.push(e),eg(n,n.length-1,1e9,t.setSelAfter(r)))}else return[Rn.selection([e])]}function pY(n){let e=n[n.length-1],t=n.slice();return t[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function G0(n,e){if(!n.length)return n;let t=n.length,r=lr;for(;t;){let i=mY(n[t-1],e,r);if(i.changes&&!i.changes.empty||i.effects.length){let s=n.slice(0,t);return s[t-1]=i,s}else e=i.mapped,t--,r=i.selectionsAfter}return r.length?[Rn.selection(r)]:lr}function mY(n,e,t){let r=QL(n.selectionsAfter.length?n.selectionsAfter.map(a=>a.map(e)):lr,t);if(!n.changes)return Rn.selection(r);let i=n.changes.map(e),s=e.mapDesc(n.changes,!0),o=n.mapped?n.mapped.composeDesc(s):s;return new Rn(i,ge.mapEffects(n.effects,e),o,n.startSelection.map(s),r)}const gY=/^(input\.type|delete)($|\.)/;class ii{constructor(e,t,r=0,i=void 0){this.done=e,this.undone=t,this.prevTime=r,this.prevUserEvent=i}isolate(){return this.prevTime?new ii(this.done,this.undone):this}addChanges(e,t,r,i,s){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!r||gY.test(r))&&(!a.selectionsAfter.length&&t-this.prevTime<i.newGroupDelay&&i.joinToEvent(s,hY(a.changes,e.changes))||r=="input.type.compose")?o=eg(o,o.length-1,i.minDepth,new Rn(e.changes.compose(a.changes),QL(ge.mapEffects(e.effects,a.changes),a.effects),a.mapped,a.startSelection,lr)):o=eg(o,o.length,i.minDepth,e),new ii(o,lr,t,r)}addSelection(e,t,r,i){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:lr;return s.length>0&&t-this.prevTime<i&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&fY(s[s.length-1],e)?this:new ii($L(this.done,e),this.undone,t,r)}addMapping(e){return new ii(G0(this.done,e),G0(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,r){let i=e==0?this.done:this.undone;if(i.length==0)return null;let s=i[i.length-1],o=s.selectionsAfter[0]||t.selection;if(r&&s.selectionsAfter.length)return t.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:IO.of({side:e,rest:pY(i),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let a=i.length==1?lr:i.slice(0,i.length-1);return s.mapped&&(a=G0(a,s.mapped)),t.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:IO.of({side:e,rest:a,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}ii.empty=new ii(lr,lr);const yY=[{key:"Mod-z",run:FL,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:NO,preventDefault:!0},{linux:"Ctrl-Shift-z",run:NO,preventDefault:!0},{key:"Mod-u",run:cY,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:uY,preventDefault:!0}];function jc(n,e){return B.create(n.ranges.map(e),n.mainIndex)}function bi(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Fr({state:n,dispatch:e},t){let r=jc(n.selection,t);return r.eq(n.selection,!0)?!1:(e(bi(n,r)),!0)}function my(n,e){return B.cursor(e?n.to:n.from)}function jL(n,e){return Fr(n,t=>t.empty?n.moveByChar(t,e):my(t,e))}function un(n){return n.textDirectionAt(n.state.selection.main.head)==Xe.LTR}const zL=n=>jL(n,!un(n)),BL=n=>jL(n,un(n));function UL(n,e){return Fr(n,t=>t.empty?n.moveByGroup(t,e):my(t,e))}const vY=n=>UL(n,!un(n)),wY=n=>UL(n,un(n));function OY(n,e,t){if(e.type.prop(t))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function gy(n,e,t){let r=It(n).resolveInner(e.head),i=t?Se.closedBy:Se.openedBy;for(let l=e.head;;){let c=t?r.childAfter(l):r.childBefore(l);if(!c)break;OY(n,c,i)?r=c:l=t?c.to:c.from}let s=r.type.prop(i),o,a;return s&&(o=t?ri(n,r.from,1):ri(n,r.to,-1))&&o.matched?a=t?o.end.to:o.end.from:a=t?r.to:r.from,B.cursor(a,t?-1:1)}const xY=n=>Fr(n,e=>gy(n.state,e,!un(n))),SY=n=>Fr(n,e=>gy(n.state,e,un(n)));function WL(n,e){return Fr(n,t=>{if(!t.empty)return my(t,e);let r=n.moveVertically(t,e);return r.head!=t.head?r:n.moveToLineBoundary(t,e)})}const qL=n=>WL(n,!1),HL=n=>WL(n,!0);function GL(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,r=0,i;if(e){for(let s of n.state.facet(J.scrollMargins)){let o=s(n);o!=null&&o.top&&(t=Math.max(o==null?void 0:o.top,t)),o!=null&&o.bottom&&(r=Math.max(o==null?void 0:o.bottom,r))}i=n.scrollDOM.clientHeight-t-r}else i=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:r,selfScroll:e,height:Math.max(n.defaultLineHeight,i-5)}}function XL(n,e){let t=GL(n),{state:r}=n,i=jc(r.selection,o=>o.empty?n.moveVertically(o,e,t.height):my(o,e));if(i.eq(r.selection))return!1;let s;if(t.selfScroll){let o=n.coordsAtPos(r.selection.main.head),a=n.scrollDOM.getBoundingClientRect(),l=a.top+t.marginTop,c=a.bottom-t.marginBottom;o&&o.top>l&&o.bottom<c&&(s=J.scrollIntoView(i.main.head,{y:"start",yMargin:o.top-l}))}return n.dispatch(bi(r,i),{effects:s}),!0}const sC=n=>XL(n,!1),DO=n=>XL(n,!0);function $o(n,e,t){let r=n.lineBlockAt(e.head),i=n.moveToLineBoundary(e,t);if(i.head==e.head&&i.head!=(t?r.to:r.from)&&(i=n.moveToLineBoundary(e,t,!1)),!t&&i.head==r.from&&r.length){let s=/^\s*/.exec(n.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;s&&e.head!=r.from+s&&(i=B.cursor(r.from+s))}return i}const bY=n=>Fr(n,e=>$o(n,e,!0)),TY=n=>Fr(n,e=>$o(n,e,!1)),_Y=n=>Fr(n,e=>$o(n,e,!un(n))),EY=n=>Fr(n,e=>$o(n,e,un(n))),kY=n=>Fr(n,e=>B.cursor(n.lineBlockAt(e.head).from,1)),CY=n=>Fr(n,e=>B.cursor(n.lineBlockAt(e.head).to,-1));function PY(n,e,t){let r=!1,i=jc(n.selection,s=>{let o=ri(n,s.head,-1)||ri(n,s.head,1)||s.head>0&&ri(n,s.head-1,1)||s.head<n.doc.length&&ri(n,s.head+1,-1);if(!o||!o.end)return s;r=!0;let a=o.start.from==s.head?o.end.to:o.end.from;return B.cursor(a)});return r?(e(bi(n,i)),!0):!1}const AY=({state:n,dispatch:e})=>PY(n,e);function gr(n,e){let t=jc(n.state.selection,r=>{let i=e(r);return B.range(r.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return t.eq(n.state.selection)?!1:(n.dispatch(bi(n.state,t)),!0)}function KL(n,e){return gr(n,t=>n.moveByChar(t,e))}const YL=n=>KL(n,!un(n)),JL=n=>KL(n,un(n));function ZL(n,e){return gr(n,t=>n.moveByGroup(t,e))}const RY=n=>ZL(n,!un(n)),IY=n=>ZL(n,un(n)),NY=n=>gr(n,e=>gy(n.state,e,!un(n))),DY=n=>gr(n,e=>gy(n.state,e,un(n)));function eV(n,e){return gr(n,t=>n.moveVertically(t,e))}const tV=n=>eV(n,!1),nV=n=>eV(n,!0);function rV(n,e){return gr(n,t=>n.moveVertically(t,e,GL(n).height))}const oC=n=>rV(n,!1),aC=n=>rV(n,!0),MY=n=>gr(n,e=>$o(n,e,!0)),LY=n=>gr(n,e=>$o(n,e,!1)),VY=n=>gr(n,e=>$o(n,e,!un(n))),FY=n=>gr(n,e=>$o(n,e,un(n))),QY=n=>gr(n,e=>B.cursor(n.lineBlockAt(e.head).from)),$Y=n=>gr(n,e=>B.cursor(n.lineBlockAt(e.head).to)),lC=({state:n,dispatch:e})=>(e(bi(n,{anchor:0})),!0),cC=({state:n,dispatch:e})=>(e(bi(n,{anchor:n.doc.length})),!0),uC=({state:n,dispatch:e})=>(e(bi(n,{anchor:n.selection.main.anchor,head:0})),!0),hC=({state:n,dispatch:e})=>(e(bi(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),jY=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),zY=({state:n,dispatch:e})=>{let t=yy(n).map(({from:r,to:i})=>B.range(r,Math.min(i+1,n.doc.length)));return e(n.update({selection:B.create(t),userEvent:"select"})),!0},BY=({state:n,dispatch:e})=>{let t=jc(n.selection,r=>{let i=It(n),s=i.resolveStack(r.from,1);if(r.empty){let o=i.resolveStack(r.from,-1);o.node.from>=s.node.from&&o.node.to<=s.node.to&&(s=o)}for(let o=s;o;o=o.next){let{node:a}=o;if((a.from<r.from&&a.to>=r.to||a.to>r.to&&a.from<=r.from)&&o.next)return B.range(a.to,a.from)}return r});return t.eq(n.selection)?!1:(e(bi(n,t)),!0)},UY=({state:n,dispatch:e})=>{let t=n.selection,r=null;return t.ranges.length>1?r=B.create([t.main]):t.main.empty||(r=B.create([B.cursor(t.main.head)])),r?(e(bi(n,r)),!0):!1};function If(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:r}=n,i=r.changeByRange(s=>{let{from:o,to:a}=s;if(o==a){let l=e(s);l<o?(t="delete.backward",l=Hd(n,l,!1)):l>o&&(t="delete.forward",l=Hd(n,l,!0)),o=Math.min(o,l),a=Math.max(a,l)}else o=Hd(n,o,!1),a=Hd(n,a,!0);return o==a?{range:s}:{changes:{from:o,to:a},range:B.cursor(o,o<s.head?-1:1)}});return i.changes.empty?!1:(n.dispatch(r.update(i,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?J.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function Hd(n,e,t){if(n instanceof J)for(let r of n.state.facet(J.atomicRanges).map(i=>i(n)))r.between(e,e,(i,s)=>{i<e&&s>e&&(e=t?s:i)});return e}const iV=(n,e,t)=>If(n,r=>{let i=r.from,{state:s}=n,o=s.doc.lineAt(i),a,l;if(t&&!e&&i>o.from&&i<o.from+200&&!/[^ \t]/.test(a=o.text.slice(0,i-o.from))){if(a[a.length-1]=="	")return i-1;let c=$c(a,s.tabSize),u=c%Ym(s)||Ym(s);for(let h=0;h<u&&a[a.length-1-h]==" ";h++)i--;l=i}else l=Bt(o.text,i-o.from,e,e)+o.from,l==i&&o.number!=(e?s.doc.lines:1)?l+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(l-o.from,i-o.from))&&(l=Bt(o.text,l-o.from,!1,!1)+o.from);return l}),MO=n=>iV(n,!1,!0),sV=n=>iV(n,!0,!1),oV=(n,e)=>If(n,t=>{let r=t.head,{state:i}=n,s=i.doc.lineAt(r),o=i.charCategorizer(r);for(let a=null;;){if(r==(e?s.to:s.from)){r==t.head&&s.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let l=Bt(s.text,r-s.from,e)+s.from,c=s.text.slice(Math.min(r,l)-s.from,Math.max(r,l)-s.from),u=o(c);if(a!=null&&u!=a)break;(c!=" "||r!=t.head)&&(a=u),r=l}return r}),aV=n=>oV(n,!1),WY=n=>oV(n,!0),qY=n=>If(n,e=>{let t=n.lineBlockAt(e.head).to;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),HY=n=>If(n,e=>{let t=n.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),GY=n=>If(n,e=>{let t=n.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),XY=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:Ce.of(["",""])},range:B.cursor(r.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},KY=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>{if(!r.empty||r.from==0||r.from==n.doc.length)return{range:r};let i=r.from,s=n.doc.lineAt(i),o=i==s.from?i-1:Bt(s.text,i-s.from,!1)+s.from,a=i==s.to?i+1:Bt(s.text,i-s.from,!0)+s.from;return{changes:{from:o,to:a,insert:n.doc.slice(i,a).append(n.doc.slice(o,i))},range:B.cursor(a)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function yy(n){let e=[],t=-1;for(let r of n.selection.ranges){let i=n.doc.lineAt(r.from),s=n.doc.lineAt(r.to);if(!r.empty&&r.to==s.from&&(s=n.doc.lineAt(r.to-1)),t>=i.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(r)}else e.push({from:i.from,to:s.to,ranges:[r]});t=s.number+1}return e}function lV(n,e,t){if(n.readOnly)return!1;let r=[],i=[];for(let s of yy(n)){if(t?s.to==n.doc.length:s.from==0)continue;let o=n.doc.lineAt(t?s.to+1:s.from-1),a=o.length+1;if(t){r.push({from:s.to,to:o.to},{from:s.from,insert:o.text+n.lineBreak});for(let l of s.ranges)i.push(B.range(Math.min(n.doc.length,l.anchor+a),Math.min(n.doc.length,l.head+a)))}else{r.push({from:o.from,to:s.from},{from:s.to,insert:n.lineBreak+o.text});for(let l of s.ranges)i.push(B.range(l.anchor-a,l.head-a))}}return r.length?(e(n.update({changes:r,scrollIntoView:!0,selection:B.create(i,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const YY=({state:n,dispatch:e})=>lV(n,e,!1),JY=({state:n,dispatch:e})=>lV(n,e,!0);function cV(n,e,t){if(n.readOnly)return!1;let r=[];for(let i of yy(n))t?r.push({from:i.from,insert:n.doc.slice(i.from,i.to)+n.lineBreak}):r.push({from:i.to,insert:n.lineBreak+n.doc.slice(i.from,i.to)});return e(n.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const ZY=({state:n,dispatch:e})=>cV(n,e,!1),eJ=({state:n,dispatch:e})=>cV(n,e,!0),tJ=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(yy(e).map(({from:i,to:s})=>(i>0?i--:s<e.doc.length&&s++,{from:i,to:s}))),r=jc(e.selection,i=>{let s;if(n.lineWrapping){let o=n.lineBlockAt(i.head),a=n.coordsAtPos(i.head,i.assoc||1);a&&(s=o.bottom+n.documentTop-a.bottom+n.defaultLineHeight/2)}return n.moveVertically(i,!0,s)}).map(t);return n.dispatch({changes:t,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function nJ(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=It(n).resolveInner(e),r=t.childBefore(e),i=t.childAfter(e),s;return r&&i&&r.to<=e&&i.from>=e&&(s=r.type.prop(Se.closedBy))&&s.indexOf(i.name)>-1&&n.doc.lineAt(r.to).from==n.doc.lineAt(i.from).from&&!/\S/.test(n.sliceDoc(r.to,i.from))?{from:r.to,to:i.from}:null}const fC=uV(!1),rJ=uV(!0);function uV(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:s,to:o}=i,a=e.doc.lineAt(s),l=!n&&s==o&&nJ(e,s);n&&(s=o=(o<=a.to?a:e.doc.lineAt(o)).to);let c=new fy(e,{simulateBreak:s,simulateDoubleBreak:!!l}),u=yS(c,s);for(u==null&&(u=$c(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:s,to:o}=l:s>a.from&&s<a.from+100&&!/\S/.test(a.text.slice(0,s))&&(s=a.from);let h=["",Wh(e,u)];return l&&h.push(Wh(e,c.lineIndent(a.from,-1))),{changes:{from:s,to:o,insert:Ce.of(h)},range:B.cursor(s+1+h[1].length)}});return t(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function xS(n,e){let t=-1;return n.changeByRange(r=>{let i=[];for(let o=r.from;o<=r.to;){let a=n.doc.lineAt(o);a.number>t&&(r.empty||r.to>a.from)&&(e(a,i,r),t=a.number),o=a.to+1}let s=n.changes(i);return{changes:i,range:B.range(s.mapPos(r.anchor,1),s.mapPos(r.head,1))}})}const iJ=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),r=new fy(n,{overrideIndentation:s=>{let o=t[s];return o??-1}}),i=xS(n,(s,o,a)=>{let l=yS(r,s.from);if(l==null)return;/\S/.test(s.text)||(l=0);let c=/^\s*/.exec(s.text)[0],u=Wh(n,l);(c!=u||a.from<s.from+c.length)&&(t[s.from]=l,o.push({from:s.from,to:s.from+c.length,insert:u}))});return i.changes.empty||e(n.update(i,{userEvent:"indent"})),!0},hV=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(xS(n,(t,r)=>{r.push({from:t.from,insert:n.facet(Pf)})}),{userEvent:"input.indent"})),!0),fV=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(xS(n,(t,r)=>{let i=/^\s*/.exec(t.text)[0];if(!i)return;let s=$c(i,n.tabSize),o=0,a=Wh(n,Math.max(0,s-Ym(n)));for(;o<i.length&&o<a.length&&i.charCodeAt(o)==a.charCodeAt(o);)o++;r.push({from:t.from+o,to:t.from+i.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0),sJ=n=>(n.setTabFocusMode(),!0),oJ=[{key:"Ctrl-b",run:zL,shift:YL,preventDefault:!0},{key:"Ctrl-f",run:BL,shift:JL},{key:"Ctrl-p",run:qL,shift:tV},{key:"Ctrl-n",run:HL,shift:nV},{key:"Ctrl-a",run:kY,shift:QY},{key:"Ctrl-e",run:CY,shift:$Y},{key:"Ctrl-d",run:sV},{key:"Ctrl-h",run:MO},{key:"Ctrl-k",run:qY},{key:"Ctrl-Alt-h",run:aV},{key:"Ctrl-o",run:XY},{key:"Ctrl-t",run:KY},{key:"Ctrl-v",run:DO}],aJ=[{key:"ArrowLeft",run:zL,shift:YL,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:vY,shift:RY,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:_Y,shift:VY,preventDefault:!0},{key:"ArrowRight",run:BL,shift:JL,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:wY,shift:IY,preventDefault:!0},{mac:"Cmd-ArrowRight",run:EY,shift:FY,preventDefault:!0},{key:"ArrowUp",run:qL,shift:tV,preventDefault:!0},{mac:"Cmd-ArrowUp",run:lC,shift:uC},{mac:"Ctrl-ArrowUp",run:sC,shift:oC},{key:"ArrowDown",run:HL,shift:nV,preventDefault:!0},{mac:"Cmd-ArrowDown",run:cC,shift:hC},{mac:"Ctrl-ArrowDown",run:DO,shift:aC},{key:"PageUp",run:sC,shift:oC},{key:"PageDown",run:DO,shift:aC},{key:"Home",run:TY,shift:LY,preventDefault:!0},{key:"Mod-Home",run:lC,shift:uC},{key:"End",run:bY,shift:MY,preventDefault:!0},{key:"Mod-End",run:cC,shift:hC},{key:"Enter",run:fC,shift:fC},{key:"Mod-a",run:jY},{key:"Backspace",run:MO,shift:MO},{key:"Delete",run:sV},{key:"Mod-Backspace",mac:"Alt-Backspace",run:aV},{key:"Mod-Delete",mac:"Alt-Delete",run:WY},{mac:"Mod-Backspace",run:HY},{mac:"Mod-Delete",run:GY}].concat(oJ.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),lJ=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:xY,shift:NY},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:SY,shift:DY},{key:"Alt-ArrowUp",run:YY},{key:"Shift-Alt-ArrowUp",run:ZY},{key:"Alt-ArrowDown",run:JY},{key:"Shift-Alt-ArrowDown",run:eJ},{key:"Escape",run:UY},{key:"Mod-Enter",run:rJ},{key:"Alt-l",mac:"Ctrl-l",run:zY},{key:"Mod-i",run:BY,preventDefault:!0},{key:"Mod-[",run:fV},{key:"Mod-]",run:hV},{key:"Mod-Alt-\\",run:iJ},{key:"Shift-Mod-k",run:tJ},{key:"Shift-Mod-\\",run:AY},{key:"Mod-/",run:ZK},{key:"Alt-A",run:tY},{key:"Ctrl-m",mac:"Shift-Alt-m",run:sJ}].concat(aJ),cJ={key:"Tab",run:hV,shift:fV};function $e(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var i=t[r];typeof i=="string"?n.setAttribute(r,i):i!=null&&(n[r]=i)}e++}for(;e<arguments.length;e++)dV(n,arguments[e]);return n}function dV(n,e){if(typeof e=="string")n.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)n.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)dV(n,e[t]);else throw new RangeError("Unsupported child node: "+e)}const dC=typeof String.prototype.normalize=="function"?n=>n.normalize("NFKD"):n=>n;class bc{constructor(e,t,r=0,i=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=s?a=>s(dC(a)):dC,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return _n(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=Y1(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=ei(e);let i=this.normalize(t);if(i.length)for(let s=0,o=r;;s++){let a=i.charCodeAt(s),l=this.match(a,o,this.bufferPos+this.bufferStart);if(s==i.length-1){if(l)return this.value=l,this;break}o==r&&s<t.length&&t.charCodeAt(s)==a&&o++}}}match(e,t,r){let i=null;for(let s=0;s<this.matches.length;s+=2){let o=this.matches[s],a=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?i={from:this.matches[s+1],to:r}:(this.matches[s]++,a=!0)),a||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:t,to:r}:this.matches.push(1,t)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}typeof Symbol<"u"&&(bc.prototype[Symbol.iterator]=function(){return this});const pV={from:-1,to:-1,match:/.*/.exec("")},SS="gm"+(/x/.unicode==null?"":"u");class mV{constructor(e,t,r,i=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=pV,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new gV(e,t,r,i,s);this.re=new RegExp(t,SS+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.iter=e.iter();let o=e.lineAt(i);this.curLineStart=o.from,this.matchPos=tg(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let r=this.curLineStart+t.index,i=r+t[0].length;if(this.matchPos=tg(this.text,i+(r==i?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<i||r>this.value.to)&&(!this.test||this.test(r,i,t)))return this.value={from:r,to:i,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const X0=new WeakMap;class jl{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,r){let i=X0.get(e);if(!i||i.from>=r||i.to<=t){let a=new jl(t,e.sliceString(t,r));return X0.set(e,a),a}if(i.from==t&&i.to==r)return i;let{text:s,from:o}=i;return o>t&&(s=e.sliceString(t,o)+s,o=t),i.to<r&&(s+=e.sliceString(i.to,r)),X0.set(e,new jl(o,s)),new jl(t,s.slice(t-o,r-o))}}class gV{constructor(e,t,r,i,s){this.text=e,this.to=s,this.done=!1,this.value=pV,this.matchPos=tg(e,i),this.re=new RegExp(t,SS+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.flat=jl.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let r=this.flat.from+t.index,i=r+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,i,t)))return this.value={from:r,to:i,match:t},this.matchPos=tg(this.text,i+(r==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=jl.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(mV.prototype[Symbol.iterator]=gV.prototype[Symbol.iterator]=function(){return this});function uJ(n){try{return new RegExp(n,SS),!0}catch{return!1}}function tg(n,e){if(e>=n.length)return e;let t=n.lineAt(e),r;for(;e<t.to&&(r=t.text.charCodeAt(e-t.from))>=56320&&r<57344;)e++;return e}function LO(n){let e=String(n.state.doc.lineAt(n.state.selection.main.head).number),t=$e("input",{class:"cm-textfield",name:"line",value:e}),r=$e("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),n.dispatch({effects:nh.of(!1)}),n.focus()):s.keyCode==13&&(s.preventDefault(),i())},onsubmit:s=>{s.preventDefault(),i()}},$e("label",n.state.phrase("Go to line"),": ",t)," ",$e("button",{class:"cm-button",type:"submit"},n.state.phrase("go")),$e("button",{name:"close",onclick:()=>{n.dispatch({effects:nh.of(!1)}),n.focus()},"aria-label":n.state.phrase("close"),type:"button"},["×"]));function i(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!s)return;let{state:o}=n,a=o.doc.lineAt(o.selection.main.head),[,l,c,u,h]=s,d=u?+u.slice(1):0,p=c?+c:a.number;if(c&&h){let w=p/100;l&&(w=w*(l=="-"?-1:1)+a.number/o.doc.lines),p=Math.round(o.doc.lines*w)}else c&&l&&(p=p*(l=="-"?-1:1)+a.number);let g=o.doc.line(Math.max(1,Math.min(o.doc.lines,p))),y=B.cursor(g.from+Math.max(0,Math.min(d,g.length)));n.dispatch({effects:[nh.of(!1),J.scrollIntoView(y.from,{y:"center"})],selection:y}),n.focus()}return{dom:r}}const nh=ge.define(),pC=Nt.define({create(){return!0},update(n,e){for(let t of e.effects)t.is(nh)&&(n=t.value);return n},provide:n=>Bh.from(n,e=>e?LO:null)}),hJ=n=>{let e=zh(n,LO);if(!e){let t=[nh.of(!0)];n.state.field(pC,!1)==null&&t.push(ge.appendConfig.of([pC,fJ])),n.dispatch({effects:t}),e=zh(n,LO)}return e&&e.dom.querySelector("input").select(),!0},fJ=J.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),dJ={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},pJ=ne.define({combine(n){return xi(n,dJ,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function mJ(n){return[OJ,wJ]}const gJ=ae.mark({class:"cm-selectionMatch"}),yJ=ae.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function mC(n,e,t,r){return(t==0||n(e.sliceDoc(t-1,t))!=Ze.Word)&&(r==e.doc.length||n(e.sliceDoc(r,r+1))!=Ze.Word)}function vJ(n,e,t,r){return n(e.sliceDoc(t,t+1))==Ze.Word&&n(e.sliceDoc(r-1,r))==Ze.Word}const wJ=ft.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.selectionSet||n.docChanged||n.viewportChanged)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=n.state.facet(pJ),{state:t}=n,r=t.selection;if(r.ranges.length>1)return ae.none;let i=r.main,s,o=null;if(i.empty){if(!e.highlightWordAroundCursor)return ae.none;let l=t.wordAt(i.head);if(!l)return ae.none;o=t.charCategorizer(i.head),s=t.sliceDoc(l.from,l.to)}else{let l=i.to-i.from;if(l<e.minSelectionLength||l>200)return ae.none;if(e.wholeWords){if(s=t.sliceDoc(i.from,i.to),o=t.charCategorizer(i.head),!(mC(o,t,i.from,i.to)&&vJ(o,t,i.from,i.to)))return ae.none}else if(s=t.sliceDoc(i.from,i.to),!s)return ae.none}let a=[];for(let l of n.visibleRanges){let c=new bc(t.doc,s,l.from,l.to);for(;!c.next().done;){let{from:u,to:h}=c.value;if((!o||mC(o,t,u,h))&&(i.empty&&u<=i.from&&h>=i.to?a.push(yJ.range(u,h)):(u>=i.to||h<=i.from)&&a.push(gJ.range(u,h)),a.length>e.maxMatches))return ae.none}}return ae.set(a)}},{decorations:n=>n.decorations}),OJ=J.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),xJ=({state:n,dispatch:e})=>{let{selection:t}=n,r=B.create(t.ranges.map(i=>n.wordAt(i.head)||B.cursor(i.head)),t.mainIndex);return r.eq(t)?!1:(e(n.update({selection:r})),!0)};function SJ(n,e){let{main:t,ranges:r}=n.selection,i=n.wordAt(t.head),s=i&&i.from==t.from&&i.to==t.to;for(let o=!1,a=new bc(n.doc,e,r[r.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new bc(n.doc,e,0,Math.max(0,r[r.length-1].from-1)),o=!0}else{if(o&&r.some(l=>l.from==a.value.from))continue;if(s){let l=n.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const bJ=({state:n,dispatch:e})=>{let{ranges:t}=n.selection;if(t.some(s=>s.from===s.to))return xJ({state:n,dispatch:e});let r=n.sliceDoc(t[0].from,t[0].to);if(n.selection.ranges.some(s=>n.sliceDoc(s.from,s.to)!=r))return!1;let i=SJ(n,r);return i?(e(n.update({selection:n.selection.addRange(B.range(i.from,i.to),!1),effects:J.scrollIntoView(i.to)})),!0):!1},zc=ne.define({combine(n){return xi(n,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new MJ(e),scrollToMatch:e=>J.scrollIntoView(e)})}});class yV{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||uJ(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new kJ(this):new _J(this)}getCursor(e,t=0,r){let i=e.doc?e:Ee.create({doc:e});return r==null&&(r=i.doc.length),this.regexp?al(this,i,t,r):ol(this,i,t,r)}}class vV{constructor(e){this.spec=e}}function ol(n,e,t,r){return new bc(e.doc,n.unquoted,t,r,n.caseSensitive?void 0:i=>i.toLowerCase(),n.wholeWord?TJ(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function TJ(n,e){return(t,r,i,s)=>((s>t||s+i.length<r)&&(s=Math.max(0,t-2),i=n.sliceString(s,Math.min(n.length,r+2))),(e(ng(i,t-s))!=Ze.Word||e(rg(i,t-s))!=Ze.Word)&&(e(rg(i,r-s))!=Ze.Word||e(ng(i,r-s))!=Ze.Word))}class _J extends vV{constructor(e){super(e)}nextMatch(e,t,r){let i=ol(this.spec,e,r,e.doc.length).nextOverlapping();if(i.done){let s=Math.min(e.doc.length,t+this.spec.unquoted.length);i=ol(this.spec,e,0,s).nextOverlapping()}return i.done||i.value.from==t&&i.value.to==r?null:i.value}prevMatchInRange(e,t,r){for(let i=r;;){let s=Math.max(t,i-1e4-this.spec.unquoted.length),o=ol(this.spec,e,s,i),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(s==t)return null;i-=1e4}}prevMatch(e,t,r){let i=this.prevMatchInRange(e,0,t);return i||(i=this.prevMatchInRange(e,Math.max(0,r-this.spec.unquoted.length),e.doc.length)),i&&(i.from!=t||i.to!=r)?i:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let r=ol(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=t)return null;i.push(r.value)}return i}highlight(e,t,r,i){let s=ol(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}function al(n,e,t,r){return new mV(e.doc,n.search,{ignoreCase:!n.caseSensitive,test:n.wholeWord?EJ(e.charCategorizer(e.selection.main.head)):void 0},t,r)}function ng(n,e){return n.slice(Bt(n,e,!1),e)}function rg(n,e){return n.slice(e,Bt(n,e))}function EJ(n){return(e,t,r)=>!r[0].length||(n(ng(r.input,r.index))!=Ze.Word||n(rg(r.input,r.index))!=Ze.Word)&&(n(rg(r.input,r.index+r[0].length))!=Ze.Word||n(ng(r.input,r.index+r[0].length))!=Ze.Word)}class kJ extends vV{nextMatch(e,t,r){let i=al(this.spec,e,r,e.doc.length).next();return i.done&&(i=al(this.spec,e,0,t).next()),i.done?null:i.value}prevMatchInRange(e,t,r){for(let i=1;;i++){let s=Math.max(t,r-i*1e4),o=al(this.spec,e,s,r),a=null;for(;!o.next().done;)a=o.value;if(a&&(s==t||a.from>s+10))return a;if(s==t)return null}}prevMatch(e,t,r){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(t,r)=>{if(r=="&")return e.match[0];if(r=="$")return"$";for(let i=r.length;i>0;i--){let s=+r.slice(0,i);if(s>0&&s<e.match.length)return e.match[s]+r.slice(i)}return t})}matchAll(e,t){let r=al(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=t)return null;i.push(r.value)}return i}highlight(e,t,r,i){let s=al(this.spec,e,Math.max(0,t-250),Math.min(r+250,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}const qh=ge.define(),bS=ge.define(),uo=Nt.define({create(n){return new K0(VO(n).create(),null)},update(n,e){for(let t of e.effects)t.is(qh)?n=new K0(t.value.create(),n.panel):t.is(bS)&&(n=new K0(n.query,t.value?TS:null));return n},provide:n=>Bh.from(n,e=>e.panel)});class K0{constructor(e,t){this.query=e,this.panel=t}}const CJ=ae.mark({class:"cm-searchMatch"}),PJ=ae.mark({class:"cm-searchMatch cm-searchMatch-selected"}),AJ=ft.fromClass(class{constructor(n){this.view=n,this.decorations=this.highlight(n.state.field(uo))}update(n){let e=n.state.field(uo);(e!=n.startState.field(uo)||n.docChanged||n.selectionSet||n.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:n,panel:e}){if(!e||!n.spec.valid)return ae.none;let{view:t}=this,r=new os;for(let i=0,s=t.visibleRanges,o=s.length;i<o;i++){let{from:a,to:l}=s[i];for(;i<o-1&&l>s[i+1].from-2*250;)l=s[++i].to;n.highlight(t.state,a,l,(c,u)=>{let h=t.state.selection.ranges.some(d=>d.from==c&&d.to==u);r.add(c,u,h?PJ:CJ)})}return r.finish()}},{decorations:n=>n.decorations});function Nf(n){return e=>{let t=e.state.field(uo,!1);return t&&t.query.spec.valid?n(e,t):xV(e)}}const ig=Nf((n,{query:e})=>{let{to:t}=n.state.selection.main,r=e.nextMatch(n.state,t,t);if(!r)return!1;let i=B.single(r.from,r.to),s=n.state.facet(zc);return n.dispatch({selection:i,effects:[_S(n,r),s.scrollToMatch(i.main,n)],userEvent:"select.search"}),OV(n),!0}),sg=Nf((n,{query:e})=>{let{state:t}=n,{from:r}=t.selection.main,i=e.prevMatch(t,r,r);if(!i)return!1;let s=B.single(i.from,i.to),o=n.state.facet(zc);return n.dispatch({selection:s,effects:[_S(n,i),o.scrollToMatch(s.main,n)],userEvent:"select.search"}),OV(n),!0}),RJ=Nf((n,{query:e})=>{let t=e.matchAll(n.state,1e3);return!t||!t.length?!1:(n.dispatch({selection:B.create(t.map(r=>B.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),IJ=({state:n,dispatch:e})=>{let t=n.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:r,to:i}=t.main,s=[],o=0;for(let a=new bc(n.doc,n.sliceDoc(r,i));!a.next().done;){if(s.length>1e3)return!1;a.value.from==r&&(o=s.length),s.push(B.range(a.value.from,a.value.to))}return e(n.update({selection:B.create(s,o),userEvent:"select.search.matches"})),!0},gC=Nf((n,{query:e})=>{let{state:t}=n,{from:r,to:i}=t.selection.main;if(t.readOnly)return!1;let s=e.nextMatch(t,r,r);if(!s)return!1;let o=s,a=[],l,c,u=[];if(o.from==r&&o.to==i&&(c=t.toText(e.getReplacement(o)),a.push({from:o.from,to:o.to,insert:c}),o=e.nextMatch(t,o.from,o.to),u.push(J.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(r).number)+"."))),o){let h=a.length==0||a[0].from>=s.to?0:s.to-s.from-c.length;l=B.single(o.from-h,o.to-h),u.push(_S(n,o)),u.push(t.facet(zc).scrollToMatch(l.main,n))}return n.dispatch({changes:a,selection:l,effects:u,userEvent:"input.replace"}),!0}),NJ=Nf((n,{query:e})=>{if(n.state.readOnly)return!1;let t=e.matchAll(n.state,1e9).map(i=>{let{from:s,to:o}=i;return{from:s,to:o,insert:e.getReplacement(i)}});if(!t.length)return!1;let r=n.state.phrase("replaced $ matches",t.length)+".";return n.dispatch({changes:t,effects:J.announce.of(r),userEvent:"input.replace.all"}),!0});function TS(n){return n.state.facet(zc).createPanel(n)}function VO(n,e){var t,r,i,s,o;let a=n.selection.main,l=a.empty||a.to>a.from+100?"":n.sliceDoc(a.from,a.to);if(e&&!l)return e;let c=n.facet(zc);return new yV({search:((t=e==null?void 0:e.literal)!==null&&t!==void 0?t:c.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(r=e==null?void 0:e.caseSensitive)!==null&&r!==void 0?r:c.caseSensitive,literal:(i=e==null?void 0:e.literal)!==null&&i!==void 0?i:c.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:c.regexp,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:c.wholeWord})}function wV(n){let e=zh(n,TS);return e&&e.dom.querySelector("[main-field]")}function OV(n){let e=wV(n);e&&e==n.root.activeElement&&e.select()}const xV=n=>{let e=n.state.field(uo,!1);if(e&&e.panel){let t=wV(n);if(t&&t!=n.root.activeElement){let r=VO(n.state,e.query.spec);r.valid&&n.dispatch({effects:qh.of(r)}),t.focus(),t.select()}}else n.dispatch({effects:[bS.of(!0),e?qh.of(VO(n.state,e.query.spec)):ge.appendConfig.of(VJ)]});return!0},SV=n=>{let e=n.state.field(uo,!1);if(!e||!e.panel)return!1;let t=zh(n,TS);return t&&t.dom.contains(n.root.activeElement)&&n.focus(),n.dispatch({effects:bS.of(!1)}),!0},DJ=[{key:"Mod-f",run:xV,scope:"editor search-panel"},{key:"F3",run:ig,shift:sg,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:ig,shift:sg,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:SV,scope:"editor search-panel"},{key:"Mod-Shift-l",run:IJ},{key:"Mod-Alt-g",run:hJ},{key:"Mod-d",run:bJ,preventDefault:!0}];class MJ{constructor(e){this.view=e;let t=this.query=e.state.field(uo).query.spec;this.commit=this.commit.bind(this),this.searchField=$e("input",{value:t.search,placeholder:Qn(e,"Find"),"aria-label":Qn(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=$e("input",{value:t.replace,placeholder:Qn(e,"Replace"),"aria-label":Qn(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=$e("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=$e("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=$e("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function r(i,s,o){return $e("button",{class:"cm-button",name:i,onclick:s,type:"button"},o)}this.dom=$e("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>ig(e),[Qn(e,"next")]),r("prev",()=>sg(e),[Qn(e,"previous")]),r("select",()=>RJ(e),[Qn(e,"all")]),$e("label",null,[this.caseField,Qn(e,"match case")]),$e("label",null,[this.reField,Qn(e,"regexp")]),$e("label",null,[this.wordField,Qn(e,"by word")]),...e.state.readOnly?[]:[$e("br"),this.replaceField,r("replace",()=>gC(e),[Qn(e,"replace")]),r("replaceAll",()=>NJ(e),[Qn(e,"replace all")])],$e("button",{name:"close",onclick:()=>SV(e),"aria-label":Qn(e,"close"),type:"button"},["×"])])}commit(){let e=new yV({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:qh.of(e)}))}keydown(e){BG(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?sg:ig)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),gC(this.view))}update(e){for(let t of e.transactions)for(let r of t.effects)r.is(qh)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(zc).top}}function Qn(n,e){return n.state.phrase(e)}const Gd=30,Xd=/[\s\.,:;?!]/;function _S(n,{from:e,to:t}){let r=n.state.doc.lineAt(e),i=n.state.doc.lineAt(t).to,s=Math.max(r.from,e-Gd),o=Math.min(i,t+Gd),a=n.state.sliceDoc(s,o);if(s!=r.from){for(let l=0;l<Gd;l++)if(!Xd.test(a[l+1])&&Xd.test(a[l])){a=a.slice(l);break}}if(o!=i){for(let l=a.length-1;l>a.length-Gd;l--)if(!Xd.test(a[l-1])&&Xd.test(a[l])){a=a.slice(0,l);break}}return J.announce.of(`${n.state.phrase("current match")}. ${a} ${n.state.phrase("on line")} ${r.number}.`)}const LJ=J.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),VJ=[uo,Qo.low(AJ),LJ];class bV{constructor(e,t,r,i){this.state=e,this.pos=t,this.explicit=r,this.view=i,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=It(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),r=Math.max(t.from,this.pos-250),i=t.text.slice(r-t.from,this.pos-t.from),s=i.search(_V(e,!1));return s<0?null:{from:r+s,to:this.pos,text:i.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,t,r){e=="abort"&&this.abortListeners&&(this.abortListeners.push(t),r&&r.onDocChange&&(this.abortOnDocChange=!0))}}function yC(n){let e=Object.keys(n).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function FJ(n){let e=Object.create(null),t=Object.create(null);for(let{label:i}of n){e[i[0]]=!0;for(let s=1;s<i.length;s++)t[i[s]]=!0}let r=yC(e)+yC(t)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function TV(n){let e=n.map(i=>typeof i=="string"?{label:i}:i),[t,r]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:FJ(e);return i=>{let s=i.matchBefore(r);return s||i.explicit?{from:s?s.from:i.pos,options:e,validFor:t}:null}}function QJ(n,e){return t=>{for(let r=It(t.state).resolveInner(t.pos,-1);r;r=r.parent){if(n.indexOf(r.name)>-1)return null;if(r.type.isTop)break}return e(t)}}class vC{constructor(e,t,r,i){this.completion=e,this.source=t,this.match=r,this.score=i}}function ya(n){return n.selection.main.from}function _V(n,e){var t;let{source:r}=n,i=e&&r[0]!="^",s=r[r.length-1]!="$";return!i&&!s?n:new RegExp(`${i?"^":""}(?:${r})${s?"$":""}`,(t=n.flags)!==null&&t!==void 0?t:n.ignoreCase?"i":"")}const ES=Oi.define();function $J(n,e,t,r){let{main:i}=n.selection,s=t-i.from,o=r-i.from;return Object.assign(Object.assign({},n.changeByRange(a=>{if(a!=i&&t!=r&&n.sliceDoc(a.from+s,a.from+o)!=n.sliceDoc(t,r))return{range:a};let l=n.toText(e);return{changes:{from:a.from+s,to:r==i.from?a.to:a.from+o,insert:l},range:B.cursor(a.from+s+l.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}const wC=new WeakMap;function jJ(n){if(!Array.isArray(n))return n;let e=wC.get(n);return e||wC.set(n,e=TV(n)),e}const og=ge.define(),Hh=ge.define();class zJ{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let r=_n(e,t),i=ei(r);this.chars.push(r);let s=e.slice(t,t+i),o=s.toUpperCase();this.folded.push(_n(o==s?s.toLowerCase():o,0)),t+=i}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:r,any:i,precise:s,byWord:o}=this;if(t.length==1){let O=_n(e,0),S=ei(O),E=S==e.length?0:-100;if(O!=t[0])if(O==r[0])E+=-200;else return null;return this.ret(E,[0,S])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=t.length,c=0;if(a<0){for(let O=0,S=Math.min(e.length,200);O<S&&c<l;){let E=_n(e,O);(E==t[c]||E==r[c])&&(i[c++]=O),O+=ei(E)}if(c<l)return null}let u=0,h=0,d=!1,p=0,g=-1,y=-1,w=/[a-z]/.test(e),v=!0;for(let O=0,S=Math.min(e.length,200),E=0;O<S&&h<l;){let R=_n(e,O);a<0&&(u<l&&R==t[u]&&(s[u++]=O),p<l&&(R==t[p]||R==r[p]?(p==0&&(g=O),y=O+1,p++):p=0));let M,b=R<255?R>=48&&R<=57||R>=97&&R<=122?2:R>=65&&R<=90?1:0:(M=Y1(R))!=M.toLowerCase()?1:M!=M.toUpperCase()?2:0;(!O||b==1&&w||E==0&&b!=0)&&(t[h]==R||r[h]==R&&(d=!0)?o[h++]=O:o.length&&(v=!1)),E=b,O+=ei(R)}return h==l&&o[0]==0&&v?this.result(-100+(d?-200:0),o,e):p==l&&g==0?this.ret(-200-e.length+(y==e.length?0:-100),[0,y]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):p==l?this.ret(-900-e.length,[g,y]):h==l?this.result(-100+(d?-200:0)+-700+(v?0:-1100),o,e):t.length==2?null:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,t,r){let i=[],s=0;for(let o of t){let a=o+(this.astral?ei(_n(r,o)):1);s&&i[s-1]==o?i[s-1]=a:(i[s++]=o,i[s++]=a)}return this.ret(e-r.length,i)}}class BJ{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),r=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return r==null?null:(this.matched=[0,t.length],this.score=r+(e.length==this.pattern.length?0:-100),this)}}const At=ne.define({combine(n){return xi(n,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:UJ,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>r=>OC(e(r),t(r)),optionClass:(e,t)=>r=>OC(e(r),t(r)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})}});function OC(n,e){return n?e?n+" "+e:n:e}function UJ(n,e,t,r,i,s){let o=n.textDirection==Xe.RTL,a=o,l=!1,c="top",u,h,d=e.left-i.left,p=i.right-e.right,g=r.right-r.left,y=r.bottom-r.top;if(a&&d<Math.min(g,p)?a=!1:!a&&p<Math.min(g,d)&&(a=!0),g<=(a?d:p))u=Math.max(i.top,Math.min(t.top,i.bottom-y))-e.top,h=Math.min(400,a?d:p);else{l=!0,h=Math.min(400,(o?e.right:i.right-e.left)-30);let O=i.bottom-e.bottom;O>=y||O>e.top?u=t.bottom-e.top:(c="bottom",u=e.bottom-t.top)}let w=(e.bottom-e.top)/s.offsetHeight,v=(e.right-e.left)/s.offsetWidth;return{style:`${c}: ${u/w}px; max-width: ${h/v}px`,class:"cm-completionInfo-"+(l?o?"left-narrow":"right-narrow":a?"left":"right")}}function WJ(n){let e=n.addToOptions.slice();return n.icons&&e.push({render(t){let r=document.createElement("div");return r.classList.add("cm-completionIcon"),t.type&&r.classList.add(...t.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),r.setAttribute("aria-hidden","true"),r},position:20}),e.push({render(t,r,i,s){let o=document.createElement("span");o.className="cm-completionLabel";let a=t.displayLabel||t.label,l=0;for(let c=0;c<s.length;){let u=s[c++],h=s[c++];u>l&&o.appendChild(document.createTextNode(a.slice(l,u)));let d=o.appendChild(document.createElement("span"));d.appendChild(document.createTextNode(a.slice(u,h))),d.className="cm-completionMatchedText",l=h}return l<a.length&&o.appendChild(document.createTextNode(a.slice(l))),o},position:50},{render(t){if(!t.detail)return null;let r=document.createElement("span");return r.className="cm-completionDetail",r.textContent=t.detail,r},position:80}),e.sort((t,r)=>t.position-r.position).map(t=>t.render)}function Y0(n,e,t){if(n<=t)return{from:0,to:n};if(e<0&&(e=0),e<=n>>1){let i=Math.floor(e/t);return{from:i*t,to:(i+1)*t}}let r=Math.floor((n-e)/t);return{from:n-(r+1)*t,to:n-r*t}}class qJ{constructor(e,t,r){this.view=e,this.stateField=t,this.applyCompletion=r,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let i=e.state.field(t),{options:s,selected:o}=i.open,a=e.state.facet(At);this.optionContent=WJ(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=Y0(s.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{let{options:c}=e.state.field(t).open;for(let u=l.target,h;u&&u!=this.dom;u=u.parentNode)if(u.nodeName=="LI"&&(h=/-(\d+)$/.exec(u.id))&&+h[1]<c.length){this.applyCompletion(e,c[+h[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let c=e.state.field(this.stateField,!1);c&&c.tooltip&&e.state.facet(At).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:Hh.of(null)})}),this.showOptions(s,i.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let r=e.state.field(this.stateField),i=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),r!=i){let{options:s,selected:o,disabled:a}=r.open;(!i.open||i.open.options!=s)&&(this.range=Y0(s.length,o,e.state.facet(At).maxRenderedOptions),this.showOptions(s,r.id)),this.updateSel(),a!=((t=i.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let r of this.currentClass.split(" "))r&&this.dom.classList.remove(r);for(let r of t.split(" "))r&&this.dom.classList.add(r);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=Y0(t.options.length,t.selected,this.view.state.facet(At).maxRenderedOptions),this.showOptions(t.options,e.id)),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:r}=t.options[t.selected],{info:i}=r;if(!i)return;let s=typeof i=="string"?document.createTextNode(i):i(r);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,r)}).catch(o=>An(this.view.state,o,"completion info")):this.addInfoPane(s,r)}}addInfoPane(e,t){this.destroyInfo();let r=this.info=document.createElement("div");if(r.className="cm-tooltip cm-completionInfo",e.nodeType!=null)r.appendChild(e),this.infoDestroy=null;else{let{dom:i,destroy:s}=e;r.appendChild(i),this.infoDestroy=s||null}this.dom.appendChild(r),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let r=this.list.firstChild,i=this.range.from;r;r=r.nextSibling,i++)r.nodeName!="LI"||!r.id?i--:i==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),t=r):r.hasAttribute("aria-selected")&&r.removeAttribute("aria-selected");return t&&GJ(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.documentElement;s={left:0,top:0,right:o.clientWidth,bottom:o.clientHeight}}return i.top>Math.min(s.bottom,t.bottom)-10||i.bottom<Math.max(s.top,t.top)+10?null:this.view.state.facet(At).positionInfo(this.view,t,i,r,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,r){const i=document.createElement("ul");i.id=t,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions")),i.addEventListener("mousedown",o=>{o.target==i&&o.preventDefault()});let s=null;for(let o=r.from;o<r.to;o++){let{completion:a,match:l}=e[o],{section:c}=a;if(c){let d=typeof c=="string"?c:c.name;if(d!=s&&(o>r.from||r.from==0))if(s=d,typeof c!="string"&&c.header)i.appendChild(c.header(c));else{let p=i.appendChild(document.createElement("completion-section"));p.textContent=d}}const u=i.appendChild(document.createElement("li"));u.id=t+"-"+o,u.setAttribute("role","option");let h=this.optionClass(a);h&&(u.className=h);for(let d of this.optionContent){let p=d(a,this.view.state,this.view,l);p&&u.appendChild(p)}}return r.from&&i.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function HJ(n,e){return t=>new qJ(t,n,e)}function GJ(n,e){let t=n.getBoundingClientRect(),r=e.getBoundingClientRect(),i=t.height/n.offsetHeight;r.top<t.top?n.scrollTop-=(t.top-r.top)/i:r.bottom>t.bottom&&(n.scrollTop+=(r.bottom-t.bottom)/i)}function xC(n){return(n.boost||0)*100+(n.apply?10:0)+(n.info?5:0)+(n.type?1:0)}function XJ(n,e){let t=[],r=null,i=c=>{t.push(c);let{section:u}=c.completion;if(u){r||(r=[]);let h=typeof u=="string"?u:u.name;r.some(d=>d.name==h)||r.push(typeof u=="string"?{name:h}:u)}},s=e.facet(At);for(let c of n)if(c.hasResult()){let u=c.result.getMatch;if(c.result.filter===!1)for(let h of c.result.options)i(new vC(h,c.source,u?u(h):[],1e9-t.length));else{let h=e.sliceDoc(c.from,c.to),d,p=s.filterStrict?new BJ(h):new zJ(h);for(let g of c.result.options)if(d=p.match(g.label)){let y=g.displayLabel?u?u(g,d.matched):[]:d.matched;i(new vC(g,c.source,y,d.score+(g.boost||0)))}}}if(r){let c=Object.create(null),u=0,h=(d,p)=>{var g,y;return((g=d.rank)!==null&&g!==void 0?g:1e9)-((y=p.rank)!==null&&y!==void 0?y:1e9)||(d.name<p.name?-1:1)};for(let d of r.sort(h))u-=1e5,c[d.name]=u;for(let d of t){let{section:p}=d.completion;p&&(d.score+=c[typeof p=="string"?p:p.name])}}let o=[],a=null,l=s.compareCompletions;for(let c of t.sort((u,h)=>h.score-u.score||l(u.completion,h.completion))){let u=c.completion;!a||a.label!=u.label||a.detail!=u.detail||a.type!=null&&u.type!=null&&a.type!=u.type||a.apply!=u.apply||a.boost!=u.boost?o.push(c):xC(c.completion)>xC(a)&&(o[o.length-1]=c),a=c.completion}return o}class bl{constructor(e,t,r,i,s,o){this.options=e,this.attrs=t,this.tooltip=r,this.timestamp=i,this.selected=s,this.disabled=o}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new bl(this.options,SC(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,r,i,s,o){if(i&&!o&&e.some(c=>c.isPending))return i.setDisabled();let a=XJ(e,t);if(!a.length)return i&&e.some(c=>c.isPending)?i.setDisabled():null;let l=t.facet(At).selectOnOpen?0:-1;if(i&&i.selected!=l&&i.selected!=-1){let c=i.options[i.selected].completion;for(let u=0;u<a.length;u++)if(a[u].completion==c){l=u;break}}return new bl(a,SC(r,l),{pos:e.reduce((c,u)=>u.hasResult()?Math.min(c,u.from):c,1e8),create:tZ,above:s.aboveCursor},i?i.timestamp:Date.now(),l,!1)}map(e){return new bl(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new bl(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class ag{constructor(e,t,r){this.active=e,this.id=t,this.open=r}static start(){return new ag(ZJ,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,r=t.facet(At),s=(r.override||t.languageDataAt("autocomplete",ya(t)).map(jJ)).map(l=>(this.active.find(u=>u.source==l)||new cr(l,this.active.some(u=>u.state!=0)?1:0)).update(e,r));s.length==this.active.length&&s.every((l,c)=>l==this.active[c])&&(s=this.active);let o=this.open,a=e.effects.some(l=>l.is(kS));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!KJ(s,this.active)||a?o=bl.build(s,t,this.id,o,r,a):o&&o.disabled&&!s.some(l=>l.isPending)&&(o=null),!o&&s.every(l=>!l.isPending)&&s.some(l=>l.hasResult())&&(s=s.map(l=>l.hasResult()?new cr(l.source,0):l));for(let l of e.effects)l.is(kV)&&(o=o&&o.setSelected(l.value,this.id));return s==this.active&&o==this.open?this:new ag(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?YJ:JJ}}function KJ(n,e){if(n==e)return!0;for(let t=0,r=0;;){for(;t<n.length&&!n[t].hasResult();)t++;for(;r<e.length&&!e[r].hasResult();)r++;let i=t==n.length,s=r==e.length;if(i||s)return i==s;if(n[t++].result!=e[r++].result)return!1}}const YJ={"aria-autocomplete":"list"},JJ={};function SC(n,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":n};return e>-1&&(t["aria-activedescendant"]=n+"-"+e),t}const ZJ=[];function EV(n,e){if(n.isUserEvent("input.complete")){let r=n.annotation(ES);if(r&&e.activateOnCompletion(r))return 12}let t=n.isUserEvent("input.type");return t&&e.activateOnTyping?5:t?1:n.isUserEvent("delete.backward")?2:n.selection?8:n.docChanged?16:0}class cr{constructor(e,t,r=!1){this.source=e,this.state=t,this.explicit=r}hasResult(){return!1}get isPending(){return this.state==1}update(e,t){let r=EV(e,t),i=this;(r&8||r&16&&this.touches(e))&&(i=new cr(i.source,0)),r&4&&i.state==0&&(i=new cr(this.source,1)),i=i.updateFor(e,r);for(let s of e.effects)if(s.is(og))i=new cr(i.source,1,s.value);else if(s.is(Hh))i=new cr(i.source,0);else if(s.is(kS))for(let o of s.value)o.source==i.source&&(i=o);return i}updateFor(e,t){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(ya(e.state))}}class zl extends cr{constructor(e,t,r,i,s,o){super(e,3,t),this.limit=r,this.result=i,this.from=s,this.to=o}hasResult(){return!0}updateFor(e,t){var r;if(!(t&3))return this.map(e.changes);let i=this.result;i.map&&!e.changes.empty&&(i=i.map(i,e.changes));let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=ya(e.state);if(a>o||!i||t&2&&(ya(e.startState)==this.from||a<this.limit))return new cr(this.source,t&4?1:0);let l=e.changes.mapPos(this.limit);return eZ(i.validFor,e.state,s,o)?new zl(this.source,this.explicit,l,i,s,o):i.update&&(i=i.update(i,s,o,new bV(e.state,a,!1)))?new zl(this.source,this.explicit,l,i,i.from,(r=i.to)!==null&&r!==void 0?r:ya(e.state)):new cr(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new zl(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new cr(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function eZ(n,e,t,r){if(!n)return!1;let i=e.sliceDoc(t,r);return typeof n=="function"?n(i,t,r,e):_V(n,!0).test(i)}const kS=ge.define({map(n,e){return n.map(t=>t.map(e))}}),kV=ge.define(),kn=Nt.define({create(){return ag.start()},update(n,e){return n.update(e)},provide:n=>[fS.from(n,e=>e.tooltip),J.contentAttributes.from(n,e=>e.attrs)]});function CS(n,e){const t=e.completion.apply||e.completion.label;let r=n.state.field(kn).active.find(i=>i.source==e.source);return r instanceof zl?(typeof t=="string"?n.dispatch(Object.assign(Object.assign({},$J(n.state,t,r.from,r.to)),{annotations:ES.of(e.completion)})):t(n,e.completion,r.from,r.to),!0):!1}const tZ=HJ(kn,CS);function Kd(n,e="option"){return t=>{let r=t.state.field(kn,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<t.state.facet(At).interactionDelay)return!1;let i=1,s;e=="page"&&(s=oL(t,r.open.tooltip))&&(i=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=r.open.options,a=r.open.selected>-1?r.open.selected+i*(n?1:-1):n?0:o-1;return a<0?a=e=="page"?0:o-1:a>=o&&(a=e=="page"?o-1:0),t.dispatch({effects:kV.of(a)}),!0}}const nZ=n=>{let e=n.state.field(kn,!1);return n.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<n.state.facet(At).interactionDelay?!1:CS(n,e.open.options[e.open.selected])},bC=n=>n.state.field(kn,!1)?(n.dispatch({effects:og.of(!0)}),!0):!1,rZ=n=>{let e=n.state.field(kn,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(n.dispatch({effects:Hh.of(null)}),!0)};class iZ{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const sZ=50,oZ=1e3,aZ=ft.fromClass(class{constructor(n){this.view=n,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of n.state.field(kn).active)e.isPending&&this.startQuery(e)}update(n){let e=n.state.field(kn),t=n.state.facet(At);if(!n.selectionSet&&!n.docChanged&&n.startState.field(kn)==e)return;let r=n.transactions.some(s=>{let o=EV(s,t);return o&8||(s.selection||s.docChanged)&&!(o&3)});for(let s=0;s<this.running.length;s++){let o=this.running[s];if(r||o.context.abortOnDocChange&&n.docChanged||o.updates.length+n.transactions.length>sZ&&Date.now()-o.time>oZ){for(let a of o.context.abortListeners)try{a()}catch(l){An(this.view.state,l)}o.context.abortListeners=null,this.running.splice(s--,1)}else o.updates.push(...n.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),n.transactions.some(s=>s.effects.some(o=>o.is(og)))&&(this.pendingStart=!0);let i=this.pendingStart?50:t.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(s=>s.isPending&&!this.running.some(o=>o.active.source==s.source))?setTimeout(()=>this.startUpdate(),i):-1,this.composing!=0)for(let s of n.transactions)s.isUserEvent("input.type")?this.composing=2:this.composing==2&&s.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:n}=this.view,e=n.field(kn);for(let t of e.active)t.isPending&&!this.running.some(r=>r.active.source==t.source)&&this.startQuery(t);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(At).updateSyncTime))}startQuery(n){let{state:e}=this.view,t=ya(e),r=new bV(e,t,n.explicit,this.view),i=new iZ(n,r);this.running.push(i),Promise.resolve(n.source(r)).then(s=>{i.context.aborted||(i.done=s||null,this.scheduleAccept())},s=>{this.view.dispatch({effects:Hh.of(null)}),An(this.view.state,s)})}scheduleAccept(){this.running.every(n=>n.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(At).updateSyncTime))}accept(){var n;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(At),r=this.view.state.field(kn);for(let i=0;i<this.running.length;i++){let s=this.running[i];if(s.done===void 0)continue;if(this.running.splice(i--,1),s.done){let a=ya(s.updates.length?s.updates[0].startState:this.view.state),l=Math.min(a,s.done.from+(s.active.explicit?0:1)),c=new zl(s.active.source,s.active.explicit,l,s.done,s.done.from,(n=s.done.to)!==null&&n!==void 0?n:a);for(let u of s.updates)c=c.update(u,t);if(c.hasResult()){e.push(c);continue}}let o=r.active.find(a=>a.source==s.active.source);if(o&&o.isPending)if(s.done==null){let a=new cr(s.active.source,0);for(let l of s.updates)a=a.update(l,t);a.isPending||e.push(a)}else this.startQuery(o)}(e.length||r.open&&r.open.disabled)&&this.view.dispatch({effects:kS.of(e)})}},{eventHandlers:{blur(n){let e=this.view.state.field(kn,!1);if(e&&e.tooltip&&this.view.state.facet(At).closeOnBlur){let t=e.open&&oL(this.view,e.open.tooltip);(!t||!t.dom.contains(n.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:Hh.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:og.of(!1)}),20),this.composing=0}}}),lZ=typeof navigator=="object"&&/Win/.test(navigator.platform),cZ=Qo.highest(J.domEventHandlers({keydown(n,e){let t=e.state.field(kn,!1);if(!t||!t.open||t.open.disabled||t.open.selected<0||n.key.length>1||n.ctrlKey&&!(lZ&&n.altKey)||n.metaKey)return!1;let r=t.open.options[t.open.selected],i=t.active.find(o=>o.source==r.source),s=r.completion.commitCharacters||i.result.commitCharacters;return s&&s.indexOf(n.key)>-1&&CS(e,r),!1}})),CV=J.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class uZ{constructor(e,t,r,i){this.field=e,this.line=t,this.from=r,this.to=i}}class PS{constructor(e,t,r){this.field=e,this.from=t,this.to=r}map(e){let t=e.mapPos(this.from,-1,zt.TrackDel),r=e.mapPos(this.to,1,zt.TrackDel);return t==null||r==null?null:new PS(this.field,t,r)}}class AS{constructor(e,t){this.lines=e,this.fieldPositions=t}instantiate(e,t){let r=[],i=[t],s=e.doc.lineAt(t),o=/^\s*/.exec(s.text)[0];for(let l of this.lines){if(r.length){let c=o,u=/^\t*/.exec(l)[0].length;for(let h=0;h<u;h++)c+=e.facet(Pf);i.push(t+c.length-u),l=c+l.slice(u)}r.push(l),t+=l.length+1}let a=this.fieldPositions.map(l=>new PS(l.field,i[l.line]+l.from,i[l.line]+l.to));return{text:r,ranges:a}}static parse(e){let t=[],r=[],i=[],s;for(let o of e.split(/\r\n?|\n/)){for(;s=/[#$]\{(?:(\d+)(?::([^}]*))?|((?:\\[{}]|[^}])*))\}/.exec(o);){let a=s[1]?+s[1]:null,l=s[2]||s[3]||"",c=-1,u=l.replace(/\\[{}]/g,h=>h[1]);for(let h=0;h<t.length;h++)(a!=null?t[h].seq==a:u&&t[h].name==u)&&(c=h);if(c<0){let h=0;for(;h<t.length&&(a==null||t[h].seq!=null&&t[h].seq<a);)h++;t.splice(h,0,{seq:a,name:u}),c=h;for(let d of i)d.field>=c&&d.field++}i.push(new uZ(c,r.length,s.index,s.index+u.length)),o=o.slice(0,s.index)+l+o.slice(s.index+s[0].length)}o=o.replace(/\\([{}])/g,(a,l,c)=>{for(let u of i)u.line==r.length&&u.from>c&&(u.from--,u.to--);return l}),r.push(o)}return new AS(r,i)}}let hZ=ae.widget({widget:new class extends Si{toDOM(){let n=document.createElement("span");return n.className="cm-snippetFieldPosition",n}ignoreEvent(){return!1}}}),fZ=ae.mark({class:"cm-snippetField"});class Bc{constructor(e,t){this.ranges=e,this.active=t,this.deco=ae.set(e.map(r=>(r.from==r.to?hZ:fZ).range(r.from,r.to)))}map(e){let t=[];for(let r of this.ranges){let i=r.map(e);if(!i)return null;t.push(i)}return new Bc(t,this.active)}selectionInsideField(e){return e.ranges.every(t=>this.ranges.some(r=>r.field==this.active&&r.from<=t.from&&r.to>=t.to))}}const Df=ge.define({map(n,e){return n&&n.map(e)}}),dZ=ge.define(),Gh=Nt.define({create(){return null},update(n,e){for(let t of e.effects){if(t.is(Df))return t.value;if(t.is(dZ)&&n)return new Bc(n.ranges,t.value)}return n&&e.docChanged&&(n=n.map(e.changes)),n&&e.selection&&!n.selectionInsideField(e.selection)&&(n=null),n},provide:n=>J.decorations.from(n,e=>e?e.deco:ae.none)});function RS(n,e){return B.create(n.filter(t=>t.field==e).map(t=>B.range(t.from,t.to)))}function pZ(n){let e=AS.parse(n);return(t,r,i,s)=>{let{text:o,ranges:a}=e.instantiate(t.state,i),{main:l}=t.state.selection,c={changes:{from:i,to:s==l.from?l.to:s,insert:Ce.of(o)},scrollIntoView:!0,annotations:r?[ES.of(r),gt.userEvent.of("input.complete")]:void 0};if(a.length&&(c.selection=RS(a,0)),a.some(u=>u.field>0)){let u=new Bc(a,0),h=c.effects=[Df.of(u)];t.state.field(Gh,!1)===void 0&&h.push(ge.appendConfig.of([Gh,wZ,OZ,CV]))}t.dispatch(t.state.update(c))}}function PV(n){return({state:e,dispatch:t})=>{let r=e.field(Gh,!1);if(!r||n<0&&r.active==0)return!1;let i=r.active+n,s=n>0&&!r.ranges.some(o=>o.field==i+n);return t(e.update({selection:RS(r.ranges,i),effects:Df.of(s?null:new Bc(r.ranges,i)),scrollIntoView:!0})),!0}}const mZ=({state:n,dispatch:e})=>n.field(Gh,!1)?(e(n.update({effects:Df.of(null)})),!0):!1,gZ=PV(1),yZ=PV(-1),vZ=[{key:"Tab",run:gZ,shift:yZ},{key:"Escape",run:mZ}],TC=ne.define({combine(n){return n.length?n[0]:vZ}}),wZ=Qo.highest(kf.compute([TC],n=>n.facet(TC)));function Ai(n,e){return Object.assign(Object.assign({},e),{apply:pZ(n)})}const OZ=J.domEventHandlers({mousedown(n,e){let t=e.state.field(Gh,!1),r;if(!t||(r=e.posAtCoords({x:n.clientX,y:n.clientY}))==null)return!1;let i=t.ranges.find(s=>s.from<=r&&s.to>=r);return!i||i.field==t.active?!1:(e.dispatch({selection:RS(t.ranges,i.field),effects:Df.of(t.ranges.some(s=>s.field>i.field)?new Bc(t.ranges,i.field):null),scrollIntoView:!0}),!0)}}),Xh={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},la=ge.define({map(n,e){let t=e.mapPos(n,-1,zt.TrackAfter);return t??void 0}}),IS=new class extends Na{};IS.startSide=1;IS.endSide=-1;const AV=Nt.define({create(){return Re.empty},update(n,e){if(n=n.map(e.changes),e.selection){let t=e.state.doc.lineAt(e.selection.main.head);n=n.update({filter:r=>r>=t.from&&r<=t.to})}for(let t of e.effects)t.is(la)&&(n=n.update({add:[IS.range(t.value,t.value+1)]}));return n}});function xZ(){return[bZ,AV]}const J0="()[]{}<>«»»«［］｛｝";function RV(n){for(let e=0;e<J0.length;e+=2)if(J0.charCodeAt(e)==n)return J0.charAt(e+1);return Y1(n<128?n:n+1)}function IV(n,e){return n.languageDataAt("closeBrackets",e)[0]||Xh}const SZ=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),bZ=J.inputHandler.of((n,e,t,r)=>{if((SZ?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let i=n.state.selection.main;if(r.length>2||r.length==2&&ei(_n(r,0))==1||e!=i.from||t!=i.to)return!1;let s=EZ(n.state,r);return s?(n.dispatch(s),!0):!1}),TZ=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let r=IV(n,n.selection.main.head).brackets||Xh.brackets,i=null,s=n.changeByRange(o=>{if(o.empty){let a=kZ(n.doc,o.head);for(let l of r)if(l==a&&vy(n.doc,o.head)==RV(_n(l,0)))return{changes:{from:o.head-l.length,to:o.head+l.length},range:B.cursor(o.head-l.length)}}return{range:i=o}});return i||e(n.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!i},_Z=[{key:"Backspace",run:TZ}];function EZ(n,e){let t=IV(n,n.selection.main.head),r=t.brackets||Xh.brackets;for(let i of r){let s=RV(_n(i,0));if(e==i)return s==i?AZ(n,i,r.indexOf(i+i+i)>-1,t):CZ(n,i,s,t.before||Xh.before);if(e==s&&NV(n,n.selection.main.from))return PZ(n,i,s)}return null}function NV(n,e){let t=!1;return n.field(AV).between(0,n.doc.length,r=>{r==e&&(t=!0)}),t}function vy(n,e){let t=n.sliceString(e,e+2);return t.slice(0,ei(_n(t,0)))}function kZ(n,e){let t=n.sliceString(e-2,e);return ei(_n(t,0))==t.length?t:t.slice(1)}function CZ(n,e,t,r){let i=null,s=n.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:t,from:o.to}],effects:la.of(o.to+e.length),range:B.range(o.anchor+e.length,o.head+e.length)};let a=vy(n.doc,o.head);return!a||/\s/.test(a)||r.indexOf(a)>-1?{changes:{insert:e+t,from:o.head},effects:la.of(o.head+e.length),range:B.cursor(o.head+e.length)}:{range:i=o}});return i?null:n.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function PZ(n,e,t){let r=null,i=n.changeByRange(s=>s.empty&&vy(n.doc,s.head)==t?{changes:{from:s.head,to:s.head+t.length,insert:t},range:B.cursor(s.head+t.length)}:r={range:s});return r?null:n.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function AZ(n,e,t,r){let i=r.stringPrefixes||Xh.stringPrefixes,s=null,o=n.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:e,from:a.to}],effects:la.of(a.to+e.length),range:B.range(a.anchor+e.length,a.head+e.length)};let l=a.head,c=vy(n.doc,l),u;if(c==e){if(_C(n,l))return{changes:{insert:e+e,from:l},effects:la.of(l+e.length),range:B.cursor(l+e.length)};if(NV(n,l)){let d=t&&n.sliceDoc(l,l+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:l,to:l+d.length,insert:d},range:B.cursor(l+d.length)}}}else{if(t&&n.sliceDoc(l-2*e.length,l)==e+e&&(u=EC(n,l-2*e.length,i))>-1&&_C(n,u))return{changes:{insert:e+e+e+e,from:l},effects:la.of(l+e.length),range:B.cursor(l+e.length)};if(n.charCategorizer(l)(c)!=Ze.Word&&EC(n,l,i)>-1&&!RZ(n,l,e,i))return{changes:{insert:e+e,from:l},effects:la.of(l+e.length),range:B.cursor(l+e.length)}}return{range:s=a}});return s?null:n.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function _C(n,e){let t=It(n).resolveInner(e+1);return t.parent&&t.from==e}function RZ(n,e,t,r){let i=It(n).resolveInner(e,-1),s=r.reduce((o,a)=>Math.max(o,a.length),0);for(let o=0;o<5;o++){let a=n.sliceDoc(i.from,Math.min(i.to,i.from+t.length+s)),l=a.indexOf(t);if(!l||l>-1&&r.indexOf(a.slice(0,l))>-1){let u=i.firstChild;for(;u&&u.from==i.from&&u.to-u.from>t.length+l;){if(n.sliceDoc(u.to-t.length,u.to)==t)return!1;u=u.firstChild}return!0}let c=i.to==e&&i.parent;if(!c)break;i=c}return!1}function EC(n,e,t){let r=n.charCategorizer(e);if(r(n.sliceDoc(e-1,e))!=Ze.Word)return e;for(let i of t){let s=e-i.length;if(n.sliceDoc(s,e)==i&&r(n.sliceDoc(s-1,s))!=Ze.Word)return s}return-1}function IZ(n={}){return[cZ,kn,At.of(n),aZ,NZ,CV]}const DV=[{key:"Ctrl-Space",run:bC},{mac:"Alt-`",run:bC},{key:"Escape",run:rZ},{key:"ArrowDown",run:Kd(!0)},{key:"ArrowUp",run:Kd(!1)},{key:"PageDown",run:Kd(!0,"page")},{key:"PageUp",run:Kd(!1,"page")},{key:"Enter",run:nZ}],NZ=Qo.highest(kf.computeN([At],n=>n.facet(At).defaultKeymap?[DV]:[]));class kC{constructor(e,t,r){this.from=e,this.to=t,this.diagnostic=r}}class na{constructor(e,t,r){this.diagnostics=e,this.panel=t,this.selected=r}static init(e,t,r){let i=r.facet(Kh).markerFilter;i&&(e=i(e,r));let s=e.slice().sort((u,h)=>u.from-h.from||u.to-h.to),o=new os,a=[],l=0;for(let u=0;;){let h=u==s.length?null:s[u];if(!h&&!a.length)break;let d,p;for(a.length?(d=l,p=a.reduce((y,w)=>Math.min(y,w.to),h&&h.from>d?h.from:1e8)):(d=h.from,p=h.to,a.push(h),u++);u<s.length;){let y=s[u];if(y.from==d&&(y.to>y.from||y.to==d))a.push(y),u++,p=Math.min(y.to,p);else{p=Math.min(y.from,p);break}}let g=qZ(a);if(a.some(y=>y.from==y.to||y.from==y.to-1&&r.doc.lineAt(y.from).to==y.from))o.add(d,d,ae.widget({widget:new zZ(g),diagnostics:a.slice()}));else{let y=a.reduce((w,v)=>v.markClass?w+" "+v.markClass:w,"");o.add(d,p,ae.mark({class:"cm-lintRange cm-lintRange-"+g+y,diagnostics:a.slice(),inclusiveEnd:a.some(w=>w.to>p)}))}l=p;for(let y=0;y<a.length;y++)a[y].to<=l&&a.splice(y--,1)}let c=o.finish();return new na(c,t,Tc(c))}}function Tc(n,e=null,t=0){let r=null;return n.between(t,1e9,(i,s,{spec:o})=>{if(!(e&&o.diagnostics.indexOf(e)<0))if(!r)r=new kC(i,s,e||o.diagnostics[0]);else{if(o.diagnostics.indexOf(r.diagnostic)<0)return!1;r=new kC(r.from,s,r.diagnostic)}}),r}function DZ(n,e){let t=e.pos,r=e.end||t,i=n.state.facet(Kh).hideOn(n,t,r);if(i!=null)return i;let s=n.startState.doc.lineAt(e.pos);return!!(n.effects.some(o=>o.is(MV))||n.changes.touchesRange(s.from,Math.max(s.to,r)))}function MZ(n,e){return n.field(Hn,!1)?e:e.concat(ge.appendConfig.of(HZ))}const MV=ge.define(),NS=ge.define(),LV=ge.define(),Hn=Nt.define({create(){return new na(ae.none,null,null)},update(n,e){if(e.docChanged&&n.diagnostics.size){let t=n.diagnostics.map(e.changes),r=null,i=n.panel;if(n.selected){let s=e.changes.mapPos(n.selected.from,1);r=Tc(t,n.selected.diagnostic,s)||Tc(t,null,s)}!t.size&&i&&e.state.facet(Kh).autoPanel&&(i=null),n=new na(t,i,r)}for(let t of e.effects)if(t.is(MV)){let r=e.state.facet(Kh).autoPanel?t.value.length?Yh.open:null:n.panel;n=na.init(t.value,r,e.state)}else t.is(NS)?n=new na(n.diagnostics,t.value?Yh.open:null,n.selected):t.is(LV)&&(n=new na(n.diagnostics,n.panel,t.value));return n},provide:n=>[Bh.from(n,e=>e.panel),J.decorations.from(n,e=>e.diagnostics)]}),LZ=ae.mark({class:"cm-lintRange cm-lintRange-active"});function VZ(n,e,t){let{diagnostics:r}=n.state.field(Hn),i,s=-1,o=-1;r.between(e-(t<0?1:0),e+(t>0?1:0),(l,c,{spec:u})=>{if(e>=l&&e<=c&&(l==c||(e>l||t>0)&&(e<c||t<0)))return i=u.diagnostics,s=l,o=c,!1});let a=n.state.facet(Kh).tooltipFilter;return i&&a&&(i=a(i,n.state)),i?{pos:s,end:o,above:n.state.doc.lineAt(s).to<o,create(){return{dom:FZ(n,i)}}}:null}function FZ(n,e){return $e("ul",{class:"cm-tooltip-lint"},e.map(t=>FV(n,t,!1)))}const QZ=n=>{let e=n.state.field(Hn,!1);(!e||!e.panel)&&n.dispatch({effects:MZ(n.state,[NS.of(!0)])});let t=zh(n,Yh.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},CC=n=>{let e=n.state.field(Hn,!1);return!e||!e.panel?!1:(n.dispatch({effects:NS.of(!1)}),!0)},$Z=n=>{let e=n.state.field(Hn,!1);if(!e)return!1;let t=n.state.selection.main,r=e.diagnostics.iter(t.to+1);return!r.value&&(r=e.diagnostics.iter(0),!r.value||r.from==t.from&&r.to==t.to)?!1:(n.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)},jZ=[{key:"Mod-Shift-m",run:QZ,preventDefault:!0},{key:"F8",run:$Z}],Kh=ne.define({combine(n){return Object.assign({sources:n.map(e=>e.source).filter(e=>e!=null)},xi(n.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,t)=>e?t?r=>e(r)||t(r):e:t}))}});function VV(n){let e=[];if(n)e:for(let{name:t}of n){for(let r=0;r<t.length;r++){let i=t[r];if(/[a-zA-Z]/.test(i)&&!e.some(s=>s.toLowerCase()==i.toLowerCase())){e.push(i);continue e}}e.push("")}return e}function FV(n,e,t){var r;let i=t?VV(e.actions):[];return $e("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},$e("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(n):e.message),(r=e.actions)===null||r===void 0?void 0:r.map((s,o)=>{let a=!1,l=d=>{if(d.preventDefault(),a)return;a=!0;let p=Tc(n.state.field(Hn).diagnostics,e);p&&s.apply(n,p.from,p.to)},{name:c}=s,u=i[o]?c.indexOf(i[o]):-1,h=u<0?c:[c.slice(0,u),$e("u",c.slice(u,u+1)),c.slice(u+1)];return $e("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${c}${u<0?"":` (access key "${i[o]})"`}.`},h)}),e.source&&$e("div",{class:"cm-diagnosticSource"},e.source))}class zZ extends Si{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return $e("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class PC{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=FV(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Yh{constructor(e){this.view=e,this.items=[];let t=i=>{if(i.keyCode==27)CC(this.view),this.view.focus();else if(i.keyCode==38||i.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(i.keyCode==40||i.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(i.keyCode==36)this.moveSelection(0);else if(i.keyCode==35)this.moveSelection(this.items.length-1);else if(i.keyCode==13)this.view.focus();else if(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=VV(s.actions);for(let a=0;a<o.length;a++)if(o[a].toUpperCase().charCodeAt(0)==i.keyCode){let l=Tc(this.view.state.field(Hn).diagnostics,s);l&&s.actions[a].apply(e,l.from,l.to)}}else return;i.preventDefault()},r=i=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(i.target)&&this.moveSelection(s)};this.list=$e("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:r}),this.dom=$e("div",{class:"cm-panel-lint"},this.list,$e("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>CC(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(Hn).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(Hn),r=0,i=!1,s=null,o=new Set;for(e.between(0,this.view.state.doc.length,(a,l,{spec:c})=>{for(let u of c.diagnostics){if(o.has(u))continue;o.add(u);let h=-1,d;for(let p=r;p<this.items.length;p++)if(this.items[p].diagnostic==u){h=p;break}h<0?(d=new PC(this.view,u),this.items.splice(r,0,d),i=!0):(d=this.items[h],h>r&&(this.items.splice(r,h-r),i=!0)),t&&d.diagnostic==t.diagnostic?d.dom.hasAttribute("aria-selected")||(d.dom.setAttribute("aria-selected","true"),s=d):d.dom.hasAttribute("aria-selected")&&d.dom.removeAttribute("aria-selected"),r++}});r<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();this.items.length==0&&(this.items.push(new PC(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:a,panel:l})=>{let c=l.height/this.list.offsetHeight;a.top<l.top?this.list.scrollTop-=(l.top-a.top)/c:a.bottom>l.bottom&&(this.list.scrollTop+=(a.bottom-l.bottom)/c)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function t(){let r=e;e=r.nextSibling,r.remove()}for(let r of this.items)if(r.dom.parentNode==this.list){for(;e!=r.dom;)t();e=r.dom.nextSibling}else this.list.insertBefore(r.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(Hn),r=Tc(t.diagnostics,this.items[e].diagnostic);r&&this.view.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:LV.of(r)})}static open(e){return new Yh(e)}}function BZ(n,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(n)}</svg>')`}function Yd(n){return BZ(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${n}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const UZ=J.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Yd("#d11")},".cm-lintRange-warning":{backgroundImage:Yd("orange")},".cm-lintRange-info":{backgroundImage:Yd("#999")},".cm-lintRange-hint":{backgroundImage:Yd("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function WZ(n){return n=="error"?4:n=="warning"?3:n=="info"?2:1}function qZ(n){let e="hint",t=1;for(let r of n){let i=WZ(r.severity);i>t&&(t=i,e=r.severity)}return e}const HZ=[Hn,J.decorations.compute([Hn],n=>{let{selected:e,panel:t}=n.field(Hn);return!e||!t||e.from==e.to?ae.none:ae.set([LZ.range(e.from,e.to)])}),RX(VZ,{hideOn:DZ}),UZ];var AC=function(e){e===void 0&&(e={});var{crosshairCursor:t=!1}=e,r=[];e.closeBracketsKeymap!==!1&&(r=r.concat(_Z)),e.defaultKeymap!==!1&&(r=r.concat(lJ)),e.searchKeymap!==!1&&(r=r.concat(DJ)),e.historyKeymap!==!1&&(r=r.concat(yY)),e.foldKeymap!==!1&&(r=r.concat(RK)),e.completionKeymap!==!1&&(r=r.concat(DV)),e.lintKeymap!==!1&&(r=r.concat(jZ));var i=[];return e.lineNumbers!==!1&&i.push(zX()),e.highlightActiveLineGutter!==!1&&i.push(WX()),e.highlightSpecialChars!==!1&&i.push(oX()),e.history!==!1&&i.push(lY()),e.foldGutter!==!1&&i.push(MK()),e.drawSelection!==!1&&i.push(XG()),e.dropCursor!==!1&&i.push(eX()),e.allowMultipleSelections!==!1&&i.push(Ee.allowMultipleSelections.of(!0)),e.indentOnInput!==!1&&i.push(xK()),e.syntaxHighlighting!==!1&&i.push(RL(QK,{fallback:!0})),e.bracketMatching!==!1&&i.push(qK()),e.closeBrackets!==!1&&i.push(xZ()),e.autocompletion!==!1&&i.push(IZ()),e.rectangularSelection!==!1&&i.push(OX()),t!==!1&&i.push(bX()),e.highlightActiveLine!==!1&&i.push(fX()),e.highlightSelectionMatches!==!1&&i.push(mJ()),e.tabSize&&typeof e.tabSize=="number"&&i.push(Pf.of(" ".repeat(e.tabSize))),i.concat([kf.of(r.flat())]).filter(Boolean)};const GZ="#e5c07b",RC="#e06c75",XZ="#56b6c2",KZ="#ffffff",Mp="#abb2bf",FO="#7d8799",YZ="#61afef",JZ="#98c379",IC="#d19a66",ZZ="#c678dd",eee="#21252b",NC="#2c313a",DC="#282c34",Z0="#353a42",tee="#3E4451",MC="#528bff",nee=J.theme({"&":{color:Mp,backgroundColor:DC},".cm-content":{caretColor:MC},".cm-cursor, .cm-dropCursor":{borderLeftColor:MC},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:tee},".cm-panels":{backgroundColor:eee,color:Mp},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:DC,color:FO,border:"none"},".cm-activeLineGutter":{backgroundColor:NC},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:Z0},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Z0,borderBottomColor:Z0},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:NC,color:Mp}}},{dark:!0}),ree=Rf.define([{tag:V.keyword,color:ZZ},{tag:[V.name,V.deleted,V.character,V.propertyName,V.macroName],color:RC},{tag:[V.function(V.variableName),V.labelName],color:YZ},{tag:[V.color,V.constant(V.name),V.standard(V.name)],color:IC},{tag:[V.definition(V.name),V.separator],color:Mp},{tag:[V.typeName,V.className,V.number,V.changed,V.annotation,V.modifier,V.self,V.namespace],color:GZ},{tag:[V.operator,V.operatorKeyword,V.url,V.escape,V.regexp,V.link,V.special(V.string)],color:XZ},{tag:[V.meta,V.comment],color:FO},{tag:V.strong,fontWeight:"bold"},{tag:V.emphasis,fontStyle:"italic"},{tag:V.strikethrough,textDecoration:"line-through"},{tag:V.link,color:FO,textDecoration:"underline"},{tag:V.heading,fontWeight:"bold",color:RC},{tag:[V.atom,V.bool,V.special(V.variableName)],color:IC},{tag:[V.processingInstruction,V.string,V.inserted],color:JZ},{tag:V.invalid,color:KZ}]),iee=[nee,RL(ree)];var see=J.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),oee=function(e){e===void 0&&(e={});var{indentWithTab:t=!0,editable:r=!0,readOnly:i=!1,theme:s="light",placeholder:o="",basicSetup:a=!0}=e,l=[];switch(t&&l.unshift(kf.of([cJ])),a&&(typeof a=="boolean"?l.unshift(AC()):l.unshift(AC(a))),o&&l.unshift(gX(o)),s){case"light":l.push(see);break;case"dark":l.push(iee);break;case"none":break;default:l.push(s);break}return r===!1&&l.push(J.editable.of(!1)),i&&l.push(Ee.readOnly.of(!0)),[...l]},aee=n=>({line:n.state.doc.lineAt(n.state.selection.main.from),lineCount:n.state.doc.lines,lineBreak:n.state.lineBreak,length:n.state.doc.length,readOnly:n.state.readOnly,tabSize:n.state.tabSize,selection:n.state.selection,selectionAsSingle:n.state.selection.asSingle().main,ranges:n.state.selection.ranges,selectionCode:n.state.sliceDoc(n.state.selection.main.from,n.state.selection.main.to),selections:n.state.selection.ranges.map(e=>n.state.sliceDoc(e.from,e.to)),selectedText:n.state.selection.ranges.some(e=>!e.empty)}),LC=Oi.define(),lee=[];function cee(n){var{value:e,selection:t,onChange:r,onStatistics:i,onCreateEditor:s,onUpdate:o,extensions:a=lee,autoFocus:l,theme:c="light",height:u=null,minHeight:h=null,maxHeight:d=null,width:p=null,minWidth:g=null,maxWidth:y=null,placeholder:w="",editable:v=!0,readOnly:O=!1,indentWithTab:S=!0,basicSetup:E=!0,root:R,initialState:M}=n,[b,T]=k.useState(),[_,C]=k.useState(),[D,N]=k.useState(),I=J.theme({"&":{height:u,minHeight:h,maxHeight:d,width:p,minWidth:g,maxWidth:y},"& .cm-scroller":{height:"100% !important"}}),j=J.updateListener.of(Y=>{if(Y.docChanged&&typeof r=="function"&&!Y.transactions.some(G=>G.annotation(LC))){var Q=Y.state.doc,$=Q.toString();r($,Y)}i&&i(aee(Y))}),ee=oee({theme:c,editable:v,readOnly:O,placeholder:w,indentWithTab:S,basicSetup:E}),te=[j,I,...ee];return o&&typeof o=="function"&&te.push(J.updateListener.of(o)),te=te.concat(a),k.useLayoutEffect(()=>{if(b&&!D){var Y={doc:e,selection:t,extensions:te},Q=M?Ee.fromJSON(M.json,Y,M.fields):Ee.create(Y);if(N(Q),!_){var $=new J({state:Q,parent:b,root:R});C($),s&&s($,Q)}}return()=>{_&&(N(void 0),C(void 0))}},[b,D]),k.useEffect(()=>{n.container&&T(n.container)},[n.container]),k.useEffect(()=>()=>{_&&(_.destroy(),C(void 0))},[_]),k.useEffect(()=>{l&&_&&_.focus()},[l,_]),k.useEffect(()=>{_&&_.dispatch({effects:ge.reconfigure.of(te)})},[c,a,u,h,d,p,g,y,w,v,O,S,E,r,o]),k.useEffect(()=>{if(e!==void 0){var Y=_?_.state.doc.toString():"";_&&e!==Y&&_.dispatch({changes:{from:0,to:Y.length,insert:e||""},annotations:[LC.of(!0)]})}},[e,_]),{state:D,setState:N,view:_,setView:C,container:b,setContainer:T}}var uee=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],QV=k.forwardRef((n,e)=>{var{className:t,value:r="",selection:i,extensions:s=[],onChange:o,onStatistics:a,onCreateEditor:l,onUpdate:c,autoFocus:u,theme:h="light",height:d,minHeight:p,maxHeight:g,width:y,minWidth:w,maxWidth:v,basicSetup:O,placeholder:S,indentWithTab:E,editable:R,readOnly:M,root:b,initialState:T}=n,_=U7(n,uee),C=k.useRef(null),{state:D,view:N,container:I,setContainer:j}=cee({root:b,value:r,autoFocus:u,theme:h,height:d,minHeight:p,maxHeight:g,width:y,minWidth:w,maxWidth:v,basicSetup:O,placeholder:S,indentWithTab:E,editable:R,readOnly:M,selection:i,onChange:o,onStatistics:a,onCreateEditor:l,onUpdate:c,extensions:s,initialState:T});k.useImperativeHandle(e,()=>({editor:C.current,state:D,view:N}),[C,I,D,N]);var ee=k.useCallback(Y=>{C.current=Y,j(Y)},[j]);if(typeof r!="string")throw new Error("value must be typeof string but got "+typeof r);var te=typeof h=="string"?"cm-theme-"+h:"cm-theme";return A.jsx("div",Bw({ref:ee,className:""+te+(t?" "+t:"")},_))});QV.displayName="CodeMirror";var VC={};class lg{constructor(e,t,r,i,s,o,a,l,c,u=0,h){this.p=e,this.stack=t,this.state=r,this.reducePos=i,this.pos=s,this.score=o,this.buffer=a,this.bufferBase=l,this.curContext=c,this.lookAhead=u,this.parent=h}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,r=0){let i=e.parser.context;return new lg(e,[],t,r,r,0,[],0,i?new FC(i,i.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let r=e>>19,i=e&65535,{parser:s}=this.p,o=this.reducePos<this.pos-25;o&&this.setLookAhead(this.pos);let a=s.dynamicPrecedence(i);if(a&&(this.score+=a),r==0){this.pushState(s.getGoto(this.state,i,!0),this.reducePos),i<s.minRepeatTerm&&this.storeNode(i,this.reducePos,this.reducePos,o?8:4,!0),this.reduceContext(i,this.reducePos);return}let l=this.stack.length-(r-1)*3-(e&262144?6:0),c=l?this.stack[l-2]:this.p.ranges[0].from,u=this.reducePos-c;u>=2e3&&!(!((t=this.p.parser.nodeSet.types[i])===null||t===void 0)&&t.isAnonymous)&&(c==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=u):this.p.lastBigReductionSize<u&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=c,this.p.lastBigReductionSize=u));let h=l?this.stack[l-1]:0,d=this.bufferBase+this.buffer.length-h;if(i<s.minRepeatTerm||e&131072){let p=s.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(i,c,p,d+4,!0)}if(e&262144)this.state=this.stack[l];else{let p=this.stack[l-3];this.state=s.getGoto(p,i,!0)}for(;this.stack.length>l;)this.stack.pop();this.reduceContext(i,c)}storeNode(e,t,r,i=4,s=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let o=this,a=this.buffer.length;if(a==0&&o.parent&&(a=o.bufferBase-o.parent.bufferBase,o=o.parent),a>0&&o.buffer[a-4]==0&&o.buffer[a-1]>-1){if(t==r)return;if(o.buffer[a-2]>=t){o.buffer[a-2]=r;return}}}if(!s||this.pos==r)this.buffer.push(e,t,r,i);else{let o=this.buffer.length;if(o>0&&this.buffer[o-4]!=0){let a=!1;for(let l=o;l>0&&this.buffer[l-2]>r;l-=4)if(this.buffer[l-1]>=0){a=!0;break}if(a)for(;o>0&&this.buffer[o-2]>r;)this.buffer[o]=this.buffer[o-4],this.buffer[o+1]=this.buffer[o-3],this.buffer[o+2]=this.buffer[o-2],this.buffer[o+3]=this.buffer[o-1],o-=4,i>4&&(i-=4)}this.buffer[o]=e,this.buffer[o+1]=t,this.buffer[o+2]=r,this.buffer[o+3]=i}}shift(e,t,r,i){if(e&131072)this.pushState(e&65535,this.pos);else if(e&262144)this.pos=i,this.shiftContext(t,r),t<=this.p.parser.maxNode&&this.buffer.push(t,r,i,4);else{let s=e,{parser:o}=this.p;(i>this.pos||t<=o.maxNode)&&(this.pos=i,o.stateFlag(s,1)||(this.reducePos=i)),this.pushState(s,r),this.shiftContext(t,r),t<=o.maxNode&&this.buffer.push(t,r,i,4)}}apply(e,t,r,i){e&65536?this.reduce(e):this.shift(e,t,r,i)}useNode(e,t){let r=this.p.reused.length-1;(r<0||this.p.reused[r]!=e)&&(this.p.reused.push(e),r++);let i=this.pos;this.reducePos=this.pos=i+e.length,this.pushState(t,i),this.buffer.push(r,i,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let r=e.buffer.slice(t),i=e.bufferBase+t;for(;e&&i==e.bufferBase;)e=e.parent;return new lg(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,r,i,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let r=e<=this.p.parser.maxNode;r&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,r?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new hee(this);;){let r=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(r==0)return!1;if(!(r&65536))return!0;t.reduce(r)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let i=[];for(let s=0,o;s<t.length;s+=2)(o=t[s+1])!=this.state&&this.p.parser.hasAction(o,e)&&i.push(t[s],o);if(this.stack.length<120)for(let s=0;i.length<8&&s<t.length;s+=2){let o=t[s+1];i.some((a,l)=>l&1&&a==o)||i.push(t[s],o)}t=i}let r=[];for(let i=0;i<t.length&&r.length<4;i+=2){let s=t[i+1];if(s==this.state)continue;let o=this.split();o.pushState(s,this.pos),o.storeNode(0,o.pos,o.pos,4,!0),o.shiftContext(t[i],this.pos),o.reducePos=this.pos,o.score-=200,r.push(o)}return r}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if(!(t&65536))return!1;if(!e.validAction(this.state,t)){let r=t>>19,i=t&65535,s=this.stack.length-r*3;if(s<0||e.getGoto(this.stack[s],i,!1)<0){let o=this.findForcedReduction();if(o==null)return!1;t=o}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],r=(i,s)=>{if(!t.includes(i))return t.push(i),e.allActions(i,o=>{if(!(o&393216))if(o&65536){let a=(o>>19)-s;if(a>1){let l=o&65535,c=this.stack.length-a*3;if(c>=0&&e.getGoto(this.stack[c],l,!1)>=0)return a<<19|65536|l}}else{let a=r(o,s+1);if(a!=null)return a}})};return r(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new FC(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class FC{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class hee{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,r=e>>19;r==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(r-1)*3;let i=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=i}}class cg{constructor(e,t,r){this.stack=e,this.pos=t,this.index=r,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new cg(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new cg(this.stack,this.pos,this.index)}}function Jd(n,e=Uint16Array){if(typeof n!="string")return n;let t=null;for(let r=0,i=0;r<n.length;){let s=0;for(;;){let o=n.charCodeAt(r++),a=!1;if(o==126){s=65535;break}o>=92&&o--,o>=34&&o--;let l=o-32;if(l>=46&&(l-=46,a=!0),s+=l,a)break;s*=46}t?t[i++]=s:t=new e(s)}return t}class Lp{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const QC=new Lp;class fee{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=QC,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let r=this.range,i=this.rangeIndex,s=this.pos+e;for(;s<r.from;){if(!i)return null;let o=this.ranges[--i];s-=r.from-o.to,r=o}for(;t<0?s>r.to:s>=r.to;){if(i==this.ranges.length-1)return null;let o=this.ranges[++i];s+=o.from-r.to,r=o}return s}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,r,i;if(t>=0&&t<this.chunk.length)r=this.pos+e,i=this.chunk.charCodeAt(t);else{let s=this.resolveOffset(e,1);if(s==null)return-1;if(r=s,r>=this.chunk2Pos&&r<this.chunk2Pos+this.chunk2.length)i=this.chunk2.charCodeAt(r-this.chunk2Pos);else{let o=this.rangeIndex,a=this.range;for(;a.to<=r;)a=this.ranges[++o];this.chunk2=this.input.chunk(this.chunk2Pos=r),r+this.chunk2.length>a.to&&(this.chunk2=this.chunk2.slice(0,a.to-r)),i=this.chunk2.charCodeAt(0)}}return r>=this.token.lookAhead&&(this.token.lookAhead=r+1),i}acceptToken(e,t=0){let r=t?this.resolveOffset(t,-1):this.pos;if(r==null||r<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=r}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=QC,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let r="";for(let i of this.ranges){if(i.from>=t)break;i.to>e&&(r+=this.input.read(Math.max(i.from,e),Math.min(i.to,t)))}return r}}class Bl{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:r}=t.p;dee(this.data,e,t,this.id,r.data,r.tokenPrecTable)}}Bl.prototype.contextual=Bl.prototype.fallback=Bl.prototype.extend=!1;Bl.prototype.fallback=Bl.prototype.extend=!1;class wy{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function dee(n,e,t,r,i,s){let o=0,a=1<<r,{dialect:l}=t.p.parser;e:for(;a&n[o];){let c=n[o+1];for(let p=o+3;p<c;p+=2)if((n[p+1]&a)>0){let g=n[p];if(l.allows(g)&&(e.token.value==-1||e.token.value==g||pee(g,e.token.value,i,s))){e.acceptToken(g);break}}let u=e.next,h=0,d=n[o+2];if(e.next<0&&d>h&&n[c+d*3-3]==65535){o=n[c+d*3-1];continue e}for(;h<d;){let p=h+d>>1,g=c+p+(p<<1),y=n[g],w=n[g+1]||65536;if(u<y)d=p;else if(u>=w)h=p+1;else{o=n[g+2],e.advance();continue e}}break}}function $C(n,e,t){for(let r=e,i;(i=n[r])!=65535;r++)if(i==t)return r-e;return-1}function pee(n,e,t,r){let i=$C(t,r,e);return i<0||$C(t,r,n)<i}const $n=typeof process<"u"&&VC&&/\bparse\b/.test(VC.LOG);let ev=null;function jC(n,e,t){let r=n.cursor(St.IncludeAnonymous);for(r.moveTo(e);;)if(!(t<0?r.childBefore(e):r.childAfter(e)))for(;;){if((t<0?r.to<e:r.from>e)&&!r.type.isError)return t<0?Math.max(0,Math.min(r.to-1,e-25)):Math.min(n.length,Math.max(r.from+1,e+25));if(t<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return t<0?0:n.length}}class mee{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?jC(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?jC(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let r=this.trees[t],i=this.index[t];if(i==r.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let s=r.children[i],o=this.start[t]+r.positions[i];if(o>e)return this.nextStart=o,null;if(s instanceof yt){if(o==e){if(o<this.safeFrom)return null;let a=o+s.length;if(a<=this.safeTo){let l=s.prop(Se.lookAhead);if(!l||a+l<this.fragment.to)return s}}this.index[t]++,o+s.length>=Math.max(this.safeFrom,e)&&(this.trees.push(s),this.start.push(o),this.index.push(0))}else this.index[t]++,this.nextStart=o+s.length}}}class gee{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(r=>new Lp)}getActions(e){let t=0,r=null,{parser:i}=e.p,{tokenizers:s}=i,o=i.stateSlot(e.state,3),a=e.curContext?e.curContext.hash:0,l=0;for(let c=0;c<s.length;c++){if(!(1<<c&o))continue;let u=s[c],h=this.tokens[c];if(!(r&&!u.fallback)&&((u.contextual||h.start!=e.pos||h.mask!=o||h.context!=a)&&(this.updateCachedToken(h,u,e),h.mask=o,h.context=a),h.lookAhead>h.end+25&&(l=Math.max(h.lookAhead,l)),h.value!=0)){let d=t;if(h.extended>-1&&(t=this.addActions(e,h.extended,h.end,t)),t=this.addActions(e,h.value,h.end,t),!u.extend&&(r=h,t>d))break}}for(;this.actions.length>t;)this.actions.pop();return l&&e.setLookAhead(l),!r&&e.pos==this.stream.end&&(r=new Lp,r.value=e.p.parser.eofTerm,r.start=r.end=e.pos,t=this.addActions(e,r.value,r.end,t)),this.mainToken=r,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new Lp,{pos:r,p:i}=e;return t.start=r,t.end=Math.min(r+1,i.stream.end),t.value=r==i.stream.end?i.parser.eofTerm:0,t}updateCachedToken(e,t,r){let i=this.stream.clipPos(r.pos);if(t.token(this.stream.reset(i,e),r),e.value>-1){let{parser:s}=r.p;for(let o=0;o<s.specialized.length;o++)if(s.specialized[o]==e.value){let a=s.specializers[o](this.stream.read(e.start,e.end),r);if(a>=0&&r.p.parser.dialect.allows(a>>1)){a&1?e.extended=a>>1:e.value=a>>1;break}}}else e.value=0,e.end=this.stream.clipPos(i+1)}putAction(e,t,r,i){for(let s=0;s<i;s+=3)if(this.actions[s]==e)return i;return this.actions[i++]=e,this.actions[i++]=t,this.actions[i++]=r,i}addActions(e,t,r,i){let{state:s}=e,{parser:o}=e.p,{data:a}=o;for(let l=0;l<2;l++)for(let c=o.stateSlot(s,l?2:1);;c+=3){if(a[c]==65535)if(a[c+1]==1)c=Fi(a,c+2);else{i==0&&a[c+1]==2&&(i=this.putAction(Fi(a,c+2),t,r,i));break}a[c]==t&&(i=this.putAction(Fi(a,c+1),t,r,i))}return i}}class yee{constructor(e,t,r,i){this.parser=e,this.input=t,this.ranges=i,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new fee(t,i),this.tokens=new gee(e,this.stream),this.topTerm=e.top[1];let{from:s}=i[0];this.stacks=[lg.start(this,e.top[0],s)],this.fragments=r.length&&this.stream.end-s>e.bufferLength*4?new mee(r,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,r=this.stacks=[],i,s;if(this.bigReductionCount>300&&e.length==1){let[o]=e;for(;o.forceReduce()&&o.stack.length&&o.stack[o.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let o=0;o<e.length;o++){let a=e[o];for(;;){if(this.tokens.mainToken=null,a.pos>t)r.push(a);else{if(this.advanceStack(a,r,e))continue;{i||(i=[],s=[]),i.push(a);let l=this.tokens.getMainToken(a);s.push(l.value,l.end)}}break}}if(!r.length){let o=i&&Oee(i);if(o)return $n&&console.log("Finish with "+this.stackID(o)),this.stackToTree(o);if(this.parser.strict)throw $n&&i&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&i){let o=this.stoppedAt!=null&&i[0].pos>this.stoppedAt?i[0]:this.runRecovery(i,s,r);if(o)return $n&&console.log("Force-finish "+this.stackID(o)),this.stackToTree(o.forceAll())}if(this.recovering){let o=this.recovering==1?1:this.recovering*3;if(r.length>o)for(r.sort((a,l)=>l.score-a.score);r.length>o;)r.pop();r.some(a=>a.reducePos>t)&&this.recovering--}else if(r.length>1){e:for(let o=0;o<r.length-1;o++){let a=r[o];for(let l=o+1;l<r.length;l++){let c=r[l];if(a.sameState(c)||a.buffer.length>500&&c.buffer.length>500)if((a.score-c.score||a.buffer.length-c.buffer.length)>0)r.splice(l--,1);else{r.splice(o--,1);continue e}}}r.length>12&&r.splice(12,r.length-12)}this.minStackPos=r[0].pos;for(let o=1;o<r.length;o++)r[o].pos<this.minStackPos&&(this.minStackPos=r[o].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,r){let i=e.pos,{parser:s}=this,o=$n?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&i>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let c=e.curContext&&e.curContext.tracker.strict,u=c?e.curContext.hash:0;for(let h=this.fragments.nodeAt(i);h;){let d=this.parser.nodeSet.types[h.type.id]==h.type?s.getGoto(e.state,h.type.id):-1;if(d>-1&&h.length&&(!c||(h.prop(Se.contextHash)||0)==u))return e.useNode(h,d),$n&&console.log(o+this.stackID(e)+` (via reuse of ${s.getName(h.type.id)})`),!0;if(!(h instanceof yt)||h.children.length==0||h.positions[0]>0)break;let p=h.children[0];if(p instanceof yt&&h.positions[0]==0)h=p;else break}}let a=s.stateSlot(e.state,4);if(a>0)return e.reduce(a),$n&&console.log(o+this.stackID(e)+` (via always-reduce ${s.getName(a&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let l=this.tokens.getActions(e);for(let c=0;c<l.length;){let u=l[c++],h=l[c++],d=l[c++],p=c==l.length||!r,g=p?e:e.split(),y=this.tokens.mainToken;if(g.apply(u,h,y?y.start:g.pos,d),$n&&console.log(o+this.stackID(g)+` (via ${u&65536?`reduce of ${s.getName(u&65535)}`:"shift"} for ${s.getName(h)} @ ${i}${g==e?"":", split"})`),p)return!0;g.pos>i?t.push(g):r.push(g)}return!1}advanceFully(e,t){let r=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>r)return zC(e,t),!0}}runRecovery(e,t,r){let i=null,s=!1;for(let o=0;o<e.length;o++){let a=e[o],l=t[o<<1],c=t[(o<<1)+1],u=$n?this.stackID(a)+" -> ":"";if(a.deadEnd&&(s||(s=!0,a.restart(),$n&&console.log(u+this.stackID(a)+" (restarted)"),this.advanceFully(a,r))))continue;let h=a.split(),d=u;for(let p=0;h.forceReduce()&&p<10&&($n&&console.log(d+this.stackID(h)+" (via force-reduce)"),!this.advanceFully(h,r));p++)$n&&(d=this.stackID(h)+" -> ");for(let p of a.recoverByInsert(l))$n&&console.log(u+this.stackID(p)+" (via recover-insert)"),this.advanceFully(p,r);this.stream.end>a.pos?(c==a.pos&&(c++,l=0),a.recoverByDelete(l,c),$n&&console.log(u+this.stackID(a)+` (via recover-delete ${this.parser.getName(l)})`),zC(a,r)):(!i||i.score<a.score)&&(i=a)}return i}stackToTree(e){return e.close(),yt.build({buffer:cg.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(ev||(ev=new WeakMap)).get(e);return t||ev.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function zC(n,e){for(let t=0;t<e.length;t++){let r=e[t];if(r.pos==n.pos&&r.sameState(n)){e[t].score<n.score&&(e[t]=n);return}}e.push(n)}class vee{constructor(e,t,r){this.source=e,this.flags=t,this.disabled=r}allows(e){return!this.disabled||this.disabled[e]==0}}const tv=n=>n;class wee{constructor(e){this.start=e.start,this.shift=e.shift||tv,this.reduce=e.reduce||tv,this.reuse=e.reuse||tv,this.hash=e.hash||(()=>0),this.strict=e.strict!==!1}}class ug extends pL{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let a=0;a<e.repeatNodeCount;a++)t.push("");let r=Object.keys(e.topRules).map(a=>e.topRules[a][1]),i=[];for(let a=0;a<t.length;a++)i.push([]);function s(a,l,c){i[a].push([l,l.deserialize(String(c))])}if(e.nodeProps)for(let a of e.nodeProps){let l=a[0];typeof l=="string"&&(l=Se[l]);for(let c=1;c<a.length;){let u=a[c++];if(u>=0)s(u,l,a[c++]);else{let h=a[c+-u];for(let d=-u;d>0;d--)s(a[c++],l,h);c++}}}this.nodeSet=new dS(t.map((a,l)=>Ln.define({name:l>=this.minRepeatTerm?void 0:a,id:l,props:i[l],top:r.indexOf(l)>-1,error:l==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(l)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=uL;let o=Jd(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let a=0;a<this.specializerSpecs.length;a++)this.specialized[a]=this.specializerSpecs[a].term;this.specializers=this.specializerSpecs.map(BC),this.states=Jd(e.states,Uint32Array),this.data=Jd(e.stateData),this.goto=Jd(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(a=>typeof a=="number"?new Bl(o,a):a),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,r){let i=new yee(this,e,t,r);for(let s of this.wrappers)i=s(i,e,t,r);return i}getGoto(e,t,r=!1){let i=this.goto;if(t>=i[0])return-1;for(let s=i[t+1];;){let o=i[s++],a=o&1,l=i[s++];if(a&&r)return l;for(let c=s+(o>>1);s<c;s++)if(i[s]==e)return l;if(a)return-1}}hasAction(e,t){let r=this.data;for(let i=0;i<2;i++)for(let s=this.stateSlot(e,i?2:1),o;;s+=3){if((o=r[s])==65535)if(r[s+1]==1)o=r[s=Fi(r,s+2)];else{if(r[s+1]==2)return Fi(r,s+2);break}if(o==t||o==0)return Fi(r,s+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,r=>r==t?!0:null)}allActions(e,t){let r=this.stateSlot(e,4),i=r?t(r):void 0;for(let s=this.stateSlot(e,1);i==null;s+=3){if(this.data[s]==65535)if(this.data[s+1]==1)s=Fi(this.data,s+2);else break;i=t(Fi(this.data,s+1))}return i}nextStates(e){let t=[];for(let r=this.stateSlot(e,1);;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=Fi(this.data,r+2);else break;if(!(this.data[r+2]&1)){let i=this.data[r+1];t.some((s,o)=>o&1&&s==i)||t.push(this.data[r],i)}}return t}configure(e){let t=Object.assign(Object.create(ug.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let r=this.topRules[e.top];if(!r)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=r}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(r=>{let i=e.tokenizers.find(s=>s.from==r);return i?i.to:r})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((r,i)=>{let s=e.specializers.find(a=>a.from==r.external);if(!s)return r;let o=Object.assign(Object.assign({},r),{external:s.to});return t.specializers[i]=BC(o),o})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),r=t.map(()=>!1);if(e)for(let s of e.split(" ")){let o=t.indexOf(s);o>=0&&(r[o]=!0)}let i=null;for(let s=0;s<t.length;s++)if(!r[s])for(let o=this.dialects[t[s]],a;(a=this.data[o++])!=65535;)(i||(i=new Uint8Array(this.maxTerm+1)))[a]=1;return new vee(e,r,i)}static deserialize(e){return new ug(e)}}function Fi(n,e){return n[e]|n[e+1]<<16}function Oee(n){let e=null;for(let t of n){let r=t.p.stoppedAt;(t.pos==t.p.stream.end||r!=null&&t.pos>r)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function BC(n){if(n.external){let e=n.extend?1:0;return(t,r)=>n.external(t,r)<<1|e}return n.get}const xee=1,$V=194,jV=195,See=196,UC=197,bee=198,Tee=199,_ee=200,Eee=2,zV=3,WC=201,kee=24,Cee=25,Pee=49,Aee=50,Ree=55,Iee=56,Nee=57,Dee=59,Mee=60,Lee=61,Vee=62,Fee=63,Qee=65,$ee=238,jee=71,zee=241,Bee=242,Uee=243,Wee=244,qee=245,Hee=246,Gee=247,Xee=248,BV=72,Kee=249,Yee=250,Jee=251,Zee=252,ete=253,tte=254,nte=255,rte=256,ite=73,ste=77,ote=263,ate=112,lte=130,cte=151,ute=152,hte=155,Fa=10,Jh=13,DS=32,Oy=9,MS=35,fte=40,dte=46,QO=123,qC=125,UV=39,WV=34,HC=92,pte=111,mte=120,gte=78,yte=117,vte=85,wte=new Set([Cee,Pee,Aee,ote,Qee,lte,Iee,Nee,$ee,Vee,Fee,BV,ite,ste,Mee,Lee,cte,ute,hte,ate]);function nv(n){return n==Fa||n==Jh}function rv(n){return n>=48&&n<=57||n>=65&&n<=70||n>=97&&n<=102}const Ote=new wy((n,e)=>{let t;if(n.next<0)n.acceptToken(Tee);else if(e.context.flags&Vp)nv(n.next)&&n.acceptToken(bee,1);else if(((t=n.peek(-1))<0||nv(t))&&e.canShift(UC)){let r=0;for(;n.next==DS||n.next==Oy;)n.advance(),r++;(n.next==Fa||n.next==Jh||n.next==MS)&&n.acceptToken(UC,-r)}else nv(n.next)&&n.acceptToken(See,1)},{contextual:!0}),xte=new wy((n,e)=>{let t=e.context;if(t.flags)return;let r=n.peek(-1);if(r==Fa||r==Jh){let i=0,s=0;for(;;){if(n.next==DS)i++;else if(n.next==Oy)i+=8-i%8;else break;n.advance(),s++}i!=t.indent&&n.next!=Fa&&n.next!=Jh&&n.next!=MS&&(i<t.indent?n.acceptToken(jV,-s):n.acceptToken($V))}}),Vp=1,qV=2,Ii=4,Ni=8,Di=16,Mi=32;function Fp(n,e,t){this.parent=n,this.indent=e,this.flags=t,this.hash=(n?n.hash+n.hash<<8:0)+e+(e<<4)+t+(t<<6)}const Ste=new Fp(null,0,0);function bte(n){let e=0;for(let t=0;t<n.length;t++)e+=n.charCodeAt(t)==Oy?8-e%8:1;return e}const GC=new Map([[zee,0],[Bee,Ii],[Uee,Ni],[Wee,Ni|Ii],[qee,Di],[Hee,Di|Ii],[Gee,Di|Ni],[Xee,Di|Ni|Ii],[Kee,Mi],[Yee,Mi|Ii],[Jee,Mi|Ni],[Zee,Mi|Ni|Ii],[ete,Mi|Di],[tte,Mi|Di|Ii],[nte,Mi|Di|Ni],[rte,Mi|Di|Ni|Ii]].map(([n,e])=>[n,e|qV])),Tte=new wee({start:Ste,reduce(n,e,t,r){return n.flags&Vp&&wte.has(e)||(e==jee||e==BV)&&n.flags&qV?n.parent:n},shift(n,e,t,r){return e==$V?new Fp(n,bte(r.read(r.pos,t.pos)),0):e==jV?n.parent:e==kee||e==Ree||e==Dee||e==zV?new Fp(n,0,Vp):GC.has(e)?new Fp(n,0,GC.get(e)|n.flags&Vp):n},hash(n){return n.hash}}),_te=new wy(n=>{for(let e=0;e<5;e++){if(n.next!="print".charCodeAt(e))return;n.advance()}if(!/\w/.test(String.fromCharCode(n.next)))for(let e=0;;e++){let t=n.peek(e);if(!(t==DS||t==Oy)){t!=fte&&t!=dte&&t!=Fa&&t!=Jh&&t!=MS&&n.acceptToken(xee);return}}}),Ete=new wy((n,e)=>{let{flags:t}=e.context,r=t&Ii?WV:UV,i=(t&Ni)>0,s=!(t&Di),o=(t&Mi)>0,a=n.pos;for(;!(n.next<0);)if(o&&n.next==QO)if(n.peek(1)==QO)n.advance(2);else{if(n.pos==a){n.acceptToken(zV,1);return}break}else if(s&&n.next==HC){if(n.pos==a){n.advance();let l=n.next;l>=0&&(n.advance(),kte(n,l)),n.acceptToken(Eee);return}break}else if(n.next==HC&&!s&&n.peek(1)>-1)n.advance(2);else if(n.next==r&&(!i||n.peek(1)==r&&n.peek(2)==r)){if(n.pos==a){n.acceptToken(WC,i?3:1);return}break}else if(n.next==Fa){if(i)n.advance();else if(n.pos==a){n.acceptToken(WC);return}break}else n.advance();n.pos>a&&n.acceptToken(_ee)});function kte(n,e){if(e==pte)for(let t=0;t<2&&n.next>=48&&n.next<=55;t++)n.advance();else if(e==mte)for(let t=0;t<2&&rv(n.next);t++)n.advance();else if(e==yte)for(let t=0;t<4&&rv(n.next);t++)n.advance();else if(e==vte)for(let t=0;t<8&&rv(n.next);t++)n.advance();else if(e==gte&&n.next==QO){for(n.advance();n.next>=0&&n.next!=qC&&n.next!=UV&&n.next!=WV&&n.next!=Fa;)n.advance();n.next==qC&&n.advance()}}const Cte=mL({'async "*" "**" FormatConversion FormatSpec':V.modifier,"for while if elif else try except finally return raise break continue with pass assert await yield match case":V.controlKeyword,"in not and or is del":V.operatorKeyword,"from def class global nonlocal lambda":V.definitionKeyword,import:V.moduleKeyword,"with as print":V.keyword,Boolean:V.bool,None:V.null,VariableName:V.variableName,"CallExpression/VariableName":V.function(V.variableName),"FunctionDefinition/VariableName":V.function(V.definition(V.variableName)),"ClassDefinition/VariableName":V.definition(V.className),PropertyName:V.propertyName,"CallExpression/MemberExpression/PropertyName":V.function(V.propertyName),Comment:V.lineComment,Number:V.number,String:V.string,FormatString:V.special(V.string),Escape:V.escape,UpdateOp:V.updateOperator,"ArithOp!":V.arithmeticOperator,BitOp:V.bitwiseOperator,CompareOp:V.compareOperator,AssignOp:V.definitionOperator,Ellipsis:V.punctuation,At:V.meta,"( )":V.paren,"[ ]":V.squareBracket,"{ }":V.brace,".":V.derefOperator,", ;":V.separator}),Pte={__proto__:null,await:44,or:54,and:56,in:60,not:62,is:64,if:70,else:72,lambda:76,yield:94,from:96,async:102,for:104,None:162,True:164,False:164,del:178,pass:182,break:186,continue:190,return:194,raise:202,import:206,as:208,global:212,nonlocal:214,assert:218,type:223,elif:236,while:240,try:246,except:248,finally:250,with:254,def:258,class:268,match:279,case:285},Ate=ug.deserialize({version:14,states:"##jO`QeOOP$}OSOOO&WQtO'#HUOOQS'#Co'#CoOOQS'#Cp'#CpO'vQdO'#CnO*UQtO'#HTOOQS'#HU'#HUOOQS'#DU'#DUOOQS'#HT'#HTO*rQdO'#D_O+VQdO'#DfO+gQdO'#DjO+zOWO'#DuO,VOWO'#DvO.[QtO'#GuOOQS'#Gu'#GuO'vQdO'#GtO0ZQtO'#GtOOQS'#Eb'#EbO0rQdO'#EcOOQS'#Gs'#GsO0|QdO'#GrOOQV'#Gr'#GrO1XQdO'#FYOOQS'#G^'#G^O1^QdO'#FXOOQV'#IS'#ISOOQV'#Gq'#GqOOQV'#Fq'#FqQ`QeOOO'vQdO'#CqO1lQdO'#C}O1sQdO'#DRO2RQdO'#HYO2cQtO'#EVO'vQdO'#EWOOQS'#EY'#EYOOQS'#E['#E[OOQS'#E^'#E^O2wQdO'#E`O3_QdO'#EdO3rQdO'#EfO3zQtO'#EfO1XQdO'#EiO0rQdO'#ElO1XQdO'#EnO0rQdO'#EtO0rQdO'#EwO4VQdO'#EyO4^QdO'#FOO4iQdO'#EzO0rQdO'#FOO1XQdO'#FQO1XQdO'#FVO4nQdO'#F[P4uOdO'#GpPOOO)CBd)CBdOOQS'#Ce'#CeOOQS'#Cf'#CfOOQS'#Cg'#CgOOQS'#Ch'#ChOOQS'#Ci'#CiOOQS'#Cj'#CjOOQS'#Cl'#ClO'vQdO,59OO'vQdO,59OO'vQdO,59OO'vQdO,59OO'vQdO,59OO'vQdO,59OO5TQdO'#DoOOQS,5:Y,5:YO5hQdO'#HdOOQS,5:],5:]O5uQ!fO,5:]O5zQtO,59YO1lQdO,59bO1lQdO,59bO1lQdO,59bO8jQdO,59bO8oQdO,59bO8vQdO,59jO8}QdO'#HTO:TQdO'#HSOOQS'#HS'#HSOOQS'#D['#D[O:lQdO,59aO'vQdO,59aO:zQdO,59aOOQS,59y,59yO;PQdO,5:RO'vQdO,5:ROOQS,5:Q,5:QO;_QdO,5:QO;dQdO,5:XO'vQdO,5:XO'vQdO,5:VOOQS,5:U,5:UO;uQdO,5:UO;zQdO,5:WOOOW'#Fy'#FyO<POWO,5:aOOQS,5:a,5:aO<[QdO'#HwOOOW'#Dw'#DwOOOW'#Fz'#FzO<lOWO,5:bOOQS,5:b,5:bOOQS'#F}'#F}O<zQtO,5:iO?lQtO,5=`O@VQ#xO,5=`O@vQtO,5=`OOQS,5:},5:}OA_QeO'#GWOBqQdO,5;^OOQV,5=^,5=^OB|QtO'#IPOCkQdO,5;tOOQS-E:[-E:[OOQV,5;s,5;sO4dQdO'#FQOOQV-E9o-E9oOCsQtO,59]OEzQtO,59iOFeQdO'#HVOFpQdO'#HVO1XQdO'#HVOF{QdO'#DTOGTQdO,59mOGYQdO'#HZO'vQdO'#HZO0rQdO,5=tOOQS,5=t,5=tO0rQdO'#EROOQS'#ES'#ESOGwQdO'#GPOHXQdO,58|OHXQdO,58|O*xQdO,5:oOHgQtO'#H]OOQS,5:r,5:rOOQS,5:z,5:zOHzQdO,5;OOI]QdO'#IOO1XQdO'#H}OOQS,5;Q,5;QOOQS'#GT'#GTOIqQtO,5;QOJPQdO,5;QOJUQdO'#IQOOQS,5;T,5;TOJdQdO'#H|OOQS,5;W,5;WOJuQdO,5;YO4iQdO,5;`O4iQdO,5;cOJ}QtO'#ITO'vQdO'#ITOKXQdO,5;eO4VQdO,5;eO0rQdO,5;jO1XQdO,5;lOK^QeO'#EuOLjQgO,5;fO!!kQdO'#IUO4iQdO,5;jO!!vQdO,5;lO!#OQdO,5;qO!#ZQtO,5;vO'vQdO,5;vPOOO,5=[,5=[P!#bOSO,5=[P!#jOdO,5=[O!&bQtO1G.jO!&iQtO1G.jO!)YQtO1G.jO!)dQtO1G.jO!+}QtO1G.jO!,bQtO1G.jO!,uQdO'#HcO!-TQtO'#GuO0rQdO'#HcO!-_QdO'#HbOOQS,5:Z,5:ZO!-gQdO,5:ZO!-lQdO'#HeO!-wQdO'#HeO!.[QdO,5>OOOQS'#Ds'#DsOOQS1G/w1G/wOOQS1G.|1G.|O!/[QtO1G.|O!/cQtO1G.|O1lQdO1G.|O!0OQdO1G/UOOQS'#DZ'#DZO0rQdO,59tOOQS1G.{1G.{O!0VQdO1G/eO!0gQdO1G/eO!0oQdO1G/fO'vQdO'#H[O!0tQdO'#H[O!0yQtO1G.{O!1ZQdO,59iO!2aQdO,5=zO!2qQdO,5=zO!2yQdO1G/mO!3OQtO1G/mOOQS1G/l1G/lO!3`QdO,5=uO!4VQdO,5=uO0rQdO1G/qO!4tQdO1G/sO!4yQtO1G/sO!5ZQtO1G/qOOQS1G/p1G/pOOQS1G/r1G/rOOOW-E9w-E9wOOQS1G/{1G/{O!5kQdO'#HxO0rQdO'#HxO!5|QdO,5>cOOOW-E9x-E9xOOQS1G/|1G/|OOQS-E9{-E9{O!6[Q#xO1G2zO!6{QtO1G2zO'vQdO,5<jOOQS,5<j,5<jOOQS-E9|-E9|OOQS,5<r,5<rOOQS-E:U-E:UOOQV1G0x1G0xO1XQdO'#GRO!7dQtO,5>kOOQS1G1`1G1`O!8RQdO1G1`OOQS'#DV'#DVO0rQdO,5=qOOQS,5=q,5=qO!8WQdO'#FrO!8cQdO,59oO!8kQdO1G/XO!8uQtO,5=uOOQS1G3`1G3`OOQS,5:m,5:mO!9fQdO'#GtOOQS,5<k,5<kOOQS-E9}-E9}O!9wQdO1G.hOOQS1G0Z1G0ZO!:VQdO,5=wO!:gQdO,5=wO0rQdO1G0jO0rQdO1G0jO!:xQdO,5>jO!;ZQdO,5>jO1XQdO,5>jO!;lQdO,5>iOOQS-E:R-E:RO!;qQdO1G0lO!;|QdO1G0lO!<RQdO,5>lO!<aQdO,5>lO!<oQdO,5>hO!=VQdO,5>hO!=hQdO'#EpO0rQdO1G0tO!=sQdO1G0tO!=xQgO1G0zO!AvQgO1G0}O!EqQdO,5>oO!E{QdO,5>oO!FTQtO,5>oO0rQdO1G1PO!F_QdO1G1PO4iQdO1G1UO!!vQdO1G1WOOQV,5;a,5;aO!FdQfO,5;aO!FiQgO1G1QO!JjQdO'#GZO4iQdO1G1QO4iQdO1G1QO!JzQdO,5>pO!KXQdO,5>pO1XQdO,5>pOOQV1G1U1G1UO!KaQdO'#FSO!KrQ!fO1G1WO!KzQdO1G1WOOQV1G1]1G1]O4iQdO1G1]O!LPQdO1G1]O!LXQdO'#F^OOQV1G1b1G1bO!#ZQtO1G1bPOOO1G2v1G2vP!L^OSO1G2vOOQS,5=},5=}OOQS'#Dp'#DpO0rQdO,5=}O!LfQdO,5=|O!LyQdO,5=|OOQS1G/u1G/uO!MRQdO,5>PO!McQdO,5>PO!MkQdO,5>PO!NOQdO,5>PO!N`QdO,5>POOQS1G3j1G3jOOQS7+$h7+$hO!8kQdO7+$pO#!RQdO1G.|O#!YQdO1G.|OOQS1G/`1G/`OOQS,5<`,5<`O'vQdO,5<`OOQS7+%P7+%PO#!aQdO7+%POOQS-E9r-E9rOOQS7+%Q7+%QO#!qQdO,5=vO'vQdO,5=vOOQS7+$g7+$gO#!vQdO7+%PO##OQdO7+%QO##TQdO1G3fOOQS7+%X7+%XO##eQdO1G3fO##mQdO7+%XOOQS,5<_,5<_O'vQdO,5<_O##rQdO1G3aOOQS-E9q-E9qO#$iQdO7+%]OOQS7+%_7+%_O#$wQdO1G3aO#%fQdO7+%_O#%kQdO1G3gO#%{QdO1G3gO#&TQdO7+%]O#&YQdO,5>dO#&sQdO,5>dO#&sQdO,5>dOOQS'#Dx'#DxO#'UO&jO'#DzO#'aO`O'#HyOOOW1G3}1G3}O#'fQdO1G3}O#'nQdO1G3}O#'yQ#xO7+(fO#(jQtO1G2UP#)TQdO'#GOOOQS,5<m,5<mOOQS-E:P-E:POOQS7+&z7+&zOOQS1G3]1G3]OOQS,5<^,5<^OOQS-E9p-E9pOOQS7+$s7+$sO#)bQdO,5=`O#){QdO,5=`O#*^QtO,5<aO#*qQdO1G3cOOQS-E9s-E9sOOQS7+&U7+&UO#+RQdO7+&UO#+aQdO,5<nO#+uQdO1G4UOOQS-E:Q-E:QO#,WQdO1G4UOOQS1G4T1G4TOOQS7+&W7+&WO#,iQdO7+&WOOQS,5<p,5<pO#,tQdO1G4WOOQS-E:S-E:SOOQS,5<l,5<lO#-SQdO1G4SOOQS-E:O-E:OO1XQdO'#EqO#-jQdO'#EqO#-uQdO'#IRO#-}QdO,5;[OOQS7+&`7+&`O0rQdO7+&`O#.SQgO7+&fO!JmQdO'#GXO4iQdO7+&fO4iQdO7+&iO#2QQtO,5<tO'vQdO,5<tO#2[QdO1G4ZOOQS-E:W-E:WO#2fQdO1G4ZO4iQdO7+&kO0rQdO7+&kOOQV7+&p7+&pO!KrQ!fO7+&rO!KzQdO7+&rO`QeO1G0{OOQV-E:X-E:XO4iQdO7+&lO4iQdO7+&lOOQV,5<u,5<uO#2nQdO,5<uO!JmQdO,5<uOOQV7+&l7+&lO#2yQgO7+&lO#6tQdO,5<vO#7PQdO1G4[OOQS-E:Y-E:YO#7^QdO1G4[O#7fQdO'#IWO#7tQdO'#IWO1XQdO'#IWOOQS'#IW'#IWO#8PQdO'#IVOOQS,5;n,5;nO#8XQdO,5;nO0rQdO'#FUOOQV7+&r7+&rO4iQdO7+&rOOQV7+&w7+&wO4iQdO7+&wO#8^QfO,5;xOOQV7+&|7+&|POOO7+(b7+(bO#8cQdO1G3iOOQS,5<c,5<cO#8qQdO1G3hOOQS-E9u-E9uO#9UQdO,5<dO#9aQdO,5<dO#9tQdO1G3kOOQS-E9v-E9vO#:UQdO1G3kO#:^QdO1G3kO#:nQdO1G3kO#:UQdO1G3kOOQS<<H[<<H[O#:yQtO1G1zOOQS<<Hk<<HkP#;WQdO'#FtO8vQdO1G3bO#;eQdO1G3bO#;jQdO<<HkOOQS<<Hl<<HlO#;zQdO7+)QOOQS<<Hs<<HsO#<[QtO1G1yP#<{QdO'#FsO#=YQdO7+)RO#=jQdO7+)RO#=rQdO<<HwO#=wQdO7+({OOQS<<Hy<<HyO#>nQdO,5<bO'vQdO,5<bOOQS-E9t-E9tOOQS<<Hw<<HwOOQS,5<g,5<gO0rQdO,5<gO#>sQdO1G4OOOQS-E9y-E9yO#?^QdO1G4OO<[QdO'#H{OOOO'#D{'#D{OOOO'#F|'#F|O#?oO&jO,5:fOOOW,5>e,5>eOOOW7+)i7+)iO#?zQdO7+)iO#@SQdO1G2zO#@mQdO1G2zP'vQdO'#FuO0rQdO<<IpO1XQdO1G2YP1XQdO'#GSO#AOQdO7+)pO#AaQdO7+)pOOQS<<Ir<<IrP1XQdO'#GUP0rQdO'#GQOOQS,5;],5;]O#ArQdO,5>mO#BQQdO,5>mOOQS1G0v1G0vOOQS<<Iz<<IzOOQV-E:V-E:VO4iQdO<<JQOOQV,5<s,5<sO4iQdO,5<sOOQV<<JQ<<JQOOQV<<JT<<JTO#BYQtO1G2`P#BdQdO'#GYO#BkQdO7+)uO#BuQgO<<JVO4iQdO<<JVOOQV<<J^<<J^O4iQdO<<J^O!KrQ!fO<<J^O#FpQgO7+&gOOQV<<JW<<JWO#FzQgO<<JWOOQV1G2a1G2aO1XQdO1G2aO#JuQdO1G2aO4iQdO<<JWO1XQdO1G2bP0rQdO'#G[O#KQQdO7+)vO#K_QdO7+)vOOQS'#FT'#FTO0rQdO,5>rO#KgQdO,5>rO#KrQdO,5>rO#K}QdO,5>qO#L`QdO,5>qOOQS1G1Y1G1YOOQS,5;p,5;pOOQV<<Jc<<JcO#LhQdO1G1dOOQS7+)T7+)TP#LmQdO'#FwO#L}QdO1G2OO#MbQdO1G2OO#MrQdO1G2OP#M}QdO'#FxO#N[QdO7+)VO#NlQdO7+)VO#NlQdO7+)VO#NtQdO7+)VO$ UQdO7+(|O8vQdO7+(|OOQSAN>VAN>VO$ oQdO<<LmOOQSAN>cAN>cO0rQdO1G1|O$!PQtO1G1|P$!ZQdO'#FvOOQS1G2R1G2RP$!hQdO'#F{O$!uQdO7+)jO$#`QdO,5>gOOOO-E9z-E9zOOOW<<MT<<MTO$#nQdO7+(fOOQSAN?[AN?[OOQS7+'t7+'tO$$XQdO<<M[OOQS,5<q,5<qO$$jQdO1G4XOOQS-E:T-E:TOOQVAN?lAN?lOOQV1G2_1G2_O4iQdOAN?qO$$xQgOAN?qOOQVAN?xAN?xO4iQdOAN?xOOQV<<JR<<JRO4iQdOAN?rO4iQdO7+'{OOQV7+'{7+'{O1XQdO7+'{OOQVAN?rAN?rOOQS7+'|7+'|O$(sQdO<<MbOOQS1G4^1G4^O0rQdO1G4^OOQS,5<w,5<wO$)QQdO1G4]OOQS-E:Z-E:ZOOQU'#G_'#G_O$)cQfO7+'OO$)nQdO'#F_O$*uQdO7+'jO$+VQdO7+'jOOQS7+'j7+'jO$+bQdO<<LqO$+rQdO<<LqO$+rQdO<<LqO$+zQdO'#H^OOQS<<Lh<<LhO$,UQdO<<LhOOQS7+'h7+'hOOQS'#D|'#D|OOOO1G4R1G4RO$,oQdO1G4RO$,wQdO1G4RP!=hQdO'#GVOOQVG25]G25]O4iQdOG25]OOQVG25dG25dOOQVG25^G25^OOQV<<Kg<<KgO4iQdO<<KgOOQS7+)x7+)xP$-SQdO'#G]OOQU-E:]-E:]OOQV<<Jj<<JjO$-vQtO'#FaOOQS'#Fc'#FcO$.WQdO'#FbO$.xQdO'#FbOOQS'#Fb'#FbO$.}QdO'#IYO$)nQdO'#FiO$)nQdO'#FiO$/fQdO'#FjO$)nQdO'#FkO$/mQdO'#IZOOQS'#IZ'#IZO$0[QdO,5;yOOQS<<KU<<KUO$0dQdO<<KUO$0tQdOANB]O$1UQdOANB]O$1^QdO'#H_OOQS'#H_'#H_O1sQdO'#DcO$1wQdO,5=xOOQSANBSANBSOOOO7+)m7+)mO$2`QdO7+)mOOQVLD*wLD*wOOQVANARANARO5uQ!fO'#GaO$2hQtO,5<SO$)nQdO'#FmOOQS,5<W,5<WOOQS'#Fd'#FdO$3YQdO,5;|O$3_QdO,5;|OOQS'#Fg'#FgO$)nQdO'#G`O$4PQdO,5<QO$4kQdO,5>tO$4{QdO,5>tO1XQdO,5<PO$5^QdO,5<TO$5cQdO,5<TO$)nQdO'#I[O$5hQdO'#I[O$5mQdO,5<UOOQS,5<V,5<VO0rQdO'#FpOOQU1G1e1G1eO4iQdO1G1eOOQSAN@pAN@pO$5rQdOG27wO$6SQdO,59}OOQS1G3d1G3dOOOO<<MX<<MXOOQS,5<{,5<{OOQS-E:_-E:_O$6XQtO'#FaO$6`QdO'#I]O$6nQdO'#I]O$6vQdO,5<XOOQS1G1h1G1hO$6{QdO1G1hO$7QQdO,5<zOOQS-E:^-E:^O$7lQdO,5=OO$8TQdO1G4`OOQS-E:b-E:bOOQS1G1k1G1kOOQS1G1o1G1oO$8eQdO,5>vO$)nQdO,5>vOOQS1G1p1G1pOOQS,5<[,5<[OOQU7+'P7+'PO$+zQdO1G/iO$)nQdO,5<YO$8sQdO,5>wO$8zQdO,5>wOOQS1G1s1G1sOOQS7+'S7+'SP$)nQdO'#GdO$9SQdO1G4bO$9^QdO1G4bO$9fQdO1G4bOOQS7+%T7+%TO$9tQdO1G1tO$:SQtO'#FaO$:ZQdO,5<}OOQS,5<},5<}O$:iQdO1G4cOOQS-E:a-E:aO$)nQdO,5<|O$:pQdO,5<|O$:uQdO7+)|OOQS-E:`-E:`O$;PQdO7+)|O$)nQdO,5<ZP$)nQdO'#GcO$;XQdO1G2hO$)nQdO1G2hP$;gQdO'#GbO$;nQdO<<MhO$;xQdO1G1uO$<WQdO7+(SO8vQdO'#C}O8vQdO,59bO8vQdO,59bO8vQdO,59bO$<fQtO,5=`O8vQdO1G.|O0rQdO1G/XO0rQdO7+$pP$<yQdO'#GOO'vQdO'#GtO$=WQdO,59bO$=]QdO,59bO$=dQdO,59mO$=iQdO1G/UO1sQdO'#DRO8vQdO,59j",stateData:"$>S~O%cOS%^OSSOS%]PQ~OPdOVaOfoOhYOopOs!POvqO!PrO!Q{O!T!SO!U!RO!XZO!][O!h`O!r`O!s`O!t`O!{tO!}uO#PvO#RwO#TxO#XyO#ZzO#^|O#_|O#a}O#c!OO#l!QO#o!TO#s!UO#u!VO#z!WO#}hO$P!XO%oRO%pRO%tSO%uWO&Z]O&[]O&]]O&^]O&_]O&`]O&a]O&b]O&c^O&d^O&e^O&f^O&g^O&h^O&i^O&j^O~O%]!YO~OV!aO_!aOa!bOh!iO!X!kO!f!mO%j![O%k!]O%l!^O%m!_O%n!_O%o!`O%p!`O%q!aO%r!aO%s!aO~Ok%xXl%xXm%xXn%xXo%xXp%xXs%xXz%xX{%xX!x%xX#g%xX%[%xX%_%xX%z%xXg%xX!T%xX!U%xX%{%xX!W%xX![%xX!Q%xX#[%xXt%xX!m%xX~P%SOfoOhYO!XZO!][O!h`O!r`O!s`O!t`O%oRO%pRO%tSO%uWO&Z]O&[]O&]]O&^]O&_]O&`]O&a]O&b]O&c^O&d^O&e^O&f^O&g^O&h^O&i^O&j^O~Oz%wX{%wX#g%wX%[%wX%_%wX%z%wX~Ok!pOl!qOm!oOn!oOo!rOp!sOs!tO!x%wX~P)pOV!zOg!|Oo0cOv0qO!PrO~P'vOV#OOo0cOv0qO!W#PO~P'vOV#SOa#TOo0cOv0qO![#UO~P'vOQ#XO%`#XO%a#ZO~OQ#^OR#[O%`#^O%a#`O~OV%iX_%iXa%iXh%iXk%iXl%iXm%iXn%iXo%iXp%iXs%iXz%iX!X%iX!f%iX%j%iX%k%iX%l%iX%m%iX%n%iX%o%iX%p%iX%q%iX%r%iX%s%iXg%iX!T%iX!U%iX~O&Z]O&[]O&]]O&^]O&_]O&`]O&a]O&b]O&c^O&d^O&e^O&f^O&g^O&h^O&i^O&j^O{%iX!x%iX#g%iX%[%iX%_%iX%z%iX%{%iX!W%iX![%iX!Q%iX#[%iXt%iX!m%iX~P,eOz#dO{%hX!x%hX#g%hX%[%hX%_%hX%z%hX~Oo0cOv0qO~P'vO#g#gO%[#iO%_#iO~O%uWO~O!T#nO#u!VO#z!WO#}hO~OopO~P'vOV#sOa#tO%uWO{wP~OV#xOo0cOv0qO!Q#yO~P'vO{#{O!x$QO%z#|O#g!yX%[!yX%_!yX~OV#xOo0cOv0qO#g#SX%[#SX%_#SX~P'vOo0cOv0qO#g#WX%[#WX%_#WX~P'vOh$WO%uWO~O!f$YO!r$YO%uWO~OV$eO~P'vO!U$gO#s$hO#u$iO~O{$jO~OV$qO~P'vOS$sO%[$rO%_$rO%c$tO~OV$}Oa$}Og%POo0cOv0qO~P'vOo0cOv0qO{%SO~P'vO&Y%UO~Oa!bOh!iO!X!kO!f!mOVba_bakbalbambanbaobapbasbazba{ba!xba#gba%[ba%_ba%jba%kba%lba%mba%nba%oba%pba%qba%rba%sba%zbagba!Tba!Uba%{ba!Wba![ba!Qba#[batba!mba~On%ZO~Oo%ZO~P'vOo0cO~P'vOk0eOl0fOm0dOn0dOo0mOp0nOs0rOg%wX!T%wX!U%wX%{%wX!W%wX![%wX!Q%wX#[%wX!m%wX~P)pO%{%]Og%vXz%vX!T%vX!U%vX!W%vX{%vX~Og%_Oz%`O!T%dO!U%cO~Og%_O~Oz%gO!T%dO!U%cO!W&SX~O!W%kO~Oz%lO{%nO!T%dO!U%cO![%}X~O![%rO~O![%sO~OQ#XO%`#XO%a%uO~OV%wOo0cOv0qO!PrO~P'vOQ#^OR#[O%`#^O%a%zO~OV!qa_!qaa!qah!qak!qal!qam!qan!qao!qap!qas!qaz!qa{!qa!X!qa!f!qa!x!qa#g!qa%[!qa%_!qa%j!qa%k!qa%l!qa%m!qa%n!qa%o!qa%p!qa%q!qa%r!qa%s!qa%z!qag!qa!T!qa!U!qa%{!qa!W!qa![!qa!Q!qa#[!qat!qa!m!qa~P#yOz%|O{%ha!x%ha#g%ha%[%ha%_%ha%z%ha~P%SOV&OOopOvqO{%ha!x%ha#g%ha%[%ha%_%ha%z%ha~P'vOz%|O{%ha!x%ha#g%ha%[%ha%_%ha%z%ha~OPdOVaOopOvqO!PrO!Q{O!{tO!}uO#PvO#RwO#TxO#XyO#ZzO#^|O#_|O#a}O#c!OO#g$zX%[$zX%_$zX~P'vO#g#gO%[&TO%_&TO~O!f&UOh&sX%[&sXz&sX#[&sX#g&sX%_&sX#Z&sXg&sX~Oh!iO%[&WO~Okealeameaneaoeapeaseazea{ea!xea#gea%[ea%_ea%zeagea!Tea!Uea%{ea!Wea![ea!Qea#[eatea!mea~P%SOsqazqa{qa#gqa%[qa%_qa%zqa~Ok!pOl!qOm!oOn!oOo!rOp!sO!xqa~PEcO%z&YOz%yX{%yX~O%uWOz%yX{%yX~Oz&]O{wX~O{&_O~Oz%lO#g%}X%[%}X%_%}Xg%}X{%}X![%}X!m%}X%z%}X~OV0lOo0cOv0qO!PrO~P'vO%z#|O#gUa%[Ua%_Ua~Oz&hO#g&PX%[&PX%_&PXn&PX~P%SOz&kO!Q&jO#g#Wa%[#Wa%_#Wa~Oz&lO#[&nO#g&rX%[&rX%_&rXg&rX~O!f$YO!r$YO#Z&qO%uWO~O#Z&qO~Oz&sO#g&tX%[&tX%_&tX~Oz&uO#g&pX%[&pX%_&pX{&pX~O!X&wO%z&xO~Oz&|On&wX~P%SOn'PO~OPdOVaOopOvqO!PrO!Q{O!{tO!}uO#PvO#RwO#TxO#XyO#ZzO#^|O#_|O#a}O#c!OO%['UO~P'vOt'YO#p'WO#q'XOP#naV#naf#nah#nao#nas#nav#na!P#na!Q#na!T#na!U#na!X#na!]#na!h#na!r#na!s#na!t#na!{#na!}#na#P#na#R#na#T#na#X#na#Z#na#^#na#_#na#a#na#c#na#l#na#o#na#s#na#u#na#z#na#}#na$P#na%X#na%o#na%p#na%t#na%u#na&Z#na&[#na&]#na&^#na&_#na&`#na&a#na&b#na&c#na&d#na&e#na&f#na&g#na&h#na&i#na&j#na%Z#na%_#na~Oz'ZO#[']O{&xX~Oh'_O!X&wO~Oh!iO{$jO!X&wO~O{'eO~P%SO%['hO%_'hO~OS'iO%['hO%_'hO~OV!aO_!aOa!bOh!iO!X!kO!f!mO%l!^O%m!_O%n!_O%o!`O%p!`O%q!aO%r!aO%s!aOkWilWimWinWioWipWisWizWi{Wi!xWi#gWi%[Wi%_Wi%jWi%zWigWi!TWi!UWi%{Wi!WWi![Wi!QWi#[WitWi!mWi~O%k!]O~P!#uO%kWi~P!#uOV!aO_!aOa!bOh!iO!X!kO!f!mO%o!`O%p!`O%q!aO%r!aO%s!aOkWilWimWinWioWipWisWizWi{Wi!xWi#gWi%[Wi%_Wi%jWi%kWi%lWi%zWigWi!TWi!UWi%{Wi!WWi![Wi!QWi#[WitWi!mWi~O%m!_O%n!_O~P!&pO%mWi%nWi~P!&pOa!bOh!iO!X!kO!f!mOkWilWimWinWioWipWisWizWi{Wi!xWi#gWi%[Wi%_Wi%jWi%kWi%lWi%mWi%nWi%oWi%pWi%zWigWi!TWi!UWi%{Wi!WWi![Wi!QWi#[WitWi!mWi~OV!aO_!aO%q!aO%r!aO%s!aO~P!)nOVWi_Wi%qWi%rWi%sWi~P!)nO!T%dO!U%cOg&VXz&VX~O%z'kO%{'kO~P,eOz'mOg&UX~Og'oO~Oz'pO{'rO!W&XX~Oo0cOv0qOz'pO{'sO!W&XX~P'vO!W'uO~Om!oOn!oOo!rOp!sOkjisjizji{ji!xji#gji%[ji%_ji%zji~Ol!qO~P!.aOlji~P!.aOk0eOl0fOm0dOn0dOo0mOp0nO~Ot'wO~P!/jOV'|Og'}Oo0cOv0qO~P'vOg'}Oz(OO~Og(QO~O!U(SO~Og(TOz(OO!T%dO!U%cO~P%SOk0eOl0fOm0dOn0dOo0mOp0nOgqa!Tqa!Uqa%{qa!Wqa![qa!Qqa#[qatqa!mqa~PEcOV'|Oo0cOv0qO!W&Sa~P'vOz(WO!W&Sa~O!W(XO~Oz(WO!T%dO!U%cO!W&Sa~P%SOV(]Oo0cOv0qO![%}a#g%}a%[%}a%_%}ag%}a{%}a!m%}a%z%}a~P'vOz(^O![%}a#g%}a%[%}a%_%}ag%}a{%}a!m%}a%z%}a~O![(aO~Oz(^O!T%dO!U%cO![%}a~P%SOz(dO!T%dO!U%cO![&Ta~P%SOz(gO{&lX![&lX!m&lX%z&lX~O{(kO![(mO!m(nO%z(jO~OV&OOopOvqO{%hi!x%hi#g%hi%[%hi%_%hi%z%hi~P'vOz(pO{%hi!x%hi#g%hi%[%hi%_%hi%z%hi~O!f&UOh&sa%[&saz&sa#[&sa#g&sa%_&sa#Z&sag&sa~O%[(uO~OV#sOa#tO%uWO~Oz&]O{wa~OopOvqO~P'vOz(^O#g%}a%[%}a%_%}ag%}a{%}a![%}a!m%}a%z%}a~P%SOz(zO#g%hX%[%hX%_%hX%z%hX~O%z#|O#gUi%[Ui%_Ui~O#g&Pa%[&Pa%_&Pan&Pa~P'vOz(}O#g&Pa%[&Pa%_&Pan&Pa~O%uWO#g&ra%[&ra%_&rag&ra~Oz)SO#g&ra%[&ra%_&rag&ra~Og)VO~OV)WOh$WO%uWO~O#Z)XO~O%uWO#g&ta%[&ta%_&ta~Oz)ZO#g&ta%[&ta%_&ta~Oo0cOv0qO#g&pa%[&pa%_&pa{&pa~P'vOz)^O#g&pa%[&pa%_&pa{&pa~OV)`Oa)`O%uWO~O%z)eO~Ot)hO#j)gOP#hiV#hif#hih#hio#his#hiv#hi!P#hi!Q#hi!T#hi!U#hi!X#hi!]#hi!h#hi!r#hi!s#hi!t#hi!{#hi!}#hi#P#hi#R#hi#T#hi#X#hi#Z#hi#^#hi#_#hi#a#hi#c#hi#l#hi#o#hi#s#hi#u#hi#z#hi#}#hi$P#hi%X#hi%o#hi%p#hi%t#hi%u#hi&Z#hi&[#hi&]#hi&^#hi&_#hi&`#hi&a#hi&b#hi&c#hi&d#hi&e#hi&f#hi&g#hi&h#hi&i#hi&j#hi%Z#hi%_#hi~Ot)iOP#kiV#kif#kih#kio#kis#kiv#ki!P#ki!Q#ki!T#ki!U#ki!X#ki!]#ki!h#ki!r#ki!s#ki!t#ki!{#ki!}#ki#P#ki#R#ki#T#ki#X#ki#Z#ki#^#ki#_#ki#a#ki#c#ki#l#ki#o#ki#s#ki#u#ki#z#ki#}#ki$P#ki%X#ki%o#ki%p#ki%t#ki%u#ki&Z#ki&[#ki&]#ki&^#ki&_#ki&`#ki&a#ki&b#ki&c#ki&d#ki&e#ki&f#ki&g#ki&h#ki&i#ki&j#ki%Z#ki%_#ki~OV)kOn&wa~P'vOz)lOn&wa~Oz)lOn&wa~P%SOn)pO~O%Y)tO~Ot)wO#p'WO#q)vOP#niV#nif#nih#nio#nis#niv#ni!P#ni!Q#ni!T#ni!U#ni!X#ni!]#ni!h#ni!r#ni!s#ni!t#ni!{#ni!}#ni#P#ni#R#ni#T#ni#X#ni#Z#ni#^#ni#_#ni#a#ni#c#ni#l#ni#o#ni#s#ni#u#ni#z#ni#}#ni$P#ni%X#ni%o#ni%p#ni%t#ni%u#ni&Z#ni&[#ni&]#ni&^#ni&_#ni&`#ni&a#ni&b#ni&c#ni&d#ni&e#ni&f#ni&g#ni&h#ni&i#ni&j#ni%Z#ni%_#ni~OV)zOo0cOv0qO{$jO~P'vOo0cOv0qO{&xa~P'vOz*OO{&xa~OV*SOa*TOg*WO%q*UO%uWO~O{$jO&{*YO~Oh'_O~Oh!iO{$jO~O%[*_O~O%[*aO%_*aO~OV$}Oa$}Oo0cOv0qOg&Ua~P'vOz*dOg&Ua~Oo0cOv0qO{*gO!W&Xa~P'vOz*hO!W&Xa~Oo0cOv0qOz*hO{*kO!W&Xa~P'vOo0cOv0qOz*hO!W&Xa~P'vOz*hO{*kO!W&Xa~Om0dOn0dOo0mOp0nOgjikjisjizji!Tji!Uji%{ji!Wji{ji![ji#gji%[ji%_ji!Qji#[jitji!mji%zji~Ol0fO~P!NkOlji~P!NkOV'|Og*pOo0cOv0qO~P'vOn*rO~Og*pOz*tO~Og*uO~OV'|Oo0cOv0qO!W&Si~P'vOz*vO!W&Si~O!W*wO~OV(]Oo0cOv0qO![%}i#g%}i%[%}i%_%}ig%}i{%}i!m%}i%z%}i~P'vOz*zO!T%dO!U%cO![&Ti~Oz*}O![%}i#g%}i%[%}i%_%}ig%}i{%}i!m%}i%z%}i~O![+OO~Oa+QOo0cOv0qO![&Ti~P'vOz*zO![&Ti~O![+SO~OV+UOo0cOv0qO{&la![&la!m&la%z&la~P'vOz+VO{&la![&la!m&la%z&la~O!]+YO&n+[O![!nX~O![+^O~O{(kO![+_O~O{(kO![+_O!m+`O~OV&OOopOvqO{%hq!x%hq#g%hq%[%hq%_%hq%z%hq~P'vOz$ri{$ri!x$ri#g$ri%[$ri%_$ri%z$ri~P%SOV&OOopOvqO~P'vOV&OOo0cOv0qO#g%ha%[%ha%_%ha%z%ha~P'vOz+aO#g%ha%[%ha%_%ha%z%ha~Oz$ia#g$ia%[$ia%_$ian$ia~P%SO#g&Pi%[&Pi%_&Pin&Pi~P'vOz+dO#g#Wq%[#Wq%_#Wq~O#[+eOz$va#g$va%[$va%_$vag$va~O%uWO#g&ri%[&ri%_&rig&ri~Oz+gO#g&ri%[&ri%_&rig&ri~OV+iOh$WO%uWO~O%uWO#g&ti%[&ti%_&ti~Oo0cOv0qO#g&pi%[&pi%_&pi{&pi~P'vO{#{Oz#eX!W#eX~Oz+mO!W&uX~O!W+oO~Ot+rO#j)gOP#hqV#hqf#hqh#hqo#hqs#hqv#hq!P#hq!Q#hq!T#hq!U#hq!X#hq!]#hq!h#hq!r#hq!s#hq!t#hq!{#hq!}#hq#P#hq#R#hq#T#hq#X#hq#Z#hq#^#hq#_#hq#a#hq#c#hq#l#hq#o#hq#s#hq#u#hq#z#hq#}#hq$P#hq%X#hq%o#hq%p#hq%t#hq%u#hq&Z#hq&[#hq&]#hq&^#hq&_#hq&`#hq&a#hq&b#hq&c#hq&d#hq&e#hq&f#hq&g#hq&h#hq&i#hq&j#hq%Z#hq%_#hq~On$|az$|a~P%SOV)kOn&wi~P'vOz+yOn&wi~Oz,TO{$jO#[,TO~O#q,VOP#nqV#nqf#nqh#nqo#nqs#nqv#nq!P#nq!Q#nq!T#nq!U#nq!X#nq!]#nq!h#nq!r#nq!s#nq!t#nq!{#nq!}#nq#P#nq#R#nq#T#nq#X#nq#Z#nq#^#nq#_#nq#a#nq#c#nq#l#nq#o#nq#s#nq#u#nq#z#nq#}#nq$P#nq%X#nq%o#nq%p#nq%t#nq%u#nq&Z#nq&[#nq&]#nq&^#nq&_#nq&`#nq&a#nq&b#nq&c#nq&d#nq&e#nq&f#nq&g#nq&h#nq&i#nq&j#nq%Z#nq%_#nq~O#[,WOz%Oa{%Oa~Oo0cOv0qO{&xi~P'vOz,YO{&xi~O{#{O%z,[Og&zXz&zX~O%uWOg&zXz&zX~Oz,`Og&yX~Og,bO~O%Y,eO~O!T%dO!U%cOg&Viz&Vi~OV$}Oa$}Oo0cOv0qOg&Ui~P'vO{,hOz$la!W$la~Oo0cOv0qO{,iOz$la!W$la~P'vOo0cOv0qO{*gO!W&Xi~P'vOz,lO!W&Xi~Oo0cOv0qOz,lO!W&Xi~P'vOz,lO{,oO!W&Xi~Og$hiz$hi!W$hi~P%SOV'|Oo0cOv0qO~P'vOn,qO~OV'|Og,rOo0cOv0qO~P'vOV'|Oo0cOv0qO!W&Sq~P'vOz$gi![$gi#g$gi%[$gi%_$gig$gi{$gi!m$gi%z$gi~P%SOV(]Oo0cOv0qO~P'vOa+QOo0cOv0qO![&Tq~P'vOz,sO![&Tq~O![,tO~OV(]Oo0cOv0qO![%}q#g%}q%[%}q%_%}qg%}q{%}q!m%}q%z%}q~P'vO{,uO~OV+UOo0cOv0qO{&li![&li!m&li%z&li~P'vOz,zO{&li![&li!m&li%z&li~O!]+YO&n+[O![!na~O{(kO![,}O~OV&OOo0cOv0qO#g%hi%[%hi%_%hi%z%hi~P'vOz-OO#g%hi%[%hi%_%hi%z%hi~O%uWO#g&rq%[&rq%_&rqg&rq~Oz-RO#g&rq%[&rq%_&rqg&rq~OV)`Oa)`O%uWO!W&ua~Oz-TO!W&ua~On$|iz$|i~P%SOV)kO~P'vOV)kOn&wq~P'vOt-XOP#myV#myf#myh#myo#mys#myv#my!P#my!Q#my!T#my!U#my!X#my!]#my!h#my!r#my!s#my!t#my!{#my!}#my#P#my#R#my#T#my#X#my#Z#my#^#my#_#my#a#my#c#my#l#my#o#my#s#my#u#my#z#my#}#my$P#my%X#my%o#my%p#my%t#my%u#my&Z#my&[#my&]#my&^#my&_#my&`#my&a#my&b#my&c#my&d#my&e#my&f#my&g#my&h#my&i#my&j#my%Z#my%_#my~O%Z-]O%_-]O~P`O#q-^OP#nyV#nyf#nyh#nyo#nys#nyv#ny!P#ny!Q#ny!T#ny!U#ny!X#ny!]#ny!h#ny!r#ny!s#ny!t#ny!{#ny!}#ny#P#ny#R#ny#T#ny#X#ny#Z#ny#^#ny#_#ny#a#ny#c#ny#l#ny#o#ny#s#ny#u#ny#z#ny#}#ny$P#ny%X#ny%o#ny%p#ny%t#ny%u#ny&Z#ny&[#ny&]#ny&^#ny&_#ny&`#ny&a#ny&b#ny&c#ny&d#ny&e#ny&f#ny&g#ny&h#ny&i#ny&j#ny%Z#ny%_#ny~Oz-aO{$jO#[-aO~Oo0cOv0qO{&xq~P'vOz-dO{&xq~O%z,[Og&zaz&za~O{#{Og&zaz&za~OV*SOa*TO%q*UO%uWOg&ya~Oz-hOg&ya~O$S-lO~OV$}Oa$}Oo0cOv0qO~P'vOo0cOv0qO{-mOz$li!W$li~P'vOo0cOv0qOz$li!W$li~P'vO{-mOz$li!W$li~Oo0cOv0qO{*gO~P'vOo0cOv0qO{*gO!W&Xq~P'vOz-pO!W&Xq~Oo0cOv0qOz-pO!W&Xq~P'vOs-sO!T%dO!U%cOg&Oq!W&Oq![&Oqz&Oq~P!/jOa+QOo0cOv0qO![&Ty~P'vOz$ji![$ji~P%SOa+QOo0cOv0qO~P'vOV+UOo0cOv0qO~P'vOV+UOo0cOv0qO{&lq![&lq!m&lq%z&lq~P'vO{(kO![-xO!m-yO%z-wO~OV&OOo0cOv0qO#g%hq%[%hq%_%hq%z%hq~P'vO%uWO#g&ry%[&ry%_&ryg&ry~OV)`Oa)`O%uWO!W&ui~Ot-}OP#m!RV#m!Rf#m!Rh#m!Ro#m!Rs#m!Rv#m!R!P#m!R!Q#m!R!T#m!R!U#m!R!X#m!R!]#m!R!h#m!R!r#m!R!s#m!R!t#m!R!{#m!R!}#m!R#P#m!R#R#m!R#T#m!R#X#m!R#Z#m!R#^#m!R#_#m!R#a#m!R#c#m!R#l#m!R#o#m!R#s#m!R#u#m!R#z#m!R#}#m!R$P#m!R%X#m!R%o#m!R%p#m!R%t#m!R%u#m!R&Z#m!R&[#m!R&]#m!R&^#m!R&_#m!R&`#m!R&a#m!R&b#m!R&c#m!R&d#m!R&e#m!R&f#m!R&g#m!R&h#m!R&i#m!R&j#m!R%Z#m!R%_#m!R~Oo0cOv0qO{&xy~P'vOV*SOa*TO%q*UO%uWOg&yi~O$S-lO%Z.VO%_.VO~OV.aOh._O!X.^O!].`O!h.YO!s.[O!t.[O%p.XO%uWO&Z]O&[]O&]]O&^]O&_]O&`]O&a]O&b]O~Oo0cOv0qOz$lq!W$lq~P'vO{.fOz$lq!W$lq~Oo0cOv0qO{*gO!W&Xy~P'vOz.gO!W&Xy~Oo0cOv.kO~P'vOs-sO!T%dO!U%cOg&Oy!W&Oy![&Oyz&Oy~P!/jO{(kO![.nO~O{(kO![.nO!m.oO~OV*SOa*TO%q*UO%uWO~Oh.tO!f.rOz$TX#[$TX%j$TXg$TX~Os$TX{$TX!W$TX![$TX~P$-bO%o.vO%p.vOs$UXz$UX{$UX#[$UX%j$UX!W$UXg$UX![$UX~O!h.xO~Oz.|O#[/OO%j.yOs&|X{&|X!W&|Xg&|X~Oa/RO~P$)zOh.tOs&}Xz&}X{&}X#[&}X%j&}X!W&}Xg&}X![&}X~Os/VO{$jO~Oo0cOv0qOz$ly!W$ly~P'vOo0cOv0qO{*gO!W&X!R~P'vOz/ZO!W&X!R~Og&RXs&RX!T&RX!U&RX!W&RX![&RXz&RX~P!/jOs-sO!T%dO!U%cOg&Qa!W&Qa![&Qaz&Qa~O{(kO![/^O~O!f.rOh$[as$[az$[a{$[a#[$[a%j$[a!W$[ag$[a![$[a~O!h/eO~O%o.vO%p.vOs$Uaz$Ua{$Ua#[$Ua%j$Ua!W$Uag$Ua![$Ua~O%j.yOs$Yaz$Ya{$Ya#[$Ya!W$Yag$Ya![$Ya~Os&|a{&|a!W&|ag&|a~P$)nOz/jOs&|a{&|a!W&|ag&|a~O!W/mO~Og/mO~O{/oO~O![/pO~Oo0cOv0qO{*gO!W&X!Z~P'vO{/sO~O%z/tO~P$-bOz/uO#[/OO%j.yOg'PX~Oz/uOg'PX~Og/wO~O!h/xO~O#[/OOs%Saz%Sa{%Sa%j%Sa!W%Sag%Sa![%Sa~O#[/OO%j.yOs%Waz%Wa{%Wa!W%Wag%Wa~Os&|i{&|i!W&|ig&|i~P$)nOz/zO#[/OO%j.yO!['Oa~Og'Pa~P$)nOz0SOg'Pa~Oa0UO!['Oi~P$)zOz0WO!['Oi~Oz0WO#[/OO%j.yO!['Oi~O#[/OO%j.yOg$biz$bi~O%z0ZO~P$-bO#[/OO%j.yOg%Vaz%Va~Og'Pi~P$)nO{0^O~Oa0UO!['Oq~P$)zOz0`O!['Oq~O#[/OO%j.yOz%Ui![%Ui~Oa0UO~P$)zOa0UO!['Oy~P$)zO#[/OO%j.yOg$ciz$ci~O#[/OO%j.yOz%Uq![%Uq~Oz+aO#g%ha%[%ha%_%ha%z%ha~P%SOV&OOo0cOv0qO~P'vOn0hO~Oo0hO~P'vO{0iO~Ot0jO~P!/jO&]&Z&j&h&i&g&f&d&e&c&b&`&a&_&^&[%u~",goto:"!=j'QPPPPPP'RP'Z*s+[+t,_,y-fP.SP'Z.r.r'ZPPP'Z2[PPPPPP2[5PPP5PP7b7k=sPP=v>h>kPP'Z'ZPP>zPP'Z'ZPP'Z'Z'Z'Z'Z?O?w'ZP?zP@QDXGuGyPG|HWH['ZPPPH_Hk'RP'R'RP'RP'RP'RP'RP'R'R'RP'RPP'RPP'RP'RPHqH}IVPI^IdPI^PI^I^PPPI^PKrPK{LVL]KrPI^LfPI^PLmLsPLwM]MzNeLwLwNkNxLwLwLwLw! ^! d! g! l! o! y!!P!!]!!o!!u!#P!#V!#s!#y!$P!$Z!$a!$g!$y!%T!%Z!%a!%k!%q!%w!%}!&T!&Z!&e!&k!&u!&{!'U!'[!'k!'s!'}!(UPPPPPPPPPPP!([!(_!(e!(n!(x!)TPPPPPPPPPPPP!-u!/Z!3^!6oPP!6w!7W!7a!8Y!8P!8c!8i!8l!8o!8r!8z!9jPPPPPPPPPPPPPPPPP!9m!9q!9wP!:]!:a!:m!:v!;S!;j!;m!;p!;v!;|!<S!<VP!<_!<h!=d!=g]eOn#g$j)t,P'}`OTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!i!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$e$g$h$j$q$}%S%Z%^%`%c%g%l%n%w%|&O&Z&_&h&j&k&u&x&|'P'W'Z'l'm'p'r's'w'|(O(S(W(](^(d(g(p(r(z(})^)e)g)k)l)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+Q+U+V+Y+a+c+d+k+x+y,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0l0n0r{!cQ#c#p$R$d$p%e%j%p%q&`'O'g(q(|)j*o*x+w,v0g}!dQ#c#p$R$d$p$u%e%j%p%q&`'O'g(q(|)j*o*x+w,v0g!P!eQ#c#p$R$d$p$u$v%e%j%p%q&`'O'g(q(|)j*o*x+w,v0g!R!fQ#c#p$R$d$p$u$v$w%e%j%p%q&`'O'g(q(|)j*o*x+w,v0g!T!gQ#c#p$R$d$p$u$v$w$x%e%j%p%q&`'O'g(q(|)j*o*x+w,v0g!V!hQ#c#p$R$d$p$u$v$w$x$y%e%j%p%q&`'O'g(q(|)j*o*x+w,v0g!Z!hQ!n#c#p$R$d$p$u$v$w$x$y$z%e%j%p%q&`'O'g(q(|)j*o*x+w,v0g'}TOTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!i!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$e$g$h$j$q$}%S%Z%^%`%c%g%l%n%w%|&O&Z&_&h&j&k&u&x&|'P'W'Z'l'm'p'r's'w'|(O(S(W(](^(d(g(p(r(z(})^)e)g)k)l)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+Q+U+V+Y+a+c+d+k+x+y,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0l0n0r&eVOYZ[dnprxy}!P!Q!U!i!k!o!p!q!s!t#[#d#g#y#{#}$Q$h$j$}%S%Z%^%`%g%l%n%w%|&Z&_&j&k&u&x'P'W'Z'l'm'p'r's'w(O(W(^(d(g(p(r(z)^)e)g)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+U+V+Y+a+d+k,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0n0r%oXOYZ[dnrxy}!P!Q!U!i!k#[#d#g#y#{#}$Q$h$j$}%S%^%`%g%l%n%w%|&Z&_&j&k&u&x'P'W'Z'l'm'p'r's'w(O(W(^(d(g(p(r(z)^)e)g)p)t)z*O*Y*d*g*h*k*q*t*v*y*z*}+U+V+Y+a+d+k,P,X,Y,],g,h,i,k,l,o,s,u,w,y,z-O-d-f-m-p.f.g/V/Z0i0j0kQ#vqQ/[.kR0o0q't`OTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$e$g$h$j$q$}%S%Z%^%`%c%g%l%n%w%|&O&Z&_&h&j&k&u&x&|'P'W'Z'l'p'r's'w'|(O(S(W(](^(d(g(p(r(z(})^)e)g)k)l)p)t)z*O*Y*g*h*k*q*r*t*v*y*z*}+Q+U+V+Y+a+c+d+k+x+y,P,X,Y,],h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0l0n0rh#jhz{$W$Z&l&q)S)X+f+g-RW#rq&].k0qQ$]|Q$a!OQ$n!VQ$o!WW$|!i'm*d,gS&[#s#tQ'S$iQ(s&UQ)U&nU)Y&s)Z+jW)a&w+m-T-{Q*Q']W*R'_,`-h.TQ+l)`S,_*S*TQ-Q+eQ-_,TQ-c,WQ.R-al.W-l.^._.a.z.|/R/j/o/t/y0U0Z0^Q/S.`Q/a.tQ/l/OU0P/u0S0[X0V/z0W0_0`R&Z#r!_!wYZ!P!Q!k%S%`%g'p'r's(O(W)g*g*h*k*q*t*v,h,i,k,l,o-m-p.f.g/ZR%^!vQ!{YQ%x#[Q&d#}Q&g$QR,{+YT.j-s/s!Y!jQ!n#c#p$R$d$p$u$v$w$x$y$z%e%j%p%q&`'O'g(q(|)j*o*x+w,v0gQ&X#kQ'c$oR*^'dR'l$|Q%V!mR/_.r'|_OTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!i!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$e$g$h$j$q$}%S%Z%^%`%c%g%l%n%w%|&O&Z&_&h&j&k&u&x&|'P'W'Z'l'm'p'r's'w'|(O(S(W(](^(d(g(p(r(z(})^)e)g)k)l)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+Q+U+V+Y+a+c+d+k+x+y,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0l0n0rS#a_#b!P.[-l.^._.`.a.t.z.|/R/j/o/t/u/y/z0S0U0W0Z0[0^0_0`'|_OTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!i!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$e$g$h$j$q$}%S%Z%^%`%c%g%l%n%w%|&O&Z&_&h&j&k&u&x&|'P'W'Z'l'm'p'r's'w'|(O(S(W(](^(d(g(p(r(z(})^)e)g)k)l)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+Q+U+V+Y+a+c+d+k+x+y,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0l0n0rT#a_#bT#^^#_R(o%xa(l%x(n(o+`,{-y-z.oT+[(k+]R-z,{Q$PsQ+l)aQ,^*RR-e,_X#}s$O$P&fQ&y$aQ'a$nQ'd$oR)s'SQ)b&wV-S+m-T-{ZgOn$j)t,PXkOn)t,PQ$k!TQ&z$bQ&{$cQ'^$mQ'b$oQ)q'RQ)x'WQ){'XQ)|'YQ*Z'`S*]'c'dQ+s)gQ+u)hQ+v)iQ+z)oS+|)r*[Q,Q)vQ,R)wS,S)y)zQ,d*^Q-V+rQ-W+tQ-Y+{S-Z+},OQ-`,UQ-b,VQ-|-XQ.O-[Q.P-^Q.Q-_Q.p-}Q.q.RQ/W.dR/r/XWkOn)t,PR#mjQ'`$nS)r'S'aR,O)sQ,]*RR-f,^Q*['`Q+})rR-[,OZiOjn)t,PQ'f$pR*`'gT-j,e-ku.c-l.^._.a.t.z.|/R/j/o/t/u/y0S0U0Z0[0^t.c-l.^._.a.t.z.|/R/j/o/t/u/y0S0U0Z0[0^Q/S.`X0V/z0W0_0`!P.Z-l.^._.`.a.t.z.|/R/j/o/t/u/y/z0S0U0W0Z0[0^0_0`Q.w.YR/f.xg.z.].{/b/i/n/|0O0Q0]0a0bu.b-l.^._.a.t.z.|/R/j/o/t/u/y0S0U0Z0[0^X.u.W.b/a0PR/c.tV0R/u0S0[R/X.dQnOS#on,PR,P)tQ&^#uR(x&^S%m#R#wS(_%m(bT(b%p&`Q%a!yQ%h!}W(P%a%h(U(YQ(U%eR(Y%jQ&i$RR)O&iQ(e%qQ*{(`T+R(e*{Q'n%OR*e'nS'q%R%SY*i'q*j,m-q.hU*j'r's'tU,m*k*l*mS-q,n,oR.h-rQ#Y]R%t#YQ#_^R%y#_Q(h%vS+W(h+XR+X(iQ+](kR,|+]Q#b_R%{#bQ#ebQ%}#cW&Q#e%}({+bQ({&cR+b0gQ$OsS&e$O&fR&f$PQ&v$_R)_&vQ&V#jR(t&VQ&m$VS)T&m+hR+h)UQ$Z{R&p$ZQ&t$]R)[&tQ+n)bR-U+nQ#hfR&S#hQ)f&zR+q)fQ&}$dS)m&})nR)n'OQ'V$kR)u'VQ'[$lS*P'[,ZR,Z*QQ,a*VR-i,aWjOn)t,PR#ljQ-k,eR.U-kd.{.]/b/i/n/|0O0Q0]0a0bR/h.{U.s.W/a0PR/`.sQ/{/nS0X/{0YR0Y/|S/v/b/cR0T/vQ.}.]R/k.}R!ZPXmOn)t,PWlOn)t,PR'T$jYfOn$j)t,PR&R#g[sOn#g$j)t,PR&d#}&dQOYZ[dnprxy}!P!Q!U!i!k!o!p!q!s!t#[#d#g#y#{#}$Q$h$j$}%S%Z%^%`%g%l%n%w%|&Z&_&j&k&u&x'P'W'Z'l'm'p'r's'w(O(W(^(d(g(p(r(z)^)e)g)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+U+V+Y+a+d+k,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0n0rQ!nTQ#caQ#poU$Rt%c(SS$d!R$gQ$p!XQ$u!cQ$v!dQ$w!eQ$x!fQ$y!gQ$z!hQ%e!zQ%j#OQ%p#SQ%q#TQ&`#xQ'O$eQ'g$qQ(q&OU(|&h(}+cW)j&|)l+x+yQ*o'|Q*x(]Q+w)kQ,v+QR0g0lQ!yYQ!}ZQ$b!PQ$c!QQ%R!kQ't%S^'{%`%g(O(W*q*t*v^*f'p*h,k,l-p.g/ZQ*l'rQ*m'sQ+t)gQ,j*gQ,n*kQ-n,hQ-o,iQ-r,oQ.e-mR/Y.f[bOn#g$j)t,P!^!vYZ!P!Q!k%S%`%g'p'r's(O(W)g*g*h*k*q*t*v,h,i,k,l,o-m-p.f.g/ZQ#R[Q#fdS#wrxQ$UyW$_}$Q'P)pS$l!U$hW${!i'm*d,gS%v#[+Y`&P#d%|(p(r(z+a-O0kQ&a#yQ&b#{Q&c#}Q'j$}Q'z%^W([%l(^*y*}Q(`%nQ(i%wQ(v&ZS(y&_0iQ)P&jQ)Q&kU)]&u)^+kQ)d&xQ)y'WY)}'Z*O,X,Y-dQ*b'lS*n'w0jW+P(d*z,s,wW+T(g+V,y,zQ+p)eQ,U)zQ,c*YQ,x+UQ-P+dQ-e,]Q-v,uQ.S-fR/q/VhUOn#d#g$j%|&_'w(p(r)t,P%U!uYZ[drxy}!P!Q!U!i!k#[#y#{#}$Q$h$}%S%^%`%g%l%n%w&Z&j&k&u&x'P'W'Z'l'm'p'r's(O(W(^(d(g(z)^)e)g)p)z*O*Y*d*g*h*k*q*t*v*y*z*}+U+V+Y+a+d+k,X,Y,],g,h,i,k,l,o,s,u,w,y,z-O-d-f-m-p.f.g/V/Z0i0j0kQ#qpW%W!o!s0d0nQ%X!pQ%Y!qQ%[!tQ%f0cS'v%Z0hQ'x0eQ'y0fQ,p*rQ-u,qS.i-s/sR0p0rU#uq.k0qR(w&][cOn#g$j)t,PZ!xY#[#}$Q+YQ#W[Q#zrR$TxQ%b!yQ%i!}Q%o#RQ'j${Q(V%eQ(Z%jQ(c%pQ(f%qQ*|(`Q,f*bQ-t,pQ.m-uR/].lQ$StQ(R%cR*s(SQ.l-sR/}/sR#QZR#V[R%Q!iQ%O!iV*c'm*d,g!Z!lQ!n#c#p$R$d$p$u$v$w$x$y$z%e%j%p%q&`'O'g(q(|)j*o*x+w,v0gR%T!kT#]^#_Q%x#[R,{+YQ(m%xS+_(n(oQ,}+`Q-x,{S.n-y-zR/^.oT+Z(k+]Q$`}Q&g$QQ)o'PR+{)pQ$XzQ)W&qR+i)XQ$XzQ&o$WQ)W&qR+i)XQ#khW$Vz$W&q)XQ$[{Q&r$ZZ)R&l)S+f+g-RR$^|R)c&wXlOn)t,PQ$f!RR'Q$gQ$m!UR'R$hR*X'_Q*V'_V-g,`-h.TQ.d-lQ/P.^R/Q._U.]-l.^._Q/U.aQ/b.tQ/g.zU/i.|/j/yQ/n/RQ/|/oQ0O/tU0Q/u0S0[Q0]0UQ0a0ZR0b0^R/T.`R/d.t",nodeNames:"⚠ print Escape { Comment Script AssignStatement * BinaryExpression BitOp BitOp BitOp BitOp ArithOp ArithOp @ ArithOp ** UnaryExpression ArithOp BitOp AwaitExpression await ) ( ParenthesizedExpression BinaryExpression or and CompareOp in not is UnaryExpression ConditionalExpression if else LambdaExpression lambda ParamList VariableName AssignOp , : NamedExpression AssignOp YieldExpression yield from TupleExpression ComprehensionExpression async for LambdaExpression ] [ ArrayExpression ArrayComprehensionExpression } { DictionaryExpression DictionaryComprehensionExpression SetExpression SetComprehensionExpression CallExpression ArgList AssignOp MemberExpression . PropertyName Number String FormatString FormatReplacement FormatSelfDoc FormatConversion FormatSpec FormatReplacement FormatSelfDoc ContinuedString Ellipsis None Boolean TypeDef AssignOp UpdateStatement UpdateOp ExpressionStatement DeleteStatement del PassStatement pass BreakStatement break ContinueStatement continue ReturnStatement return YieldStatement PrintStatement RaiseStatement raise ImportStatement import as ScopeStatement global nonlocal AssertStatement assert TypeDefinition type TypeParamList TypeParam StatementGroup ; IfStatement Body elif WhileStatement while ForStatement TryStatement try except finally WithStatement with FunctionDefinition def ParamList AssignOp TypeDef ClassDefinition class DecoratedStatement Decorator At MatchStatement match MatchBody MatchClause case CapturePattern LiteralPattern ArithOp ArithOp AsPattern OrPattern LogicOp AttributePattern SequencePattern MappingPattern StarPattern ClassPattern PatternArgList KeywordPattern KeywordPattern Guard",maxTerm:277,context:Tte,nodeProps:[["isolate",-5,4,71,72,73,77,""],["group",-15,6,85,87,88,90,92,94,96,98,99,100,102,105,108,110,"Statement Statement",-22,8,18,21,25,40,49,50,56,57,60,61,62,63,64,67,70,71,72,79,80,81,82,"Expression",-10,114,116,119,121,122,126,128,133,135,138,"Statement",-9,143,144,147,148,150,151,152,153,154,"Pattern"],["openedBy",23,"(",54,"[",58,"{"],["closedBy",24,")",55,"]",59,"}"]],propSources:[Cte],skippedNodes:[0,4],repeatNodeCount:34,tokenData:"!2|~R!`OX%TXY%oY[%T[]%o]p%Tpq%oqr'ars)Yst*xtu%Tuv,dvw-hwx.Uxy/tyz0[z{0r{|2S|}2p}!O3W!O!P4_!P!Q:Z!Q!R;k!R![>_![!]Do!]!^Es!^!_FZ!_!`Gk!`!aHX!a!b%T!b!cIf!c!dJU!d!eK^!e!hJU!h!i!#f!i!tJU!t!u!,|!u!wJU!w!x!.t!x!}JU!}#O!0S#O#P&o#P#Q!0j#Q#R!1Q#R#SJU#S#T%T#T#UJU#U#VK^#V#YJU#Y#Z!#f#Z#fJU#f#g!,|#g#iJU#i#j!.t#j#oJU#o#p!1n#p#q!1s#q#r!2a#r#s!2f#s$g%T$g;'SJU;'S;=`KW<%lOJU`%YT&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%T`%lP;=`<%l%To%v]&n`%c_OX%TXY%oY[%T[]%o]p%Tpq%oq#O%T#O#P&o#P#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To&tX&n`OY%TYZ%oZ]%T]^%o^#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc'f[&n`O!_%T!_!`([!`#T%T#T#U(r#U#f%T#f#g(r#g#h(r#h#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc(cTmR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc(yT!mR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk)aV&n`&[ZOr%Trs)vs#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk){V&n`Or%Trs*bs#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk*iT&n`&^ZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To+PZS_&n`OY*xYZ%TZ]*x]^%T^#o*x#o#p+r#p#q*x#q#r+r#r;'S*x;'S;=`,^<%lO*x_+wTS_OY+rZ]+r^;'S+r;'S;=`,W<%lO+r_,ZP;=`<%l+ro,aP;=`<%l*xj,kV%rQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tj-XT!xY&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tj-oV%lQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk.]V&n`&ZZOw%Twx.rx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk.wV&n`Ow%Twx/^x#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk/eT&n`&]ZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk/{ThZ&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc0cTgR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk0yXVZ&n`Oz%Tz{1f{!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk1mVaR&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk2ZV%oZ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc2wTzR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To3_W%pZ&n`O!_%T!_!`-Q!`!a3w!a#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Td4OT&{S&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk4fX!fQ&n`O!O%T!O!P5R!P!Q%T!Q![6T![#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk5WV&n`O!O%T!O!P5m!P#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk5tT!rZ&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti6[a!hX&n`O!Q%T!Q![6T![!g%T!g!h7a!h!l%T!l!m9s!m#R%T#R#S6T#S#X%T#X#Y7a#Y#^%T#^#_9s#_#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti7fZ&n`O{%T{|8X|}%T}!O8X!O!Q%T!Q![8s![#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti8^V&n`O!Q%T!Q![8s![#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti8z]!hX&n`O!Q%T!Q![8s![!l%T!l!m9s!m#R%T#R#S8s#S#^%T#^#_9s#_#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti9zT!hX&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk:bX%qR&n`O!P%T!P!Q:}!Q!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tj;UV%sQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti;ro!hX&n`O!O%T!O!P=s!P!Q%T!Q![>_![!d%T!d!e?q!e!g%T!g!h7a!h!l%T!l!m9s!m!q%T!q!rA]!r!z%T!z!{Bq!{#R%T#R#S>_#S#U%T#U#V?q#V#X%T#X#Y7a#Y#^%T#^#_9s#_#c%T#c#dA]#d#l%T#l#mBq#m#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti=xV&n`O!Q%T!Q![6T![#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti>fc!hX&n`O!O%T!O!P=s!P!Q%T!Q![>_![!g%T!g!h7a!h!l%T!l!m9s!m#R%T#R#S>_#S#X%T#X#Y7a#Y#^%T#^#_9s#_#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti?vY&n`O!Q%T!Q!R@f!R!S@f!S#R%T#R#S@f#S#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti@mY!hX&n`O!Q%T!Q!R@f!R!S@f!S#R%T#R#S@f#S#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TiAbX&n`O!Q%T!Q!YA}!Y#R%T#R#SA}#S#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TiBUX!hX&n`O!Q%T!Q!YA}!Y#R%T#R#SA}#S#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TiBv]&n`O!Q%T!Q![Co![!c%T!c!iCo!i#R%T#R#SCo#S#T%T#T#ZCo#Z#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TiCv]!hX&n`O!Q%T!Q![Co![!c%T!c!iCo!i#R%T#R#SCo#S#T%T#T#ZCo#Z#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%ToDvV{_&n`O!_%T!_!`E]!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TcEdT%{R&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkEzT#gZ&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkFbXmR&n`O!^%T!^!_F}!_!`([!`!a([!a#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TjGUV%mQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkGrV%zZ&n`O!_%T!_!`([!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkH`WmR&n`O!_%T!_!`([!`!aHx!a#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TjIPV%nQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkIoV_Q#}P&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%ToJ_]&n`&YS%uZO!Q%T!Q![JU![!c%T!c!}JU!}#R%T#R#SJU#S#T%T#T#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUoKZP;=`<%lJUoKge&n`&YS%uZOr%Trs)Ysw%Twx.Ux!Q%T!Q![JU![!c%T!c!tJU!t!uLx!u!}JU!}#R%T#R#SJU#S#T%T#T#fJU#f#gLx#g#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUoMRa&n`&YS%uZOr%TrsNWsw%Twx! vx!Q%T!Q![JU![!c%T!c!}JU!}#R%T#R#SJU#S#T%T#T#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUkN_V&n`&`ZOr%TrsNts#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkNyV&n`Or%Trs! `s#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk! gT&n`&bZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk! }V&n`&_ZOw%Twx!!dx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!!iV&n`Ow%Twx!#Ox#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!#VT&n`&aZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To!#oe&n`&YS%uZOr%Trs!%Qsw%Twx!&px!Q%T!Q![JU![!c%T!c!tJU!t!u!(`!u!}JU!}#R%T#R#SJU#S#T%T#T#fJU#f#g!(`#g#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUk!%XV&n`&dZOr%Trs!%ns#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!%sV&n`Or%Trs!&Ys#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!&aT&n`&fZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!&wV&n`&cZOw%Twx!'^x#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!'cV&n`Ow%Twx!'xx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!(PT&n`&eZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To!(ia&n`&YS%uZOr%Trs!)nsw%Twx!+^x!Q%T!Q![JU![!c%T!c!}JU!}#R%T#R#SJU#S#T%T#T#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUk!)uV&n`&hZOr%Trs!*[s#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!*aV&n`Or%Trs!*vs#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!*}T&n`&jZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!+eV&n`&gZOw%Twx!+zx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!,PV&n`Ow%Twx!,fx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!,mT&n`&iZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To!-Vi&n`&YS%uZOr%TrsNWsw%Twx! vx!Q%T!Q![JU![!c%T!c!dJU!d!eLx!e!hJU!h!i!(`!i!}JU!}#R%T#R#SJU#S#T%T#T#UJU#U#VLx#V#YJU#Y#Z!(`#Z#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUo!.}a&n`&YS%uZOr%Trs)Ysw%Twx.Ux!Q%T!Q![JU![!c%T!c!}JU!}#R%T#R#SJU#S#T%T#T#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUk!0ZT!XZ&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc!0qT!WR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tj!1XV%kQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%T~!1sO!]~k!1zV%jR&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%T~!2fO![~i!2mT%tX&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%T",tokenizers:[_te,xte,Ote,Ete,0,1,2,3,4],topRules:{Script:[0,5]},specialized:[{term:221,get:n=>Pte[n]||-1}],tokenPrec:7668}),XC=new JX,HV=new Set(["Script","Body","FunctionDefinition","ClassDefinition","LambdaExpression","ForStatement","MatchClause"]);function Zd(n){return(e,t,r)=>{if(r)return!1;let i=e.node.getChild("VariableName");return i&&t(i,n),!0}}const Rte={FunctionDefinition:Zd("function"),ClassDefinition:Zd("class"),ForStatement(n,e,t){if(t){for(let r=n.node.firstChild;r;r=r.nextSibling)if(r.name=="VariableName")e(r,"variable");else if(r.name=="in")break}},ImportStatement(n,e){var t,r;let{node:i}=n,s=((t=i.firstChild)===null||t===void 0?void 0:t.name)=="from";for(let o=i.getChild("import");o;o=o.nextSibling)o.name=="VariableName"&&((r=o.nextSibling)===null||r===void 0?void 0:r.name)!="as"&&e(o,s?"variable":"namespace")},AssignStatement(n,e){for(let t=n.node.firstChild;t;t=t.nextSibling)if(t.name=="VariableName")e(t,"variable");else if(t.name==":"||t.name=="AssignOp")break},ParamList(n,e){for(let t=null,r=n.node.firstChild;r;r=r.nextSibling)r.name=="VariableName"&&(!t||!/\*|AssignOp/.test(t.name))&&e(r,"variable"),t=r},CapturePattern:Zd("variable"),AsPattern:Zd("variable"),__proto__:null};function GV(n,e){let t=XC.get(e);if(t)return t;let r=[],i=!0;function s(o,a){let l=n.sliceString(o.from,o.to);r.push({label:l,type:a})}return e.cursor(St.IncludeAnonymous).iterate(o=>{if(o.name){let a=Rte[o.name];if(a&&a(o,s,i)||!i&&HV.has(o.name))return!1;i=!1}else if(o.to-o.from>8192){for(let a of GV(n,o.node))r.push(a);return!1}}),XC.set(e,r),r}const KC=/^[\w\xa1-\uffff][\w\d\xa1-\uffff]*$/,XV=["String","FormatString","Comment","PropertyName"];function Ite(n){let e=It(n.state).resolveInner(n.pos,-1);if(XV.indexOf(e.name)>-1)return null;let t=e.name=="VariableName"||e.to-e.from<20&&KC.test(n.state.sliceDoc(e.from,e.to));if(!t&&!n.explicit)return null;let r=[];for(let i=e;i;i=i.parent)HV.has(i.name)&&(r=r.concat(GV(n.state.doc,i)));return{options:r,from:t?e.from:n.pos,validFor:KC}}const Nte=["__annotations__","__builtins__","__debug__","__doc__","__import__","__name__","__loader__","__package__","__spec__","False","None","True"].map(n=>({label:n,type:"constant"})).concat(["ArithmeticError","AssertionError","AttributeError","BaseException","BlockingIOError","BrokenPipeError","BufferError","BytesWarning","ChildProcessError","ConnectionAbortedError","ConnectionError","ConnectionRefusedError","ConnectionResetError","DeprecationWarning","EOFError","Ellipsis","EncodingWarning","EnvironmentError","Exception","FileExistsError","FileNotFoundError","FloatingPointError","FutureWarning","GeneratorExit","IOError","ImportError","ImportWarning","IndentationError","IndexError","InterruptedError","IsADirectoryError","KeyError","KeyboardInterrupt","LookupError","MemoryError","ModuleNotFoundError","NameError","NotADirectoryError","NotImplemented","NotImplementedError","OSError","OverflowError","PendingDeprecationWarning","PermissionError","ProcessLookupError","RecursionError","ReferenceError","ResourceWarning","RuntimeError","RuntimeWarning","StopAsyncIteration","StopIteration","SyntaxError","SyntaxWarning","SystemError","SystemExit","TabError","TimeoutError","TypeError","UnboundLocalError","UnicodeDecodeError","UnicodeEncodeError","UnicodeError","UnicodeTranslateError","UnicodeWarning","UserWarning","ValueError","Warning","ZeroDivisionError"].map(n=>({label:n,type:"type"}))).concat(["bool","bytearray","bytes","classmethod","complex","float","frozenset","int","list","map","memoryview","object","range","set","staticmethod","str","super","tuple","type"].map(n=>({label:n,type:"class"}))).concat(["abs","aiter","all","anext","any","ascii","bin","breakpoint","callable","chr","compile","delattr","dict","dir","divmod","enumerate","eval","exec","exit","filter","format","getattr","globals","hasattr","hash","help","hex","id","input","isinstance","issubclass","iter","len","license","locals","max","min","next","oct","open","ord","pow","print","property","quit","repr","reversed","round","setattr","slice","sorted","sum","vars","zip"].map(n=>({label:n,type:"function"}))),Dte=[Ai("def ${name}(${params}):\n	${}",{label:"def",detail:"function",type:"keyword"}),Ai("for ${name} in ${collection}:\n	${}",{label:"for",detail:"loop",type:"keyword"}),Ai("while ${}:\n	${}",{label:"while",detail:"loop",type:"keyword"}),Ai("try:\n	${}\nexcept ${error}:\n	${}",{label:"try",detail:"/ except block",type:"keyword"}),Ai(`if \${}:
	
`,{label:"if",detail:"block",type:"keyword"}),Ai("if ${}:\n	${}\nelse:\n	${}",{label:"if",detail:"/ else block",type:"keyword"}),Ai("class ${name}:\n	def __init__(self, ${params}):\n			${}",{label:"class",detail:"definition",type:"keyword"}),Ai("import ${module}",{label:"import",detail:"statement",type:"keyword"}),Ai("from ${module} import ${names}",{label:"from",detail:"import",type:"keyword"})],Mte=QJ(XV,TV(Nte.concat(Dte)));function iv(n){let{node:e,pos:t}=n,r=n.lineIndent(t,-1),i=null;for(;;){let s=e.childBefore(t);if(s)if(s.name=="Comment")t=s.from;else if(s.name=="Body"||s.name=="MatchBody")n.baseIndentFor(s)+n.unit<=r&&(i=s),e=s;else if(s.name=="MatchClause")e=s;else if(s.type.is("Statement"))e=s;else break;else break}return i}function sv(n,e){let t=n.baseIndentFor(e),r=n.lineAt(n.pos,-1),i=r.from+r.text.length;return/^\s*($|#)/.test(r.text)&&n.node.to<i+100&&!/\S/.test(n.state.sliceDoc(i,n.node.to))&&n.lineIndent(n.pos,-1)<=t||/^\s*(else:|elif |except |finally:|case\s+[^=:]+:)/.test(n.textAfter)&&n.lineIndent(n.pos,-1)>t?null:t+n.unit}const ov=Xm.define({name:"python",parser:Ate.configure({props:[wL.add({Body:n=>{var e;let t=iv(n);return(e=sv(n,t||n.node))!==null&&e!==void 0?e:n.continue()},MatchBody:n=>{var e;let t=iv(n);return(e=sv(n,t||n.node))!==null&&e!==void 0?e:n.continue()},IfStatement:n=>/^\s*(else:|elif )/.test(n.textAfter)?n.baseIndent:n.continue(),"ForStatement WhileStatement":n=>/^\s*else:/.test(n.textAfter)?n.baseIndent:n.continue(),TryStatement:n=>/^\s*(except |finally:|else:)/.test(n.textAfter)?n.baseIndent:n.continue(),MatchStatement:n=>/^\s*case /.test(n.textAfter)?n.baseIndent+n.unit:n.continue(),"TupleExpression ComprehensionExpression ParamList ArgList ParenthesizedExpression":U0({closing:")"}),"DictionaryExpression DictionaryComprehensionExpression SetExpression SetComprehensionExpression":U0({closing:"}"}),"ArrayExpression ArrayComprehensionExpression":U0({closing:"]"}),MemberExpression:n=>n.baseIndent+n.unit,"String FormatString":()=>null,Script:n=>{var e;let t=iv(n);return(e=t&&sv(n,t))!==null&&e!==void 0?e:n.continue()}}),SL.add({"ArrayExpression DictionaryExpression SetExpression TupleExpression":bK,Body:(n,e)=>({from:n.from+1,to:n.to-(n.to==e.doc.length?0:1)}),"String FormatString":(n,e)=>({from:e.doc.lineAt(n.from).to,to:n.to})})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"'''",'"""'],stringPrefixes:["f","fr","rf","r","u","b","br","rb","F","FR","RF","R","U","B","BR","RB"]},commentTokens:{line:"#"},indentOnInput:/^\s*([\}\]\)]|else:|elif |except |finally:|case\s+[^:]*:?)$/}});function Lte(){return new fK(ov,[ov.data.of({autocomplete:Ite}),ov.data.of({autocomplete:Mte})])}const YC=async(n,e,t)=>{const r=ry(bf,"users",n),i=await RD(r);if(i.exists()){const o=i.data().progress||[],a=new Date().toISOString().split("T")[0],l=o.findIndex(d=>d.date===a);l!==-1?o[l]={date:a,status:t}:o.push({date:a,status:t});let c=0;const u=o.filter(d=>d.status==="solved").map(d=>new Date(d.date)).sort((d,p)=>p.getTime()-d.getTime());if(u.length>0){c=1;for(let d=1;d<u.length&&(u[d-1].getTime()-u[d].getTime())/864e5===1;d++)c++}const h=o.filter(d=>d.status==="solved").length;await N7(r,{progress:o,challengesSolved:h,streak:c})}};var Qp={linear:function(n,e,t,r){var i=t-e;return i*n/r+e},easeInQuad:function(n,e,t,r){var i=t-e;return i*(n/=r)*n+e},easeOutQuad:function(n,e,t,r){var i=t-e;return-i*(n/=r)*(n-2)+e},easeInOutQuad:function(n,e,t,r){var i=t-e;return(n/=r/2)<1?i/2*n*n+e:-i/2*(--n*(n-2)-1)+e},easeInCubic:function(n,e,t,r){var i=t-e;return i*(n/=r)*n*n+e},easeOutCubic:function(n,e,t,r){var i=t-e;return i*((n=n/r-1)*n*n+1)+e},easeInOutCubic:function(n,e,t,r){var i=t-e;return(n/=r/2)<1?i/2*n*n*n+e:i/2*((n-=2)*n*n+2)+e},easeInQuart:function(n,e,t,r){var i=t-e;return i*(n/=r)*n*n*n+e},easeOutQuart:function(n,e,t,r){var i=t-e;return-i*((n=n/r-1)*n*n*n-1)+e},easeInOutQuart:function(n,e,t,r){var i=t-e;return(n/=r/2)<1?i/2*n*n*n*n+e:-i/2*((n-=2)*n*n*n-2)+e},easeInQuint:function(n,e,t,r){var i=t-e;return i*(n/=r)*n*n*n*n+e},easeOutQuint:function(n,e,t,r){var i=t-e;return i*((n=n/r-1)*n*n*n*n+1)+e},easeInOutQuint:function(n,e,t,r){var i=t-e;return(n/=r/2)<1?i/2*n*n*n*n*n+e:i/2*((n-=2)*n*n*n*n+2)+e},easeInSine:function(n,e,t,r){var i=t-e;return-i*Math.cos(n/r*(Math.PI/2))+i+e},easeOutSine:function(n,e,t,r){var i=t-e;return i*Math.sin(n/r*(Math.PI/2))+e},easeInOutSine:function(n,e,t,r){var i=t-e;return-i/2*(Math.cos(Math.PI*n/r)-1)+e},easeInExpo:function(n,e,t,r){var i=t-e;return n==0?e:i*Math.pow(2,10*(n/r-1))+e},easeOutExpo:function(n,e,t,r){var i=t-e;return n==r?e+i:i*(-Math.pow(2,-10*n/r)+1)+e},easeInOutExpo:function(n,e,t,r){var i=t-e;return n===0?e:n===r?e+i:(n/=r/2)<1?i/2*Math.pow(2,10*(n-1))+e:i/2*(-Math.pow(2,-10*--n)+2)+e},easeInCirc:function(n,e,t,r){var i=t-e;return-i*(Math.sqrt(1-(n/=r)*n)-1)+e},easeOutCirc:function(n,e,t,r){var i=t-e;return i*Math.sqrt(1-(n=n/r-1)*n)+e},easeInOutCirc:function(n,e,t,r){var i=t-e;return(n/=r/2)<1?-i/2*(Math.sqrt(1-n*n)-1)+e:i/2*(Math.sqrt(1-(n-=2)*n)+1)+e},easeInElastic:function(n,e,t,r){var i=t-e,s,o,a;return a=1.70158,o=0,s=i,n===0?e:(n/=r)===1?e+i:(o||(o=r*.3),s<Math.abs(i)?(s=i,a=o/4):a=o/(2*Math.PI)*Math.asin(i/s),-(s*Math.pow(2,10*(n-=1))*Math.sin((n*r-a)*(2*Math.PI)/o))+e)},easeOutElastic:function(n,e,t,r){var i=t-e,s,o,a;return a=1.70158,o=0,s=i,n===0?e:(n/=r)===1?e+i:(o||(o=r*.3),s<Math.abs(i)?(s=i,a=o/4):a=o/(2*Math.PI)*Math.asin(i/s),s*Math.pow(2,-10*n)*Math.sin((n*r-a)*(2*Math.PI)/o)+i+e)},easeInOutElastic:function(n,e,t,r){var i=t-e,s,o,a;return a=1.70158,o=0,s=i,n===0?e:(n/=r/2)===2?e+i:(o||(o=r*(.3*1.5)),s<Math.abs(i)?(s=i,a=o/4):a=o/(2*Math.PI)*Math.asin(i/s),n<1?-.5*(s*Math.pow(2,10*(n-=1))*Math.sin((n*r-a)*(2*Math.PI)/o))+e:s*Math.pow(2,-10*(n-=1))*Math.sin((n*r-a)*(2*Math.PI)/o)*.5+i+e)},easeInBack:function(n,e,t,r,i){var s=t-e;return i===void 0&&(i=1.70158),s*(n/=r)*n*((i+1)*n-i)+e},easeOutBack:function(n,e,t,r,i){var s=t-e;return i===void 0&&(i=1.70158),s*((n=n/r-1)*n*((i+1)*n+i)+1)+e},easeInOutBack:function(n,e,t,r,i){var s=t-e;return i===void 0&&(i=1.70158),(n/=r/2)<1?s/2*(n*n*(((i*=1.525)+1)*n-i))+e:s/2*((n-=2)*n*(((i*=1.525)+1)*n+i)+2)+e},easeInBounce:function(n,e,t,r){var i=t-e,s;return s=Qp.easeOutBounce(r-n,0,i,r),i-s+e},easeOutBounce:function(n,e,t,r){var i=t-e;return(n/=r)<1/2.75?i*(7.5625*n*n)+e:n<2/2.75?i*(7.5625*(n-=1.5/2.75)*n+.75)+e:n<2.5/2.75?i*(7.5625*(n-=2.25/2.75)*n+.9375)+e:i*(7.5625*(n-=2.625/2.75)*n+.984375)+e},easeInOutBounce:function(n,e,t,r){var i=t-e,s;return n<r/2?(s=Qp.easeInBounce(n*2,0,i,r),s*.5+e):(s=Qp.easeOutBounce(n*2-r,0,i,r),s*.5+i*.5+e)}},Vte=Qp;function Fte(n){return n*Math.PI/180}function jn(n,e){return n+Math.random()*(e-n)}function Qte(n,e){return Math.floor(n+Math.random()*(e-n+1))}var rh;(function(n){n[n.Circle=0]="Circle",n[n.Square=1]="Square",n[n.Strip=2]="Strip"})(rh||(rh={}));var As;(function(n){n[n.Positive=1]="Positive",n[n.Negative=-1]="Negative"})(As||(As={}));const $te=1e3/60;class jte{constructor(e,t,r,i){this.getOptions=t;const{colors:s,initialVelocityX:o,initialVelocityY:a}=this.getOptions();this.context=e,this.x=r,this.y=i,this.w=jn(5,20),this.h=jn(5,20),this.radius=jn(5,10),this.vx=typeof o=="number"?jn(-o,o):jn(o.min,o.max),this.vy=typeof a=="number"?jn(-a,0):jn(a.min,a.max),this.shape=Qte(0,2),this.angle=Fte(jn(0,360)),this.angularSpin=jn(-.2,.2),this.color=s[Math.floor(Math.random()*s.length)],this.rotateY=jn(0,1),this.rotationDirection=jn(0,1)?As.Positive:As.Negative}update(e){const{gravity:t,wind:r,friction:i,opacity:s,drawShape:o}=this.getOptions(),a=e/$te;this.x+=this.vx*a,this.y+=this.vy*a,this.vy+=t*a,this.vx+=r*a,this.vx*=i**a,this.vy*=i**a,this.rotateY>=1&&this.rotationDirection===As.Positive?this.rotationDirection=As.Negative:this.rotateY<=-1&&this.rotationDirection===As.Negative&&(this.rotationDirection=As.Positive);const l=.1*this.rotationDirection*a;if(this.rotateY+=l,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=s,this.context.lineCap="round",this.context.lineWidth=2,o&&typeof o=="function")o.call(this,this.context);else switch(this.shape){case rh.Circle:{this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break}case rh.Square:{this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break}case rh.Strip:{this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h);break}}this.context.closePath(),this.context.restore()}}class zte{constructor(e,t){this.x=0,this.y=0,this.w=0,this.h=0,this.lastNumberOfPieces=0,this.tweenProgress=0,this.tweenFrom=0,this.particles=[],this.particlesGenerated=0,this.removeParticleAt=i=>{this.particles.splice(i,1)},this.getParticle=()=>{const i=jn(this.x,this.w+this.x),s=jn(this.y,this.h+this.y);return new jte(this.context,this.getOptions,i,s)},this.animate=i=>{const{canvas:s,context:o,particlesGenerated:a,lastNumberOfPieces:l}=this,{run:c,recycle:u,numberOfPieces:h,debug:d,tweenFunction:p,tweenDuration:g}=this.getOptions();if(!c)return!1;const y=this.particles.length,w=u?y:a;if(w<h){l!==h&&(this.tweenProgress=0,this.tweenFrom=w,this.lastNumberOfPieces=h),this.tweenProgress=Math.min(g,Math.max(0,this.tweenProgress+i));const v=p(this.tweenProgress,this.tweenFrom,h,g),O=Math.round(v-w);for(let S=0;S<O;S++)this.particles.push(this.getParticle());this.particlesGenerated+=O}d&&(o.font="12px sans-serif",o.fillStyle="#333",o.textAlign="right",o.fillText(`Particles: ${y}`,s.width-10,s.height-20));for(let v=this.particles.length-1;v>=0;v--){const O=this.particles[v];O.update(i),(O.y>s.height||O.y<-100||O.x>s.width+100||O.x<-100)&&(u&&w<=h?this.particles[v]=this.getParticle():this.removeParticleAt(v))}return y>0||w<h},this.canvas=e;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.getOptions=t}}const LS={width:typeof window<"u"?window.innerWidth:300,height:typeof window<"u"?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:Vte.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0};class Bte{constructor(e,t){this.lastFrameTime=0,this.setOptionsWithDefaults=i=>{const s={confettiSource:{x:0,y:0,w:this.canvas.width,h:0}};this._options={...s,...LS,...i},Object.assign(this,i.confettiSource)},this.update=(i=0)=>{const{options:{run:s,onConfettiComplete:o,frameRate:a},canvas:l,context:c}=this,u=Math.min(i-this.lastFrameTime,50);if(a&&u<1e3/a){this.rafId=requestAnimationFrame(this.update);return}this.lastFrameTime=i-(a?u%a:0),s&&(c.fillStyle="white",c.clearRect(0,0,l.width,l.height)),this.generator.animate(u)?this.rafId=requestAnimationFrame(this.update):(o&&typeof o=="function"&&this.generator.particlesGenerated>0&&o.call(this,this),this._options.run=!1)},this.reset=()=>{this.generator&&this.generator.particlesGenerated>0&&(this.generator.particlesGenerated=0,this.generator.particles=[],this.generator.lastNumberOfPieces=0)},this.stop=()=>{this.options={run:!1},this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=void 0)},this.canvas=e;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.generator=new zte(this.canvas,()=>this.options),this.options=t,this.update()}get options(){return this._options}set options(e){var i,s;const t=(i=this._options)==null?void 0:i.run,r=(s=this._options)==null?void 0:s.recycle;this.setOptionsWithDefaults(e),this.generator&&(Object.assign(this.generator,this.options.confettiSource),typeof e.recycle=="boolean"&&e.recycle&&r===!1&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),typeof e.run=="boolean"&&e.run&&t===!1&&this.update()}}const Ute=H.createRef();class VS extends H.Component{constructor(e){super(e),this.canvas=H.createRef(),this.canvas=e.canvasRef||Ute}componentDidMount(){if(this.canvas.current){const e=av(this.props)[0];this.confetti=new Bte(this.canvas.current,e)}}componentDidUpdate(){const e=av(this.props)[0];this.confetti&&(this.confetti.options=e)}componentWillUnmount(){this.confetti&&this.confetti.stop(),this.confetti=void 0}render(){const[e,t]=av(this.props),r={zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0,...t.style};return A.jsx("canvas",{width:e.width,height:e.height,ref:this.canvas,...t,style:r})}}VS.defaultProps={...LS};VS.displayName="ReactConfetti";function av(n){const e={},t={},r={},i=[...Object.keys(LS),"confettiSource","drawShape","onConfettiComplete","frameRate"],s=["canvasRef"];for(const o in n){const a=n[o];i.includes(o)?e[o]=a:s.includes(o)?s[o]=a:r[o]=a}return[e,r,t]}const Wte=H.forwardRef((n,e)=>A.jsx(VS,{canvasRef:e,...n})),qte=n=>{const e=k.useRef(n);return k.useEffect(()=>{e.current=n}),e},Hte=(n,e=100,t=!1)=>{const r=qte(n),i=k.useRef(),s=[e,t,r];function o(){i.current&&clearTimeout(i.current),i.current=void 0}k.useEffect(()=>o,s);function a(){i.current=void 0}return k.useCallback(function(){const l=arguments,{current:c}=i;if(c===void 0&&t)return i.current=setTimeout(a,e),r.current.apply(null,l);c&&clearTimeout(c),i.current=setTimeout(()=>{i.current=void 0,r.current.apply(null,l)},e)},s)},Gte=(n,e,t)=>{const r=k.useState(n);return[r[0],Hte(r[1],e,t)]};function lv(n,e,t,r){const i=k.useRef(t),s=k.useRef(r);k.useEffect(()=>{i.current=t,s.current=r}),k.useEffect(()=>{const o=n&&"current"in n?n.current:n;if(!o)return;let a=0;function l(...u){a||i.current.apply(this,u)}o.addEventListener(e,l);const c=s.current;return()=>{a=1,o.removeEventListener(e,l),c&&c()}},[n,e])}const Xte={},ih=typeof window>"u"?null:window,Kte=ih&&typeof ih.visualViewport<"u"?ih.visualViewport:null,JC=()=>[document.documentElement.clientWidth,document.documentElement.clientHeight],Yte=function(n){n===void 0&&(n=Xte);const{wait:e,leading:t,initialWidth:r=0,initialHeight:i=0}=n,[s,o]=Gte(typeof document>"u"?[r,i]:JC,e,t),a=()=>o(JC);return lv(ih,"resize",a),lv(Kte,"resize",a),lv(ih,"orientationchange",a),s};function Jte(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var FS=Jte,Zte=typeof Zf=="object"&&Zf&&Zf.Object===Object&&Zf,ene=Zte,tne=ene,nne=typeof self=="object"&&self&&self.Object===Object&&self,rne=tne||nne||Function("return this")(),KV=rne,ine=KV,sne=function(){return ine.Date.now()},one=sne,ane=/\s/;function lne(n){for(var e=n.length;e--&&ane.test(n.charAt(e)););return e}var cne=lne,une=cne,hne=/^\s+/;function fne(n){return n&&n.slice(0,une(n)+1).replace(hne,"")}var dne=fne,pne=KV,mne=pne.Symbol,YV=mne,ZC=YV,JV=Object.prototype,gne=JV.hasOwnProperty,yne=JV.toString,wu=ZC?ZC.toStringTag:void 0;function vne(n){var e=gne.call(n,wu),t=n[wu];try{n[wu]=void 0;var r=!0}catch{}var i=yne.call(n);return r&&(e?n[wu]=t:delete n[wu]),i}var wne=vne,One=Object.prototype,xne=One.toString;function Sne(n){return xne.call(n)}var bne=Sne,eP=YV,Tne=wne,_ne=bne,Ene="[object Null]",kne="[object Undefined]",tP=eP?eP.toStringTag:void 0;function Cne(n){return n==null?n===void 0?kne:Ene:tP&&tP in Object(n)?Tne(n):_ne(n)}var Pne=Cne;function Ane(n){return n!=null&&typeof n=="object"}var Rne=Ane,Ine=Pne,Nne=Rne,Dne="[object Symbol]";function Mne(n){return typeof n=="symbol"||Nne(n)&&Ine(n)==Dne}var Lne=Mne,Vne=dne,nP=FS,Fne=Lne,rP=NaN,Qne=/^[-+]0x[0-9a-f]+$/i,$ne=/^0b[01]+$/i,jne=/^0o[0-7]+$/i,zne=parseInt;function Bne(n){if(typeof n=="number")return n;if(Fne(n))return rP;if(nP(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=nP(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=Vne(n);var t=$ne.test(n);return t||jne.test(n)?zne(n.slice(2),t?2:8):Qne.test(n)?rP:+n}var Une=Bne,Wne=FS,cv=one,iP=Une,qne="Expected a function",Hne=Math.max,Gne=Math.min;function Xne(n,e,t){var r,i,s,o,a,l,c=0,u=!1,h=!1,d=!0;if(typeof n!="function")throw new TypeError(qne);e=iP(e)||0,Wne(t)&&(u=!!t.leading,h="maxWait"in t,s=h?Hne(iP(t.maxWait)||0,e):s,d="trailing"in t?!!t.trailing:d);function p(M){var b=r,T=i;return r=i=void 0,c=M,o=n.apply(T,b),o}function g(M){return c=M,a=setTimeout(v,e),u?p(M):o}function y(M){var b=M-l,T=M-c,_=e-b;return h?Gne(_,s-T):_}function w(M){var b=M-l,T=M-c;return l===void 0||b>=e||b<0||h&&T>=s}function v(){var M=cv();if(w(M))return O(M);a=setTimeout(v,y(M))}function O(M){return a=void 0,d&&r?p(M):(r=i=void 0,o)}function S(){a!==void 0&&clearTimeout(a),c=0,r=l=i=a=void 0}function E(){return a===void 0?o:O(cv())}function R(){var M=cv(),b=w(M);if(r=arguments,i=this,l=M,b){if(a===void 0)return g(l);if(h)return clearTimeout(a),a=setTimeout(v,e),p(l)}return a===void 0&&(a=setTimeout(v,e)),o}return R.cancel=S,R.flush=E,R}var ZV=Xne;const Kne=fg(ZV);var Yne=ZV,Jne=FS,Zne="Expected a function";function ere(n,e,t){var r=!0,i=!0;if(typeof n!="function")throw new TypeError(Zne);return Jne(t)&&(r="leading"in t?!!t.leading:r,i="trailing"in t?!!t.trailing:i),Yne(n,e,{leading:r,maxWait:e,trailing:i})}var tre=ere;const nre=fg(tre),rre=(n,e,t,r)=>{switch(e){case"debounce":return Kne(n,t,r);case"throttle":return nre(n,t,r);default:return n}},ire=n=>{const e=k.useRef(n);return k.useEffect(()=>{e.current=n}),k.useMemo(()=>(...t)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...t)},[])},sre=n=>{const[e,t]=k.useState((n==null?void 0:n.current)||null);return n&&setTimeout(()=>{n.current!==e&&t(n.current)},0),{refProxy:k.useMemo(()=>new Proxy(i=>{i!==e&&t(i)},{get(i,s){return s==="current"?e:i[s]},set(i,s,o){return s==="current"?t(o):i[s]=o,!0}}),[e]),refElement:e,setRefElement:t}},ore=(n,e)=>e==="border-box"?{width:n.borderBoxSize[0].inlineSize,height:n.borderBoxSize[0].blockSize}:e==="content-box"?{width:n.contentBoxSize[0].inlineSize,height:n.contentBoxSize[0].blockSize}:{width:n.contentRect.width,height:n.contentRect.height};function are({skipOnMount:n=!1,refreshMode:e,refreshRate:t=1e3,refreshOptions:r,handleWidth:i=!0,handleHeight:s=!0,targetRef:o,observerOptions:a,onResize:l}={}){const c=k.useRef(n),u=ire(l),[h,d]=k.useState({width:void 0,height:void 0}),{refProxy:p,refElement:g}=sre(o),{box:y}=a||{},w=k.useCallback(O=>{if(!i&&!s)return;if(c.current){c.current=!1;return}const S=(E,R)=>i&&E.width!==R.width||s&&E.height!==R.height;O.forEach(E=>{const R=ore(E,y);d(M=>S(M,R)?(u==null||u({width:R.width,height:R.height,entry:E}),R):M)})},[i,s,c,y]),v=k.useCallback(rre(w,e,t,r),[w,e,t,r]);return k.useEffect(()=>{let O;return g?(O=new window.ResizeObserver(v),O.observe(g,a)):(h.width||h.height)&&(u==null||u({width:null,height:null,entry:null}),d({width:void 0,height:void 0})),()=>{var S,E,R;(S=O==null?void 0:O.disconnect)===null||S===void 0||S.call(O),(R=(E=v).cancel)===null||R===void 0||R.call(E)}},[v,g]),Object.assign({ref:p},h)}const lre=()=>{const{user:n,isAuthenticated:e}=Qc(),t=Mo(),{toast:r}=Mx(),[i,s]=k.useState(null),[o,a]=k.useState("unsolved"),[l,c]=k.useState(""),[u,h]=k.useState(""),[d,p]=k.useState(null),[g,y]=k.useState(!0),[w,v]=k.useState(!1),[O]=Yte(),{height:S=300,ref:E}=are({handleHeight:!0});k.useEffect(()=>{e||t("/login")},[e,t]),k.useEffect(()=>{(async()=>{const _=await z7();s(_),_&&c(_.code),y(!1)})(),d||(async()=>{console.log("Loading Pyodide...");const _=await window.loadPyodide({indexURL:"https://cdn.jsdelivr.net/pyodide/v0.21.3/full/"});console.log("Pyodide loaded."),p(_)})()},[d]),k.useEffect(()=>{(async()=>{if(n&&i){const T=await B7(n.uid,i.id);a(T)}})()},[n,i]);const R=async()=>{if(!d){h("⚠️ Pyodide not loaded yet...");return}if(!i){h("⚠️ No challenge loaded.");return}let b="",T=!0;try{d.runPython(l)}catch(_){h(`❌ Error in your code definition: ${_.message}`);return}for(const _ of i.testCases)try{if(!_.input){b+=`⚠️ Skipped a test with missing input.
`;continue}const C=d.runPython(`str(${_.input})`);C===_.expectedOutput?b+=`✅ Passed: ${_.input} → ${C}
`:(b+=`❌ Failed: ${_.input} → Got ${C}, expected ${_.expectedOutput}
`,T=!1)}catch(C){b+=`❌ Error while testing: ${_.input||"undefined"}
${C.message}
`,T=!1}h(b),h(b),i&&n&&(T&&i.testCases.length>0?(v(!0),setTimeout(()=>v(!1),1e4),await YC(n.uid,i.id,"solved"),a("solved"),r({title:"Challenge Solved 🎉"})):(await YC(n.uid,i.id,"unsolved"),a("unsolved"),r({title:"Some tests failed. Keep trying!"})))},M=()=>{const b=new Date,T=new Date;T.setHours(24,0,0,0);const _=T.getTime()-b.getTime(),C=Math.floor(_/(1e3*60*60)),D=Math.floor(_%(1e3*60*60)/(1e3*60));return`${C}h ${D}m left`};return g?A.jsx("div",{className:"min-h-screen flex items-center justify-center",children:A.jsx("p",{children:"Loading today's challenge..."})}):i?A.jsxs("div",{className:"relative min-h-screen",children:[w&&A.jsx(Wte,{width:O,height:document.documentElement.scrollHeight,recycle:!1,numberOfPieces:400}),A.jsx(FD,{}),A.jsxs("div",{className:"pt-24 p-6 max-w-5xl mx-auto",children:[A.jsxs("div",{className:"text-center mb-8",children:[A.jsx("h1",{className:"text-4xl font-bold flex items-center justify-center gap-4",children:"✨ Today's Challenge"}),A.jsxs("div",{className:"flex items-center justify-center gap-2 mt-4",children:[A.jsx("h2",{className:"text-2xl font-semibold",children:i.title}),A.jsx("span",{className:`px-2 py-1 rounded-full text-sm font-medium
        ${i.difficulty==="Easy"?"bg-green-100 text-green-700":""}
        ${i.difficulty==="Medium"?"bg-orange-100 text-orange-700":""}
        ${i.difficulty==="Hard"?"bg-red-100 text-red-700":""}
      `,children:i.difficulty})]}),A.jsx("div",{className:"mt-2 flex justify-center items-center gap-4",children:A.jsx("span",{className:"text-gray-600",children:M()})}),A.jsx("p",{className:"mt-4 text-gray-700",children:i.description})]}),A.jsx(_o,{className:"mb-4",children:A.jsxs(Eo,{children:[A.jsx("div",{className:"mb-4",ref:E,children:A.jsx(QV,{value:l,height:`${S}px`,extensions:[Lte()],onChange:b=>c(b)})}),A.jsx("div",{className:"flex gap-4",children:A.jsx(ts,{onClick:R,children:"Run Code"})}),u&&A.jsx("pre",{className:"bg-gray-100 dark:bg-gray-800 mt-4 p-4 rounded text-sm whitespace-pre-wrap",children:u})]})})]})]}):A.jsx("div",{className:"min-h-screen flex items-center justify-center",children:A.jsx("p",{children:"⚠️ No challenge available today."})})};var QS="Progress",$S=100,[cre,Nre]=lf(QS),[ure,hre]=cre(QS),eF=k.forwardRef((n,e)=>{const{__scopeProgress:t,value:r=null,max:i,getValueLabel:s=fre,...o}=n;(i||i===0)&&!sP(i)&&console.error(dre(`${i}`,"Progress"));const a=sP(i)?i:$S;r!==null&&!oP(r,a)&&console.error(pre(`${r}`,"Progress"));const l=oP(r,a)?r:null,c=hg(l)?s(l,a):void 0;return A.jsx(ure,{scope:t,value:l,max:a,children:A.jsx(Ht.div,{"aria-valuemax":a,"aria-valuemin":0,"aria-valuenow":hg(l)?l:void 0,"aria-valuetext":c,role:"progressbar","data-state":rF(l,a),"data-value":l??void 0,"data-max":a,...o,ref:e})})});eF.displayName=QS;var tF="ProgressIndicator",nF=k.forwardRef((n,e)=>{const{__scopeProgress:t,...r}=n,i=hre(tF,t);return A.jsx(Ht.div,{"data-state":rF(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...r,ref:e})});nF.displayName=tF;function fre(n,e){return`${Math.round(n/e*100)}%`}function rF(n,e){return n==null?"indeterminate":n===e?"complete":"loading"}function hg(n){return typeof n=="number"}function sP(n){return hg(n)&&!isNaN(n)&&n>0}function oP(n,e){return hg(n)&&!isNaN(n)&&n<=e&&n>=0}function dre(n,e){return`Invalid prop \`max\` of value \`${n}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${$S}\`.`}function pre(n,e){return`Invalid prop \`value\` of value \`${n}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${$S} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var iF=eF,mre=nF;const $O=k.forwardRef(({className:n,value:e,...t},r)=>A.jsx(iF,{ref:r,className:Gt("relative h-4 w-full overflow-hidden rounded-full bg-secondary",n),...t,children:A.jsx(mre,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));$O.displayName=iF.displayName;const gre=({solved:n,unsolved:e,streak:t,total:r})=>{const i=r>0?Math.round(n/r*100):0,s=r>0?Math.round(e/r*100):0;return A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[A.jsxs(_o,{children:[A.jsx(Ra,{className:"pb-2",children:A.jsx(Ia,{className:"text-lg",children:"Challenge Stats"})}),A.jsx(Eo,{className:"space-y-6",children:A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{className:"flex items-center",children:[A.jsx(iI,{className:"h-5 w-5 text-success mr-2"}),A.jsx("span",{children:"Solved"})]}),A.jsx("span",{className:"font-medium",children:n})]}),A.jsx($O,{value:i,className:"h-2 bg-gray-200"}),A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{className:"flex items-center",children:[A.jsx(r$,{className:"h-5 w-5 text-danger mr-2"}),A.jsx("span",{children:"Unsolved"})]}),A.jsx("span",{className:"font-medium",children:e})]}),A.jsx($O,{value:s,className:"h-2 bg-gray-200"})]})})]}),A.jsxs(_o,{children:[A.jsx(Ra,{className:"pb-2",children:A.jsx(Ia,{className:"text-lg",children:"Current Streak"})}),A.jsx(Eo,{children:A.jsxs("div",{className:"flex flex-col items-center justify-center h-full py-6",children:[A.jsxs("div",{className:"flex items-center mb-2",children:[A.jsx(s$,{className:"h-8 w-8 text-warning mr-2 animate-pulse-subtle"}),A.jsx("span",{className:"text-3xl font-bold",children:t})]}),A.jsx("p",{className:"text-center text-muted-foreground",children:t===0?"Start your streak by solving today's challenge!":`${t} day${t!==1?"s":""} streak - keep it going!`})]})})]})]})},yre=()=>{var a;const{user:n,isAuthenticated:e}=Qc(),t=Mo(),[r,i]=k.useState({challengesSolved:0,streak:0,total:0}),[s,o]=k.useState(!0);return k.useEffect(()=>{e||t("/login")},[e,t]),k.useEffect(()=>{if(!n)return;const l=ry(bf,"users",n.uid),c=D7(l,u=>{if(u.exists()){const h=u.data();i({challengesSolved:h.challengesSolved||0,streak:h.streak||0,total:h.progress?h.progress.length:0})}o(!1)});return()=>c()},[n]),!e||!n||s?null:A.jsxs("div",{className:"min-h-screen bg-gray-50",children:[A.jsx(FD,{}),A.jsx("div",{className:"pt-20 pb-16",children:A.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[A.jsxs("div",{className:"mb-8 text-center",children:[A.jsxs("h1",{className:"text-3xl font-bold",children:["Welcome, ",(n==null?void 0:n.displayName)||((a=n==null?void 0:n.email)==null?void 0:a.split("@")[0])," 👋"]}),A.jsx("h2",{className:"text-2xl font-semibold mt-2 text-gray-700",children:"Your Dashboard"})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[A.jsxs(_o,{children:[A.jsxs(Ra,{className:"pb-2 flex flex-row items-center justify-between space-y-0",children:[A.jsx(Ia,{className:"text-sm font-medium",children:"Challenges Completed"}),A.jsx(ai,{className:"h-4 w-4 text-muted-foreground"})]}),A.jsxs(Eo,{children:[A.jsx("div",{className:"text-2xl font-bold",children:r.challengesSolved}),A.jsx("p",{className:"text-xs text-muted-foreground",children:r.total>0?`${Math.round(r.challengesSolved/r.total*100)}% completion rate`:"No challenges attempted yet"})]})]}),A.jsxs(_o,{children:[A.jsxs(Ra,{className:"pb-2 flex flex-row items-center justify-between space-y-0",children:[A.jsx(Ia,{className:"text-sm font-medium",children:"Time Remaining"}),A.jsx(i$,{className:"h-4 w-4 text-muted-foreground"})]}),A.jsxs(Eo,{children:[A.jsx("div",{className:"text-2xl font-bold",children:(()=>{const l=new Date,c=new Date;c.setHours(24,0,0,0);const u=c.getTime()-l.getTime(),h=Math.floor(u/(1e3*60*60)),d=Math.floor(u%(1e3*60*60)/(1e3*60));return`${h}h ${d}m`})()}),A.jsx("p",{className:"text-xs text-muted-foreground",children:"Until tomorrow's challenge"})]})]})]}),A.jsx(gre,{solved:r.challengesSolved,unsolved:r.total-r.challengesSolved,streak:r.streak,total:r.total}),A.jsx("div",{className:"mt-8 flex justify-center",children:A.jsxs(ts,{onClick:()=>t("/challenge"),className:"flex items-center",children:[A.jsx(ai,{className:"h-4 w-4 mr-2"}),"Today's Challenge"]})})]})})]})},vre=()=>{const n=Ic(),e=Mo();return k.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",n.pathname)},[n.pathname]),A.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50 px-4",children:[A.jsx("div",{className:"mb-6",children:A.jsx(ai,{className:"h-16 w-16 text-primary"})}),A.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),A.jsx("p",{className:"text-xl text-gray-600 mb-6",children:"Oops! Challenge not found"}),A.jsx("p",{className:"text-gray-500 mb-8 text-center max-w-md",children:"The coding challenge you're looking for doesn't exist or has been moved."}),A.jsx(ts,{onClick:()=>e("/"),className:"flex items-center gap-2",children:"Return to Home"})]})},wre=()=>{const[n,e]=k.useState(""),[t,r]=k.useState(""),[i,s]=k.useState(""),[o,a]=k.useState(""),{register:l}=Qc(),c=Mo(),[u,h]=k.useState(!1),d=async p=>{p.preventDefault(),a(""),h(!0);try{await l(n,i,t),c("/challenge")}catch(g){a(g.message||"Failed to register.")}h(!1)};return A.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50 px-4",children:A.jsxs("div",{className:"w-full max-w-md",children:[A.jsxs("div",{className:"text-center mb-8",children:[A.jsx("div",{className:"flex justify-center mb-2",children:A.jsx(ai,{className:"h-12 w-12 text-primary"})}),A.jsx("h1",{className:"text-3xl font-bold",children:"CodeForge"}),A.jsx("p",{className:"text-gray-600 mt-1",children:"One coding challenge every day"})]}),A.jsxs(_o,{children:[A.jsxs(Ra,{children:[A.jsx(Ia,{children:"Register"}),A.jsx(X1,{children:"Create a new account"})]}),A.jsxs("form",{onSubmit:d,children:[A.jsxs(Eo,{className:"space-y-4",children:[A.jsxs("div",{children:[A.jsx(Vl,{htmlFor:"name",children:"Name"}),A.jsx(Ll,{id:"name",type:"text",placeholder:"Your name",value:t,onChange:p=>r(p.target.value),required:!0})]}),o&&A.jsx("div",{className:"text-red-500 text-sm",children:o}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(Vl,{htmlFor:"email",children:"Email"}),A.jsx(Ll,{id:"email",type:"email",placeholder:"you@example.com",value:n,onChange:p=>e(p.target.value),required:!0})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(Vl,{htmlFor:"password",children:"Password"}),A.jsx(Ll,{id:"password",type:"password",placeholder:"••••••••",value:i,onChange:p=>s(p.target.value),required:!0})]})]}),A.jsx(K1,{children:A.jsx(ts,{type:"submit",className:"w-full",disabled:u,children:u?"Creating account...":"Register"})})]})]}),A.jsx("div",{className:"text-center mt-6 text-sm text-gray-600",children:A.jsxs("p",{children:["Already have an account? ",A.jsx(Wu,{to:"/login",className:"text-primary font-semibold",children:"Sign In"})]})})]})})},Ore=new yB,xre=()=>A.jsx(wB,{client:Ore,children:A.jsxs(Hz,{children:[A.jsx(B$,{}),A.jsx(xj,{}),A.jsx(yU,{children:A.jsx(L7,{children:A.jsxs(uU,{children:[A.jsx(Zo,{path:"/",element:A.jsx(V7,{})}),A.jsx(Zo,{path:"/login",element:A.jsx($7,{})}),A.jsx(Zo,{path:"/challenge",element:A.jsx(lre,{})}),A.jsx(Zo,{path:"/dashboard",element:A.jsx(yre,{})}),A.jsx(Zo,{path:"/register",element:A.jsx(wre,{})}),A.jsx(Zo,{path:"*",element:A.jsx(vre,{})})]})})})]})});uv.createRoot(document.getElementById("root")).render(A.jsx(H.StrictMode,{children:A.jsx(xre,{})}));
