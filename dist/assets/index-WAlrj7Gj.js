var LT=n=>{throw TypeError(n)};var gv=(n,e,t)=>e.has(n)||LT("Cannot "+t);var re=(n,e,t)=>(gv(n,e,"read from private field"),t?t.call(n):e.get(n)),ct=(n,e,t)=>e.has(n)?LT("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Ue=(n,e,t,r)=>(gv(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),Mn=(n,e,t)=>(gv(n,e,"access private method"),t);var Lp=(n,e,t,r)=>({set _(i){Ue(n,e,i,t)},get _(){return re(n,e,r)}});function gV(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var Vp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gf(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var yv={exports:{}},Nh={},vv={exports:{}},Ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VT;function yV(){if(VT)return Ge;VT=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),m=Symbol.iterator;function y(q){return q===null||typeof q!="object"?null:(q=m&&q[m]||q["@@iterator"],typeof q=="function"?q:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,b={};function T(q,K,ue){this.props=q,this.context=K,this.refs=b,this.updater=ue||v}T.prototype.isReactComponent={},T.prototype.setState=function(q,K){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,K,"setState")},T.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function k(){}k.prototype=T.prototype;function M(q,K,ue){this.props=q,this.context=K,this.refs=b,this.updater=ue||v}var F=M.prototype=new k;F.constructor=M,S(F,T.prototype),F.isPureReactComponent=!0;var z=Array.isArray,$=Object.prototype.hasOwnProperty,U={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function P(q,K,ue){var we,ke={},Qe=null,Pe=null;if(K!=null)for(we in K.ref!==void 0&&(Pe=K.ref),K.key!==void 0&&(Qe=""+K.key),K)$.call(K,we)&&!C.hasOwnProperty(we)&&(ke[we]=K[we]);var He=arguments.length-2;if(He===1)ke.children=ue;else if(1<He){for(var Ze=Array(He),vt=0;vt<He;vt++)Ze[vt]=arguments[vt+2];ke.children=Ze}if(q&&q.defaultProps)for(we in He=q.defaultProps,He)ke[we]===void 0&&(ke[we]=He[we]);return{$$typeof:n,type:q,key:Qe,ref:Pe,props:ke,_owner:U.current}}function A(q,K){return{$$typeof:n,type:q.type,key:K,ref:q.ref,props:q.props,_owner:q._owner}}function L(q){return typeof q=="object"&&q!==null&&q.$$typeof===n}function Q(q){var K={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(ue){return K[ue]})}var V=/\/+/g;function N(q,K){return typeof q=="object"&&q!==null&&q.key!=null?Q(""+q.key):K.toString(36)}function te(q,K,ue,we,ke){var Qe=typeof q;(Qe==="undefined"||Qe==="boolean")&&(q=null);var Pe=!1;if(q===null)Pe=!0;else switch(Qe){case"string":case"number":Pe=!0;break;case"object":switch(q.$$typeof){case n:case e:Pe=!0}}if(Pe)return Pe=q,ke=ke(Pe),q=we===""?"."+N(Pe,0):we,z(ke)?(ue="",q!=null&&(ue=q.replace(V,"$&/")+"/"),te(ke,K,ue,"",function(vt){return vt})):ke!=null&&(L(ke)&&(ke=A(ke,ue+(!ke.key||Pe&&Pe.key===ke.key?"":(""+ke.key).replace(V,"$&/")+"/")+q)),K.push(ke)),1;if(Pe=0,we=we===""?".":we+":",z(q))for(var He=0;He<q.length;He++){Qe=q[He];var Ze=we+N(Qe,He);Pe+=te(Qe,K,ue,Ze,ke)}else if(Ze=y(q),typeof Ze=="function")for(q=Ze.call(q),He=0;!(Qe=q.next()).done;)Qe=Qe.value,Ze=we+N(Qe,He++),Pe+=te(Qe,K,ue,Ze,ke);else if(Qe==="object")throw K=String(q),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.");return Pe}function me(q,K,ue){if(q==null)return q;var we=[],ke=0;return te(q,we,"","",function(Qe){return K.call(ue,Qe,ke++)}),we}function ge(q){if(q._status===-1){var K=q._result;K=K(),K.then(function(ue){(q._status===0||q._status===-1)&&(q._status=1,q._result=ue)},function(ue){(q._status===0||q._status===-1)&&(q._status=2,q._result=ue)}),q._status===-1&&(q._status=0,q._result=K)}if(q._status===1)return q._result.default;throw q._result}var fe={current:null},Z={transition:null},ee={ReactCurrentDispatcher:fe,ReactCurrentBatchConfig:Z,ReactCurrentOwner:U};function se(){throw Error("act(...) is not supported in production builds of React.")}return Ge.Children={map:me,forEach:function(q,K,ue){me(q,function(){K.apply(this,arguments)},ue)},count:function(q){var K=0;return me(q,function(){K++}),K},toArray:function(q){return me(q,function(K){return K})||[]},only:function(q){if(!L(q))throw Error("React.Children.only expected to receive a single React element child.");return q}},Ge.Component=T,Ge.Fragment=t,Ge.Profiler=i,Ge.PureComponent=M,Ge.StrictMode=r,Ge.Suspense=u,Ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ee,Ge.act=se,Ge.cloneElement=function(q,K,ue){if(q==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+q+".");var we=S({},q.props),ke=q.key,Qe=q.ref,Pe=q._owner;if(K!=null){if(K.ref!==void 0&&(Qe=K.ref,Pe=U.current),K.key!==void 0&&(ke=""+K.key),q.type&&q.type.defaultProps)var He=q.type.defaultProps;for(Ze in K)$.call(K,Ze)&&!C.hasOwnProperty(Ze)&&(we[Ze]=K[Ze]===void 0&&He!==void 0?He[Ze]:K[Ze])}var Ze=arguments.length-2;if(Ze===1)we.children=ue;else if(1<Ze){He=Array(Ze);for(var vt=0;vt<Ze;vt++)He[vt]=arguments[vt+2];we.children=He}return{$$typeof:n,type:q.type,key:ke,ref:Qe,props:we,_owner:Pe}},Ge.createContext=function(q){return q={$$typeof:o,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},q.Provider={$$typeof:s,_context:q},q.Consumer=q},Ge.createElement=P,Ge.createFactory=function(q){var K=P.bind(null,q);return K.type=q,K},Ge.createRef=function(){return{current:null}},Ge.forwardRef=function(q){return{$$typeof:l,render:q}},Ge.isValidElement=L,Ge.lazy=function(q){return{$$typeof:d,_payload:{_status:-1,_result:q},_init:ge}},Ge.memo=function(q,K){return{$$typeof:h,type:q,compare:K===void 0?null:K}},Ge.startTransition=function(q){var K=Z.transition;Z.transition={};try{q()}finally{Z.transition=K}},Ge.unstable_act=se,Ge.useCallback=function(q,K){return fe.current.useCallback(q,K)},Ge.useContext=function(q){return fe.current.useContext(q)},Ge.useDebugValue=function(){},Ge.useDeferredValue=function(q){return fe.current.useDeferredValue(q)},Ge.useEffect=function(q,K){return fe.current.useEffect(q,K)},Ge.useId=function(){return fe.current.useId()},Ge.useImperativeHandle=function(q,K,ue){return fe.current.useImperativeHandle(q,K,ue)},Ge.useInsertionEffect=function(q,K){return fe.current.useInsertionEffect(q,K)},Ge.useLayoutEffect=function(q,K){return fe.current.useLayoutEffect(q,K)},Ge.useMemo=function(q,K){return fe.current.useMemo(q,K)},Ge.useReducer=function(q,K,ue){return fe.current.useReducer(q,K,ue)},Ge.useRef=function(q){return fe.current.useRef(q)},Ge.useState=function(q){return fe.current.useState(q)},Ge.useSyncExternalStore=function(q,K,ue){return fe.current.useSyncExternalStore(q,K,ue)},Ge.useTransition=function(){return fe.current.useTransition()},Ge.version="18.3.1",Ge}var FT;function bx(){return FT||(FT=1,vv.exports=yV()),vv.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QT;function vV(){if(QT)return Nh;QT=1;var n=bx(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(l,u,h){var d,m={},y=null,v=null;h!==void 0&&(y=""+h),u.key!==void 0&&(y=""+u.key),u.ref!==void 0&&(v=u.ref);for(d in u)r.call(u,d)&&!s.hasOwnProperty(d)&&(m[d]=u[d]);if(l&&l.defaultProps)for(d in u=l.defaultProps,u)m[d]===void 0&&(m[d]=u[d]);return{$$typeof:e,type:l,key:y,ref:v,props:m,_owner:i.current}}return Nh.Fragment=t,Nh.jsx=o,Nh.jsxs=o,Nh}var jT;function wV(){return jT||(jT=1,yv.exports=vV()),yv.exports}var D=wV(),I=bx();const pe=Gf(I),MP=gV({__proto__:null,default:pe},[I]);var Fp={},wv={exports:{}},fr={},Ov={exports:{}},xv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zT;function OV(){return zT||(zT=1,function(n){function e(Z,ee){var se=Z.length;Z.push(ee);e:for(;0<se;){var q=se-1>>>1,K=Z[q];if(0<i(K,ee))Z[q]=ee,Z[se]=K,se=q;else break e}}function t(Z){return Z.length===0?null:Z[0]}function r(Z){if(Z.length===0)return null;var ee=Z[0],se=Z.pop();if(se!==ee){Z[0]=se;e:for(var q=0,K=Z.length,ue=K>>>1;q<ue;){var we=2*(q+1)-1,ke=Z[we],Qe=we+1,Pe=Z[Qe];if(0>i(ke,se))Qe<K&&0>i(Pe,ke)?(Z[q]=Pe,Z[Qe]=se,q=Qe):(Z[q]=ke,Z[we]=se,q=we);else if(Qe<K&&0>i(Pe,se))Z[q]=Pe,Z[Qe]=se,q=Qe;else break e}}return ee}function i(Z,ee){var se=Z.sortIndex-ee.sortIndex;return se!==0?se:Z.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();n.unstable_now=function(){return o.now()-l}}var u=[],h=[],d=1,m=null,y=3,v=!1,S=!1,b=!1,T=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function F(Z){for(var ee=t(h);ee!==null;){if(ee.callback===null)r(h);else if(ee.startTime<=Z)r(h),ee.sortIndex=ee.expirationTime,e(u,ee);else break;ee=t(h)}}function z(Z){if(b=!1,F(Z),!S)if(t(u)!==null)S=!0,ge($);else{var ee=t(h);ee!==null&&fe(z,ee.startTime-Z)}}function $(Z,ee){S=!1,b&&(b=!1,k(P),P=-1),v=!0;var se=y;try{for(F(ee),m=t(u);m!==null&&(!(m.expirationTime>ee)||Z&&!Q());){var q=m.callback;if(typeof q=="function"){m.callback=null,y=m.priorityLevel;var K=q(m.expirationTime<=ee);ee=n.unstable_now(),typeof K=="function"?m.callback=K:m===t(u)&&r(u),F(ee)}else r(u);m=t(u)}if(m!==null)var ue=!0;else{var we=t(h);we!==null&&fe(z,we.startTime-ee),ue=!1}return ue}finally{m=null,y=se,v=!1}}var U=!1,C=null,P=-1,A=5,L=-1;function Q(){return!(n.unstable_now()-L<A)}function V(){if(C!==null){var Z=n.unstable_now();L=Z;var ee=!0;try{ee=C(!0,Z)}finally{ee?N():(U=!1,C=null)}}else U=!1}var N;if(typeof M=="function")N=function(){M(V)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,me=te.port2;te.port1.onmessage=V,N=function(){me.postMessage(null)}}else N=function(){T(V,0)};function ge(Z){C=Z,U||(U=!0,N())}function fe(Z,ee){P=T(function(){Z(n.unstable_now())},ee)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Z){Z.callback=null},n.unstable_continueExecution=function(){S||v||(S=!0,ge($))},n.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<Z?Math.floor(1e3/Z):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_getFirstCallbackNode=function(){return t(u)},n.unstable_next=function(Z){switch(y){case 1:case 2:case 3:var ee=3;break;default:ee=y}var se=y;y=ee;try{return Z()}finally{y=se}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Z,ee){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var se=y;y=Z;try{return ee()}finally{y=se}},n.unstable_scheduleCallback=function(Z,ee,se){var q=n.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?q+se:q):se=q,Z){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=se+K,Z={id:d++,callback:ee,priorityLevel:Z,startTime:se,expirationTime:K,sortIndex:-1},se>q?(Z.sortIndex=se,e(h,Z),t(u)===null&&Z===t(h)&&(b?(k(P),P=-1):b=!0,fe(z,se-q))):(Z.sortIndex=K,e(u,Z),S||v||(S=!0,ge($))),Z},n.unstable_shouldYield=Q,n.unstable_wrapCallback=function(Z){var ee=y;return function(){var se=y;y=ee;try{return Z.apply(this,arguments)}finally{y=se}}}}(xv)),xv}var $T;function xV(){return $T||($T=1,Ov.exports=OV()),Ov.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BT;function SV(){if(BT)return fr;BT=1;var n=bx(),e=xV();function t(a){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+a,f=1;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f]);return"Minified React error #"+a+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(a,c){o(a,c),o(a+"Capture",c)}function o(a,c){for(i[a]=c,a=0;a<c.length;a++)r.add(c[a])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},m={};function y(a){return u.call(m,a)?!0:u.call(d,a)?!1:h.test(a)?m[a]=!0:(d[a]=!0,!1)}function v(a,c,f,g){if(f!==null&&f.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return g?!1:f!==null?!f.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function S(a,c,f,g){if(c===null||typeof c>"u"||v(a,c,f,g))return!0;if(g)return!1;if(f!==null)switch(f.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function b(a,c,f,g,w,x,E){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=g,this.attributeNamespace=w,this.mustUseProperty=f,this.propertyName=a,this.type=c,this.sanitizeURL=x,this.removeEmptyString=E}var T={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){T[a]=new b(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var c=a[0];T[c]=new b(c,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){T[a]=new b(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){T[a]=new b(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){T[a]=new b(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){T[a]=new b(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){T[a]=new b(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){T[a]=new b(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){T[a]=new b(a,5,!1,a.toLowerCase(),null,!1,!1)});var k=/[\-:]([a-z])/g;function M(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var c=a.replace(k,M);T[c]=new b(c,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var c=a.replace(k,M);T[c]=new b(c,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var c=a.replace(k,M);T[c]=new b(c,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){T[a]=new b(a,1,!1,a.toLowerCase(),null,!1,!1)}),T.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){T[a]=new b(a,1,!1,a.toLowerCase(),null,!0,!0)});function F(a,c,f,g){var w=T.hasOwnProperty(c)?T[c]:null;(w!==null?w.type!==0:g||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(S(c,f,w,g)&&(f=null),g||w===null?y(c)&&(f===null?a.removeAttribute(c):a.setAttribute(c,""+f)):w.mustUseProperty?a[w.propertyName]=f===null?w.type===3?!1:"":f:(c=w.attributeName,g=w.attributeNamespace,f===null?a.removeAttribute(c):(w=w.type,f=w===3||w===4&&f===!0?"":""+f,g?a.setAttributeNS(g,c,f):a.setAttribute(c,f))))}var z=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$=Symbol.for("react.element"),U=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),Q=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),te=Symbol.for("react.suspense_list"),me=Symbol.for("react.memo"),ge=Symbol.for("react.lazy"),fe=Symbol.for("react.offscreen"),Z=Symbol.iterator;function ee(a){return a===null||typeof a!="object"?null:(a=Z&&a[Z]||a["@@iterator"],typeof a=="function"?a:null)}var se=Object.assign,q;function K(a){if(q===void 0)try{throw Error()}catch(f){var c=f.stack.trim().match(/\n( *(at )?)/);q=c&&c[1]||""}return`
`+q+a}var ue=!1;function we(a,c){if(!a||ue)return"";ue=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(J){var g=J}Reflect.construct(a,[],c)}else{try{c.call()}catch(J){g=J}a.call(c.prototype)}else{try{throw Error()}catch(J){g=J}a()}}catch(J){if(J&&g&&typeof J.stack=="string"){for(var w=J.stack.split(`
`),x=g.stack.split(`
`),E=w.length-1,j=x.length-1;1<=E&&0<=j&&w[E]!==x[j];)j--;for(;1<=E&&0<=j;E--,j--)if(w[E]!==x[j]){if(E!==1||j!==1)do if(E--,j--,0>j||w[E]!==x[j]){var B=`
`+w[E].replace(" at new "," at ");return a.displayName&&B.includes("<anonymous>")&&(B=B.replace("<anonymous>",a.displayName)),B}while(1<=E&&0<=j);break}}}finally{ue=!1,Error.prepareStackTrace=f}return(a=a?a.displayName||a.name:"")?K(a):""}function ke(a){switch(a.tag){case 5:return K(a.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return a=we(a.type,!1),a;case 11:return a=we(a.type.render,!1),a;case 1:return a=we(a.type,!0),a;default:return""}}function Qe(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case C:return"Fragment";case U:return"Portal";case A:return"Profiler";case P:return"StrictMode";case N:return"Suspense";case te:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case Q:return(a.displayName||"Context")+".Consumer";case L:return(a._context.displayName||"Context")+".Provider";case V:var c=a.render;return a=a.displayName,a||(a=c.displayName||c.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case me:return c=a.displayName||null,c!==null?c:Qe(a.type)||"Memo";case ge:c=a._payload,a=a._init;try{return Qe(a(c))}catch{}}return null}function Pe(a){var c=a.type;switch(a.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=c.render,a=a.displayName||a.name||"",c.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qe(c);case 8:return c===P?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function He(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Ze(a){var c=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function vt(a){var c=Ze(a)?"checked":"value",f=Object.getOwnPropertyDescriptor(a.constructor.prototype,c),g=""+a[c];if(!a.hasOwnProperty(c)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var w=f.get,x=f.set;return Object.defineProperty(a,c,{configurable:!0,get:function(){return w.call(this)},set:function(E){g=""+E,x.call(this,E)}}),Object.defineProperty(a,c,{enumerable:f.enumerable}),{getValue:function(){return g},setValue:function(E){g=""+E},stopTracking:function(){a._valueTracker=null,delete a[c]}}}}function on(a){a._valueTracker||(a._valueTracker=vt(a))}function br(a){if(!a)return!1;var c=a._valueTracker;if(!c)return!0;var f=c.getValue(),g="";return a&&(g=Ze(a)?a.checked?"true":"false":a.value),a=g,a!==f?(c.setValue(a),!0):!1}function mn(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function zr(a,c){var f=c.checked;return se({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:f??a._wrapperState.initialChecked})}function Fi(a,c){var f=c.defaultValue==null?"":c.defaultValue,g=c.checked!=null?c.checked:c.defaultChecked;f=He(c.value!=null?c.value:f),a._wrapperState={initialChecked:g,initialValue:f,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function Qi(a,c){c=c.checked,c!=null&&F(a,"checked",c,!1)}function Cs(a,c){Qi(a,c);var f=He(c.value),g=c.type;if(f!=null)g==="number"?(f===0&&a.value===""||a.value!=f)&&(a.value=""+f):a.value!==""+f&&(a.value=""+f);else if(g==="submit"||g==="reset"){a.removeAttribute("value");return}c.hasOwnProperty("value")?Tr(a,c.type,f):c.hasOwnProperty("defaultValue")&&Tr(a,c.type,He(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(a.defaultChecked=!!c.defaultChecked)}function ji(a,c,f){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var g=c.type;if(!(g!=="submit"&&g!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+a._wrapperState.initialValue,f||c===a.value||(a.value=c),a.defaultValue=c}f=a.name,f!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,f!==""&&(a.name=f)}function Tr(a,c,f){(c!=="number"||mn(a.ownerDocument)!==a)&&(f==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+f&&(a.defaultValue=""+f))}var $r=Array.isArray;function Un(a,c,f,g){if(a=a.options,c){c={};for(var w=0;w<f.length;w++)c["$"+f[w]]=!0;for(f=0;f<a.length;f++)w=c.hasOwnProperty("$"+a[f].value),a[f].selected!==w&&(a[f].selected=w),w&&g&&(a[f].defaultSelected=!0)}else{for(f=""+He(f),c=null,w=0;w<a.length;w++){if(a[w].value===f){a[w].selected=!0,g&&(a[w].defaultSelected=!0);return}c!==null||a[w].disabled||(c=a[w])}c!==null&&(c.selected=!0)}}function So(a,c){if(c.dangerouslySetInnerHTML!=null)throw Error(t(91));return se({},c,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function tr(a,c){var f=c.value;if(f==null){if(f=c.children,c=c.defaultValue,f!=null){if(c!=null)throw Error(t(92));if($r(f)){if(1<f.length)throw Error(t(93));f=f[0]}c=f}c==null&&(c=""),f=c}a._wrapperState={initialValue:He(f)}}function bo(a,c){var f=He(c.value),g=He(c.defaultValue);f!=null&&(f=""+f,f!==a.value&&(a.value=f),c.defaultValue==null&&a.defaultValue!==f&&(a.defaultValue=f)),g!=null&&(a.defaultValue=""+g)}function Ha(a){var c=a.textContent;c===a._wrapperState.initialValue&&c!==""&&c!==null&&(a.value=c)}function at(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wt(a,c){return a==null||a==="http://www.w3.org/1999/xhtml"?at(c):a==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var ui,Ga=function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,f,g,w){MSApp.execUnsafeLocalFunction(function(){return a(c,f,g,w)})}:a}(function(a,c){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=c;else{for(ui=ui||document.createElement("div"),ui.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=ui.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;c.firstChild;)a.appendChild(c.firstChild)}});function _r(a,c){if(c){var f=a.firstChild;if(f&&f===a.lastChild&&f.nodeType===3){f.nodeValue=c;return}}a.textContent=c}var Ps={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zi=["Webkit","ms","Moz","O"];Object.keys(Ps).forEach(function(a){zi.forEach(function(c){c=c+a.charAt(0).toUpperCase()+a.substring(1),Ps[c]=Ps[a]})});function As(a,c,f){return c==null||typeof c=="boolean"||c===""?"":f||typeof c!="number"||c===0||Ps.hasOwnProperty(a)&&Ps[a]?(""+c).trim():c+"px"}function Br(a,c){a=a.style;for(var f in c)if(c.hasOwnProperty(f)){var g=f.indexOf("--")===0,w=As(f,c[f],g);f==="float"&&(f="cssFloat"),g?a.setProperty(f,w):a[f]=w}}var To=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ur(a,c){if(c){if(To[a]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(t(137,a));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(t(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(t(61))}if(c.style!=null&&typeof c.style!="object")throw Error(t(62))}}function Xa(a,c){if(a.indexOf("-")===-1)return typeof c.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rs=null;function Is(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Ns=null,nr=null,rr=null;function qn(a){if(a=vh(a)){if(typeof Ns!="function")throw Error(t(280));var c=a.stateNode;c&&(c=Yd(c),Ns(a.stateNode,a.type,c))}}function qr(a){nr?rr?rr.push(a):rr=[a]:nr=a}function Le(){if(nr){var a=nr,c=rr;if(rr=nr=null,qn(a),c)for(a=0;a<c.length;a++)qn(c[a])}}function Ke(a,c){return a(c)}function ut(){}var Vt=!1;function gn(a,c,f){if(Vt)return a(c,f);Vt=!0;try{return Ke(a,c,f)}finally{Vt=!1,(nr!==null||rr!==null)&&(ut(),Le())}}function ht(a,c){var f=a.stateNode;if(f===null)return null;var g=Yd(f);if(g===null)return null;f=g[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(a=a.type,g=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!g;break e;default:a=!1}if(a)return null;if(f&&typeof f!="function")throw Error(t(231,c,typeof f));return f}var ir=!1;if(l)try{var Rt={};Object.defineProperty(Rt,"passive",{get:function(){ir=!0}}),window.addEventListener("test",Rt,Rt),window.removeEventListener("test",Rt,Rt)}catch{ir=!1}function An(a,c,f,g,w,x,E,j,B){var J=Array.prototype.slice.call(arguments,3);try{c.apply(f,J)}catch(le){this.onError(le)}}var Ka=!1,ec=null,hi=!1,Ju=null,Uy={onError:function(a){Ka=!0,ec=a}};function tc(a,c,f,g,w,x,E,j,B){Ka=!1,ec=null,An.apply(Uy,arguments)}function Sd(a,c,f,g,w,x,E,j,B){if(tc.apply(this,arguments),Ka){if(Ka){var J=ec;Ka=!1,ec=null}else throw Error(t(198));hi||(hi=!0,Ju=J)}}function fi(a){var c=a,f=a;if(a.alternate)for(;c.return;)c=c.return;else{a=c;do c=a,(c.flags&4098)!==0&&(f=c.return),a=c.return;while(a)}return c.tag===3?f:null}function Ya(a){if(a.tag===13){var c=a.memoizedState;if(c===null&&(a=a.alternate,a!==null&&(c=a.memoizedState)),c!==null)return c.dehydrated}return null}function di(a){if(fi(a)!==a)throw Error(t(188))}function bd(a){var c=a.alternate;if(!c){if(c=fi(a),c===null)throw Error(t(188));return c!==a?null:a}for(var f=a,g=c;;){var w=f.return;if(w===null)break;var x=w.alternate;if(x===null){if(g=w.return,g!==null){f=g;continue}break}if(w.child===x.child){for(x=w.child;x;){if(x===f)return di(w),a;if(x===g)return di(w),c;x=x.sibling}throw Error(t(188))}if(f.return!==g.return)f=w,g=x;else{for(var E=!1,j=w.child;j;){if(j===f){E=!0,f=w,g=x;break}if(j===g){E=!0,g=w,f=x;break}j=j.sibling}if(!E){for(j=x.child;j;){if(j===f){E=!0,f=x,g=w;break}if(j===g){E=!0,g=x,f=w;break}j=j.sibling}if(!E)throw Error(t(189))}}if(f.alternate!==g)throw Error(t(190))}if(f.tag!==3)throw Error(t(188));return f.stateNode.current===f?a:c}function Zu(a){return a=bd(a),a!==null?nc(a):null}function nc(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var c=nc(a);if(c!==null)return c;a=a.sibling}return null}var rc=e.unstable_scheduleCallback,eh=e.unstable_cancelCallback,Td=e.unstable_shouldYield,qy=e.unstable_requestPaint,Ot=e.unstable_now,_d=e.unstable_getCurrentPriorityLevel,Ja=e.unstable_ImmediatePriority,_o=e.unstable_UserBlockingPriority,Wr=e.unstable_NormalPriority,th=e.unstable_LowPriority,Ed=e.unstable_IdlePriority,Za=null,Er=null;function kd(a){if(Er&&typeof Er.onCommitFiberRoot=="function")try{Er.onCommitFiberRoot(Za,a,void 0,(a.current.flags&128)===128)}catch{}}var Wn=Math.clz32?Math.clz32:Pd,nh=Math.log,Cd=Math.LN2;function Pd(a){return a>>>=0,a===0?32:31-(nh(a)/Cd|0)|0}var ic=64,sc=4194304;function Eo(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function el(a,c){var f=a.pendingLanes;if(f===0)return 0;var g=0,w=a.suspendedLanes,x=a.pingedLanes,E=f&268435455;if(E!==0){var j=E&~w;j!==0?g=Eo(j):(x&=E,x!==0&&(g=Eo(x)))}else E=f&~w,E!==0?g=Eo(E):x!==0&&(g=Eo(x));if(g===0)return 0;if(c!==0&&c!==g&&(c&w)===0&&(w=g&-g,x=c&-c,w>=x||w===16&&(x&4194240)!==0))return c;if((g&4)!==0&&(g|=f&16),c=a.entangledLanes,c!==0)for(a=a.entanglements,c&=g;0<c;)f=31-Wn(c),w=1<<f,g|=a[f],c&=~w;return g}function Wy(a,c){switch(a){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ds(a,c){for(var f=a.suspendedLanes,g=a.pingedLanes,w=a.expirationTimes,x=a.pendingLanes;0<x;){var E=31-Wn(x),j=1<<E,B=w[E];B===-1?((j&f)===0||(j&g)!==0)&&(w[E]=Wy(j,c)):B<=c&&(a.expiredLanes|=j),x&=~j}}function kr(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function tl(){var a=ic;return ic<<=1,(ic&4194240)===0&&(ic=64),a}function ko(a){for(var c=[],f=0;31>f;f++)c.push(a);return c}function Co(a,c,f){a.pendingLanes|=c,c!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,c=31-Wn(c),a[c]=f}function pt(a,c){var f=a.pendingLanes&~c;a.pendingLanes=c,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=c,a.mutableReadLanes&=c,a.entangledLanes&=c,c=a.entanglements;var g=a.eventTimes;for(a=a.expirationTimes;0<f;){var w=31-Wn(f),x=1<<w;c[w]=0,g[w]=-1,a[w]=-1,f&=~x}}function Po(a,c){var f=a.entangledLanes|=c;for(a=a.entanglements;f;){var g=31-Wn(f),w=1<<g;w&c|a[g]&c&&(a[g]|=c),f&=~w}}var et=0;function Ao(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var Ad,oc,Rd,Id,Nd,rh=!1,$i=[],yn=null,pi=null,mi=null,Ro=new Map,Hr=new Map,Bi=[],Hy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dd(a,c){switch(a){case"focusin":case"focusout":yn=null;break;case"dragenter":case"dragleave":pi=null;break;case"mouseover":case"mouseout":mi=null;break;case"pointerover":case"pointerout":Ro.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hr.delete(c.pointerId)}}function sr(a,c,f,g,w,x){return a===null||a.nativeEvent!==x?(a={blockedOn:c,domEventName:f,eventSystemFlags:g,nativeEvent:x,targetContainers:[w]},c!==null&&(c=vh(c),c!==null&&oc(c)),a):(a.eventSystemFlags|=g,c=a.targetContainers,w!==null&&c.indexOf(w)===-1&&c.push(w),a)}function Gy(a,c,f,g,w){switch(c){case"focusin":return yn=sr(yn,a,c,f,g,w),!0;case"dragenter":return pi=sr(pi,a,c,f,g,w),!0;case"mouseover":return mi=sr(mi,a,c,f,g,w),!0;case"pointerover":var x=w.pointerId;return Ro.set(x,sr(Ro.get(x)||null,a,c,f,g,w)),!0;case"gotpointercapture":return x=w.pointerId,Hr.set(x,sr(Hr.get(x)||null,a,c,f,g,w)),!0}return!1}function Md(a){var c=ol(a.target);if(c!==null){var f=fi(c);if(f!==null){if(c=f.tag,c===13){if(c=Ya(f),c!==null){a.blockedOn=c,Nd(a.priority,function(){Rd(f)});return}}else if(c===3&&f.stateNode.current.memoizedState.isDehydrated){a.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Ms(a){if(a.blockedOn!==null)return!1;for(var c=a.targetContainers;0<c.length;){var f=ac(a.domEventName,a.eventSystemFlags,c[0],a.nativeEvent);if(f===null){f=a.nativeEvent;var g=new f.constructor(f.type,f);Rs=g,f.target.dispatchEvent(g),Rs=null}else return c=vh(f),c!==null&&oc(c),a.blockedOn=f,!1;c.shift()}return!0}function nl(a,c,f){Ms(a)&&f.delete(c)}function Ld(){rh=!1,yn!==null&&Ms(yn)&&(yn=null),pi!==null&&Ms(pi)&&(pi=null),mi!==null&&Ms(mi)&&(mi=null),Ro.forEach(nl),Hr.forEach(nl)}function gi(a,c){a.blockedOn===c&&(a.blockedOn=null,rh||(rh=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ld)))}function yi(a){function c(w){return gi(w,a)}if(0<$i.length){gi($i[0],a);for(var f=1;f<$i.length;f++){var g=$i[f];g.blockedOn===a&&(g.blockedOn=null)}}for(yn!==null&&gi(yn,a),pi!==null&&gi(pi,a),mi!==null&&gi(mi,a),Ro.forEach(c),Hr.forEach(c),f=0;f<Bi.length;f++)g=Bi[f],g.blockedOn===a&&(g.blockedOn=null);for(;0<Bi.length&&(f=Bi[0],f.blockedOn===null);)Md(f),f.blockedOn===null&&Bi.shift()}var Ls=z.ReactCurrentBatchConfig,Io=!0;function kt(a,c,f,g){var w=et,x=Ls.transition;Ls.transition=null;try{et=1,ih(a,c,f,g)}finally{et=w,Ls.transition=x}}function Xy(a,c,f,g){var w=et,x=Ls.transition;Ls.transition=null;try{et=4,ih(a,c,f,g)}finally{et=w,Ls.transition=x}}function ih(a,c,f,g){if(Io){var w=ac(a,c,f,g);if(w===null)o0(a,c,g,rl,f),Dd(a,g);else if(Gy(w,a,c,f,g))g.stopPropagation();else if(Dd(a,g),c&4&&-1<Hy.indexOf(a)){for(;w!==null;){var x=vh(w);if(x!==null&&Ad(x),x=ac(a,c,f,g),x===null&&o0(a,c,g,rl,f),x===w)break;w=x}w!==null&&g.stopPropagation()}else o0(a,c,g,null,f)}}var rl=null;function ac(a,c,f,g){if(rl=null,a=Is(g),a=ol(a),a!==null)if(c=fi(a),c===null)a=null;else if(f=c.tag,f===13){if(a=Ya(c),a!==null)return a;a=null}else if(f===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;a=null}else c!==a&&(a=null);return rl=a,null}function sh(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_d()){case Ja:return 1;case _o:return 4;case Wr:case th:return 16;case Ed:return 536870912;default:return 16}default:return 16}}var Cr=null,lc=null,or=null;function oh(){if(or)return or;var a,c=lc,f=c.length,g,w="value"in Cr?Cr.value:Cr.textContent,x=w.length;for(a=0;a<f&&c[a]===w[a];a++);var E=f-a;for(g=1;g<=E&&c[f-g]===w[x-g];g++);return or=w.slice(a,1<g?1-g:void 0)}function cc(a){var c=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&c===13&&(a=13)):a=c,a===10&&(a=13),32<=a||a===13?a:0}function Ui(){return!0}function ah(){return!1}function vn(a){function c(f,g,w,x,E){this._reactName=f,this._targetInst=w,this.type=g,this.nativeEvent=x,this.target=E,this.currentTarget=null;for(var j in a)a.hasOwnProperty(j)&&(f=a[j],this[j]=f?f(x):x[j]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?Ui:ah,this.isPropagationStopped=ah,this}return se(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Ui)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Ui)},persist:function(){},isPersistent:Ui}),c}var vi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uc=vn(vi),qi=se({},vi,{view:0,detail:0}),Ky=vn(qi),hc,Vs,No,il=se({},qi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wi,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==No&&(No&&a.type==="mousemove"?(hc=a.screenX-No.screenX,Vs=a.screenY-No.screenY):Vs=hc=0,No=a),hc)},movementY:function(a){return"movementY"in a?a.movementY:Vs}}),fc=vn(il),lh=se({},il,{dataTransfer:0}),Vd=vn(lh),dc=se({},qi,{relatedTarget:0}),pc=vn(dc),Fd=se({},vi,{animationName:0,elapsedTime:0,pseudoElement:0}),Fs=vn(Fd),Qd=se({},vi,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),jd=vn(Qd),zd=se({},vi,{data:0}),ch=vn(zd),mc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$d={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bd(a){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(a):(a=$d[a])?!!c[a]:!1}function Wi(){return Bd}var p=se({},qi,{key:function(a){if(a.key){var c=mc[a.key]||a.key;if(c!=="Unidentified")return c}return a.type==="keypress"?(a=cc(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Hn[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wi,charCode:function(a){return a.type==="keypress"?cc(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?cc(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),O=vn(p),_=se({},il,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),R=vn(_),H=se({},qi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wi}),ne=vn(H),ye=se({},vi,{propertyName:0,elapsedTime:0,pseudoElement:0}),dt=vn(ye),Xt=se({},il,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),nt=vn(Xt),an=[9,13,27,32],$t=l&&"CompositionEvent"in window,Gr=null;l&&"documentMode"in document&&(Gr=document.documentMode);var Pr=l&&"TextEvent"in window&&!Gr,sl=l&&(!$t||Gr&&8<Gr&&11>=Gr),gc=" ",A1=!1;function R1(a,c){switch(a){case"keyup":return an.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function I1(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var yc=!1;function dL(a,c){switch(a){case"compositionend":return I1(c);case"keypress":return c.which!==32?null:(A1=!0,gc);case"textInput":return a=c.data,a===gc&&A1?null:a;default:return null}}function pL(a,c){if(yc)return a==="compositionend"||!$t&&R1(a,c)?(a=oh(),or=lc=Cr=null,yc=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return sl&&c.locale!=="ko"?null:c.data;default:return null}}var mL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function N1(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c==="input"?!!mL[a.type]:c==="textarea"}function D1(a,c,f,g){qr(g),c=Gd(c,"onChange"),0<c.length&&(f=new uc("onChange","change",null,f,g),a.push({event:f,listeners:c}))}var uh=null,hh=null;function gL(a){J1(a,0)}function Ud(a){var c=Sc(a);if(br(c))return a}function yL(a,c){if(a==="change")return c}var M1=!1;if(l){var Yy;if(l){var Jy="oninput"in document;if(!Jy){var L1=document.createElement("div");L1.setAttribute("oninput","return;"),Jy=typeof L1.oninput=="function"}Yy=Jy}else Yy=!1;M1=Yy&&(!document.documentMode||9<document.documentMode)}function V1(){uh&&(uh.detachEvent("onpropertychange",F1),hh=uh=null)}function F1(a){if(a.propertyName==="value"&&Ud(hh)){var c=[];D1(c,hh,a,Is(a)),gn(gL,c)}}function vL(a,c,f){a==="focusin"?(V1(),uh=c,hh=f,uh.attachEvent("onpropertychange",F1)):a==="focusout"&&V1()}function wL(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Ud(hh)}function OL(a,c){if(a==="click")return Ud(c)}function xL(a,c){if(a==="input"||a==="change")return Ud(c)}function SL(a,c){return a===c&&(a!==0||1/a===1/c)||a!==a&&c!==c}var wi=typeof Object.is=="function"?Object.is:SL;function fh(a,c){if(wi(a,c))return!0;if(typeof a!="object"||a===null||typeof c!="object"||c===null)return!1;var f=Object.keys(a),g=Object.keys(c);if(f.length!==g.length)return!1;for(g=0;g<f.length;g++){var w=f[g];if(!u.call(c,w)||!wi(a[w],c[w]))return!1}return!0}function Q1(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function j1(a,c){var f=Q1(a);a=0;for(var g;f;){if(f.nodeType===3){if(g=a+f.textContent.length,a<=c&&g>=c)return{node:f,offset:c-a};a=g}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=Q1(f)}}function z1(a,c){return a&&c?a===c?!0:a&&a.nodeType===3?!1:c&&c.nodeType===3?z1(a,c.parentNode):"contains"in a?a.contains(c):a.compareDocumentPosition?!!(a.compareDocumentPosition(c)&16):!1:!1}function $1(){for(var a=window,c=mn();c instanceof a.HTMLIFrameElement;){try{var f=typeof c.contentWindow.location.href=="string"}catch{f=!1}if(f)a=c.contentWindow;else break;c=mn(a.document)}return c}function Zy(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c&&(c==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||c==="textarea"||a.contentEditable==="true")}function bL(a){var c=$1(),f=a.focusedElem,g=a.selectionRange;if(c!==f&&f&&f.ownerDocument&&z1(f.ownerDocument.documentElement,f)){if(g!==null&&Zy(f)){if(c=g.start,a=g.end,a===void 0&&(a=c),"selectionStart"in f)f.selectionStart=c,f.selectionEnd=Math.min(a,f.value.length);else if(a=(c=f.ownerDocument||document)&&c.defaultView||window,a.getSelection){a=a.getSelection();var w=f.textContent.length,x=Math.min(g.start,w);g=g.end===void 0?x:Math.min(g.end,w),!a.extend&&x>g&&(w=g,g=x,x=w),w=j1(f,x);var E=j1(f,g);w&&E&&(a.rangeCount!==1||a.anchorNode!==w.node||a.anchorOffset!==w.offset||a.focusNode!==E.node||a.focusOffset!==E.offset)&&(c=c.createRange(),c.setStart(w.node,w.offset),a.removeAllRanges(),x>g?(a.addRange(c),a.extend(E.node,E.offset)):(c.setEnd(E.node,E.offset),a.addRange(c)))}}for(c=[],a=f;a=a.parentNode;)a.nodeType===1&&c.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof f.focus=="function"&&f.focus(),f=0;f<c.length;f++)a=c[f],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var TL=l&&"documentMode"in document&&11>=document.documentMode,vc=null,e0=null,dh=null,t0=!1;function B1(a,c,f){var g=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;t0||vc==null||vc!==mn(g)||(g=vc,"selectionStart"in g&&Zy(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),dh&&fh(dh,g)||(dh=g,g=Gd(e0,"onSelect"),0<g.length&&(c=new uc("onSelect","select",null,c,f),a.push({event:c,listeners:g}),c.target=vc)))}function qd(a,c){var f={};return f[a.toLowerCase()]=c.toLowerCase(),f["Webkit"+a]="webkit"+c,f["Moz"+a]="moz"+c,f}var wc={animationend:qd("Animation","AnimationEnd"),animationiteration:qd("Animation","AnimationIteration"),animationstart:qd("Animation","AnimationStart"),transitionend:qd("Transition","TransitionEnd")},n0={},U1={};l&&(U1=document.createElement("div").style,"AnimationEvent"in window||(delete wc.animationend.animation,delete wc.animationiteration.animation,delete wc.animationstart.animation),"TransitionEvent"in window||delete wc.transitionend.transition);function Wd(a){if(n0[a])return n0[a];if(!wc[a])return a;var c=wc[a],f;for(f in c)if(c.hasOwnProperty(f)&&f in U1)return n0[a]=c[f];return a}var q1=Wd("animationend"),W1=Wd("animationiteration"),H1=Wd("animationstart"),G1=Wd("transitionend"),X1=new Map,K1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Do(a,c){X1.set(a,c),s(c,[a])}for(var r0=0;r0<K1.length;r0++){var i0=K1[r0],_L=i0.toLowerCase(),EL=i0[0].toUpperCase()+i0.slice(1);Do(_L,"on"+EL)}Do(q1,"onAnimationEnd"),Do(W1,"onAnimationIteration"),Do(H1,"onAnimationStart"),Do("dblclick","onDoubleClick"),Do("focusin","onFocus"),Do("focusout","onBlur"),Do(G1,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ph="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kL=new Set("cancel close invalid load scroll toggle".split(" ").concat(ph));function Y1(a,c,f){var g=a.type||"unknown-event";a.currentTarget=f,Sd(g,c,void 0,a),a.currentTarget=null}function J1(a,c){c=(c&4)!==0;for(var f=0;f<a.length;f++){var g=a[f],w=g.event;g=g.listeners;e:{var x=void 0;if(c)for(var E=g.length-1;0<=E;E--){var j=g[E],B=j.instance,J=j.currentTarget;if(j=j.listener,B!==x&&w.isPropagationStopped())break e;Y1(w,j,J),x=B}else for(E=0;E<g.length;E++){if(j=g[E],B=j.instance,J=j.currentTarget,j=j.listener,B!==x&&w.isPropagationStopped())break e;Y1(w,j,J),x=B}}}if(hi)throw a=Ju,hi=!1,Ju=null,a}function St(a,c){var f=c[f0];f===void 0&&(f=c[f0]=new Set);var g=a+"__bubble";f.has(g)||(Z1(c,a,2,!1),f.add(g))}function s0(a,c,f){var g=0;c&&(g|=4),Z1(f,a,g,c)}var Hd="_reactListening"+Math.random().toString(36).slice(2);function mh(a){if(!a[Hd]){a[Hd]=!0,r.forEach(function(f){f!=="selectionchange"&&(kL.has(f)||s0(f,!1,a),s0(f,!0,a))});var c=a.nodeType===9?a:a.ownerDocument;c===null||c[Hd]||(c[Hd]=!0,s0("selectionchange",!1,c))}}function Z1(a,c,f,g){switch(sh(c)){case 1:var w=kt;break;case 4:w=Xy;break;default:w=ih}f=w.bind(null,c,f,a),w=void 0,!ir||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(w=!0),g?w!==void 0?a.addEventListener(c,f,{capture:!0,passive:w}):a.addEventListener(c,f,!0):w!==void 0?a.addEventListener(c,f,{passive:w}):a.addEventListener(c,f,!1)}function o0(a,c,f,g,w){var x=g;if((c&1)===0&&(c&2)===0&&g!==null)e:for(;;){if(g===null)return;var E=g.tag;if(E===3||E===4){var j=g.stateNode.containerInfo;if(j===w||j.nodeType===8&&j.parentNode===w)break;if(E===4)for(E=g.return;E!==null;){var B=E.tag;if((B===3||B===4)&&(B=E.stateNode.containerInfo,B===w||B.nodeType===8&&B.parentNode===w))return;E=E.return}for(;j!==null;){if(E=ol(j),E===null)return;if(B=E.tag,B===5||B===6){g=x=E;continue e}j=j.parentNode}}g=g.return}gn(function(){var J=x,le=Is(f),he=[];e:{var ae=X1.get(a);if(ae!==void 0){var xe=uc,Ee=a;switch(a){case"keypress":if(cc(f)===0)break e;case"keydown":case"keyup":xe=O;break;case"focusin":Ee="focus",xe=pc;break;case"focusout":Ee="blur",xe=pc;break;case"beforeblur":case"afterblur":xe=pc;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":xe=fc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":xe=Vd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":xe=ne;break;case q1:case W1:case H1:xe=Fs;break;case G1:xe=dt;break;case"scroll":xe=Ky;break;case"wheel":xe=nt;break;case"copy":case"cut":case"paste":xe=jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":xe=R}var Ce=(c&4)!==0,Ft=!Ce&&a==="scroll",G=Ce?ae!==null?ae+"Capture":null:ae;Ce=[];for(var W=J,Y;W!==null;){Y=W;var de=Y.stateNode;if(Y.tag===5&&de!==null&&(Y=de,G!==null&&(de=ht(W,G),de!=null&&Ce.push(gh(W,de,Y)))),Ft)break;W=W.return}0<Ce.length&&(ae=new xe(ae,Ee,null,f,le),he.push({event:ae,listeners:Ce}))}}if((c&7)===0){e:{if(ae=a==="mouseover"||a==="pointerover",xe=a==="mouseout"||a==="pointerout",ae&&f!==Rs&&(Ee=f.relatedTarget||f.fromElement)&&(ol(Ee)||Ee[Qs]))break e;if((xe||ae)&&(ae=le.window===le?le:(ae=le.ownerDocument)?ae.defaultView||ae.parentWindow:window,xe?(Ee=f.relatedTarget||f.toElement,xe=J,Ee=Ee?ol(Ee):null,Ee!==null&&(Ft=fi(Ee),Ee!==Ft||Ee.tag!==5&&Ee.tag!==6)&&(Ee=null)):(xe=null,Ee=J),xe!==Ee)){if(Ce=fc,de="onMouseLeave",G="onMouseEnter",W="mouse",(a==="pointerout"||a==="pointerover")&&(Ce=R,de="onPointerLeave",G="onPointerEnter",W="pointer"),Ft=xe==null?ae:Sc(xe),Y=Ee==null?ae:Sc(Ee),ae=new Ce(de,W+"leave",xe,f,le),ae.target=Ft,ae.relatedTarget=Y,de=null,ol(le)===J&&(Ce=new Ce(G,W+"enter",Ee,f,le),Ce.target=Y,Ce.relatedTarget=Ft,de=Ce),Ft=de,xe&&Ee)t:{for(Ce=xe,G=Ee,W=0,Y=Ce;Y;Y=Oc(Y))W++;for(Y=0,de=G;de;de=Oc(de))Y++;for(;0<W-Y;)Ce=Oc(Ce),W--;for(;0<Y-W;)G=Oc(G),Y--;for(;W--;){if(Ce===G||G!==null&&Ce===G.alternate)break t;Ce=Oc(Ce),G=Oc(G)}Ce=null}else Ce=null;xe!==null&&eb(he,ae,xe,Ce,!1),Ee!==null&&Ft!==null&&eb(he,Ft,Ee,Ce,!0)}}e:{if(ae=J?Sc(J):window,xe=ae.nodeName&&ae.nodeName.toLowerCase(),xe==="select"||xe==="input"&&ae.type==="file")var Ae=yL;else if(N1(ae))if(M1)Ae=xL;else{Ae=wL;var Ne=vL}else(xe=ae.nodeName)&&xe.toLowerCase()==="input"&&(ae.type==="checkbox"||ae.type==="radio")&&(Ae=OL);if(Ae&&(Ae=Ae(a,J))){D1(he,Ae,f,le);break e}Ne&&Ne(a,ae,J),a==="focusout"&&(Ne=ae._wrapperState)&&Ne.controlled&&ae.type==="number"&&Tr(ae,"number",ae.value)}switch(Ne=J?Sc(J):window,a){case"focusin":(N1(Ne)||Ne.contentEditable==="true")&&(vc=Ne,e0=J,dh=null);break;case"focusout":dh=e0=vc=null;break;case"mousedown":t0=!0;break;case"contextmenu":case"mouseup":case"dragend":t0=!1,B1(he,f,le);break;case"selectionchange":if(TL)break;case"keydown":case"keyup":B1(he,f,le)}var De;if($t)e:{switch(a){case"compositionstart":var je="onCompositionStart";break e;case"compositionend":je="onCompositionEnd";break e;case"compositionupdate":je="onCompositionUpdate";break e}je=void 0}else yc?R1(a,f)&&(je="onCompositionEnd"):a==="keydown"&&f.keyCode===229&&(je="onCompositionStart");je&&(sl&&f.locale!=="ko"&&(yc||je!=="onCompositionStart"?je==="onCompositionEnd"&&yc&&(De=oh()):(Cr=le,lc="value"in Cr?Cr.value:Cr.textContent,yc=!0)),Ne=Gd(J,je),0<Ne.length&&(je=new ch(je,a,null,f,le),he.push({event:je,listeners:Ne}),De?je.data=De:(De=I1(f),De!==null&&(je.data=De)))),(De=Pr?dL(a,f):pL(a,f))&&(J=Gd(J,"onBeforeInput"),0<J.length&&(le=new ch("onBeforeInput","beforeinput",null,f,le),he.push({event:le,listeners:J}),le.data=De))}J1(he,c)})}function gh(a,c,f){return{instance:a,listener:c,currentTarget:f}}function Gd(a,c){for(var f=c+"Capture",g=[];a!==null;){var w=a,x=w.stateNode;w.tag===5&&x!==null&&(w=x,x=ht(a,f),x!=null&&g.unshift(gh(a,x,w)),x=ht(a,c),x!=null&&g.push(gh(a,x,w))),a=a.return}return g}function Oc(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function eb(a,c,f,g,w){for(var x=c._reactName,E=[];f!==null&&f!==g;){var j=f,B=j.alternate,J=j.stateNode;if(B!==null&&B===g)break;j.tag===5&&J!==null&&(j=J,w?(B=ht(f,x),B!=null&&E.unshift(gh(f,B,j))):w||(B=ht(f,x),B!=null&&E.push(gh(f,B,j)))),f=f.return}E.length!==0&&a.push({event:c,listeners:E})}var CL=/\r\n?/g,PL=/\u0000|\uFFFD/g;function tb(a){return(typeof a=="string"?a:""+a).replace(CL,`
`).replace(PL,"")}function Xd(a,c,f){if(c=tb(c),tb(a)!==c&&f)throw Error(t(425))}function Kd(){}var a0=null,l0=null;function c0(a,c){return a==="textarea"||a==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var u0=typeof setTimeout=="function"?setTimeout:void 0,AL=typeof clearTimeout=="function"?clearTimeout:void 0,nb=typeof Promise=="function"?Promise:void 0,RL=typeof queueMicrotask=="function"?queueMicrotask:typeof nb<"u"?function(a){return nb.resolve(null).then(a).catch(IL)}:u0;function IL(a){setTimeout(function(){throw a})}function h0(a,c){var f=c,g=0;do{var w=f.nextSibling;if(a.removeChild(f),w&&w.nodeType===8)if(f=w.data,f==="/$"){if(g===0){a.removeChild(w),yi(c);return}g--}else f!=="$"&&f!=="$?"&&f!=="$!"||g++;f=w}while(f);yi(c)}function Mo(a){for(;a!=null;a=a.nextSibling){var c=a.nodeType;if(c===1||c===3)break;if(c===8){if(c=a.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return a}function rb(a){a=a.previousSibling;for(var c=0;a;){if(a.nodeType===8){var f=a.data;if(f==="$"||f==="$!"||f==="$?"){if(c===0)return a;c--}else f==="/$"&&c++}a=a.previousSibling}return null}var xc=Math.random().toString(36).slice(2),Hi="__reactFiber$"+xc,yh="__reactProps$"+xc,Qs="__reactContainer$"+xc,f0="__reactEvents$"+xc,NL="__reactListeners$"+xc,DL="__reactHandles$"+xc;function ol(a){var c=a[Hi];if(c)return c;for(var f=a.parentNode;f;){if(c=f[Qs]||f[Hi]){if(f=c.alternate,c.child!==null||f!==null&&f.child!==null)for(a=rb(a);a!==null;){if(f=a[Hi])return f;a=rb(a)}return c}a=f,f=a.parentNode}return null}function vh(a){return a=a[Hi]||a[Qs],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function Sc(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(t(33))}function Yd(a){return a[yh]||null}var d0=[],bc=-1;function Lo(a){return{current:a}}function bt(a){0>bc||(a.current=d0[bc],d0[bc]=null,bc--)}function xt(a,c){bc++,d0[bc]=a.current,a.current=c}var Vo={},Rn=Lo(Vo),ar=Lo(!1),al=Vo;function Tc(a,c){var f=a.type.contextTypes;if(!f)return Vo;var g=a.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===c)return g.__reactInternalMemoizedMaskedChildContext;var w={},x;for(x in f)w[x]=c[x];return g&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=c,a.__reactInternalMemoizedMaskedChildContext=w),w}function lr(a){return a=a.childContextTypes,a!=null}function Jd(){bt(ar),bt(Rn)}function ib(a,c,f){if(Rn.current!==Vo)throw Error(t(168));xt(Rn,c),xt(ar,f)}function sb(a,c,f){var g=a.stateNode;if(c=c.childContextTypes,typeof g.getChildContext!="function")return f;g=g.getChildContext();for(var w in g)if(!(w in c))throw Error(t(108,Pe(a)||"Unknown",w));return se({},f,g)}function Zd(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Vo,al=Rn.current,xt(Rn,a),xt(ar,ar.current),!0}function ob(a,c,f){var g=a.stateNode;if(!g)throw Error(t(169));f?(a=sb(a,c,al),g.__reactInternalMemoizedMergedChildContext=a,bt(ar),bt(Rn),xt(Rn,a)):bt(ar),xt(ar,f)}var js=null,ep=!1,p0=!1;function ab(a){js===null?js=[a]:js.push(a)}function ML(a){ep=!0,ab(a)}function Fo(){if(!p0&&js!==null){p0=!0;var a=0,c=et;try{var f=js;for(et=1;a<f.length;a++){var g=f[a];do g=g(!0);while(g!==null)}js=null,ep=!1}catch(w){throw js!==null&&(js=js.slice(a+1)),rc(Ja,Fo),w}finally{et=c,p0=!1}}return null}var _c=[],Ec=0,tp=null,np=0,Xr=[],Kr=0,ll=null,zs=1,$s="";function cl(a,c){_c[Ec++]=np,_c[Ec++]=tp,tp=a,np=c}function lb(a,c,f){Xr[Kr++]=zs,Xr[Kr++]=$s,Xr[Kr++]=ll,ll=a;var g=zs;a=$s;var w=32-Wn(g)-1;g&=~(1<<w),f+=1;var x=32-Wn(c)+w;if(30<x){var E=w-w%5;x=(g&(1<<E)-1).toString(32),g>>=E,w-=E,zs=1<<32-Wn(c)+w|f<<w|g,$s=x+a}else zs=1<<x|f<<w|g,$s=a}function m0(a){a.return!==null&&(cl(a,1),lb(a,1,0))}function g0(a){for(;a===tp;)tp=_c[--Ec],_c[Ec]=null,np=_c[--Ec],_c[Ec]=null;for(;a===ll;)ll=Xr[--Kr],Xr[Kr]=null,$s=Xr[--Kr],Xr[Kr]=null,zs=Xr[--Kr],Xr[Kr]=null}var Ar=null,Rr=null,Ct=!1,Oi=null;function cb(a,c){var f=ei(5,null,null,0);f.elementType="DELETED",f.stateNode=c,f.return=a,c=a.deletions,c===null?(a.deletions=[f],a.flags|=16):c.push(f)}function ub(a,c){switch(a.tag){case 5:var f=a.type;return c=c.nodeType!==1||f.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(a.stateNode=c,Ar=a,Rr=Mo(c.firstChild),!0):!1;case 6:return c=a.pendingProps===""||c.nodeType!==3?null:c,c!==null?(a.stateNode=c,Ar=a,Rr=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(f=ll!==null?{id:zs,overflow:$s}:null,a.memoizedState={dehydrated:c,treeContext:f,retryLane:1073741824},f=ei(18,null,null,0),f.stateNode=c,f.return=a,a.child=f,Ar=a,Rr=null,!0):!1;default:return!1}}function y0(a){return(a.mode&1)!==0&&(a.flags&128)===0}function v0(a){if(Ct){var c=Rr;if(c){var f=c;if(!ub(a,c)){if(y0(a))throw Error(t(418));c=Mo(f.nextSibling);var g=Ar;c&&ub(a,c)?cb(g,f):(a.flags=a.flags&-4097|2,Ct=!1,Ar=a)}}else{if(y0(a))throw Error(t(418));a.flags=a.flags&-4097|2,Ct=!1,Ar=a}}}function hb(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;Ar=a}function rp(a){if(a!==Ar)return!1;if(!Ct)return hb(a),Ct=!0,!1;var c;if((c=a.tag!==3)&&!(c=a.tag!==5)&&(c=a.type,c=c!=="head"&&c!=="body"&&!c0(a.type,a.memoizedProps)),c&&(c=Rr)){if(y0(a))throw fb(),Error(t(418));for(;c;)cb(a,c),c=Mo(c.nextSibling)}if(hb(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(t(317));e:{for(a=a.nextSibling,c=0;a;){if(a.nodeType===8){var f=a.data;if(f==="/$"){if(c===0){Rr=Mo(a.nextSibling);break e}c--}else f!=="$"&&f!=="$!"&&f!=="$?"||c++}a=a.nextSibling}Rr=null}}else Rr=Ar?Mo(a.stateNode.nextSibling):null;return!0}function fb(){for(var a=Rr;a;)a=Mo(a.nextSibling)}function kc(){Rr=Ar=null,Ct=!1}function w0(a){Oi===null?Oi=[a]:Oi.push(a)}var LL=z.ReactCurrentBatchConfig;function wh(a,c,f){if(a=f.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(f._owner){if(f=f._owner,f){if(f.tag!==1)throw Error(t(309));var g=f.stateNode}if(!g)throw Error(t(147,a));var w=g,x=""+a;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===x?c.ref:(c=function(E){var j=w.refs;E===null?delete j[x]:j[x]=E},c._stringRef=x,c)}if(typeof a!="string")throw Error(t(284));if(!f._owner)throw Error(t(290,a))}return a}function ip(a,c){throw a=Object.prototype.toString.call(c),Error(t(31,a==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":a))}function db(a){var c=a._init;return c(a._payload)}function pb(a){function c(G,W){if(a){var Y=G.deletions;Y===null?(G.deletions=[W],G.flags|=16):Y.push(W)}}function f(G,W){if(!a)return null;for(;W!==null;)c(G,W),W=W.sibling;return null}function g(G,W){for(G=new Map;W!==null;)W.key!==null?G.set(W.key,W):G.set(W.index,W),W=W.sibling;return G}function w(G,W){return G=Wo(G,W),G.index=0,G.sibling=null,G}function x(G,W,Y){return G.index=Y,a?(Y=G.alternate,Y!==null?(Y=Y.index,Y<W?(G.flags|=2,W):Y):(G.flags|=2,W)):(G.flags|=1048576,W)}function E(G){return a&&G.alternate===null&&(G.flags|=2),G}function j(G,W,Y,de){return W===null||W.tag!==6?(W=uv(Y,G.mode,de),W.return=G,W):(W=w(W,Y),W.return=G,W)}function B(G,W,Y,de){var Ae=Y.type;return Ae===C?le(G,W,Y.props.children,de,Y.key):W!==null&&(W.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===ge&&db(Ae)===W.type)?(de=w(W,Y.props),de.ref=wh(G,W,Y),de.return=G,de):(de=Cp(Y.type,Y.key,Y.props,null,G.mode,de),de.ref=wh(G,W,Y),de.return=G,de)}function J(G,W,Y,de){return W===null||W.tag!==4||W.stateNode.containerInfo!==Y.containerInfo||W.stateNode.implementation!==Y.implementation?(W=hv(Y,G.mode,de),W.return=G,W):(W=w(W,Y.children||[]),W.return=G,W)}function le(G,W,Y,de,Ae){return W===null||W.tag!==7?(W=yl(Y,G.mode,de,Ae),W.return=G,W):(W=w(W,Y),W.return=G,W)}function he(G,W,Y){if(typeof W=="string"&&W!==""||typeof W=="number")return W=uv(""+W,G.mode,Y),W.return=G,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case $:return Y=Cp(W.type,W.key,W.props,null,G.mode,Y),Y.ref=wh(G,null,W),Y.return=G,Y;case U:return W=hv(W,G.mode,Y),W.return=G,W;case ge:var de=W._init;return he(G,de(W._payload),Y)}if($r(W)||ee(W))return W=yl(W,G.mode,Y,null),W.return=G,W;ip(G,W)}return null}function ae(G,W,Y,de){var Ae=W!==null?W.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number")return Ae!==null?null:j(G,W,""+Y,de);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case $:return Y.key===Ae?B(G,W,Y,de):null;case U:return Y.key===Ae?J(G,W,Y,de):null;case ge:return Ae=Y._init,ae(G,W,Ae(Y._payload),de)}if($r(Y)||ee(Y))return Ae!==null?null:le(G,W,Y,de,null);ip(G,Y)}return null}function xe(G,W,Y,de,Ae){if(typeof de=="string"&&de!==""||typeof de=="number")return G=G.get(Y)||null,j(W,G,""+de,Ae);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case $:return G=G.get(de.key===null?Y:de.key)||null,B(W,G,de,Ae);case U:return G=G.get(de.key===null?Y:de.key)||null,J(W,G,de,Ae);case ge:var Ne=de._init;return xe(G,W,Y,Ne(de._payload),Ae)}if($r(de)||ee(de))return G=G.get(Y)||null,le(W,G,de,Ae,null);ip(W,de)}return null}function Ee(G,W,Y,de){for(var Ae=null,Ne=null,De=W,je=W=0,un=null;De!==null&&je<Y.length;je++){De.index>je?(un=De,De=null):un=De.sibling;var lt=ae(G,De,Y[je],de);if(lt===null){De===null&&(De=un);break}a&&De&&lt.alternate===null&&c(G,De),W=x(lt,W,je),Ne===null?Ae=lt:Ne.sibling=lt,Ne=lt,De=un}if(je===Y.length)return f(G,De),Ct&&cl(G,je),Ae;if(De===null){for(;je<Y.length;je++)De=he(G,Y[je],de),De!==null&&(W=x(De,W,je),Ne===null?Ae=De:Ne.sibling=De,Ne=De);return Ct&&cl(G,je),Ae}for(De=g(G,De);je<Y.length;je++)un=xe(De,G,je,Y[je],de),un!==null&&(a&&un.alternate!==null&&De.delete(un.key===null?je:un.key),W=x(un,W,je),Ne===null?Ae=un:Ne.sibling=un,Ne=un);return a&&De.forEach(function(Ho){return c(G,Ho)}),Ct&&cl(G,je),Ae}function Ce(G,W,Y,de){var Ae=ee(Y);if(typeof Ae!="function")throw Error(t(150));if(Y=Ae.call(Y),Y==null)throw Error(t(151));for(var Ne=Ae=null,De=W,je=W=0,un=null,lt=Y.next();De!==null&&!lt.done;je++,lt=Y.next()){De.index>je?(un=De,De=null):un=De.sibling;var Ho=ae(G,De,lt.value,de);if(Ho===null){De===null&&(De=un);break}a&&De&&Ho.alternate===null&&c(G,De),W=x(Ho,W,je),Ne===null?Ae=Ho:Ne.sibling=Ho,Ne=Ho,De=un}if(lt.done)return f(G,De),Ct&&cl(G,je),Ae;if(De===null){for(;!lt.done;je++,lt=Y.next())lt=he(G,lt.value,de),lt!==null&&(W=x(lt,W,je),Ne===null?Ae=lt:Ne.sibling=lt,Ne=lt);return Ct&&cl(G,je),Ae}for(De=g(G,De);!lt.done;je++,lt=Y.next())lt=xe(De,G,je,lt.value,de),lt!==null&&(a&&lt.alternate!==null&&De.delete(lt.key===null?je:lt.key),W=x(lt,W,je),Ne===null?Ae=lt:Ne.sibling=lt,Ne=lt);return a&&De.forEach(function(mV){return c(G,mV)}),Ct&&cl(G,je),Ae}function Ft(G,W,Y,de){if(typeof Y=="object"&&Y!==null&&Y.type===C&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case $:e:{for(var Ae=Y.key,Ne=W;Ne!==null;){if(Ne.key===Ae){if(Ae=Y.type,Ae===C){if(Ne.tag===7){f(G,Ne.sibling),W=w(Ne,Y.props.children),W.return=G,G=W;break e}}else if(Ne.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===ge&&db(Ae)===Ne.type){f(G,Ne.sibling),W=w(Ne,Y.props),W.ref=wh(G,Ne,Y),W.return=G,G=W;break e}f(G,Ne);break}else c(G,Ne);Ne=Ne.sibling}Y.type===C?(W=yl(Y.props.children,G.mode,de,Y.key),W.return=G,G=W):(de=Cp(Y.type,Y.key,Y.props,null,G.mode,de),de.ref=wh(G,W,Y),de.return=G,G=de)}return E(G);case U:e:{for(Ne=Y.key;W!==null;){if(W.key===Ne)if(W.tag===4&&W.stateNode.containerInfo===Y.containerInfo&&W.stateNode.implementation===Y.implementation){f(G,W.sibling),W=w(W,Y.children||[]),W.return=G,G=W;break e}else{f(G,W);break}else c(G,W);W=W.sibling}W=hv(Y,G.mode,de),W.return=G,G=W}return E(G);case ge:return Ne=Y._init,Ft(G,W,Ne(Y._payload),de)}if($r(Y))return Ee(G,W,Y,de);if(ee(Y))return Ce(G,W,Y,de);ip(G,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"?(Y=""+Y,W!==null&&W.tag===6?(f(G,W.sibling),W=w(W,Y),W.return=G,G=W):(f(G,W),W=uv(Y,G.mode,de),W.return=G,G=W),E(G)):f(G,W)}return Ft}var Cc=pb(!0),mb=pb(!1),sp=Lo(null),op=null,Pc=null,O0=null;function x0(){O0=Pc=op=null}function S0(a){var c=sp.current;bt(sp),a._currentValue=c}function b0(a,c,f){for(;a!==null;){var g=a.alternate;if((a.childLanes&c)!==c?(a.childLanes|=c,g!==null&&(g.childLanes|=c)):g!==null&&(g.childLanes&c)!==c&&(g.childLanes|=c),a===f)break;a=a.return}}function Ac(a,c){op=a,O0=Pc=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&c)!==0&&(cr=!0),a.firstContext=null)}function Yr(a){var c=a._currentValue;if(O0!==a)if(a={context:a,memoizedValue:c,next:null},Pc===null){if(op===null)throw Error(t(308));Pc=a,op.dependencies={lanes:0,firstContext:a}}else Pc=Pc.next=a;return c}var ul=null;function T0(a){ul===null?ul=[a]:ul.push(a)}function gb(a,c,f,g){var w=c.interleaved;return w===null?(f.next=f,T0(c)):(f.next=w.next,w.next=f),c.interleaved=f,Bs(a,g)}function Bs(a,c){a.lanes|=c;var f=a.alternate;for(f!==null&&(f.lanes|=c),f=a,a=a.return;a!==null;)a.childLanes|=c,f=a.alternate,f!==null&&(f.childLanes|=c),f=a,a=a.return;return f.tag===3?f.stateNode:null}var Qo=!1;function _0(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yb(a,c){a=a.updateQueue,c.updateQueue===a&&(c.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function Us(a,c){return{eventTime:a,lane:c,tag:0,payload:null,callback:null,next:null}}function jo(a,c,f){var g=a.updateQueue;if(g===null)return null;if(g=g.shared,(st&2)!==0){var w=g.pending;return w===null?c.next=c:(c.next=w.next,w.next=c),g.pending=c,Bs(a,f)}return w=g.interleaved,w===null?(c.next=c,T0(g)):(c.next=w.next,w.next=c),g.interleaved=c,Bs(a,f)}function ap(a,c,f){if(c=c.updateQueue,c!==null&&(c=c.shared,(f&4194240)!==0)){var g=c.lanes;g&=a.pendingLanes,f|=g,c.lanes=f,Po(a,f)}}function vb(a,c){var f=a.updateQueue,g=a.alternate;if(g!==null&&(g=g.updateQueue,f===g)){var w=null,x=null;if(f=f.firstBaseUpdate,f!==null){do{var E={eventTime:f.eventTime,lane:f.lane,tag:f.tag,payload:f.payload,callback:f.callback,next:null};x===null?w=x=E:x=x.next=E,f=f.next}while(f!==null);x===null?w=x=c:x=x.next=c}else w=x=c;f={baseState:g.baseState,firstBaseUpdate:w,lastBaseUpdate:x,shared:g.shared,effects:g.effects},a.updateQueue=f;return}a=f.lastBaseUpdate,a===null?f.firstBaseUpdate=c:a.next=c,f.lastBaseUpdate=c}function lp(a,c,f,g){var w=a.updateQueue;Qo=!1;var x=w.firstBaseUpdate,E=w.lastBaseUpdate,j=w.shared.pending;if(j!==null){w.shared.pending=null;var B=j,J=B.next;B.next=null,E===null?x=J:E.next=J,E=B;var le=a.alternate;le!==null&&(le=le.updateQueue,j=le.lastBaseUpdate,j!==E&&(j===null?le.firstBaseUpdate=J:j.next=J,le.lastBaseUpdate=B))}if(x!==null){var he=w.baseState;E=0,le=J=B=null,j=x;do{var ae=j.lane,xe=j.eventTime;if((g&ae)===ae){le!==null&&(le=le.next={eventTime:xe,lane:0,tag:j.tag,payload:j.payload,callback:j.callback,next:null});e:{var Ee=a,Ce=j;switch(ae=c,xe=f,Ce.tag){case 1:if(Ee=Ce.payload,typeof Ee=="function"){he=Ee.call(xe,he,ae);break e}he=Ee;break e;case 3:Ee.flags=Ee.flags&-65537|128;case 0:if(Ee=Ce.payload,ae=typeof Ee=="function"?Ee.call(xe,he,ae):Ee,ae==null)break e;he=se({},he,ae);break e;case 2:Qo=!0}}j.callback!==null&&j.lane!==0&&(a.flags|=64,ae=w.effects,ae===null?w.effects=[j]:ae.push(j))}else xe={eventTime:xe,lane:ae,tag:j.tag,payload:j.payload,callback:j.callback,next:null},le===null?(J=le=xe,B=he):le=le.next=xe,E|=ae;if(j=j.next,j===null){if(j=w.shared.pending,j===null)break;ae=j,j=ae.next,ae.next=null,w.lastBaseUpdate=ae,w.shared.pending=null}}while(!0);if(le===null&&(B=he),w.baseState=B,w.firstBaseUpdate=J,w.lastBaseUpdate=le,c=w.shared.interleaved,c!==null){w=c;do E|=w.lane,w=w.next;while(w!==c)}else x===null&&(w.shared.lanes=0);dl|=E,a.lanes=E,a.memoizedState=he}}function wb(a,c,f){if(a=c.effects,c.effects=null,a!==null)for(c=0;c<a.length;c++){var g=a[c],w=g.callback;if(w!==null){if(g.callback=null,g=f,typeof w!="function")throw Error(t(191,w));w.call(g)}}}var Oh={},Gi=Lo(Oh),xh=Lo(Oh),Sh=Lo(Oh);function hl(a){if(a===Oh)throw Error(t(174));return a}function E0(a,c){switch(xt(Sh,c),xt(xh,a),xt(Gi,Oh),a=c.nodeType,a){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:wt(null,"");break;default:a=a===8?c.parentNode:c,c=a.namespaceURI||null,a=a.tagName,c=wt(c,a)}bt(Gi),xt(Gi,c)}function Rc(){bt(Gi),bt(xh),bt(Sh)}function Ob(a){hl(Sh.current);var c=hl(Gi.current),f=wt(c,a.type);c!==f&&(xt(xh,a),xt(Gi,f))}function k0(a){xh.current===a&&(bt(Gi),bt(xh))}var It=Lo(0);function cp(a){for(var c=a;c!==null;){if(c.tag===13){var f=c.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||f.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var C0=[];function P0(){for(var a=0;a<C0.length;a++)C0[a]._workInProgressVersionPrimary=null;C0.length=0}var up=z.ReactCurrentDispatcher,A0=z.ReactCurrentBatchConfig,fl=0,Nt=null,Kt=null,ln=null,hp=!1,bh=!1,Th=0,VL=0;function In(){throw Error(t(321))}function R0(a,c){if(c===null)return!1;for(var f=0;f<c.length&&f<a.length;f++)if(!wi(a[f],c[f]))return!1;return!0}function I0(a,c,f,g,w,x){if(fl=x,Nt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,up.current=a===null||a.memoizedState===null?zL:$L,a=f(g,w),bh){x=0;do{if(bh=!1,Th=0,25<=x)throw Error(t(301));x+=1,ln=Kt=null,c.updateQueue=null,up.current=BL,a=f(g,w)}while(bh)}if(up.current=pp,c=Kt!==null&&Kt.next!==null,fl=0,ln=Kt=Nt=null,hp=!1,c)throw Error(t(300));return a}function N0(){var a=Th!==0;return Th=0,a}function Xi(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ln===null?Nt.memoizedState=ln=a:ln=ln.next=a,ln}function Jr(){if(Kt===null){var a=Nt.alternate;a=a!==null?a.memoizedState:null}else a=Kt.next;var c=ln===null?Nt.memoizedState:ln.next;if(c!==null)ln=c,Kt=a;else{if(a===null)throw Error(t(310));Kt=a,a={memoizedState:Kt.memoizedState,baseState:Kt.baseState,baseQueue:Kt.baseQueue,queue:Kt.queue,next:null},ln===null?Nt.memoizedState=ln=a:ln=ln.next=a}return ln}function _h(a,c){return typeof c=="function"?c(a):c}function D0(a){var c=Jr(),f=c.queue;if(f===null)throw Error(t(311));f.lastRenderedReducer=a;var g=Kt,w=g.baseQueue,x=f.pending;if(x!==null){if(w!==null){var E=w.next;w.next=x.next,x.next=E}g.baseQueue=w=x,f.pending=null}if(w!==null){x=w.next,g=g.baseState;var j=E=null,B=null,J=x;do{var le=J.lane;if((fl&le)===le)B!==null&&(B=B.next={lane:0,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),g=J.hasEagerState?J.eagerState:a(g,J.action);else{var he={lane:le,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null};B===null?(j=B=he,E=g):B=B.next=he,Nt.lanes|=le,dl|=le}J=J.next}while(J!==null&&J!==x);B===null?E=g:B.next=j,wi(g,c.memoizedState)||(cr=!0),c.memoizedState=g,c.baseState=E,c.baseQueue=B,f.lastRenderedState=g}if(a=f.interleaved,a!==null){w=a;do x=w.lane,Nt.lanes|=x,dl|=x,w=w.next;while(w!==a)}else w===null&&(f.lanes=0);return[c.memoizedState,f.dispatch]}function M0(a){var c=Jr(),f=c.queue;if(f===null)throw Error(t(311));f.lastRenderedReducer=a;var g=f.dispatch,w=f.pending,x=c.memoizedState;if(w!==null){f.pending=null;var E=w=w.next;do x=a(x,E.action),E=E.next;while(E!==w);wi(x,c.memoizedState)||(cr=!0),c.memoizedState=x,c.baseQueue===null&&(c.baseState=x),f.lastRenderedState=x}return[x,g]}function xb(){}function Sb(a,c){var f=Nt,g=Jr(),w=c(),x=!wi(g.memoizedState,w);if(x&&(g.memoizedState=w,cr=!0),g=g.queue,L0(_b.bind(null,f,g,a),[a]),g.getSnapshot!==c||x||ln!==null&&ln.memoizedState.tag&1){if(f.flags|=2048,Eh(9,Tb.bind(null,f,g,w,c),void 0,null),cn===null)throw Error(t(349));(fl&30)!==0||bb(f,c,w)}return w}function bb(a,c,f){a.flags|=16384,a={getSnapshot:c,value:f},c=Nt.updateQueue,c===null?(c={lastEffect:null,stores:null},Nt.updateQueue=c,c.stores=[a]):(f=c.stores,f===null?c.stores=[a]:f.push(a))}function Tb(a,c,f,g){c.value=f,c.getSnapshot=g,Eb(c)&&kb(a)}function _b(a,c,f){return f(function(){Eb(c)&&kb(a)})}function Eb(a){var c=a.getSnapshot;a=a.value;try{var f=c();return!wi(a,f)}catch{return!0}}function kb(a){var c=Bs(a,1);c!==null&&Ti(c,a,1,-1)}function Cb(a){var c=Xi();return typeof a=="function"&&(a=a()),c.memoizedState=c.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_h,lastRenderedState:a},c.queue=a,a=a.dispatch=jL.bind(null,Nt,a),[c.memoizedState,a]}function Eh(a,c,f,g){return a={tag:a,create:c,destroy:f,deps:g,next:null},c=Nt.updateQueue,c===null?(c={lastEffect:null,stores:null},Nt.updateQueue=c,c.lastEffect=a.next=a):(f=c.lastEffect,f===null?c.lastEffect=a.next=a:(g=f.next,f.next=a,a.next=g,c.lastEffect=a)),a}function Pb(){return Jr().memoizedState}function fp(a,c,f,g){var w=Xi();Nt.flags|=a,w.memoizedState=Eh(1|c,f,void 0,g===void 0?null:g)}function dp(a,c,f,g){var w=Jr();g=g===void 0?null:g;var x=void 0;if(Kt!==null){var E=Kt.memoizedState;if(x=E.destroy,g!==null&&R0(g,E.deps)){w.memoizedState=Eh(c,f,x,g);return}}Nt.flags|=a,w.memoizedState=Eh(1|c,f,x,g)}function Ab(a,c){return fp(8390656,8,a,c)}function L0(a,c){return dp(2048,8,a,c)}function Rb(a,c){return dp(4,2,a,c)}function Ib(a,c){return dp(4,4,a,c)}function Nb(a,c){if(typeof c=="function")return a=a(),c(a),function(){c(null)};if(c!=null)return a=a(),c.current=a,function(){c.current=null}}function Db(a,c,f){return f=f!=null?f.concat([a]):null,dp(4,4,Nb.bind(null,c,a),f)}function V0(){}function Mb(a,c){var f=Jr();c=c===void 0?null:c;var g=f.memoizedState;return g!==null&&c!==null&&R0(c,g[1])?g[0]:(f.memoizedState=[a,c],a)}function Lb(a,c){var f=Jr();c=c===void 0?null:c;var g=f.memoizedState;return g!==null&&c!==null&&R0(c,g[1])?g[0]:(a=a(),f.memoizedState=[a,c],a)}function Vb(a,c,f){return(fl&21)===0?(a.baseState&&(a.baseState=!1,cr=!0),a.memoizedState=f):(wi(f,c)||(f=tl(),Nt.lanes|=f,dl|=f,a.baseState=!0),c)}function FL(a,c){var f=et;et=f!==0&&4>f?f:4,a(!0);var g=A0.transition;A0.transition={};try{a(!1),c()}finally{et=f,A0.transition=g}}function Fb(){return Jr().memoizedState}function QL(a,c,f){var g=Uo(a);if(f={lane:g,action:f,hasEagerState:!1,eagerState:null,next:null},Qb(a))jb(c,f);else if(f=gb(a,c,f,g),f!==null){var w=Xn();Ti(f,a,g,w),zb(f,c,g)}}function jL(a,c,f){var g=Uo(a),w={lane:g,action:f,hasEagerState:!1,eagerState:null,next:null};if(Qb(a))jb(c,w);else{var x=a.alternate;if(a.lanes===0&&(x===null||x.lanes===0)&&(x=c.lastRenderedReducer,x!==null))try{var E=c.lastRenderedState,j=x(E,f);if(w.hasEagerState=!0,w.eagerState=j,wi(j,E)){var B=c.interleaved;B===null?(w.next=w,T0(c)):(w.next=B.next,B.next=w),c.interleaved=w;return}}catch{}finally{}f=gb(a,c,w,g),f!==null&&(w=Xn(),Ti(f,a,g,w),zb(f,c,g))}}function Qb(a){var c=a.alternate;return a===Nt||c!==null&&c===Nt}function jb(a,c){bh=hp=!0;var f=a.pending;f===null?c.next=c:(c.next=f.next,f.next=c),a.pending=c}function zb(a,c,f){if((f&4194240)!==0){var g=c.lanes;g&=a.pendingLanes,f|=g,c.lanes=f,Po(a,f)}}var pp={readContext:Yr,useCallback:In,useContext:In,useEffect:In,useImperativeHandle:In,useInsertionEffect:In,useLayoutEffect:In,useMemo:In,useReducer:In,useRef:In,useState:In,useDebugValue:In,useDeferredValue:In,useTransition:In,useMutableSource:In,useSyncExternalStore:In,useId:In,unstable_isNewReconciler:!1},zL={readContext:Yr,useCallback:function(a,c){return Xi().memoizedState=[a,c===void 0?null:c],a},useContext:Yr,useEffect:Ab,useImperativeHandle:function(a,c,f){return f=f!=null?f.concat([a]):null,fp(4194308,4,Nb.bind(null,c,a),f)},useLayoutEffect:function(a,c){return fp(4194308,4,a,c)},useInsertionEffect:function(a,c){return fp(4,2,a,c)},useMemo:function(a,c){var f=Xi();return c=c===void 0?null:c,a=a(),f.memoizedState=[a,c],a},useReducer:function(a,c,f){var g=Xi();return c=f!==void 0?f(c):c,g.memoizedState=g.baseState=c,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:c},g.queue=a,a=a.dispatch=QL.bind(null,Nt,a),[g.memoizedState,a]},useRef:function(a){var c=Xi();return a={current:a},c.memoizedState=a},useState:Cb,useDebugValue:V0,useDeferredValue:function(a){return Xi().memoizedState=a},useTransition:function(){var a=Cb(!1),c=a[0];return a=FL.bind(null,a[1]),Xi().memoizedState=a,[c,a]},useMutableSource:function(){},useSyncExternalStore:function(a,c,f){var g=Nt,w=Xi();if(Ct){if(f===void 0)throw Error(t(407));f=f()}else{if(f=c(),cn===null)throw Error(t(349));(fl&30)!==0||bb(g,c,f)}w.memoizedState=f;var x={value:f,getSnapshot:c};return w.queue=x,Ab(_b.bind(null,g,x,a),[a]),g.flags|=2048,Eh(9,Tb.bind(null,g,x,f,c),void 0,null),f},useId:function(){var a=Xi(),c=cn.identifierPrefix;if(Ct){var f=$s,g=zs;f=(g&~(1<<32-Wn(g)-1)).toString(32)+f,c=":"+c+"R"+f,f=Th++,0<f&&(c+="H"+f.toString(32)),c+=":"}else f=VL++,c=":"+c+"r"+f.toString(32)+":";return a.memoizedState=c},unstable_isNewReconciler:!1},$L={readContext:Yr,useCallback:Mb,useContext:Yr,useEffect:L0,useImperativeHandle:Db,useInsertionEffect:Rb,useLayoutEffect:Ib,useMemo:Lb,useReducer:D0,useRef:Pb,useState:function(){return D0(_h)},useDebugValue:V0,useDeferredValue:function(a){var c=Jr();return Vb(c,Kt.memoizedState,a)},useTransition:function(){var a=D0(_h)[0],c=Jr().memoizedState;return[a,c]},useMutableSource:xb,useSyncExternalStore:Sb,useId:Fb,unstable_isNewReconciler:!1},BL={readContext:Yr,useCallback:Mb,useContext:Yr,useEffect:L0,useImperativeHandle:Db,useInsertionEffect:Rb,useLayoutEffect:Ib,useMemo:Lb,useReducer:M0,useRef:Pb,useState:function(){return M0(_h)},useDebugValue:V0,useDeferredValue:function(a){var c=Jr();return Kt===null?c.memoizedState=a:Vb(c,Kt.memoizedState,a)},useTransition:function(){var a=M0(_h)[0],c=Jr().memoizedState;return[a,c]},useMutableSource:xb,useSyncExternalStore:Sb,useId:Fb,unstable_isNewReconciler:!1};function xi(a,c){if(a&&a.defaultProps){c=se({},c),a=a.defaultProps;for(var f in a)c[f]===void 0&&(c[f]=a[f]);return c}return c}function F0(a,c,f,g){c=a.memoizedState,f=f(g,c),f=f==null?c:se({},c,f),a.memoizedState=f,a.lanes===0&&(a.updateQueue.baseState=f)}var mp={isMounted:function(a){return(a=a._reactInternals)?fi(a)===a:!1},enqueueSetState:function(a,c,f){a=a._reactInternals;var g=Xn(),w=Uo(a),x=Us(g,w);x.payload=c,f!=null&&(x.callback=f),c=jo(a,x,w),c!==null&&(Ti(c,a,w,g),ap(c,a,w))},enqueueReplaceState:function(a,c,f){a=a._reactInternals;var g=Xn(),w=Uo(a),x=Us(g,w);x.tag=1,x.payload=c,f!=null&&(x.callback=f),c=jo(a,x,w),c!==null&&(Ti(c,a,w,g),ap(c,a,w))},enqueueForceUpdate:function(a,c){a=a._reactInternals;var f=Xn(),g=Uo(a),w=Us(f,g);w.tag=2,c!=null&&(w.callback=c),c=jo(a,w,g),c!==null&&(Ti(c,a,g,f),ap(c,a,g))}};function $b(a,c,f,g,w,x,E){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(g,x,E):c.prototype&&c.prototype.isPureReactComponent?!fh(f,g)||!fh(w,x):!0}function Bb(a,c,f){var g=!1,w=Vo,x=c.contextType;return typeof x=="object"&&x!==null?x=Yr(x):(w=lr(c)?al:Rn.current,g=c.contextTypes,x=(g=g!=null)?Tc(a,w):Vo),c=new c(f,x),a.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=mp,a.stateNode=c,c._reactInternals=a,g&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=w,a.__reactInternalMemoizedMaskedChildContext=x),c}function Ub(a,c,f,g){a=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(f,g),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(f,g),c.state!==a&&mp.enqueueReplaceState(c,c.state,null)}function Q0(a,c,f,g){var w=a.stateNode;w.props=f,w.state=a.memoizedState,w.refs={},_0(a);var x=c.contextType;typeof x=="object"&&x!==null?w.context=Yr(x):(x=lr(c)?al:Rn.current,w.context=Tc(a,x)),w.state=a.memoizedState,x=c.getDerivedStateFromProps,typeof x=="function"&&(F0(a,c,x,f),w.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(c=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),c!==w.state&&mp.enqueueReplaceState(w,w.state,null),lp(a,f,w,g),w.state=a.memoizedState),typeof w.componentDidMount=="function"&&(a.flags|=4194308)}function Ic(a,c){try{var f="",g=c;do f+=ke(g),g=g.return;while(g);var w=f}catch(x){w=`
Error generating stack: `+x.message+`
`+x.stack}return{value:a,source:c,stack:w,digest:null}}function j0(a,c,f){return{value:a,source:null,stack:f??null,digest:c??null}}function z0(a,c){try{console.error(c.value)}catch(f){setTimeout(function(){throw f})}}var UL=typeof WeakMap=="function"?WeakMap:Map;function qb(a,c,f){f=Us(-1,f),f.tag=3,f.payload={element:null};var g=c.value;return f.callback=function(){Sp||(Sp=!0,nv=g),z0(a,c)},f}function Wb(a,c,f){f=Us(-1,f),f.tag=3;var g=a.type.getDerivedStateFromError;if(typeof g=="function"){var w=c.value;f.payload=function(){return g(w)},f.callback=function(){z0(a,c)}}var x=a.stateNode;return x!==null&&typeof x.componentDidCatch=="function"&&(f.callback=function(){z0(a,c),typeof g!="function"&&($o===null?$o=new Set([this]):$o.add(this));var E=c.stack;this.componentDidCatch(c.value,{componentStack:E!==null?E:""})}),f}function Hb(a,c,f){var g=a.pingCache;if(g===null){g=a.pingCache=new UL;var w=new Set;g.set(c,w)}else w=g.get(c),w===void 0&&(w=new Set,g.set(c,w));w.has(f)||(w.add(f),a=iV.bind(null,a,c,f),c.then(a,a))}function Gb(a){do{var c;if((c=a.tag===13)&&(c=a.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return a;a=a.return}while(a!==null);return null}function Xb(a,c,f,g,w){return(a.mode&1)===0?(a===c?a.flags|=65536:(a.flags|=128,f.flags|=131072,f.flags&=-52805,f.tag===1&&(f.alternate===null?f.tag=17:(c=Us(-1,1),c.tag=2,jo(f,c,1))),f.lanes|=1),a):(a.flags|=65536,a.lanes=w,a)}var qL=z.ReactCurrentOwner,cr=!1;function Gn(a,c,f,g){c.child=a===null?mb(c,null,f,g):Cc(c,a.child,f,g)}function Kb(a,c,f,g,w){f=f.render;var x=c.ref;return Ac(c,w),g=I0(a,c,f,g,x,w),f=N0(),a!==null&&!cr?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~w,qs(a,c,w)):(Ct&&f&&m0(c),c.flags|=1,Gn(a,c,g,w),c.child)}function Yb(a,c,f,g,w){if(a===null){var x=f.type;return typeof x=="function"&&!cv(x)&&x.defaultProps===void 0&&f.compare===null&&f.defaultProps===void 0?(c.tag=15,c.type=x,Jb(a,c,x,g,w)):(a=Cp(f.type,null,g,c,c.mode,w),a.ref=c.ref,a.return=c,c.child=a)}if(x=a.child,(a.lanes&w)===0){var E=x.memoizedProps;if(f=f.compare,f=f!==null?f:fh,f(E,g)&&a.ref===c.ref)return qs(a,c,w)}return c.flags|=1,a=Wo(x,g),a.ref=c.ref,a.return=c,c.child=a}function Jb(a,c,f,g,w){if(a!==null){var x=a.memoizedProps;if(fh(x,g)&&a.ref===c.ref)if(cr=!1,c.pendingProps=g=x,(a.lanes&w)!==0)(a.flags&131072)!==0&&(cr=!0);else return c.lanes=a.lanes,qs(a,c,w)}return $0(a,c,f,g,w)}function Zb(a,c,f){var g=c.pendingProps,w=g.children,x=a!==null?a.memoizedState:null;if(g.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},xt(Dc,Ir),Ir|=f;else{if((f&1073741824)===0)return a=x!==null?x.baseLanes|f:f,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:a,cachePool:null,transitions:null},c.updateQueue=null,xt(Dc,Ir),Ir|=a,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=x!==null?x.baseLanes:f,xt(Dc,Ir),Ir|=g}else x!==null?(g=x.baseLanes|f,c.memoizedState=null):g=f,xt(Dc,Ir),Ir|=g;return Gn(a,c,w,f),c.child}function eT(a,c){var f=c.ref;(a===null&&f!==null||a!==null&&a.ref!==f)&&(c.flags|=512,c.flags|=2097152)}function $0(a,c,f,g,w){var x=lr(f)?al:Rn.current;return x=Tc(c,x),Ac(c,w),f=I0(a,c,f,g,x,w),g=N0(),a!==null&&!cr?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~w,qs(a,c,w)):(Ct&&g&&m0(c),c.flags|=1,Gn(a,c,f,w),c.child)}function tT(a,c,f,g,w){if(lr(f)){var x=!0;Zd(c)}else x=!1;if(Ac(c,w),c.stateNode===null)yp(a,c),Bb(c,f,g),Q0(c,f,g,w),g=!0;else if(a===null){var E=c.stateNode,j=c.memoizedProps;E.props=j;var B=E.context,J=f.contextType;typeof J=="object"&&J!==null?J=Yr(J):(J=lr(f)?al:Rn.current,J=Tc(c,J));var le=f.getDerivedStateFromProps,he=typeof le=="function"||typeof E.getSnapshotBeforeUpdate=="function";he||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(j!==g||B!==J)&&Ub(c,E,g,J),Qo=!1;var ae=c.memoizedState;E.state=ae,lp(c,g,E,w),B=c.memoizedState,j!==g||ae!==B||ar.current||Qo?(typeof le=="function"&&(F0(c,f,le,g),B=c.memoizedState),(j=Qo||$b(c,f,j,g,ae,B,J))?(he||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(c.flags|=4194308)):(typeof E.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=g,c.memoizedState=B),E.props=g,E.state=B,E.context=J,g=j):(typeof E.componentDidMount=="function"&&(c.flags|=4194308),g=!1)}else{E=c.stateNode,yb(a,c),j=c.memoizedProps,J=c.type===c.elementType?j:xi(c.type,j),E.props=J,he=c.pendingProps,ae=E.context,B=f.contextType,typeof B=="object"&&B!==null?B=Yr(B):(B=lr(f)?al:Rn.current,B=Tc(c,B));var xe=f.getDerivedStateFromProps;(le=typeof xe=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(j!==he||ae!==B)&&Ub(c,E,g,B),Qo=!1,ae=c.memoizedState,E.state=ae,lp(c,g,E,w);var Ee=c.memoizedState;j!==he||ae!==Ee||ar.current||Qo?(typeof xe=="function"&&(F0(c,f,xe,g),Ee=c.memoizedState),(J=Qo||$b(c,f,J,g,ae,Ee,B)||!1)?(le||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(g,Ee,B),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(g,Ee,B)),typeof E.componentDidUpdate=="function"&&(c.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof E.componentDidUpdate!="function"||j===a.memoizedProps&&ae===a.memoizedState||(c.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||j===a.memoizedProps&&ae===a.memoizedState||(c.flags|=1024),c.memoizedProps=g,c.memoizedState=Ee),E.props=g,E.state=Ee,E.context=B,g=J):(typeof E.componentDidUpdate!="function"||j===a.memoizedProps&&ae===a.memoizedState||(c.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||j===a.memoizedProps&&ae===a.memoizedState||(c.flags|=1024),g=!1)}return B0(a,c,f,g,x,w)}function B0(a,c,f,g,w,x){eT(a,c);var E=(c.flags&128)!==0;if(!g&&!E)return w&&ob(c,f,!1),qs(a,c,x);g=c.stateNode,qL.current=c;var j=E&&typeof f.getDerivedStateFromError!="function"?null:g.render();return c.flags|=1,a!==null&&E?(c.child=Cc(c,a.child,null,x),c.child=Cc(c,null,j,x)):Gn(a,c,j,x),c.memoizedState=g.state,w&&ob(c,f,!0),c.child}function nT(a){var c=a.stateNode;c.pendingContext?ib(a,c.pendingContext,c.pendingContext!==c.context):c.context&&ib(a,c.context,!1),E0(a,c.containerInfo)}function rT(a,c,f,g,w){return kc(),w0(w),c.flags|=256,Gn(a,c,f,g),c.child}var U0={dehydrated:null,treeContext:null,retryLane:0};function q0(a){return{baseLanes:a,cachePool:null,transitions:null}}function iT(a,c,f){var g=c.pendingProps,w=It.current,x=!1,E=(c.flags&128)!==0,j;if((j=E)||(j=a!==null&&a.memoizedState===null?!1:(w&2)!==0),j?(x=!0,c.flags&=-129):(a===null||a.memoizedState!==null)&&(w|=1),xt(It,w&1),a===null)return v0(c),a=c.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((c.mode&1)===0?c.lanes=1:a.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(E=g.children,a=g.fallback,x?(g=c.mode,x=c.child,E={mode:"hidden",children:E},(g&1)===0&&x!==null?(x.childLanes=0,x.pendingProps=E):x=Pp(E,g,0,null),a=yl(a,g,f,null),x.return=c,a.return=c,x.sibling=a,c.child=x,c.child.memoizedState=q0(f),c.memoizedState=U0,a):W0(c,E));if(w=a.memoizedState,w!==null&&(j=w.dehydrated,j!==null))return WL(a,c,E,g,j,w,f);if(x){x=g.fallback,E=c.mode,w=a.child,j=w.sibling;var B={mode:"hidden",children:g.children};return(E&1)===0&&c.child!==w?(g=c.child,g.childLanes=0,g.pendingProps=B,c.deletions=null):(g=Wo(w,B),g.subtreeFlags=w.subtreeFlags&14680064),j!==null?x=Wo(j,x):(x=yl(x,E,f,null),x.flags|=2),x.return=c,g.return=c,g.sibling=x,c.child=g,g=x,x=c.child,E=a.child.memoizedState,E=E===null?q0(f):{baseLanes:E.baseLanes|f,cachePool:null,transitions:E.transitions},x.memoizedState=E,x.childLanes=a.childLanes&~f,c.memoizedState=U0,g}return x=a.child,a=x.sibling,g=Wo(x,{mode:"visible",children:g.children}),(c.mode&1)===0&&(g.lanes=f),g.return=c,g.sibling=null,a!==null&&(f=c.deletions,f===null?(c.deletions=[a],c.flags|=16):f.push(a)),c.child=g,c.memoizedState=null,g}function W0(a,c){return c=Pp({mode:"visible",children:c},a.mode,0,null),c.return=a,a.child=c}function gp(a,c,f,g){return g!==null&&w0(g),Cc(c,a.child,null,f),a=W0(c,c.pendingProps.children),a.flags|=2,c.memoizedState=null,a}function WL(a,c,f,g,w,x,E){if(f)return c.flags&256?(c.flags&=-257,g=j0(Error(t(422))),gp(a,c,E,g)):c.memoizedState!==null?(c.child=a.child,c.flags|=128,null):(x=g.fallback,w=c.mode,g=Pp({mode:"visible",children:g.children},w,0,null),x=yl(x,w,E,null),x.flags|=2,g.return=c,x.return=c,g.sibling=x,c.child=g,(c.mode&1)!==0&&Cc(c,a.child,null,E),c.child.memoizedState=q0(E),c.memoizedState=U0,x);if((c.mode&1)===0)return gp(a,c,E,null);if(w.data==="$!"){if(g=w.nextSibling&&w.nextSibling.dataset,g)var j=g.dgst;return g=j,x=Error(t(419)),g=j0(x,g,void 0),gp(a,c,E,g)}if(j=(E&a.childLanes)!==0,cr||j){if(g=cn,g!==null){switch(E&-E){case 4:w=2;break;case 16:w=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:w=32;break;case 536870912:w=268435456;break;default:w=0}w=(w&(g.suspendedLanes|E))!==0?0:w,w!==0&&w!==x.retryLane&&(x.retryLane=w,Bs(a,w),Ti(g,a,w,-1))}return lv(),g=j0(Error(t(421))),gp(a,c,E,g)}return w.data==="$?"?(c.flags|=128,c.child=a.child,c=sV.bind(null,a),w._reactRetry=c,null):(a=x.treeContext,Rr=Mo(w.nextSibling),Ar=c,Ct=!0,Oi=null,a!==null&&(Xr[Kr++]=zs,Xr[Kr++]=$s,Xr[Kr++]=ll,zs=a.id,$s=a.overflow,ll=c),c=W0(c,g.children),c.flags|=4096,c)}function sT(a,c,f){a.lanes|=c;var g=a.alternate;g!==null&&(g.lanes|=c),b0(a.return,c,f)}function H0(a,c,f,g,w){var x=a.memoizedState;x===null?a.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:g,tail:f,tailMode:w}:(x.isBackwards=c,x.rendering=null,x.renderingStartTime=0,x.last=g,x.tail=f,x.tailMode=w)}function oT(a,c,f){var g=c.pendingProps,w=g.revealOrder,x=g.tail;if(Gn(a,c,g.children,f),g=It.current,(g&2)!==0)g=g&1|2,c.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=c.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&sT(a,f,c);else if(a.tag===19)sT(a,f,c);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===c)break e;for(;a.sibling===null;){if(a.return===null||a.return===c)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}g&=1}if(xt(It,g),(c.mode&1)===0)c.memoizedState=null;else switch(w){case"forwards":for(f=c.child,w=null;f!==null;)a=f.alternate,a!==null&&cp(a)===null&&(w=f),f=f.sibling;f=w,f===null?(w=c.child,c.child=null):(w=f.sibling,f.sibling=null),H0(c,!1,w,f,x);break;case"backwards":for(f=null,w=c.child,c.child=null;w!==null;){if(a=w.alternate,a!==null&&cp(a)===null){c.child=w;break}a=w.sibling,w.sibling=f,f=w,w=a}H0(c,!0,f,null,x);break;case"together":H0(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function yp(a,c){(c.mode&1)===0&&a!==null&&(a.alternate=null,c.alternate=null,c.flags|=2)}function qs(a,c,f){if(a!==null&&(c.dependencies=a.dependencies),dl|=c.lanes,(f&c.childLanes)===0)return null;if(a!==null&&c.child!==a.child)throw Error(t(153));if(c.child!==null){for(a=c.child,f=Wo(a,a.pendingProps),c.child=f,f.return=c;a.sibling!==null;)a=a.sibling,f=f.sibling=Wo(a,a.pendingProps),f.return=c;f.sibling=null}return c.child}function HL(a,c,f){switch(c.tag){case 3:nT(c),kc();break;case 5:Ob(c);break;case 1:lr(c.type)&&Zd(c);break;case 4:E0(c,c.stateNode.containerInfo);break;case 10:var g=c.type._context,w=c.memoizedProps.value;xt(sp,g._currentValue),g._currentValue=w;break;case 13:if(g=c.memoizedState,g!==null)return g.dehydrated!==null?(xt(It,It.current&1),c.flags|=128,null):(f&c.child.childLanes)!==0?iT(a,c,f):(xt(It,It.current&1),a=qs(a,c,f),a!==null?a.sibling:null);xt(It,It.current&1);break;case 19:if(g=(f&c.childLanes)!==0,(a.flags&128)!==0){if(g)return oT(a,c,f);c.flags|=128}if(w=c.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),xt(It,It.current),g)break;return null;case 22:case 23:return c.lanes=0,Zb(a,c,f)}return qs(a,c,f)}var aT,G0,lT,cT;aT=function(a,c){for(var f=c.child;f!==null;){if(f.tag===5||f.tag===6)a.appendChild(f.stateNode);else if(f.tag!==4&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return;f=f.return}f.sibling.return=f.return,f=f.sibling}},G0=function(){},lT=function(a,c,f,g){var w=a.memoizedProps;if(w!==g){a=c.stateNode,hl(Gi.current);var x=null;switch(f){case"input":w=zr(a,w),g=zr(a,g),x=[];break;case"select":w=se({},w,{value:void 0}),g=se({},g,{value:void 0}),x=[];break;case"textarea":w=So(a,w),g=So(a,g),x=[];break;default:typeof w.onClick!="function"&&typeof g.onClick=="function"&&(a.onclick=Kd)}Ur(f,g);var E;f=null;for(J in w)if(!g.hasOwnProperty(J)&&w.hasOwnProperty(J)&&w[J]!=null)if(J==="style"){var j=w[J];for(E in j)j.hasOwnProperty(E)&&(f||(f={}),f[E]="")}else J!=="dangerouslySetInnerHTML"&&J!=="children"&&J!=="suppressContentEditableWarning"&&J!=="suppressHydrationWarning"&&J!=="autoFocus"&&(i.hasOwnProperty(J)?x||(x=[]):(x=x||[]).push(J,null));for(J in g){var B=g[J];if(j=w!=null?w[J]:void 0,g.hasOwnProperty(J)&&B!==j&&(B!=null||j!=null))if(J==="style")if(j){for(E in j)!j.hasOwnProperty(E)||B&&B.hasOwnProperty(E)||(f||(f={}),f[E]="");for(E in B)B.hasOwnProperty(E)&&j[E]!==B[E]&&(f||(f={}),f[E]=B[E])}else f||(x||(x=[]),x.push(J,f)),f=B;else J==="dangerouslySetInnerHTML"?(B=B?B.__html:void 0,j=j?j.__html:void 0,B!=null&&j!==B&&(x=x||[]).push(J,B)):J==="children"?typeof B!="string"&&typeof B!="number"||(x=x||[]).push(J,""+B):J!=="suppressContentEditableWarning"&&J!=="suppressHydrationWarning"&&(i.hasOwnProperty(J)?(B!=null&&J==="onScroll"&&St("scroll",a),x||j===B||(x=[])):(x=x||[]).push(J,B))}f&&(x=x||[]).push("style",f);var J=x;(c.updateQueue=J)&&(c.flags|=4)}},cT=function(a,c,f,g){f!==g&&(c.flags|=4)};function kh(a,c){if(!Ct)switch(a.tailMode){case"hidden":c=a.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?a.tail=null:f.sibling=null;break;case"collapsed":f=a.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?c||a.tail===null?a.tail=null:a.tail.sibling=null:g.sibling=null}}function Nn(a){var c=a.alternate!==null&&a.alternate.child===a.child,f=0,g=0;if(c)for(var w=a.child;w!==null;)f|=w.lanes|w.childLanes,g|=w.subtreeFlags&14680064,g|=w.flags&14680064,w.return=a,w=w.sibling;else for(w=a.child;w!==null;)f|=w.lanes|w.childLanes,g|=w.subtreeFlags,g|=w.flags,w.return=a,w=w.sibling;return a.subtreeFlags|=g,a.childLanes=f,c}function GL(a,c,f){var g=c.pendingProps;switch(g0(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nn(c),null;case 1:return lr(c.type)&&Jd(),Nn(c),null;case 3:return g=c.stateNode,Rc(),bt(ar),bt(Rn),P0(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(a===null||a.child===null)&&(rp(c)?c.flags|=4:a===null||a.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,Oi!==null&&(sv(Oi),Oi=null))),G0(a,c),Nn(c),null;case 5:k0(c);var w=hl(Sh.current);if(f=c.type,a!==null&&c.stateNode!=null)lT(a,c,f,g,w),a.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!g){if(c.stateNode===null)throw Error(t(166));return Nn(c),null}if(a=hl(Gi.current),rp(c)){g=c.stateNode,f=c.type;var x=c.memoizedProps;switch(g[Hi]=c,g[yh]=x,a=(c.mode&1)!==0,f){case"dialog":St("cancel",g),St("close",g);break;case"iframe":case"object":case"embed":St("load",g);break;case"video":case"audio":for(w=0;w<ph.length;w++)St(ph[w],g);break;case"source":St("error",g);break;case"img":case"image":case"link":St("error",g),St("load",g);break;case"details":St("toggle",g);break;case"input":Fi(g,x),St("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!x.multiple},St("invalid",g);break;case"textarea":tr(g,x),St("invalid",g)}Ur(f,x),w=null;for(var E in x)if(x.hasOwnProperty(E)){var j=x[E];E==="children"?typeof j=="string"?g.textContent!==j&&(x.suppressHydrationWarning!==!0&&Xd(g.textContent,j,a),w=["children",j]):typeof j=="number"&&g.textContent!==""+j&&(x.suppressHydrationWarning!==!0&&Xd(g.textContent,j,a),w=["children",""+j]):i.hasOwnProperty(E)&&j!=null&&E==="onScroll"&&St("scroll",g)}switch(f){case"input":on(g),ji(g,x,!0);break;case"textarea":on(g),Ha(g);break;case"select":case"option":break;default:typeof x.onClick=="function"&&(g.onclick=Kd)}g=w,c.updateQueue=g,g!==null&&(c.flags|=4)}else{E=w.nodeType===9?w:w.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=at(f)),a==="http://www.w3.org/1999/xhtml"?f==="script"?(a=E.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof g.is=="string"?a=E.createElement(f,{is:g.is}):(a=E.createElement(f),f==="select"&&(E=a,g.multiple?E.multiple=!0:g.size&&(E.size=g.size))):a=E.createElementNS(a,f),a[Hi]=c,a[yh]=g,aT(a,c,!1,!1),c.stateNode=a;e:{switch(E=Xa(f,g),f){case"dialog":St("cancel",a),St("close",a),w=g;break;case"iframe":case"object":case"embed":St("load",a),w=g;break;case"video":case"audio":for(w=0;w<ph.length;w++)St(ph[w],a);w=g;break;case"source":St("error",a),w=g;break;case"img":case"image":case"link":St("error",a),St("load",a),w=g;break;case"details":St("toggle",a),w=g;break;case"input":Fi(a,g),w=zr(a,g),St("invalid",a);break;case"option":w=g;break;case"select":a._wrapperState={wasMultiple:!!g.multiple},w=se({},g,{value:void 0}),St("invalid",a);break;case"textarea":tr(a,g),w=So(a,g),St("invalid",a);break;default:w=g}Ur(f,w),j=w;for(x in j)if(j.hasOwnProperty(x)){var B=j[x];x==="style"?Br(a,B):x==="dangerouslySetInnerHTML"?(B=B?B.__html:void 0,B!=null&&Ga(a,B)):x==="children"?typeof B=="string"?(f!=="textarea"||B!=="")&&_r(a,B):typeof B=="number"&&_r(a,""+B):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(i.hasOwnProperty(x)?B!=null&&x==="onScroll"&&St("scroll",a):B!=null&&F(a,x,B,E))}switch(f){case"input":on(a),ji(a,g,!1);break;case"textarea":on(a),Ha(a);break;case"option":g.value!=null&&a.setAttribute("value",""+He(g.value));break;case"select":a.multiple=!!g.multiple,x=g.value,x!=null?Un(a,!!g.multiple,x,!1):g.defaultValue!=null&&Un(a,!!g.multiple,g.defaultValue,!0);break;default:typeof w.onClick=="function"&&(a.onclick=Kd)}switch(f){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return Nn(c),null;case 6:if(a&&c.stateNode!=null)cT(a,c,a.memoizedProps,g);else{if(typeof g!="string"&&c.stateNode===null)throw Error(t(166));if(f=hl(Sh.current),hl(Gi.current),rp(c)){if(g=c.stateNode,f=c.memoizedProps,g[Hi]=c,(x=g.nodeValue!==f)&&(a=Ar,a!==null))switch(a.tag){case 3:Xd(g.nodeValue,f,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&Xd(g.nodeValue,f,(a.mode&1)!==0)}x&&(c.flags|=4)}else g=(f.nodeType===9?f:f.ownerDocument).createTextNode(g),g[Hi]=c,c.stateNode=g}return Nn(c),null;case 13:if(bt(It),g=c.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(Ct&&Rr!==null&&(c.mode&1)!==0&&(c.flags&128)===0)fb(),kc(),c.flags|=98560,x=!1;else if(x=rp(c),g!==null&&g.dehydrated!==null){if(a===null){if(!x)throw Error(t(318));if(x=c.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(t(317));x[Hi]=c}else kc(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Nn(c),x=!1}else Oi!==null&&(sv(Oi),Oi=null),x=!0;if(!x)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=f,c):(g=g!==null,g!==(a!==null&&a.memoizedState!==null)&&g&&(c.child.flags|=8192,(c.mode&1)!==0&&(a===null||(It.current&1)!==0?Yt===0&&(Yt=3):lv())),c.updateQueue!==null&&(c.flags|=4),Nn(c),null);case 4:return Rc(),G0(a,c),a===null&&mh(c.stateNode.containerInfo),Nn(c),null;case 10:return S0(c.type._context),Nn(c),null;case 17:return lr(c.type)&&Jd(),Nn(c),null;case 19:if(bt(It),x=c.memoizedState,x===null)return Nn(c),null;if(g=(c.flags&128)!==0,E=x.rendering,E===null)if(g)kh(x,!1);else{if(Yt!==0||a!==null&&(a.flags&128)!==0)for(a=c.child;a!==null;){if(E=cp(a),E!==null){for(c.flags|=128,kh(x,!1),g=E.updateQueue,g!==null&&(c.updateQueue=g,c.flags|=4),c.subtreeFlags=0,g=f,f=c.child;f!==null;)x=f,a=g,x.flags&=14680066,E=x.alternate,E===null?(x.childLanes=0,x.lanes=a,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=E.childLanes,x.lanes=E.lanes,x.child=E.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=E.memoizedProps,x.memoizedState=E.memoizedState,x.updateQueue=E.updateQueue,x.type=E.type,a=E.dependencies,x.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),f=f.sibling;return xt(It,It.current&1|2),c.child}a=a.sibling}x.tail!==null&&Ot()>Mc&&(c.flags|=128,g=!0,kh(x,!1),c.lanes=4194304)}else{if(!g)if(a=cp(E),a!==null){if(c.flags|=128,g=!0,f=a.updateQueue,f!==null&&(c.updateQueue=f,c.flags|=4),kh(x,!0),x.tail===null&&x.tailMode==="hidden"&&!E.alternate&&!Ct)return Nn(c),null}else 2*Ot()-x.renderingStartTime>Mc&&f!==1073741824&&(c.flags|=128,g=!0,kh(x,!1),c.lanes=4194304);x.isBackwards?(E.sibling=c.child,c.child=E):(f=x.last,f!==null?f.sibling=E:c.child=E,x.last=E)}return x.tail!==null?(c=x.tail,x.rendering=c,x.tail=c.sibling,x.renderingStartTime=Ot(),c.sibling=null,f=It.current,xt(It,g?f&1|2:f&1),c):(Nn(c),null);case 22:case 23:return av(),g=c.memoizedState!==null,a!==null&&a.memoizedState!==null!==g&&(c.flags|=8192),g&&(c.mode&1)!==0?(Ir&1073741824)!==0&&(Nn(c),c.subtreeFlags&6&&(c.flags|=8192)):Nn(c),null;case 24:return null;case 25:return null}throw Error(t(156,c.tag))}function XL(a,c){switch(g0(c),c.tag){case 1:return lr(c.type)&&Jd(),a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 3:return Rc(),bt(ar),bt(Rn),P0(),a=c.flags,(a&65536)!==0&&(a&128)===0?(c.flags=a&-65537|128,c):null;case 5:return k0(c),null;case 13:if(bt(It),a=c.memoizedState,a!==null&&a.dehydrated!==null){if(c.alternate===null)throw Error(t(340));kc()}return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 19:return bt(It),null;case 4:return Rc(),null;case 10:return S0(c.type._context),null;case 22:case 23:return av(),null;case 24:return null;default:return null}}var vp=!1,Dn=!1,KL=typeof WeakSet=="function"?WeakSet:Set,_e=null;function Nc(a,c){var f=a.ref;if(f!==null)if(typeof f=="function")try{f(null)}catch(g){Mt(a,c,g)}else f.current=null}function X0(a,c,f){try{f()}catch(g){Mt(a,c,g)}}var uT=!1;function YL(a,c){if(a0=Io,a=$1(),Zy(a)){if("selectionStart"in a)var f={start:a.selectionStart,end:a.selectionEnd};else e:{f=(f=a.ownerDocument)&&f.defaultView||window;var g=f.getSelection&&f.getSelection();if(g&&g.rangeCount!==0){f=g.anchorNode;var w=g.anchorOffset,x=g.focusNode;g=g.focusOffset;try{f.nodeType,x.nodeType}catch{f=null;break e}var E=0,j=-1,B=-1,J=0,le=0,he=a,ae=null;t:for(;;){for(var xe;he!==f||w!==0&&he.nodeType!==3||(j=E+w),he!==x||g!==0&&he.nodeType!==3||(B=E+g),he.nodeType===3&&(E+=he.nodeValue.length),(xe=he.firstChild)!==null;)ae=he,he=xe;for(;;){if(he===a)break t;if(ae===f&&++J===w&&(j=E),ae===x&&++le===g&&(B=E),(xe=he.nextSibling)!==null)break;he=ae,ae=he.parentNode}he=xe}f=j===-1||B===-1?null:{start:j,end:B}}else f=null}f=f||{start:0,end:0}}else f=null;for(l0={focusedElem:a,selectionRange:f},Io=!1,_e=c;_e!==null;)if(c=_e,a=c.child,(c.subtreeFlags&1028)!==0&&a!==null)a.return=c,_e=a;else for(;_e!==null;){c=_e;try{var Ee=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(Ee!==null){var Ce=Ee.memoizedProps,Ft=Ee.memoizedState,G=c.stateNode,W=G.getSnapshotBeforeUpdate(c.elementType===c.type?Ce:xi(c.type,Ce),Ft);G.__reactInternalSnapshotBeforeUpdate=W}break;case 3:var Y=c.stateNode.containerInfo;Y.nodeType===1?Y.textContent="":Y.nodeType===9&&Y.documentElement&&Y.removeChild(Y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(de){Mt(c,c.return,de)}if(a=c.sibling,a!==null){a.return=c.return,_e=a;break}_e=c.return}return Ee=uT,uT=!1,Ee}function Ch(a,c,f){var g=c.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var w=g=g.next;do{if((w.tag&a)===a){var x=w.destroy;w.destroy=void 0,x!==void 0&&X0(c,f,x)}w=w.next}while(w!==g)}}function wp(a,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var f=c=c.next;do{if((f.tag&a)===a){var g=f.create;f.destroy=g()}f=f.next}while(f!==c)}}function K0(a){var c=a.ref;if(c!==null){var f=a.stateNode;switch(a.tag){case 5:a=f;break;default:a=f}typeof c=="function"?c(a):c.current=a}}function hT(a){var c=a.alternate;c!==null&&(a.alternate=null,hT(c)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(c=a.stateNode,c!==null&&(delete c[Hi],delete c[yh],delete c[f0],delete c[NL],delete c[DL])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function fT(a){return a.tag===5||a.tag===3||a.tag===4}function dT(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||fT(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Y0(a,c,f){var g=a.tag;if(g===5||g===6)a=a.stateNode,c?f.nodeType===8?f.parentNode.insertBefore(a,c):f.insertBefore(a,c):(f.nodeType===8?(c=f.parentNode,c.insertBefore(a,f)):(c=f,c.appendChild(a)),f=f._reactRootContainer,f!=null||c.onclick!==null||(c.onclick=Kd));else if(g!==4&&(a=a.child,a!==null))for(Y0(a,c,f),a=a.sibling;a!==null;)Y0(a,c,f),a=a.sibling}function J0(a,c,f){var g=a.tag;if(g===5||g===6)a=a.stateNode,c?f.insertBefore(a,c):f.appendChild(a);else if(g!==4&&(a=a.child,a!==null))for(J0(a,c,f),a=a.sibling;a!==null;)J0(a,c,f),a=a.sibling}var wn=null,Si=!1;function zo(a,c,f){for(f=f.child;f!==null;)pT(a,c,f),f=f.sibling}function pT(a,c,f){if(Er&&typeof Er.onCommitFiberUnmount=="function")try{Er.onCommitFiberUnmount(Za,f)}catch{}switch(f.tag){case 5:Dn||Nc(f,c);case 6:var g=wn,w=Si;wn=null,zo(a,c,f),wn=g,Si=w,wn!==null&&(Si?(a=wn,f=f.stateNode,a.nodeType===8?a.parentNode.removeChild(f):a.removeChild(f)):wn.removeChild(f.stateNode));break;case 18:wn!==null&&(Si?(a=wn,f=f.stateNode,a.nodeType===8?h0(a.parentNode,f):a.nodeType===1&&h0(a,f),yi(a)):h0(wn,f.stateNode));break;case 4:g=wn,w=Si,wn=f.stateNode.containerInfo,Si=!0,zo(a,c,f),wn=g,Si=w;break;case 0:case 11:case 14:case 15:if(!Dn&&(g=f.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){w=g=g.next;do{var x=w,E=x.destroy;x=x.tag,E!==void 0&&((x&2)!==0||(x&4)!==0)&&X0(f,c,E),w=w.next}while(w!==g)}zo(a,c,f);break;case 1:if(!Dn&&(Nc(f,c),g=f.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=f.memoizedProps,g.state=f.memoizedState,g.componentWillUnmount()}catch(j){Mt(f,c,j)}zo(a,c,f);break;case 21:zo(a,c,f);break;case 22:f.mode&1?(Dn=(g=Dn)||f.memoizedState!==null,zo(a,c,f),Dn=g):zo(a,c,f);break;default:zo(a,c,f)}}function mT(a){var c=a.updateQueue;if(c!==null){a.updateQueue=null;var f=a.stateNode;f===null&&(f=a.stateNode=new KL),c.forEach(function(g){var w=oV.bind(null,a,g);f.has(g)||(f.add(g),g.then(w,w))})}}function bi(a,c){var f=c.deletions;if(f!==null)for(var g=0;g<f.length;g++){var w=f[g];try{var x=a,E=c,j=E;e:for(;j!==null;){switch(j.tag){case 5:wn=j.stateNode,Si=!1;break e;case 3:wn=j.stateNode.containerInfo,Si=!0;break e;case 4:wn=j.stateNode.containerInfo,Si=!0;break e}j=j.return}if(wn===null)throw Error(t(160));pT(x,E,w),wn=null,Si=!1;var B=w.alternate;B!==null&&(B.return=null),w.return=null}catch(J){Mt(w,c,J)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)gT(c,a),c=c.sibling}function gT(a,c){var f=a.alternate,g=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(bi(c,a),Ki(a),g&4){try{Ch(3,a,a.return),wp(3,a)}catch(Ce){Mt(a,a.return,Ce)}try{Ch(5,a,a.return)}catch(Ce){Mt(a,a.return,Ce)}}break;case 1:bi(c,a),Ki(a),g&512&&f!==null&&Nc(f,f.return);break;case 5:if(bi(c,a),Ki(a),g&512&&f!==null&&Nc(f,f.return),a.flags&32){var w=a.stateNode;try{_r(w,"")}catch(Ce){Mt(a,a.return,Ce)}}if(g&4&&(w=a.stateNode,w!=null)){var x=a.memoizedProps,E=f!==null?f.memoizedProps:x,j=a.type,B=a.updateQueue;if(a.updateQueue=null,B!==null)try{j==="input"&&x.type==="radio"&&x.name!=null&&Qi(w,x),Xa(j,E);var J=Xa(j,x);for(E=0;E<B.length;E+=2){var le=B[E],he=B[E+1];le==="style"?Br(w,he):le==="dangerouslySetInnerHTML"?Ga(w,he):le==="children"?_r(w,he):F(w,le,he,J)}switch(j){case"input":Cs(w,x);break;case"textarea":bo(w,x);break;case"select":var ae=w._wrapperState.wasMultiple;w._wrapperState.wasMultiple=!!x.multiple;var xe=x.value;xe!=null?Un(w,!!x.multiple,xe,!1):ae!==!!x.multiple&&(x.defaultValue!=null?Un(w,!!x.multiple,x.defaultValue,!0):Un(w,!!x.multiple,x.multiple?[]:"",!1))}w[yh]=x}catch(Ce){Mt(a,a.return,Ce)}}break;case 6:if(bi(c,a),Ki(a),g&4){if(a.stateNode===null)throw Error(t(162));w=a.stateNode,x=a.memoizedProps;try{w.nodeValue=x}catch(Ce){Mt(a,a.return,Ce)}}break;case 3:if(bi(c,a),Ki(a),g&4&&f!==null&&f.memoizedState.isDehydrated)try{yi(c.containerInfo)}catch(Ce){Mt(a,a.return,Ce)}break;case 4:bi(c,a),Ki(a);break;case 13:bi(c,a),Ki(a),w=a.child,w.flags&8192&&(x=w.memoizedState!==null,w.stateNode.isHidden=x,!x||w.alternate!==null&&w.alternate.memoizedState!==null||(tv=Ot())),g&4&&mT(a);break;case 22:if(le=f!==null&&f.memoizedState!==null,a.mode&1?(Dn=(J=Dn)||le,bi(c,a),Dn=J):bi(c,a),Ki(a),g&8192){if(J=a.memoizedState!==null,(a.stateNode.isHidden=J)&&!le&&(a.mode&1)!==0)for(_e=a,le=a.child;le!==null;){for(he=_e=le;_e!==null;){switch(ae=_e,xe=ae.child,ae.tag){case 0:case 11:case 14:case 15:Ch(4,ae,ae.return);break;case 1:Nc(ae,ae.return);var Ee=ae.stateNode;if(typeof Ee.componentWillUnmount=="function"){g=ae,f=ae.return;try{c=g,Ee.props=c.memoizedProps,Ee.state=c.memoizedState,Ee.componentWillUnmount()}catch(Ce){Mt(g,f,Ce)}}break;case 5:Nc(ae,ae.return);break;case 22:if(ae.memoizedState!==null){wT(he);continue}}xe!==null?(xe.return=ae,_e=xe):wT(he)}le=le.sibling}e:for(le=null,he=a;;){if(he.tag===5){if(le===null){le=he;try{w=he.stateNode,J?(x=w.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none"):(j=he.stateNode,B=he.memoizedProps.style,E=B!=null&&B.hasOwnProperty("display")?B.display:null,j.style.display=As("display",E))}catch(Ce){Mt(a,a.return,Ce)}}}else if(he.tag===6){if(le===null)try{he.stateNode.nodeValue=J?"":he.memoizedProps}catch(Ce){Mt(a,a.return,Ce)}}else if((he.tag!==22&&he.tag!==23||he.memoizedState===null||he===a)&&he.child!==null){he.child.return=he,he=he.child;continue}if(he===a)break e;for(;he.sibling===null;){if(he.return===null||he.return===a)break e;le===he&&(le=null),he=he.return}le===he&&(le=null),he.sibling.return=he.return,he=he.sibling}}break;case 19:bi(c,a),Ki(a),g&4&&mT(a);break;case 21:break;default:bi(c,a),Ki(a)}}function Ki(a){var c=a.flags;if(c&2){try{e:{for(var f=a.return;f!==null;){if(fT(f)){var g=f;break e}f=f.return}throw Error(t(160))}switch(g.tag){case 5:var w=g.stateNode;g.flags&32&&(_r(w,""),g.flags&=-33);var x=dT(a);J0(a,x,w);break;case 3:case 4:var E=g.stateNode.containerInfo,j=dT(a);Y0(a,j,E);break;default:throw Error(t(161))}}catch(B){Mt(a,a.return,B)}a.flags&=-3}c&4096&&(a.flags&=-4097)}function JL(a,c,f){_e=a,yT(a)}function yT(a,c,f){for(var g=(a.mode&1)!==0;_e!==null;){var w=_e,x=w.child;if(w.tag===22&&g){var E=w.memoizedState!==null||vp;if(!E){var j=w.alternate,B=j!==null&&j.memoizedState!==null||Dn;j=vp;var J=Dn;if(vp=E,(Dn=B)&&!J)for(_e=w;_e!==null;)E=_e,B=E.child,E.tag===22&&E.memoizedState!==null?OT(w):B!==null?(B.return=E,_e=B):OT(w);for(;x!==null;)_e=x,yT(x),x=x.sibling;_e=w,vp=j,Dn=J}vT(a)}else(w.subtreeFlags&8772)!==0&&x!==null?(x.return=w,_e=x):vT(a)}}function vT(a){for(;_e!==null;){var c=_e;if((c.flags&8772)!==0){var f=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:Dn||wp(5,c);break;case 1:var g=c.stateNode;if(c.flags&4&&!Dn)if(f===null)g.componentDidMount();else{var w=c.elementType===c.type?f.memoizedProps:xi(c.type,f.memoizedProps);g.componentDidUpdate(w,f.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var x=c.updateQueue;x!==null&&wb(c,x,g);break;case 3:var E=c.updateQueue;if(E!==null){if(f=null,c.child!==null)switch(c.child.tag){case 5:f=c.child.stateNode;break;case 1:f=c.child.stateNode}wb(c,E,f)}break;case 5:var j=c.stateNode;if(f===null&&c.flags&4){f=j;var B=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":B.autoFocus&&f.focus();break;case"img":B.src&&(f.src=B.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var J=c.alternate;if(J!==null){var le=J.memoizedState;if(le!==null){var he=le.dehydrated;he!==null&&yi(he)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Dn||c.flags&512&&K0(c)}catch(ae){Mt(c,c.return,ae)}}if(c===a){_e=null;break}if(f=c.sibling,f!==null){f.return=c.return,_e=f;break}_e=c.return}}function wT(a){for(;_e!==null;){var c=_e;if(c===a){_e=null;break}var f=c.sibling;if(f!==null){f.return=c.return,_e=f;break}_e=c.return}}function OT(a){for(;_e!==null;){var c=_e;try{switch(c.tag){case 0:case 11:case 15:var f=c.return;try{wp(4,c)}catch(B){Mt(c,f,B)}break;case 1:var g=c.stateNode;if(typeof g.componentDidMount=="function"){var w=c.return;try{g.componentDidMount()}catch(B){Mt(c,w,B)}}var x=c.return;try{K0(c)}catch(B){Mt(c,x,B)}break;case 5:var E=c.return;try{K0(c)}catch(B){Mt(c,E,B)}}}catch(B){Mt(c,c.return,B)}if(c===a){_e=null;break}var j=c.sibling;if(j!==null){j.return=c.return,_e=j;break}_e=c.return}}var ZL=Math.ceil,Op=z.ReactCurrentDispatcher,Z0=z.ReactCurrentOwner,Zr=z.ReactCurrentBatchConfig,st=0,cn=null,Bt=null,On=0,Ir=0,Dc=Lo(0),Yt=0,Ph=null,dl=0,xp=0,ev=0,Ah=null,ur=null,tv=0,Mc=1/0,Ws=null,Sp=!1,nv=null,$o=null,bp=!1,Bo=null,Tp=0,Rh=0,rv=null,_p=-1,Ep=0;function Xn(){return(st&6)!==0?Ot():_p!==-1?_p:_p=Ot()}function Uo(a){return(a.mode&1)===0?1:(st&2)!==0&&On!==0?On&-On:LL.transition!==null?(Ep===0&&(Ep=tl()),Ep):(a=et,a!==0||(a=window.event,a=a===void 0?16:sh(a.type)),a)}function Ti(a,c,f,g){if(50<Rh)throw Rh=0,rv=null,Error(t(185));Co(a,f,g),((st&2)===0||a!==cn)&&(a===cn&&((st&2)===0&&(xp|=f),Yt===4&&qo(a,On)),hr(a,g),f===1&&st===0&&(c.mode&1)===0&&(Mc=Ot()+500,ep&&Fo()))}function hr(a,c){var f=a.callbackNode;Ds(a,c);var g=el(a,a===cn?On:0);if(g===0)f!==null&&eh(f),a.callbackNode=null,a.callbackPriority=0;else if(c=g&-g,a.callbackPriority!==c){if(f!=null&&eh(f),c===1)a.tag===0?ML(ST.bind(null,a)):ab(ST.bind(null,a)),RL(function(){(st&6)===0&&Fo()}),f=null;else{switch(Ao(g)){case 1:f=Ja;break;case 4:f=_o;break;case 16:f=Wr;break;case 536870912:f=Ed;break;default:f=Wr}f=AT(f,xT.bind(null,a))}a.callbackPriority=c,a.callbackNode=f}}function xT(a,c){if(_p=-1,Ep=0,(st&6)!==0)throw Error(t(327));var f=a.callbackNode;if(Lc()&&a.callbackNode!==f)return null;var g=el(a,a===cn?On:0);if(g===0)return null;if((g&30)!==0||(g&a.expiredLanes)!==0||c)c=kp(a,g);else{c=g;var w=st;st|=2;var x=TT();(cn!==a||On!==c)&&(Ws=null,Mc=Ot()+500,ml(a,c));do try{nV();break}catch(j){bT(a,j)}while(!0);x0(),Op.current=x,st=w,Bt!==null?c=0:(cn=null,On=0,c=Yt)}if(c!==0){if(c===2&&(w=kr(a),w!==0&&(g=w,c=iv(a,w))),c===1)throw f=Ph,ml(a,0),qo(a,g),hr(a,Ot()),f;if(c===6)qo(a,g);else{if(w=a.current.alternate,(g&30)===0&&!eV(w)&&(c=kp(a,g),c===2&&(x=kr(a),x!==0&&(g=x,c=iv(a,x))),c===1))throw f=Ph,ml(a,0),qo(a,g),hr(a,Ot()),f;switch(a.finishedWork=w,a.finishedLanes=g,c){case 0:case 1:throw Error(t(345));case 2:gl(a,ur,Ws);break;case 3:if(qo(a,g),(g&130023424)===g&&(c=tv+500-Ot(),10<c)){if(el(a,0)!==0)break;if(w=a.suspendedLanes,(w&g)!==g){Xn(),a.pingedLanes|=a.suspendedLanes&w;break}a.timeoutHandle=u0(gl.bind(null,a,ur,Ws),c);break}gl(a,ur,Ws);break;case 4:if(qo(a,g),(g&4194240)===g)break;for(c=a.eventTimes,w=-1;0<g;){var E=31-Wn(g);x=1<<E,E=c[E],E>w&&(w=E),g&=~x}if(g=w,g=Ot()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*ZL(g/1960))-g,10<g){a.timeoutHandle=u0(gl.bind(null,a,ur,Ws),g);break}gl(a,ur,Ws);break;case 5:gl(a,ur,Ws);break;default:throw Error(t(329))}}}return hr(a,Ot()),a.callbackNode===f?xT.bind(null,a):null}function iv(a,c){var f=Ah;return a.current.memoizedState.isDehydrated&&(ml(a,c).flags|=256),a=kp(a,c),a!==2&&(c=ur,ur=f,c!==null&&sv(c)),a}function sv(a){ur===null?ur=a:ur.push.apply(ur,a)}function eV(a){for(var c=a;;){if(c.flags&16384){var f=c.updateQueue;if(f!==null&&(f=f.stores,f!==null))for(var g=0;g<f.length;g++){var w=f[g],x=w.getSnapshot;w=w.value;try{if(!wi(x(),w))return!1}catch{return!1}}}if(f=c.child,c.subtreeFlags&16384&&f!==null)f.return=c,c=f;else{if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function qo(a,c){for(c&=~ev,c&=~xp,a.suspendedLanes|=c,a.pingedLanes&=~c,a=a.expirationTimes;0<c;){var f=31-Wn(c),g=1<<f;a[f]=-1,c&=~g}}function ST(a){if((st&6)!==0)throw Error(t(327));Lc();var c=el(a,0);if((c&1)===0)return hr(a,Ot()),null;var f=kp(a,c);if(a.tag!==0&&f===2){var g=kr(a);g!==0&&(c=g,f=iv(a,g))}if(f===1)throw f=Ph,ml(a,0),qo(a,c),hr(a,Ot()),f;if(f===6)throw Error(t(345));return a.finishedWork=a.current.alternate,a.finishedLanes=c,gl(a,ur,Ws),hr(a,Ot()),null}function ov(a,c){var f=st;st|=1;try{return a(c)}finally{st=f,st===0&&(Mc=Ot()+500,ep&&Fo())}}function pl(a){Bo!==null&&Bo.tag===0&&(st&6)===0&&Lc();var c=st;st|=1;var f=Zr.transition,g=et;try{if(Zr.transition=null,et=1,a)return a()}finally{et=g,Zr.transition=f,st=c,(st&6)===0&&Fo()}}function av(){Ir=Dc.current,bt(Dc)}function ml(a,c){a.finishedWork=null,a.finishedLanes=0;var f=a.timeoutHandle;if(f!==-1&&(a.timeoutHandle=-1,AL(f)),Bt!==null)for(f=Bt.return;f!==null;){var g=f;switch(g0(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&Jd();break;case 3:Rc(),bt(ar),bt(Rn),P0();break;case 5:k0(g);break;case 4:Rc();break;case 13:bt(It);break;case 19:bt(It);break;case 10:S0(g.type._context);break;case 22:case 23:av()}f=f.return}if(cn=a,Bt=a=Wo(a.current,null),On=Ir=c,Yt=0,Ph=null,ev=xp=dl=0,ur=Ah=null,ul!==null){for(c=0;c<ul.length;c++)if(f=ul[c],g=f.interleaved,g!==null){f.interleaved=null;var w=g.next,x=f.pending;if(x!==null){var E=x.next;x.next=w,g.next=E}f.pending=g}ul=null}return a}function bT(a,c){do{var f=Bt;try{if(x0(),up.current=pp,hp){for(var g=Nt.memoizedState;g!==null;){var w=g.queue;w!==null&&(w.pending=null),g=g.next}hp=!1}if(fl=0,ln=Kt=Nt=null,bh=!1,Th=0,Z0.current=null,f===null||f.return===null){Yt=1,Ph=c,Bt=null;break}e:{var x=a,E=f.return,j=f,B=c;if(c=On,j.flags|=32768,B!==null&&typeof B=="object"&&typeof B.then=="function"){var J=B,le=j,he=le.tag;if((le.mode&1)===0&&(he===0||he===11||he===15)){var ae=le.alternate;ae?(le.updateQueue=ae.updateQueue,le.memoizedState=ae.memoizedState,le.lanes=ae.lanes):(le.updateQueue=null,le.memoizedState=null)}var xe=Gb(E);if(xe!==null){xe.flags&=-257,Xb(xe,E,j,x,c),xe.mode&1&&Hb(x,J,c),c=xe,B=J;var Ee=c.updateQueue;if(Ee===null){var Ce=new Set;Ce.add(B),c.updateQueue=Ce}else Ee.add(B);break e}else{if((c&1)===0){Hb(x,J,c),lv();break e}B=Error(t(426))}}else if(Ct&&j.mode&1){var Ft=Gb(E);if(Ft!==null){(Ft.flags&65536)===0&&(Ft.flags|=256),Xb(Ft,E,j,x,c),w0(Ic(B,j));break e}}x=B=Ic(B,j),Yt!==4&&(Yt=2),Ah===null?Ah=[x]:Ah.push(x),x=E;do{switch(x.tag){case 3:x.flags|=65536,c&=-c,x.lanes|=c;var G=qb(x,B,c);vb(x,G);break e;case 1:j=B;var W=x.type,Y=x.stateNode;if((x.flags&128)===0&&(typeof W.getDerivedStateFromError=="function"||Y!==null&&typeof Y.componentDidCatch=="function"&&($o===null||!$o.has(Y)))){x.flags|=65536,c&=-c,x.lanes|=c;var de=Wb(x,j,c);vb(x,de);break e}}x=x.return}while(x!==null)}ET(f)}catch(Ae){c=Ae,Bt===f&&f!==null&&(Bt=f=f.return);continue}break}while(!0)}function TT(){var a=Op.current;return Op.current=pp,a===null?pp:a}function lv(){(Yt===0||Yt===3||Yt===2)&&(Yt=4),cn===null||(dl&268435455)===0&&(xp&268435455)===0||qo(cn,On)}function kp(a,c){var f=st;st|=2;var g=TT();(cn!==a||On!==c)&&(Ws=null,ml(a,c));do try{tV();break}catch(w){bT(a,w)}while(!0);if(x0(),st=f,Op.current=g,Bt!==null)throw Error(t(261));return cn=null,On=0,Yt}function tV(){for(;Bt!==null;)_T(Bt)}function nV(){for(;Bt!==null&&!Td();)_T(Bt)}function _T(a){var c=PT(a.alternate,a,Ir);a.memoizedProps=a.pendingProps,c===null?ET(a):Bt=c,Z0.current=null}function ET(a){var c=a;do{var f=c.alternate;if(a=c.return,(c.flags&32768)===0){if(f=GL(f,c,Ir),f!==null){Bt=f;return}}else{if(f=XL(f,c),f!==null){f.flags&=32767,Bt=f;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{Yt=6,Bt=null;return}}if(c=c.sibling,c!==null){Bt=c;return}Bt=c=a}while(c!==null);Yt===0&&(Yt=5)}function gl(a,c,f){var g=et,w=Zr.transition;try{Zr.transition=null,et=1,rV(a,c,f,g)}finally{Zr.transition=w,et=g}return null}function rV(a,c,f,g){do Lc();while(Bo!==null);if((st&6)!==0)throw Error(t(327));f=a.finishedWork;var w=a.finishedLanes;if(f===null)return null;if(a.finishedWork=null,a.finishedLanes=0,f===a.current)throw Error(t(177));a.callbackNode=null,a.callbackPriority=0;var x=f.lanes|f.childLanes;if(pt(a,x),a===cn&&(Bt=cn=null,On=0),(f.subtreeFlags&2064)===0&&(f.flags&2064)===0||bp||(bp=!0,AT(Wr,function(){return Lc(),null})),x=(f.flags&15990)!==0,(f.subtreeFlags&15990)!==0||x){x=Zr.transition,Zr.transition=null;var E=et;et=1;var j=st;st|=4,Z0.current=null,YL(a,f),gT(f,a),bL(l0),Io=!!a0,l0=a0=null,a.current=f,JL(f),qy(),st=j,et=E,Zr.transition=x}else a.current=f;if(bp&&(bp=!1,Bo=a,Tp=w),x=a.pendingLanes,x===0&&($o=null),kd(f.stateNode),hr(a,Ot()),c!==null)for(g=a.onRecoverableError,f=0;f<c.length;f++)w=c[f],g(w.value,{componentStack:w.stack,digest:w.digest});if(Sp)throw Sp=!1,a=nv,nv=null,a;return(Tp&1)!==0&&a.tag!==0&&Lc(),x=a.pendingLanes,(x&1)!==0?a===rv?Rh++:(Rh=0,rv=a):Rh=0,Fo(),null}function Lc(){if(Bo!==null){var a=Ao(Tp),c=Zr.transition,f=et;try{if(Zr.transition=null,et=16>a?16:a,Bo===null)var g=!1;else{if(a=Bo,Bo=null,Tp=0,(st&6)!==0)throw Error(t(331));var w=st;for(st|=4,_e=a.current;_e!==null;){var x=_e,E=x.child;if((_e.flags&16)!==0){var j=x.deletions;if(j!==null){for(var B=0;B<j.length;B++){var J=j[B];for(_e=J;_e!==null;){var le=_e;switch(le.tag){case 0:case 11:case 15:Ch(8,le,x)}var he=le.child;if(he!==null)he.return=le,_e=he;else for(;_e!==null;){le=_e;var ae=le.sibling,xe=le.return;if(hT(le),le===J){_e=null;break}if(ae!==null){ae.return=xe,_e=ae;break}_e=xe}}}var Ee=x.alternate;if(Ee!==null){var Ce=Ee.child;if(Ce!==null){Ee.child=null;do{var Ft=Ce.sibling;Ce.sibling=null,Ce=Ft}while(Ce!==null)}}_e=x}}if((x.subtreeFlags&2064)!==0&&E!==null)E.return=x,_e=E;else e:for(;_e!==null;){if(x=_e,(x.flags&2048)!==0)switch(x.tag){case 0:case 11:case 15:Ch(9,x,x.return)}var G=x.sibling;if(G!==null){G.return=x.return,_e=G;break e}_e=x.return}}var W=a.current;for(_e=W;_e!==null;){E=_e;var Y=E.child;if((E.subtreeFlags&2064)!==0&&Y!==null)Y.return=E,_e=Y;else e:for(E=W;_e!==null;){if(j=_e,(j.flags&2048)!==0)try{switch(j.tag){case 0:case 11:case 15:wp(9,j)}}catch(Ae){Mt(j,j.return,Ae)}if(j===E){_e=null;break e}var de=j.sibling;if(de!==null){de.return=j.return,_e=de;break e}_e=j.return}}if(st=w,Fo(),Er&&typeof Er.onPostCommitFiberRoot=="function")try{Er.onPostCommitFiberRoot(Za,a)}catch{}g=!0}return g}finally{et=f,Zr.transition=c}}return!1}function kT(a,c,f){c=Ic(f,c),c=qb(a,c,1),a=jo(a,c,1),c=Xn(),a!==null&&(Co(a,1,c),hr(a,c))}function Mt(a,c,f){if(a.tag===3)kT(a,a,f);else for(;c!==null;){if(c.tag===3){kT(c,a,f);break}else if(c.tag===1){var g=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&($o===null||!$o.has(g))){a=Ic(f,a),a=Wb(c,a,1),c=jo(c,a,1),a=Xn(),c!==null&&(Co(c,1,a),hr(c,a));break}}c=c.return}}function iV(a,c,f){var g=a.pingCache;g!==null&&g.delete(c),c=Xn(),a.pingedLanes|=a.suspendedLanes&f,cn===a&&(On&f)===f&&(Yt===4||Yt===3&&(On&130023424)===On&&500>Ot()-tv?ml(a,0):ev|=f),hr(a,c)}function CT(a,c){c===0&&((a.mode&1)===0?c=1:(c=sc,sc<<=1,(sc&130023424)===0&&(sc=4194304)));var f=Xn();a=Bs(a,c),a!==null&&(Co(a,c,f),hr(a,f))}function sV(a){var c=a.memoizedState,f=0;c!==null&&(f=c.retryLane),CT(a,f)}function oV(a,c){var f=0;switch(a.tag){case 13:var g=a.stateNode,w=a.memoizedState;w!==null&&(f=w.retryLane);break;case 19:g=a.stateNode;break;default:throw Error(t(314))}g!==null&&g.delete(c),CT(a,f)}var PT;PT=function(a,c,f){if(a!==null)if(a.memoizedProps!==c.pendingProps||ar.current)cr=!0;else{if((a.lanes&f)===0&&(c.flags&128)===0)return cr=!1,HL(a,c,f);cr=(a.flags&131072)!==0}else cr=!1,Ct&&(c.flags&1048576)!==0&&lb(c,np,c.index);switch(c.lanes=0,c.tag){case 2:var g=c.type;yp(a,c),a=c.pendingProps;var w=Tc(c,Rn.current);Ac(c,f),w=I0(null,c,g,a,w,f);var x=N0();return c.flags|=1,typeof w=="object"&&w!==null&&typeof w.render=="function"&&w.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,lr(g)?(x=!0,Zd(c)):x=!1,c.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,_0(c),w.updater=mp,c.stateNode=w,w._reactInternals=c,Q0(c,g,a,f),c=B0(null,c,g,!0,x,f)):(c.tag=0,Ct&&x&&m0(c),Gn(null,c,w,f),c=c.child),c;case 16:g=c.elementType;e:{switch(yp(a,c),a=c.pendingProps,w=g._init,g=w(g._payload),c.type=g,w=c.tag=lV(g),a=xi(g,a),w){case 0:c=$0(null,c,g,a,f);break e;case 1:c=tT(null,c,g,a,f);break e;case 11:c=Kb(null,c,g,a,f);break e;case 14:c=Yb(null,c,g,xi(g.type,a),f);break e}throw Error(t(306,g,""))}return c;case 0:return g=c.type,w=c.pendingProps,w=c.elementType===g?w:xi(g,w),$0(a,c,g,w,f);case 1:return g=c.type,w=c.pendingProps,w=c.elementType===g?w:xi(g,w),tT(a,c,g,w,f);case 3:e:{if(nT(c),a===null)throw Error(t(387));g=c.pendingProps,x=c.memoizedState,w=x.element,yb(a,c),lp(c,g,null,f);var E=c.memoizedState;if(g=E.element,x.isDehydrated)if(x={element:g,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},c.updateQueue.baseState=x,c.memoizedState=x,c.flags&256){w=Ic(Error(t(423)),c),c=rT(a,c,g,f,w);break e}else if(g!==w){w=Ic(Error(t(424)),c),c=rT(a,c,g,f,w);break e}else for(Rr=Mo(c.stateNode.containerInfo.firstChild),Ar=c,Ct=!0,Oi=null,f=mb(c,null,g,f),c.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(kc(),g===w){c=qs(a,c,f);break e}Gn(a,c,g,f)}c=c.child}return c;case 5:return Ob(c),a===null&&v0(c),g=c.type,w=c.pendingProps,x=a!==null?a.memoizedProps:null,E=w.children,c0(g,w)?E=null:x!==null&&c0(g,x)&&(c.flags|=32),eT(a,c),Gn(a,c,E,f),c.child;case 6:return a===null&&v0(c),null;case 13:return iT(a,c,f);case 4:return E0(c,c.stateNode.containerInfo),g=c.pendingProps,a===null?c.child=Cc(c,null,g,f):Gn(a,c,g,f),c.child;case 11:return g=c.type,w=c.pendingProps,w=c.elementType===g?w:xi(g,w),Kb(a,c,g,w,f);case 7:return Gn(a,c,c.pendingProps,f),c.child;case 8:return Gn(a,c,c.pendingProps.children,f),c.child;case 12:return Gn(a,c,c.pendingProps.children,f),c.child;case 10:e:{if(g=c.type._context,w=c.pendingProps,x=c.memoizedProps,E=w.value,xt(sp,g._currentValue),g._currentValue=E,x!==null)if(wi(x.value,E)){if(x.children===w.children&&!ar.current){c=qs(a,c,f);break e}}else for(x=c.child,x!==null&&(x.return=c);x!==null;){var j=x.dependencies;if(j!==null){E=x.child;for(var B=j.firstContext;B!==null;){if(B.context===g){if(x.tag===1){B=Us(-1,f&-f),B.tag=2;var J=x.updateQueue;if(J!==null){J=J.shared;var le=J.pending;le===null?B.next=B:(B.next=le.next,le.next=B),J.pending=B}}x.lanes|=f,B=x.alternate,B!==null&&(B.lanes|=f),b0(x.return,f,c),j.lanes|=f;break}B=B.next}}else if(x.tag===10)E=x.type===c.type?null:x.child;else if(x.tag===18){if(E=x.return,E===null)throw Error(t(341));E.lanes|=f,j=E.alternate,j!==null&&(j.lanes|=f),b0(E,f,c),E=x.sibling}else E=x.child;if(E!==null)E.return=x;else for(E=x;E!==null;){if(E===c){E=null;break}if(x=E.sibling,x!==null){x.return=E.return,E=x;break}E=E.return}x=E}Gn(a,c,w.children,f),c=c.child}return c;case 9:return w=c.type,g=c.pendingProps.children,Ac(c,f),w=Yr(w),g=g(w),c.flags|=1,Gn(a,c,g,f),c.child;case 14:return g=c.type,w=xi(g,c.pendingProps),w=xi(g.type,w),Yb(a,c,g,w,f);case 15:return Jb(a,c,c.type,c.pendingProps,f);case 17:return g=c.type,w=c.pendingProps,w=c.elementType===g?w:xi(g,w),yp(a,c),c.tag=1,lr(g)?(a=!0,Zd(c)):a=!1,Ac(c,f),Bb(c,g,w),Q0(c,g,w,f),B0(null,c,g,!0,a,f);case 19:return oT(a,c,f);case 22:return Zb(a,c,f)}throw Error(t(156,c.tag))};function AT(a,c){return rc(a,c)}function aV(a,c,f,g){this.tag=a,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ei(a,c,f,g){return new aV(a,c,f,g)}function cv(a){return a=a.prototype,!(!a||!a.isReactComponent)}function lV(a){if(typeof a=="function")return cv(a)?1:0;if(a!=null){if(a=a.$$typeof,a===V)return 11;if(a===me)return 14}return 2}function Wo(a,c){var f=a.alternate;return f===null?(f=ei(a.tag,c,a.key,a.mode),f.elementType=a.elementType,f.type=a.type,f.stateNode=a.stateNode,f.alternate=a,a.alternate=f):(f.pendingProps=c,f.type=a.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=a.flags&14680064,f.childLanes=a.childLanes,f.lanes=a.lanes,f.child=a.child,f.memoizedProps=a.memoizedProps,f.memoizedState=a.memoizedState,f.updateQueue=a.updateQueue,c=a.dependencies,f.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},f.sibling=a.sibling,f.index=a.index,f.ref=a.ref,f}function Cp(a,c,f,g,w,x){var E=2;if(g=a,typeof a=="function")cv(a)&&(E=1);else if(typeof a=="string")E=5;else e:switch(a){case C:return yl(f.children,w,x,c);case P:E=8,w|=8;break;case A:return a=ei(12,f,c,w|2),a.elementType=A,a.lanes=x,a;case N:return a=ei(13,f,c,w),a.elementType=N,a.lanes=x,a;case te:return a=ei(19,f,c,w),a.elementType=te,a.lanes=x,a;case fe:return Pp(f,w,x,c);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case L:E=10;break e;case Q:E=9;break e;case V:E=11;break e;case me:E=14;break e;case ge:E=16,g=null;break e}throw Error(t(130,a==null?a:typeof a,""))}return c=ei(E,f,c,w),c.elementType=a,c.type=g,c.lanes=x,c}function yl(a,c,f,g){return a=ei(7,a,g,c),a.lanes=f,a}function Pp(a,c,f,g){return a=ei(22,a,g,c),a.elementType=fe,a.lanes=f,a.stateNode={isHidden:!1},a}function uv(a,c,f){return a=ei(6,a,null,c),a.lanes=f,a}function hv(a,c,f){return c=ei(4,a.children!==null?a.children:[],a.key,c),c.lanes=f,c.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},c}function cV(a,c,f,g,w){this.tag=c,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ko(0),this.expirationTimes=ko(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ko(0),this.identifierPrefix=g,this.onRecoverableError=w,this.mutableSourceEagerHydrationData=null}function fv(a,c,f,g,w,x,E,j,B){return a=new cV(a,c,f,j,B),c===1?(c=1,x===!0&&(c|=8)):c=0,x=ei(3,null,null,c),a.current=x,x.stateNode=a,x.memoizedState={element:g,isDehydrated:f,cache:null,transitions:null,pendingSuspenseBoundaries:null},_0(x),a}function uV(a,c,f){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:U,key:g==null?null:""+g,children:a,containerInfo:c,implementation:f}}function RT(a){if(!a)return Vo;a=a._reactInternals;e:{if(fi(a)!==a||a.tag!==1)throw Error(t(170));var c=a;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(lr(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(t(171))}if(a.tag===1){var f=a.type;if(lr(f))return sb(a,f,c)}return c}function IT(a,c,f,g,w,x,E,j,B){return a=fv(f,g,!0,a,w,x,E,j,B),a.context=RT(null),f=a.current,g=Xn(),w=Uo(f),x=Us(g,w),x.callback=c??null,jo(f,x,w),a.current.lanes=w,Co(a,w,g),hr(a,g),a}function Ap(a,c,f,g){var w=c.current,x=Xn(),E=Uo(w);return f=RT(f),c.context===null?c.context=f:c.pendingContext=f,c=Us(x,E),c.payload={element:a},g=g===void 0?null:g,g!==null&&(c.callback=g),a=jo(w,c,E),a!==null&&(Ti(a,w,E,x),ap(a,w,E)),E}function Rp(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function NT(a,c){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var f=a.retryLane;a.retryLane=f!==0&&f<c?f:c}}function dv(a,c){NT(a,c),(a=a.alternate)&&NT(a,c)}function hV(){return null}var DT=typeof reportError=="function"?reportError:function(a){console.error(a)};function pv(a){this._internalRoot=a}Ip.prototype.render=pv.prototype.render=function(a){var c=this._internalRoot;if(c===null)throw Error(t(409));Ap(a,c,null,null)},Ip.prototype.unmount=pv.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var c=a.containerInfo;pl(function(){Ap(null,a,null,null)}),c[Qs]=null}};function Ip(a){this._internalRoot=a}Ip.prototype.unstable_scheduleHydration=function(a){if(a){var c=Id();a={blockedOn:null,target:a,priority:c};for(var f=0;f<Bi.length&&c!==0&&c<Bi[f].priority;f++);Bi.splice(f,0,a),f===0&&Md(a)}};function mv(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function Np(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function MT(){}function fV(a,c,f,g,w){if(w){if(typeof g=="function"){var x=g;g=function(){var J=Rp(E);x.call(J)}}var E=IT(c,g,a,0,null,!1,!1,"",MT);return a._reactRootContainer=E,a[Qs]=E.current,mh(a.nodeType===8?a.parentNode:a),pl(),E}for(;w=a.lastChild;)a.removeChild(w);if(typeof g=="function"){var j=g;g=function(){var J=Rp(B);j.call(J)}}var B=fv(a,0,!1,null,null,!1,!1,"",MT);return a._reactRootContainer=B,a[Qs]=B.current,mh(a.nodeType===8?a.parentNode:a),pl(function(){Ap(c,B,f,g)}),B}function Dp(a,c,f,g,w){var x=f._reactRootContainer;if(x){var E=x;if(typeof w=="function"){var j=w;w=function(){var B=Rp(E);j.call(B)}}Ap(c,E,a,w)}else E=fV(f,c,a,w,g);return Rp(E)}Ad=function(a){switch(a.tag){case 3:var c=a.stateNode;if(c.current.memoizedState.isDehydrated){var f=Eo(c.pendingLanes);f!==0&&(Po(c,f|1),hr(c,Ot()),(st&6)===0&&(Mc=Ot()+500,Fo()))}break;case 13:pl(function(){var g=Bs(a,1);if(g!==null){var w=Xn();Ti(g,a,1,w)}}),dv(a,1)}},oc=function(a){if(a.tag===13){var c=Bs(a,134217728);if(c!==null){var f=Xn();Ti(c,a,134217728,f)}dv(a,134217728)}},Rd=function(a){if(a.tag===13){var c=Uo(a),f=Bs(a,c);if(f!==null){var g=Xn();Ti(f,a,c,g)}dv(a,c)}},Id=function(){return et},Nd=function(a,c){var f=et;try{return et=a,c()}finally{et=f}},Ns=function(a,c,f){switch(c){case"input":if(Cs(a,f),c=f.name,f.type==="radio"&&c!=null){for(f=a;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<f.length;c++){var g=f[c];if(g!==a&&g.form===a.form){var w=Yd(g);if(!w)throw Error(t(90));br(g),Cs(g,w)}}}break;case"textarea":bo(a,f);break;case"select":c=f.value,c!=null&&Un(a,!!f.multiple,c,!1)}},Ke=ov,ut=pl;var dV={usingClientEntryPoint:!1,Events:[vh,Sc,Yd,qr,Le,ov]},Ih={findFiberByHostInstance:ol,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},pV={bundleType:Ih.bundleType,version:Ih.version,rendererPackageName:Ih.rendererPackageName,rendererConfig:Ih.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:z.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=Zu(a),a===null?null:a.stateNode},findFiberByHostInstance:Ih.findFiberByHostInstance||hV,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mp.isDisabled&&Mp.supportsFiber)try{Za=Mp.inject(pV),Er=Mp}catch{}}return fr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dV,fr.createPortal=function(a,c){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mv(c))throw Error(t(200));return uV(a,c,null,f)},fr.createRoot=function(a,c){if(!mv(a))throw Error(t(299));var f=!1,g="",w=DT;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onRecoverableError!==void 0&&(w=c.onRecoverableError)),c=fv(a,1,!1,null,null,f,!1,g,w),a[Qs]=c.current,mh(a.nodeType===8?a.parentNode:a),new pv(c)},fr.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var c=a._reactInternals;if(c===void 0)throw typeof a.render=="function"?Error(t(188)):(a=Object.keys(a).join(","),Error(t(268,a)));return a=Zu(c),a=a===null?null:a.stateNode,a},fr.flushSync=function(a){return pl(a)},fr.hydrate=function(a,c,f){if(!Np(c))throw Error(t(200));return Dp(null,a,c,!0,f)},fr.hydrateRoot=function(a,c,f){if(!mv(a))throw Error(t(405));var g=f!=null&&f.hydratedSources||null,w=!1,x="",E=DT;if(f!=null&&(f.unstable_strictMode===!0&&(w=!0),f.identifierPrefix!==void 0&&(x=f.identifierPrefix),f.onRecoverableError!==void 0&&(E=f.onRecoverableError)),c=IT(c,null,a,1,f??null,w,!1,x,E),a[Qs]=c.current,mh(a),g)for(a=0;a<g.length;a++)f=g[a],w=f._getVersion,w=w(f._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[f,w]:c.mutableSourceEagerHydrationData.push(f,w);return new Ip(c)},fr.render=function(a,c,f){if(!Np(c))throw Error(t(200));return Dp(null,a,c,!1,f)},fr.unmountComponentAtNode=function(a){if(!Np(a))throw Error(t(40));return a._reactRootContainer?(pl(function(){Dp(null,null,a,!1,function(){a._reactRootContainer=null,a[Qs]=null})}),!0):!1},fr.unstable_batchedUpdates=ov,fr.unstable_renderSubtreeIntoContainer=function(a,c,f,g){if(!Np(f))throw Error(t(200));if(a==null||a._reactInternals===void 0)throw Error(t(38));return Dp(a,c,f,!1,g)},fr.version="18.3.1-next-f1338f8080-20240426",fr}var UT;function LP(){if(UT)return wv.exports;UT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),wv.exports=SV(),wv.exports}var qT;function bV(){if(qT)return Fp;qT=1;var n=LP();return Fp.createRoot=n.createRoot,Fp.hydrateRoot=n.hydrateRoot,Fp}var TV=bV();const _V=Gf(TV),EV=1,kV=1e6;let Sv=0;function CV(){return Sv=(Sv+1)%Number.MAX_SAFE_INTEGER,Sv.toString()}const bv=new Map,WT=n=>{if(bv.has(n))return;const e=setTimeout(()=>{bv.delete(n),Zh({type:"REMOVE_TOAST",toastId:n})},kV);bv.set(n,e)},PV=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,EV)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?WT(t):n.toasts.forEach(r=>{WT(r.id)}),{...n,toasts:n.toasts.map(r=>r.id===t||t===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},Sm=[];let bm={toasts:[]};function Zh(n){bm=PV(bm,n),Sm.forEach(e=>{e(bm)})}function AV({...n}){const e=CV(),t=i=>Zh({type:"UPDATE_TOAST",toast:{...i,id:e}}),r=()=>Zh({type:"DISMISS_TOAST",toastId:e});return Zh({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:t}}function Tx(){const[n,e]=I.useState(bm);return I.useEffect(()=>(Sm.push(e),()=>{const t=Sm.indexOf(e);t>-1&&Sm.splice(t,1)}),[n]),{...n,toast:AV,dismiss:t=>Zh({type:"DISMISS_TOAST",toastId:t})}}var Yg=LP();const VP=Gf(Yg);function Zt(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n==null||n(i),t===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function HT(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function FP(...n){return e=>{let t=!1;const r=n.map(i=>{const s=HT(i,e);return!t&&typeof s=="function"&&(t=!0),s});if(t)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():HT(n[i],null)}}}}function Ri(...n){return I.useCallback(FP(...n),n)}function Xf(n,e=[]){let t=[];function r(s,o){const l=I.createContext(o),u=t.length;t=[...t,o];const h=m=>{var k;const{scope:y,children:v,...S}=m,b=((k=y==null?void 0:y[n])==null?void 0:k[u])||l,T=I.useMemo(()=>S,Object.values(S));return D.jsx(b.Provider,{value:T,children:v})};h.displayName=s+"Provider";function d(m,y){var b;const v=((b=y==null?void 0:y[n])==null?void 0:b[u])||l,S=I.useContext(v);if(S)return S;if(o!==void 0)return o;throw new Error(`\`${m}\` must be used within \`${s}\``)}return[h,d]}const i=()=>{const s=t.map(o=>I.createContext(o));return function(l){const u=(l==null?void 0:l[n])||s;return I.useMemo(()=>({[`__scope${n}`]:{...l,[n]:u}}),[l,u])}};return i.scopeName=n,[r,RV(i,...e)]}function RV(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((l,{useScope:u,scopeName:h})=>{const m=u(s)[`__scope${h}`];return{...l,...m}},{});return I.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function Xm(n){const e=NV(n),t=I.forwardRef((r,i)=>{const{children:s,...o}=r,l=I.Children.toArray(s),u=l.find(MV);if(u){const h=u.props.children,d=l.map(m=>m===u?I.Children.count(h)>1?I.Children.only(null):I.isValidElement(h)?h.props.children:null:m);return D.jsx(e,{...o,ref:i,children:I.isValidElement(h)?I.cloneElement(h,void 0,d):null})}return D.jsx(e,{...o,ref:i,children:s})});return t.displayName=`${n}.Slot`,t}var IV=Xm("Slot");function NV(n){const e=I.forwardRef((t,r)=>{const{children:i,...s}=t;if(I.isValidElement(i)){const o=VV(i),l=LV(s,i.props);return i.type!==I.Fragment&&(l.ref=r?FP(r,o):o),I.cloneElement(i,l)}return I.Children.count(i)>1?I.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var QP=Symbol("radix.slottable");function DV(n){const e=({children:t})=>D.jsx(D.Fragment,{children:t});return e.displayName=`${n}.Slottable`,e.__radixId=QP,e}function MV(n){return I.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===QP}function LV(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?t[r]=(...l)=>{s(...l),i(...l)}:i&&(t[r]=i):r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}function VV(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function FV(n){const e=n+"CollectionProvider",[t,r]=Xf(e),[i,s]=t(e,{collectionRef:{current:null},itemMap:new Map}),o=b=>{const{scope:T,children:k}=b,M=pe.useRef(null),F=pe.useRef(new Map).current;return D.jsx(i,{scope:T,itemMap:F,collectionRef:M,children:k})};o.displayName=e;const l=n+"CollectionSlot",u=Xm(l),h=pe.forwardRef((b,T)=>{const{scope:k,children:M}=b,F=s(l,k),z=Ri(T,F.collectionRef);return D.jsx(u,{ref:z,children:M})});h.displayName=l;const d=n+"CollectionItemSlot",m="data-radix-collection-item",y=Xm(d),v=pe.forwardRef((b,T)=>{const{scope:k,children:M,...F}=b,z=pe.useRef(null),$=Ri(T,z),U=s(d,k);return pe.useEffect(()=>(U.itemMap.set(z,{ref:z,...F}),()=>void U.itemMap.delete(z))),D.jsx(y,{[m]:"",ref:$,children:M})});v.displayName=d;function S(b){const T=s(n+"CollectionConsumer",b);return pe.useCallback(()=>{const M=T.collectionRef.current;if(!M)return[];const F=Array.from(M.querySelectorAll(`[${m}]`));return Array.from(T.itemMap.values()).sort((U,C)=>F.indexOf(U.ref.current)-F.indexOf(C.ref.current))},[T.collectionRef,T.itemMap])}return[{Provider:o,Slot:h,ItemSlot:v},S,r]}var QV=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Cn=QV.reduce((n,e)=>{const t=Xm(`Primitive.${e}`),r=I.forwardRef((i,s)=>{const{asChild:o,...l}=i,u=o?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),D.jsx(u,{...l,ref:s})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function jP(n,e){n&&Yg.flushSync(()=>n.dispatchEvent(e))}function ba(n){const e=I.useRef(n);return I.useEffect(()=>{e.current=n}),I.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function jV(n,e=globalThis==null?void 0:globalThis.document){const t=ba(n);I.useEffect(()=>{const r=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var zV="DismissableLayer",Qw="dismissableLayer.update",$V="dismissableLayer.pointerDownOutside",BV="dismissableLayer.focusOutside",GT,zP=I.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),_x=I.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:l,...u}=n,h=I.useContext(zP),[d,m]=I.useState(null),y=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,v]=I.useState({}),S=Ri(e,C=>m(C)),b=Array.from(h.layers),[T]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),k=b.indexOf(T),M=d?b.indexOf(d):-1,F=h.layersWithOutsidePointerEventsDisabled.size>0,z=M>=k,$=qV(C=>{const P=C.target,A=[...h.branches].some(L=>L.contains(P));!z||A||(i==null||i(C),o==null||o(C),C.defaultPrevented||l==null||l())},y),U=WV(C=>{const P=C.target;[...h.branches].some(L=>L.contains(P))||(s==null||s(C),o==null||o(C),C.defaultPrevented||l==null||l())},y);return jV(C=>{M===h.layers.size-1&&(r==null||r(C),!C.defaultPrevented&&l&&(C.preventDefault(),l()))},y),I.useEffect(()=>{if(d)return t&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(GT=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(d)),h.layers.add(d),XT(),()=>{t&&h.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=GT)}},[d,y,t,h]),I.useEffect(()=>()=>{d&&(h.layers.delete(d),h.layersWithOutsidePointerEventsDisabled.delete(d),XT())},[d,h]),I.useEffect(()=>{const C=()=>v({});return document.addEventListener(Qw,C),()=>document.removeEventListener(Qw,C)},[]),D.jsx(Cn.div,{...u,ref:S,style:{pointerEvents:F?z?"auto":"none":void 0,...n.style},onFocusCapture:Zt(n.onFocusCapture,U.onFocusCapture),onBlurCapture:Zt(n.onBlurCapture,U.onBlurCapture),onPointerDownCapture:Zt(n.onPointerDownCapture,$.onPointerDownCapture)})});_x.displayName=zV;var UV="DismissableLayerBranch",$P=I.forwardRef((n,e)=>{const t=I.useContext(zP),r=I.useRef(null),i=Ri(e,r);return I.useEffect(()=>{const s=r.current;if(s)return t.branches.add(s),()=>{t.branches.delete(s)}},[t.branches]),D.jsx(Cn.div,{...n,ref:i})});$P.displayName=UV;function qV(n,e=globalThis==null?void 0:globalThis.document){const t=ba(n),r=I.useRef(!1),i=I.useRef(()=>{});return I.useEffect(()=>{const s=l=>{if(l.target&&!r.current){let u=function(){BP($V,t,h,{discrete:!0})};const h={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=u,e.addEventListener("click",i.current,{once:!0})):u()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function WV(n,e=globalThis==null?void 0:globalThis.document){const t=ba(n),r=I.useRef(!1);return I.useEffect(()=>{const i=s=>{s.target&&!r.current&&BP(BV,t,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function XT(){const n=new CustomEvent(Qw);document.dispatchEvent(n)}function BP(n,e,t,{discrete:r}){const i=t.originalEvent.target,s=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?jP(i,s):i.dispatchEvent(s)}var HV=_x,GV=$P,Ta=globalThis!=null&&globalThis.document?I.useLayoutEffect:()=>{},XV="Portal",UP=I.forwardRef((n,e)=>{var l;const{container:t,...r}=n,[i,s]=I.useState(!1);Ta(()=>s(!0),[]);const o=t||i&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?VP.createPortal(D.jsx(Cn.div,{...r,ref:e}),o):null});UP.displayName=XV;function KV(n,e){return I.useReducer((t,r)=>e[t][r]??t,n)}var Ex=n=>{const{present:e,children:t}=n,r=YV(e),i=typeof t=="function"?t({present:r.isPresent}):I.Children.only(t),s=Ri(r.ref,JV(i));return typeof t=="function"||r.isPresent?I.cloneElement(i,{ref:s}):null};Ex.displayName="Presence";function YV(n){const[e,t]=I.useState(),r=I.useRef(null),i=I.useRef(n),s=I.useRef("none"),o=n?"mounted":"unmounted",[l,u]=KV(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return I.useEffect(()=>{const h=Qp(r.current);s.current=l==="mounted"?h:"none"},[l]),Ta(()=>{const h=r.current,d=i.current;if(d!==n){const y=s.current,v=Qp(h);n?u("MOUNT"):v==="none"||(h==null?void 0:h.display)==="none"?u("UNMOUNT"):u(d&&y!==v?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,u]),Ta(()=>{if(e){let h;const d=e.ownerDocument.defaultView??window,m=v=>{const b=Qp(r.current).includes(v.animationName);if(v.target===e&&b&&(u("ANIMATION_END"),!i.current)){const T=e.style.animationFillMode;e.style.animationFillMode="forwards",h=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=T)})}},y=v=>{v.target===e&&(s.current=Qp(r.current))};return e.addEventListener("animationstart",y),e.addEventListener("animationcancel",m),e.addEventListener("animationend",m),()=>{d.clearTimeout(h),e.removeEventListener("animationstart",y),e.removeEventListener("animationcancel",m),e.removeEventListener("animationend",m)}}else u("ANIMATION_END")},[e,u]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:I.useCallback(h=>{r.current=h?getComputedStyle(h):null,t(h)},[])}}function Qp(n){return(n==null?void 0:n.animationName)||"none"}function JV(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var ZV=MP[" useInsertionEffect ".trim().toString()]||Ta;function eF({prop:n,defaultProp:e,onChange:t=()=>{},caller:r}){const[i,s,o]=tF({defaultProp:e,onChange:t}),l=n!==void 0,u=l?n:i;{const d=I.useRef(n!==void 0);I.useEffect(()=>{const m=d.current;m!==l&&console.warn(`${r} is changing from ${m?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,r])}const h=I.useCallback(d=>{var m;if(l){const y=nF(d)?d(n):d;y!==n&&((m=o.current)==null||m.call(o,y))}else s(d)},[l,n,s,o]);return[u,h]}function tF({defaultProp:n,onChange:e}){const[t,r]=I.useState(n),i=I.useRef(t),s=I.useRef(e);return ZV(()=>{s.current=e},[e]),I.useEffect(()=>{var o;i.current!==t&&((o=s.current)==null||o.call(s,t),i.current=t)},[t,i]),[t,r,s]}function nF(n){return typeof n=="function"}var rF=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),iF="VisuallyHidden",Jg=I.forwardRef((n,e)=>D.jsx(Cn.span,{...n,ref:e,style:{...rF,...n.style}}));Jg.displayName=iF;var sF=Jg,kx="ToastProvider",[Cx,oF,aF]=FV("Toast"),[qP,oZ]=Xf("Toast",[aF]),[lF,Zg]=qP(kx),WP=n=>{const{__scopeToast:e,label:t="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:o}=n,[l,u]=I.useState(null),[h,d]=I.useState(0),m=I.useRef(!1),y=I.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${kx}\`. Expected non-empty \`string\`.`),D.jsx(Cx.Provider,{scope:e,children:D.jsx(lF,{scope:e,label:t,duration:r,swipeDirection:i,swipeThreshold:s,toastCount:h,viewport:l,onViewportChange:u,onToastAdd:I.useCallback(()=>d(v=>v+1),[]),onToastRemove:I.useCallback(()=>d(v=>v-1),[]),isFocusedToastEscapeKeyDownRef:m,isClosePausedRef:y,children:o})})};WP.displayName=kx;var HP="ToastViewport",cF=["F8"],jw="toast.viewportPause",zw="toast.viewportResume",GP=I.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:r=cF,label:i="Notifications ({hotkey})",...s}=n,o=Zg(HP,t),l=oF(t),u=I.useRef(null),h=I.useRef(null),d=I.useRef(null),m=I.useRef(null),y=Ri(e,m,o.onViewportChange),v=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),S=o.toastCount>0;I.useEffect(()=>{const T=k=>{var F;r.length!==0&&r.every(z=>k[z]||k.code===z)&&((F=m.current)==null||F.focus())};return document.addEventListener("keydown",T),()=>document.removeEventListener("keydown",T)},[r]),I.useEffect(()=>{const T=u.current,k=m.current;if(S&&T&&k){const M=()=>{if(!o.isClosePausedRef.current){const U=new CustomEvent(jw);k.dispatchEvent(U),o.isClosePausedRef.current=!0}},F=()=>{if(o.isClosePausedRef.current){const U=new CustomEvent(zw);k.dispatchEvent(U),o.isClosePausedRef.current=!1}},z=U=>{!T.contains(U.relatedTarget)&&F()},$=()=>{T.contains(document.activeElement)||F()};return T.addEventListener("focusin",M),T.addEventListener("focusout",z),T.addEventListener("pointermove",M),T.addEventListener("pointerleave",$),window.addEventListener("blur",M),window.addEventListener("focus",F),()=>{T.removeEventListener("focusin",M),T.removeEventListener("focusout",z),T.removeEventListener("pointermove",M),T.removeEventListener("pointerleave",$),window.removeEventListener("blur",M),window.removeEventListener("focus",F)}}},[S,o.isClosePausedRef]);const b=I.useCallback(({tabbingDirection:T})=>{const M=l().map(F=>{const z=F.ref.current,$=[z,...SF(z)];return T==="forwards"?$:$.reverse()});return(T==="forwards"?M.reverse():M).flat()},[l]);return I.useEffect(()=>{const T=m.current;if(T){const k=M=>{var $,U,C;const F=M.altKey||M.ctrlKey||M.metaKey;if(M.key==="Tab"&&!F){const P=document.activeElement,A=M.shiftKey;if(M.target===T&&A){($=h.current)==null||$.focus();return}const V=b({tabbingDirection:A?"backwards":"forwards"}),N=V.findIndex(te=>te===P);Tv(V.slice(N+1))?M.preventDefault():A?(U=h.current)==null||U.focus():(C=d.current)==null||C.focus()}};return T.addEventListener("keydown",k),()=>T.removeEventListener("keydown",k)}},[l,b]),D.jsxs(GV,{ref:u,role:"region","aria-label":i.replace("{hotkey}",v),tabIndex:-1,style:{pointerEvents:S?void 0:"none"},children:[S&&D.jsx($w,{ref:h,onFocusFromOutsideViewport:()=>{const T=b({tabbingDirection:"forwards"});Tv(T)}}),D.jsx(Cx.Slot,{scope:t,children:D.jsx(Cn.ol,{tabIndex:-1,...s,ref:y})}),S&&D.jsx($w,{ref:d,onFocusFromOutsideViewport:()=>{const T=b({tabbingDirection:"backwards"});Tv(T)}})]})});GP.displayName=HP;var XP="ToastFocusProxy",$w=I.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...i}=n,s=Zg(XP,t);return D.jsx(Jg,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:o=>{var h;const l=o.relatedTarget;!((h=s.viewport)!=null&&h.contains(l))&&r()}})});$w.displayName=XP;var Kf="Toast",uF="toast.swipeStart",hF="toast.swipeMove",fF="toast.swipeCancel",dF="toast.swipeEnd",KP=I.forwardRef((n,e)=>{const{forceMount:t,open:r,defaultOpen:i,onOpenChange:s,...o}=n,[l,u]=eF({prop:r,defaultProp:i??!0,onChange:s,caller:Kf});return D.jsx(Ex,{present:t||l,children:D.jsx(gF,{open:l,...o,ref:e,onClose:()=>u(!1),onPause:ba(n.onPause),onResume:ba(n.onResume),onSwipeStart:Zt(n.onSwipeStart,h=>{h.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Zt(n.onSwipeMove,h=>{const{x:d,y:m}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","move"),h.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${m}px`)}),onSwipeCancel:Zt(n.onSwipeCancel,h=>{h.currentTarget.setAttribute("data-swipe","cancel"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Zt(n.onSwipeEnd,h=>{const{x:d,y:m}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","end"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${m}px`),u(!1)})})})});KP.displayName=Kf;var[pF,mF]=qP(Kf,{onClose(){}}),gF=I.forwardRef((n,e)=>{const{__scopeToast:t,type:r="foreground",duration:i,open:s,onClose:o,onEscapeKeyDown:l,onPause:u,onResume:h,onSwipeStart:d,onSwipeMove:m,onSwipeCancel:y,onSwipeEnd:v,...S}=n,b=Zg(Kf,t),[T,k]=I.useState(null),M=Ri(e,te=>k(te)),F=I.useRef(null),z=I.useRef(null),$=i||b.duration,U=I.useRef(0),C=I.useRef($),P=I.useRef(0),{onToastAdd:A,onToastRemove:L}=b,Q=ba(()=>{var me;(T==null?void 0:T.contains(document.activeElement))&&((me=b.viewport)==null||me.focus()),o()}),V=I.useCallback(te=>{!te||te===1/0||(window.clearTimeout(P.current),U.current=new Date().getTime(),P.current=window.setTimeout(Q,te))},[Q]);I.useEffect(()=>{const te=b.viewport;if(te){const me=()=>{V(C.current),h==null||h()},ge=()=>{const fe=new Date().getTime()-U.current;C.current=C.current-fe,window.clearTimeout(P.current),u==null||u()};return te.addEventListener(jw,ge),te.addEventListener(zw,me),()=>{te.removeEventListener(jw,ge),te.removeEventListener(zw,me)}}},[b.viewport,$,u,h,V]),I.useEffect(()=>{s&&!b.isClosePausedRef.current&&V($)},[s,$,b.isClosePausedRef,V]),I.useEffect(()=>(A(),()=>L()),[A,L]);const N=I.useMemo(()=>T?rA(T):null,[T]);return b.viewport?D.jsxs(D.Fragment,{children:[N&&D.jsx(yF,{__scopeToast:t,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:N}),D.jsx(pF,{scope:t,onClose:Q,children:Yg.createPortal(D.jsx(Cx.ItemSlot,{scope:t,children:D.jsx(HV,{asChild:!0,onEscapeKeyDown:Zt(l,()=>{b.isFocusedToastEscapeKeyDownRef.current||Q(),b.isFocusedToastEscapeKeyDownRef.current=!1}),children:D.jsx(Cn.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":b.swipeDirection,...S,ref:M,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:Zt(n.onKeyDown,te=>{te.key==="Escape"&&(l==null||l(te.nativeEvent),te.nativeEvent.defaultPrevented||(b.isFocusedToastEscapeKeyDownRef.current=!0,Q()))}),onPointerDown:Zt(n.onPointerDown,te=>{te.button===0&&(F.current={x:te.clientX,y:te.clientY})}),onPointerMove:Zt(n.onPointerMove,te=>{if(!F.current)return;const me=te.clientX-F.current.x,ge=te.clientY-F.current.y,fe=!!z.current,Z=["left","right"].includes(b.swipeDirection),ee=["left","up"].includes(b.swipeDirection)?Math.min:Math.max,se=Z?ee(0,me):0,q=Z?0:ee(0,ge),K=te.pointerType==="touch"?10:2,ue={x:se,y:q},we={originalEvent:te,delta:ue};fe?(z.current=ue,jp(hF,m,we,{discrete:!1})):KT(ue,b.swipeDirection,K)?(z.current=ue,jp(uF,d,we,{discrete:!1}),te.target.setPointerCapture(te.pointerId)):(Math.abs(me)>K||Math.abs(ge)>K)&&(F.current=null)}),onPointerUp:Zt(n.onPointerUp,te=>{const me=z.current,ge=te.target;if(ge.hasPointerCapture(te.pointerId)&&ge.releasePointerCapture(te.pointerId),z.current=null,F.current=null,me){const fe=te.currentTarget,Z={originalEvent:te,delta:me};KT(me,b.swipeDirection,b.swipeThreshold)?jp(dF,v,Z,{discrete:!0}):jp(fF,y,Z,{discrete:!0}),fe.addEventListener("click",ee=>ee.preventDefault(),{once:!0})}})})})}),b.viewport)})]}):null}),yF=n=>{const{__scopeToast:e,children:t,...r}=n,i=Zg(Kf,e),[s,o]=I.useState(!1),[l,u]=I.useState(!1);return OF(()=>o(!0)),I.useEffect(()=>{const h=window.setTimeout(()=>u(!0),1e3);return()=>window.clearTimeout(h)},[]),l?null:D.jsx(UP,{asChild:!0,children:D.jsx(Jg,{...r,children:s&&D.jsxs(D.Fragment,{children:[i.label," ",t]})})})},vF="ToastTitle",YP=I.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return D.jsx(Cn.div,{...r,ref:e})});YP.displayName=vF;var wF="ToastDescription",JP=I.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return D.jsx(Cn.div,{...r,ref:e})});JP.displayName=wF;var ZP="ToastAction",eA=I.forwardRef((n,e)=>{const{altText:t,...r}=n;return t.trim()?D.jsx(nA,{altText:t,asChild:!0,children:D.jsx(Px,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${ZP}\`. Expected non-empty \`string\`.`),null)});eA.displayName=ZP;var tA="ToastClose",Px=I.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n,i=mF(tA,t);return D.jsx(nA,{asChild:!0,children:D.jsx(Cn.button,{type:"button",...r,ref:e,onClick:Zt(n.onClick,i.onClose)})})});Px.displayName=tA;var nA=I.forwardRef((n,e)=>{const{__scopeToast:t,altText:r,...i}=n;return D.jsx(Cn.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function rA(n){const e=[];return Array.from(n.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),xF(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...rA(r))}}),e}function jp(n,e,t,{discrete:r}){const i=t.originalEvent.currentTarget,s=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?jP(i,s):i.dispatchEvent(s)}var KT=(n,e,t=0)=>{const r=Math.abs(n.x),i=Math.abs(n.y),s=r>i;return e==="left"||e==="right"?s&&r>t:!s&&i>t};function OF(n=()=>{}){const e=ba(n);Ta(()=>{let t=0,r=0;return t=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}},[e])}function xF(n){return n.nodeType===n.ELEMENT_NODE}function SF(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function Tv(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var bF=WP,iA=GP,sA=KP,oA=YP,aA=JP,lA=eA,cA=Px;function uA(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=uA(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function hA(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=uA(n))&&(r&&(r+=" "),r+=e);return r}const YT=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,JT=hA,Ax=(n,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return JT(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(h=>{const d=t==null?void 0:t[h],m=s==null?void 0:s[h];if(d===null)return null;const y=YT(d)||YT(m);return i[h][y]}),l=t&&Object.entries(t).reduce((h,d)=>{let[m,y]=d;return y===void 0||(h[m]=y),h},{}),u=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((h,d)=>{let{class:m,className:y,...v}=d;return Object.entries(v).every(S=>{let[b,T]=S;return Array.isArray(T)?T.includes({...s,...l}[b]):{...s,...l}[b]===T})?[...h,m,y]:h},[]);return JT(n,o,u,t==null?void 0:t.class,t==null?void 0:t.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TF=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),fA=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var _F={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EF=I.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...l},u)=>I.createElement("svg",{ref:u,..._F,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:fA("lucide",i),...l},[...o.map(([h,d])=>I.createElement(h,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wo=(n,e)=>{const t=I.forwardRef(({className:r,...i},s)=>I.createElement(EF,{ref:s,iconNode:e,className:fA(`lucide-${TF(n)}`,r),...i}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kF=wo("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CF=wo("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dA=wo("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PF=wo("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AF=wo("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=wo("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RF=wo("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IF=wo("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NF=wo("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Rx="-",DF=n=>{const e=LF(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:o=>{const l=o.split(Rx);return l[0]===""&&l.length!==1&&l.shift(),pA(l,e)||MF(o)},getConflictingClassGroupIds:(o,l)=>{const u=t[o]||[];return l&&r[o]?[...u,...r[o]]:u}}},pA=(n,e)=>{var o;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),i=r?pA(n.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=n.join(Rx);return(o=e.validators.find(({validator:l})=>l(s)))==null?void 0:o.classGroupId},ZT=/^\[(.+)\]$/,MF=n=>{if(ZT.test(n)){const e=ZT.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},LF=n=>{const{theme:e,prefix:t}=n,r={nextPart:new Map,validators:[]};return FF(Object.entries(n.classGroups),t).forEach(([s,o])=>{Bw(o,r,s,e)}),r},Bw=(n,e,t,r)=>{n.forEach(i=>{if(typeof i=="string"){const s=i===""?e:e_(e,i);s.classGroupId=t;return}if(typeof i=="function"){if(VF(i)){Bw(i(r),e,t,r);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(([s,o])=>{Bw(o,e_(e,s),t,r)})})},e_=(n,e)=>{let t=n;return e.split(Rx).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},VF=n=>n.isThemeGetter,FF=(n,e)=>e?n.map(([t,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,l])=>[e+o,l])):s);return[t,i]}):n,QF=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const i=(s,o)=>{t.set(s,o),e++,e>n&&(e=0,r=t,t=new Map)};return{get(s){let o=t.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){t.has(s)?t.set(s,o):i(s,o)}}},mA="!",jF=n=>{const{separator:e,experimentalParseClassName:t}=n,r=e.length===1,i=e[0],s=e.length,o=l=>{const u=[];let h=0,d=0,m;for(let T=0;T<l.length;T++){let k=l[T];if(h===0){if(k===i&&(r||l.slice(T,T+s)===e)){u.push(l.slice(d,T)),d=T+s;continue}if(k==="/"){m=T;continue}}k==="["?h++:k==="]"&&h--}const y=u.length===0?l:l.substring(d),v=y.startsWith(mA),S=v?y.substring(1):y,b=m&&m>d?m-d:void 0;return{modifiers:u,hasImportantModifier:v,baseClassName:S,maybePostfixModifierPosition:b}};return t?l=>t({className:l,parseClassName:o}):o},zF=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(r=>{r[0]==="["?(e.push(...t.sort(),r),t=[]):t.push(r)}),e.push(...t.sort()),e},$F=n=>({cache:QF(n.cacheSize),parseClassName:jF(n),...DF(n)}),BF=/\s+/,UF=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=[],o=n.trim().split(BF);let l="";for(let u=o.length-1;u>=0;u-=1){const h=o[u],{modifiers:d,hasImportantModifier:m,baseClassName:y,maybePostfixModifierPosition:v}=t(h);let S=!!v,b=r(S?y.substring(0,v):y);if(!b){if(!S){l=h+(l.length>0?" "+l:l);continue}if(b=r(y),!b){l=h+(l.length>0?" "+l:l);continue}S=!1}const T=zF(d).join(":"),k=m?T+mA:T,M=k+b;if(s.includes(M))continue;s.push(M);const F=i(b,S);for(let z=0;z<F.length;++z){const $=F[z];s.push(k+$)}l=h+(l.length>0?" "+l:l)}return l};function qF(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=gA(e))&&(r&&(r+=" "),r+=t);return r}const gA=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=gA(n[r]))&&(t&&(t+=" "),t+=e);return t};function WF(n,...e){let t,r,i,s=o;function o(u){const h=e.reduce((d,m)=>m(d),n());return t=$F(h),r=t.cache.get,i=t.cache.set,s=l,l(u)}function l(u){const h=r(u);if(h)return h;const d=UF(u,t);return i(u,d),d}return function(){return s(qF.apply(null,arguments))}}const Tt=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},yA=/^\[(?:([a-z-]+):)?(.+)\]$/i,HF=/^\d+\/\d+$/,GF=new Set(["px","full","screen"]),XF=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,KF=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,YF=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,JF=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,ZF=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Hs=n=>Gc(n)||GF.has(n)||HF.test(n),Go=n=>Lu(n,"length",a5),Gc=n=>!!n&&!Number.isNaN(Number(n)),_v=n=>Lu(n,"number",Gc),Dh=n=>!!n&&Number.isInteger(Number(n)),e5=n=>n.endsWith("%")&&Gc(n.slice(0,-1)),qe=n=>yA.test(n),Xo=n=>XF.test(n),t5=new Set(["length","size","percentage"]),n5=n=>Lu(n,t5,vA),r5=n=>Lu(n,"position",vA),i5=new Set(["image","url"]),s5=n=>Lu(n,i5,c5),o5=n=>Lu(n,"",l5),Mh=()=>!0,Lu=(n,e,t)=>{const r=yA.exec(n);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):t(r[2]):!1},a5=n=>KF.test(n)&&!YF.test(n),vA=()=>!1,l5=n=>JF.test(n),c5=n=>ZF.test(n),u5=()=>{const n=Tt("colors"),e=Tt("spacing"),t=Tt("blur"),r=Tt("brightness"),i=Tt("borderColor"),s=Tt("borderRadius"),o=Tt("borderSpacing"),l=Tt("borderWidth"),u=Tt("contrast"),h=Tt("grayscale"),d=Tt("hueRotate"),m=Tt("invert"),y=Tt("gap"),v=Tt("gradientColorStops"),S=Tt("gradientColorStopPositions"),b=Tt("inset"),T=Tt("margin"),k=Tt("opacity"),M=Tt("padding"),F=Tt("saturate"),z=Tt("scale"),$=Tt("sepia"),U=Tt("skew"),C=Tt("space"),P=Tt("translate"),A=()=>["auto","contain","none"],L=()=>["auto","hidden","clip","visible","scroll"],Q=()=>["auto",qe,e],V=()=>[qe,e],N=()=>["",Hs,Go],te=()=>["auto",Gc,qe],me=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ge=()=>["solid","dashed","dotted","double","none"],fe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Z=()=>["start","end","center","between","around","evenly","stretch"],ee=()=>["","0",qe],se=()=>["auto","avoid","all","avoid-page","page","left","right","column"],q=()=>[Gc,qe];return{cacheSize:500,separator:":",theme:{colors:[Mh],spacing:[Hs,Go],blur:["none","",Xo,qe],brightness:q(),borderColor:[n],borderRadius:["none","","full",Xo,qe],borderSpacing:V(),borderWidth:N(),contrast:q(),grayscale:ee(),hueRotate:q(),invert:ee(),gap:V(),gradientColorStops:[n],gradientColorStopPositions:[e5,Go],inset:Q(),margin:Q(),opacity:q(),padding:V(),saturate:q(),scale:q(),sepia:ee(),skew:q(),space:V(),translate:V()},classGroups:{aspect:[{aspect:["auto","square","video",qe]}],container:["container"],columns:[{columns:[Xo]}],"break-after":[{"break-after":se()}],"break-before":[{"break-before":se()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...me(),qe]}],overflow:[{overflow:L()}],"overflow-x":[{"overflow-x":L()}],"overflow-y":[{"overflow-y":L()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[b]}],"inset-x":[{"inset-x":[b]}],"inset-y":[{"inset-y":[b]}],start:[{start:[b]}],end:[{end:[b]}],top:[{top:[b]}],right:[{right:[b]}],bottom:[{bottom:[b]}],left:[{left:[b]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Dh,qe]}],basis:[{basis:Q()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",qe]}],grow:[{grow:ee()}],shrink:[{shrink:ee()}],order:[{order:["first","last","none",Dh,qe]}],"grid-cols":[{"grid-cols":[Mh]}],"col-start-end":[{col:["auto",{span:["full",Dh,qe]},qe]}],"col-start":[{"col-start":te()}],"col-end":[{"col-end":te()}],"grid-rows":[{"grid-rows":[Mh]}],"row-start-end":[{row:["auto",{span:[Dh,qe]},qe]}],"row-start":[{"row-start":te()}],"row-end":[{"row-end":te()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",qe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",qe]}],gap:[{gap:[y]}],"gap-x":[{"gap-x":[y]}],"gap-y":[{"gap-y":[y]}],"justify-content":[{justify:["normal",...Z()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...Z(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...Z(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[M]}],px:[{px:[M]}],py:[{py:[M]}],ps:[{ps:[M]}],pe:[{pe:[M]}],pt:[{pt:[M]}],pr:[{pr:[M]}],pb:[{pb:[M]}],pl:[{pl:[M]}],m:[{m:[T]}],mx:[{mx:[T]}],my:[{my:[T]}],ms:[{ms:[T]}],me:[{me:[T]}],mt:[{mt:[T]}],mr:[{mr:[T]}],mb:[{mb:[T]}],ml:[{ml:[T]}],"space-x":[{"space-x":[C]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[C]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",qe,e]}],"min-w":[{"min-w":[qe,e,"min","max","fit"]}],"max-w":[{"max-w":[qe,e,"none","full","min","max","fit","prose",{screen:[Xo]},Xo]}],h:[{h:[qe,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[qe,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[qe,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[qe,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Xo,Go]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",_v]}],"font-family":[{font:[Mh]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",qe]}],"line-clamp":[{"line-clamp":["none",Gc,_v]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Hs,qe]}],"list-image":[{"list-image":["none",qe]}],"list-style-type":[{list:["none","disc","decimal",qe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[k]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[k]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ge(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Hs,Go]}],"underline-offset":[{"underline-offset":["auto",Hs,qe]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:V()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",qe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",qe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[k]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...me(),r5]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",n5]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},s5]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[S]}],"gradient-via-pos":[{via:[S]}],"gradient-to-pos":[{to:[S]}],"gradient-from":[{from:[v]}],"gradient-via":[{via:[v]}],"gradient-to":[{to:[v]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[k]}],"border-style":[{border:[...ge(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[k]}],"divide-style":[{divide:ge()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...ge()]}],"outline-offset":[{"outline-offset":[Hs,qe]}],"outline-w":[{outline:[Hs,Go]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:N()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[k]}],"ring-offset-w":[{"ring-offset":[Hs,Go]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",Xo,o5]}],"shadow-color":[{shadow:[Mh]}],opacity:[{opacity:[k]}],"mix-blend":[{"mix-blend":[...fe(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":fe()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",Xo,qe]}],grayscale:[{grayscale:[h]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[m]}],saturate:[{saturate:[F]}],sepia:[{sepia:[$]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[h]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[k]}],"backdrop-saturate":[{"backdrop-saturate":[F]}],"backdrop-sepia":[{"backdrop-sepia":[$]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",qe]}],duration:[{duration:q()}],ease:[{ease:["linear","in","out","in-out",qe]}],delay:[{delay:q()}],animate:[{animate:["none","spin","ping","pulse","bounce",qe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[z]}],"scale-x":[{"scale-x":[z]}],"scale-y":[{"scale-y":[z]}],rotate:[{rotate:[Dh,qe]}],"translate-x":[{"translate-x":[P]}],"translate-y":[{"translate-y":[P]}],"skew-x":[{"skew-x":[U]}],"skew-y":[{"skew-y":[U]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",qe]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",qe]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":V()}],"scroll-mx":[{"scroll-mx":V()}],"scroll-my":[{"scroll-my":V()}],"scroll-ms":[{"scroll-ms":V()}],"scroll-me":[{"scroll-me":V()}],"scroll-mt":[{"scroll-mt":V()}],"scroll-mr":[{"scroll-mr":V()}],"scroll-mb":[{"scroll-mb":V()}],"scroll-ml":[{"scroll-ml":V()}],"scroll-p":[{"scroll-p":V()}],"scroll-px":[{"scroll-px":V()}],"scroll-py":[{"scroll-py":V()}],"scroll-ps":[{"scroll-ps":V()}],"scroll-pe":[{"scroll-pe":V()}],"scroll-pt":[{"scroll-pt":V()}],"scroll-pr":[{"scroll-pr":V()}],"scroll-pb":[{"scroll-pb":V()}],"scroll-pl":[{"scroll-pl":V()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",qe]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[Hs,Go,_v]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},h5=WF(u5);function Pn(...n){return h5(hA(n))}const f5=bF,wA=I.forwardRef(({className:n,...e},t)=>D.jsx(iA,{ref:t,className:Pn("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));wA.displayName=iA.displayName;const d5=Ax("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),OA=I.forwardRef(({className:n,variant:e,...t},r)=>D.jsx(sA,{ref:r,className:Pn(d5({variant:e}),n),...t}));OA.displayName=sA.displayName;const p5=I.forwardRef(({className:n,...e},t)=>D.jsx(lA,{ref:t,className:Pn("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));p5.displayName=lA.displayName;const xA=I.forwardRef(({className:n,...e},t)=>D.jsx(cA,{ref:t,className:Pn("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:D.jsx(NF,{className:"h-4 w-4"})}));xA.displayName=cA.displayName;const SA=I.forwardRef(({className:n,...e},t)=>D.jsx(oA,{ref:t,className:Pn("text-sm font-semibold",n),...e}));SA.displayName=oA.displayName;const bA=I.forwardRef(({className:n,...e},t)=>D.jsx(aA,{ref:t,className:Pn("text-sm opacity-90",n),...e}));bA.displayName=aA.displayName;function m5(){const{toasts:n}=Tx();return D.jsxs(f5,{children:[n.map(function({id:e,title:t,description:r,action:i,...s}){return D.jsxs(OA,{...s,children:[D.jsxs("div",{className:"grid gap-1",children:[t&&D.jsx(SA,{children:t}),r&&D.jsx(bA,{children:r})]}),i,D.jsx(xA,{})]},e)}),D.jsx(wA,{})]})}var t_=["light","dark"],g5="(prefers-color-scheme: dark)",y5=I.createContext(void 0),v5={setTheme:n=>{},themes:[]},w5=()=>{var n;return(n=I.useContext(y5))!=null?n:v5};I.memo(({forcedTheme:n,storageKey:e,attribute:t,enableSystem:r,enableColorScheme:i,defaultTheme:s,value:o,attrs:l,nonce:u})=>{let h=s==="system",d=t==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(S=>`'${S}'`).join(",")})`};`:`var d=document.documentElement,n='${t}',s='setAttribute';`,m=i?t_.includes(s)&&s?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${s}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",y=(S,b=!1,T=!0)=>{let k=o?o[S]:S,M=b?S+"|| ''":`'${k}'`,F="";return i&&T&&!b&&t_.includes(S)&&(F+=`d.style.colorScheme = '${S}';`),t==="class"?b||k?F+=`c.add(${M})`:F+="null":k&&(F+=`d[s](n,${M})`),F},v=n?`!function(){${d}${y(n)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${h})){var t='${g5}',m=window.matchMedia(t);if(m.media!==t||m.matches){${y("dark")}}else{${y("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${y(o?"x[e]":"e",!0)}}${h?"":"else{"+y(s,!1,!1)+"}"}${m}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${y(o?"x[e]":"e",!0)}}else{${y(s,!1,!1)};}${m}}catch(t){}}();`;return I.createElement("script",{nonce:u,dangerouslySetInnerHTML:{__html:v}})});var O5=n=>{switch(n){case"success":return b5;case"info":return _5;case"warning":return T5;case"error":return E5;default:return null}},x5=Array(12).fill(0),S5=({visible:n,className:e})=>pe.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":n},pe.createElement("div",{className:"sonner-spinner"},x5.map((t,r)=>pe.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),b5=pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},pe.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),T5=pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},pe.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),_5=pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},pe.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),E5=pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},pe.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),k5=pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},pe.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),pe.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),C5=()=>{let[n,e]=pe.useState(document.hidden);return pe.useEffect(()=>{let t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n},Uw=1,P5=class{constructor(){this.subscribe=n=>(this.subscribers.push(n),()=>{let e=this.subscribers.indexOf(n);this.subscribers.splice(e,1)}),this.publish=n=>{this.subscribers.forEach(e=>e(n))},this.addToast=n=>{this.publish(n),this.toasts=[...this.toasts,n]},this.create=n=>{var e;let{message:t,...r}=n,i=typeof(n==null?void 0:n.id)=="number"||((e=n.id)==null?void 0:e.length)>0?n.id:Uw++,s=this.toasts.find(l=>l.id===i),o=n.dismissible===void 0?!0:n.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),s?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...n,id:i,title:t}),{...l,...n,id:i,dismissible:o,title:t}):l):this.addToast({title:t,...r,dismissible:o,id:i}),i},this.dismiss=n=>(this.dismissedToasts.add(n),n||this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:n,dismiss:!0})),n),this.message=(n,e)=>this.create({...e,message:n}),this.error=(n,e)=>this.create({...e,message:n,type:"error"}),this.success=(n,e)=>this.create({...e,type:"success",message:n}),this.info=(n,e)=>this.create({...e,type:"info",message:n}),this.warning=(n,e)=>this.create({...e,type:"warning",message:n}),this.loading=(n,e)=>this.create({...e,type:"loading",message:n}),this.promise=(n,e)=>{if(!e)return;let t;e.loading!==void 0&&(t=this.create({...e,promise:n,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let r=n instanceof Promise?n:n(),i=t!==void 0,s,o=r.then(async u=>{if(s=["resolve",u],pe.isValidElement(u))i=!1,this.create({id:t,type:"default",message:u});else if(R5(u)&&!u.ok){i=!1;let h=typeof e.error=="function"?await e.error(`HTTP error! status: ${u.status}`):e.error,d=typeof e.description=="function"?await e.description(`HTTP error! status: ${u.status}`):e.description;this.create({id:t,type:"error",message:h,description:d})}else if(e.success!==void 0){i=!1;let h=typeof e.success=="function"?await e.success(u):e.success,d=typeof e.description=="function"?await e.description(u):e.description;this.create({id:t,type:"success",message:h,description:d})}}).catch(async u=>{if(s=["reject",u],e.error!==void 0){i=!1;let h=typeof e.error=="function"?await e.error(u):e.error,d=typeof e.description=="function"?await e.description(u):e.description;this.create({id:t,type:"error",message:h,description:d})}}).finally(()=>{var u;i&&(this.dismiss(t),t=void 0),(u=e.finally)==null||u.call(e)}),l=()=>new Promise((u,h)=>o.then(()=>s[0]==="reject"?h(s[1]):u(s[1])).catch(h));return typeof t!="string"&&typeof t!="number"?{unwrap:l}:Object.assign(t,{unwrap:l})},this.custom=(n,e)=>{let t=(e==null?void 0:e.id)||Uw++;return this.create({jsx:n(t),id:t,...e}),t},this.getActiveToasts=()=>this.toasts.filter(n=>!this.dismissedToasts.has(n.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},dr=new P5,A5=(n,e)=>{let t=(e==null?void 0:e.id)||Uw++;return dr.addToast({title:n,...e,id:t}),t},R5=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",I5=A5,N5=()=>dr.toasts,D5=()=>dr.getActiveToasts();Object.assign(I5,{success:dr.success,info:dr.info,warning:dr.warning,error:dr.error,custom:dr.custom,message:dr.message,promise:dr.promise,dismiss:dr.dismiss,loading:dr.loading},{getHistory:N5,getToasts:D5});function M5(n,{insertAt:e}={}){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n))}M5(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function zp(n){return n.label!==void 0}var L5=3,V5="32px",F5="16px",n_=4e3,Q5=356,j5=14,z5=20,$5=200;function _i(...n){return n.filter(Boolean).join(" ")}function B5(n){let[e,t]=n.split("-"),r=[];return e&&r.push(e),t&&r.push(t),r}var U5=n=>{var e,t,r,i,s,o,l,u,h,d,m;let{invert:y,toast:v,unstyled:S,interacting:b,setHeights:T,visibleToasts:k,heights:M,index:F,toasts:z,expanded:$,removeToast:U,defaultRichColors:C,closeButton:P,style:A,cancelButtonStyle:L,actionButtonStyle:Q,className:V="",descriptionClassName:N="",duration:te,position:me,gap:ge,loadingIcon:fe,expandByDefault:Z,classNames:ee,icons:se,closeButtonAriaLabel:q="Close toast",pauseWhenPageIsHidden:K}=n,[ue,we]=pe.useState(null),[ke,Qe]=pe.useState(null),[Pe,He]=pe.useState(!1),[Ze,vt]=pe.useState(!1),[on,br]=pe.useState(!1),[mn,zr]=pe.useState(!1),[Fi,Qi]=pe.useState(!1),[Cs,ji]=pe.useState(0),[Tr,$r]=pe.useState(0),Un=pe.useRef(v.duration||te||n_),So=pe.useRef(null),tr=pe.useRef(null),bo=F===0,Ha=F+1<=k,at=v.type,wt=v.dismissible!==!1,ui=v.className||"",Ga=v.descriptionClassName||"",_r=pe.useMemo(()=>M.findIndex(Le=>Le.toastId===v.id)||0,[M,v.id]),Ps=pe.useMemo(()=>{var Le;return(Le=v.closeButton)!=null?Le:P},[v.closeButton,P]),zi=pe.useMemo(()=>v.duration||te||n_,[v.duration,te]),As=pe.useRef(0),Br=pe.useRef(0),To=pe.useRef(0),Ur=pe.useRef(null),[Xa,Rs]=me.split("-"),Is=pe.useMemo(()=>M.reduce((Le,Ke,ut)=>ut>=_r?Le:Le+Ke.height,0),[M,_r]),Ns=C5(),nr=v.invert||y,rr=at==="loading";Br.current=pe.useMemo(()=>_r*ge+Is,[_r,Is]),pe.useEffect(()=>{Un.current=zi},[zi]),pe.useEffect(()=>{He(!0)},[]),pe.useEffect(()=>{let Le=tr.current;if(Le){let Ke=Le.getBoundingClientRect().height;return $r(Ke),T(ut=>[{toastId:v.id,height:Ke,position:v.position},...ut]),()=>T(ut=>ut.filter(Vt=>Vt.toastId!==v.id))}},[T,v.id]),pe.useLayoutEffect(()=>{if(!Pe)return;let Le=tr.current,Ke=Le.style.height;Le.style.height="auto";let ut=Le.getBoundingClientRect().height;Le.style.height=Ke,$r(ut),T(Vt=>Vt.find(gn=>gn.toastId===v.id)?Vt.map(gn=>gn.toastId===v.id?{...gn,height:ut}:gn):[{toastId:v.id,height:ut,position:v.position},...Vt])},[Pe,v.title,v.description,T,v.id]);let qn=pe.useCallback(()=>{vt(!0),ji(Br.current),T(Le=>Le.filter(Ke=>Ke.toastId!==v.id)),setTimeout(()=>{U(v)},$5)},[v,U,T,Br]);pe.useEffect(()=>{if(v.promise&&at==="loading"||v.duration===1/0||v.type==="loading")return;let Le;return $||b||K&&Ns?(()=>{if(To.current<As.current){let Ke=new Date().getTime()-As.current;Un.current=Un.current-Ke}To.current=new Date().getTime()})():Un.current!==1/0&&(As.current=new Date().getTime(),Le=setTimeout(()=>{var Ke;(Ke=v.onAutoClose)==null||Ke.call(v,v),qn()},Un.current)),()=>clearTimeout(Le)},[$,b,v,at,K,Ns,qn]),pe.useEffect(()=>{v.delete&&qn()},[qn,v.delete]);function qr(){var Le,Ke,ut;return se!=null&&se.loading?pe.createElement("div",{className:_i(ee==null?void 0:ee.loader,(Le=v==null?void 0:v.classNames)==null?void 0:Le.loader,"sonner-loader"),"data-visible":at==="loading"},se.loading):fe?pe.createElement("div",{className:_i(ee==null?void 0:ee.loader,(Ke=v==null?void 0:v.classNames)==null?void 0:Ke.loader,"sonner-loader"),"data-visible":at==="loading"},fe):pe.createElement(S5,{className:_i(ee==null?void 0:ee.loader,(ut=v==null?void 0:v.classNames)==null?void 0:ut.loader),visible:at==="loading"})}return pe.createElement("li",{tabIndex:0,ref:tr,className:_i(V,ui,ee==null?void 0:ee.toast,(e=v==null?void 0:v.classNames)==null?void 0:e.toast,ee==null?void 0:ee.default,ee==null?void 0:ee[at],(t=v==null?void 0:v.classNames)==null?void 0:t[at]),"data-sonner-toast":"","data-rich-colors":(r=v.richColors)!=null?r:C,"data-styled":!(v.jsx||v.unstyled||S),"data-mounted":Pe,"data-promise":!!v.promise,"data-swiped":Fi,"data-removed":Ze,"data-visible":Ha,"data-y-position":Xa,"data-x-position":Rs,"data-index":F,"data-front":bo,"data-swiping":on,"data-dismissible":wt,"data-type":at,"data-invert":nr,"data-swipe-out":mn,"data-swipe-direction":ke,"data-expanded":!!($||Z&&Pe),style:{"--index":F,"--toasts-before":F,"--z-index":z.length-F,"--offset":`${Ze?Cs:Br.current}px`,"--initial-height":Z?"auto":`${Tr}px`,...A,...v.style},onDragEnd:()=>{br(!1),we(null),Ur.current=null},onPointerDown:Le=>{rr||!wt||(So.current=new Date,ji(Br.current),Le.target.setPointerCapture(Le.pointerId),Le.target.tagName!=="BUTTON"&&(br(!0),Ur.current={x:Le.clientX,y:Le.clientY}))},onPointerUp:()=>{var Le,Ke,ut,Vt;if(mn||!wt)return;Ur.current=null;let gn=Number(((Le=tr.current)==null?void 0:Le.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),ht=Number(((Ke=tr.current)==null?void 0:Ke.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),ir=new Date().getTime()-((ut=So.current)==null?void 0:ut.getTime()),Rt=ue==="x"?gn:ht,An=Math.abs(Rt)/ir;if(Math.abs(Rt)>=z5||An>.11){ji(Br.current),(Vt=v.onDismiss)==null||Vt.call(v,v),Qe(ue==="x"?gn>0?"right":"left":ht>0?"down":"up"),qn(),zr(!0),Qi(!1);return}br(!1),we(null)},onPointerMove:Le=>{var Ke,ut,Vt,gn;if(!Ur.current||!wt||((Ke=window.getSelection())==null?void 0:Ke.toString().length)>0)return;let ht=Le.clientY-Ur.current.y,ir=Le.clientX-Ur.current.x,Rt=(ut=n.swipeDirections)!=null?ut:B5(me);!ue&&(Math.abs(ir)>1||Math.abs(ht)>1)&&we(Math.abs(ir)>Math.abs(ht)?"x":"y");let An={x:0,y:0};ue==="y"?(Rt.includes("top")||Rt.includes("bottom"))&&(Rt.includes("top")&&ht<0||Rt.includes("bottom")&&ht>0)&&(An.y=ht):ue==="x"&&(Rt.includes("left")||Rt.includes("right"))&&(Rt.includes("left")&&ir<0||Rt.includes("right")&&ir>0)&&(An.x=ir),(Math.abs(An.x)>0||Math.abs(An.y)>0)&&Qi(!0),(Vt=tr.current)==null||Vt.style.setProperty("--swipe-amount-x",`${An.x}px`),(gn=tr.current)==null||gn.style.setProperty("--swipe-amount-y",`${An.y}px`)}},Ps&&!v.jsx?pe.createElement("button",{"aria-label":q,"data-disabled":rr,"data-close-button":!0,onClick:rr||!wt?()=>{}:()=>{var Le;qn(),(Le=v.onDismiss)==null||Le.call(v,v)},className:_i(ee==null?void 0:ee.closeButton,(i=v==null?void 0:v.classNames)==null?void 0:i.closeButton)},(s=se==null?void 0:se.close)!=null?s:k5):null,v.jsx||I.isValidElement(v.title)?v.jsx?v.jsx:typeof v.title=="function"?v.title():v.title:pe.createElement(pe.Fragment,null,at||v.icon||v.promise?pe.createElement("div",{"data-icon":"",className:_i(ee==null?void 0:ee.icon,(o=v==null?void 0:v.classNames)==null?void 0:o.icon)},v.promise||v.type==="loading"&&!v.icon?v.icon||qr():null,v.type!=="loading"?v.icon||(se==null?void 0:se[at])||O5(at):null):null,pe.createElement("div",{"data-content":"",className:_i(ee==null?void 0:ee.content,(l=v==null?void 0:v.classNames)==null?void 0:l.content)},pe.createElement("div",{"data-title":"",className:_i(ee==null?void 0:ee.title,(u=v==null?void 0:v.classNames)==null?void 0:u.title)},typeof v.title=="function"?v.title():v.title),v.description?pe.createElement("div",{"data-description":"",className:_i(N,Ga,ee==null?void 0:ee.description,(h=v==null?void 0:v.classNames)==null?void 0:h.description)},typeof v.description=="function"?v.description():v.description):null),I.isValidElement(v.cancel)?v.cancel:v.cancel&&zp(v.cancel)?pe.createElement("button",{"data-button":!0,"data-cancel":!0,style:v.cancelButtonStyle||L,onClick:Le=>{var Ke,ut;zp(v.cancel)&&wt&&((ut=(Ke=v.cancel).onClick)==null||ut.call(Ke,Le),qn())},className:_i(ee==null?void 0:ee.cancelButton,(d=v==null?void 0:v.classNames)==null?void 0:d.cancelButton)},v.cancel.label):null,I.isValidElement(v.action)?v.action:v.action&&zp(v.action)?pe.createElement("button",{"data-button":!0,"data-action":!0,style:v.actionButtonStyle||Q,onClick:Le=>{var Ke,ut;zp(v.action)&&((ut=(Ke=v.action).onClick)==null||ut.call(Ke,Le),!Le.defaultPrevented&&qn())},className:_i(ee==null?void 0:ee.actionButton,(m=v==null?void 0:v.classNames)==null?void 0:m.actionButton)},v.action.label):null))};function r_(){if(typeof window>"u"||typeof document>"u")return"ltr";let n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function q5(n,e){let t={};return[n,e].forEach((r,i)=>{let s=i===1,o=s?"--mobile-offset":"--offset",l=s?F5:V5;function u(h){["top","right","bottom","left"].forEach(d=>{t[`${o}-${d}`]=typeof h=="number"?`${h}px`:h})}typeof r=="number"||typeof r=="string"?u(r):typeof r=="object"?["top","right","bottom","left"].forEach(h=>{r[h]===void 0?t[`${o}-${h}`]=l:t[`${o}-${h}`]=typeof r[h]=="number"?`${r[h]}px`:r[h]}):u(l)}),t}var W5=I.forwardRef(function(n,e){let{invert:t,position:r="bottom-right",hotkey:i=["altKey","KeyT"],expand:s,closeButton:o,className:l,offset:u,mobileOffset:h,theme:d="light",richColors:m,duration:y,style:v,visibleToasts:S=L5,toastOptions:b,dir:T=r_(),gap:k=j5,loadingIcon:M,icons:F,containerAriaLabel:z="Notifications",pauseWhenPageIsHidden:$}=n,[U,C]=pe.useState([]),P=pe.useMemo(()=>Array.from(new Set([r].concat(U.filter(K=>K.position).map(K=>K.position)))),[U,r]),[A,L]=pe.useState([]),[Q,V]=pe.useState(!1),[N,te]=pe.useState(!1),[me,ge]=pe.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),fe=pe.useRef(null),Z=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),ee=pe.useRef(null),se=pe.useRef(!1),q=pe.useCallback(K=>{C(ue=>{var we;return(we=ue.find(ke=>ke.id===K.id))!=null&&we.delete||dr.dismiss(K.id),ue.filter(({id:ke})=>ke!==K.id)})},[]);return pe.useEffect(()=>dr.subscribe(K=>{if(K.dismiss){C(ue=>ue.map(we=>we.id===K.id?{...we,delete:!0}:we));return}setTimeout(()=>{VP.flushSync(()=>{C(ue=>{let we=ue.findIndex(ke=>ke.id===K.id);return we!==-1?[...ue.slice(0,we),{...ue[we],...K},...ue.slice(we+1)]:[K,...ue]})})})}),[]),pe.useEffect(()=>{if(d!=="system"){ge(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ge("dark"):ge("light")),typeof window>"u")return;let K=window.matchMedia("(prefers-color-scheme: dark)");try{K.addEventListener("change",({matches:ue})=>{ge(ue?"dark":"light")})}catch{K.addListener(({matches:we})=>{try{ge(we?"dark":"light")}catch(ke){console.error(ke)}})}},[d]),pe.useEffect(()=>{U.length<=1&&V(!1)},[U]),pe.useEffect(()=>{let K=ue=>{var we,ke;i.every(Qe=>ue[Qe]||ue.code===Qe)&&(V(!0),(we=fe.current)==null||we.focus()),ue.code==="Escape"&&(document.activeElement===fe.current||(ke=fe.current)!=null&&ke.contains(document.activeElement))&&V(!1)};return document.addEventListener("keydown",K),()=>document.removeEventListener("keydown",K)},[i]),pe.useEffect(()=>{if(fe.current)return()=>{ee.current&&(ee.current.focus({preventScroll:!0}),ee.current=null,se.current=!1)}},[fe.current]),pe.createElement("section",{ref:e,"aria-label":`${z} ${Z}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},P.map((K,ue)=>{var we;let[ke,Qe]=K.split("-");return U.length?pe.createElement("ol",{key:K,dir:T==="auto"?r_():T,tabIndex:-1,ref:fe,className:l,"data-sonner-toaster":!0,"data-theme":me,"data-y-position":ke,"data-lifted":Q&&U.length>1&&!s,"data-x-position":Qe,style:{"--front-toast-height":`${((we=A[0])==null?void 0:we.height)||0}px`,"--width":`${Q5}px`,"--gap":`${k}px`,...v,...q5(u,h)},onBlur:Pe=>{se.current&&!Pe.currentTarget.contains(Pe.relatedTarget)&&(se.current=!1,ee.current&&(ee.current.focus({preventScroll:!0}),ee.current=null))},onFocus:Pe=>{Pe.target instanceof HTMLElement&&Pe.target.dataset.dismissible==="false"||se.current||(se.current=!0,ee.current=Pe.relatedTarget)},onMouseEnter:()=>V(!0),onMouseMove:()=>V(!0),onMouseLeave:()=>{N||V(!1)},onDragEnd:()=>V(!1),onPointerDown:Pe=>{Pe.target instanceof HTMLElement&&Pe.target.dataset.dismissible==="false"||te(!0)},onPointerUp:()=>te(!1)},U.filter(Pe=>!Pe.position&&ue===0||Pe.position===K).map((Pe,He)=>{var Ze,vt;return pe.createElement(U5,{key:Pe.id,icons:F,index:He,toast:Pe,defaultRichColors:m,duration:(Ze=b==null?void 0:b.duration)!=null?Ze:y,className:b==null?void 0:b.className,descriptionClassName:b==null?void 0:b.descriptionClassName,invert:t,visibleToasts:S,closeButton:(vt=b==null?void 0:b.closeButton)!=null?vt:o,interacting:N,position:K,style:b==null?void 0:b.style,unstyled:b==null?void 0:b.unstyled,classNames:b==null?void 0:b.classNames,cancelButtonStyle:b==null?void 0:b.cancelButtonStyle,actionButtonStyle:b==null?void 0:b.actionButtonStyle,removeToast:q,toasts:U.filter(on=>on.position==Pe.position),heights:A.filter(on=>on.position==Pe.position),setHeights:L,expandByDefault:s,gap:k,loadingIcon:M,expanded:Q,pauseWhenPageIsHidden:$,swipeDirections:n.swipeDirections})})):null}))});const H5=({...n})=>{const{theme:e="system"}=w5();return D.jsx(W5,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...n})},G5=["top","right","bottom","left"],_a=Math.min,Vr=Math.max,Km=Math.round,$p=Math.floor,fs=n=>({x:n,y:n}),X5={left:"right",right:"left",bottom:"top",top:"bottom"},K5={start:"end",end:"start"};function qw(n,e,t){return Vr(n,_a(e,t))}function lo(n,e){return typeof n=="function"?n(e):n}function co(n){return n.split("-")[0]}function Vu(n){return n.split("-")[1]}function Ix(n){return n==="x"?"y":"x"}function Nx(n){return n==="y"?"height":"width"}function Ea(n){return["top","bottom"].includes(co(n))?"y":"x"}function Dx(n){return Ix(Ea(n))}function Y5(n,e,t){t===void 0&&(t=!1);const r=Vu(n),i=Dx(n),s=Nx(i);let o=i==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=Ym(o)),[o,Ym(o)]}function J5(n){const e=Ym(n);return[Ww(n),e,Ww(e)]}function Ww(n){return n.replace(/start|end/g,e=>K5[e])}function Z5(n,e,t){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(n){case"top":case"bottom":return t?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function e4(n,e,t,r){const i=Vu(n);let s=Z5(co(n),t==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(Ww)))),s}function Ym(n){return n.replace(/left|right|bottom|top/g,e=>X5[e])}function t4(n){return{top:0,right:0,bottom:0,left:0,...n}}function TA(n){return typeof n!="number"?t4(n):{top:n,right:n,bottom:n,left:n}}function Jm(n){const{x:e,y:t,width:r,height:i}=n;return{width:r,height:i,top:t,left:e,right:e+r,bottom:t+i,x:e,y:t}}function i_(n,e,t){let{reference:r,floating:i}=n;const s=Ea(e),o=Dx(e),l=Nx(o),u=co(e),h=s==="y",d=r.x+r.width/2-i.width/2,m=r.y+r.height/2-i.height/2,y=r[l]/2-i[l]/2;let v;switch(u){case"top":v={x:d,y:r.y-i.height};break;case"bottom":v={x:d,y:r.y+r.height};break;case"right":v={x:r.x+r.width,y:m};break;case"left":v={x:r.x-i.width,y:m};break;default:v={x:r.x,y:r.y}}switch(Vu(e)){case"start":v[o]-=y*(t&&h?-1:1);break;case"end":v[o]+=y*(t&&h?-1:1);break}return v}const n4=async(n,e,t)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=t,l=s.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(e));let h=await o.getElementRects({reference:n,floating:e,strategy:i}),{x:d,y:m}=i_(h,r,u),y=r,v={},S=0;for(let b=0;b<l.length;b++){const{name:T,fn:k}=l[b],{x:M,y:F,data:z,reset:$}=await k({x:d,y:m,initialPlacement:r,placement:y,strategy:i,middlewareData:v,rects:h,platform:o,elements:{reference:n,floating:e}});d=M??d,m=F??m,v={...v,[T]:{...v[T],...z}},$&&S<=50&&(S++,typeof $=="object"&&($.placement&&(y=$.placement),$.rects&&(h=$.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:i}):$.rects),{x:d,y:m}=i_(h,y,u)),b=-1)}return{x:d,y:m,placement:y,strategy:i,middlewareData:v}};async function mf(n,e){var t;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:l,strategy:u}=n,{boundary:h="clippingAncestors",rootBoundary:d="viewport",elementContext:m="floating",altBoundary:y=!1,padding:v=0}=lo(e,n),S=TA(v),T=l[y?m==="floating"?"reference":"floating":m],k=Jm(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(T)))==null||t?T:T.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(l.floating)),boundary:h,rootBoundary:d,strategy:u})),M=m==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,F=await(s.getOffsetParent==null?void 0:s.getOffsetParent(l.floating)),z=await(s.isElement==null?void 0:s.isElement(F))?await(s.getScale==null?void 0:s.getScale(F))||{x:1,y:1}:{x:1,y:1},$=Jm(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:M,offsetParent:F,strategy:u}):M);return{top:(k.top-$.top+S.top)/z.y,bottom:($.bottom-k.bottom+S.bottom)/z.y,left:(k.left-$.left+S.left)/z.x,right:($.right-k.right+S.right)/z.x}}const r4=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:i,rects:s,platform:o,elements:l,middlewareData:u}=e,{element:h,padding:d=0}=lo(n,e)||{};if(h==null)return{};const m=TA(d),y={x:t,y:r},v=Dx(i),S=Nx(v),b=await o.getDimensions(h),T=v==="y",k=T?"top":"left",M=T?"bottom":"right",F=T?"clientHeight":"clientWidth",z=s.reference[S]+s.reference[v]-y[v]-s.floating[S],$=y[v]-s.reference[v],U=await(o.getOffsetParent==null?void 0:o.getOffsetParent(h));let C=U?U[F]:0;(!C||!await(o.isElement==null?void 0:o.isElement(U)))&&(C=l.floating[F]||s.floating[S]);const P=z/2-$/2,A=C/2-b[S]/2-1,L=_a(m[k],A),Q=_a(m[M],A),V=L,N=C-b[S]-Q,te=C/2-b[S]/2+P,me=qw(V,te,N),ge=!u.arrow&&Vu(i)!=null&&te!==me&&s.reference[S]/2-(te<V?L:Q)-b[S]/2<0,fe=ge?te<V?te-V:te-N:0;return{[v]:y[v]+fe,data:{[v]:me,centerOffset:te-me-fe,...ge&&{alignmentOffset:fe}},reset:ge}}}),i4=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:l,platform:u,elements:h}=e,{mainAxis:d=!0,crossAxis:m=!0,fallbackPlacements:y,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:S="none",flipAlignment:b=!0,...T}=lo(n,e);if((t=s.arrow)!=null&&t.alignmentOffset)return{};const k=co(i),M=Ea(l),F=co(l)===l,z=await(u.isRTL==null?void 0:u.isRTL(h.floating)),$=y||(F||!b?[Ym(l)]:J5(l)),U=S!=="none";!y&&U&&$.push(...e4(l,b,S,z));const C=[l,...$],P=await mf(e,T),A=[];let L=((r=s.flip)==null?void 0:r.overflows)||[];if(d&&A.push(P[k]),m){const te=Y5(i,o,z);A.push(P[te[0]],P[te[1]])}if(L=[...L,{placement:i,overflows:A}],!A.every(te=>te<=0)){var Q,V;const te=(((Q=s.flip)==null?void 0:Q.index)||0)+1,me=C[te];if(me)return{data:{index:te,overflows:L},reset:{placement:me}};let ge=(V=L.filter(fe=>fe.overflows[0]<=0).sort((fe,Z)=>fe.overflows[1]-Z.overflows[1])[0])==null?void 0:V.placement;if(!ge)switch(v){case"bestFit":{var N;const fe=(N=L.filter(Z=>{if(U){const ee=Ea(Z.placement);return ee===M||ee==="y"}return!0}).map(Z=>[Z.placement,Z.overflows.filter(ee=>ee>0).reduce((ee,se)=>ee+se,0)]).sort((Z,ee)=>Z[1]-ee[1])[0])==null?void 0:N[0];fe&&(ge=fe);break}case"initialPlacement":ge=l;break}if(i!==ge)return{reset:{placement:ge}}}return{}}}};function s_(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function o_(n){return G5.some(e=>n[e]>=0)}const s4=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...i}=lo(n,e);switch(r){case"referenceHidden":{const s=await mf(e,{...i,elementContext:"reference"}),o=s_(s,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:o_(o)}}}case"escaped":{const s=await mf(e,{...i,altBoundary:!0}),o=s_(s,t.floating);return{data:{escapedOffsets:o,escaped:o_(o)}}}default:return{}}}}};async function o4(n,e){const{placement:t,platform:r,elements:i}=n,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=co(t),l=Vu(t),u=Ea(t)==="y",h=["left","top"].includes(o)?-1:1,d=s&&u?-1:1,m=lo(e,n);let{mainAxis:y,crossAxis:v,alignmentAxis:S}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return l&&typeof S=="number"&&(v=l==="end"?S*-1:S),u?{x:v*d,y:y*h}:{x:y*h,y:v*d}}const a4=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:i,y:s,placement:o,middlewareData:l}=e,u=await o4(e,n);return o===((t=l.offset)==null?void 0:t.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:o}}}}},l4=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:l={fn:T=>{let{x:k,y:M}=T;return{x:k,y:M}}},...u}=lo(n,e),h={x:t,y:r},d=await mf(e,u),m=Ea(co(i)),y=Ix(m);let v=h[y],S=h[m];if(s){const T=y==="y"?"top":"left",k=y==="y"?"bottom":"right",M=v+d[T],F=v-d[k];v=qw(M,v,F)}if(o){const T=m==="y"?"top":"left",k=m==="y"?"bottom":"right",M=S+d[T],F=S-d[k];S=qw(M,S,F)}const b=l.fn({...e,[y]:v,[m]:S});return{...b,data:{x:b.x-t,y:b.y-r,enabled:{[y]:s,[m]:o}}}}}},c4=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:l=0,mainAxis:u=!0,crossAxis:h=!0}=lo(n,e),d={x:t,y:r},m=Ea(i),y=Ix(m);let v=d[y],S=d[m];const b=lo(l,e),T=typeof b=="number"?{mainAxis:b,crossAxis:0}:{mainAxis:0,crossAxis:0,...b};if(u){const F=y==="y"?"height":"width",z=s.reference[y]-s.floating[F]+T.mainAxis,$=s.reference[y]+s.reference[F]-T.mainAxis;v<z?v=z:v>$&&(v=$)}if(h){var k,M;const F=y==="y"?"width":"height",z=["top","left"].includes(co(i)),$=s.reference[m]-s.floating[F]+(z&&((k=o.offset)==null?void 0:k[m])||0)+(z?0:T.crossAxis),U=s.reference[m]+s.reference[F]+(z?0:((M=o.offset)==null?void 0:M[m])||0)-(z?T.crossAxis:0);S<$?S=$:S>U&&(S=U)}return{[y]:v,[m]:S}}}},u4=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:i,rects:s,platform:o,elements:l}=e,{apply:u=()=>{},...h}=lo(n,e),d=await mf(e,h),m=co(i),y=Vu(i),v=Ea(i)==="y",{width:S,height:b}=s.floating;let T,k;m==="top"||m==="bottom"?(T=m,k=y===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(k=m,T=y==="end"?"top":"bottom");const M=b-d.top-d.bottom,F=S-d.left-d.right,z=_a(b-d[T],M),$=_a(S-d[k],F),U=!e.middlewareData.shift;let C=z,P=$;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(P=F),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(C=M),U&&!y){const L=Vr(d.left,0),Q=Vr(d.right,0),V=Vr(d.top,0),N=Vr(d.bottom,0);v?P=S-2*(L!==0||Q!==0?L+Q:Vr(d.left,d.right)):C=b-2*(V!==0||N!==0?V+N:Vr(d.top,d.bottom))}await u({...e,availableWidth:P,availableHeight:C});const A=await o.getDimensions(l.floating);return S!==A.width||b!==A.height?{reset:{rects:!0}}:{}}}};function ey(){return typeof window<"u"}function Fu(n){return _A(n)?(n.nodeName||"").toLowerCase():"#document"}function jr(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function bs(n){var e;return(e=(_A(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function _A(n){return ey()?n instanceof Node||n instanceof jr(n).Node:!1}function Ii(n){return ey()?n instanceof Element||n instanceof jr(n).Element:!1}function ws(n){return ey()?n instanceof HTMLElement||n instanceof jr(n).HTMLElement:!1}function a_(n){return!ey()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof jr(n).ShadowRoot}function Yf(n){const{overflow:e,overflowX:t,overflowY:r,display:i}=Ni(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(i)}function h4(n){return["table","td","th"].includes(Fu(n))}function ty(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function Mx(n){const e=Lx(),t=Ii(n)?Ni(n):n;return["transform","translate","scale","rotate","perspective"].some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function f4(n){let e=ka(n);for(;ws(e)&&!yu(e);){if(Mx(e))return e;if(ty(e))return null;e=ka(e)}return null}function Lx(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function yu(n){return["html","body","#document"].includes(Fu(n))}function Ni(n){return jr(n).getComputedStyle(n)}function ny(n){return Ii(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function ka(n){if(Fu(n)==="html")return n;const e=n.assignedSlot||n.parentNode||a_(n)&&n.host||bs(n);return a_(e)?e.host:e}function EA(n){const e=ka(n);return yu(e)?n.ownerDocument?n.ownerDocument.body:n.body:ws(e)&&Yf(e)?e:EA(e)}function gf(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=EA(n),s=i===((r=n.ownerDocument)==null?void 0:r.body),o=jr(i);if(s){const l=Hw(o);return e.concat(o,o.visualViewport||[],Yf(i)?i:[],l&&t?gf(l):[])}return e.concat(i,gf(i,[],t))}function Hw(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function kA(n){const e=Ni(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=ws(n),s=i?n.offsetWidth:t,o=i?n.offsetHeight:r,l=Km(t)!==s||Km(r)!==o;return l&&(t=s,r=o),{width:t,height:r,$:l}}function Vx(n){return Ii(n)?n:n.contextElement}function Xc(n){const e=Vx(n);if(!ws(e))return fs(1);const t=e.getBoundingClientRect(),{width:r,height:i,$:s}=kA(e);let o=(s?Km(t.width):t.width)/r,l=(s?Km(t.height):t.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const d4=fs(0);function CA(n){const e=jr(n);return!Lx()||!e.visualViewport?d4:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function p4(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==jr(n)?!1:e}function Nl(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=n.getBoundingClientRect(),s=Vx(n);let o=fs(1);e&&(r?Ii(r)&&(o=Xc(r)):o=Xc(n));const l=p4(s,t,r)?CA(s):fs(0);let u=(i.left+l.x)/o.x,h=(i.top+l.y)/o.y,d=i.width/o.x,m=i.height/o.y;if(s){const y=jr(s),v=r&&Ii(r)?jr(r):r;let S=y,b=Hw(S);for(;b&&r&&v!==S;){const T=Xc(b),k=b.getBoundingClientRect(),M=Ni(b),F=k.left+(b.clientLeft+parseFloat(M.paddingLeft))*T.x,z=k.top+(b.clientTop+parseFloat(M.paddingTop))*T.y;u*=T.x,h*=T.y,d*=T.x,m*=T.y,u+=F,h+=z,S=jr(b),b=Hw(S)}}return Jm({width:d,height:m,x:u,y:h})}function Fx(n,e){const t=ny(n).scrollLeft;return e?e.left+t:Nl(bs(n)).left+t}function PA(n,e,t){t===void 0&&(t=!1);const r=n.getBoundingClientRect(),i=r.left+e.scrollLeft-(t?0:Fx(n,r)),s=r.top+e.scrollTop;return{x:i,y:s}}function m4(n){let{elements:e,rect:t,offsetParent:r,strategy:i}=n;const s=i==="fixed",o=bs(r),l=e?ty(e.floating):!1;if(r===o||l&&s)return t;let u={scrollLeft:0,scrollTop:0},h=fs(1);const d=fs(0),m=ws(r);if((m||!m&&!s)&&((Fu(r)!=="body"||Yf(o))&&(u=ny(r)),ws(r))){const v=Nl(r);h=Xc(r),d.x=v.x+r.clientLeft,d.y=v.y+r.clientTop}const y=o&&!m&&!s?PA(o,u,!0):fs(0);return{width:t.width*h.x,height:t.height*h.y,x:t.x*h.x-u.scrollLeft*h.x+d.x+y.x,y:t.y*h.y-u.scrollTop*h.y+d.y+y.y}}function g4(n){return Array.from(n.getClientRects())}function y4(n){const e=bs(n),t=ny(n),r=n.ownerDocument.body,i=Vr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Vr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-t.scrollLeft+Fx(n);const l=-t.scrollTop;return Ni(r).direction==="rtl"&&(o+=Vr(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:l}}function v4(n,e){const t=jr(n),r=bs(n),i=t.visualViewport;let s=r.clientWidth,o=r.clientHeight,l=0,u=0;if(i){s=i.width,o=i.height;const h=Lx();(!h||h&&e==="fixed")&&(l=i.offsetLeft,u=i.offsetTop)}return{width:s,height:o,x:l,y:u}}function w4(n,e){const t=Nl(n,!0,e==="fixed"),r=t.top+n.clientTop,i=t.left+n.clientLeft,s=ws(n)?Xc(n):fs(1),o=n.clientWidth*s.x,l=n.clientHeight*s.y,u=i*s.x,h=r*s.y;return{width:o,height:l,x:u,y:h}}function l_(n,e,t){let r;if(e==="viewport")r=v4(n,t);else if(e==="document")r=y4(bs(n));else if(Ii(e))r=w4(e,t);else{const i=CA(n);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Jm(r)}function AA(n,e){const t=ka(n);return t===e||!Ii(t)||yu(t)?!1:Ni(t).position==="fixed"||AA(t,e)}function O4(n,e){const t=e.get(n);if(t)return t;let r=gf(n,[],!1).filter(l=>Ii(l)&&Fu(l)!=="body"),i=null;const s=Ni(n).position==="fixed";let o=s?ka(n):n;for(;Ii(o)&&!yu(o);){const l=Ni(o),u=Mx(o);!u&&l.position==="fixed"&&(i=null),(s?!u&&!i:!u&&l.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Yf(o)&&!u&&AA(n,o))?r=r.filter(d=>d!==o):i=l,o=ka(o)}return e.set(n,r),r}function x4(n){let{element:e,boundary:t,rootBoundary:r,strategy:i}=n;const o=[...t==="clippingAncestors"?ty(e)?[]:O4(e,this._c):[].concat(t),r],l=o[0],u=o.reduce((h,d)=>{const m=l_(e,d,i);return h.top=Vr(m.top,h.top),h.right=_a(m.right,h.right),h.bottom=_a(m.bottom,h.bottom),h.left=Vr(m.left,h.left),h},l_(e,l,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function S4(n){const{width:e,height:t}=kA(n);return{width:e,height:t}}function b4(n,e,t){const r=ws(e),i=bs(e),s=t==="fixed",o=Nl(n,!0,s,e);let l={scrollLeft:0,scrollTop:0};const u=fs(0);if(r||!r&&!s)if((Fu(e)!=="body"||Yf(i))&&(l=ny(e)),r){const y=Nl(e,!0,s,e);u.x=y.x+e.clientLeft,u.y=y.y+e.clientTop}else i&&(u.x=Fx(i));const h=i&&!r&&!s?PA(i,l):fs(0),d=o.left+l.scrollLeft-u.x-h.x,m=o.top+l.scrollTop-u.y-h.y;return{x:d,y:m,width:o.width,height:o.height}}function Ev(n){return Ni(n).position==="static"}function c_(n,e){if(!ws(n)||Ni(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return bs(n)===t&&(t=t.ownerDocument.body),t}function RA(n,e){const t=jr(n);if(ty(n))return t;if(!ws(n)){let i=ka(n);for(;i&&!yu(i);){if(Ii(i)&&!Ev(i))return i;i=ka(i)}return t}let r=c_(n,e);for(;r&&h4(r)&&Ev(r);)r=c_(r,e);return r&&yu(r)&&Ev(r)&&!Mx(r)?t:r||f4(n)||t}const T4=async function(n){const e=this.getOffsetParent||RA,t=this.getDimensions,r=await t(n.floating);return{reference:b4(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function _4(n){return Ni(n).direction==="rtl"}const E4={convertOffsetParentRelativeRectToViewportRelativeRect:m4,getDocumentElement:bs,getClippingRect:x4,getOffsetParent:RA,getElementRects:T4,getClientRects:g4,getDimensions:S4,getScale:Xc,isElement:Ii,isRTL:_4};function IA(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function k4(n,e){let t=null,r;const i=bs(n);function s(){var l;clearTimeout(r),(l=t)==null||l.disconnect(),t=null}function o(l,u){l===void 0&&(l=!1),u===void 0&&(u=1),s();const h=n.getBoundingClientRect(),{left:d,top:m,width:y,height:v}=h;if(l||e(),!y||!v)return;const S=$p(m),b=$p(i.clientWidth-(d+y)),T=$p(i.clientHeight-(m+v)),k=$p(d),F={rootMargin:-S+"px "+-b+"px "+-T+"px "+-k+"px",threshold:Vr(0,_a(1,u))||1};let z=!0;function $(U){const C=U[0].intersectionRatio;if(C!==u){if(!z)return o();C?o(!1,C):r=setTimeout(()=>{o(!1,1e-7)},1e3)}C===1&&!IA(h,n.getBoundingClientRect())&&o(),z=!1}try{t=new IntersectionObserver($,{...F,root:i.ownerDocument})}catch{t=new IntersectionObserver($,F)}t.observe(n)}return o(!0),s}function C4(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,h=Vx(n),d=i||s?[...h?gf(h):[],...gf(e)]:[];d.forEach(k=>{i&&k.addEventListener("scroll",t,{passive:!0}),s&&k.addEventListener("resize",t)});const m=h&&l?k4(h,t):null;let y=-1,v=null;o&&(v=new ResizeObserver(k=>{let[M]=k;M&&M.target===h&&v&&(v.unobserve(e),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{var F;(F=v)==null||F.observe(e)})),t()}),h&&!u&&v.observe(h),v.observe(e));let S,b=u?Nl(n):null;u&&T();function T(){const k=Nl(n);b&&!IA(b,k)&&t(),b=k,S=requestAnimationFrame(T)}return t(),()=>{var k;d.forEach(M=>{i&&M.removeEventListener("scroll",t),s&&M.removeEventListener("resize",t)}),m==null||m(),(k=v)==null||k.disconnect(),v=null,u&&cancelAnimationFrame(S)}}const P4=a4,A4=l4,R4=i4,I4=u4,N4=s4,u_=r4,D4=c4,M4=(n,e,t)=>{const r=new Map,i={platform:E4,...t},s={...i.platform,_c:r};return n4(n,e,{...i,platform:s})};var Tm=typeof document<"u"?I.useLayoutEffect:I.useEffect;function Zm(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,i;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!Zm(n[r],e[r]))return!1;return!0}if(i=Object.keys(n),t=i.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=t;r--!==0;){const s=i[r];if(!(s==="_owner"&&n.$$typeof)&&!Zm(n[s],e[s]))return!1}return!0}return n!==n&&e!==e}function NA(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function h_(n,e){const t=NA(n);return Math.round(e*t)/t}function kv(n){const e=I.useRef(n);return Tm(()=>{e.current=n}),e}function L4(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:l=!0,whileElementsMounted:u,open:h}=n,[d,m]=I.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[y,v]=I.useState(r);Zm(y,r)||v(r);const[S,b]=I.useState(null),[T,k]=I.useState(null),M=I.useCallback(Z=>{Z!==U.current&&(U.current=Z,b(Z))},[]),F=I.useCallback(Z=>{Z!==C.current&&(C.current=Z,k(Z))},[]),z=s||S,$=o||T,U=I.useRef(null),C=I.useRef(null),P=I.useRef(d),A=u!=null,L=kv(u),Q=kv(i),V=kv(h),N=I.useCallback(()=>{if(!U.current||!C.current)return;const Z={placement:e,strategy:t,middleware:y};Q.current&&(Z.platform=Q.current),M4(U.current,C.current,Z).then(ee=>{const se={...ee,isPositioned:V.current!==!1};te.current&&!Zm(P.current,se)&&(P.current=se,Yg.flushSync(()=>{m(se)}))})},[y,e,t,Q,V]);Tm(()=>{h===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,m(Z=>({...Z,isPositioned:!1})))},[h]);const te=I.useRef(!1);Tm(()=>(te.current=!0,()=>{te.current=!1}),[]),Tm(()=>{if(z&&(U.current=z),$&&(C.current=$),z&&$){if(L.current)return L.current(z,$,N);N()}},[z,$,N,L,A]);const me=I.useMemo(()=>({reference:U,floating:C,setReference:M,setFloating:F}),[M,F]),ge=I.useMemo(()=>({reference:z,floating:$}),[z,$]),fe=I.useMemo(()=>{const Z={position:t,left:0,top:0};if(!ge.floating)return Z;const ee=h_(ge.floating,d.x),se=h_(ge.floating,d.y);return l?{...Z,transform:"translate("+ee+"px, "+se+"px)",...NA(ge.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:ee,top:se}},[t,l,ge.floating,d.x,d.y]);return I.useMemo(()=>({...d,update:N,refs:me,elements:ge,floatingStyles:fe}),[d,N,me,ge,fe])}const V4=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:i}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?u_({element:r.current,padding:i}).fn(t):{}:r?u_({element:r,padding:i}).fn(t):{}}}},F4=(n,e)=>({...P4(n),options:[n,e]}),Q4=(n,e)=>({...A4(n),options:[n,e]}),j4=(n,e)=>({...D4(n),options:[n,e]}),z4=(n,e)=>({...R4(n),options:[n,e]}),$4=(n,e)=>({...I4(n),options:[n,e]}),B4=(n,e)=>({...N4(n),options:[n,e]}),U4=(n,e)=>({...V4(n),options:[n,e]});var q4="Arrow",DA=I.forwardRef((n,e)=>{const{children:t,width:r=10,height:i=5,...s}=n;return D.jsx(Cn.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:D.jsx("polygon",{points:"0,0 30,0 15,10"})})});DA.displayName=q4;var W4=DA;function H4(n){const[e,t]=I.useState(void 0);return Ta(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,l;if("borderBoxSize"in s){const u=s.borderBoxSize,h=Array.isArray(u)?u[0]:u;o=h.inlineSize,l=h.blockSize}else o=n.offsetWidth,l=n.offsetHeight;t({width:o,height:l})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var MA="Popper",[LA,VA]=Xf(MA),[aZ,FA]=LA(MA),QA="PopperAnchor",jA=I.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...i}=n,s=FA(QA,t),o=I.useRef(null),l=Ri(e,o);return I.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:D.jsx(Cn.div,{...i,ref:l})});jA.displayName=QA;var Qx="PopperContent",[G4,X4]=LA(Qx),zA=I.forwardRef((n,e)=>{var Pe,He,Ze,vt,on,br;const{__scopePopper:t,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:u=!0,collisionBoundary:h=[],collisionPadding:d=0,sticky:m="partial",hideWhenDetached:y=!1,updatePositionStrategy:v="optimized",onPlaced:S,...b}=n,T=FA(Qx,t),[k,M]=I.useState(null),F=Ri(e,mn=>M(mn)),[z,$]=I.useState(null),U=H4(z),C=(U==null?void 0:U.width)??0,P=(U==null?void 0:U.height)??0,A=r+(s!=="center"?"-"+s:""),L=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},Q=Array.isArray(h)?h:[h],V=Q.length>0,N={padding:L,boundary:Q.filter(Y4),altBoundary:V},{refs:te,floatingStyles:me,placement:ge,isPositioned:fe,middlewareData:Z}=L4({strategy:"fixed",placement:A,whileElementsMounted:(...mn)=>C4(...mn,{animationFrame:v==="always"}),elements:{reference:T.anchor},middleware:[F4({mainAxis:i+P,alignmentAxis:o}),u&&Q4({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?j4():void 0,...N}),u&&z4({...N}),$4({...N,apply:({elements:mn,rects:zr,availableWidth:Fi,availableHeight:Qi})=>{const{width:Cs,height:ji}=zr.reference,Tr=mn.floating.style;Tr.setProperty("--radix-popper-available-width",`${Fi}px`),Tr.setProperty("--radix-popper-available-height",`${Qi}px`),Tr.setProperty("--radix-popper-anchor-width",`${Cs}px`),Tr.setProperty("--radix-popper-anchor-height",`${ji}px`)}}),z&&U4({element:z,padding:l}),J4({arrowWidth:C,arrowHeight:P}),y&&B4({strategy:"referenceHidden",...N})]}),[ee,se]=UA(ge),q=ba(S);Ta(()=>{fe&&(q==null||q())},[fe,q]);const K=(Pe=Z.arrow)==null?void 0:Pe.x,ue=(He=Z.arrow)==null?void 0:He.y,we=((Ze=Z.arrow)==null?void 0:Ze.centerOffset)!==0,[ke,Qe]=I.useState();return Ta(()=>{k&&Qe(window.getComputedStyle(k).zIndex)},[k]),D.jsx("div",{ref:te.setFloating,"data-radix-popper-content-wrapper":"",style:{...me,transform:fe?me.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ke,"--radix-popper-transform-origin":[(vt=Z.transformOrigin)==null?void 0:vt.x,(on=Z.transformOrigin)==null?void 0:on.y].join(" "),...((br=Z.hide)==null?void 0:br.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:D.jsx(G4,{scope:t,placedSide:ee,onArrowChange:$,arrowX:K,arrowY:ue,shouldHideArrow:we,children:D.jsx(Cn.div,{"data-side":ee,"data-align":se,...b,ref:F,style:{...b.style,animation:fe?void 0:"none"}})})})});zA.displayName=Qx;var $A="PopperArrow",K4={top:"bottom",right:"left",bottom:"top",left:"right"},BA=I.forwardRef(function(e,t){const{__scopePopper:r,...i}=e,s=X4($A,r),o=K4[s.placedSide];return D.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:D.jsx(W4,{...i,ref:t,style:{...i.style,display:"block"}})})});BA.displayName=$A;function Y4(n){return n!==null}var J4=n=>({name:"transformOrigin",options:n,fn(e){var T,k,M;const{placement:t,rects:r,middlewareData:i}=e,o=((T=i.arrow)==null?void 0:T.centerOffset)!==0,l=o?0:n.arrowWidth,u=o?0:n.arrowHeight,[h,d]=UA(t),m={start:"0%",center:"50%",end:"100%"}[d],y=(((k=i.arrow)==null?void 0:k.x)??0)+l/2,v=(((M=i.arrow)==null?void 0:M.y)??0)+u/2;let S="",b="";return h==="bottom"?(S=o?m:`${y}px`,b=`${-u}px`):h==="top"?(S=o?m:`${y}px`,b=`${r.floating.height+u}px`):h==="right"?(S=`${-u}px`,b=o?m:`${v}px`):h==="left"&&(S=`${r.floating.width+u}px`,b=o?m:`${v}px`),{data:{x:S,y:b}}}});function UA(n){const[e,t="center"]=n.split("-");return[e,t]}var Z4=jA,eQ=zA,tQ=BA,[ry,lZ]=Xf("Tooltip",[VA]),jx=VA(),qA="TooltipProvider",nQ=700,f_="tooltip.open",[rQ,WA]=ry(qA),HA=n=>{const{__scopeTooltip:e,delayDuration:t=nQ,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:s}=n,o=I.useRef(!0),l=I.useRef(!1),u=I.useRef(0);return I.useEffect(()=>{const h=u.current;return()=>window.clearTimeout(h)},[]),D.jsx(rQ,{scope:e,isOpenDelayedRef:o,delayDuration:t,onOpen:I.useCallback(()=>{window.clearTimeout(u.current),o.current=!1},[]),onClose:I.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:I.useCallback(h=>{l.current=h},[]),disableHoverableContent:i,children:s})};HA.displayName=qA;var GA="Tooltip",[cZ,iy]=ry(GA),Gw="TooltipTrigger",iQ=I.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=iy(Gw,t),s=WA(Gw,t),o=jx(t),l=I.useRef(null),u=Ri(e,l,i.onTriggerChange),h=I.useRef(!1),d=I.useRef(!1),m=I.useCallback(()=>h.current=!1,[]);return I.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),D.jsx(Z4,{asChild:!0,...o,children:D.jsx(Cn.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:u,onPointerMove:Zt(n.onPointerMove,y=>{y.pointerType!=="touch"&&!d.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),d.current=!0)}),onPointerLeave:Zt(n.onPointerLeave,()=>{i.onTriggerLeave(),d.current=!1}),onPointerDown:Zt(n.onPointerDown,()=>{i.open&&i.onClose(),h.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:Zt(n.onFocus,()=>{h.current||i.onOpen()}),onBlur:Zt(n.onBlur,i.onClose),onClick:Zt(n.onClick,i.onClose)})})});iQ.displayName=Gw;var sQ="TooltipPortal",[uZ,oQ]=ry(sQ,{forceMount:void 0}),vu="TooltipContent",XA=I.forwardRef((n,e)=>{const t=oQ(vu,n.__scopeTooltip),{forceMount:r=t.forceMount,side:i="top",...s}=n,o=iy(vu,n.__scopeTooltip);return D.jsx(Ex,{present:r||o.open,children:o.disableHoverableContent?D.jsx(KA,{side:i,...s,ref:e}):D.jsx(aQ,{side:i,...s,ref:e})})}),aQ=I.forwardRef((n,e)=>{const t=iy(vu,n.__scopeTooltip),r=WA(vu,n.__scopeTooltip),i=I.useRef(null),s=Ri(e,i),[o,l]=I.useState(null),{trigger:u,onClose:h}=t,d=i.current,{onPointerInTransitChange:m}=r,y=I.useCallback(()=>{l(null),m(!1)},[m]),v=I.useCallback((S,b)=>{const T=S.currentTarget,k={x:S.clientX,y:S.clientY},M=fQ(k,T.getBoundingClientRect()),F=dQ(k,M),z=pQ(b.getBoundingClientRect()),$=gQ([...F,...z]);l($),m(!0)},[m]);return I.useEffect(()=>()=>y(),[y]),I.useEffect(()=>{if(u&&d){const S=T=>v(T,d),b=T=>v(T,u);return u.addEventListener("pointerleave",S),d.addEventListener("pointerleave",b),()=>{u.removeEventListener("pointerleave",S),d.removeEventListener("pointerleave",b)}}},[u,d,v,y]),I.useEffect(()=>{if(o){const S=b=>{const T=b.target,k={x:b.clientX,y:b.clientY},M=(u==null?void 0:u.contains(T))||(d==null?void 0:d.contains(T)),F=!mQ(k,o);M?y():F&&(y(),h())};return document.addEventListener("pointermove",S),()=>document.removeEventListener("pointermove",S)}},[u,d,o,h,y]),D.jsx(KA,{...n,ref:s})}),[lQ,cQ]=ry(GA,{isInside:!1}),uQ=DV("TooltipContent"),KA=I.forwardRef((n,e)=>{const{__scopeTooltip:t,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:o,...l}=n,u=iy(vu,t),h=jx(t),{onClose:d}=u;return I.useEffect(()=>(document.addEventListener(f_,d),()=>document.removeEventListener(f_,d)),[d]),I.useEffect(()=>{if(u.trigger){const m=y=>{const v=y.target;v!=null&&v.contains(u.trigger)&&d()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[u.trigger,d]),D.jsx(_x,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:m=>m.preventDefault(),onDismiss:d,children:D.jsxs(eQ,{"data-state":u.stateAttribute,...h,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[D.jsx(uQ,{children:r}),D.jsx(lQ,{scope:t,isInside:!0,children:D.jsx(sF,{id:u.contentId,role:"tooltip",children:i||r})})]})})});XA.displayName=vu;var YA="TooltipArrow",hQ=I.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=jx(t);return cQ(YA,t).isInside?null:D.jsx(tQ,{...i,...r,ref:e})});hQ.displayName=YA;function fQ(n,e){const t=Math.abs(e.top-n.y),r=Math.abs(e.bottom-n.y),i=Math.abs(e.right-n.x),s=Math.abs(e.left-n.x);switch(Math.min(t,r,i,s)){case s:return"left";case i:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function dQ(n,e,t=5){const r=[];switch(e){case"top":r.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":r.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":r.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":r.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return r}function pQ(n){const{top:e,right:t,bottom:r,left:i}=n;return[{x:i,y:e},{x:t,y:e},{x:t,y:r},{x:i,y:r}]}function mQ(n,e){const{x:t,y:r}=n;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const l=e[s],u=e[o],h=l.x,d=l.y,m=u.x,y=u.y;d>r!=y>r&&t<(m-h)*(r-d)/(y-d)+h&&(i=!i)}return i}function gQ(n){const e=n.slice();return e.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),yQ(e)}function yQ(n){if(n.length<=1)return n.slice();const e=[];for(let r=0;r<n.length;r++){const i=n[r];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const t=[];for(let r=n.length-1;r>=0;r--){const i=n[r];for(;t.length>=2;){const s=t[t.length-1],o=t[t.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))t.pop();else break}t.push(i)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var vQ=HA,JA=XA;const wQ=vQ,OQ=I.forwardRef(({className:n,sideOffset:e=4,...t},r)=>D.jsx(JA,{ref:r,sideOffset:e,className:Pn("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t}));OQ.displayName=JA.displayName;var sy=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},oy=typeof window>"u"||"Deno"in globalThis;function Ei(){}function xQ(n,e){return typeof n=="function"?n(e):n}function SQ(n){return typeof n=="number"&&n>=0&&n!==1/0}function bQ(n,e){return Math.max(n+(e||0)-Date.now(),0)}function d_(n,e){return typeof n=="function"?n(e):n}function TQ(n,e){return typeof n=="function"?n(e):n}function p_(n,e){const{type:t="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:l}=n;if(o){if(r){if(e.queryHash!==zx(o,e.options))return!1}else if(!vf(e.queryKey,o))return!1}if(t!=="all"){const u=e.isActive();if(t==="active"&&!u||t==="inactive"&&u)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||i&&i!==e.state.fetchStatus||s&&!s(e))}function m_(n,e){const{exact:t,status:r,predicate:i,mutationKey:s}=n;if(s){if(!e.options.mutationKey)return!1;if(t){if(yf(e.options.mutationKey)!==yf(s))return!1}else if(!vf(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function zx(n,e){return((e==null?void 0:e.queryKeyHashFn)||yf)(n)}function yf(n){return JSON.stringify(n,(e,t)=>Xw(t)?Object.keys(t).sort().reduce((r,i)=>(r[i]=t[i],r),{}):t)}function vf(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(t=>vf(n[t],e[t])):!1}function ZA(n,e){if(n===e)return n;const t=g_(n)&&g_(e);if(t||Xw(n)&&Xw(e)){const r=t?n:Object.keys(n),i=r.length,s=t?e:Object.keys(e),o=s.length,l=t?[]:{};let u=0;for(let h=0;h<o;h++){const d=t?h:s[h];(!t&&r.includes(d)||t)&&n[d]===void 0&&e[d]===void 0?(l[d]=void 0,u++):(l[d]=ZA(n[d],e[d]),l[d]===n[d]&&n[d]!==void 0&&u++)}return i===o&&u===i?n:l}return e}function g_(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function Xw(n){if(!y_(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!y_(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function y_(n){return Object.prototype.toString.call(n)==="[object Object]"}function _Q(n){return new Promise(e=>{setTimeout(e,n)})}function EQ(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?ZA(n,e):e}function kQ(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function CQ(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var $x=Symbol();function eR(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===$x?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var El,oa,lu,kP,PQ=(kP=class extends sy{constructor(){super();ct(this,El);ct(this,oa);ct(this,lu);Ue(this,lu,e=>{if(!oy&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){re(this,oa)||this.setEventListener(re(this,lu))}onUnsubscribe(){var e;this.hasListeners()||((e=re(this,oa))==null||e.call(this),Ue(this,oa,void 0))}setEventListener(e){var t;Ue(this,lu,e),(t=re(this,oa))==null||t.call(this),Ue(this,oa,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){re(this,El)!==e&&(Ue(this,El,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof re(this,El)=="boolean"?re(this,El):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},El=new WeakMap,oa=new WeakMap,lu=new WeakMap,kP),tR=new PQ,cu,aa,uu,CP,AQ=(CP=class extends sy{constructor(){super();ct(this,cu,!0);ct(this,aa);ct(this,uu);Ue(this,uu,e=>{if(!oy&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){re(this,aa)||this.setEventListener(re(this,uu))}onUnsubscribe(){var e;this.hasListeners()||((e=re(this,aa))==null||e.call(this),Ue(this,aa,void 0))}setEventListener(e){var t;Ue(this,uu,e),(t=re(this,aa))==null||t.call(this),Ue(this,aa,e(this.setOnline.bind(this)))}setOnline(e){re(this,cu)!==e&&(Ue(this,cu,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return re(this,cu)}},cu=new WeakMap,aa=new WeakMap,uu=new WeakMap,CP),eg=new AQ;function RQ(){let n,e;const t=new Promise((i,s)=>{n=i,e=s});t.status="pending",t.catch(()=>{});function r(i){Object.assign(t,i),delete t.resolve,delete t.reject}return t.resolve=i=>{r({status:"fulfilled",value:i}),n(i)},t.reject=i=>{r({status:"rejected",reason:i}),e(i)},t}function IQ(n){return Math.min(1e3*2**n,3e4)}function nR(n){return(n??"online")==="online"?eg.isOnline():!0}var rR=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function Cv(n){return n instanceof rR}function iR(n){let e=!1,t=0,r=!1,i;const s=RQ(),o=b=>{var T;r||(y(new rR(b)),(T=n.abort)==null||T.call(n))},l=()=>{e=!0},u=()=>{e=!1},h=()=>tR.isFocused()&&(n.networkMode==="always"||eg.isOnline())&&n.canRun(),d=()=>nR(n.networkMode)&&n.canRun(),m=b=>{var T;r||(r=!0,(T=n.onSuccess)==null||T.call(n,b),i==null||i(),s.resolve(b))},y=b=>{var T;r||(r=!0,(T=n.onError)==null||T.call(n,b),i==null||i(),s.reject(b))},v=()=>new Promise(b=>{var T;i=k=>{(r||h())&&b(k)},(T=n.onPause)==null||T.call(n)}).then(()=>{var b;i=void 0,r||(b=n.onContinue)==null||b.call(n)}),S=()=>{if(r)return;let b;const T=t===0?n.initialPromise:void 0;try{b=T??n.fn()}catch(k){b=Promise.reject(k)}Promise.resolve(b).then(m).catch(k=>{var U;if(r)return;const M=n.retry??(oy?0:3),F=n.retryDelay??IQ,z=typeof F=="function"?F(t,k):F,$=M===!0||typeof M=="number"&&t<M||typeof M=="function"&&M(t,k);if(e||!$){y(k);return}t++,(U=n.onFail)==null||U.call(n,t,k),_Q(z).then(()=>h()?void 0:v()).then(()=>{e?y(k):S()})})};return{promise:s,cancel:o,continue:()=>(i==null||i(),s),cancelRetry:l,continueRetry:u,canStart:d,start:()=>(d()?S():v().then(S),s)}}var NQ=n=>setTimeout(n,0);function DQ(){let n=[],e=0,t=l=>{l()},r=l=>{l()},i=NQ;const s=l=>{e?n.push(l):i(()=>{t(l)})},o=()=>{const l=n;n=[],l.length&&i(()=>{r(()=>{l.forEach(u=>{t(u)})})})};return{batch:l=>{let u;e++;try{u=l()}finally{e--,e||o()}return u},batchCalls:l=>(...u)=>{s(()=>{l(...u)})},schedule:s,setNotifyFunction:l=>{t=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{i=l}}}var Yn=DQ(),kl,PP,sR=(PP=class{constructor(){ct(this,kl)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),SQ(this.gcTime)&&Ue(this,kl,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(oy?1/0:5*60*1e3))}clearGcTimeout(){re(this,kl)&&(clearTimeout(re(this,kl)),Ue(this,kl,void 0))}},kl=new WeakMap,PP),hu,fu,ti,Cl,Vn,Wf,Pl,ki,Xs,AP,MQ=(AP=class extends sR{constructor(t){super();ct(this,ki);ct(this,hu);ct(this,fu);ct(this,ti);ct(this,Cl);ct(this,Vn);ct(this,Wf);ct(this,Pl);Ue(this,Pl,!1),Ue(this,Wf,t.defaultOptions),this.setOptions(t.options),this.observers=[],Ue(this,Cl,t.client),Ue(this,ti,re(this,Cl).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Ue(this,hu,VQ(this.options)),this.state=t.state??re(this,hu),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=re(this,Vn))==null?void 0:t.promise}setOptions(t){this.options={...re(this,Wf),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&re(this,ti).remove(this)}setData(t,r){const i=EQ(this.state.data,t,this.options);return Mn(this,ki,Xs).call(this,{data:i,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),i}setState(t,r){Mn(this,ki,Xs).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var i,s;const r=(i=re(this,Vn))==null?void 0:i.promise;return(s=re(this,Vn))==null||s.cancel(t),r?r.then(Ei).catch(Ei):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(re(this,hu))}isActive(){return this.observers.some(t=>TQ(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===$x||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!bQ(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(i=>i.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=re(this,Vn))==null||r.continue()}onOnline(){var r;const t=this.observers.find(i=>i.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=re(this,Vn))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),re(this,ti).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(re(this,Vn)&&(re(this,Pl)?re(this,Vn).cancel({revert:!0}):re(this,Vn).cancelRetry()),this.scheduleGc()),re(this,ti).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Mn(this,ki,Xs).call(this,{type:"invalidate"})}fetch(t,r){var h,d,m;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(re(this,Vn))return re(this,Vn).continueRetry(),re(this,Vn).promise}if(t&&this.setOptions(t),!this.options.queryFn){const y=this.observers.find(v=>v.options.queryFn);y&&this.setOptions(y.options)}const i=new AbortController,s=y=>{Object.defineProperty(y,"signal",{enumerable:!0,get:()=>(Ue(this,Pl,!0),i.signal)})},o=()=>{const y=eR(this.options,r),v={client:re(this,Cl),queryKey:this.queryKey,meta:this.meta};return s(v),Ue(this,Pl,!1),this.options.persister?this.options.persister(y,v,this):y(v)},l={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:re(this,Cl),state:this.state,fetchFn:o};s(l),(h=this.options.behavior)==null||h.onFetch(l,this),Ue(this,fu,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&Mn(this,ki,Xs).call(this,{type:"fetch",meta:(m=l.fetchOptions)==null?void 0:m.meta});const u=y=>{var v,S,b,T;Cv(y)&&y.silent||Mn(this,ki,Xs).call(this,{type:"error",error:y}),Cv(y)||((S=(v=re(this,ti).config).onError)==null||S.call(v,y,this),(T=(b=re(this,ti).config).onSettled)==null||T.call(b,this.state.data,y,this)),this.scheduleGc()};return Ue(this,Vn,iR({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:i.abort.bind(i),onSuccess:y=>{var v,S,b,T;if(y===void 0){u(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(y)}catch(k){u(k);return}(S=(v=re(this,ti).config).onSuccess)==null||S.call(v,y,this),(T=(b=re(this,ti).config).onSettled)==null||T.call(b,y,this.state.error,this),this.scheduleGc()},onError:u,onFail:(y,v)=>{Mn(this,ki,Xs).call(this,{type:"failed",failureCount:y,error:v})},onPause:()=>{Mn(this,ki,Xs).call(this,{type:"pause"})},onContinue:()=>{Mn(this,ki,Xs).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),re(this,Vn).start()}},hu=new WeakMap,fu=new WeakMap,ti=new WeakMap,Cl=new WeakMap,Vn=new WeakMap,Wf=new WeakMap,Pl=new WeakMap,ki=new WeakSet,Xs=function(t){const r=i=>{switch(t.type){case"failed":return{...i,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...LQ(i.data,this.options),fetchMeta:t.meta??null};case"success":return{...i,data:t.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=t.error;return Cv(s)&&s.revert&&re(this,fu)?{...re(this,fu),fetchStatus:"idle"}:{...i,error:s,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...t.state}}};this.state=r(this.state),Yn.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),re(this,ti).notify({query:this,type:"updated",action:t})})},AP);function LQ(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:nR(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function VQ(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var ns,RP,FQ=(RP=class extends sy{constructor(e={}){super();ct(this,ns);this.config=e,Ue(this,ns,new Map)}build(e,t,r){const i=t.queryKey,s=t.queryHash??zx(i,t);let o=this.get(s);return o||(o=new MQ({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){re(this,ns).has(e.queryHash)||(re(this,ns).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=re(this,ns).get(e.queryHash);t&&(e.destroy(),t===e&&re(this,ns).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Yn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return re(this,ns).get(e)}getAll(){return[...re(this,ns).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>p_(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>p_(e,r)):t}notify(e){Yn.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Yn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Yn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},ns=new WeakMap,RP),rs,Kn,Al,is,Yo,IP,QQ=(IP=class extends sR{constructor(t){super();ct(this,is);ct(this,rs);ct(this,Kn);ct(this,Al);this.mutationId=t.mutationId,Ue(this,Kn,t.mutationCache),Ue(this,rs,[]),this.state=t.state||jQ(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){re(this,rs).includes(t)||(re(this,rs).push(t),this.clearGcTimeout(),re(this,Kn).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Ue(this,rs,re(this,rs).filter(r=>r!==t)),this.scheduleGc(),re(this,Kn).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){re(this,rs).length||(this.state.status==="pending"?this.scheduleGc():re(this,Kn).remove(this))}continue(){var t;return((t=re(this,Al))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,l,u,h,d,m,y,v,S,b,T,k,M,F,z,$,U,C,P,A;const r=()=>{Mn(this,is,Yo).call(this,{type:"continue"})};Ue(this,Al,iR({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(L,Q)=>{Mn(this,is,Yo).call(this,{type:"failed",failureCount:L,error:Q})},onPause:()=>{Mn(this,is,Yo).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>re(this,Kn).canRun(this)}));const i=this.state.status==="pending",s=!re(this,Al).canStart();try{if(i)r();else{Mn(this,is,Yo).call(this,{type:"pending",variables:t,isPaused:s}),await((l=(o=re(this,Kn).config).onMutate)==null?void 0:l.call(o,t,this));const Q=await((h=(u=this.options).onMutate)==null?void 0:h.call(u,t));Q!==this.state.context&&Mn(this,is,Yo).call(this,{type:"pending",context:Q,variables:t,isPaused:s})}const L=await re(this,Al).start();return await((m=(d=re(this,Kn).config).onSuccess)==null?void 0:m.call(d,L,t,this.state.context,this)),await((v=(y=this.options).onSuccess)==null?void 0:v.call(y,L,t,this.state.context)),await((b=(S=re(this,Kn).config).onSettled)==null?void 0:b.call(S,L,null,this.state.variables,this.state.context,this)),await((k=(T=this.options).onSettled)==null?void 0:k.call(T,L,null,t,this.state.context)),Mn(this,is,Yo).call(this,{type:"success",data:L}),L}catch(L){try{throw await((F=(M=re(this,Kn).config).onError)==null?void 0:F.call(M,L,t,this.state.context,this)),await(($=(z=this.options).onError)==null?void 0:$.call(z,L,t,this.state.context)),await((C=(U=re(this,Kn).config).onSettled)==null?void 0:C.call(U,void 0,L,this.state.variables,this.state.context,this)),await((A=(P=this.options).onSettled)==null?void 0:A.call(P,void 0,L,t,this.state.context)),L}finally{Mn(this,is,Yo).call(this,{type:"error",error:L})}}finally{re(this,Kn).runNext(this)}}},rs=new WeakMap,Kn=new WeakMap,Al=new WeakMap,is=new WeakSet,Yo=function(t){const r=i=>{switch(t.type){case"failed":return{...i,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...i,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:t.error,failureCount:i.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Yn.batch(()=>{re(this,rs).forEach(i=>{i.onMutationUpdate(t)}),re(this,Kn).notify({mutation:this,type:"updated",action:t})})},IP);function jQ(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var to,Ci,Hf,NP,zQ=(NP=class extends sy{constructor(e={}){super();ct(this,to);ct(this,Ci);ct(this,Hf);this.config=e,Ue(this,to,new Set),Ue(this,Ci,new Map),Ue(this,Hf,0)}build(e,t,r){const i=new QQ({mutationCache:this,mutationId:++Lp(this,Hf)._,options:e.defaultMutationOptions(t),state:r});return this.add(i),i}add(e){re(this,to).add(e);const t=Bp(e);if(typeof t=="string"){const r=re(this,Ci).get(t);r?r.push(e):re(this,Ci).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(re(this,to).delete(e)){const t=Bp(e);if(typeof t=="string"){const r=re(this,Ci).get(t);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&re(this,Ci).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Bp(e);if(typeof t=="string"){const r=re(this,Ci).get(t),i=r==null?void 0:r.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){var r;const t=Bp(e);if(typeof t=="string"){const i=(r=re(this,Ci).get(t))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Yn.batch(()=>{re(this,to).forEach(e=>{this.notify({type:"removed",mutation:e})}),re(this,to).clear(),re(this,Ci).clear()})}getAll(){return Array.from(re(this,to))}find(e){const t={exact:!0,...e};return this.getAll().find(r=>m_(t,r))}findAll(e={}){return this.getAll().filter(t=>m_(e,t))}notify(e){Yn.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Yn.batch(()=>Promise.all(e.map(t=>t.continue().catch(Ei))))}},to=new WeakMap,Ci=new WeakMap,Hf=new WeakMap,NP);function Bp(n){var e;return(e=n.options.scope)==null?void 0:e.id}function v_(n){return{onFetch:(e,t)=>{var d,m,y,v,S;const r=e.options,i=(y=(m=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:m.fetchMore)==null?void 0:y.direction,s=((v=e.state.data)==null?void 0:v.pages)||[],o=((S=e.state.data)==null?void 0:S.pageParams)||[];let l={pages:[],pageParams:[]},u=0;const h=async()=>{let b=!1;const T=F=>{Object.defineProperty(F,"signal",{enumerable:!0,get:()=>(e.signal.aborted?b=!0:e.signal.addEventListener("abort",()=>{b=!0}),e.signal)})},k=eR(e.options,e.fetchOptions),M=async(F,z,$)=>{if(b)return Promise.reject();if(z==null&&F.pages.length)return Promise.resolve(F);const U={client:e.client,queryKey:e.queryKey,pageParam:z,direction:$?"backward":"forward",meta:e.options.meta};T(U);const C=await k(U),{maxPages:P}=e.options,A=$?CQ:kQ;return{pages:A(F.pages,C,P),pageParams:A(F.pageParams,z,P)}};if(i&&s.length){const F=i==="backward",z=F?$Q:w_,$={pages:s,pageParams:o},U=z(r,$);l=await M($,U,F)}else{const F=n??s.length;do{const z=u===0?o[0]??r.initialPageParam:w_(r,l);if(u>0&&z==null)break;l=await M(l,z),u++}while(u<F)}return l};e.options.persister?e.fetchFn=()=>{var b,T;return(T=(b=e.options).persister)==null?void 0:T.call(b,h,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=h}}}function w_(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function $Q(n,{pages:e,pageParams:t}){var r;return e.length>0?(r=n.getPreviousPageParam)==null?void 0:r.call(n,e[0],e,t[0],t):void 0}var Lt,la,ca,du,pu,ua,mu,gu,DP,BQ=(DP=class{constructor(n={}){ct(this,Lt);ct(this,la);ct(this,ca);ct(this,du);ct(this,pu);ct(this,ua);ct(this,mu);ct(this,gu);Ue(this,Lt,n.queryCache||new FQ),Ue(this,la,n.mutationCache||new zQ),Ue(this,ca,n.defaultOptions||{}),Ue(this,du,new Map),Ue(this,pu,new Map),Ue(this,ua,0)}mount(){Lp(this,ua)._++,re(this,ua)===1&&(Ue(this,mu,tR.subscribe(async n=>{n&&(await this.resumePausedMutations(),re(this,Lt).onFocus())})),Ue(this,gu,eg.subscribe(async n=>{n&&(await this.resumePausedMutations(),re(this,Lt).onOnline())})))}unmount(){var n,e;Lp(this,ua)._--,re(this,ua)===0&&((n=re(this,mu))==null||n.call(this),Ue(this,mu,void 0),(e=re(this,gu))==null||e.call(this),Ue(this,gu,void 0))}isFetching(n){return re(this,Lt).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return re(this,la).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=re(this,Lt).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=re(this,Lt).build(this,e),r=t.state.data;return r===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(d_(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(n){return re(this,Lt).findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),i=re(this,Lt).get(r.queryHash),s=i==null?void 0:i.state.data,o=xQ(e,s);if(o!==void 0)return re(this,Lt).build(this,r).setData(o,{...t,manual:!0})}setQueriesData(n,e,t){return Yn.batch(()=>re(this,Lt).findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=re(this,Lt).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=re(this,Lt);Yn.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=re(this,Lt);return Yn.batch(()=>(t.findAll(n).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},r=Yn.batch(()=>re(this,Lt).findAll(n).map(i=>i.cancel(t)));return Promise.all(r).then(Ei).catch(Ei)}invalidateQueries(n,e={}){return Yn.batch(()=>(re(this,Lt).findAll(n).forEach(t=>{t.invalidate()}),(n==null?void 0:n.refetchType)==="none"?Promise.resolve():this.refetchQueries({...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},r=Yn.batch(()=>re(this,Lt).findAll(n).filter(i=>!i.isDisabled()).map(i=>{let s=i.fetch(void 0,t);return t.throwOnError||(s=s.catch(Ei)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(Ei)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=re(this,Lt).build(this,e);return t.isStaleByTime(d_(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(Ei).catch(Ei)}fetchInfiniteQuery(n){return n.behavior=v_(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(Ei).catch(Ei)}ensureInfiniteQueryData(n){return n.behavior=v_(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return eg.isOnline()?re(this,la).resumePausedMutations():Promise.resolve()}getQueryCache(){return re(this,Lt)}getMutationCache(){return re(this,la)}getDefaultOptions(){return re(this,ca)}setDefaultOptions(n){Ue(this,ca,n)}setQueryDefaults(n,e){re(this,du).set(yf(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...re(this,du).values()],t={};return e.forEach(r=>{vf(n,r.queryKey)&&Object.assign(t,r.defaultOptions)}),t}setMutationDefaults(n,e){re(this,pu).set(yf(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...re(this,pu).values()],t={};return e.forEach(r=>{vf(n,r.mutationKey)&&Object.assign(t,r.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...re(this,ca).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=zx(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===$x&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...re(this,ca).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){re(this,Lt).clear(),re(this,la).clear()}},Lt=new WeakMap,la=new WeakMap,ca=new WeakMap,du=new WeakMap,pu=new WeakMap,ua=new WeakMap,mu=new WeakMap,gu=new WeakMap,DP),UQ=I.createContext(void 0),qQ=({client:n,children:e})=>(I.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),D.jsx(UQ.Provider,{value:n,children:e}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wf(){return wf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},wf.apply(this,arguments)}var ha;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(ha||(ha={}));const O_="popstate";function WQ(n){n===void 0&&(n={});function e(r,i){let{pathname:s,search:o,hash:l}=r.location;return Kw("",{pathname:s,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:tg(i)}return GQ(e,t,null,n)}function Gt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function oR(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function HQ(){return Math.random().toString(36).substr(2,8)}function x_(n,e){return{usr:n.state,key:n.key,idx:e}}function Kw(n,e,t,r){return t===void 0&&(t=null),wf({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Qu(e):e,{state:t,key:e&&e.key||r||HQ()})}function tg(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Qu(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function GQ(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,l=ha.Pop,u=null,h=d();h==null&&(h=0,o.replaceState(wf({},o.state,{idx:h}),""));function d(){return(o.state||{idx:null}).idx}function m(){l=ha.Pop;let T=d(),k=T==null?null:T-h;h=T,u&&u({action:l,location:b.location,delta:k})}function y(T,k){l=ha.Push;let M=Kw(b.location,T,k);h=d()+1;let F=x_(M,h),z=b.createHref(M);try{o.pushState(F,"",z)}catch($){if($ instanceof DOMException&&$.name==="DataCloneError")throw $;i.location.assign(z)}s&&u&&u({action:l,location:b.location,delta:1})}function v(T,k){l=ha.Replace;let M=Kw(b.location,T,k);h=d();let F=x_(M,h),z=b.createHref(M);o.replaceState(F,"",z),s&&u&&u({action:l,location:b.location,delta:0})}function S(T){let k=i.location.origin!=="null"?i.location.origin:i.location.href,M=typeof T=="string"?T:tg(T);return M=M.replace(/ $/,"%20"),Gt(k,"No window.location.(origin|href) available to create URL for href: "+M),new URL(M,k)}let b={get action(){return l},get location(){return n(i,o)},listen(T){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(O_,m),u=T,()=>{i.removeEventListener(O_,m),u=null}},createHref(T){return e(i,T)},createURL:S,encodeLocation(T){let k=S(T);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:y,replace:v,go(T){return o.go(T)}};return b}var S_;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(S_||(S_={}));function XQ(n,e,t){return t===void 0&&(t="/"),KQ(n,e,t)}function KQ(n,e,t,r){let i=typeof e=="string"?Qu(e):e,s=Bx(i.pathname||"/",t);if(s==null)return null;let o=aR(n);YQ(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let h=cj(s);l=oj(o[u],h)}return l}function aR(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(s,o,l)=>{let u={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(Gt(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let h=ga([r,u.relativePath]),d=t.concat(u);s.children&&s.children.length>0&&(Gt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),aR(s.children,e,d,h)),!(s.path==null&&!s.index)&&e.push({path:h,score:ij(h,s.index),routesMeta:d})};return n.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let u of lR(s.path))i(s,o,u)}),e}function lR(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=lR(r.join("/")),l=[];return l.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&l.push(...o),l.map(u=>n.startsWith("/")&&u===""?"/":u)}function YQ(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:sj(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const JQ=/^:[\w-]+$/,ZQ=3,ej=2,tj=1,nj=10,rj=-2,b_=n=>n==="*";function ij(n,e){let t=n.split("/"),r=t.length;return t.some(b_)&&(r+=rj),e&&(r+=ej),t.filter(i=>!b_(i)).reduce((i,s)=>i+(JQ.test(s)?ZQ:s===""?tj:nj),r)}function sj(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function oj(n,e,t){let{routesMeta:r}=n,i={},s="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],h=l===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",m=aj({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},d),y=u.route;if(!m)return null;Object.assign(i,m.params),o.push({params:i,pathname:ga([s,m.pathname]),pathnameBase:dj(ga([s,m.pathnameBase])),route:y}),m.pathnameBase!=="/"&&(s=ga([s,m.pathnameBase]))}return o}function aj(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=lj(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((h,d,m)=>{let{paramName:y,isOptional:v}=d;if(y==="*"){let b=l[m]||"";o=s.slice(0,s.length-b.length).replace(/(.)\/+$/,"$1")}const S=l[m];return v&&!S?h[y]=void 0:h[y]=(S||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:o,pattern:n}}function lj(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),oR(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function cj(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return oR(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Bx(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function uj(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Qu(n):n;return{pathname:t?t.startsWith("/")?t:hj(t,e):e,search:pj(r),hash:mj(i)}}function hj(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Pv(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function fj(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function cR(n,e){let t=fj(n);return e?t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function uR(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=Qu(n):(i=wf({},n),Gt(!i.pathname||!i.pathname.includes("?"),Pv("?","pathname","search",i)),Gt(!i.pathname||!i.pathname.includes("#"),Pv("#","pathname","hash",i)),Gt(!i.search||!i.search.includes("#"),Pv("#","search","hash",i)));let s=n===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=t;else{let m=e.length-1;if(!r&&o.startsWith("..")){let y=o.split("/");for(;y[0]==="..";)y.shift(),m-=1;i.pathname=y.join("/")}l=m>=0?e[m]:"/"}let u=uj(i,l),h=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&t.endsWith("/");return!u.pathname.endsWith("/")&&(h||d)&&(u.pathname+="/"),u}const ga=n=>n.join("/").replace(/\/\/+/g,"/"),dj=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),pj=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,mj=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function gj(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const hR=["post","put","patch","delete"];new Set(hR);const yj=["get",...hR];new Set(yj);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Of(){return Of=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Of.apply(this,arguments)}const Ux=I.createContext(null),vj=I.createContext(null),Xl=I.createContext(null),ay=I.createContext(null),Kl=I.createContext({outlet:null,matches:[],isDataRoute:!1}),fR=I.createContext(null);function wj(n,e){let{relative:t}=e===void 0?{}:e;Jf()||Gt(!1);let{basename:r,navigator:i}=I.useContext(Xl),{hash:s,pathname:o,search:l}=pR(n,{relative:t}),u=o;return r!=="/"&&(u=o==="/"?r:ga([r,o])),i.createHref({pathname:u,search:l,hash:s})}function Jf(){return I.useContext(ay)!=null}function ju(){return Jf()||Gt(!1),I.useContext(ay).location}function dR(n){I.useContext(Xl).static||I.useLayoutEffect(n)}function za(){let{isDataRoute:n}=I.useContext(Kl);return n?Ij():Oj()}function Oj(){Jf()||Gt(!1);let n=I.useContext(Ux),{basename:e,future:t,navigator:r}=I.useContext(Xl),{matches:i}=I.useContext(Kl),{pathname:s}=ju(),o=JSON.stringify(cR(i,t.v7_relativeSplatPath)),l=I.useRef(!1);return dR(()=>{l.current=!0}),I.useCallback(function(h,d){if(d===void 0&&(d={}),!l.current)return;if(typeof h=="number"){r.go(h);return}let m=uR(h,JSON.parse(o),s,d.relative==="path");n==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:ga([e,m.pathname])),(d.replace?r.replace:r.push)(m,d.state,d)},[e,r,o,s,n])}function pR(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=I.useContext(Xl),{matches:i}=I.useContext(Kl),{pathname:s}=ju(),o=JSON.stringify(cR(i,r.v7_relativeSplatPath));return I.useMemo(()=>uR(n,JSON.parse(o),s,t==="path"),[n,o,s,t])}function xj(n,e){return Sj(n,e)}function Sj(n,e,t,r){Jf()||Gt(!1);let{navigator:i,static:s}=I.useContext(Xl),{matches:o}=I.useContext(Kl),l=o[o.length-1],u=l?l.params:{};l&&l.pathname;let h=l?l.pathnameBase:"/";l&&l.route;let d=ju(),m;if(e){var y;let k=typeof e=="string"?Qu(e):e;h==="/"||(y=k.pathname)!=null&&y.startsWith(h)||Gt(!1),m=k}else m=d;let v=m.pathname||"/",S=v;if(h!=="/"){let k=h.replace(/^\//,"").split("/");S="/"+v.replace(/^\//,"").split("/").slice(k.length).join("/")}let b=XQ(n,{pathname:S}),T=kj(b&&b.map(k=>Object.assign({},k,{params:Object.assign({},u,k.params),pathname:ga([h,i.encodeLocation?i.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?h:ga([h,i.encodeLocation?i.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),o,t,r);return e&&T?I.createElement(ay.Provider,{value:{location:Of({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:ha.Pop}},T):T}function bj(){let n=Rj(),e=gj(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},e),t?I.createElement("pre",{style:i},t):null,null)}const Tj=I.createElement(bj,null);class _j extends I.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?I.createElement(Kl.Provider,{value:this.props.routeContext},I.createElement(fR.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ej(n){let{routeContext:e,match:t,children:r}=n,i=I.useContext(Ux);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),I.createElement(Kl.Provider,{value:e},r)}function kj(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var s;if(!t)return null;if(t.errors)n=t.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,l=(i=t)==null?void 0:i.errors;if(l!=null){let d=o.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);d>=0||Gt(!1),o=o.slice(0,Math.min(o.length,d+1))}let u=!1,h=-1;if(t&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let m=o[d];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(h=d),m.route.id){let{loaderData:y,errors:v}=t,S=m.route.loader&&y[m.route.id]===void 0&&(!v||v[m.route.id]===void 0);if(m.route.lazy||S){u=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}return o.reduceRight((d,m,y)=>{let v,S=!1,b=null,T=null;t&&(v=l&&m.route.id?l[m.route.id]:void 0,b=m.route.errorElement||Tj,u&&(h<0&&y===0?(Nj("route-fallback"),S=!0,T=null):h===y&&(S=!0,T=m.route.hydrateFallbackElement||null)));let k=e.concat(o.slice(0,y+1)),M=()=>{let F;return v?F=b:S?F=T:m.route.Component?F=I.createElement(m.route.Component,null):m.route.element?F=m.route.element:F=d,I.createElement(Ej,{match:m,routeContext:{outlet:d,matches:k,isDataRoute:t!=null},children:F})};return t&&(m.route.ErrorBoundary||m.route.errorElement||y===0)?I.createElement(_j,{location:t.location,revalidation:t.revalidation,component:b,error:v,children:M(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):M()},null)}var mR=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(mR||{}),gR=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(gR||{});function Cj(n){let e=I.useContext(Ux);return e||Gt(!1),e}function Pj(n){let e=I.useContext(vj);return e||Gt(!1),e}function Aj(n){let e=I.useContext(Kl);return e||Gt(!1),e}function yR(n){let e=Aj(),t=e.matches[e.matches.length-1];return t.route.id||Gt(!1),t.route.id}function Rj(){var n;let e=I.useContext(fR),t=Pj(),r=yR();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function Ij(){let{router:n}=Cj(mR.UseNavigateStable),e=yR(gR.UseNavigateStable),t=I.useRef(!1);return dR(()=>{t.current=!0}),I.useCallback(function(i,s){s===void 0&&(s={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,Of({fromRouteId:e},s)))},[n,e])}const T_={};function Nj(n,e,t){T_[n]||(T_[n]=!0)}function Dj(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function wl(n){Gt(!1)}function Mj(n){let{basename:e="/",children:t=null,location:r,navigationType:i=ha.Pop,navigator:s,static:o=!1,future:l}=n;Jf()&&Gt(!1);let u=e.replace(/^\/*/,"/"),h=I.useMemo(()=>({basename:u,navigator:s,static:o,future:Of({v7_relativeSplatPath:!1},l)}),[u,l,s,o]);typeof r=="string"&&(r=Qu(r));let{pathname:d="/",search:m="",hash:y="",state:v=null,key:S="default"}=r,b=I.useMemo(()=>{let T=Bx(d,u);return T==null?null:{location:{pathname:T,search:m,hash:y,state:v,key:S},navigationType:i}},[u,d,m,y,v,S,i]);return b==null?null:I.createElement(Xl.Provider,{value:h},I.createElement(ay.Provider,{children:t,value:b}))}function Lj(n){let{children:e,location:t}=n;return xj(Yw(e),t)}new Promise(()=>{});function Yw(n,e){e===void 0&&(e=[]);let t=[];return I.Children.forEach(n,(r,i)=>{if(!I.isValidElement(r))return;let s=[...e,i];if(r.type===I.Fragment){t.push.apply(t,Yw(r.props.children,s));return}r.type!==wl&&Gt(!1),!r.props.index||!r.props.children||Gt(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Yw(r.props.children,s)),t.push(o)}),t}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jw(){return Jw=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Jw.apply(this,arguments)}function Vj(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function Fj(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Qj(n,e){return n.button===0&&(!e||e==="_self")&&!Fj(n)}const jj=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],zj="6";try{window.__reactRouterVersion=zj}catch{}const $j="startTransition",__=MP[$j];function Bj(n){let{basename:e,children:t,future:r,window:i}=n,s=I.useRef();s.current==null&&(s.current=WQ({window:i,v5Compat:!0}));let o=s.current,[l,u]=I.useState({action:o.action,location:o.location}),{v7_startTransition:h}=r||{},d=I.useCallback(m=>{h&&__?__(()=>u(m)):u(m)},[u,h]);return I.useLayoutEffect(()=>o.listen(d),[o,d]),I.useEffect(()=>Dj(r),[r]),I.createElement(Mj,{basename:e,children:t,location:l.location,navigationType:l.action,navigator:o,future:r})}const Uj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",qj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ef=I.forwardRef(function(e,t){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:l,target:u,to:h,preventScrollReset:d,viewTransition:m}=e,y=Vj(e,jj),{basename:v}=I.useContext(Xl),S,b=!1;if(typeof h=="string"&&qj.test(h)&&(S=h,Uj))try{let F=new URL(window.location.href),z=h.startsWith("//")?new URL(F.protocol+h):new URL(h),$=Bx(z.pathname,v);z.origin===F.origin&&$!=null?h=$+z.search+z.hash:b=!0}catch{}let T=wj(h,{relative:i}),k=Wj(h,{replace:o,state:l,target:u,preventScrollReset:d,relative:i,viewTransition:m});function M(F){r&&r(F),F.defaultPrevented||k(F)}return I.createElement("a",Jw({},y,{href:S||T,onClick:b||s?r:M,ref:t,target:u}))});var E_;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(E_||(E_={}));var k_;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(k_||(k_={}));function Wj(n,e){let{target:t,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:l}=e===void 0?{}:e,u=za(),h=ju(),d=pR(n,{relative:o});return I.useCallback(m=>{if(Qj(m,t)){m.preventDefault();let y=r!==void 0?r:tg(h)===tg(d);u(n,{replace:y,state:i,preventScrollReset:s,relative:o,viewTransition:l})}},[h,u,d,r,i,t,n,s,o,l])}const Hj=Ax("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),uo=I.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...i},s)=>{const o=r?IV:"button";return D.jsx(o,{className:Pn(Hj({variant:e,size:t,className:n})),ref:s,...i})});uo.displayName="Button";const Gj=()=>{};var C_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Xj=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],o=n[t++],l=n[t++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},wR={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,l=o?n[i+1]:0,u=i+2<n.length,h=u?n[i+2]:0,d=s>>2,m=(s&3)<<4|l>>4;let y=(l&15)<<2|h>>6,v=h&63;u||(v=64,o||(y=64)),r.push(t[d],t[m],t[y],t[v])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(vR(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Xj(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],l=i<n.length?t[n.charAt(i)]:0;++i;const h=i<n.length?t[n.charAt(i)]:64;++i;const m=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||l==null||h==null||m==null)throw new Kj;const y=s<<2|l>>4;if(r.push(y),h!==64){const v=l<<4&240|h>>2;if(r.push(v),m!==64){const S=h<<6&192|m;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Kj extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Yj=function(n){const e=vR(n);return wR.encodeByteArray(e,!0)},ng=function(n){return Yj(n).replace(/\./g,"")},OR=function(n){try{return wR.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jj(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zj=()=>Jj().__FIREBASE_DEFAULTS__,ez=()=>{if(typeof process>"u"||typeof C_>"u")return;const n=C_.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},tz=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&OR(n[1]);return e&&JSON.parse(e)},ly=()=>{try{return Gj()||Zj()||ez()||tz()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},xR=n=>{var e,t;return(t=(e=ly())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},nz=n=>{const e=xR(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},SR=()=>{var n;return(n=ly())===null||n===void 0?void 0:n.config},bR=n=>{var e;return(e=ly())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rz{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iz(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[ng(JSON.stringify(t)),ng(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $n(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sz(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($n())}function oz(){var n;const e=(n=ly())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function az(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function lz(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function cz(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function uz(){const n=$n();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function hz(){return!oz()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fz(){try{return typeof indexedDB=="object"}catch{return!1}}function dz(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pz="FirebaseError";class Oo extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=pz,Object.setPrototypeOf(this,Oo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zf.prototype.create)}}class Zf{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?mz(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new Oo(i,l,r)}}function mz(n,e){return n.replace(gz,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const gz=/\{\$([^}]+)}/g;function yz(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Dl(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if(P_(s)&&P_(o)){if(!Dl(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function P_(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ed(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function $h(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Bh(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function vz(n,e){const t=new wz(n,e);return t.subscribe.bind(t)}class wz{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Oz(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Av),i.error===void 0&&(i.error=Av),i.complete===void 0&&(i.complete=Av);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Oz(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Av(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(n){return n&&n._delegate?n._delegate:n}class Ml{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ol="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xz{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new rz;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(bz(e))try{this.getOrInitializeService({instanceIdentifier:Ol})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ol){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ol){return this.instances.has(e)}getOptions(e=Ol){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Sz(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ol){return this.component?this.component.multipleInstances?e:Ol:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Sz(n){return n===Ol?void 0:n}function bz(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tz{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new xz(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ye;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ye||(Ye={}));const _z={debug:Ye.DEBUG,verbose:Ye.VERBOSE,info:Ye.INFO,warn:Ye.WARN,error:Ye.ERROR,silent:Ye.SILENT},Ez=Ye.INFO,kz={[Ye.DEBUG]:"log",[Ye.VERBOSE]:"log",[Ye.INFO]:"info",[Ye.WARN]:"warn",[Ye.ERROR]:"error"},Cz=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=kz[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class qx{constructor(e){this.name=e,this._logLevel=Ez,this._logHandler=Cz,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?_z[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ye.DEBUG,...e),this._logHandler(this,Ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ye.VERBOSE,...e),this._logHandler(this,Ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ye.INFO,...e),this._logHandler(this,Ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ye.WARN,...e),this._logHandler(this,Ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ye.ERROR,...e),this._logHandler(this,Ye.ERROR,...e)}}const Pz=(n,e)=>e.some(t=>n instanceof t);let A_,R_;function Az(){return A_||(A_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Rz(){return R_||(R_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const TR=new WeakMap,Zw=new WeakMap,_R=new WeakMap,Rv=new WeakMap,Wx=new WeakMap;function Iz(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(ya(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&TR.set(t,n)}).catch(()=>{}),Wx.set(e,n),e}function Nz(n){if(Zw.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});Zw.set(n,e)}let eO={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Zw.get(n);if(e==="objectStoreNames")return n.objectStoreNames||_R.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ya(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Dz(n){eO=n(eO)}function Mz(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Iv(this),e,...t);return _R.set(r,e.sort?e.sort():[e]),ya(r)}:Rz().includes(n)?function(...e){return n.apply(Iv(this),e),ya(TR.get(this))}:function(...e){return ya(n.apply(Iv(this),e))}}function Lz(n){return typeof n=="function"?Mz(n):(n instanceof IDBTransaction&&Nz(n),Pz(n,Az())?new Proxy(n,eO):n)}function ya(n){if(n instanceof IDBRequest)return Iz(n);if(Rv.has(n))return Rv.get(n);const e=Lz(n);return e!==n&&(Rv.set(n,e),Wx.set(e,n)),e}const Iv=n=>Wx.get(n);function Vz(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),l=ya(o);return r&&o.addEventListener("upgradeneeded",u=>{r(ya(o.result),u.oldVersion,u.newVersion,ya(o.transaction),u)}),t&&o.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const Fz=["get","getKey","getAll","getAllKeys","count"],Qz=["put","add","delete","clear"],Nv=new Map;function I_(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Nv.get(e))return Nv.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=Qz.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Fz.includes(t)))return;const s=async function(o,...l){const u=this.transaction(o,i?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[t](...l),i&&u.done]))[0]};return Nv.set(e,s),s}Dz(n=>({...n,get:(e,t,r)=>I_(e,t)||n.get(e,t,r),has:(e,t)=>!!I_(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jz{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(zz(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function zz(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const tO="@firebase/app",N_="0.11.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho=new qx("@firebase/app"),$z="@firebase/app-compat",Bz="@firebase/analytics-compat",Uz="@firebase/analytics",qz="@firebase/app-check-compat",Wz="@firebase/app-check",Hz="@firebase/auth",Gz="@firebase/auth-compat",Xz="@firebase/database",Kz="@firebase/data-connect",Yz="@firebase/database-compat",Jz="@firebase/functions",Zz="@firebase/functions-compat",e$="@firebase/installations",t$="@firebase/installations-compat",n$="@firebase/messaging",r$="@firebase/messaging-compat",i$="@firebase/performance",s$="@firebase/performance-compat",o$="@firebase/remote-config",a$="@firebase/remote-config-compat",l$="@firebase/storage",c$="@firebase/storage-compat",u$="@firebase/firestore",h$="@firebase/vertexai",f$="@firebase/firestore-compat",d$="firebase",p$="11.6.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nO="[DEFAULT]",m$={[tO]:"fire-core",[$z]:"fire-core-compat",[Uz]:"fire-analytics",[Bz]:"fire-analytics-compat",[Wz]:"fire-app-check",[qz]:"fire-app-check-compat",[Hz]:"fire-auth",[Gz]:"fire-auth-compat",[Xz]:"fire-rtdb",[Kz]:"fire-data-connect",[Yz]:"fire-rtdb-compat",[Jz]:"fire-fn",[Zz]:"fire-fn-compat",[e$]:"fire-iid",[t$]:"fire-iid-compat",[n$]:"fire-fcm",[r$]:"fire-fcm-compat",[i$]:"fire-perf",[s$]:"fire-perf-compat",[o$]:"fire-rc",[a$]:"fire-rc-compat",[l$]:"fire-gcs",[c$]:"fire-gcs-compat",[u$]:"fire-fst",[f$]:"fire-fst-compat",[h$]:"fire-vertex","fire-js":"fire-js",[d$]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rg=new Map,g$=new Map,rO=new Map;function D_(n,e){try{n.container.addComponent(e)}catch(t){ho.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function wu(n){const e=n.name;if(rO.has(e))return ho.debug(`There were multiple attempts to register component ${e}.`),!1;rO.set(e,n);for(const t of rg.values())D_(t,n);for(const t of g$.values())D_(t,n);return!0}function Hx(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ri(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y$={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},va=new Zf("app","Firebase",y$);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v${constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ml("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw va.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zu=p$;function ER(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:nO,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw va.create("bad-app-name",{appName:String(i)});if(t||(t=SR()),!t)throw va.create("no-options");const s=rg.get(i);if(s){if(Dl(t,s.options)&&Dl(r,s.config))return s;throw va.create("duplicate-app",{appName:i})}const o=new Tz(i);for(const u of rO.values())o.addComponent(u);const l=new v$(t,r,o);return rg.set(i,l),l}function kR(n=nO){const e=rg.get(n);if(!e&&n===nO&&SR())return ER();if(!e)throw va.create("no-app",{appName:n});return e}function wa(n,e,t){var r;let i=(r=m$[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ho.warn(l.join(" "));return}wu(new Ml(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w$="firebase-heartbeat-database",O$=1,xf="firebase-heartbeat-store";let Dv=null;function CR(){return Dv||(Dv=Vz(w$,O$,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(xf)}catch(t){console.warn(t)}}}}).catch(n=>{throw va.create("idb-open",{originalErrorMessage:n.message})})),Dv}async function x$(n){try{const t=(await CR()).transaction(xf),r=await t.objectStore(xf).get(PR(n));return await t.done,r}catch(e){if(e instanceof Oo)ho.warn(e.message);else{const t=va.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ho.warn(t.message)}}}async function M_(n,e){try{const r=(await CR()).transaction(xf,"readwrite");await r.objectStore(xf).put(e,PR(n)),await r.done}catch(t){if(t instanceof Oo)ho.warn(t.message);else{const r=va.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ho.warn(r.message)}}}function PR(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S$=1024,b$=30;class T${constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new E$(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=L_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>b$){const o=k$(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ho.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=L_(),{heartbeatsToSend:r,unsentEntries:i}=_$(this._heartbeatsCache.heartbeats),s=ng(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return ho.warn(t),""}}}function L_(){return new Date().toISOString().substring(0,10)}function _$(n,e=S$){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),V_(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),V_(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class E${constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return fz()?dz().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await x$(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return M_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return M_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function V_(n){return ng(JSON.stringify({version:2,heartbeats:n})).length}function k$(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C$(n){wu(new Ml("platform-logger",e=>new jz(e),"PRIVATE")),wu(new Ml("heartbeat",e=>new T$(e),"PRIVATE")),wa(tO,N_,n),wa(tO,N_,"esm2017"),wa("fire-js","")}C$("");var P$="firebase",A$="11.6.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wa(P$,A$,"app");function Gx(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function AR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const R$=AR,RR=new Zf("auth","Firebase",AR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ig=new qx("@firebase/auth");function I$(n,...e){ig.logLevel<=Ye.WARN&&ig.warn(`Auth (${zu}): ${n}`,...e)}function _m(n,...e){ig.logLevel<=Ye.ERROR&&ig.error(`Auth (${zu}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Di(n,...e){throw Xx(n,...e)}function ds(n,...e){return Xx(n,...e)}function IR(n,e,t){const r=Object.assign(Object.assign({},R$()),{[e]:t});return new Zf("auth","Firebase",r).create(e,{appName:n.name})}function so(n){return IR(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Xx(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return RR.create(n,...e)}function Ve(n,e,...t){if(!n)throw Xx(e,...t)}function ro(n){const e="INTERNAL ASSERTION FAILED: "+n;throw _m(e),new Error(e)}function fo(n,e){n||ro(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iO(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function N$(){return F_()==="http:"||F_()==="https:"}function F_(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D$(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(N$()||lz()||"connection"in navigator)?navigator.onLine:!0}function M$(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e,t){this.shortDelay=e,this.longDelay=t,fo(t>e,"Short delay should be less than long delay!"),this.isMobile=sz()||cz()}get(){return D$()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kx(n,e){fo(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ro("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ro("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ro("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L$={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V$=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],F$=new td(3e4,6e4);function $a(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function xo(n,e,t,r,i={}){return DR(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const l=ed(Object.assign({key:n.config.apiKey},o)).slice(1),u=await n._getAdditionalHeaders();u["Content-Type"]="application/json",n.languageCode&&(u["X-Firebase-Locale"]=n.languageCode);const h=Object.assign({method:e,headers:u},s);return az()||(h.referrerPolicy="no-referrer"),NR.fetch()(await MR(n,n.config.apiHost,t,l),h)})}async function DR(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},L$),e);try{const i=new j$(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Up(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[u,h]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Up(n,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Up(n,"email-already-in-use",o);if(u==="USER_DISABLED")throw Up(n,"user-disabled",o);const d=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw IR(n,d,h);Di(n,d)}}catch(i){if(i instanceof Oo)throw i;Di(n,"network-request-failed",{message:String(i)})}}async function nd(n,e,t,r,i={}){const s=await xo(n,e,t,r,i);return"mfaPendingCredential"in s&&Di(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function MR(n,e,t,r){const i=`${e}${t}?${r}`,s=n,o=s.config.emulator?Kx(n.config,i):`${n.config.apiScheme}://${i}`;return V$.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function Q$(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class j${clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ds(this.auth,"network-request-failed")),F$.get())})}}function Up(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=ds(n,e,r);return i.customData._tokenResponse=t,i}function Q_(n){return n!==void 0&&n.enterprise!==void 0}class z${constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Q$(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function $$(n,e){return xo(n,"GET","/v2/recaptchaConfig",$a(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B$(n,e){return xo(n,"POST","/v1/accounts:delete",e)}async function sg(n,e){return xo(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tf(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function U$(n,e=!1){const t=sn(n),r=await t.getIdToken(e),i=Yx(r);Ve(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:tf(Mv(i.auth_time)),issuedAtTime:tf(Mv(i.iat)),expirationTime:tf(Mv(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Mv(n){return Number(n)*1e3}function Yx(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return _m("JWT malformed, contained fewer than 3 sections"),null;try{const i=OR(t);return i?JSON.parse(i):(_m("Failed to decode base64 JWT payload"),null)}catch(i){return _m("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function j_(n){const e=Yx(n);return Ve(e,"internal-error"),Ve(typeof e.exp<"u","internal-error"),Ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ou(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Oo&&q$(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function q$({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W${constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=tf(this.lastLoginAt),this.creationTime=tf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function og(n){var e;const t=n.auth,r=await n.getIdToken(),i=await Ou(n,sg(t,{idToken:r}));Ve(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?LR(s.providerUserInfo):[],l=G$(n.providerData,o),u=n.isAnonymous,h=!(n.email&&s.passwordHash)&&!(l!=null&&l.length),d=u?h:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new sO(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(n,m)}async function H$(n){const e=sn(n);await og(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function G$(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function LR(n){return n.map(e=>{var{providerId:t}=e,r=Gx(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X$(n,e){const t=await DR(n,{},async()=>{const r=ed({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=await MR(n,i,"/v1/token",`key=${s}`),l=await n._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",NR.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function K$(n,e){return xo(n,"POST","/v2/accounts:revokeToken",$a(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ve(e.idToken,"internal-error"),Ve(typeof e.idToken<"u","internal-error"),Ve(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):j_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ve(e.length!==0,"internal-error");const t=j_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await X$(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new Kc;return r&&(Ve(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Ve(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Ve(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Kc,this.toJSON())}_performRefresh(){return ro("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ko(n,e){Ve(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Pi{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Gx(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new W$(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new sO(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Ou(this,this.stsTokenManager.getToken(this.auth,e));return Ve(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return U$(this,e)}reload(){return H$(this)}_assign(e){this!==e&&(Ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Pi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await og(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ri(this.auth.app))return Promise.reject(so(this.auth));const e=await this.getIdToken();return await Ou(this,B$(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,l,u,h,d;const m=(r=t.displayName)!==null&&r!==void 0?r:void 0,y=(i=t.email)!==null&&i!==void 0?i:void 0,v=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,S=(o=t.photoURL)!==null&&o!==void 0?o:void 0,b=(l=t.tenantId)!==null&&l!==void 0?l:void 0,T=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,k=(h=t.createdAt)!==null&&h!==void 0?h:void 0,M=(d=t.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:F,emailVerified:z,isAnonymous:$,providerData:U,stsTokenManager:C}=t;Ve(F&&C,e,"internal-error");const P=Kc.fromJSON(this.name,C);Ve(typeof F=="string",e,"internal-error"),Ko(m,e.name),Ko(y,e.name),Ve(typeof z=="boolean",e,"internal-error"),Ve(typeof $=="boolean",e,"internal-error"),Ko(v,e.name),Ko(S,e.name),Ko(b,e.name),Ko(T,e.name),Ko(k,e.name),Ko(M,e.name);const A=new Pi({uid:F,auth:e,email:y,emailVerified:z,displayName:m,isAnonymous:$,photoURL:S,phoneNumber:v,tenantId:b,stsTokenManager:P,createdAt:k,lastLoginAt:M});return U&&Array.isArray(U)&&(A.providerData=U.map(L=>Object.assign({},L))),T&&(A._redirectEventId=T),A}static async _fromIdTokenResponse(e,t,r=!1){const i=new Kc;i.updateFromServerResponse(t);const s=new Pi({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await og(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Ve(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?LR(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),l=new Kc;l.updateFromIdToken(r);const u=new Pi({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:o}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new sO(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z_=new Map;function io(n){fo(n instanceof Function,"Expected a class definition");let e=z_.get(n);return e?(fo(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,z_.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}VR.type="NONE";const $_=VR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Em(n,e,t){return`firebase:${n}:${e}:${t}`}class Yc{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Em(this.userKey,i.apiKey,s),this.fullPersistenceKey=Em("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await sg(this.auth,{idToken:e}).catch(()=>{});return t?Pi._fromGetAccountInfoResponse(this.auth,t,e):null}return Pi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Yc(io($_),e,r);const i=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=i[0]||io($_);const o=Em(r,e.config.apiKey,e.name);let l=null;for(const h of t)try{const d=await h._get(o);if(d){let m;if(typeof d=="string"){const y=await sg(e,{idToken:d}).catch(()=>{});if(!y)break;m=await Pi._fromGetAccountInfoResponse(e,y,d)}else m=Pi._fromJSON(e,d);h!==s&&(l=m),s=h;break}}catch{}const u=i.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Yc(s,e,r):(s=u[0],l&&await s._set(o,l.toJSON()),await Promise.all(t.map(async h=>{if(h!==s)try{await h._remove(o)}catch{}})),new Yc(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B_(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(zR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(FR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(BR(e))return"Blackberry";if(UR(e))return"Webos";if(QR(e))return"Safari";if((e.includes("chrome/")||jR(e))&&!e.includes("edge/"))return"Chrome";if($R(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function FR(n=$n()){return/firefox\//i.test(n)}function QR(n=$n()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function jR(n=$n()){return/crios\//i.test(n)}function zR(n=$n()){return/iemobile/i.test(n)}function $R(n=$n()){return/android/i.test(n)}function BR(n=$n()){return/blackberry/i.test(n)}function UR(n=$n()){return/webos/i.test(n)}function Jx(n=$n()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Y$(n=$n()){var e;return Jx(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function J$(){return uz()&&document.documentMode===10}function qR(n=$n()){return Jx(n)||$R(n)||UR(n)||BR(n)||/windows phone/i.test(n)||zR(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WR(n,e=[]){let t;switch(n){case"Browser":t=B_($n());break;case"Worker":t=`${B_($n())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${zu}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z${constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((o,l)=>{try{const u=e(s);o(u)}catch(u){l(u)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eB(n,e={}){return xo(n,"GET","/v2/passwordPolicy",$a(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tB=6;class nB{constructor(e){var t,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:tB,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rB{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new U_(this),this.idTokenSubscription=new U_(this),this.beforeStateQueue=new Z$(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=RR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=io(t)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await Yc.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await sg(this,{idToken:e}),r=await Pi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(ri(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,l=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await og(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=M$()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ri(this.app))return Promise.reject(so(this));const t=e?sn(e):null;return t&&Ve(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ri(this.app)?Promise.reject(so(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ri(this.app)?Promise.reject(so(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(io(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await eB(this),t=new nB(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Zf("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await K$(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&io(e)||this._popupRedirectResolver;Ve(t,this,"argument-error"),this.redirectPersistenceManager=await Yc.create(this,[io(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ve(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof t=="function"){const u=e.addObserver(t,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(t);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=WR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(ri(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&I$(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Yl(n){return sn(n)}class U_{constructor(e){this.auth=e,this.observer=null,this.addObserver=vz(t=>this.observer=t)}get next(){return Ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cy={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function iB(n){cy=n}function HR(n){return cy.loadJS(n)}function sB(){return cy.recaptchaEnterpriseScript}function oB(){return cy.gapiScript}function aB(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class lB{constructor(){this.enterprise=new cB}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class cB{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const uB="recaptcha-enterprise",GR="NO_RECAPTCHA";class hB{constructor(e){this.type=uB,this.auth=Yl(e)}async verify(e="verify",t=!1){async function r(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,l)=>{$$(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const h=new z$(u);return s.tenantId==null?s._agentRecaptchaConfig=h:s._tenantRecaptchaConfigs[s.tenantId]=h,o(h.siteKey)}}).catch(u=>{l(u)})})}function i(s,o,l){const u=window.grecaptcha;Q_(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(h=>{o(h)}).catch(()=>{o(GR)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new lB().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(l=>{if(!t&&Q_(window.grecaptcha))i(l,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=sB();u.length!==0&&(u+=l),HR(u).then(()=>{i(l,s,o)}).catch(h=>{o(h)})}}).catch(l=>{o(l)})})}}async function q_(n,e,t,r=!1,i=!1){const s=new hB(n);let o;if(i)o=GR;else try{o=await s.verify(t)}catch{o=await s.verify(t,!0)}const l=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const u=l.phoneEnrollmentInfo.phoneNumber,h=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:h,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function oO(n,e,t,r,i){var s;if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await q_(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await q_(n,e,t,t==="getOobCode");return r(n,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fB(n,e){const t=Hx(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(Dl(s,e??{}))return i;Di(i,"already-initialized")}return t.initialize({options:e})}function dB(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(io);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function pB(n,e,t){const r=Yl(n);Ve(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=XR(e),{host:o,port:l}=mB(e),u=l===null?"":`:${l}`,h={url:`${s}//${o}${u}/`},d=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Ve(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ve(Dl(h,r.config.emulator)&&Dl(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,gB()}function XR(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function mB(n){const e=XR(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:W_(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:W_(o)}}}function W_(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function gB(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ro("not implemented")}_getIdTokenResponse(e){return ro("not implemented")}_linkToIdToken(e,t){return ro("not implemented")}_getReauthenticationResolver(e){return ro("not implemented")}}async function yB(n,e){return xo(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vB(n,e){return nd(n,"POST","/v1/accounts:signInWithPassword",$a(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wB(n,e){return nd(n,"POST","/v1/accounts:signInWithEmailLink",$a(n,e))}async function OB(n,e){return nd(n,"POST","/v1/accounts:signInWithEmailLink",$a(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf extends Zx{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Sf(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Sf(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return oO(e,t,"signInWithPassword",vB);case"emailLink":return wB(e,{email:this._email,oobCode:this._password});default:Di(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return oO(e,r,"signUpPassword",yB);case"emailLink":return OB(e,{idToken:t,email:this._email,oobCode:this._password});default:Di(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jc(n,e){return nd(n,"POST","/v1/accounts:signInWithIdp",$a(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xB="http://localhost";class Ll extends Zx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ll(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Di("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=Gx(t,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Ll(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return Jc(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Jc(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Jc(e,t)}buildRequest(){const e={requestUri:xB,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ed(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SB(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function bB(n){const e=$h(Bh(n)).link,t=e?$h(Bh(e)).deep_link_id:null,r=$h(Bh(n)).deep_link_id;return(r?$h(Bh(r)).link:null)||r||t||e||n}class eS{constructor(e){var t,r,i,s,o,l;const u=$h(Bh(e)),h=(t=u.apiKey)!==null&&t!==void 0?t:null,d=(r=u.oobCode)!==null&&r!==void 0?r:null,m=SB((i=u.mode)!==null&&i!==void 0?i:null);Ve(h&&d&&m,"argument-error"),this.apiKey=h,this.operation=m,this.code=d,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=u.lang)!==null&&o!==void 0?o:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const t=bB(e);try{return new eS(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(){this.providerId=$u.PROVIDER_ID}static credential(e,t){return Sf._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=eS.parseLink(t);return Ve(r,"argument-error"),Sf._fromEmailAndCode(e,r.code,r.tenantId)}}$u.PROVIDER_ID="password";$u.EMAIL_PASSWORD_SIGN_IN_METHOD="password";$u.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd extends KR{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta extends rd{constructor(){super("facebook.com")}static credential(e){return Ll._fromParams({providerId:ta.PROVIDER_ID,signInMethod:ta.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ta.credentialFromTaggedObject(e)}static credentialFromError(e){return ta.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ta.credential(e.oauthAccessToken)}catch{return null}}}ta.FACEBOOK_SIGN_IN_METHOD="facebook.com";ta.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na extends rd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ll._fromParams({providerId:na.PROVIDER_ID,signInMethod:na.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return na.credentialFromTaggedObject(e)}static credentialFromError(e){return na.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return na.credential(t,r)}catch{return null}}}na.GOOGLE_SIGN_IN_METHOD="google.com";na.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra extends rd{constructor(){super("github.com")}static credential(e){return Ll._fromParams({providerId:ra.PROVIDER_ID,signInMethod:ra.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ra.credentialFromTaggedObject(e)}static credentialFromError(e){return ra.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ra.credential(e.oauthAccessToken)}catch{return null}}}ra.GITHUB_SIGN_IN_METHOD="github.com";ra.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia extends rd{constructor(){super("twitter.com")}static credential(e,t){return Ll._fromParams({providerId:ia.PROVIDER_ID,signInMethod:ia.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ia.credentialFromTaggedObject(e)}static credentialFromError(e){return ia.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ia.credential(t,r)}catch{return null}}}ia.TWITTER_SIGN_IN_METHOD="twitter.com";ia.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TB(n,e){return nd(n,"POST","/v1/accounts:signUp",$a(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await Pi._fromIdTokenResponse(e,r,i),o=H_(r);return new Vl({user:s,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=H_(r);return new Vl({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function H_(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag extends Oo{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,ag.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new ag(e,t,r,i)}}function YR(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?ag._fromErrorAndOperation(n,s,e,r):s})}async function _B(n,e,t=!1){const r=await Ou(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Vl._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EB(n,e,t=!1){const{auth:r}=n;if(ri(r.app))return Promise.reject(so(r));const i="reauthenticate";try{const s=await Ou(n,YR(r,i,e,n),t);Ve(s.idToken,r,"internal-error");const o=Yx(s.idToken);Ve(o,r,"internal-error");const{sub:l}=o;return Ve(n.uid===l,r,"user-mismatch"),Vl._forOperation(n,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Di(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JR(n,e,t=!1){if(ri(n.app))return Promise.reject(so(n));const r="signIn",i=await YR(n,r,e),s=await Vl._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}async function kB(n,e){return JR(Yl(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZR(n){const e=Yl(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function CB(n,e,t){if(ri(n.app))return Promise.reject(so(n));const r=Yl(n),o=await oO(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",TB).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&ZR(n),u}),l=await Vl._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function PB(n,e,t){return ri(n.app)?Promise.reject(so(n)):kB(sn(n),$u.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&ZR(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AB(n,e){return xo(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RB(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=sn(n),s={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},o=await Ou(r,AB(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const l=r.providerData.find(({providerId:u})=>u==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function IB(n,e,t,r){return sn(n).onIdTokenChanged(e,t,r)}function NB(n,e,t){return sn(n).beforeAuthStateChanged(e,t)}function DB(n,e,t,r){return sn(n).onAuthStateChanged(e,t,r)}function MB(n){return sn(n).signOut()}const lg="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(lg,"1"),this.storage.removeItem(lg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LB=1e3,VB=10;class tI extends eI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=qR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);J$()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,VB):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},LB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}tI.type="LOCAL";const FB=tI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI extends eI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}nI.type="SESSION";const rI=nI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QB(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new uy(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(o).map(async h=>h(t.origin,s)),u=await QB(l);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}uy.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tS(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jB{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((l,u)=>{const h=tS("",20);i.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(m){const y=m;if(y.data.eventId===h)switch(y.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(y.data.response);break;default:clearTimeout(d),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ps(){return window}function zB(n){ps().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iI(){return typeof ps().WorkerGlobalScope<"u"&&typeof ps().importScripts=="function"}async function $B(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function BB(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function UB(){return iI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI="firebaseLocalStorageDb",qB=1,cg="firebaseLocalStorage",oI="fbase_key";class id{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function hy(n,e){return n.transaction([cg],e?"readwrite":"readonly").objectStore(cg)}function WB(){const n=indexedDB.deleteDatabase(sI);return new id(n).toPromise()}function aO(){const n=indexedDB.open(sI,qB);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(cg,{keyPath:oI})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(cg)?e(r):(r.close(),await WB(),e(await aO()))})})}async function G_(n,e,t){const r=hy(n,!0).put({[oI]:e,value:t});return new id(r).toPromise()}async function HB(n,e){const t=hy(n,!1).get(e),r=await new id(t).toPromise();return r===void 0?null:r.value}function X_(n,e){const t=hy(n,!0).delete(e);return new id(t).toPromise()}const GB=800,XB=3;class aI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await aO(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>XB)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return iI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=uy._getInstance(UB()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await $B(),!this.activeServiceWorker)return;this.sender=new jB(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||BB()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await aO();return await G_(e,lg,"1"),await X_(e,lg),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>G_(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>HB(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>X_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=hy(i,!1).getAll();return new id(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),GB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}aI.type="LOCAL";const KB=aI;new td(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YB(n,e){return e?io(e):(Ve(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS extends Zx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Jc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Jc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Jc(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function JB(n){return JR(n.auth,new nS(n),n.bypassAuthState)}function ZB(n){const{auth:e,user:t}=n;return Ve(t,e,"internal-error"),EB(t,new nS(n),n.bypassAuthState)}async function eU(n){const{auth:e,user:t}=n;return Ve(t,e,"internal-error"),_B(t,new nS(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return JB;case"linkViaPopup":case"linkViaRedirect":return eU;case"reauthViaPopup":case"reauthViaRedirect":return ZB;default:Di(this.auth,"internal-error")}}resolve(e){fo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){fo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tU=new td(2e3,1e4);class Uc extends lI{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Uc.currentPopupAction&&Uc.currentPopupAction.cancel(),Uc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ve(e,this.auth,"internal-error"),e}async onExecution(){fo(this.filter.length===1,"Popup operations only handle one event");const e=tS();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ds(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ds(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Uc.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ds(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,tU.get())};e()}}Uc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nU="pendingRedirect",km=new Map;class rU extends lI{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=km.get(this.auth._key());if(!e){try{const r=await iU(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}km.set(this.auth._key(),e)}return this.bypassAuthState||km.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function iU(n,e){const t=aU(e),r=oU(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function sU(n,e){km.set(n._key(),e)}function oU(n){return io(n._redirectPersistence)}function aU(n){return Em(nU,n.config.apiKey,n.name)}async function lU(n,e,t=!1){if(ri(n.app))return Promise.reject(so(n));const r=Yl(n),i=YB(r,e),o=await new rU(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cU=10*60*1e3;class uU{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!hU(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!cI(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(ds(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=cU&&this.cachedEventUids.clear(),this.cachedEventUids.has(K_(e))}saveEventToCache(e){this.cachedEventUids.add(K_(e)),this.lastProcessedEventTime=Date.now()}}function K_(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function cI({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function hU(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cI(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fU(n,e={}){return xo(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pU=/^https?/;async function mU(n){if(n.config.emulator)return;const{authorizedDomains:e}=await fU(n);for(const t of e)try{if(gU(t))return}catch{}Di(n,"unauthorized-domain")}function gU(n){const e=iO(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!pU.test(t))return!1;if(dU.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yU=new td(3e4,6e4);function Y_(){const n=ps().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function vU(n){return new Promise((e,t)=>{var r,i,s;function o(){Y_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Y_(),t(ds(n,"network-request-failed"))},timeout:yU.get()})}if(!((i=(r=ps().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=ps().gapi)===null||s===void 0)&&s.load)o();else{const l=aB("iframefcb");return ps()[l]=()=>{gapi.load?o():t(ds(n,"network-request-failed"))},HR(`${oB()}?onload=${l}`).catch(u=>t(u))}}).catch(e=>{throw Cm=null,e})}let Cm=null;function wU(n){return Cm=Cm||vU(n),Cm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OU=new td(5e3,15e3),xU="__/auth/iframe",SU="emulator/auth/iframe",bU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},TU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _U(n){const e=n.config;Ve(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Kx(e,SU):`https://${n.config.authDomain}/${xU}`,r={apiKey:e.apiKey,appName:n.name,v:zu},i=TU.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${ed(r).slice(1)}`}async function EU(n){const e=await wU(n),t=ps().gapi;return Ve(t,n,"internal-error"),e.open({where:document.body,url:_U(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bU,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=ds(n,"network-request-failed"),l=ps().setTimeout(()=>{s(o)},OU.get());function u(){ps().clearTimeout(l),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},CU=500,PU=600,AU="_blank",RU="http://localhost";class J_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function IU(n,e,t,r=CU,i=PU){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u=Object.assign(Object.assign({},kU),{width:r.toString(),height:i.toString(),top:s,left:o}),h=$n().toLowerCase();t&&(l=jR(h)?AU:t),FR(h)&&(e=e||RU,u.scrollbars="yes");const d=Object.entries(u).reduce((y,[v,S])=>`${y}${v}=${S},`,"");if(Y$(h)&&l!=="_self")return NU(e||"",l),new J_(null);const m=window.open(e||"",l,d);Ve(m,n,"popup-blocked");try{m.focus()}catch{}return new J_(m)}function NU(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DU="__/auth/handler",MU="emulator/auth/handler",LU=encodeURIComponent("fac");async function Z_(n,e,t,r,i,s){Ve(n.config.authDomain,n,"auth-domain-config-required"),Ve(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:zu,eventId:i};if(e instanceof KR){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",yz(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,m]of Object.entries({}))o[d]=m}if(e instanceof rd){const d=e.getScopes().filter(m=>m!=="");d.length>0&&(o.scopes=d.join(","))}n.tenantId&&(o.tid=n.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const u=await n._getAppCheckToken(),h=u?`#${LU}=${encodeURIComponent(u)}`:"";return`${VU(n)}?${ed(l).slice(1)}${h}`}function VU({config:n}){return n.emulator?Kx(n,MU):`https://${n.authDomain}/${DU}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv="webStorageSupport";class FU{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rI,this._completeRedirectFn=lU,this._overrideRedirectResult=sU}async _openPopup(e,t,r,i){var s;fo((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Z_(e,t,r,iO(),i);return IU(e,o,tS())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await Z_(e,t,r,iO(),i);return zB(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(fo(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await EU(e),r=new uU(e);return t.register("authEvent",i=>(Ve(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Lv,{type:Lv},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Lv];o!==void 0&&t(!!o),Di(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=mU(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return qR()||QR()||Jx()}}const QU=FU;var eE="@firebase/auth",tE="1.10.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jU{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zU(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function $U(n){wu(new Ml("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;Ve(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:WR(n)},h=new rB(r,i,s,u);return dB(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),wu(new Ml("auth-internal",e=>{const t=Yl(e.getProvider("auth").getImmediate());return(r=>new jU(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),wa(eE,tE,zU(n)),wa(eE,tE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BU=5*60,UU=bR("authIdTokenMaxAge")||BU;let nE=null;const qU=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>UU)return;const i=t==null?void 0:t.token;nE!==i&&(nE=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function WU(n=kR()){const e=Hx(n,"auth");if(e.isInitialized())return e.getImmediate();const t=fB(n,{popupRedirectResolver:QU,persistence:[KB,FB,rI]}),r=bR("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=qU(s.toString());NB(t,o,()=>o(t.currentUser)),IB(t,l=>o(l))}}const i=xR("auth");return i&&pB(t,`http://${i}`),t}function HU(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}iB({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=ds("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",HU().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});$U("Browser");var rE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Oa,uI;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,P){function A(){}A.prototype=P.prototype,C.D=P.prototype,C.prototype=new A,C.prototype.constructor=C,C.C=function(L,Q,V){for(var N=Array(arguments.length-2),te=2;te<arguments.length;te++)N[te-2]=arguments[te];return P.prototype[Q].apply(L,N)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,P,A){A||(A=0);var L=Array(16);if(typeof P=="string")for(var Q=0;16>Q;++Q)L[Q]=P.charCodeAt(A++)|P.charCodeAt(A++)<<8|P.charCodeAt(A++)<<16|P.charCodeAt(A++)<<24;else for(Q=0;16>Q;++Q)L[Q]=P[A++]|P[A++]<<8|P[A++]<<16|P[A++]<<24;P=C.g[0],A=C.g[1],Q=C.g[2];var V=C.g[3],N=P+(V^A&(Q^V))+L[0]+3614090360&4294967295;P=A+(N<<7&4294967295|N>>>25),N=V+(Q^P&(A^Q))+L[1]+3905402710&4294967295,V=P+(N<<12&4294967295|N>>>20),N=Q+(A^V&(P^A))+L[2]+606105819&4294967295,Q=V+(N<<17&4294967295|N>>>15),N=A+(P^Q&(V^P))+L[3]+3250441966&4294967295,A=Q+(N<<22&4294967295|N>>>10),N=P+(V^A&(Q^V))+L[4]+4118548399&4294967295,P=A+(N<<7&4294967295|N>>>25),N=V+(Q^P&(A^Q))+L[5]+1200080426&4294967295,V=P+(N<<12&4294967295|N>>>20),N=Q+(A^V&(P^A))+L[6]+2821735955&4294967295,Q=V+(N<<17&4294967295|N>>>15),N=A+(P^Q&(V^P))+L[7]+4249261313&4294967295,A=Q+(N<<22&4294967295|N>>>10),N=P+(V^A&(Q^V))+L[8]+1770035416&4294967295,P=A+(N<<7&4294967295|N>>>25),N=V+(Q^P&(A^Q))+L[9]+2336552879&4294967295,V=P+(N<<12&4294967295|N>>>20),N=Q+(A^V&(P^A))+L[10]+4294925233&4294967295,Q=V+(N<<17&4294967295|N>>>15),N=A+(P^Q&(V^P))+L[11]+2304563134&4294967295,A=Q+(N<<22&4294967295|N>>>10),N=P+(V^A&(Q^V))+L[12]+1804603682&4294967295,P=A+(N<<7&4294967295|N>>>25),N=V+(Q^P&(A^Q))+L[13]+4254626195&4294967295,V=P+(N<<12&4294967295|N>>>20),N=Q+(A^V&(P^A))+L[14]+2792965006&4294967295,Q=V+(N<<17&4294967295|N>>>15),N=A+(P^Q&(V^P))+L[15]+1236535329&4294967295,A=Q+(N<<22&4294967295|N>>>10),N=P+(Q^V&(A^Q))+L[1]+4129170786&4294967295,P=A+(N<<5&4294967295|N>>>27),N=V+(A^Q&(P^A))+L[6]+3225465664&4294967295,V=P+(N<<9&4294967295|N>>>23),N=Q+(P^A&(V^P))+L[11]+643717713&4294967295,Q=V+(N<<14&4294967295|N>>>18),N=A+(V^P&(Q^V))+L[0]+3921069994&4294967295,A=Q+(N<<20&4294967295|N>>>12),N=P+(Q^V&(A^Q))+L[5]+3593408605&4294967295,P=A+(N<<5&4294967295|N>>>27),N=V+(A^Q&(P^A))+L[10]+38016083&4294967295,V=P+(N<<9&4294967295|N>>>23),N=Q+(P^A&(V^P))+L[15]+3634488961&4294967295,Q=V+(N<<14&4294967295|N>>>18),N=A+(V^P&(Q^V))+L[4]+3889429448&4294967295,A=Q+(N<<20&4294967295|N>>>12),N=P+(Q^V&(A^Q))+L[9]+568446438&4294967295,P=A+(N<<5&4294967295|N>>>27),N=V+(A^Q&(P^A))+L[14]+3275163606&4294967295,V=P+(N<<9&4294967295|N>>>23),N=Q+(P^A&(V^P))+L[3]+4107603335&4294967295,Q=V+(N<<14&4294967295|N>>>18),N=A+(V^P&(Q^V))+L[8]+1163531501&4294967295,A=Q+(N<<20&4294967295|N>>>12),N=P+(Q^V&(A^Q))+L[13]+2850285829&4294967295,P=A+(N<<5&4294967295|N>>>27),N=V+(A^Q&(P^A))+L[2]+4243563512&4294967295,V=P+(N<<9&4294967295|N>>>23),N=Q+(P^A&(V^P))+L[7]+1735328473&4294967295,Q=V+(N<<14&4294967295|N>>>18),N=A+(V^P&(Q^V))+L[12]+2368359562&4294967295,A=Q+(N<<20&4294967295|N>>>12),N=P+(A^Q^V)+L[5]+4294588738&4294967295,P=A+(N<<4&4294967295|N>>>28),N=V+(P^A^Q)+L[8]+2272392833&4294967295,V=P+(N<<11&4294967295|N>>>21),N=Q+(V^P^A)+L[11]+1839030562&4294967295,Q=V+(N<<16&4294967295|N>>>16),N=A+(Q^V^P)+L[14]+4259657740&4294967295,A=Q+(N<<23&4294967295|N>>>9),N=P+(A^Q^V)+L[1]+2763975236&4294967295,P=A+(N<<4&4294967295|N>>>28),N=V+(P^A^Q)+L[4]+1272893353&4294967295,V=P+(N<<11&4294967295|N>>>21),N=Q+(V^P^A)+L[7]+4139469664&4294967295,Q=V+(N<<16&4294967295|N>>>16),N=A+(Q^V^P)+L[10]+3200236656&4294967295,A=Q+(N<<23&4294967295|N>>>9),N=P+(A^Q^V)+L[13]+681279174&4294967295,P=A+(N<<4&4294967295|N>>>28),N=V+(P^A^Q)+L[0]+3936430074&4294967295,V=P+(N<<11&4294967295|N>>>21),N=Q+(V^P^A)+L[3]+3572445317&4294967295,Q=V+(N<<16&4294967295|N>>>16),N=A+(Q^V^P)+L[6]+76029189&4294967295,A=Q+(N<<23&4294967295|N>>>9),N=P+(A^Q^V)+L[9]+3654602809&4294967295,P=A+(N<<4&4294967295|N>>>28),N=V+(P^A^Q)+L[12]+3873151461&4294967295,V=P+(N<<11&4294967295|N>>>21),N=Q+(V^P^A)+L[15]+530742520&4294967295,Q=V+(N<<16&4294967295|N>>>16),N=A+(Q^V^P)+L[2]+3299628645&4294967295,A=Q+(N<<23&4294967295|N>>>9),N=P+(Q^(A|~V))+L[0]+4096336452&4294967295,P=A+(N<<6&4294967295|N>>>26),N=V+(A^(P|~Q))+L[7]+1126891415&4294967295,V=P+(N<<10&4294967295|N>>>22),N=Q+(P^(V|~A))+L[14]+2878612391&4294967295,Q=V+(N<<15&4294967295|N>>>17),N=A+(V^(Q|~P))+L[5]+4237533241&4294967295,A=Q+(N<<21&4294967295|N>>>11),N=P+(Q^(A|~V))+L[12]+1700485571&4294967295,P=A+(N<<6&4294967295|N>>>26),N=V+(A^(P|~Q))+L[3]+2399980690&4294967295,V=P+(N<<10&4294967295|N>>>22),N=Q+(P^(V|~A))+L[10]+4293915773&4294967295,Q=V+(N<<15&4294967295|N>>>17),N=A+(V^(Q|~P))+L[1]+2240044497&4294967295,A=Q+(N<<21&4294967295|N>>>11),N=P+(Q^(A|~V))+L[8]+1873313359&4294967295,P=A+(N<<6&4294967295|N>>>26),N=V+(A^(P|~Q))+L[15]+4264355552&4294967295,V=P+(N<<10&4294967295|N>>>22),N=Q+(P^(V|~A))+L[6]+2734768916&4294967295,Q=V+(N<<15&4294967295|N>>>17),N=A+(V^(Q|~P))+L[13]+1309151649&4294967295,A=Q+(N<<21&4294967295|N>>>11),N=P+(Q^(A|~V))+L[4]+4149444226&4294967295,P=A+(N<<6&4294967295|N>>>26),N=V+(A^(P|~Q))+L[11]+3174756917&4294967295,V=P+(N<<10&4294967295|N>>>22),N=Q+(P^(V|~A))+L[2]+718787259&4294967295,Q=V+(N<<15&4294967295|N>>>17),N=A+(V^(Q|~P))+L[9]+3951481745&4294967295,C.g[0]=C.g[0]+P&4294967295,C.g[1]=C.g[1]+(Q+(N<<21&4294967295|N>>>11))&4294967295,C.g[2]=C.g[2]+Q&4294967295,C.g[3]=C.g[3]+V&4294967295}r.prototype.u=function(C,P){P===void 0&&(P=C.length);for(var A=P-this.blockSize,L=this.B,Q=this.h,V=0;V<P;){if(Q==0)for(;V<=A;)i(this,C,V),V+=this.blockSize;if(typeof C=="string"){for(;V<P;)if(L[Q++]=C.charCodeAt(V++),Q==this.blockSize){i(this,L),Q=0;break}}else for(;V<P;)if(L[Q++]=C[V++],Q==this.blockSize){i(this,L),Q=0;break}}this.h=Q,this.o+=P},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var P=1;P<C.length-8;++P)C[P]=0;var A=8*this.o;for(P=C.length-8;P<C.length;++P)C[P]=A&255,A/=256;for(this.u(C),C=Array(16),P=A=0;4>P;++P)for(var L=0;32>L;L+=8)C[A++]=this.g[P]>>>L&255;return C};function s(C,P){var A=l;return Object.prototype.hasOwnProperty.call(A,C)?A[C]:A[C]=P(C)}function o(C,P){this.h=P;for(var A=[],L=!0,Q=C.length-1;0<=Q;Q--){var V=C[Q]|0;L&&V==P||(A[Q]=V,L=!1)}this.g=A}var l={};function u(C){return-128<=C&&128>C?s(C,function(P){return new o([P|0],0>P?-1:0)}):new o([C|0],0>C?-1:0)}function h(C){if(isNaN(C)||!isFinite(C))return m;if(0>C)return T(h(-C));for(var P=[],A=1,L=0;C>=A;L++)P[L]=C/A|0,A*=4294967296;return new o(P,0)}function d(C,P){if(C.length==0)throw Error("number format error: empty string");if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(C.charAt(0)=="-")return T(d(C.substring(1),P));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=h(Math.pow(P,8)),L=m,Q=0;Q<C.length;Q+=8){var V=Math.min(8,C.length-Q),N=parseInt(C.substring(Q,Q+V),P);8>V?(V=h(Math.pow(P,V)),L=L.j(V).add(h(N))):(L=L.j(A),L=L.add(h(N)))}return L}var m=u(0),y=u(1),v=u(16777216);n=o.prototype,n.m=function(){if(b(this))return-T(this).m();for(var C=0,P=1,A=0;A<this.g.length;A++){var L=this.i(A);C+=(0<=L?L:4294967296+L)*P,P*=4294967296}return C},n.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(S(this))return"0";if(b(this))return"-"+T(this).toString(C);for(var P=h(Math.pow(C,6)),A=this,L="";;){var Q=z(A,P).g;A=k(A,Q.j(P));var V=((0<A.g.length?A.g[0]:A.h)>>>0).toString(C);if(A=Q,S(A))return V+L;for(;6>V.length;)V="0"+V;L=V+L}},n.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function S(C){if(C.h!=0)return!1;for(var P=0;P<C.g.length;P++)if(C.g[P]!=0)return!1;return!0}function b(C){return C.h==-1}n.l=function(C){return C=k(this,C),b(C)?-1:S(C)?0:1};function T(C){for(var P=C.g.length,A=[],L=0;L<P;L++)A[L]=~C.g[L];return new o(A,~C.h).add(y)}n.abs=function(){return b(this)?T(this):this},n.add=function(C){for(var P=Math.max(this.g.length,C.g.length),A=[],L=0,Q=0;Q<=P;Q++){var V=L+(this.i(Q)&65535)+(C.i(Q)&65535),N=(V>>>16)+(this.i(Q)>>>16)+(C.i(Q)>>>16);L=N>>>16,V&=65535,N&=65535,A[Q]=N<<16|V}return new o(A,A[A.length-1]&-2147483648?-1:0)};function k(C,P){return C.add(T(P))}n.j=function(C){if(S(this)||S(C))return m;if(b(this))return b(C)?T(this).j(T(C)):T(T(this).j(C));if(b(C))return T(this.j(T(C)));if(0>this.l(v)&&0>C.l(v))return h(this.m()*C.m());for(var P=this.g.length+C.g.length,A=[],L=0;L<2*P;L++)A[L]=0;for(L=0;L<this.g.length;L++)for(var Q=0;Q<C.g.length;Q++){var V=this.i(L)>>>16,N=this.i(L)&65535,te=C.i(Q)>>>16,me=C.i(Q)&65535;A[2*L+2*Q]+=N*me,M(A,2*L+2*Q),A[2*L+2*Q+1]+=V*me,M(A,2*L+2*Q+1),A[2*L+2*Q+1]+=N*te,M(A,2*L+2*Q+1),A[2*L+2*Q+2]+=V*te,M(A,2*L+2*Q+2)}for(L=0;L<P;L++)A[L]=A[2*L+1]<<16|A[2*L];for(L=P;L<2*P;L++)A[L]=0;return new o(A,0)};function M(C,P){for(;(C[P]&65535)!=C[P];)C[P+1]+=C[P]>>>16,C[P]&=65535,P++}function F(C,P){this.g=C,this.h=P}function z(C,P){if(S(P))throw Error("division by zero");if(S(C))return new F(m,m);if(b(C))return P=z(T(C),P),new F(T(P.g),T(P.h));if(b(P))return P=z(C,T(P)),new F(T(P.g),P.h);if(30<C.g.length){if(b(C)||b(P))throw Error("slowDivide_ only works with positive integers.");for(var A=y,L=P;0>=L.l(C);)A=$(A),L=$(L);var Q=U(A,1),V=U(L,1);for(L=U(L,2),A=U(A,2);!S(L);){var N=V.add(L);0>=N.l(C)&&(Q=Q.add(A),V=N),L=U(L,1),A=U(A,1)}return P=k(C,Q.j(P)),new F(Q,P)}for(Q=m;0<=C.l(P);){for(A=Math.max(1,Math.floor(C.m()/P.m())),L=Math.ceil(Math.log(A)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),V=h(A),N=V.j(P);b(N)||0<N.l(C);)A-=L,V=h(A),N=V.j(P);S(V)&&(V=y),Q=Q.add(V),C=k(C,N)}return new F(Q,C)}n.A=function(C){return z(this,C).h},n.and=function(C){for(var P=Math.max(this.g.length,C.g.length),A=[],L=0;L<P;L++)A[L]=this.i(L)&C.i(L);return new o(A,this.h&C.h)},n.or=function(C){for(var P=Math.max(this.g.length,C.g.length),A=[],L=0;L<P;L++)A[L]=this.i(L)|C.i(L);return new o(A,this.h|C.h)},n.xor=function(C){for(var P=Math.max(this.g.length,C.g.length),A=[],L=0;L<P;L++)A[L]=this.i(L)^C.i(L);return new o(A,this.h^C.h)};function $(C){for(var P=C.g.length+1,A=[],L=0;L<P;L++)A[L]=C.i(L)<<1|C.i(L-1)>>>31;return new o(A,C.h)}function U(C,P){var A=P>>5;P%=32;for(var L=C.g.length-A,Q=[],V=0;V<L;V++)Q[V]=0<P?C.i(V+A)>>>P|C.i(V+A+1)<<32-P:C.i(V+A);return new o(Q,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,uI=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=d,Oa=o}).apply(typeof rE<"u"?rE:typeof self<"u"?self:typeof window<"u"?window:{});var qp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hI,Uh,fI,Pm,lO,dI,pI,mI;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(p,O,_){return p==Array.prototype||p==Object.prototype||(p[O]=_.value),p};function t(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof qp=="object"&&qp];for(var O=0;O<p.length;++O){var _=p[O];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=t(this);function i(p,O){if(O)e:{var _=r;p=p.split(".");for(var R=0;R<p.length-1;R++){var H=p[R];if(!(H in _))break e;_=_[H]}p=p[p.length-1],R=_[p],O=O(R),O!=R&&O!=null&&e(_,p,{configurable:!0,writable:!0,value:O})}}function s(p,O){p instanceof String&&(p+="");var _=0,R=!1,H={next:function(){if(!R&&_<p.length){var ne=_++;return{value:O(ne,p[ne]),done:!1}}return R=!0,{done:!0,value:void 0}}};return H[Symbol.iterator]=function(){return H},H}i("Array.prototype.values",function(p){return p||function(){return s(this,function(O,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(p){var O=typeof p;return O=O!="object"?O:p?Array.isArray(p)?"array":O:"null",O=="array"||O=="object"&&typeof p.length=="number"}function h(p){var O=typeof p;return O=="object"&&p!=null||O=="function"}function d(p,O,_){return p.call.apply(p.bind,arguments)}function m(p,O,_){if(!p)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var H=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(H,R),p.apply(O,H)}}return function(){return p.apply(O,arguments)}}function y(p,O,_){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:m,y.apply(null,arguments)}function v(p,O){var _=Array.prototype.slice.call(arguments,1);return function(){var R=_.slice();return R.push.apply(R,arguments),p.apply(this,R)}}function S(p,O){function _(){}_.prototype=O.prototype,p.aa=O.prototype,p.prototype=new _,p.prototype.constructor=p,p.Qb=function(R,H,ne){for(var ye=Array(arguments.length-2),dt=2;dt<arguments.length;dt++)ye[dt-2]=arguments[dt];return O.prototype[H].apply(R,ye)}}function b(p){const O=p.length;if(0<O){const _=Array(O);for(let R=0;R<O;R++)_[R]=p[R];return _}return[]}function T(p,O){for(let _=1;_<arguments.length;_++){const R=arguments[_];if(u(R)){const H=p.length||0,ne=R.length||0;p.length=H+ne;for(let ye=0;ye<ne;ye++)p[H+ye]=R[ye]}else p.push(R)}}class k{constructor(O,_){this.i=O,this.j=_,this.h=0,this.g=null}get(){let O;return 0<this.h?(this.h--,O=this.g,this.g=O.next,O.next=null):O=this.i(),O}}function M(p){return/^[\s\xa0]*$/.test(p)}function F(){var p=l.navigator;return p&&(p=p.userAgent)?p:""}function z(p){return z[" "](p),p}z[" "]=function(){};var $=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function U(p,O,_){for(const R in p)O.call(_,p[R],R,p)}function C(p,O){for(const _ in p)O.call(void 0,p[_],_,p)}function P(p){const O={};for(const _ in p)O[_]=p[_];return O}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(p,O){let _,R;for(let H=1;H<arguments.length;H++){R=arguments[H];for(_ in R)p[_]=R[_];for(let ne=0;ne<A.length;ne++)_=A[ne],Object.prototype.hasOwnProperty.call(R,_)&&(p[_]=R[_])}}function Q(p){var O=1;p=p.split(":");const _=[];for(;0<O&&p.length;)_.push(p.shift()),O--;return p.length&&_.push(p.join(":")),_}function V(p){l.setTimeout(()=>{throw p},0)}function N(){var p=ee;let O=null;return p.g&&(O=p.g,p.g=p.g.next,p.g||(p.h=null),O.next=null),O}class te{constructor(){this.h=this.g=null}add(O,_){const R=me.get();R.set(O,_),this.h?this.h.next=R:this.g=R,this.h=R}}var me=new k(()=>new ge,p=>p.reset());class ge{constructor(){this.next=this.g=this.h=null}set(O,_){this.h=O,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let fe,Z=!1,ee=new te,se=()=>{const p=l.Promise.resolve(void 0);fe=()=>{p.then(q)}};var q=()=>{for(var p;p=N();){try{p.h.call(p.g)}catch(_){V(_)}var O=me;O.j(p),100>O.h&&(O.h++,p.next=O.g,O.g=p)}Z=!1};function K(){this.s=this.s,this.C=this.C}K.prototype.s=!1,K.prototype.ma=function(){this.s||(this.s=!0,this.N())},K.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ue(p,O){this.type=p,this.g=this.target=O,this.defaultPrevented=!1}ue.prototype.h=function(){this.defaultPrevented=!0};var we=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var p=!1,O=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const _=()=>{};l.addEventListener("test",_,O),l.removeEventListener("test",_,O)}catch{}return p}();function ke(p,O){if(ue.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var _=this.type=p.type,R=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=O,O=p.relatedTarget){if($){e:{try{z(O.nodeName);var H=!0;break e}catch{}H=!1}H||(O=null)}}else _=="mouseover"?O=p.fromElement:_=="mouseout"&&(O=p.toElement);this.relatedTarget=O,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=typeof p.pointerType=="string"?p.pointerType:Qe[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&ke.aa.h.call(this)}}S(ke,ue);var Qe={2:"touch",3:"pen",4:"mouse"};ke.prototype.h=function(){ke.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var Pe="closure_listenable_"+(1e6*Math.random()|0),He=0;function Ze(p,O,_,R,H){this.listener=p,this.proxy=null,this.src=O,this.type=_,this.capture=!!R,this.ha=H,this.key=++He,this.da=this.fa=!1}function vt(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function on(p){this.src=p,this.g={},this.h=0}on.prototype.add=function(p,O,_,R,H){var ne=p.toString();p=this.g[ne],p||(p=this.g[ne]=[],this.h++);var ye=mn(p,O,R,H);return-1<ye?(O=p[ye],_||(O.fa=!1)):(O=new Ze(O,this.src,ne,!!R,H),O.fa=_,p.push(O)),O};function br(p,O){var _=O.type;if(_ in p.g){var R=p.g[_],H=Array.prototype.indexOf.call(R,O,void 0),ne;(ne=0<=H)&&Array.prototype.splice.call(R,H,1),ne&&(vt(O),p.g[_].length==0&&(delete p.g[_],p.h--))}}function mn(p,O,_,R){for(var H=0;H<p.length;++H){var ne=p[H];if(!ne.da&&ne.listener==O&&ne.capture==!!_&&ne.ha==R)return H}return-1}var zr="closure_lm_"+(1e6*Math.random()|0),Fi={};function Qi(p,O,_,R,H){if(Array.isArray(O)){for(var ne=0;ne<O.length;ne++)Qi(p,O[ne],_,R,H);return null}return _=Ha(_),p&&p[Pe]?p.K(O,_,h(R)?!!R.capture:!1,H):Cs(p,O,_,!1,R,H)}function Cs(p,O,_,R,H,ne){if(!O)throw Error("Invalid event type");var ye=h(H)?!!H.capture:!!H,dt=tr(p);if(dt||(p[zr]=dt=new on(p)),_=dt.add(O,_,R,ye,ne),_.proxy)return _;if(R=ji(),_.proxy=R,R.src=p,R.listener=_,p.addEventListener)we||(H=ye),H===void 0&&(H=!1),p.addEventListener(O.toString(),R,H);else if(p.attachEvent)p.attachEvent(Un(O.toString()),R);else if(p.addListener&&p.removeListener)p.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return _}function ji(){function p(_){return O.call(p.src,p.listener,_)}const O=So;return p}function Tr(p,O,_,R,H){if(Array.isArray(O))for(var ne=0;ne<O.length;ne++)Tr(p,O[ne],_,R,H);else R=h(R)?!!R.capture:!!R,_=Ha(_),p&&p[Pe]?(p=p.i,O=String(O).toString(),O in p.g&&(ne=p.g[O],_=mn(ne,_,R,H),-1<_&&(vt(ne[_]),Array.prototype.splice.call(ne,_,1),ne.length==0&&(delete p.g[O],p.h--)))):p&&(p=tr(p))&&(O=p.g[O.toString()],p=-1,O&&(p=mn(O,_,R,H)),(_=-1<p?O[p]:null)&&$r(_))}function $r(p){if(typeof p!="number"&&p&&!p.da){var O=p.src;if(O&&O[Pe])br(O.i,p);else{var _=p.type,R=p.proxy;O.removeEventListener?O.removeEventListener(_,R,p.capture):O.detachEvent?O.detachEvent(Un(_),R):O.addListener&&O.removeListener&&O.removeListener(R),(_=tr(O))?(br(_,p),_.h==0&&(_.src=null,O[zr]=null)):vt(p)}}}function Un(p){return p in Fi?Fi[p]:Fi[p]="on"+p}function So(p,O){if(p.da)p=!0;else{O=new ke(O,this);var _=p.listener,R=p.ha||p.src;p.fa&&$r(p),p=_.call(R,O)}return p}function tr(p){return p=p[zr],p instanceof on?p:null}var bo="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ha(p){return typeof p=="function"?p:(p[bo]||(p[bo]=function(O){return p.handleEvent(O)}),p[bo])}function at(){K.call(this),this.i=new on(this),this.M=this,this.F=null}S(at,K),at.prototype[Pe]=!0,at.prototype.removeEventListener=function(p,O,_,R){Tr(this,p,O,_,R)};function wt(p,O){var _,R=p.F;if(R)for(_=[];R;R=R.F)_.push(R);if(p=p.M,R=O.type||O,typeof O=="string")O=new ue(O,p);else if(O instanceof ue)O.target=O.target||p;else{var H=O;O=new ue(R,p),L(O,H)}if(H=!0,_)for(var ne=_.length-1;0<=ne;ne--){var ye=O.g=_[ne];H=ui(ye,R,!0,O)&&H}if(ye=O.g=p,H=ui(ye,R,!0,O)&&H,H=ui(ye,R,!1,O)&&H,_)for(ne=0;ne<_.length;ne++)ye=O.g=_[ne],H=ui(ye,R,!1,O)&&H}at.prototype.N=function(){if(at.aa.N.call(this),this.i){var p=this.i,O;for(O in p.g){for(var _=p.g[O],R=0;R<_.length;R++)vt(_[R]);delete p.g[O],p.h--}}this.F=null},at.prototype.K=function(p,O,_,R){return this.i.add(String(p),O,!1,_,R)},at.prototype.L=function(p,O,_,R){return this.i.add(String(p),O,!0,_,R)};function ui(p,O,_,R){if(O=p.i.g[String(O)],!O)return!0;O=O.concat();for(var H=!0,ne=0;ne<O.length;++ne){var ye=O[ne];if(ye&&!ye.da&&ye.capture==_){var dt=ye.listener,Xt=ye.ha||ye.src;ye.fa&&br(p.i,ye),H=dt.call(Xt,R)!==!1&&H}}return H&&!R.defaultPrevented}function Ga(p,O,_){if(typeof p=="function")_&&(p=y(p,_));else if(p&&typeof p.handleEvent=="function")p=y(p.handleEvent,p);else throw Error("Invalid listener argument");return 2147483647<Number(O)?-1:l.setTimeout(p,O||0)}function _r(p){p.g=Ga(()=>{p.g=null,p.i&&(p.i=!1,_r(p))},p.l);const O=p.h;p.h=null,p.m.apply(null,O)}class Ps extends K{constructor(O,_){super(),this.m=O,this.l=_,this.h=null,this.i=!1,this.g=null}j(O){this.h=arguments,this.g?this.i=!0:_r(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zi(p){K.call(this),this.h=p,this.g={}}S(zi,K);var As=[];function Br(p){U(p.g,function(O,_){this.g.hasOwnProperty(_)&&$r(O)},p),p.g={}}zi.prototype.N=function(){zi.aa.N.call(this),Br(this)},zi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var To=l.JSON.stringify,Ur=l.JSON.parse,Xa=class{stringify(p){return l.JSON.stringify(p,void 0)}parse(p){return l.JSON.parse(p,void 0)}};function Rs(){}Rs.prototype.h=null;function Is(p){return p.h||(p.h=p.i())}function Ns(){}var nr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function rr(){ue.call(this,"d")}S(rr,ue);function qn(){ue.call(this,"c")}S(qn,ue);var qr={},Le=null;function Ke(){return Le=Le||new at}qr.La="serverreachability";function ut(p){ue.call(this,qr.La,p)}S(ut,ue);function Vt(p){const O=Ke();wt(O,new ut(O))}qr.STAT_EVENT="statevent";function gn(p,O){ue.call(this,qr.STAT_EVENT,p),this.stat=O}S(gn,ue);function ht(p){const O=Ke();wt(O,new gn(O,p))}qr.Ma="timingevent";function ir(p,O){ue.call(this,qr.Ma,p),this.size=O}S(ir,ue);function Rt(p,O){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){p()},O)}function An(){this.g=!0}An.prototype.xa=function(){this.g=!1};function Ka(p,O,_,R,H,ne){p.info(function(){if(p.g)if(ne)for(var ye="",dt=ne.split("&"),Xt=0;Xt<dt.length;Xt++){var nt=dt[Xt].split("=");if(1<nt.length){var an=nt[0];nt=nt[1];var $t=an.split("_");ye=2<=$t.length&&$t[1]=="type"?ye+(an+"="+nt+"&"):ye+(an+"=redacted&")}}else ye=null;else ye=ne;return"XMLHTTP REQ ("+R+") [attempt "+H+"]: "+O+`
`+_+`
`+ye})}function ec(p,O,_,R,H,ne,ye){p.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+H+"]: "+O+`
`+_+`
`+ne+" "+ye})}function hi(p,O,_,R){p.info(function(){return"XMLHTTP TEXT ("+O+"): "+Uy(p,_)+(R?" "+R:"")})}function Ju(p,O){p.info(function(){return"TIMEOUT: "+O})}An.prototype.info=function(){};function Uy(p,O){if(!p.g)return O;if(!O)return null;try{var _=JSON.parse(O);if(_){for(p=0;p<_.length;p++)if(Array.isArray(_[p])){var R=_[p];if(!(2>R.length)){var H=R[1];if(Array.isArray(H)&&!(1>H.length)){var ne=H[0];if(ne!="noop"&&ne!="stop"&&ne!="close")for(var ye=1;ye<H.length;ye++)H[ye]=""}}}}return To(_)}catch{return O}}var tc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Sd={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},fi;function Ya(){}S(Ya,Rs),Ya.prototype.g=function(){return new XMLHttpRequest},Ya.prototype.i=function(){return{}},fi=new Ya;function di(p,O,_,R){this.j=p,this.i=O,this.l=_,this.R=R||1,this.U=new zi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new bd}function bd(){this.i=null,this.g="",this.h=!1}var Zu={},nc={};function rc(p,O,_){p.L=1,p.v=Po(kr(O)),p.m=_,p.P=!0,eh(p,null)}function eh(p,O){p.F=Date.now(),Ot(p),p.A=kr(p.v);var _=p.A,R=p.R;Array.isArray(R)||(R=[String(R)]),Ro(_.i,"t",R),p.C=0,_=p.j.J,p.h=new bd,p.g=zd(p.j,_?O:null,!p.m),0<p.O&&(p.M=new Ps(y(p.Y,p,p.g),p.O)),O=p.U,_=p.g,R=p.ca;var H="readystatechange";Array.isArray(H)||(H&&(As[0]=H.toString()),H=As);for(var ne=0;ne<H.length;ne++){var ye=Qi(_,H[ne],R||O.handleEvent,!1,O.h||O);if(!ye)break;O.g[ye.key]=ye}O=p.H?P(p.H):{},p.m?(p.u||(p.u="POST"),O["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,O)):(p.u="GET",p.g.ea(p.A,p.u,null,O)),Vt(),Ka(p.i,p.u,p.A,p.l,p.R,p.m)}di.prototype.ca=function(p){p=p.target;const O=this.M;O&&or(p)==3?O.j():this.Y(p)},di.prototype.Y=function(p){try{if(p==this.g)e:{const $t=or(this.g);var O=this.g.Ba();const Gr=this.g.Z();if(!(3>$t)&&($t!=3||this.g&&(this.h.h||this.g.oa()||oh(this.g)))){this.J||$t!=4||O==7||(O==8||0>=Gr?Vt(3):Vt(2)),Ja(this);var _=this.g.Z();this.X=_;t:if(Td(this)){var R=oh(this.g);p="";var H=R.length,ne=or(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Wr(this),_o(this);var ye="";break t}this.h.i=new l.TextDecoder}for(O=0;O<H;O++)this.h.h=!0,p+=this.h.i.decode(R[O],{stream:!(ne&&O==H-1)});R.length=0,this.h.g+=p,this.C=0,ye=this.h.g}else ye=this.g.oa();if(this.o=_==200,ec(this.i,this.u,this.A,this.l,this.R,$t,_),this.o){if(this.T&&!this.K){t:{if(this.g){var dt,Xt=this.g;if((dt=Xt.g?Xt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(dt)){var nt=dt;break t}}nt=null}if(_=nt)hi(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,th(this,_);else{this.o=!1,this.s=3,ht(12),Wr(this),_o(this);break e}}if(this.P){_=!0;let Pr;for(;!this.J&&this.C<ye.length;)if(Pr=qy(this,ye),Pr==nc){$t==4&&(this.s=4,ht(14),_=!1),hi(this.i,this.l,null,"[Incomplete Response]");break}else if(Pr==Zu){this.s=4,ht(15),hi(this.i,this.l,ye,"[Invalid Chunk]"),_=!1;break}else hi(this.i,this.l,Pr,null),th(this,Pr);if(Td(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),$t!=4||ye.length!=0||this.h.h||(this.s=1,ht(16),_=!1),this.o=this.o&&_,!_)hi(this.i,this.l,ye,"[Invalid Chunked Response]"),Wr(this),_o(this);else if(0<ye.length&&!this.W){this.W=!0;var an=this.j;an.g==this&&an.ba&&!an.M&&(an.j.info("Great, no buffering proxy detected. Bytes received: "+ye.length),lh(an),an.M=!0,ht(11))}}else hi(this.i,this.l,ye,null),th(this,ye);$t==4&&Wr(this),this.o&&!this.J&&($t==4?pc(this.j,this):(this.o=!1,Ot(this)))}else cc(this.g),_==400&&0<ye.indexOf("Unknown SID")?(this.s=3,ht(12)):(this.s=0,ht(13)),Wr(this),_o(this)}}}catch{}finally{}};function Td(p){return p.g?p.u=="GET"&&p.L!=2&&p.j.Ca:!1}function qy(p,O){var _=p.C,R=O.indexOf(`
`,_);return R==-1?nc:(_=Number(O.substring(_,R)),isNaN(_)?Zu:(R+=1,R+_>O.length?nc:(O=O.slice(R,R+_),p.C=R+_,O)))}di.prototype.cancel=function(){this.J=!0,Wr(this)};function Ot(p){p.S=Date.now()+p.I,_d(p,p.I)}function _d(p,O){if(p.B!=null)throw Error("WatchDog timer not null");p.B=Rt(y(p.ba,p),O)}function Ja(p){p.B&&(l.clearTimeout(p.B),p.B=null)}di.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(Ju(this.i,this.A),this.L!=2&&(Vt(),ht(17)),Wr(this),this.s=2,_o(this)):_d(this,this.S-p)};function _o(p){p.j.G==0||p.J||pc(p.j,p)}function Wr(p){Ja(p);var O=p.M;O&&typeof O.ma=="function"&&O.ma(),p.M=null,Br(p.U),p.g&&(O=p.g,p.g=null,O.abort(),O.ma())}function th(p,O){try{var _=p.j;if(_.G!=0&&(_.g==p||Wn(_.h,p))){if(!p.K&&Wn(_.h,p)&&_.G==3){try{var R=_.Da.g.parse(O)}catch{R=null}if(Array.isArray(R)&&R.length==3){var H=R;if(H[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<p.F)dc(_),vi(_);else break e;fc(_),ht(18)}}else _.za=H[1],0<_.za-_.T&&37500>H[2]&&_.F&&_.v==0&&!_.C&&(_.C=Rt(y(_.Za,_),6e3));if(1>=kd(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Fs(_,11)}else if((p.K||_.g==p)&&dc(_),!M(O))for(H=_.Da.g.parse(O),O=0;O<H.length;O++){let nt=H[O];if(_.T=nt[0],nt=nt[1],_.G==2)if(nt[0]=="c"){_.K=nt[1],_.ia=nt[2];const an=nt[3];an!=null&&(_.la=an,_.j.info("VER="+_.la));const $t=nt[4];$t!=null&&(_.Aa=$t,_.j.info("SVER="+_.Aa));const Gr=nt[5];Gr!=null&&typeof Gr=="number"&&0<Gr&&(R=1.5*Gr,_.L=R,_.j.info("backChannelRequestTimeoutMs_="+R)),R=_;const Pr=p.g;if(Pr){const sl=Pr.g?Pr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(sl){var ne=R.h;ne.g||sl.indexOf("spdy")==-1&&sl.indexOf("quic")==-1&&sl.indexOf("h2")==-1||(ne.j=ne.l,ne.g=new Set,ne.h&&(nh(ne,ne.h),ne.h=null))}if(R.D){const gc=Pr.g?Pr.g.getResponseHeader("X-HTTP-Session-Id"):null;gc&&(R.ya=gc,pt(R.I,R.D,gc))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-p.F,_.j.info("Handshake RTT: "+_.R+"ms")),R=_;var ye=p;if(R.qa=jd(R,R.J?R.ia:null,R.W),ye.K){Cd(R.h,ye);var dt=ye,Xt=R.L;Xt&&(dt.I=Xt),dt.B&&(Ja(dt),Ot(dt)),R.g=ye}else il(R);0<_.i.length&&qi(_)}else nt[0]!="stop"&&nt[0]!="close"||Fs(_,7);else _.G==3&&(nt[0]=="stop"||nt[0]=="close"?nt[0]=="stop"?Fs(_,7):vn(_):nt[0]!="noop"&&_.l&&_.l.ta(nt),_.v=0)}}Vt(4)}catch{}}var Ed=class{constructor(p,O){this.g=p,this.map=O}};function Za(p){this.l=p||10,l.PerformanceNavigationTiming?(p=l.performance.getEntriesByType("navigation"),p=0<p.length&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Er(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function kd(p){return p.h?1:p.g?p.g.size:0}function Wn(p,O){return p.h?p.h==O:p.g?p.g.has(O):!1}function nh(p,O){p.g?p.g.add(O):p.h=O}function Cd(p,O){p.h&&p.h==O?p.h=null:p.g&&p.g.has(O)&&p.g.delete(O)}Za.prototype.cancel=function(){if(this.i=Pd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function Pd(p){if(p.h!=null)return p.i.concat(p.h.D);if(p.g!=null&&p.g.size!==0){let O=p.i;for(const _ of p.g.values())O=O.concat(_.D);return O}return b(p.i)}function ic(p){if(p.V&&typeof p.V=="function")return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if(typeof p=="string")return p.split("");if(u(p)){for(var O=[],_=p.length,R=0;R<_;R++)O.push(p[R]);return O}O=[],_=0;for(R in p)O[_++]=p[R];return O}function sc(p){if(p.na&&typeof p.na=="function")return p.na();if(!p.V||typeof p.V!="function"){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(u(p)||typeof p=="string"){var O=[];p=p.length;for(var _=0;_<p;_++)O.push(_);return O}O=[],_=0;for(const R in p)O[_++]=R;return O}}}function Eo(p,O){if(p.forEach&&typeof p.forEach=="function")p.forEach(O,void 0);else if(u(p)||typeof p=="string")Array.prototype.forEach.call(p,O,void 0);else for(var _=sc(p),R=ic(p),H=R.length,ne=0;ne<H;ne++)O.call(void 0,R[ne],_&&_[ne],p)}var el=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Wy(p,O){if(p){p=p.split("&");for(var _=0;_<p.length;_++){var R=p[_].indexOf("="),H=null;if(0<=R){var ne=p[_].substring(0,R);H=p[_].substring(R+1)}else ne=p[_];O(ne,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function Ds(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof Ds){this.h=p.h,tl(this,p.j),this.o=p.o,this.g=p.g,ko(this,p.s),this.l=p.l;var O=p.i,_=new $i;_.i=O.i,O.g&&(_.g=new Map(O.g),_.h=O.h),Co(this,_),this.m=p.m}else p&&(O=String(p).match(el))?(this.h=!1,tl(this,O[1]||"",!0),this.o=et(O[2]||""),this.g=et(O[3]||"",!0),ko(this,O[4]),this.l=et(O[5]||"",!0),Co(this,O[6]||"",!0),this.m=et(O[7]||"")):(this.h=!1,this.i=new $i(null,this.h))}Ds.prototype.toString=function(){var p=[],O=this.j;O&&p.push(Ao(O,oc,!0),":");var _=this.g;return(_||O=="file")&&(p.push("//"),(O=this.o)&&p.push(Ao(O,oc,!0),"@"),p.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&p.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&p.push("/"),p.push(Ao(_,_.charAt(0)=="/"?Id:Rd,!0))),(_=this.i.toString())&&p.push("?",_),(_=this.m)&&p.push("#",Ao(_,rh)),p.join("")};function kr(p){return new Ds(p)}function tl(p,O,_){p.j=_?et(O,!0):O,p.j&&(p.j=p.j.replace(/:$/,""))}function ko(p,O){if(O){if(O=Number(O),isNaN(O)||0>O)throw Error("Bad port number "+O);p.s=O}else p.s=null}function Co(p,O,_){O instanceof $i?(p.i=O,Bi(p.i,p.h)):(_||(O=Ao(O,Nd)),p.i=new $i(O,p.h))}function pt(p,O,_){p.i.set(O,_)}function Po(p){return pt(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function et(p,O){return p?O?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function Ao(p,O,_){return typeof p=="string"?(p=encodeURI(p).replace(O,Ad),_&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function Ad(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var oc=/[#\/\?@]/g,Rd=/[#\?:]/g,Id=/[#\?]/g,Nd=/[#\?@]/g,rh=/#/g;function $i(p,O){this.h=this.g=null,this.i=p||null,this.j=!!O}function yn(p){p.g||(p.g=new Map,p.h=0,p.i&&Wy(p.i,function(O,_){p.add(decodeURIComponent(O.replace(/\+/g," ")),_)}))}n=$i.prototype,n.add=function(p,O){yn(this),this.i=null,p=Hr(this,p);var _=this.g.get(p);return _||this.g.set(p,_=[]),_.push(O),this.h+=1,this};function pi(p,O){yn(p),O=Hr(p,O),p.g.has(O)&&(p.i=null,p.h-=p.g.get(O).length,p.g.delete(O))}function mi(p,O){return yn(p),O=Hr(p,O),p.g.has(O)}n.forEach=function(p,O){yn(this),this.g.forEach(function(_,R){_.forEach(function(H){p.call(O,H,R,this)},this)},this)},n.na=function(){yn(this);const p=Array.from(this.g.values()),O=Array.from(this.g.keys()),_=[];for(let R=0;R<O.length;R++){const H=p[R];for(let ne=0;ne<H.length;ne++)_.push(O[R])}return _},n.V=function(p){yn(this);let O=[];if(typeof p=="string")mi(this,p)&&(O=O.concat(this.g.get(Hr(this,p))));else{p=Array.from(this.g.values());for(let _=0;_<p.length;_++)O=O.concat(p[_])}return O},n.set=function(p,O){return yn(this),this.i=null,p=Hr(this,p),mi(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[O]),this.h+=1,this},n.get=function(p,O){return p?(p=this.V(p),0<p.length?String(p[0]):O):O};function Ro(p,O,_){pi(p,O),0<_.length&&(p.i=null,p.g.set(Hr(p,O),b(_)),p.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],O=Array.from(this.g.keys());for(var _=0;_<O.length;_++){var R=O[_];const ne=encodeURIComponent(String(R)),ye=this.V(R);for(R=0;R<ye.length;R++){var H=ne;ye[R]!==""&&(H+="="+encodeURIComponent(String(ye[R]))),p.push(H)}}return this.i=p.join("&")};function Hr(p,O){return O=String(O),p.j&&(O=O.toLowerCase()),O}function Bi(p,O){O&&!p.j&&(yn(p),p.i=null,p.g.forEach(function(_,R){var H=R.toLowerCase();R!=H&&(pi(this,R),Ro(this,H,_))},p)),p.j=O}function Hy(p,O){const _=new An;if(l.Image){const R=new Image;R.onload=v(sr,_,"TestLoadImage: loaded",!0,O,R),R.onerror=v(sr,_,"TestLoadImage: error",!1,O,R),R.onabort=v(sr,_,"TestLoadImage: abort",!1,O,R),R.ontimeout=v(sr,_,"TestLoadImage: timeout",!1,O,R),l.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=p}else O(!1)}function Dd(p,O){const _=new An,R=new AbortController,H=setTimeout(()=>{R.abort(),sr(_,"TestPingServer: timeout",!1,O)},1e4);fetch(p,{signal:R.signal}).then(ne=>{clearTimeout(H),ne.ok?sr(_,"TestPingServer: ok",!0,O):sr(_,"TestPingServer: server error",!1,O)}).catch(()=>{clearTimeout(H),sr(_,"TestPingServer: error",!1,O)})}function sr(p,O,_,R,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),R(_)}catch{}}function Gy(){this.g=new Xa}function Md(p,O,_){const R=_||"";try{Eo(p,function(H,ne){let ye=H;h(H)&&(ye=To(H)),O.push(R+ne+"="+encodeURIComponent(ye))})}catch(H){throw O.push(R+"type="+encodeURIComponent("_badmap")),H}}function Ms(p){this.l=p.Ub||null,this.j=p.eb||!1}S(Ms,Rs),Ms.prototype.g=function(){return new nl(this.l,this.j)},Ms.prototype.i=function(p){return function(){return p}}({});function nl(p,O){at.call(this),this.D=p,this.o=O,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(nl,at),n=nl.prototype,n.open=function(p,O){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=O,this.readyState=1,yi(this)},n.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const O={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(O.body=p),(this.D||l).fetch(new Request(this.A,O)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,gi(this)),this.readyState=0},n.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,yi(this)),this.g&&(this.readyState=3,yi(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ld(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ld(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}n.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var O=p.value?p.value:new Uint8Array(0);(O=this.v.decode(O,{stream:!p.done}))&&(this.response=this.responseText+=O)}p.done?gi(this):yi(this),this.readyState==3&&Ld(this)}},n.Ra=function(p){this.g&&(this.response=this.responseText=p,gi(this))},n.Qa=function(p){this.g&&(this.response=p,gi(this))},n.ga=function(){this.g&&gi(this)};function gi(p){p.readyState=4,p.l=null,p.j=null,p.v=null,yi(p)}n.setRequestHeader=function(p,O){this.u.append(p,O)},n.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],O=this.h.entries();for(var _=O.next();!_.done;)_=_.value,p.push(_[0]+": "+_[1]),_=O.next();return p.join(`\r
`)};function yi(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(nl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function Ls(p){let O="";return U(p,function(_,R){O+=R,O+=":",O+=_,O+=`\r
`}),O}function Io(p,O,_){e:{for(R in _){var R=!1;break e}R=!0}R||(_=Ls(_),typeof p=="string"?_!=null&&encodeURIComponent(String(_)):pt(p,O,_))}function kt(p){at.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(kt,at);var Xy=/^https?$/i,ih=["POST","PUT"];n=kt.prototype,n.Ha=function(p){this.J=p},n.ea=function(p,O,_,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);O=O?O.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():fi.g(),this.v=this.o?Is(this.o):Is(fi),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(O,String(p),!0),this.B=!1}catch(ne){rl(this,ne);return}if(p=_||"",_=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var H in R)_.set(H,R[H]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const ne of R.keys())_.set(ne,R.get(ne));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(_.keys()).find(ne=>ne.toLowerCase()=="content-type"),H=l.FormData&&p instanceof l.FormData,!(0<=Array.prototype.indexOf.call(ih,O,void 0))||R||H||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,ye]of _)this.g.setRequestHeader(ne,ye);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{lc(this),this.u=!0,this.g.send(p),this.u=!1}catch(ne){rl(this,ne)}};function rl(p,O){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=O,p.m=5,ac(p),Cr(p)}function ac(p){p.A||(p.A=!0,wt(p,"complete"),wt(p,"error"))}n.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,wt(this,"complete"),wt(this,"abort"),Cr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Cr(this,!0)),kt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?sh(this):this.bb())},n.bb=function(){sh(this)};function sh(p){if(p.h&&typeof o<"u"&&(!p.v[1]||or(p)!=4||p.Z()!=2)){if(p.u&&or(p)==4)Ga(p.Ea,0,p);else if(wt(p,"readystatechange"),or(p)==4){p.h=!1;try{const ye=p.Z();e:switch(ye){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var O=!0;break e;default:O=!1}var _;if(!(_=O)){var R;if(R=ye===0){var H=String(p.D).match(el)[1]||null;!H&&l.self&&l.self.location&&(H=l.self.location.protocol.slice(0,-1)),R=!Xy.test(H?H.toLowerCase():"")}_=R}if(_)wt(p,"complete"),wt(p,"success");else{p.m=6;try{var ne=2<or(p)?p.g.statusText:""}catch{ne=""}p.l=ne+" ["+p.Z()+"]",ac(p)}}finally{Cr(p)}}}}function Cr(p,O){if(p.g){lc(p);const _=p.g,R=p.v[0]?()=>{}:null;p.g=null,p.v=null,O||wt(p,"ready");try{_.onreadystatechange=R}catch{}}}function lc(p){p.I&&(l.clearTimeout(p.I),p.I=null)}n.isActive=function(){return!!this.g};function or(p){return p.g?p.g.readyState:0}n.Z=function(){try{return 2<or(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(p){if(this.g){var O=this.g.responseText;return p&&O.indexOf(p)==0&&(O=O.substring(p.length)),Ur(O)}};function oh(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function cc(p){const O={};p=(p.g&&2<=or(p)&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<p.length;R++){if(M(p[R]))continue;var _=Q(p[R]);const H=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const ne=O[H]||[];O[H]=ne,ne.push(_)}C(O,function(R){return R.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ui(p,O,_){return _&&_.internalChannelParams&&_.internalChannelParams[p]||O}function ah(p){this.Aa=0,this.i=[],this.j=new An,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ui("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ui("baseRetryDelayMs",5e3,p),this.cb=Ui("retryDelaySeedMs",1e4,p),this.Wa=Ui("forwardChannelMaxRetries",2,p),this.wa=Ui("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new Za(p&&p.concurrentRequestLimit),this.Da=new Gy,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=ah.prototype,n.la=8,n.G=1,n.connect=function(p,O,_,R){ht(0),this.W=p,this.H=O||{},_&&R!==void 0&&(this.H.OSID=_,this.H.OAID=R),this.F=this.X,this.I=jd(this,null,this.W),qi(this)};function vn(p){if(uc(p),p.G==3){var O=p.U++,_=kr(p.I);if(pt(_,"SID",p.K),pt(_,"RID",O),pt(_,"TYPE","terminate"),Vs(p,_),O=new di(p,p.j,O),O.L=2,O.v=Po(kr(_)),_=!1,l.navigator&&l.navigator.sendBeacon)try{_=l.navigator.sendBeacon(O.v.toString(),"")}catch{}!_&&l.Image&&(new Image().src=O.v,_=!0),_||(O.g=zd(O.j,null),O.g.ea(O.v)),O.F=Date.now(),Ot(O)}Qd(p)}function vi(p){p.g&&(lh(p),p.g.cancel(),p.g=null)}function uc(p){vi(p),p.u&&(l.clearTimeout(p.u),p.u=null),dc(p),p.h.cancel(),p.s&&(typeof p.s=="number"&&l.clearTimeout(p.s),p.s=null)}function qi(p){if(!Er(p.h)&&!p.s){p.s=!0;var O=p.Ga;fe||se(),Z||(fe(),Z=!0),ee.add(O,p),p.B=0}}function Ky(p,O){return kd(p.h)>=p.h.j-(p.s?1:0)?!1:p.s?(p.i=O.D.concat(p.i),!0):p.G==1||p.G==2||p.B>=(p.Va?0:p.Wa)?!1:(p.s=Rt(y(p.Ga,p,O),Fd(p,p.B)),p.B++,!0)}n.Ga=function(p){if(this.s)if(this.s=null,this.G==1){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const H=new di(this,this.j,p);let ne=this.o;if(this.S&&(ne?(ne=P(ne),L(ne,this.S)):ne=this.S),this.m!==null||this.O||(H.H=ne,ne=null),this.P)e:{for(var O=0,_=0;_<this.i.length;_++){t:{var R=this.i[_];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(O+=R,4096<O){O=_;break e}if(O===4096||_===this.i.length-1){O=_+1;break e}}O=1e3}else O=1e3;O=No(this,H,O),_=kr(this.I),pt(_,"RID",p),pt(_,"CVER",22),this.D&&pt(_,"X-HTTP-Session-Id",this.D),Vs(this,_),ne&&(this.O?O="headers="+encodeURIComponent(String(Ls(ne)))+"&"+O:this.m&&Io(_,this.m,ne)),nh(this.h,H),this.Ua&&pt(_,"TYPE","init"),this.P?(pt(_,"$req",O),pt(_,"SID","null"),H.T=!0,rc(H,_,null)):rc(H,_,O),this.G=2}}else this.G==3&&(p?hc(this,p):this.i.length==0||Er(this.h)||hc(this))};function hc(p,O){var _;O?_=O.l:_=p.U++;const R=kr(p.I);pt(R,"SID",p.K),pt(R,"RID",_),pt(R,"AID",p.T),Vs(p,R),p.m&&p.o&&Io(R,p.m,p.o),_=new di(p,p.j,_,p.B+1),p.m===null&&(_.H=p.o),O&&(p.i=O.D.concat(p.i)),O=No(p,_,1e3),_.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),nh(p.h,_),rc(_,R,O)}function Vs(p,O){p.H&&U(p.H,function(_,R){pt(O,R,_)}),p.l&&Eo({},function(_,R){pt(O,R,_)})}function No(p,O,_){_=Math.min(p.i.length,_);var R=p.l?y(p.l.Na,p.l,p):null;e:{var H=p.i;let ne=-1;for(;;){const ye=["count="+_];ne==-1?0<_?(ne=H[0].g,ye.push("ofs="+ne)):ne=0:ye.push("ofs="+ne);let dt=!0;for(let Xt=0;Xt<_;Xt++){let nt=H[Xt].g;const an=H[Xt].map;if(nt-=ne,0>nt)ne=Math.max(0,H[Xt].g-100),dt=!1;else try{Md(an,ye,"req"+nt+"_")}catch{R&&R(an)}}if(dt){R=ye.join("&");break e}}}return p=p.i.splice(0,_),O.D=p,R}function il(p){if(!p.g&&!p.u){p.Y=1;var O=p.Fa;fe||se(),Z||(fe(),Z=!0),ee.add(O,p),p.v=0}}function fc(p){return p.g||p.u||3<=p.v?!1:(p.Y++,p.u=Rt(y(p.Fa,p),Fd(p,p.v)),p.v++,!0)}n.Fa=function(){if(this.u=null,Vd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=Rt(y(this.ab,this),p)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ht(10),vi(this),Vd(this))};function lh(p){p.A!=null&&(l.clearTimeout(p.A),p.A=null)}function Vd(p){p.g=new di(p,p.j,"rpc",p.Y),p.m===null&&(p.g.H=p.o),p.g.O=0;var O=kr(p.qa);pt(O,"RID","rpc"),pt(O,"SID",p.K),pt(O,"AID",p.T),pt(O,"CI",p.F?"0":"1"),!p.F&&p.ja&&pt(O,"TO",p.ja),pt(O,"TYPE","xmlhttp"),Vs(p,O),p.m&&p.o&&Io(O,p.m,p.o),p.L&&(p.g.I=p.L);var _=p.g;p=p.ia,_.L=1,_.v=Po(kr(O)),_.m=null,_.P=!0,eh(_,p)}n.Za=function(){this.C!=null&&(this.C=null,vi(this),fc(this),ht(19))};function dc(p){p.C!=null&&(l.clearTimeout(p.C),p.C=null)}function pc(p,O){var _=null;if(p.g==O){dc(p),lh(p),p.g=null;var R=2}else if(Wn(p.h,O))_=O.D,Cd(p.h,O),R=1;else return;if(p.G!=0){if(O.o)if(R==1){_=O.m?O.m.length:0,O=Date.now()-O.F;var H=p.B;R=Ke(),wt(R,new ir(R,_)),qi(p)}else il(p);else if(H=O.s,H==3||H==0&&0<O.X||!(R==1&&Ky(p,O)||R==2&&fc(p)))switch(_&&0<_.length&&(O=p.h,O.i=O.i.concat(_)),H){case 1:Fs(p,5);break;case 4:Fs(p,10);break;case 3:Fs(p,6);break;default:Fs(p,2)}}}function Fd(p,O){let _=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(_*=2),_*O}function Fs(p,O){if(p.j.info("Error code "+O),O==2){var _=y(p.fb,p),R=p.Xa;const H=!R;R=new Ds(R||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||tl(R,"https"),Po(R),H?Hy(R.toString(),_):Dd(R.toString(),_)}else ht(2);p.G=0,p.l&&p.l.sa(O),Qd(p),uc(p)}n.fb=function(p){p?(this.j.info("Successfully pinged google.com"),ht(2)):(this.j.info("Failed to ping google.com"),ht(1))};function Qd(p){if(p.G=0,p.ka=[],p.l){const O=Pd(p.h);(O.length!=0||p.i.length!=0)&&(T(p.ka,O),T(p.ka,p.i),p.h.i.length=0,b(p.i),p.i.length=0),p.l.ra()}}function jd(p,O,_){var R=_ instanceof Ds?kr(_):new Ds(_);if(R.g!="")O&&(R.g=O+"."+R.g),ko(R,R.s);else{var H=l.location;R=H.protocol,O=O?O+"."+H.hostname:H.hostname,H=+H.port;var ne=new Ds(null);R&&tl(ne,R),O&&(ne.g=O),H&&ko(ne,H),_&&(ne.l=_),R=ne}return _=p.D,O=p.ya,_&&O&&pt(R,_,O),pt(R,"VER",p.la),Vs(p,R),R}function zd(p,O,_){if(O&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return O=p.Ca&&!p.pa?new kt(new Ms({eb:_})):new kt(p.pa),O.Ha(p.J),O}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ch(){}n=ch.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function mc(){}mc.prototype.g=function(p,O){return new Hn(p,O)};function Hn(p,O){at.call(this),this.g=new ah(O),this.l=p,this.h=O&&O.messageUrlParams||null,p=O&&O.messageHeaders||null,O&&O.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=O&&O.initMessageHeaders||null,O&&O.messageContentType&&(p?p["X-WebChannel-Content-Type"]=O.messageContentType:p={"X-WebChannel-Content-Type":O.messageContentType}),O&&O.va&&(p?p["X-WebChannel-Client-Profile"]=O.va:p={"X-WebChannel-Client-Profile":O.va}),this.g.S=p,(p=O&&O.Sb)&&!M(p)&&(this.g.m=p),this.v=O&&O.supportsCrossDomainXhr||!1,this.u=O&&O.sendRawJson||!1,(O=O&&O.httpSessionIdParam)&&!M(O)&&(this.g.D=O,p=this.h,p!==null&&O in p&&(p=this.h,O in p&&delete p[O])),this.j=new Wi(this)}S(Hn,at),Hn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Hn.prototype.close=function(){vn(this.g)},Hn.prototype.o=function(p){var O=this.g;if(typeof p=="string"){var _={};_.__data__=p,p=_}else this.u&&(_={},_.__data__=To(p),p=_);O.i.push(new Ed(O.Ya++,p)),O.G==3&&qi(O)},Hn.prototype.N=function(){this.g.l=null,delete this.j,vn(this.g),delete this.g,Hn.aa.N.call(this)};function $d(p){rr.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var O=p.__sm__;if(O){e:{for(const _ in O){p=_;break e}p=void 0}(this.i=p)&&(p=this.i,O=O!==null&&p in O?O[p]:void 0),this.data=O}else this.data=p}S($d,rr);function Bd(){qn.call(this),this.status=1}S(Bd,qn);function Wi(p){this.g=p}S(Wi,ch),Wi.prototype.ua=function(){wt(this.g,"a")},Wi.prototype.ta=function(p){wt(this.g,new $d(p))},Wi.prototype.sa=function(p){wt(this.g,new Bd)},Wi.prototype.ra=function(){wt(this.g,"b")},mc.prototype.createWebChannel=mc.prototype.g,Hn.prototype.send=Hn.prototype.o,Hn.prototype.open=Hn.prototype.m,Hn.prototype.close=Hn.prototype.close,mI=function(){return new mc},pI=function(){return Ke()},dI=qr,lO={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},tc.NO_ERROR=0,tc.TIMEOUT=8,tc.HTTP_ERROR=6,Pm=tc,Sd.COMPLETE="complete",fI=Sd,Ns.EventType=nr,nr.OPEN="a",nr.CLOSE="b",nr.ERROR="c",nr.MESSAGE="d",at.prototype.listen=at.prototype.K,Uh=Ns,kt.prototype.listenOnce=kt.prototype.L,kt.prototype.getLastError=kt.prototype.Ka,kt.prototype.getLastErrorCode=kt.prototype.Ba,kt.prototype.getStatus=kt.prototype.Z,kt.prototype.getResponseJson=kt.prototype.Oa,kt.prototype.getResponseText=kt.prototype.oa,kt.prototype.send=kt.prototype.ea,kt.prototype.setWithCredentials=kt.prototype.Ha,hI=kt}).apply(typeof qp<"u"?qp:typeof self<"u"?self:typeof window<"u"?window:{});const iE="@firebase/firestore",sE="4.7.11";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Fn.UNAUTHENTICATED=new Fn(null),Fn.GOOGLE_CREDENTIALS=new Fn("google-credentials-uid"),Fn.FIRST_PARTY=new Fn("first-party-uid"),Fn.MOCK_USER=new Fn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bu="11.6.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fl=new qx("@firebase/firestore");function Fc(){return Fl.logLevel}function be(n,...e){if(Fl.logLevel<=Ye.DEBUG){const t=e.map(rS);Fl.debug(`Firestore (${Bu}): ${n}`,...t)}}function po(n,...e){if(Fl.logLevel<=Ye.ERROR){const t=e.map(rS);Fl.error(`Firestore (${Bu}): ${n}`,...t)}}function xu(n,...e){if(Fl.logLevel<=Ye.WARN){const t=e.map(rS);Fl.warn(`Firestore (${Bu}): ${n}`,...t)}}function rS(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fe(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,gI(n,r,t)}function gI(n,e,t){let r=`FIRESTORE (${Bu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw po(r),new Error(r)}function ft(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||gI(e,i,r)}function Be(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ie extends Oo{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class GU{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Fn.UNAUTHENTICATED))}shutdown(){}}class XU{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class KU{constructor(e){this.t=e,this.currentUser=Fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ft(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve();let s=new oo;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new oo,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(be("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new oo)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ft(typeof r.accessToken=="string",31837,{l:r}),new yI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ft(e===null||typeof e=="string",2055,{h:e}),new Fn(e)}}class YU{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Fn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class JU{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new YU(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Fn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class oE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ZU{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ri(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ft(this.o===void 0,3512);const r=s=>{s.error!=null&&be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,be("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new oE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ft(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new oE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e3(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vI(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=e3(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}}function We(n,e){return n<e?-1:n>e?1:0}function cO(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return We(r,i);{const s=vI(),o=t3(s.encode(aE(n,t)),s.encode(aE(e,t)));return o!==0?o:We(r,i)}}t+=r>65535?2:1}return We(n.length,e.length)}function aE(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function t3(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return We(n[t],e[t]);return We(n.length,e.length)}function Su(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE=-62135596800,cE=1e6;class nn{static now(){return nn.fromMillis(Date.now())}static fromDate(e){return nn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*cE);return new nn(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ie(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ie(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<lE)throw new Ie(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ie(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/cE}_compareTo(e){return this.seconds===e.seconds?We(this.nanoseconds,e.nanoseconds):We(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-lE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{static fromTimestamp(e){return new ze(e)}static min(){return new ze(new nn(0,0))}static max(){return new ze(new nn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE="__name__";class ts{constructor(e,t,r){t===void 0?t=0:t>e.length&&Fe(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Fe(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return ts.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ts?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=ts.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return We(e.length,t.length)}static compareSegments(e,t){const r=ts.isNumericId(e),i=ts.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?ts.extractNumericId(e).compare(ts.extractNumericId(t)):cO(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Oa.fromString(e.substring(4,e.length-2))}}class Pt extends ts{construct(e,t,r){return new Pt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ie(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Pt(t)}static emptyPath(){return new Pt([])}}const n3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Tn extends ts{construct(e,t,r){return new Tn(e,t,r)}static isValidIdentifier(e){return n3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Tn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===uE}static keyField(){return new Tn([uE])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Ie(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new Ie(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Ie(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new Ie(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Tn(t)}static emptyPath(){return new Tn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e){this.path=e}static fromPath(e){return new Me(Pt.fromString(e))}static fromName(e){return new Me(Pt.fromString(e).popFirst(5))}static empty(){return new Me(Pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Pt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Me(new Pt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bf=-1;function r3(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ze.fromTimestamp(r===1e9?new nn(t+1,0):new nn(t,r));return new Ca(i,Me.empty(),e)}function i3(n){return new Ca(n.readTime,n.key,bf)}class Ca{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ca(ze.min(),Me.empty(),bf)}static max(){return new Ca(ze.max(),Me.empty(),bf)}}function s3(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Me.comparator(n.documentKey,e.documentKey),t!==0?t:We(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class a3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uu(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==o3)throw n;be("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Fe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.reject(t)}static resolve(e){return new oe((t,r)=>{t(e)})}static reject(e){return new oe((t,r)=>{r(e)})}static waitFor(e){return new oe((t,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&t()},u=>r(u))}),o=!0,s===i&&t()})}static or(e){let t=oe.resolve(!1);for(const r of e)t=t.next(i=>i?oe.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new oe((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let u=0;u<s;u++){const h=u;t(e[h]).next(d=>{o[h]=d,++l,l===s&&r(o)},d=>i(d))}})}static doWhile(e,t){return new oe((r,i)=>{const s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}}function l3(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function qu(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>t.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}fy.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS=-1;function dy(n){return n==null}function ug(n){return n===0&&1/n==-1/0}function c3(n){return typeof n=="number"&&Number.isInteger(n)&&!ug(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI="";function u3(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=hE(e)),e=h3(n.get(t),e);return hE(e)}function h3(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case OI:t+="";break;default:t+=s}}return t}function hE(n){return n+OI+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ba(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function xI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e,t){this.comparator=e,this.root=t||Sn.EMPTY}insert(e,t){return new Dt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Sn.BLACK,null,null))}remove(e){return new Dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Sn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wp(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wp(this.root,e,this.comparator,!0)}}class Wp{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Sn{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Sn.RED,this.left=i??Sn.EMPTY,this.right=s??Sn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Sn(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Sn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Sn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Sn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Sn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Fe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Fe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Fe(27949);return e+(this.isRed()?0:1)}}Sn.EMPTY=null,Sn.RED=!0,Sn.BLACK=!1;Sn.EMPTY=new class{constructor(){this.size=0}get key(){throw Fe(57766)}get value(){throw Fe(16141)}get color(){throw Fe(16727)}get left(){throw Fe(29726)}get right(){throw Fe(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new Sn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.comparator=e,this.data=new Dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new dE(this.data.getIterator())}getIteratorFrom(e){return new dE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof rn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new rn(this.comparator);return t.data=e,t}}class dE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e){this.fields=e,e.sort(Tn.comparator)}static empty(){return new Fr([])}unionWith(e){let t=new rn(Tn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Fr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Su(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new SI("Invalid base64 string: "+s):s}}(e);return new kn(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new kn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return We(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}kn.EMPTY_BYTE_STRING=new kn("");const f3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pa(n){if(ft(!!n,39018),typeof n=="string"){let e=0;const t=f3.exec(n);if(ft(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:jt(n.seconds),nanos:jt(n.nanos)}}function jt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Aa(n){return typeof n=="string"?kn.fromBase64String(n):kn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI="server_timestamp",TI="__type__",_I="__previous_value__",EI="__local_write_time__";function sS(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[TI])===null||t===void 0?void 0:t.stringValue)===bI}function py(n){const e=n.mapValue.fields[_I];return sS(e)?py(e):e}function Tf(n){const e=Pa(n.mapValue.fields[EI].timestampValue);return new nn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d3{constructor(e,t,r,i,s,o,l,u,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h}}const hg="(default)";class _f{constructor(e,t){this.projectId=e,this.database=t||hg}static empty(){return new _f("","")}get isDefaultDatabase(){return this.database===hg}isEqual(e){return e instanceof _f&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI="__type__",p3="__max__",Hp={mapValue:{}},CI="__vector__",fg="value";function Ra(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?sS(n)?4:g3(n)?9007199254740991:m3(n)?10:11:Fe(28295,{value:n})}function Os(n,e){if(n===e)return!0;const t=Ra(n);if(t!==Ra(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Tf(n).isEqual(Tf(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Pa(i.timestampValue),l=Pa(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return Aa(i.bytesValue).isEqual(Aa(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return jt(i.geoPointValue.latitude)===jt(s.geoPointValue.latitude)&&jt(i.geoPointValue.longitude)===jt(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return jt(i.integerValue)===jt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=jt(i.doubleValue),l=jt(s.doubleValue);return o===l?ug(o)===ug(l):isNaN(o)&&isNaN(l)}return!1}(n,e);case 9:return Su(n.arrayValue.values||[],e.arrayValue.values||[],Os);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(fE(o)!==fE(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!Os(o[u],l[u])))return!1;return!0}(n,e);default:return Fe(52216,{left:n})}}function Ef(n,e){return(n.values||[]).find(t=>Os(t,e))!==void 0}function bu(n,e){if(n===e)return 0;const t=Ra(n),r=Ra(e);if(t!==r)return We(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return We(n.booleanValue,e.booleanValue);case 2:return function(s,o){const l=jt(s.integerValue||s.doubleValue),u=jt(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(n,e);case 3:return pE(n.timestampValue,e.timestampValue);case 4:return pE(Tf(n),Tf(e));case 5:return cO(n.stringValue,e.stringValue);case 6:return function(s,o){const l=Aa(s),u=Aa(o);return l.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),u=o.split("/");for(let h=0;h<l.length&&h<u.length;h++){const d=We(l[h],u[h]);if(d!==0)return d}return We(l.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const l=We(jt(s.latitude),jt(o.latitude));return l!==0?l:We(jt(s.longitude),jt(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return mE(n.arrayValue,e.arrayValue);case 10:return function(s,o){var l,u,h,d;const m=s.fields||{},y=o.fields||{},v=(l=m[fg])===null||l===void 0?void 0:l.arrayValue,S=(u=y[fg])===null||u===void 0?void 0:u.arrayValue,b=We(((h=v==null?void 0:v.values)===null||h===void 0?void 0:h.length)||0,((d=S==null?void 0:S.values)===null||d===void 0?void 0:d.length)||0);return b!==0?b:mE(v,S)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===Hp.mapValue&&o===Hp.mapValue)return 0;if(s===Hp.mapValue)return 1;if(o===Hp.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),h=o.fields||{},d=Object.keys(h);u.sort(),d.sort();for(let m=0;m<u.length&&m<d.length;++m){const y=cO(u[m],d[m]);if(y!==0)return y;const v=bu(l[u[m]],h[d[m]]);if(v!==0)return v}return We(u.length,d.length)}(n.mapValue,e.mapValue);default:throw Fe(23264,{Pe:t})}}function pE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return We(n,e);const t=Pa(n),r=Pa(e),i=We(t.seconds,r.seconds);return i!==0?i:We(t.nanos,r.nanos)}function mE(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=bu(t[i],r[i]);if(s)return s}return We(t.length,r.length)}function Tu(n){return uO(n)}function uO(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Pa(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Aa(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Me.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=uO(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${uO(t.fields[o])}`;return i+"}"}(n.mapValue):Fe(61005,{value:n})}function Am(n){switch(Ra(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=py(n);return e?16+Am(e):16;case 5:return 2*n.stringValue.length;case 6:return Aa(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Am(s),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Ba(r.fields,(s,o)=>{i+=s.length+Am(o)}),i}(n.mapValue);default:throw Fe(13486,{value:n})}}function hO(n){return!!n&&"integerValue"in n}function oS(n){return!!n&&"arrayValue"in n}function gE(n){return!!n&&"nullValue"in n}function yE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Rm(n){return!!n&&"mapValue"in n}function m3(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[kI])===null||t===void 0?void 0:t.stringValue)===CI}function nf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ba(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=nf(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=nf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function g3(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===p3}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e){this.value=e}static empty(){return new vr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Rm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=nf(t)}setAll(e){let t=Tn.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!t.isImmediateParentOf(l)){const u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=l.popLast()}o?r[l.lastSegment()]=nf(o):i.push(l.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());Rm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Os(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Rm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ba(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new vr(nf(this.value))}}function PI(n){const e=[];return Ba(n.fields,(t,r)=>{const i=new Tn([t]);if(Rm(r)){const s=PI(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Fr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e,t,r,i,s,o,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new jn(e,0,ze.min(),ze.min(),ze.min(),vr.empty(),0)}static newFoundDocument(e,t,r,i){return new jn(e,1,t,ze.min(),r,i,0)}static newNoDocument(e,t){return new jn(e,2,t,ze.min(),ze.min(),vr.empty(),0)}static newUnknownDocument(e,t){return new jn(e,3,t,ze.min(),ze.min(),vr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ze.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ze.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof jn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new jn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e,t){this.position=e,this.inclusive=t}}function vE(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(s.field.isKeyField()?r=Me.comparator(Me.fromName(o.referenceValue),t.key):r=bu(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function wE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Os(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(e,t="asc"){this.field=e,this.dir=t}}function y3(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{}class tn extends AI{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new w3(e,t,r):t==="array-contains"?new S3(e,r):t==="in"?new b3(e,r):t==="not-in"?new T3(e,r):t==="array-contains-any"?new _3(e,r):new tn(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new O3(e,r):new x3(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(bu(t,this.value)):t!==null&&Ra(this.value)===Ra(t)&&this.matchesComparison(bu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Fe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class xs extends AI{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new xs(e,t)}matches(e){return RI(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function RI(n){return n.op==="and"}function II(n){return v3(n)&&RI(n)}function v3(n){for(const e of n.filters)if(e instanceof xs)return!1;return!0}function fO(n){if(n instanceof tn)return n.field.canonicalString()+n.op.toString()+Tu(n.value);if(II(n))return n.filters.map(e=>fO(e)).join(",");{const e=n.filters.map(t=>fO(t)).join(",");return`${n.op}(${e})`}}function NI(n,e){return n instanceof tn?function(r,i){return i instanceof tn&&r.op===i.op&&r.field.isEqual(i.field)&&Os(r.value,i.value)}(n,e):n instanceof xs?function(r,i){return i instanceof xs&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,l)=>s&&NI(o,i.filters[l]),!0):!1}(n,e):void Fe(19439)}function DI(n){return n instanceof tn?function(t){return`${t.field.canonicalString()} ${t.op} ${Tu(t.value)}`}(n):n instanceof xs?function(t){return t.op.toString()+" {"+t.getFilters().map(DI).join(" ,")+"}"}(n):"Filter"}class w3 extends tn{constructor(e,t,r){super(e,t,r),this.key=Me.fromName(r.referenceValue)}matches(e){const t=Me.comparator(e.key,this.key);return this.matchesComparison(t)}}class O3 extends tn{constructor(e,t){super(e,"in",t),this.keys=MI("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class x3 extends tn{constructor(e,t){super(e,"not-in",t),this.keys=MI("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function MI(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Me.fromName(r.referenceValue))}class S3 extends tn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return oS(t)&&Ef(t.arrayValue,this.value)}}class b3 extends tn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ef(this.value.arrayValue,t)}}class T3 extends tn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ef(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ef(this.value.arrayValue,t)}}class _3 extends tn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!oS(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Ef(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3{constructor(e,t=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.Ie=null}}function OE(n,e=null,t=[],r=[],i=null,s=null,o=null){return new E3(n,e,t,r,i,s,o)}function aS(n){const e=Be(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>fO(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),dy(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Tu(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Tu(r)).join(",")),e.Ie=t}return e.Ie}function lS(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!y3(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!NI(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!wE(n.startAt,e.startAt)&&wE(n.endAt,e.endAt)}function dO(n){return Me.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(e,t=null,r=[],i=[],s=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=u,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function k3(n,e,t,r,i,s,o,l){return new my(n,e,t,r,i,s,o,l)}function gy(n){return new my(n)}function xE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function C3(n){return n.collectionGroup!==null}function rf(n){const e=Be(n);if(e.Ee===null){e.Ee=[];const t=new Set;for(const s of e.explicitOrderBy)e.Ee.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new rn(Tn.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ee.push(new pg(s,r))}),t.has(Tn.keyField().canonicalString())||e.Ee.push(new pg(Tn.keyField(),r))}return e.Ee}function ms(n){const e=Be(n);return e.de||(e.de=P3(e,rf(n))),e.de}function P3(n,e){if(n.limitType==="F")return OE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new pg(i.field,s)});const t=n.endAt?new dg(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new dg(n.startAt.position,n.startAt.inclusive):null;return OE(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function pO(n,e,t){return new my(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function yy(n,e){return lS(ms(n),ms(e))&&n.limitType===e.limitType}function LI(n){return`${aS(ms(n))}|lt:${n.limitType}`}function Qc(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>DI(i)).join(", ")}]`),dy(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Tu(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Tu(i)).join(",")),`Target(${r})`}(ms(n))}; limitType=${n.limitType})`}function vy(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Me.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of rf(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,l,u){const h=vE(o,l,u);return o.inclusive?h<=0:h<0}(r.startAt,rf(r),i)||r.endAt&&!function(o,l,u){const h=vE(o,l,u);return o.inclusive?h>=0:h>0}(r.endAt,rf(r),i))}(n,e)}function A3(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function VI(n){return(e,t)=>{let r=!1;for(const i of rf(n)){const s=R3(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function R3(n,e,t){const r=n.field.isKeyField()?Me.comparator(e.key,t.key):function(s,o,l){const u=o.data.field(s),h=l.data.field(s);return u!==null&&h!==null?bu(u,h):Fe(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Fe(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ba(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return xI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I3=new Dt(Me.comparator);function mo(){return I3}const FI=new Dt(Me.comparator);function qh(...n){let e=FI;for(const t of n)e=e.insert(t.key,t);return e}function QI(n){let e=FI;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function bl(){return sf()}function jI(){return sf()}function sf(){return new Jl(n=>n.toString(),(n,e)=>n.isEqual(e))}const N3=new Dt(Me.comparator),D3=new rn(Me.comparator);function Je(...n){let e=D3;for(const t of n)e=e.add(t);return e}const M3=new rn(We);function L3(){return M3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cS(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ug(e)?"-0":e}}function zI(n){return{integerValue:""+n}}function V3(n,e){return c3(e)?zI(e):cS(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(){this._=void 0}}function F3(n,e,t){return n instanceof mg?function(i,s){const o={fields:{[TI]:{stringValue:bI},[EI]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&sS(s)&&(s=py(s)),s&&(o.fields[_I]=s),{mapValue:o}}(t,e):n instanceof kf?BI(n,e):n instanceof Cf?UI(n,e):function(i,s){const o=$I(i,s),l=SE(o)+SE(i.Re);return hO(o)&&hO(i.Re)?zI(l):cS(i.serializer,l)}(n,e)}function Q3(n,e,t){return n instanceof kf?BI(n,e):n instanceof Cf?UI(n,e):t}function $I(n,e){return n instanceof gg?function(r){return hO(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class mg extends wy{}class kf extends wy{constructor(e){super(),this.elements=e}}function BI(n,e){const t=qI(e);for(const r of n.elements)t.some(i=>Os(i,r))||t.push(r);return{arrayValue:{values:t}}}class Cf extends wy{constructor(e){super(),this.elements=e}}function UI(n,e){let t=qI(e);for(const r of n.elements)t=t.filter(i=>!Os(i,r));return{arrayValue:{values:t}}}class gg extends wy{constructor(e,t){super(),this.serializer=e,this.Re=t}}function SE(n){return jt(n.integerValue||n.doubleValue)}function qI(n){return oS(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function j3(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof kf&&i instanceof kf||r instanceof Cf&&i instanceof Cf?Su(r.elements,i.elements,Os):r instanceof gg&&i instanceof gg?Os(r.Re,i.Re):r instanceof mg&&i instanceof mg}(n.transform,e.transform)}class z3{constructor(e,t){this.version=e,this.transformResults=t}}class gs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new gs}static exists(e){return new gs(void 0,e)}static updateTime(e){return new gs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Im(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Oy{}function WI(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new GI(n.key,gs.none()):new sd(n.key,n.data,gs.none());{const t=n.data,r=vr.empty();let i=new rn(Tn.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Ua(n.key,r,new Fr(i.toArray()),gs.none())}}function $3(n,e,t){n instanceof sd?function(i,s,o){const l=i.value.clone(),u=TE(i.fieldTransforms,s,o.transformResults);l.setAll(u),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Ua?function(i,s,o){if(!Im(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=TE(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(HI(i)),u.setAll(l),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function of(n,e,t,r){return n instanceof sd?function(s,o,l,u){if(!Im(s.precondition,o))return l;const h=s.value.clone(),d=_E(s.fieldTransforms,u,o);return h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ua?function(s,o,l,u){if(!Im(s.precondition,o))return l;const h=_E(s.fieldTransforms,u,o),d=o.data;return d.setAll(HI(s)),d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(n,e,t,r):function(s,o,l){return Im(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(n,e,t)}function B3(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=$I(r.transform,i||null);s!=null&&(t===null&&(t=vr.empty()),t.set(r.field,s))}return t||null}function bE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Su(r,i,(s,o)=>j3(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class sd extends Oy{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ua extends Oy{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function HI(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function TE(n,e,t){const r=new Map;ft(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,Q3(o,l,t[i]))}return r}function _E(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,F3(s,o,e))}return r}class GI extends Oy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class U3 extends Oy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&$3(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=of(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=of(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=jI();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=t.has(i.key)?null:l;const u=WI(o,l);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(ze.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Je())}isEqual(e){return this.batchId===e.batchId&&Su(this.mutations,e.mutations,(t,r)=>bE(t,r))&&Su(this.baseMutations,e.baseMutations,(t,r)=>bE(t,r))}}class uS{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ft(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let i=function(){return N3}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new uS(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W3{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ut,rt;function G3(n){switch(n){case ce.OK:return Fe(64938);case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0;default:return Fe(15467,{code:n})}}function XI(n){if(n===void 0)return po("GRPC error has no .code"),ce.UNKNOWN;switch(n){case Ut.OK:return ce.OK;case Ut.CANCELLED:return ce.CANCELLED;case Ut.UNKNOWN:return ce.UNKNOWN;case Ut.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case Ut.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case Ut.INTERNAL:return ce.INTERNAL;case Ut.UNAVAILABLE:return ce.UNAVAILABLE;case Ut.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case Ut.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case Ut.NOT_FOUND:return ce.NOT_FOUND;case Ut.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case Ut.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case Ut.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case Ut.ABORTED:return ce.ABORTED;case Ut.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case Ut.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case Ut.DATA_LOSS:return ce.DATA_LOSS;default:return Fe(39323,{code:n})}}(rt=Ut||(Ut={}))[rt.OK=0]="OK",rt[rt.CANCELLED=1]="CANCELLED",rt[rt.UNKNOWN=2]="UNKNOWN",rt[rt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rt[rt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rt[rt.NOT_FOUND=5]="NOT_FOUND",rt[rt.ALREADY_EXISTS=6]="ALREADY_EXISTS",rt[rt.PERMISSION_DENIED=7]="PERMISSION_DENIED",rt[rt.UNAUTHENTICATED=16]="UNAUTHENTICATED",rt[rt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rt[rt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rt[rt.ABORTED=10]="ABORTED",rt[rt.OUT_OF_RANGE=11]="OUT_OF_RANGE",rt[rt.UNIMPLEMENTED=12]="UNIMPLEMENTED",rt[rt.INTERNAL=13]="INTERNAL",rt[rt.UNAVAILABLE=14]="UNAVAILABLE",rt[rt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X3=new Oa([4294967295,4294967295],0);function EE(n){const e=vI().encode(n),t=new uI;return t.update(e),new Uint8Array(t.digest())}function kE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Oa([t,r],0),new Oa([i,s],0)]}class hS{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Wh(`Invalid padding: ${t}`);if(r<0)throw new Wh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Wh(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Wh(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=Oa.fromNumber(this.pe)}we(e,t,r){let i=e.add(t.multiply(Oa.fromNumber(r)));return i.compare(X3)===1&&(i=new Oa([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=EE(e),[r,i]=kE(t);for(let s=0;s<this.hashCount;s++){const o=this.we(r,i,s);if(!this.be(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new hS(s,i,t);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.pe===0)return;const t=EE(e),[r,i]=kE(t);for(let s=0;s<this.hashCount;s++){const o=this.we(r,i,s);this.Se(o)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Wh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,od.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new xy(ze.min(),i,new Dt(We),mo(),Je())}}class od{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new od(r,t,Je(),Je(),Je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(e,t,r,i){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=i}}class KI{constructor(e,t){this.targetId=e,this.Ce=t}}class YI{constructor(e,t,r=kn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class CE{constructor(){this.Fe=0,this.Me=PE(),this.xe=kn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Je(),t=Je(),r=Je();return this.Me.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Fe(38017,{changeType:s})}}),new od(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=PE()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,ft(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class K3{constructor(e){this.ze=e,this.je=new Map,this.He=mo(),this.Je=Gp(),this.Ye=Gp(),this.Ze=new Dt(We)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:Fe(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,i)=>{this.it(i)&&t(i)})}ot(e){const t=e.targetId,r=e.Ce.count,i=this._t(t);if(i){const s=i.target;if(dO(s))if(r===0){const o=new Me(s.path);this.tt(t,o,jn.newNoDocument(o,ze.min()))}else ft(r===1,20013,{expectedCount:r});else{const o=this.ut(t);if(o!==r){const l=this.ct(e),u=l?this.lt(l,e,o):1;if(u!==0){this.st(t);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,h)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,l;try{o=Aa(r).toUint8Array()}catch(u){if(u instanceof SI)return xu("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new hS(o,i,s)}catch(u){return xu(u instanceof Wh?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.pe===0?null:l}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){const r=this.ze.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.ze.Pt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.tt(t,s,null),i++)}),i}It(e){const t=new Map;this.je.forEach((s,o)=>{const l=this._t(o);if(l){if(s.current&&dO(l.target)){const u=new Me(l.target.path);this.Et(u).has(o)||this.dt(o,u)||this.tt(o,u,jn.newNoDocument(u,e))}s.Le&&(t.set(o,s.qe()),s.Qe())}});let r=Je();this.Ye.forEach((s,o)=>{let l=!0;o.forEachWhile(u=>{const h=this._t(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.He.forEach((s,o)=>o.setReadTime(e));const i=new xy(e,t,this.Ze,this.He,r);return this.He=mo(),this.Je=Gp(),this.Ye=Gp(),this.Ze=new Dt(We),i}et(e,t){if(!this.it(e))return;const r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;const i=this.rt(e);this.dt(e,t)?i.$e(t,1):i.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new CE,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new rn(We),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new rn(We),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||be("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new CE),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function Gp(){return new Dt(Me.comparator)}function PE(){return new Dt(Me.comparator)}const Y3={asc:"ASCENDING",desc:"DESCENDING"},J3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Z3={and:"AND",or:"OR"};class eq{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function mO(n,e){return n.useProto3Json||dy(e)?e:{value:e}}function yg(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function JI(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function tq(n,e){return yg(n,e.toTimestamp())}function ys(n){return ft(!!n,49232),ze.fromTimestamp(function(t){const r=Pa(t);return new nn(r.seconds,r.nanos)}(n))}function fS(n,e){return gO(n,e).canonicalString()}function gO(n,e){const t=function(i){return new Pt(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function ZI(n){const e=Pt.fromString(n);return ft(i2(e),10190,{key:e.toString()}),e}function yO(n,e){return fS(n.databaseId,e.path)}function Vv(n,e){const t=ZI(e);if(t.get(1)!==n.databaseId.projectId)throw new Ie(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ie(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Me(t2(t))}function e2(n,e){return fS(n.databaseId,e)}function nq(n){const e=ZI(n);return e.length===4?Pt.emptyPath():t2(e)}function vO(n){return new Pt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function t2(n){return ft(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function AE(n,e,t){return{name:yO(n,e),fields:t.value.mapValue.fields}}function rq(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Fe(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(h,d){return h.useProto3Json?(ft(d===void 0||typeof d=="string",58123),kn.fromBase64String(d||"")):(ft(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),kn.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(h){const d=h.code===void 0?ce.UNKNOWN:XI(h.code);return new Ie(d,h.message||"")}(o);t=new YI(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Vv(n,r.document.name),s=ys(r.document.updateTime),o=r.document.createTime?ys(r.document.createTime):ze.min(),l=new vr({mapValue:{fields:r.document.fields}}),u=jn.newFoundDocument(i,s,o,l),h=r.targetIds||[],d=r.removedTargetIds||[];t=new Nm(h,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Vv(n,r.document),s=r.readTime?ys(r.readTime):ze.min(),o=jn.newNoDocument(i,s),l=r.removedTargetIds||[];t=new Nm([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Vv(n,r.document),s=r.removedTargetIds||[];t=new Nm([],s,i,null)}else{if(!("filter"in e))return Fe(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new H3(i,s),l=r.targetId;t=new KI(l,o)}}return t}function iq(n,e){let t;if(e instanceof sd)t={update:AE(n,e.key,e.value)};else if(e instanceof GI)t={delete:yO(n,e.key)};else if(e instanceof Ua)t={update:AE(n,e.key,e.data),updateMask:dq(e.fieldMask)};else{if(!(e instanceof U3))return Fe(16599,{ft:e.type});t={verify:yO(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const l=o.transform;if(l instanceof mg)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof kf)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Cf)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof gg)return{fieldPath:o.field.canonicalString(),increment:l.Re};throw Fe(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:tq(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Fe(27497)}(n,e.precondition)),t}function sq(n,e){return n&&n.length>0?(ft(e!==void 0,14353),n.map(t=>function(i,s){let o=i.updateTime?ys(i.updateTime):ys(s);return o.isEqual(ze.min())&&(o=ys(s)),new z3(o,i.transformResults||[])}(t,e))):[]}function oq(n,e){return{documents:[e2(n,e.path)]}}function aq(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=e2(n,i);const s=function(h){if(h.length!==0)return r2(xs.create(h,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(h){if(h.length!==0)return h.map(d=>function(y){return{field:jc(y.field),direction:uq(y.dir)}}(d))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const l=mO(n,e.limit);return l!==null&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{gt:t,parent:i}}function lq(n){let e=nq(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){ft(r===1,65062);const d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];t.where&&(s=function(m){const y=n2(m);return y instanceof xs&&II(y)?y.getFilters():[y]}(t.where));let o=[];t.orderBy&&(o=function(m){return m.map(y=>function(S){return new pg(zc(S.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(y))}(t.orderBy));let l=null;t.limit&&(l=function(m){let y;return y=typeof m=="object"?m.value:m,dy(y)?null:y}(t.limit));let u=null;t.startAt&&(u=function(m){const y=!!m.before,v=m.values||[];return new dg(v,y)}(t.startAt));let h=null;return t.endAt&&(h=function(m){const y=!m.before,v=m.values||[];return new dg(v,y)}(t.endAt)),k3(e,i,o,s,l,"F",u,h)}function cq(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Fe(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function n2(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=zc(t.unaryFilter.field);return tn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=zc(t.unaryFilter.field);return tn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=zc(t.unaryFilter.field);return tn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=zc(t.unaryFilter.field);return tn.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Fe(61313);default:return Fe(60726)}}(n):n.fieldFilter!==void 0?function(t){return tn.create(zc(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Fe(58110);default:return Fe(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return xs.create(t.compositeFilter.filters.map(r=>n2(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Fe(1026)}}(t.compositeFilter.op))}(n):Fe(30097,{filter:n})}function uq(n){return Y3[n]}function hq(n){return J3[n]}function fq(n){return Z3[n]}function jc(n){return{fieldPath:n.canonicalString()}}function zc(n){return Tn.fromServerFormat(n.fieldPath)}function r2(n){return n instanceof tn?function(t){if(t.op==="=="){if(yE(t.value))return{unaryFilter:{field:jc(t.field),op:"IS_NAN"}};if(gE(t.value))return{unaryFilter:{field:jc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(yE(t.value))return{unaryFilter:{field:jc(t.field),op:"IS_NOT_NAN"}};if(gE(t.value))return{unaryFilter:{field:jc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jc(t.field),op:hq(t.op),value:t.value}}}(n):n instanceof xs?function(t){const r=t.getFilters().map(i=>r2(i));return r.length===1?r[0]:{compositeFilter:{op:fq(t.op),filters:r}}}(n):Fe(54877,{filter:n})}function dq(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function i2(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e,t,r,i,s=ze.min(),o=ze.min(),l=kn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new fa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new fa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pq{constructor(e){this.wt=e}}function mq(n){const e=lq({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?pO(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gq{constructor(){this.yn=new yq}addToCollectionParentIndex(e,t){return this.yn.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.yn.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(Ca.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(Ca.min())}updateCollectionGroup(e,t,r){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class yq{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new rn(Pt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new rn(Pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},s2=41943040;class pr{static withCacheSize(e){return new pr(e,pr.DEFAULT_COLLECTION_PERCENTILE,pr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pr.DEFAULT_COLLECTION_PERCENTILE=10,pr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,pr.DEFAULT=new pr(s2,pr.DEFAULT_COLLECTION_PERCENTILE,pr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),pr.DISABLED=new pr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new _u(0)}static ir(){return new _u(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IE="LruGarbageCollector",vq=1048576;function NE([n,e],[t,r]){const i=We(n,t);return i===0?We(e,r):i}class wq{constructor(e){this.cr=e,this.buffer=new rn(NE),this.lr=0}hr(){return++this.lr}Pr(e){const t=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();NE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Oq{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){be(IE,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){qu(t)?be(IE,"Ignoring IndexedDB error during garbage collection: ",t):await Uu(t)}await this.Ir(3e5)})}}class xq{constructor(e,t){this.Er=e,this.params=t}calculateTargetCount(e,t){return this.Er.dr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return oe.resolve(fy.le);const r=new wq(t);return this.Er.forEachTarget(e,i=>r.Pr(i.sequenceNumber)).next(()=>this.Er.Ar(e,i=>r.Pr(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Er.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Er.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(be("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(RE)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),RE):this.Rr(e,t))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,t){let r,i,s,o,l,u,h;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,o=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,l=Date.now(),this.removeTargets(e,r,t))).next(m=>(s=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(h=Date.now(),Fc()<=Ye.DEBUG&&be("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(l-o)+`ms
	Removed ${s} targets in `+(u-l)+`ms
	Removed ${m} documents in `+(h-u)+`ms
Total Duration: ${h-d}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m})))}}function Sq(n,e){return new xq(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bq{constructor(){this.changes=new Jl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,jn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?oe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tq{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _q{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&of(r.mutation,i,Fr.empty(),nn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Je()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Je()){const i=bl();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=qh();return s.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=bl();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Je()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{t.set(o,l)})})}computeViews(e,t,r,i){let s=mo();const o=sf(),l=function(){return sf()}();return t.forEach((u,h)=>{const d=r.get(h.key);i.has(h.key)&&(d===void 0||d.mutation instanceof Ua)?s=s.insert(h.key,h):d!==void 0?(o.set(h.key,d.mutation.getFieldMask()),of(d.mutation,h,d.mutation.getFieldMask(),nn.now())):o.set(h.key,Fr.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((h,d)=>o.set(h,d)),t.forEach((h,d)=>{var m;return l.set(h,new Tq(d,(m=o.get(h))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,t){const r=sf();let i=new Dt((o,l)=>o-l),s=Je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const l of o)l.keys().forEach(u=>{const h=t.get(u);if(h===null)return;let d=r.get(u)||Fr.empty();d=l.applyToLocalView(h,d),r.set(u,d);const m=(i.get(l.batchId)||Je()).add(u);i=i.insert(l.batchId,m)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,d=u.value,m=jI();d.forEach(y=>{if(!s.has(y)){const v=WI(t.get(y),r.get(y));v!==null&&m.set(y,v),s=s.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,m))}return oe.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return Me.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):C3(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):oe.resolve(bl());let l=bf,u=s;return o.next(h=>oe.forEach(h,(d,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),s.get(d)?oe.resolve():this.remoteDocumentCache.getEntry(e,d).next(y=>{u=u.insert(d,y)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,u,h,Je())).next(d=>({batchId:l,changes:QI(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Me(t)).next(r=>{let i=qh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=qh();return this.indexManager.getCollectionParents(e,s).next(l=>oe.forEach(l,u=>{const h=function(m,y){return new my(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(t,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(d=>{d.forEach((m,y)=>{o=o.insert(m,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((u,h)=>{const d=h.getKey();o.get(d)===null&&(o=o.insert(d,jn.newInvalidDocument(d)))});let l=qh();return o.forEach((u,h)=>{const d=s.get(u);d!==void 0&&of(d.mutation,h,Fr.empty(),nn.now()),vy(t,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eq{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,t){return oe.resolve(this.Fr.get(t))}saveBundleMetadata(e,t){return this.Fr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:ys(i.createTime)}}(t)),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.Mr.get(t))}saveNamedQuery(e,t){return this.Mr.set(t.name,function(i){return{name:i.name,query:mq(i.bundledQuery),readTime:ys(i.readTime)}}(t)),oe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kq{constructor(){this.overlays=new Dt(Me.comparator),this.Or=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=bl();return oe.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.St(e,t,s)}),oe.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Or.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Or.delete(r)),oe.resolve()}getOverlaysForCollection(e,t,r){const i=bl(),s=t.length+1,o=new Me(t.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return oe.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Dt((h,d)=>h-d);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>r){let d=s.get(h.largestBatchId);d===null&&(d=bl(),s=s.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const l=bl(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,d)=>l.set(h,d)),!(l.size()>=i)););return oe.resolve(l)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Or.get(i.largestBatchId).delete(r.key);this.Or.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new W3(t,r));let s=this.Or.get(t);s===void 0&&(s=Je(),this.Or.set(t,s)),this.Or.set(t,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cq{constructor(){this.sessionToken=kn.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,oe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(){this.Nr=new rn(hn.Br),this.Lr=new rn(hn.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,t){const r=new hn(e,t);this.Nr=this.Nr.add(r),this.Lr=this.Lr.add(r)}qr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Qr(new hn(e,t))}$r(e,t){e.forEach(r=>this.removeReference(r,t))}Ur(e){const t=new Me(new Pt([])),r=new hn(t,e),i=new hn(t,e+1),s=[];return this.Lr.forEachInRange([r,i],o=>{this.Qr(o),s.push(o.key)}),s}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const t=new Me(new Pt([])),r=new hn(t,e),i=new hn(t,e+1);let s=Je();return this.Lr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new hn(e,0),r=this.Nr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class hn{constructor(e,t){this.key=e,this.Gr=t}static Br(e,t){return Me.comparator(e.key,t.key)||We(e.Gr,t.Gr)}static kr(e,t){return We(e.Gr,t.Gr)||Me.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pq{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Jn=1,this.zr=new rn(hn.Br)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new q3(s,t,r,i);this.mutationQueue.push(o);for(const l of i)this.zr=this.zr.add(new hn(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return oe.resolve(o)}lookupMutationBatch(e,t){return oe.resolve(this.jr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.Hr(r),s=i<0?0:i;return oe.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?iS:this.Jn-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new hn(t,0),i=new hn(t,Number.POSITIVE_INFINITY),s=[];return this.zr.forEachInRange([r,i],o=>{const l=this.jr(o.Gr);s.push(l)}),oe.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new rn(We);return t.forEach(i=>{const s=new hn(i,0),o=new hn(i,Number.POSITIVE_INFINITY);this.zr.forEachInRange([s,o],l=>{r=r.add(l.Gr)})}),oe.resolve(this.Jr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Me.isDocumentKey(s)||(s=s.child(""));const o=new hn(new Me(s),0);let l=new rn(We);return this.zr.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(l=l.add(u.Gr)),!0)},o),oe.resolve(this.Jr(l))}Jr(e){const t=[];return e.forEach(r=>{const i=this.jr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ft(this.Yr(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.zr;return oe.forEach(t.mutations,i=>{const s=new hn(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.zr=r})}Xn(e){}containsKey(e,t){const r=new hn(t,0),i=this.zr.firstAfterOrEqual(r);return oe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}Yr(e,t){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){const t=this.Hr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aq{constructor(e){this.Zr=e,this.docs=function(){return new Dt(Me.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Zr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return oe.resolve(r?r.document.mutableCopy():jn.newInvalidDocument(t))}getEntries(e,t){let r=mo();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():jn.newInvalidDocument(i))}),oe.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=mo();const o=t.path,l=new Me(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:d}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||s3(i3(d),r)<=0||(i.has(d.key)||vy(t,d))&&(s=s.insert(d.key,d.mutableCopy()))}return oe.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Fe(9500)}Xr(e,t){return oe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Rq(this)}getSize(e){return oe.resolve(this.size)}}class Rq extends bq{constructor(e){super(),this.vr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.vr.addEntry(e,i)):this.vr.removeEntry(r)}),oe.waitFor(t)}getFromCache(e,t){return this.vr.getEntry(e,t)}getAllFromCache(e,t){return this.vr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iq{constructor(e){this.persistence=e,this.ei=new Jl(t=>aS(t),lS),this.lastRemoteSnapshotVersion=ze.min(),this.highestTargetId=0,this.ti=0,this.ni=new dS,this.targetCount=0,this.ri=_u.rr()}forEachTarget(e,t){return this.ei.forEach((r,i)=>t(i)),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ti&&(this.ti=t),oe.resolve()}ar(e){this.ei.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ri=new _u(t),this.highestTargetId=t),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,t){return this.ar(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.ar(t),oe.resolve()}removeTargetData(e,t){return this.ei.delete(t.target),this.ni.Ur(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.ei.forEach((o,l)=>{l.sequenceNumber<=t&&r.get(l.targetId)===null&&(this.ei.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),oe.waitFor(s).next(()=>i)}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const r=this.ei.get(t)||null;return oe.resolve(r)}addMatchingKeys(e,t,r){return this.ni.qr(t,r),oe.resolve()}removeMatchingKeys(e,t,r){this.ni.$r(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),oe.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ni.Ur(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ni.Wr(t);return oe.resolve(r)}containsKey(e,t){return oe.resolve(this.ni.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(e,t){this.ii={},this.overlays={},this.si=new fy(0),this.oi=!1,this.oi=!0,this._i=new Cq,this.referenceDelegate=e(this),this.ai=new Iq(this),this.indexManager=new gq,this.remoteDocumentCache=function(i){return new Aq(i)}(r=>this.referenceDelegate.ui(r)),this.serializer=new pq(t),this.ci=new Eq(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new kq,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ii[e.toKey()];return r||(r=new Pq(t,this.referenceDelegate),this.ii[e.toKey()]=r),r}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,t,r){be("MemoryPersistence","Starting transaction:",e);const i=new Nq(this.si.next());return this.referenceDelegate.li(),r(i).next(s=>this.referenceDelegate.hi(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Pi(e,t){return oe.or(Object.values(this.ii).map(r=>()=>r.containsKey(e,t)))}}class Nq extends a3{constructor(e){super(),this.currentSequenceNumber=e}}class pS{constructor(e){this.persistence=e,this.Ti=new dS,this.Ii=null}static Ei(e){return new pS(e)}get di(){if(this.Ii)return this.Ii;throw Fe(60996)}addReference(e,t,r){return this.Ti.addReference(r,t),this.di.delete(r.toString()),oe.resolve()}removeReference(e,t,r){return this.Ti.removeReference(r,t),this.di.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Ti.Ur(t.targetId).forEach(i=>this.di.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.di.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}li(){this.Ii=new Set}hi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.di,r=>{const i=Me.fromPath(r);return this.Ai(e,i).next(s=>{s||t.removeEntry(i,ze.min())})}).next(()=>(this.Ii=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ai(e,t).next(r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())})}ui(e){return 0}Ai(e,t){return oe.or([()=>oe.resolve(this.Ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Pi(e,t)])}}class vg{constructor(e,t){this.persistence=e,this.Ri=new Jl(r=>u3(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Sq(this,t)}static Ei(e,t){return new vg(e,t)}li(){}hi(e){return oe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Vr(e){let t=0;return this.Ar(e,r=>{t++}).next(()=>t)}Ar(e,t){return oe.forEach(this.Ri,(r,i)=>this.gr(e,r,i).next(s=>s?oe.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.Xr(e,o=>this.gr(e,o,t).next(l=>{l||(r++,s.removeEntry(o,ze.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.Ri.set(t,e.currentSequenceNumber),oe.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.Ri.set(r,e.currentSequenceNumber),oe.resolve()}removeReference(e,t,r){return this.Ri.set(r,e.currentSequenceNumber),oe.resolve()}updateLimboDocument(e,t){return this.Ri.set(t,e.currentSequenceNumber),oe.resolve()}ui(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Am(e.data.value)),t}gr(e,t,r){return oe.or([()=>this.persistence.Pi(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.Ri.get(t);return oe.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.ls=r,this.hs=i}static Ps(e,t){let r=Je(),i=Je();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new mS(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dq{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mq{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return hz()?8:l3($n())>0?6:4}()}initialize(e,t){this.As=e,this.indexManager=t,this.Ts=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.Rs(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Vs(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Dq;return this.fs(e,t,o).next(l=>{if(s.result=l,this.Is)return this.gs(e,t,o,l.size)})}).next(()=>s.result)}gs(e,t,r,i){return r.documentReadCount<this.Es?(Fc()<=Ye.DEBUG&&be("QueryEngine","SDK will not create cache indexes for query:",Qc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),oe.resolve()):(Fc()<=Ye.DEBUG&&be("QueryEngine","Query:",Qc(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(Fc()<=Ye.DEBUG&&be("QueryEngine","The SDK decides to create cache indexes for query:",Qc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ms(t))):oe.resolve())}Rs(e,t){if(xE(t))return oe.resolve(null);let r=ms(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=pO(t,null,"F"),r=ms(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Je(...s);return this.As.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.ps(t,l);return this.ys(t,h,o,u.readTime)?this.Rs(e,pO(t,null,"F")):this.ws(e,h,t,u)}))})))}Vs(e,t,r,i){return xE(t)||i.isEqual(ze.min())?oe.resolve(null):this.As.getDocuments(e,r).next(s=>{const o=this.ps(t,s);return this.ys(t,o,r,i)?oe.resolve(null):(Fc()<=Ye.DEBUG&&be("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Qc(t)),this.ws(e,o,t,r3(i,bf)).next(l=>l))})}ps(e,t){let r=new rn(VI(e));return t.forEach((i,s)=>{vy(e,s)&&(r=r.add(s))}),r}ys(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}fs(e,t,r){return Fc()<=Ye.DEBUG&&be("QueryEngine","Using full collection scan to execute query:",Qc(t)),this.As.getDocumentsMatchingQuery(e,t,Ca.min(),r)}ws(e,t,r,i){return this.As.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS="LocalStore",Lq=3e8;class Vq{constructor(e,t,r,i){this.persistence=e,this.bs=t,this.serializer=i,this.Ss=new Dt(We),this.Ds=new Jl(s=>aS(s),lS),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(r)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _q(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ss))}}function Fq(n,e,t,r){return new Vq(n,e,t,r)}async function a2(n,e){const t=Be(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Fs(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let u=Je();for(const h of i){o.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}for(const h of s){l.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}return t.localDocuments.getDocuments(r,u).next(h=>({Ms:h,removedBatchIds:o,addedBatchIds:l}))})})}function Qq(n,e){const t=Be(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.Cs.newChangeBuffer({trackRemovals:!0});return function(l,u,h,d){const m=h.batch,y=m.keys();let v=oe.resolve();return y.forEach(S=>{v=v.next(()=>d.getEntry(u,S)).next(b=>{const T=h.docVersions.get(S);ft(T!==null,48541),b.version.compareTo(T)<0&&(m.applyToRemoteDocument(b,h),b.isValidDocument()&&(b.setReadTime(h.commitVersion),d.addEntry(b)))})}),v.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=Je();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function l2(n){const e=Be(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ai.getLastRemoteSnapshotVersion(t))}function jq(n,e){const t=Be(n),r=e.snapshotVersion;let i=t.Ss;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.Cs.newChangeBuffer({trackRemovals:!0});i=t.Ss;const l=[];e.targetChanges.forEach((d,m)=>{const y=i.get(m);if(!y)return;l.push(t.ai.removeMatchingKeys(s,d.removedDocuments,m).next(()=>t.ai.addMatchingKeys(s,d.addedDocuments,m)));let v=y.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(m)!==null?v=v.withResumeToken(kn.EMPTY_BYTE_STRING,ze.min()).withLastLimboFreeSnapshotVersion(ze.min()):d.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(d.resumeToken,r)),i=i.insert(m,v),function(b,T,k){return b.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=Lq?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(y,v,d)&&l.push(t.ai.updateTargetData(s,v))});let u=mo(),h=Je();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(t.persistence.referenceDelegate.updateLimboDocument(s,d))}),l.push(zq(s,o,e.documentUpdates).next(d=>{u=d.xs,h=d.Os})),!r.isEqual(ze.min())){const d=t.ai.getLastRemoteSnapshotVersion(s).next(m=>t.ai.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(d)}return oe.waitFor(l).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,u,h)).next(()=>u)}).then(s=>(t.Ss=i,s))}function zq(n,e,t){let r=Je(),i=Je();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=mo();return t.forEach((l,u)=>{const h=s.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(ze.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):be(gS,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{xs:o,Os:i}})}function $q(n,e){const t=Be(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=iS),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Bq(n,e){const t=Be(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.ai.getTargetData(r,e).next(s=>s?(i=s,oe.resolve(i)):t.ai.allocateTargetId(r).next(o=>(i=new fa(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.ai.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ss.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ss=t.Ss.insert(r.targetId,r),t.Ds.set(e,r.targetId)),r})}async function wO(n,e,t){const r=Be(n),i=r.Ss.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!qu(o))throw o;be(gS,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ss=r.Ss.remove(e),r.Ds.delete(i.target)}function DE(n,e,t){const r=Be(n);let i=ze.min(),s=Je();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,d){const m=Be(u),y=m.Ds.get(d);return y!==void 0?oe.resolve(m.Ss.get(y)):m.ai.getTargetData(h,d)}(r,o,ms(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.ai.getMatchingKeysForTargetId(o,l.targetId).next(u=>{s=u})}).next(()=>r.bs.getDocumentsMatchingQuery(o,e,t?i:ze.min(),t?s:Je())).next(l=>(Uq(r,A3(e),l),{documents:l,Ns:s})))}function Uq(n,e,t){let r=n.vs.get(e)||ze.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.vs.set(e,r)}class ME{constructor(){this.activeTargetIds=L3()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qq{constructor(){this.So=new ME,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,t,r){this.Do[e]=t}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new ME,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wq{vo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE="ConnectivityMonitor";class VE{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){be(LE,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){be(LE,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xp=null;function OO(){return Xp===null?Xp=function(){return 268435456+Math.round(2147483648*Math.random())}():Xp++,"0x"+Xp.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv="RestConnection",Hq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Gq{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Lo=t+"://"+e.host,this.ko=`projects/${r}/databases/${i}`,this.qo=this.databaseId.database===hg?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Qo(e,t,r,i,s){const o=OO(),l=this.$o(e,t.toUriEncodedString());be(Fv,`Sending RPC '${e}' ${o}:`,l,r);const u={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};return this.Uo(u,i,s),this.Ko(e,l,u,r).then(h=>(be(Fv,`Received RPC '${e}' ${o}: `,h),h),h=>{throw xu(Fv,`RPC '${e}' ${o} failed with error: `,h,"url: ",l,"request:",r),h})}Wo(e,t,r,i,s,o){return this.Qo(e,t,r,i,s)}Uo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Bu}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}$o(e,t){const r=Hq[e];return`${this.Lo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xq{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ln="WebChannelConnection";class Kq extends Gq{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,t,r,i){const s=OO();return new Promise((o,l)=>{const u=new hI;u.setWithCredentials(!0),u.listenOnce(fI.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Pm.NO_ERROR:const d=u.getResponseJson();be(Ln,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case Pm.TIMEOUT:be(Ln,`RPC '${e}' ${s} timed out`),l(new Ie(ce.DEADLINE_EXCEEDED,"Request time out"));break;case Pm.HTTP_ERROR:const m=u.getStatus();if(be(Ln,`RPC '${e}' ${s} failed with status:`,m,"response text:",u.getResponseText()),m>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);const v=y==null?void 0:y.error;if(v&&v.status&&v.message){const S=function(T){const k=T.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(k)>=0?k:ce.UNKNOWN}(v.status);l(new Ie(S,v.message))}else l(new Ie(ce.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Ie(ce.UNAVAILABLE,"Connection failed."));break;default:Fe(9055,{s_:e,streamId:s,o_:u.getLastErrorCode(),__:u.getLastError()})}}finally{be(Ln,`RPC '${e}' ${s} completed.`)}});const h=JSON.stringify(i);be(Ln,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",h,r,15)})}a_(e,t,r){const i=OO(),s=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=mI(),l=pI(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Uo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;const d=s.join("");be(Ln,`Creating RPC '${e}' stream ${i}: ${d}`,u);const m=o.createWebChannel(d,u);let y=!1,v=!1;const S=new Xq({Go:T=>{v?be(Ln,`Not sending because RPC '${e}' stream ${i} is closed:`,T):(y||(be(Ln,`Opening RPC '${e}' stream ${i} transport.`),m.open(),y=!0),be(Ln,`RPC '${e}' stream ${i} sending:`,T),m.send(T))},zo:()=>m.close()}),b=(T,k,M)=>{T.listen(k,F=>{try{M(F)}catch(z){setTimeout(()=>{throw z},0)}})};return b(m,Uh.EventType.OPEN,()=>{v||(be(Ln,`RPC '${e}' stream ${i} transport opened.`),S.t_())}),b(m,Uh.EventType.CLOSE,()=>{v||(v=!0,be(Ln,`RPC '${e}' stream ${i} transport closed`),S.r_())}),b(m,Uh.EventType.ERROR,T=>{v||(v=!0,xu(Ln,`RPC '${e}' stream ${i} transport errored. Name:`,T.name,"Message:",T.message),S.r_(new Ie(ce.UNAVAILABLE,"The operation could not be completed")))}),b(m,Uh.EventType.MESSAGE,T=>{var k;if(!v){const M=T.data[0];ft(!!M,16349);const F=M,z=(F==null?void 0:F.error)||((k=F[0])===null||k===void 0?void 0:k.error);if(z){be(Ln,`RPC '${e}' stream ${i} received error:`,z);const $=z.status;let U=function(A){const L=Ut[A];if(L!==void 0)return XI(L)}($),C=z.message;U===void 0&&(U=ce.INTERNAL,C="Unknown error status: "+$+" with message "+z.message),v=!0,S.r_(new Ie(U,C)),m.close()}else be(Ln,`RPC '${e}' stream ${i} received:`,M),S.i_(M)}}),b(l,dI.STAT_EVENT,T=>{T.stat===lO.PROXY?be(Ln,`RPC '${e}' stream ${i} detected buffering proxy`):T.stat===lO.NOPROXY&&be(Ln,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.n_()},0),S}}function Qv(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sy(n){return new eq(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e,t,r=1e3,i=1.5,s=6e4){this.bi=e,this.timerId=t,this.u_=r,this.c_=i,this.l_=s,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const t=Math.floor(this.h_+this.d_()),r=Math.max(0,Date.now()-this.T_),i=Math.max(0,t-r);i>0&&be("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.h_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,i,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FE="PersistentStream";class u2{constructor(e,t,r,i,s,o,l,u){this.bi=e,this.R_=r,this.V_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new c2(e,t)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,t){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(po(t.toString()),po("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):t&&t.code===ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(t)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),t=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.m_===t&&this.B_(r,i)},r=>{e(()=>{const i=new Ie(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.L_(i)})})}B_(e,t){const r=this.N_(this.m_);this.stream=this.k_(e,t),this.stream.jo(()=>{r(()=>this.listener.jo())}),this.stream.Jo(()=>{r(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(i=>{r(()=>this.L_(i))}),this.stream.onMessage(i=>{r(()=>++this.p_==1?this.q_(i):this.onNext(i))})}S_(){this.state=5,this.y_.E_(async()=>{this.state=0,this.start()})}L_(e){return be(FE,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return t=>{this.bi.enqueueAndForget(()=>this.m_===e?t():(be(FE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Yq extends u2{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}k_(e,t){return this.connection.a_("Listen",e,t)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const t=rq(this.serializer,e),r=function(s){if(!("targetChange"in s))return ze.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ze.min():o.readTime?ys(o.readTime):ze.min()}(e);return this.listener.Q_(t,r)}U_(e){const t={};t.database=vO(this.serializer),t.addTarget=function(s,o){let l;const u=o.target;if(l=dO(u)?{documents:oq(s,u)}:{query:aq(s,u).gt},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=JI(s,o.resumeToken);const h=mO(s,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(ze.min())>0){l.readTime=yg(s,o.snapshotVersion.toTimestamp());const h=mO(s,o.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=cq(this.serializer,e);r&&(t.labels=r),this.F_(t)}K_(e){const t={};t.database=vO(this.serializer),t.removeTarget=e,this.F_(t)}}class Jq extends u2{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,t){return this.connection.a_("Write",e,t)}q_(e){return ft(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ft(!e.writeResults||e.writeResults.length===0,55816),this.listener.z_()}onNext(e){ft(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const t=sq(e.writeResults,e.commitTime),r=ys(e.commitTime);return this.listener.j_(r,t)}H_(){const e={};e.database=vO(this.serializer),this.F_(e)}G_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>iq(this.serializer,r))};this.F_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zq{}class e9 extends Zq{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.J_=!1}Y_(){if(this.J_)throw new Ie(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,t,r,i){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Qo(e,gO(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ie(ce.UNKNOWN,s.toString())})}Wo(e,t,r,i,s){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Wo(e,gO(t,r),i,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ie(ce.UNKNOWN,o.toString())})}terminate(){this.J_=!0,this.connection.terminate()}}class t9{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(po(t),this.ea=!1):be("OnlineStateTracker",t)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ql="RemoteStore";class n9{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=s,this.ca.vo(o=>{r.enqueueAndForget(async()=>{Zl(this)&&(be(Ql,"Restarting streams for network reachability change."),await async function(u){const h=Be(u);h.aa.add(4),await ad(h),h.la.set("Unknown"),h.aa.delete(4),await by(h)}(this))})}),this.la=new t9(r,i)}}async function by(n){if(Zl(n))for(const e of n.ua)await e(!0)}async function ad(n){for(const e of n.ua)await e(!1)}function h2(n,e){const t=Be(n);t._a.has(e.targetId)||(t._a.set(e.targetId,e),OS(t)?wS(t):Wu(t).b_()&&vS(t,e))}function yS(n,e){const t=Be(n),r=Wu(t);t._a.delete(e),r.b_()&&f2(t,e),t._a.size===0&&(r.b_()?r.v_():Zl(t)&&t.la.set("Unknown"))}function vS(n,e){if(n.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ze.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Wu(n).U_(e)}function f2(n,e){n.ha.Ke(e),Wu(n).K_(e)}function wS(n){n.ha=new K3({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n._a.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),Wu(n).start(),n.la.ta()}function OS(n){return Zl(n)&&!Wu(n).w_()&&n._a.size>0}function Zl(n){return Be(n).aa.size===0}function d2(n){n.ha=void 0}async function r9(n){n.la.set("Online")}async function i9(n){n._a.forEach((e,t)=>{vS(n,e)})}async function s9(n,e){d2(n),OS(n)?(n.la.ia(e),wS(n)):n.la.set("Unknown")}async function o9(n,e,t){if(n.la.set("Online"),e instanceof YI&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const l of s.targetIds)i._a.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i._a.delete(l),i.ha.removeTarget(l))}(n,e)}catch(r){be(Ql,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await wg(n,r)}else if(e instanceof Nm?n.ha.Xe(e):e instanceof KI?n.ha.ot(e):n.ha.nt(e),!t.isEqual(ze.min()))try{const r=await l2(n.localStore);t.compareTo(r)>=0&&await function(s,o){const l=s.ha.It(o);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const d=s._a.get(h);d&&s._a.set(h,d.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,h)=>{const d=s._a.get(u);if(!d)return;s._a.set(u,d.withResumeToken(kn.EMPTY_BYTE_STRING,d.snapshotVersion)),f2(s,u);const m=new fa(d.target,u,h,d.sequenceNumber);vS(s,m)}),s.remoteSyncer.applyRemoteEvent(l)}(n,t)}catch(r){be(Ql,"Failed to raise snapshot:",r),await wg(n,r)}}async function wg(n,e,t){if(!qu(e))throw e;n.aa.add(1),await ad(n),n.la.set("Offline"),t||(t=()=>l2(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{be(Ql,"Retrying IndexedDB access"),await t(),n.aa.delete(1),await by(n)})}function p2(n,e){return e().catch(t=>wg(n,t,e))}async function Ty(n){const e=Be(n),t=Ia(e);let r=e.oa.length>0?e.oa[e.oa.length-1].batchId:iS;for(;a9(e);)try{const i=await $q(e.localStore,r);if(i===null){e.oa.length===0&&t.v_();break}r=i.batchId,l9(e,i)}catch(i){await wg(e,i)}m2(e)&&g2(e)}function a9(n){return Zl(n)&&n.oa.length<10}function l9(n,e){n.oa.push(e);const t=Ia(n);t.b_()&&t.W_&&t.G_(e.mutations)}function m2(n){return Zl(n)&&!Ia(n).w_()&&n.oa.length>0}function g2(n){Ia(n).start()}async function c9(n){Ia(n).H_()}async function u9(n){const e=Ia(n);for(const t of n.oa)e.G_(t.mutations)}async function h9(n,e,t){const r=n.oa.shift(),i=uS.from(r,e,t);await p2(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Ty(n)}async function f9(n,e){e&&Ia(n).W_&&await async function(r,i){if(function(o){return G3(o)&&o!==ce.ABORTED}(i.code)){const s=r.oa.shift();Ia(r).D_(),await p2(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Ty(r)}}(n,e),m2(n)&&g2(n)}async function QE(n,e){const t=Be(n);t.asyncQueue.verifyOperationInProgress(),be(Ql,"RemoteStore received new credentials");const r=Zl(t);t.aa.add(3),await ad(t),r&&t.la.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.aa.delete(3),await by(t)}async function d9(n,e){const t=Be(n);e?(t.aa.delete(2),await by(t)):e||(t.aa.add(2),await ad(t),t.la.set("Unknown"))}function Wu(n){return n.Pa||(n.Pa=function(t,r,i){const s=Be(t);return s.Y_(),new Yq(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{jo:r9.bind(null,n),Jo:i9.bind(null,n),Zo:s9.bind(null,n),Q_:o9.bind(null,n)}),n.ua.push(async e=>{e?(n.Pa.D_(),OS(n)?wS(n):n.la.set("Unknown")):(await n.Pa.stop(),d2(n))})),n.Pa}function Ia(n){return n.Ta||(n.Ta=function(t,r,i){const s=Be(t);return s.Y_(),new Jq(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{jo:()=>Promise.resolve(),Jo:c9.bind(null,n),Zo:f9.bind(null,n),z_:u9.bind(null,n),j_:h9.bind(null,n)}),n.ua.push(async e=>{e?(n.Ta.D_(),await Ty(n)):(await n.Ta.stop(),n.oa.length>0&&(be(Ql,`Stopping write stream with ${n.oa.length} pending writes`),n.oa=[]))})),n.Ta}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new oo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,l=new xS(e,t,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ie(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function SS(n,e){if(po("AsyncQueue",`${e}: ${n}`),qu(n))return new Ie(ce.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{static emptySet(e){return new Zc(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Me.comparator(t.key,r.key):(t,r)=>Me.comparator(t.key,r.key),this.keyedMap=qh(),this.sortedSet=new Dt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Zc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Zc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(){this.Ia=new Dt(Me.comparator)}track(e){const t=e.doc.key,r=this.Ia.get(t);r?e.type!==0&&r.type===3?this.Ia=this.Ia.insert(t,e):e.type===3&&r.type!==1?this.Ia=this.Ia.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Ia=this.Ia.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Ia=this.Ia.remove(t):e.type===1&&r.type===2?this.Ia=this.Ia.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):Fe(63341,{Vt:e,Ea:r}):this.Ia=this.Ia.insert(t,e)}da(){const e=[];return this.Ia.inorderTraversal((t,r)=>{e.push(r)}),e}}class Eu{constructor(e,t,r,i,s,o,l,u,h){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(l=>{o.push({type:0,doc:l})}),new Eu(e,t,Zc.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yy(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p9{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}}class m9{constructor(){this.queries=zE(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(t,r){const i=Be(t),s=i.queries;i.queries=zE(),s.forEach((o,l)=>{for(const u of l.Ra)u.onError(r)})})(this,new Ie(ce.ABORTED,"Firestore shutting down"))}}function zE(){return new Jl(n=>LI(n),yy)}async function bS(n,e){const t=Be(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.Va()&&e.ma()&&(r=2):(s=new p9,r=e.ma()?0:1);try{switch(r){case 0:s.Aa=await t.onListen(i,!0);break;case 1:s.Aa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){const l=SS(o,`Initialization of query '${Qc(e.query)}' failed`);return void e.onError(l)}t.queries.set(i,s),s.Ra.push(e),e.ga(t.onlineState),s.Aa&&e.pa(s.Aa)&&_S(t)}async function TS(n,e){const t=Be(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.Ra.indexOf(e);o>=0&&(s.Ra.splice(o,1),s.Ra.length===0?i=e.ma()?0:1:!s.Va()&&e.ma()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function g9(n,e){const t=Be(n);let r=!1;for(const i of e){const s=i.query,o=t.queries.get(s);if(o){for(const l of o.Ra)l.pa(i)&&(r=!0);o.Aa=i}}r&&_S(t)}function y9(n,e,t){const r=Be(n),i=r.queries.get(e);if(i)for(const s of i.Ra)s.onError(t);r.queries.delete(e)}function _S(n){n.fa.forEach(e=>{e.next()})}var xO,$E;($E=xO||(xO={})).ya="default",$E.Cache="cache";class ES{constructor(e,t,r){this.query=e,this.wa=t,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=r||{}}pa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Eu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ba?this.Da(e)&&(this.wa.next(e),t=!0):this.va(e,this.onlineState)&&(this.Ca(e),t=!0),this.Sa=e,t}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let t=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),t=!0),t}va(e,t){if(!e.fromCache||!this.ma())return!0;const r=t!=="Offline";return(!this.options.Fa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Da(e){if(e.docChanges.length>0)return!0;const t=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Ca(e){e=Eu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==xO.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(e){this.key=e}}class v2{constructor(e){this.key=e}}class v9{constructor(e,t){this.query=e,this.qa=t,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=Je(),this.mutatedKeys=Je(),this.Ua=VI(e),this.Ka=new Zc(this.Ua)}get Wa(){return this.qa}Ga(e,t){const r=t?t.za:new jE,i=t?t.Ka:this.Ka;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,m)=>{const y=i.get(d),v=vy(this.query,m)?m:null,S=!!y&&this.mutatedKeys.has(y.key),b=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let T=!1;y&&v?y.data.isEqual(v.data)?S!==b&&(r.track({type:3,doc:v}),T=!0):this.ja(y,v)||(r.track({type:2,doc:v}),T=!0,(u&&this.Ua(v,u)>0||h&&this.Ua(v,h)<0)&&(l=!0)):!y&&v?(r.track({type:0,doc:v}),T=!0):y&&!v&&(r.track({type:1,doc:y}),T=!0,(u||h)&&(l=!0)),T&&(v?(o=o.add(v),s=b?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ka:o,za:r,ys:l,mutatedKeys:s}}ja(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const o=e.za.da();o.sort((d,m)=>function(v,S){const b=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Fe(20277,{Vt:T})}};return b(v)-b(S)}(d.type,m.type)||this.Ua(d.doc,m.doc)),this.Ha(r),i=i!=null&&i;const l=t&&!i?this.Ja():[],u=this.$a.size===0&&this.current&&!i?1:0,h=u!==this.Qa;return this.Qa=u,o.length!==0||h?{snapshot:new Eu(this.query,e.Ka,s,o,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ya:l}:{Ya:l}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new jE,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(t=>this.qa=this.qa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qa=this.qa.delete(t)),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=Je(),this.Ka.forEach(r=>{this.Za(r.key)&&(this.$a=this.$a.add(r.key))});const t=[];return e.forEach(r=>{this.$a.has(r)||t.push(new v2(r))}),this.$a.forEach(r=>{e.has(r)||t.push(new y2(r))}),t}Xa(e){this.qa=e.Ns,this.$a=Je();const t=this.Ga(e.documents);return this.applyChanges(t,!0)}eu(){return Eu.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}}const kS="SyncEngine";class w9{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class O9{constructor(e){this.key=e,this.tu=!1}}class x9{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.nu={},this.ru=new Jl(l=>LI(l),yy),this.iu=new Map,this.su=new Set,this.ou=new Dt(Me.comparator),this._u=new Map,this.au=new dS,this.uu={},this.cu=new Map,this.lu=_u.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}}async function S9(n,e,t=!0){const r=T2(n);let i;const s=r.ru.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.eu()):i=await w2(r,e,t,!0),i}async function b9(n,e){const t=T2(n);await w2(t,e,!0,!1)}async function w2(n,e,t,r){const i=await Bq(n.localStore,ms(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t);let l;return r&&(l=await T9(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&h2(n.remoteStore,i),l}async function T9(n,e,t,r,i){n.Pu=(m,y,v)=>async function(b,T,k,M){let F=T.view.Ga(k);F.ys&&(F=await DE(b.localStore,T.query,!1).then(({documents:C})=>T.view.Ga(C,F)));const z=M&&M.targetChanges.get(T.targetId),$=M&&M.targetMismatches.get(T.targetId)!=null,U=T.view.applyChanges(F,b.isPrimaryClient,z,$);return UE(b,T.targetId,U.Ya),U.snapshot}(n,m,y,v);const s=await DE(n.localStore,e,!0),o=new v9(e,s.Ns),l=o.Ga(s.documents),u=od.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),h=o.applyChanges(l,n.isPrimaryClient,u);UE(n,t,h.Ya);const d=new w9(e,t,o);return n.ru.set(e,d),n.iu.has(t)?n.iu.get(t).push(e):n.iu.set(t,[e]),h.snapshot}async function _9(n,e,t){const r=Be(n),i=r.ru.get(e),s=r.iu.get(i.targetId);if(s.length>1)return r.iu.set(i.targetId,s.filter(o=>!yy(o,e))),void r.ru.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await wO(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&yS(r.remoteStore,i.targetId),SO(r,i.targetId)}).catch(Uu)):(SO(r,i.targetId),await wO(r.localStore,i.targetId,!0))}async function E9(n,e){const t=Be(n),r=t.ru.get(e),i=t.iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),yS(t.remoteStore,r.targetId))}async function k9(n,e,t){const r=D9(n);try{const i=await function(o,l){const u=Be(o),h=nn.now(),d=l.reduce((v,S)=>v.add(S.key),Je());let m,y;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let S=mo(),b=Je();return u.Cs.getEntries(v,d).next(T=>{S=T,S.forEach((k,M)=>{M.isValidDocument()||(b=b.add(k))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,S)).next(T=>{m=T;const k=[];for(const M of l){const F=B3(M,m.get(M.key).overlayedDocument);F!=null&&k.push(new Ua(M.key,F,PI(F.value.mapValue),gs.exists(!0)))}return u.mutationQueue.addMutationBatch(v,h,k,l)}).next(T=>{y=T;const k=T.applyToLocalDocumentSet(m,b);return u.documentOverlayCache.saveOverlays(v,T.batchId,k)})}).then(()=>({batchId:y.batchId,changes:QI(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,u){let h=o.uu[o.currentUser.toKey()];h||(h=new Dt(We)),h=h.insert(l,u),o.uu[o.currentUser.toKey()]=h}(r,i.batchId,t),await ld(r,i.changes),await Ty(r.remoteStore)}catch(i){const s=SS(i,"Failed to persist write");t.reject(s)}}async function O2(n,e){const t=Be(n);try{const r=await jq(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t._u.get(s);o&&(ft(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.tu=!0:i.modifiedDocuments.size>0?ft(o.tu,14607):i.removedDocuments.size>0&&(ft(o.tu,42227),o.tu=!1))}),await ld(t,r,e)}catch(r){await Uu(r)}}function BE(n,e,t){const r=Be(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.ru.forEach((s,o)=>{const l=o.view.ga(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const u=Be(o);u.onlineState=l;let h=!1;u.queries.forEach((d,m)=>{for(const y of m.Ra)y.ga(l)&&(h=!0)}),h&&_S(u)}(r.eventManager,e),i.length&&r.nu.Q_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function C9(n,e,t){const r=Be(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r._u.get(e),s=i&&i.key;if(s){let o=new Dt(Me.comparator);o=o.insert(s,jn.newNoDocument(s,ze.min()));const l=Je().add(s),u=new xy(ze.min(),new Map,new Dt(We),o,l);await O2(r,u),r.ou=r.ou.remove(s),r._u.delete(e),CS(r)}else await wO(r.localStore,e,!1).then(()=>SO(r,e,t)).catch(Uu)}async function P9(n,e){const t=Be(n),r=e.batch.batchId;try{const i=await Qq(t.localStore,e);S2(t,r,null),x2(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await ld(t,i)}catch(i){await Uu(i)}}async function A9(n,e,t){const r=Be(n);try{const i=await function(o,l){const u=Be(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let d;return u.mutationQueue.lookupMutationBatch(h,l).next(m=>(ft(m!==null,37113),d=m.keys(),u.mutationQueue.removeMutationBatch(h,m))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,d,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d)).next(()=>u.localDocuments.getDocuments(h,d))})}(r.localStore,e);S2(r,e,t),x2(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await ld(r,i)}catch(i){await Uu(i)}}function x2(n,e){(n.cu.get(e)||[]).forEach(t=>{t.resolve()}),n.cu.delete(e)}function S2(n,e,t){const r=Be(n);let i=r.uu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.uu[r.currentUser.toKey()]=i}}function SO(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.iu.get(e))n.ru.delete(r),t&&n.nu.Tu(r,t);n.iu.delete(e),n.isPrimaryClient&&n.au.Ur(e).forEach(r=>{n.au.containsKey(r)||b2(n,r)})}function b2(n,e){n.su.delete(e.path.canonicalString());const t=n.ou.get(e);t!==null&&(yS(n.remoteStore,t),n.ou=n.ou.remove(e),n._u.delete(t),CS(n))}function UE(n,e,t){for(const r of t)r instanceof y2?(n.au.addReference(r.key,e),R9(n,r)):r instanceof v2?(be(kS,"Document no longer in limbo: "+r.key),n.au.removeReference(r.key,e),n.au.containsKey(r.key)||b2(n,r.key)):Fe(19791,{Iu:r})}function R9(n,e){const t=e.key,r=t.path.canonicalString();n.ou.get(t)||n.su.has(r)||(be(kS,"New document in limbo: "+t),n.su.add(r),CS(n))}function CS(n){for(;n.su.size>0&&n.ou.size<n.maxConcurrentLimboResolutions;){const e=n.su.values().next().value;n.su.delete(e);const t=new Me(Pt.fromString(e)),r=n.lu.next();n._u.set(r,new O9(t)),n.ou=n.ou.insert(t,r),h2(n.remoteStore,new fa(ms(gy(t.path)),r,"TargetPurposeLimboResolution",fy.le))}}async function ld(n,e,t){const r=Be(n),i=[],s=[],o=[];r.ru.isEmpty()||(r.ru.forEach((l,u)=>{o.push(r.Pu(u,e,t).then(h=>{var d;if((h||t)&&r.isPrimaryClient){const m=h?!h.fromCache:(d=t==null?void 0:t.targetChanges.get(u.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(h){i.push(h);const m=mS.Ps(u.targetId,h);s.push(m)}}))}),await Promise.all(o),r.nu.Q_(i),await async function(u,h){const d=Be(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>oe.forEach(h,y=>oe.forEach(y.ls,v=>d.persistence.referenceDelegate.addReference(m,y.targetId,v)).next(()=>oe.forEach(y.hs,v=>d.persistence.referenceDelegate.removeReference(m,y.targetId,v)))))}catch(m){if(!qu(m))throw m;be(gS,"Failed to update sequence numbers: "+m)}for(const m of h){const y=m.targetId;if(!m.fromCache){const v=d.Ss.get(y),S=v.snapshotVersion,b=v.withLastLimboFreeSnapshotVersion(S);d.Ss=d.Ss.insert(y,b)}}}(r.localStore,s))}async function I9(n,e){const t=Be(n);if(!t.currentUser.isEqual(e)){be(kS,"User change. New user:",e.toKey());const r=await a2(t.localStore,e);t.currentUser=e,function(s,o){s.cu.forEach(l=>{l.forEach(u=>{u.reject(new Ie(ce.CANCELLED,o))})}),s.cu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ld(t,r.Ms)}}function N9(n,e){const t=Be(n),r=t._u.get(e);if(r&&r.tu)return Je().add(r.key);{let i=Je();const s=t.iu.get(e);if(!s)return i;for(const o of s){const l=t.ru.get(o);i=i.unionWith(l.view.Wa)}return i}}function T2(n){const e=Be(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=O2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=N9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=C9.bind(null,e),e.nu.Q_=g9.bind(null,e.eventManager),e.nu.Tu=y9.bind(null,e.eventManager),e}function D9(n){const e=Be(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=P9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=A9.bind(null,e),e}class Og{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Sy(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,t){return null}fu(e,t){return null}Vu(e){return Fq(this.persistence,new Mq,e.initialUser,this.serializer)}Ru(e){return new o2(pS.Ei,this.serializer)}Au(e){return new qq}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Og.provider={build:()=>new Og};class M9 extends Og{constructor(e){super(),this.cacheSizeBytes=e}mu(e,t){ft(this.persistence.referenceDelegate instanceof vg,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Oq(r,e.asyncQueue,t)}Ru(e){const t=this.cacheSizeBytes!==void 0?pr.withCacheSize(this.cacheSizeBytes):pr.DEFAULT;return new o2(r=>vg.Ei(r,t),this.serializer)}}class bO{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>BE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=I9.bind(null,this.syncEngine),await d9(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new m9}()}createDatastore(e){const t=Sy(e.databaseInfo.databaseId),r=function(s){return new Kq(s)}(e.databaseInfo);return function(s,o,l,u){return new e9(s,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,s,o,l){return new n9(r,i,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,t=>BE(this.syncEngine,t,0),function(){return VE.C()?new VE:new Wq}())}createSyncEngine(e,t){return function(i,s,o,l,u,h,d){const m=new x9(i,s,o,l,u,h);return d&&(m.hu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const s=Be(i);be(Ql,"RemoteStore shutting down."),s.aa.add(5),await ad(s),s.ca.shutdown(),s.la.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}bO.provider={build:()=>new bO};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):po("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na="FirestoreClient";class L9{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Fn.UNAUTHENTICATED,this.clientId=wI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{be(Na,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(be(Na,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new oo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=SS(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function jv(n,e){n.asyncQueue.verifyOperationInProgress(),be(Na,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await a2(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function qE(n,e){n.asyncQueue.verifyOperationInProgress();const t=await V9(n);be(Na,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>QE(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>QE(e.remoteStore,i)),n._onlineComponents=e}async function V9(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){be(Na,"Using user provided OfflineComponentProvider");try{await jv(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===ce.FAILED_PRECONDITION||i.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;xu("Error using user provided cache. Falling back to memory cache: "+t),await jv(n,new Og)}}else be(Na,"Using default OfflineComponentProvider"),await jv(n,new M9(void 0));return n._offlineComponents}async function _2(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(be(Na,"Using user provided OnlineComponentProvider"),await qE(n,n._uninitializedComponentsProvider._online)):(be(Na,"Using default OnlineComponentProvider"),await qE(n,new bO))),n._onlineComponents}function F9(n){return _2(n).then(e=>e.syncEngine)}async function xg(n){const e=await _2(n),t=e.eventManager;return t.onListen=S9.bind(null,e.syncEngine),t.onUnlisten=_9.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=b9.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=E9.bind(null,e.syncEngine),t}function Q9(n,e,t={}){const r=new oo;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,h){const d=new PS({next:y=>{d.yu(),o.enqueueAndForget(()=>TS(s,m));const v=y.docs.has(l);!v&&y.fromCache?h.reject(new Ie(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&y.fromCache&&u&&u.source==="server"?h.reject(new Ie(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(y)},error:y=>h.reject(y)}),m=new ES(gy(l.path),d,{includeMetadataChanges:!0,Fa:!0});return bS(s,m)}(await xg(n),n.asyncQueue,e,t,r)),r.promise}function j9(n,e,t={}){const r=new oo;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,h){const d=new PS({next:y=>{d.yu(),o.enqueueAndForget(()=>TS(s,m)),y.fromCache&&u.source==="server"?h.reject(new Ie(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(y)},error:y=>h.reject(y)}),m=new ES(l,d,{includeMetadataChanges:!0,Fa:!0});return bS(s,m)}(await xg(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E2(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k2(n,e,t){if(!t)throw new Ie(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function z9(n,e,t,r){if(e===!0&&r===!0)throw new Ie(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function HE(n){if(!Me.isDocumentKey(n))throw new Ie(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function GE(n){if(Me.isDocumentKey(n))throw new Ie(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function AS(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Fe(12329,{type:typeof n})}function oi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ie(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=AS(n);throw new Ie(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2="firestore.googleapis.com",XE=!0;class KE{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ie(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=C2,this.ssl=XE}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:XE;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=s2;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<vq)throw new Ie(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}z9("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=E2((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ie(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ie(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ie(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _y{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new KE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ie(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ie(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new KE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new GU;switch(r.type){case"firstParty":return new JU(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ie(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=WE.get(t);r&&(be("ComponentProvider","Removing Datastore"),WE.delete(t),r.terminate())}(this),Promise.resolve()}}function $9(n,e,t,r={}){var i;const s=(n=oi(n,_y))._getSettings(),o=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),l=`${e}:${t}`;s.host!==C2&&s.host!==l&&xu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},s),{host:l,ssl:!1,emulatorOptions:r});if(!Dl(u,o)&&(n._setSettings(u),r.mockUserToken)){let h,d;if(typeof r.mockUserToken=="string")h=r.mockUserToken,d=Fn.MOCK_USER;else{h=iz(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new Ie(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Fn(m)}n._authCredentials=new XU(new yI(h,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new cd(this.firestore,e,this._query)}}class Jn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jn(this.firestore,e,this._key)}}class xa extends cd{constructor(e,t,r){super(e,t,gy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jn(this.firestore,null,new Me(e))}withConverter(e){return new xa(this.firestore,e,this._path)}}function B9(n,e,...t){if(n=sn(n),k2("collection","path",e),n instanceof _y){const r=Pt.fromString(e,...t);return GE(r),new xa(n,null,r)}{if(!(n instanceof Jn||n instanceof xa))throw new Ie(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Pt.fromString(e,...t));return GE(r),new xa(n.firestore,null,r)}}function Ey(n,e,...t){if(n=sn(n),arguments.length===1&&(e=wI.newId()),k2("doc","path",e),n instanceof _y){const r=Pt.fromString(e,...t);return HE(r),new Jn(n,null,new Me(r))}{if(!(n instanceof Jn||n instanceof xa))throw new Ie(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Pt.fromString(e,...t));return HE(r),new Jn(n.firestore,n instanceof xa?n.converter:null,new Me(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE="AsyncQueue";class JE{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new c2(this,"async_queue_retry"),this.ju=()=>{const r=Qv();r&&be(YE,"Visibility state changed to "+r.visibilityState),this.y_.A_()},this.Hu=e;const t=Qv();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const t=Qv();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});const t=new oo;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}async Zu(){if(this.Qu.length!==0){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!qu(e))throw e;be(YE,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}}Yu(e){const t=this.Hu.then(()=>(this.Wu=!0,e().catch(r=>{throw this.Ku=r,this.Wu=!1,po("INTERNAL UNHANDLED ERROR: ",ZE(r)),r}).then(r=>(this.Wu=!1,r))));return this.Hu=t,t}enqueueAfterDelay(e,t,r){this.Ju(),this.zu.indexOf(e)>-1&&(t=0);const i=xS.createAndSchedule(this,e,t,r,s=>this.Xu(s));return this.Uu.push(i),i}Ju(){this.Ku&&Fe(47125,{ec:ZE(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do e=this.Hu,await e;while(e!==this.Hu)}nc(e){for(const t of this.Uu)if(t.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){const t=this.Uu.indexOf(e);this.Uu.splice(t,1)}}function ZE(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ek(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}class jl extends _y{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new JE,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new JE(e),this._firestoreClient=void 0,await e}}}function U9(n,e){const t=typeof n=="object"?n:kR(),r=typeof n=="string"?n:hg,i=Hx(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=nz("firestore");s&&$9(i,...s)}return i}function ky(n){if(n._terminated)throw new Ie(ce.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||q9(n),n._firestoreClient}function q9(n){var e,t,r;const i=n._freezeSettings(),s=function(l,u,h,d){return new d3(l,u,h,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,E2(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new L9(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ku(kn.fromBase64String(e))}catch(t){throw new Ie(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ku(kn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ie(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ie(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ie(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return We(this._lat,e._lat)||We(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W9=/^__.*__$/;class H9{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ua(e,this.data,this.fieldMask,t,this.fieldTransforms):new sd(e,this.data,t,this.fieldTransforms)}}class P2{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ua(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function A2(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Fe(40011,{oc:n})}}class DS{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this._c(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new DS(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ac({path:r,cc:!1});return i.lc(e),i}hc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ac({path:r,cc:!1});return i._c(),i}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return Sg(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(e.length===0)throw this.Tc("Document fields must not be empty");if(A2(this.oc)&&W9.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}}class G9{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Sy(e)}dc(e,t,r,i=!1){return new DS({oc:e,methodName:t,Ec:r,path:Tn.emptyPath(),cc:!1,Ic:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function R2(n){const e=n._freezeSettings(),t=Sy(n._databaseId);return new G9(n._databaseId,!!e.ignoreUndefinedProperties,t)}function X9(n,e,t,r,i,s={}){const o=n.dc(s.merge||s.mergeFields?2:0,e,t,i);MS("Data must be an object, but it was:",o,r);const l=I2(r,o);let u,h;if(s.merge)u=new Fr(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const m of s.mergeFields){const y=TO(e,m,t);if(!o.contains(y))throw new Ie(ce.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);D2(d,y)||d.push(y)}u=new Fr(d),h=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,h=o.fieldTransforms;return new H9(new vr(l),u,h)}class Py extends RS{_toFieldTransform(e){if(e.oc!==2)throw e.oc===1?e.Tc(`${this._methodName}() can only appear at the top level of your update data`):e.Tc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Py}}function K9(n,e,t,r){const i=n.dc(1,e,t);MS("Data must be an object, but it was:",i,r);const s=[],o=vr.empty();Ba(r,(u,h)=>{const d=LS(e,u,t);h=sn(h);const m=i.hc(d);if(h instanceof Py)s.push(d);else{const y=Ay(h,m);y!=null&&(s.push(d),o.set(d,y))}});const l=new Fr(s);return new P2(o,l,i.fieldTransforms)}function Y9(n,e,t,r,i,s){const o=n.dc(1,e,t),l=[TO(e,r,t)],u=[i];if(s.length%2!=0)throw new Ie(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<s.length;y+=2)l.push(TO(e,s[y])),u.push(s[y+1]);const h=[],d=vr.empty();for(let y=l.length-1;y>=0;--y)if(!D2(h,l[y])){const v=l[y];let S=u[y];S=sn(S);const b=o.hc(v);if(S instanceof Py)h.push(v);else{const T=Ay(S,b);T!=null&&(h.push(v),d.set(v,T))}}const m=new Fr(h);return new P2(d,m,o.fieldTransforms)}function Ay(n,e){if(N2(n=sn(n)))return MS("Unsupported field value:",e,n),I2(n,e);if(n instanceof RS)return function(r,i){if(!A2(i.oc))throw i.Tc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Tc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.cc&&e.oc!==4)throw e.Tc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let u=Ay(l,i.Pc(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=sn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return V3(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=nn.fromDate(r);return{timestampValue:yg(i.serializer,s)}}if(r instanceof nn){const s=new nn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:yg(i.serializer,s)}}if(r instanceof IS)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ku)return{bytesValue:JI(i.serializer,r._byteString)};if(r instanceof Jn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Tc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:fS(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof NS)return function(o,l){return{mapValue:{fields:{[kI]:{stringValue:CI},[fg]:{arrayValue:{values:o.toArray().map(h=>{if(typeof h!="number")throw l.Tc("VectorValues must only contain numeric values.");return cS(l.serializer,h)})}}}}}}(r,i);throw i.Tc(`Unsupported field value: ${AS(r)}`)}(n,e)}function I2(n,e){const t={};return xI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ba(n,(r,i)=>{const s=Ay(i,e.uc(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function N2(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof nn||n instanceof IS||n instanceof ku||n instanceof Jn||n instanceof RS||n instanceof NS)}function MS(n,e,t){if(!N2(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=AS(t);throw r==="an object"?e.Tc(n+" a custom object"):e.Tc(n+" "+r)}}function TO(n,e,t){if((e=sn(e))instanceof Cy)return e._internalPath;if(typeof e=="string")return LS(n,e);throw Sg("Field path arguments must be of type string or ",n,!1,void 0,t)}const J9=new RegExp("[~\\*/\\[\\]]");function LS(n,e,t){if(e.search(J9)>=0)throw Sg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Cy(...e.split("."))._internalPath}catch{throw Sg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Sg(n,e,t,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;t&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Ie(ce.INVALID_ARGUMENT,l+n+u)}function D2(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Jn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Z9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(L2("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Z9 extends M2{data(){return super.data()}}function L2(n,e){return typeof e=="string"?LS(n,e):e instanceof Cy?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V2(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ie(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class eW{convertValue(e,t="none"){switch(Ra(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Aa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Fe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ba(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[fg].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>jt(o.doubleValue));return new NS(s)}convertGeoPoint(e){return new IS(jt(e.latitude),jt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=py(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Tf(e));default:return null}}convertTimestamp(e){const t=Pa(e);return new nn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Pt.fromString(e);ft(i2(r),9688,{name:e});const i=new _f(r.get(1),r.get(3)),s=new Me(r.popFirst(5));return i.isEqual(t)||po(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tW(n,e,t){let r;return r=n?n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class F2 extends M2{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Dm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(L2("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Dm extends F2{data(e={}){return super.data(e)}}class Q2{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Hh(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Dm(this._firestore,this._userDataWriter,r.key,r,new Hh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ie(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const u=new Dm(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Hh(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new Dm(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Hh(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,d=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:nW(l.type),doc:u,oldIndex:h,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function nW(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Fe(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j2(n){n=oi(n,Jn);const e=oi(n.firestore,jl);return Q9(ky(e),n._key).then(t=>$2(e,n,t))}class VS extends eW{constructor(e){super(),this.firestore=e}convertBytes(e){return new ku(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jn(this.firestore,null,t)}}function rW(n){n=oi(n,cd);const e=oi(n.firestore,jl),t=ky(e),r=new VS(e);return V2(n._query),j9(t,n._query).then(i=>new Q2(e,r,n,i))}function iW(n,e,t){n=oi(n,Jn);const r=oi(n.firestore,jl),i=tW(n.converter,e);return z2(r,[X9(R2(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,gs.none())])}function sW(n,e,t,...r){n=oi(n,Jn);const i=oi(n.firestore,jl),s=R2(i);let o;return o=typeof(e=sn(e))=="string"||e instanceof Cy?Y9(s,"updateDoc",n._key,e,t,r):K9(s,"updateDoc",n._key,e),z2(i,[o.toMutation(n._key,gs.exists(!0))])}function oW(n,...e){var t,r,i;n=sn(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||ek(e[o])||(s=e[o],o++);const l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(ek(e[o])){const m=e[o];e[o]=(t=m.next)===null||t===void 0?void 0:t.bind(m),e[o+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[o+2]=(i=m.complete)===null||i===void 0?void 0:i.bind(m)}let u,h,d;if(n instanceof Jn)h=oi(n.firestore,jl),d=gy(n._key.path),u={next:m=>{e[o]&&e[o]($2(h,n,m))},error:e[o+1],complete:e[o+2]};else{const m=oi(n,cd);h=oi(m.firestore,jl),d=m._query;const y=new VS(h);u={next:v=>{e[o]&&e[o](new Q2(h,y,m,v))},error:e[o+1],complete:e[o+2]},V2(n._query)}return function(y,v,S,b){const T=new PS(b),k=new ES(v,T,S);return y.asyncQueue.enqueueAndForget(async()=>bS(await xg(y),k)),()=>{T.yu(),y.asyncQueue.enqueueAndForget(async()=>TS(await xg(y),k))}}(ky(h),d,l,u)}function z2(n,e){return function(r,i){const s=new oo;return r.asyncQueue.enqueueAndForget(async()=>k9(await F9(r),i,s)),s.promise}(ky(n),e)}function $2(n,e,t){const r=t.docs.get(e._key),i=new VS(n);return new F2(n,i,e._key,r,new Hh(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Bu=i})(zu),wu(new Ml("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new jl(new KU(r.getProvider("auth-internal")),new ZU(o,r.getProvider("app-check-internal")),function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Ie(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _f(h.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),wa(iE,sE,e),wa(iE,sE,"esm2017")})();const aW={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0},B2=ER(aW),ud=U9(B2),Kp=WU(B2),U2=I.createContext(null),lW=({children:n})=>{const[e,t]=I.useState(null),[r,i]=I.useState(!0),s=za(),{toast:o}=Tx();I.useEffect(()=>{const d=DB(Kp,m=>{t(m),i(!1)});return()=>d()},[]);const l=async(d,m,y)=>{i(!0);try{const S=(await CB(Kp,d,m)).user;if(!S)throw new Error("User creation failed.");await RB(S,{displayName:y}),await iW(Ey(ud,"users",S.uid),{name:y,email:S.email,createdAt:new Date,challengesSolved:0,streak:0,progress:[]}),o({title:"Registration successful",description:`Welcome, ${y}!`}),s("/challenge")}catch(v){throw o({title:"Registration failed",description:v.message,variant:"destructive"}),v}finally{i(!1)}},u=async(d,m)=>{i(!0);try{await PB(Kp,d,m),o({title:"Login successful",description:"Welcome back!"}),s("/challenge")}catch(y){throw o({title:"Login failed",description:y.message,variant:"destructive"}),y}finally{i(!1)}},h=async()=>{await MB(Kp),t(null),s("/login"),o({title:"Logged out",description:"See you soon!"})};return D.jsx(U2.Provider,{value:{user:e,isAuthenticated:!!e,isLoading:r,register:l,login:u,logout:h},children:n})},Hu=()=>{const n=I.useContext(U2);if(!n)throw new Error("useAuth must be used inside AuthProvider");return n},cW=()=>{const{isAuthenticated:n}=Hu(),e=za();return I.useEffect(()=>{n&&e("/challenge")},[n,e]),D.jsxs("div",{className:"min-h-screen flex flex-col",children:[D.jsx("div",{className:"bg-primary text-white py-16",children:D.jsxs("div",{className:"container mx-auto px-4 text-center",children:[D.jsx("div",{className:"mx-auto mb-6",children:D.jsx(hs,{className:"h-16 w-16 inline-block"})}),D.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"CodeForge"}),D.jsx("p",{className:"text-xl mb-8 max-w-2xl mx-auto",children:"One coding challenge every day to improve your skills and maintain your streak."}),D.jsx(uo,{size:"lg",onClick:()=>e("/login"),className:"bg-white text-primary hover:bg-gray-100",children:"Get Started"})]})}),D.jsx("div",{className:"py-16 bg-white",children:D.jsxs("div",{className:"container mx-auto px-4",children:[D.jsx("h2",{className:"text-3xl font-bold text-center mb-12",children:"How It Works"}),D.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[D.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 text-center",children:[D.jsx("div",{className:"mx-auto mb-4 bg-primary/10 p-3 rounded-full w-16 h-16 flex items-center justify-center",children:D.jsx(hs,{className:"h-8 w-8 text-primary"})}),D.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Daily Challenges"}),D.jsx("p",{className:"text-gray-600",children:"Get a new coding problem every day to solve and practice your skills."})]}),D.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 text-center",children:[D.jsx("div",{className:"mx-auto mb-4 bg-primary/10 p-3 rounded-full w-16 h-16 flex items-center justify-center",children:D.jsx(dA,{className:"h-8 w-8 text-primary"})}),D.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Track Progress"}),D.jsx("p",{className:"text-gray-600",children:"Mark challenges as solved, unsolved, or skipped to track your journey."})]}),D.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 text-center",children:[D.jsx("div",{className:"mx-auto mb-4 bg-primary/10 p-3 rounded-full w-16 h-16 flex items-center justify-center",children:D.jsx(kF,{className:"h-8 w-8 text-primary"})}),D.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Build Streaks"}),D.jsx("p",{className:"text-gray-600",children:"Maintain your streak by solving problems daily and watch your skills grow."})]})]})]})}),D.jsx("div",{className:"py-16 bg-gray-50",children:D.jsxs("div",{className:"container mx-auto px-4 text-center",children:[D.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Ready to start coding?"}),D.jsx("p",{className:"text-xl text-gray-600 mb-8 max-w-2xl mx-auto",children:"Join today and start improving your coding skills one challenge at a time."}),D.jsx(uo,{size:"lg",onClick:()=>e("/login"),children:"Sign In"})]})}),D.jsx("footer",{className:"py-8 bg-gray-900 text-white mt-auto",children:D.jsxs("div",{className:"container mx-auto px-4 text-center",children:[D.jsx("div",{className:"flex justify-center mb-4",children:D.jsx(hs,{className:"h-6 w-6 text-white opacity-80"})}),D.jsxs("p",{className:"text-gray-400 text-sm",children:[" ",new Date().getFullYear()," CodeForge. All rights reserved."]})]})})]})},Da=I.forwardRef(({className:n,...e},t)=>D.jsx("div",{ref:t,className:Pn("rounded-lg border bg-card text-card-foreground shadow-sm",n),...e}));Da.displayName="Card";const zl=I.forwardRef(({className:n,...e},t)=>D.jsx("div",{ref:t,className:Pn("flex flex-col space-y-1.5 p-6",n),...e}));zl.displayName="CardHeader";const $l=I.forwardRef(({className:n,...e},t)=>D.jsx("h3",{ref:t,className:Pn("text-2xl font-semibold leading-none tracking-tight",n),...e}));$l.displayName="CardTitle";const FS=I.forwardRef(({className:n,...e},t)=>D.jsx("p",{ref:t,className:Pn("text-sm text-muted-foreground",n),...e}));FS.displayName="CardDescription";const Ma=I.forwardRef(({className:n,...e},t)=>D.jsx("div",{ref:t,className:Pn("p-6 pt-0",n),...e}));Ma.displayName="CardContent";const QS=I.forwardRef(({className:n,...e},t)=>D.jsx("div",{ref:t,className:Pn("flex items-center p-6 pt-0",n),...e}));QS.displayName="CardFooter";const eu=I.forwardRef(({className:n,type:e,...t},r)=>D.jsx("input",{type:e,className:Pn("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:r,...t}));eu.displayName="Input";var uW="Label",q2=I.forwardRef((n,e)=>D.jsx(Cn.label,{...n,ref:e,onMouseDown:t=>{var i;t.target.closest("button, input, select, textarea")||((i=n.onMouseDown)==null||i.call(n,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));q2.displayName=uW;var W2=q2;const hW=Ax("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),tu=I.forwardRef(({className:n,...e},t)=>D.jsx(W2,{ref:t,className:Pn(hW(),n),...e}));tu.displayName=W2.displayName;const fW=()=>{const[n,e]=I.useState(""),[t,r]=I.useState(""),[i,s]=I.useState(""),{login:o}=Hu(),l=za(),[u,h]=I.useState(!1),d=async m=>{m.preventDefault(),s(""),h(!0);try{await o(n,t),l("/challenge")}catch(y){s(y.message||"Failed to log in.")}h(!1)};return D.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50 px-4",children:D.jsxs("div",{className:"w-full max-w-md",children:[D.jsxs("div",{className:"text-center mb-8",children:[D.jsx("div",{className:"flex justify-center mb-2",children:D.jsx(hs,{className:"h-12 w-12 text-primary"})}),D.jsx("h1",{className:"text-3xl font-bold",children:"CodeForge"}),D.jsx("p",{className:"text-gray-600 mt-1",children:"One coding challenge every day"})]}),D.jsxs(Da,{children:[D.jsxs(zl,{children:[D.jsx($l,{children:"Sign In"}),D.jsx(FS,{children:"Enter your credentials to access your account"})]}),D.jsxs("form",{onSubmit:d,children:[D.jsxs(Ma,{className:"space-y-4",children:[i&&D.jsx("div",{className:"text-red-500 text-sm",children:i}),D.jsxs("div",{className:"space-y-2",children:[D.jsx(tu,{htmlFor:"email",children:"Email"}),D.jsx(eu,{id:"email",type:"email",placeholder:"you@example.com",value:n,onChange:m=>e(m.target.value),required:!0})]}),D.jsxs("div",{className:"space-y-2",children:[D.jsx(tu,{htmlFor:"password",children:"Password"}),D.jsx(eu,{id:"password",type:"password",placeholder:"",value:t,onChange:m=>r(m.target.value),required:!0})]})]}),D.jsx(QS,{children:D.jsx(uo,{type:"submit",className:"w-full",disabled:u,children:u?"Signing in...":"Sign In"})})]})]}),D.jsx("div",{className:"text-center mt-6 text-sm text-gray-600",children:D.jsxs("p",{children:["Don't have an account? ",D.jsx(ef,{to:"/register",className:"text-primary font-semibold",children:"Register"})]})})]})})},dW=async()=>{const n=await rW(B9(ud,"challenges")),e=[];return n.forEach(t=>{e.push({id:t.id,...t.data()})}),e},pW=async()=>{const n=await dW();if(n.length===0)return null;const t=new Date().getDate()%n.length;return n[t]},mW=async(n,e)=>{const t=Ey(ud,"users",n),r=await j2(t);if(!r.exists())return console.warn("User not found in Firestore"),"unsolved";const i=r.data(),s=(i==null?void 0:i.progress)||[],o=new Date().toISOString().split("T")[0],l=s.find(u=>u.date===o);return l?l.status:"unsolved"},H2=()=>{const{isAuthenticated:n,logout:e}=Hu(),t=ju();return n?D.jsx("nav",{className:"bg-white border-b border-gray-200 px-4 py-2.5 fixed w-full top-0 left-0 z-50",children:D.jsxs("div",{className:"flex flex-wrap justify-between items-center",children:[D.jsx("div",{className:"flex items-center",children:D.jsxs(ef,{to:"/",className:"flex items-center",children:[D.jsx(hs,{className:"h-6 w-6 text-primary mr-2"}),D.jsx("span",{className:"self-center text-xl font-semibold whitespace-nowrap",children:"CodeForge"})]})}),D.jsxs("div",{className:"flex items-center gap-4",children:[D.jsxs(ef,{to:"/challenge",className:`flex items-center px-3 py-2 rounded-md ${t.pathname==="/challenge"?"text-white bg-primary":"text-gray-700 hover:bg-gray-100"}`,children:[D.jsx(hs,{className:"h-5 w-5 mr-1"}),D.jsx("span",{children:"Challenge"})]}),D.jsxs(ef,{to:"/dashboard",className:`flex items-center px-3 py-2 rounded-md ${t.pathname==="/dashboard"?"text-white bg-primary":"text-gray-700 hover:bg-gray-100"}`,children:[D.jsx(CF,{className:"h-5 w-5 mr-1"}),D.jsx("span",{children:"Dashboard"})]}),D.jsxs(uo,{variant:"ghost",size:"sm",onClick:e,className:"text-gray-700 hover:bg-gray-100",children:[D.jsx(IF,{className:"h-4 w-4 mr-1"}),"Logout"]})]})]})}):null};function _O(){return _O=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_O.apply(null,arguments)}function gW(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}let EO=[],G2=[];(()=>{let n="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,t=0;e<n.length;e++)(e%2?G2:EO).push(t=t+n[e])})();function yW(n){if(n<768)return!1;for(let e=0,t=EO.length;;){let r=e+t>>1;if(n<EO[r])t=r;else if(n>=G2[r])e=r+1;else return!0;if(e==t)return!1}}function tk(n){return n>=127462&&n<=127487}const nk=8205;function vW(n,e,t=!0,r=!0){return(t?X2:wW)(n,e,r)}function X2(n,e,t){if(e==n.length)return e;e&&K2(n.charCodeAt(e))&&Y2(n.charCodeAt(e-1))&&e--;let r=zv(n,e);for(e+=rk(r);e<n.length;){let i=zv(n,e);if(r==nk||i==nk||t&&yW(i))e+=rk(i),r=i;else if(tk(i)){let s=0,o=e-2;for(;o>=0&&tk(zv(n,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function wW(n,e,t){for(;e>0;){let r=X2(n,e-2,t);if(r<e)return r;e--}return 0}function zv(n,e){let t=n.charCodeAt(e);if(!Y2(t)||e+1==n.length)return t;let r=n.charCodeAt(e+1);return K2(r)?(t-55296<<10)+(r-56320)+65536:t}function K2(n){return n>=56320&&n<57344}function Y2(n){return n>=55296&&n<56320}function rk(n){return n<65536?1:2}class it{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,r){[e,t]=Cu(this,e,t);let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(t,this.length,i,1),ss.from(i,this.length-(t-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=Cu(this,e,t);let r=[];return this.decompose(e,t,r,0),ss.from(r,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new af(this),s=new af(e);for(let o=t,l=t;;){if(i.next(o),s.next(o),o=0,i.lineBreak!=s.lineBreak||i.done!=s.done||i.value!=s.value)return!1;if(l+=i.value.length,i.done||l>=r)return!0}}iter(e=1){return new af(this,e)}iterRange(e,t=this.length){return new J2(this,e,t)}iterLines(e,t){let r;if(e==null)r=this.iter();else{t==null&&(t=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new Z2(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?it.empty:e.length<=32?new Qt(e):ss.from(Qt.split(e,[]))}}class Qt extends it{constructor(e,t=OW(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,r,i){for(let s=0;;s++){let o=this.text[s],l=i+o.length;if((t?r:l)>=e)return new xW(i,l,r,o);i=l+1,r++}}decompose(e,t,r,i){let s=e<=0&&t>=this.length?this:new Qt(ik(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(i&1){let o=r.pop(),l=Mm(s.text,o.text.slice(),0,s.length);if(l.length<=32)r.push(new Qt(l,o.length+s.length));else{let u=l.length>>1;r.push(new Qt(l.slice(0,u)),new Qt(l.slice(u)))}}else r.push(s)}replace(e,t,r){if(!(r instanceof Qt))return super.replace(e,t,r);[e,t]=Cu(this,e,t);let i=Mm(this.text,Mm(r.text,ik(this.text,0,e)),t),s=this.length+r.length-(t-e);return i.length<=32?new Qt(i,s):ss.from(Qt.split(i,[]),s)}sliceString(e,t=this.length,r=`
`){[e,t]=Cu(this,e,t);let i="";for(let s=0,o=0;s<=t&&o<this.text.length;o++){let l=this.text[o],u=s+l.length;s>e&&o&&(i+=r),e<u&&t>s&&(i+=l.slice(Math.max(0,e-s),t-s)),s=u+1}return i}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let r=[],i=-1;for(let s of e)r.push(s),i+=s.length+1,r.length==32&&(t.push(new Qt(r,i)),r=[],i=-1);return i>-1&&t.push(new Qt(r,i)),t}}class ss extends it{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,t,r,i){for(let s=0;;s++){let o=this.children[s],l=i+o.length,u=r+o.lines-1;if((t?u:l)>=e)return o.lineInner(e,t,r,i);i=l+1,r=u+1}}decompose(e,t,r,i){for(let s=0,o=0;o<=t&&s<this.children.length;s++){let l=this.children[s],u=o+l.length;if(e<=u&&t>=o){let h=i&((o<=e?1:0)|(u>=t?2:0));o>=e&&u<=t&&!h?r.push(l):l.decompose(e-o,t-o,r,h)}o=u+1}}replace(e,t,r){if([e,t]=Cu(this,e,t),r.lines<this.lines)for(let i=0,s=0;i<this.children.length;i++){let o=this.children[i],l=s+o.length;if(e>=s&&t<=l){let u=o.replace(e-s,t-s,r),h=this.lines-o.lines+u.lines;if(u.lines<h>>4&&u.lines>h>>6){let d=this.children.slice();return d[i]=u,new ss(d,this.length-(t-e)+r.length)}return super.replace(s,l,u)}s=l+1}return super.replace(e,t,r)}sliceString(e,t=this.length,r=`
`){[e,t]=Cu(this,e,t);let i="";for(let s=0,o=0;s<this.children.length&&o<=t;s++){let l=this.children[s],u=o+l.length;o>e&&s&&(i+=r),e<u&&t>o&&(i+=l.sliceString(e-o,t-o,r)),o=u+1}return i}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof ss))return 0;let r=0,[i,s,o,l]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=t,s+=t){if(i==o||s==l)return r;let u=this.children[i],h=e.children[s];if(u!=h)return r+u.scanIdentical(h,t);r+=u.length+1}}static from(e,t=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let v of e)r+=v.lines;if(r<32){let v=[];for(let S of e)S.flatten(v);return new Qt(v,t)}let i=Math.max(32,r>>5),s=i<<1,o=i>>1,l=[],u=0,h=-1,d=[];function m(v){let S;if(v.lines>s&&v instanceof ss)for(let b of v.children)m(b);else v.lines>o&&(u>o||!u)?(y(),l.push(v)):v instanceof Qt&&u&&(S=d[d.length-1])instanceof Qt&&v.lines+S.lines<=32?(u+=v.lines,h+=v.length+1,d[d.length-1]=new Qt(S.text.concat(v.text),S.length+1+v.length)):(u+v.lines>i&&y(),u+=v.lines,h+=v.length+1,d.push(v))}function y(){u!=0&&(l.push(d.length==1?d[0]:ss.from(d,h)),h=-1,u=d.length=0)}for(let v of e)m(v);return y(),l.length==1?l[0]:new ss(l,t)}}it.empty=new Qt([""],0);function OW(n){let e=-1;for(let t of n)e+=t.length+1;return e}function Mm(n,e,t=0,r=1e9){for(let i=0,s=0,o=!0;s<n.length&&i<=r;s++){let l=n[s],u=i+l.length;u>=t&&(u>r&&(l=l.slice(0,r-i)),i<t&&(l=l.slice(t-i)),o?(e[e.length-1]+=l,o=!1):e.push(l)),i=u+1}return e}function ik(n,e,t){return Mm(n,[""],e,t)}class af{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Qt?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],s=this.offsets[r],o=s>>1,l=i instanceof Qt?i.text.length:i.children.length;if(o==(t>0?l:0)){if(r==0)return this.done=!0,this.value="",this;t>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(t>0?0:1)){if(this.offsets[r]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof Qt){let u=i.text[o+(t<0?-1:0)];if(this.offsets[r]+=t,u.length>Math.max(0,e))return this.value=e==0?u:t>0?u.slice(e):u.slice(0,u.length-e),this;e-=u.length}else{let u=i.children[o+(t<0?-1:0)];e>u.length?(e-=u.length,this.offsets[r]+=t):(t<0&&this.offsets[r]--,this.nodes.push(u),this.offsets.push(t>0?1:(u instanceof Qt?u.text.length:u.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class J2{constructor(e,t,r){this.value="",this.done=!1,this.cursor=new af(e,t>r?-1:1),this.pos=t>r?e.length:0,this.from=Math.min(t,r),this.to=Math.max(t,r)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let r=t<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*t,this.value=i.length<=r?i:t<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class Z2{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:r,value:i}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(it.prototype[Symbol.iterator]=function(){return this.iter()},af.prototype[Symbol.iterator]=J2.prototype[Symbol.iterator]=Z2.prototype[Symbol.iterator]=function(){return this});class xW{constructor(e,t,r,i){this.from=e,this.to=t,this.number=r,this.text=i}get length(){return this.to-this.from}}function Cu(n,e,t){return e=Math.max(0,Math.min(n.length,e)),[e,Math.max(e,Math.min(n.length,t))]}function En(n,e,t=!0,r=!0){return vW(n,e,t,r)}function SW(n){return n>=56320&&n<57344}function bW(n){return n>=55296&&n<56320}function mr(n,e){let t=n.charCodeAt(e);if(!bW(t)||e+1==n.length)return t;let r=n.charCodeAt(e+1);return SW(r)?(t-55296<<10)+(r-56320)+65536:t}function jS(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode((n>>10)+55296,(n&1023)+56320))}function os(n){return n<65536?1:2}const kO=/\r\n?|\n/;var _n=function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n}(_n||(_n={}));class vs{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t+1];e+=r<0?this.sections[t]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,r=0,i=0;t<this.sections.length;){let s=this.sections[t++],o=this.sections[t++];o<0?(e(r,i,s),i+=s):i+=o,r+=s}}iterChangedRanges(e,t=!1){CO(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let r=this.sections[t++],i=this.sections[t++];i<0?e.push(r,i):e.push(i,r)}return new vs(e)}composeDesc(e){return this.empty?e:e.empty?this:eN(this,e)}mapDesc(e,t=!1){return e.empty?this:PO(this,e,t)}mapPos(e,t=-1,r=_n.Simple){let i=0,s=0;for(let o=0;o<this.sections.length;){let l=this.sections[o++],u=this.sections[o++],h=i+l;if(u<0){if(h>e)return s+(e-i);s+=l}else{if(r!=_n.Simple&&h>=e&&(r==_n.TrackDel&&i<e&&h>e||r==_n.TrackBefore&&i<e||r==_n.TrackAfter&&h>e))return null;if(h>e||h==e&&t<0&&!l)return e==i||t<0?s:s+u;s+=u}i=h}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return s}touchesRange(e,t=e){for(let r=0,i=0;r<this.sections.length&&i<=t;){let s=this.sections[r++],o=this.sections[r++],l=i+s;if(o>=0&&i<=t&&l>=e)return i<e&&l>t?"cover":!0;i=l}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let r=this.sections[t++],i=this.sections[t++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new vs(e)}static create(e){return new vs(e)}}class Jt extends vs{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return CO(this,(t,r,i,s,o)=>e=e.replace(i,i+(r-t),o),!1),e}mapDesc(e,t=!1){return PO(this,e,t,!0)}invert(e){let t=this.sections.slice(),r=[];for(let i=0,s=0;i<t.length;i+=2){let o=t[i],l=t[i+1];if(l>=0){t[i]=l,t[i+1]=o;let u=i>>1;for(;r.length<u;)r.push(it.empty);r.push(o?e.slice(s,s+o):it.empty)}s+=o}return new Jt(t,r)}compose(e){return this.empty?e:e.empty?this:eN(this,e,!0)}map(e,t=!1){return e.empty?this:PO(this,e,t,!0)}iterChanges(e,t=!1){CO(this,e,t)}get desc(){return vs.create(this.sections)}filter(e){let t=[],r=[],i=[],s=new Pf(this);e:for(let o=0,l=0;;){let u=o==e.length?1e9:e[o++];for(;l<u||l==u&&s.len==0;){if(s.done)break e;let d=Math.min(s.len,u-l);Qn(i,d,-1);let m=s.ins==-1?-1:s.off==0?s.ins:0;Qn(t,d,m),m>0&&da(r,t,s.text),s.forward(d),l+=d}let h=e[o++];for(;l<h;){if(s.done)break e;let d=Math.min(s.len,h-l);Qn(t,d,-1),Qn(i,d,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(d),l+=d}}return{changes:new Jt(t,r),filtered:vs.create(i)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t],i=this.sections[t+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,r){let i=[],s=[],o=0,l=null;function u(d=!1){if(!d&&!i.length)return;o<t&&Qn(i,t-o,-1);let m=new Jt(i,s);l=l?l.compose(m.map(l)):m,i=[],s=[],o=0}function h(d){if(Array.isArray(d))for(let m of d)h(m);else if(d instanceof Jt){if(d.length!=t)throw new RangeError(`Mismatched change set length (got ${d.length}, expected ${t})`);u(),l=l?l.compose(d.map(l)):d}else{let{from:m,to:y=m,insert:v}=d;if(m>y||m<0||y>t)throw new RangeError(`Invalid change range ${m} to ${y} (in doc of length ${t})`);let S=v?typeof v=="string"?it.of(v.split(r||kO)):v:it.empty,b=S.length;if(m==y&&b==0)return;m<o&&u(),m>o&&Qn(i,m-o,-1),Qn(i,y-m,b),da(s,i,S),o=y}}return h(e),u(!l),l}static empty(e){return new Jt(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],r=[];for(let i=0;i<e.length;i++){let s=e[i];if(typeof s=="number")t.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,l)=>l&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)t.push(s[0],0);else{for(;r.length<i;)r.push(it.empty);r[i]=it.of(s.slice(1)),t.push(s[0],r[i].length)}}}return new Jt(t,r)}static createSet(e,t){return new Jt(e,t)}}function Qn(n,e,t,r=!1){if(e==0&&t<=0)return;let i=n.length-2;i>=0&&t<=0&&t==n[i+1]?n[i]+=e:i>=0&&e==0&&n[i]==0?n[i+1]+=t:r?(n[i]+=e,n[i+1]+=t):n.push(e,t)}function da(n,e,t){if(t.length==0)return;let r=e.length-2>>1;if(r<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<r;)n.push(it.empty);n.push(t)}}function CO(n,e,t){let r=n.inserted;for(let i=0,s=0,o=0;o<n.sections.length;){let l=n.sections[o++],u=n.sections[o++];if(u<0)i+=l,s+=l;else{let h=i,d=s,m=it.empty;for(;h+=l,d+=u,u&&r&&(m=m.append(r[o-2>>1])),!(t||o==n.sections.length||n.sections[o+1]<0);)l=n.sections[o++],u=n.sections[o++];e(i,h,s,d,m),i=h,s=d}}}function PO(n,e,t,r=!1){let i=[],s=r?[]:null,o=new Pf(n),l=new Pf(e);for(let u=-1;;){if(o.done&&l.len||l.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&l.ins==-1){let h=Math.min(o.len,l.len);Qn(i,h,-1),o.forward(h),l.forward(h)}else if(l.ins>=0&&(o.ins<0||u==o.i||o.off==0&&(l.len<o.len||l.len==o.len&&!t))){let h=l.len;for(Qn(i,l.ins,-1);h;){let d=Math.min(o.len,h);o.ins>=0&&u<o.i&&o.len<=d&&(Qn(i,0,o.ins),s&&da(s,i,o.text),u=o.i),o.forward(d),h-=d}l.next()}else if(o.ins>=0){let h=0,d=o.len;for(;d;)if(l.ins==-1){let m=Math.min(d,l.len);h+=m,d-=m,l.forward(m)}else if(l.ins==0&&l.len<d)d-=l.len,l.next();else break;Qn(i,h,u<o.i?o.ins:0),s&&u<o.i&&da(s,i,o.text),u=o.i,o.forward(o.len-d)}else{if(o.done&&l.done)return s?Jt.createSet(i,s):vs.create(i);throw new Error("Mismatched change set lengths")}}}function eN(n,e,t=!1){let r=[],i=t?[]:null,s=new Pf(n),o=new Pf(e);for(let l=!1;;){if(s.done&&o.done)return i?Jt.createSet(r,i):vs.create(r);if(s.ins==0)Qn(r,s.len,0,l),s.next();else if(o.len==0&&!o.done)Qn(r,0,o.ins,l),i&&da(i,r,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let u=Math.min(s.len2,o.len),h=r.length;if(s.ins==-1){let d=o.ins==-1?-1:o.off?0:o.ins;Qn(r,u,d,l),i&&d&&da(i,r,o.text)}else o.ins==-1?(Qn(r,s.off?0:s.len,u,l),i&&da(i,r,s.textBit(u))):(Qn(r,s.off?0:s.len,o.off?0:o.ins,l),i&&!o.off&&da(i,r,o.text));l=(s.ins>u||o.ins>=0&&o.len>u)&&(l||r.length>h),s.forward2(u),o.forward(u)}}}}class Pf{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?it.empty:e[t]}textBit(e){let{inserted:t}=this.set,r=this.i-2>>1;return r>=t.length&&!e?it.empty:t[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Tl{constructor(e,t,r){this.from=e,this.to=t,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,t):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new Tl(r,i,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return ie.range(e,t);let r=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return ie.range(this.anchor,r)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return ie.range(e.anchor,e.head)}static create(e,t,r){return new Tl(e,t,r)}}class ie{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:ie.create(this.ranges.map(r=>r.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new ie([this.main],0)}addRange(e,t=!0){return ie.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let r=this.ranges.slice();return r[t]=e,ie.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new ie(e.ranges.map(t=>Tl.fromJSON(t)),e.main)}static single(e,t=e){return new ie([ie.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let s=e[i];if(s.empty?s.from<=r:s.from<r)return ie.normalized(e.slice(),t);r=s.to}return new ie(e,t)}static cursor(e,t=0,r,i){return Tl.create(e,e,(t==0?0:t<0?8:16)|(r==null?7:Math.min(6,r))|(i??16777215)<<6)}static range(e,t,r,i){let s=(r??16777215)<<6|(i==null?7:Math.min(6,i));return t<e?Tl.create(t,e,48|s):Tl.create(e,t,(t>e?8:0)|s)}static normalized(e,t=0){let r=e[t];e.sort((i,s)=>i.from-s.from),t=e.indexOf(r);for(let i=1;i<e.length;i++){let s=e[i],o=e[i-1];if(s.empty?s.from<=o.to:s.from<o.to){let l=o.from,u=Math.max(s.to,o.to);i<=t&&t--,e.splice(--i,2,s.anchor>s.head?ie.range(u,l):ie.range(l,u))}}return new ie(e,t)}}function tN(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let zS=0;class Se{constructor(e,t,r,i,s){this.combine=e,this.compareInput=t,this.compare=r,this.isStatic=i,this.id=zS++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new Se(e.combine||(t=>t),e.compareInput||((t,r)=>t===r),e.compare||(e.combine?(t,r)=>t===r:$S),!!e.static,e.enables)}of(e){return new Lm([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Lm(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Lm(e,this,2,t)}from(e,t){return t||(t=r=>r),this.compute([e],r=>t(r.field(e)))}}function $S(n,e){return n==e||n.length==e.length&&n.every((t,r)=>t===e[r])}class Lm{constructor(e,t,r,i){this.dependencies=e,this.facet=t,this.type=r,this.value=i,this.id=zS++}dynamicSlot(e){var t;let r=this.value,i=this.facet.compareInput,s=this.id,o=e[s]>>1,l=this.type==2,u=!1,h=!1,d=[];for(let m of this.dependencies)m=="doc"?u=!0:m=="selection"?h=!0:(((t=e[m.id])!==null&&t!==void 0?t:1)&1)==0&&d.push(e[m.id]);return{create(m){return m.values[o]=r(m),1},update(m,y){if(u&&y.docChanged||h&&(y.docChanged||y.selection)||AO(m,d)){let v=r(m);if(l?!sk(v,m.values[o],i):!i(v,m.values[o]))return m.values[o]=v,1}return 0},reconfigure:(m,y)=>{let v,S=y.config.address[s];if(S!=null){let b=Tg(y,S);if(this.dependencies.every(T=>T instanceof Se?y.facet(T)===m.facet(T):T instanceof pn?y.field(T,!1)==m.field(T,!1):!0)||(l?sk(v=r(m),b,i):i(v=r(m),b)))return m.values[o]=b,0}else v=r(m);return m.values[o]=v,1}}}}function sk(n,e,t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!t(n[r],e[r]))return!1;return!0}function AO(n,e){let t=!1;for(let r of e)lf(n,r)&1&&(t=!0);return t}function TW(n,e,t){let r=t.map(u=>n[u.id]),i=t.map(u=>u.type),s=r.filter(u=>!(u&1)),o=n[e.id]>>1;function l(u){let h=[];for(let d=0;d<r.length;d++){let m=Tg(u,r[d]);if(i[d]==2)for(let y of m)h.push(y);else h.push(m)}return e.combine(h)}return{create(u){for(let h of r)lf(u,h);return u.values[o]=l(u),1},update(u,h){if(!AO(u,s))return 0;let d=l(u);return e.compare(d,u.values[o])?0:(u.values[o]=d,1)},reconfigure(u,h){let d=AO(u,r),m=h.config.facets[e.id],y=h.facet(e);if(m&&!d&&$S(t,m))return u.values[o]=y,0;let v=l(u);return e.compare(v,y)?(u.values[o]=y,0):(u.values[o]=v,1)}}}const Yp=Se.define({static:!0});class pn{constructor(e,t,r,i,s){this.id=e,this.createF=t,this.updateF=r,this.compareF=i,this.spec=s,this.provides=void 0}static define(e){let t=new pn(zS++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(Yp).find(r=>r.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:r=>(r.values[t]=this.create(r),1),update:(r,i)=>{let s=r.values[t],o=this.updateF(s,i);return this.compareF(s,o)?0:(r.values[t]=o,1)},reconfigure:(r,i)=>{let s=r.facet(Yp),o=i.facet(Yp),l;return(l=s.find(u=>u.field==this))&&l!=o.find(u=>u.field==this)?(r.values[t]=l.create(r),1):i.config.address[this.id]!=null?(r.values[t]=i.field(this),0):(r.values[t]=this.create(r),1)}}}init(e){return[this,Yp.of({field:this,create:e})]}get extension(){return this}}const xl={lowest:4,low:3,default:2,high:1,highest:0};function Lh(n){return e=>new nN(e,n)}const qa={highest:Lh(xl.highest),high:Lh(xl.high),default:Lh(xl.default),low:Lh(xl.low),lowest:Lh(xl.lowest)};class nN{constructor(e,t){this.inner=e,this.prec=t}}class Ry{of(e){return new RO(this,e)}reconfigure(e){return Ry.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class RO{constructor(e,t){this.compartment=e,this.inner=t}}class bg{constructor(e,t,r,i,s,o){for(this.base=e,this.compartments=t,this.dynamicSlots=r,this.address=i,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,r){let i=[],s=Object.create(null),o=new Map;for(let y of _W(e,t,o))y instanceof pn?i.push(y):(s[y.facet.id]||(s[y.facet.id]=[])).push(y);let l=Object.create(null),u=[],h=[];for(let y of i)l[y.id]=h.length<<1,h.push(v=>y.slot(v));let d=r==null?void 0:r.config.facets;for(let y in s){let v=s[y],S=v[0].facet,b=d&&d[y]||[];if(v.every(T=>T.type==0))if(l[S.id]=u.length<<1|1,$S(b,v))u.push(r.facet(S));else{let T=S.combine(v.map(k=>k.value));u.push(r&&S.compare(T,r.facet(S))?r.facet(S):T)}else{for(let T of v)T.type==0?(l[T.id]=u.length<<1|1,u.push(T.value)):(l[T.id]=h.length<<1,h.push(k=>T.dynamicSlot(k)));l[S.id]=h.length<<1,h.push(T=>TW(T,S,v))}}let m=h.map(y=>y(l));return new bg(e,o,m,l,u,s)}}function _W(n,e,t){let r=[[],[],[],[],[]],i=new Map;function s(o,l){let u=i.get(o);if(u!=null){if(u<=l)return;let h=r[u].indexOf(o);h>-1&&r[u].splice(h,1),o instanceof RO&&t.delete(o.compartment)}if(i.set(o,l),Array.isArray(o))for(let h of o)s(h,l);else if(o instanceof RO){if(t.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let h=e.get(o.compartment)||o.inner;t.set(o.compartment,h),s(h,l)}else if(o instanceof nN)s(o.inner,o.prec);else if(o instanceof pn)r[l].push(o),o.provides&&s(o.provides,l);else if(o instanceof Lm)r[l].push(o),o.facet.extensions&&s(o.facet.extensions,xl.default);else{let h=o.extension;if(!h)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(h,l)}}return s(n,xl.default),r.reduce((o,l)=>o.concat(l))}function lf(n,e){if(e&1)return 2;let t=e>>1,r=n.status[t];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;n.status[t]=4;let i=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|i}function Tg(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const rN=Se.define(),IO=Se.define({combine:n=>n.some(e=>e),static:!0}),iN=Se.define({combine:n=>n.length?n[0]:void 0,static:!0}),sN=Se.define(),oN=Se.define(),aN=Se.define(),lN=Se.define({combine:n=>n.length?n[0]:!1});class Ts{constructor(e,t){this.type=e,this.value=t}static define(){return new EW}}class EW{of(e){return new Ts(this,e)}}class kW{constructor(e){this.map=e}of(e){return new $e(this,e)}}class $e{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new $e(this.type,t)}is(e){return this.type==e}static define(e={}){return new kW(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let r=[];for(let i of e){let s=i.map(t);s&&r.push(s)}return r}}$e.reconfigure=$e.define();$e.appendConfig=$e.define();class Wt{constructor(e,t,r,i,s,o){this.startState=e,this.changes=t,this.selection=r,this.effects=i,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,r&&tN(r,t.newLength),s.some(l=>l.type==Wt.time)||(this.annotations=s.concat(Wt.time.of(Date.now())))}static create(e,t,r,i,s,o){return new Wt(e,t,r,i,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Wt.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}Wt.time=Ts.define();Wt.userEvent=Ts.define();Wt.addToHistory=Ts.define();Wt.remote=Ts.define();function CW(n,e){let t=[];for(let r=0,i=0;;){let s,o;if(r<n.length&&(i==e.length||e[i]>=n[r]))s=n[r++],o=n[r++];else if(i<e.length)s=e[i++],o=e[i++];else return t;!t.length||t[t.length-1]<s?t.push(s,o):t[t.length-1]<o&&(t[t.length-1]=o)}}function cN(n,e,t){var r;let i,s,o;return t?(i=e.changes,s=Jt.empty(e.changes.length),o=n.changes.compose(e.changes)):(i=e.changes.map(n.changes),s=n.changes.mapDesc(e.changes,!0),o=n.changes.compose(i)),{changes:o,selection:e.selection?e.selection.map(s):(r=n.selection)===null||r===void 0?void 0:r.map(i),effects:$e.mapEffects(n.effects,i).concat($e.mapEffects(e.effects,s)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function NO(n,e,t){let r=e.selection,i=nu(e.annotations);return e.userEvent&&(i=i.concat(Wt.userEvent.of(e.userEvent))),{changes:e.changes instanceof Jt?e.changes:Jt.of(e.changes||[],t,n.facet(iN)),selection:r&&(r instanceof ie?r:ie.single(r.anchor,r.head)),effects:nu(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function uN(n,e,t){let r=NO(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(t=!1);let o=!!e[s].sequential;r=cN(r,NO(n,e[s],o?r.changes.newLength:n.doc.length),o)}let i=Wt.create(n,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return AW(t?PW(i):i)}function PW(n){let e=n.startState,t=!0;for(let i of e.facet(sN)){let s=i(n);if(s===!1){t=!1;break}Array.isArray(s)&&(t=t===!0?s:CW(t,s))}if(t!==!0){let i,s;if(t===!1)s=n.changes.invertedDesc,i=Jt.empty(e.doc.length);else{let o=n.changes.filter(t);i=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}n=Wt.create(e,i,n.selection&&n.selection.map(s),$e.mapEffects(n.effects,s),n.annotations,n.scrollIntoView)}let r=e.facet(oN);for(let i=r.length-1;i>=0;i--){let s=r[i](n);s instanceof Wt?n=s:Array.isArray(s)&&s.length==1&&s[0]instanceof Wt?n=s[0]:n=uN(e,nu(s),!1)}return n}function AW(n){let e=n.startState,t=e.facet(aN),r=n;for(let i=t.length-1;i>=0;i--){let s=t[i](n);s&&Object.keys(s).length&&(r=cN(r,NO(e,s,n.changes.newLength),!0))}return r==n?n:Wt.create(e,n.changes,n.selection,r.effects,r.annotations,r.scrollIntoView)}const RW=[];function nu(n){return n==null?RW:Array.isArray(n)?n:[n]}var At=function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n}(At||(At={}));const IW=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let DO;try{DO=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function NW(n){if(DO)return DO.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||IW.test(t)))return!0}return!1}function DW(n){return e=>{if(!/\S/.test(e))return At.Space;if(NW(e))return At.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return At.Word;return At.Other}}class tt{constructor(e,t,r,i,s,o){this.config=e,this.doc=t,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)lf(this,l<<1);this.computeSlot=null}field(e,t=!0){let r=this.config.address[e.id];if(r==null){if(t)throw new RangeError("Field is not present in this state");return}return lf(this,r),Tg(this,r)}update(...e){return uN(this,e,!0)}applyTransaction(e){let t=this.config,{base:r,compartments:i}=t;for(let l of e.effects)l.is(Ry.reconfigure)?(t&&(i=new Map,t.compartments.forEach((u,h)=>i.set(h,u)),t=null),i.set(l.value.compartment,l.value.extension)):l.is($e.reconfigure)?(t=null,r=l.value):l.is($e.appendConfig)&&(t=null,r=nu(r).concat(l.value));let s;t?s=e.startState.values.slice():(t=bg.resolve(r,i,this),s=new tt(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(u,h)=>h.reconfigure(u,this),null).values);let o=e.startState.facet(IO)?e.newSelection:e.newSelection.asSingle();new tt(t,e.newDoc,o,s,(l,u)=>u.update(l,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:ie.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,r=e(t.ranges[0]),i=this.changes(r.changes),s=[r.range],o=nu(r.effects);for(let l=1;l<t.ranges.length;l++){let u=e(t.ranges[l]),h=this.changes(u.changes),d=h.map(i);for(let y=0;y<l;y++)s[y]=s[y].map(d);let m=i.mapDesc(h,!0);s.push(u.range.map(m)),i=i.compose(d),o=$e.mapEffects(o,d).concat($e.mapEffects(nu(u.effects),m))}return{changes:i,selection:ie.create(s,t.mainIndex),effects:o}}changes(e=[]){return e instanceof Jt?e:Jt.of(e,this.doc.length,this.facet(tt.lineSeparator))}toText(e){return it.of(e.split(this.facet(tt.lineSeparator)||kO))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(lf(this,t),Tg(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof pn&&this.config.address[i.id]!=null&&(t[r]=i.spec.toJSON(this.field(e[r]),this))}return t}static fromJSON(e,t={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let s in r)if(Object.prototype.hasOwnProperty.call(e,s)){let o=r[s],l=e[s];i.push(o.init(u=>o.spec.fromJSON(l,u)))}}return tt.create({doc:e.doc,selection:ie.fromJSON(e.selection),extensions:t.extensions?i.concat([t.extensions]):i})}static create(e={}){let t=bg.resolve(e.extensions||[],new Map),r=e.doc instanceof it?e.doc:it.of((e.doc||"").split(t.staticFacet(tt.lineSeparator)||kO)),i=e.selection?e.selection instanceof ie?e.selection:ie.single(e.selection.anchor,e.selection.head):ie.single(0);return tN(i,r.length),t.staticFacet(IO)||(i=i.asSingle()),new tt(t,r,i,t.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(tt.tabSize)}get lineBreak(){return this.facet(tt.lineSeparator)||`
`}get readOnly(){return this.facet(lN)}phrase(e,...t){for(let r of this.facet(tt.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let s=+(i||1);return!s||s>t.length?r:t[s-1]})),e}languageDataAt(e,t,r=-1){let i=[];for(let s of this.facet(rN))for(let o of s(this,t,r))Object.prototype.hasOwnProperty.call(o,e)&&i.push(o[e]);return i}charCategorizer(e){return DW(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:r,length:i}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-r,l=e-r;for(;o>0;){let u=En(t,o,!1);if(s(t.slice(u,o))!=At.Word)break;o=u}for(;l<i;){let u=En(t,l);if(s(t.slice(l,u))!=At.Word)break;l=u}return o==l?null:ie.range(o+r,l+r)}}tt.allowMultipleSelections=IO;tt.tabSize=Se.define({combine:n=>n.length?n[0]:4});tt.lineSeparator=iN;tt.readOnly=lN;tt.phrases=Se.define({compare(n,e){let t=Object.keys(n),r=Object.keys(e);return t.length==r.length&&t.every(i=>n[i]==e[i])}});tt.languageData=rN;tt.changeFilter=sN;tt.transactionFilter=oN;tt.transactionExtender=aN;Ry.reconfigure=$e.define();function _s(n,e,t={}){let r={};for(let i of n)for(let s of Object.keys(i)){let o=i[s],l=r[s];if(l===void 0)r[s]=o;else if(!(l===o||o===void 0))if(Object.hasOwnProperty.call(t,s))r[s]=t[s](l,o);else throw new Error("Config merge conflict for field "+s)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}class Bl{eq(e){return this==e}range(e,t=e){return MO.create(e,t,this)}}Bl.prototype.startSide=Bl.prototype.endSide=0;Bl.prototype.point=!1;Bl.prototype.mapMode=_n.TrackDel;let MO=class hN{constructor(e,t,r){this.from=e,this.to=t,this.value=r}static create(e,t,r){return new hN(e,t,r)}};function LO(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class BS{constructor(e,t,r,i){this.from=e,this.to=t,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,t,r,i=0){let s=r?this.to:this.from;for(let o=i,l=s.length;;){if(o==l)return o;let u=o+l>>1,h=s[u]-e||(r?this.value[u].endSide:this.value[u].startSide)-t;if(u==o)return h>=0?o:l;h>=0?l=u:o=u+1}}between(e,t,r,i){for(let s=this.findIndex(t,-1e9,!0),o=this.findIndex(r,1e9,!1,s);s<o;s++)if(i(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,t){let r=[],i=[],s=[],o=-1,l=-1;for(let u=0;u<this.value.length;u++){let h=this.value[u],d=this.from[u]+e,m=this.to[u]+e,y,v;if(d==m){let S=t.mapPos(d,h.startSide,h.mapMode);if(S==null||(y=v=S,h.startSide!=h.endSide&&(v=t.mapPos(d,h.endSide),v<y)))continue}else if(y=t.mapPos(d,h.startSide),v=t.mapPos(m,h.endSide),y>v||y==v&&h.startSide>0&&h.endSide<=0)continue;(v-y||h.endSide-h.startSide)<0||(o<0&&(o=y),h.point&&(l=Math.max(l,v-y)),r.push(h),i.push(y-o),s.push(v-o))}return{mapped:r.length?new BS(i,s,r,l):null,pos:o}}}class ot{constructor(e,t,r,i){this.chunkPos=e,this.chunk=t,this.nextLayer=r,this.maxPoint=i}static create(e,t,r,i){return new ot(e,t,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:r=!1,filterFrom:i=0,filterTo:s=this.length}=e,o=e.filter;if(t.length==0&&!o)return this;if(r&&(t=t.slice().sort(LO)),this.isEmpty)return t.length?ot.of(t):this;let l=new fN(this,null,-1).goto(0),u=0,h=[],d=new go;for(;l.value||u<t.length;)if(u<t.length&&(l.from-t[u].from||l.startSide-t[u].value.startSide)>=0){let m=t[u++];d.addInner(m.from,m.to,m.value)||h.push(m)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(u==t.length||this.chunkEnd(l.chunkIndex)<t[u].from)&&(!o||i>this.chunkEnd(l.chunkIndex)||s<this.chunkPos[l.chunkIndex])&&d.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!o||i>l.to||s<l.from||o(l.from,l.to,l.value))&&(d.addInner(l.from,l.to,l.value)||h.push(MO.create(l.from,l.to,l.value))),l.next());return d.finishInner(this.nextLayer.isEmpty&&!h.length?ot.empty:this.nextLayer.update({add:h,filter:o,filterFrom:i,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],r=[],i=-1;for(let o=0;o<this.chunk.length;o++){let l=this.chunkPos[o],u=this.chunk[o],h=e.touchesRange(l,l+u.length);if(h===!1)i=Math.max(i,u.maxPoint),t.push(u),r.push(e.mapPos(l));else if(h===!0){let{mapped:d,pos:m}=u.map(l,e);d&&(i=Math.max(i,d.maxPoint),t.push(d),r.push(m))}}let s=this.nextLayer.map(e);return t.length==0?s:new ot(r,t,s||ot.empty,i)}between(e,t,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let s=this.chunkPos[i],o=this.chunk[i];if(t>=s&&e<=s+o.length&&o.between(s,e-s,t-s,r)===!1)return}this.nextLayer.between(e,t,r)}}iter(e=0){return Af.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return Af.from(e).goto(t)}static compare(e,t,r,i,s=-1){let o=e.filter(m=>m.maxPoint>0||!m.isEmpty&&m.maxPoint>=s),l=t.filter(m=>m.maxPoint>0||!m.isEmpty&&m.maxPoint>=s),u=ok(o,l,r),h=new Vh(o,u,s),d=new Vh(l,u,s);r.iterGaps((m,y,v)=>ak(h,m,d,y,v,i)),r.empty&&r.length==0&&ak(h,0,d,0,0,i)}static eq(e,t,r=0,i){i==null&&(i=999999999);let s=e.filter(d=>!d.isEmpty&&t.indexOf(d)<0),o=t.filter(d=>!d.isEmpty&&e.indexOf(d)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let l=ok(s,o),u=new Vh(s,l,0).goto(r),h=new Vh(o,l,0).goto(r);for(;;){if(u.to!=h.to||!VO(u.active,h.active)||u.point&&(!h.point||!u.point.eq(h.point)))return!1;if(u.to>i)return!0;u.next(),h.next()}}static spans(e,t,r,i,s=-1){let o=new Vh(e,null,s).goto(t),l=t,u=o.openStart;for(;;){let h=Math.min(o.to,r);if(o.point){let d=o.activeForPoint(o.to),m=o.pointFrom<t?d.length+1:o.point.startSide<0?d.length:Math.min(d.length,u);i.point(l,h,o.point,d,m,o.pointRank),u=Math.min(o.openEnd(h),d.length)}else h>l&&(i.span(l,h,o.active,u),u=o.openEnd(h));if(o.to>r)return u+(o.point&&o.to>r?1:0);l=o.to,o.next()}}static of(e,t=!1){let r=new go;for(let i of e instanceof MO?[e]:t?MW(e):e)r.add(i.from,i.to,i.value);return r.finish()}static join(e){if(!e.length)return ot.empty;let t=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let i=e[r];i!=ot.empty;i=i.nextLayer)t=new ot(i.chunkPos,i.chunk,t,Math.max(i.maxPoint,t.maxPoint));return t}}ot.empty=new ot([],[],null,-1);function MW(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let r=n[t];if(LO(e,r)>0)return n.slice().sort(LO);e=r}return n}ot.empty.nextLayer=ot.empty;class go{finishChunk(e){this.chunks.push(new BS(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,r){this.addInner(e,t,r)||(this.nextLayer||(this.nextLayer=new go)).add(e,t,r)}addInner(e,t,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=t,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let r=t.value.length-1;return this.last=t.value[r],this.lastFrom=t.from[r]+e,this.lastTo=t.to[r]+e,!0}finish(){return this.finishInner(ot.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=ot.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function ok(n,e,t){let r=new Map;for(let s of n)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&r.set(s.chunk[o],s.chunkPos[o]);let i=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let l=r.get(s.chunk[o]);l!=null&&(t?t.mapPos(l):l)==s.chunkPos[o]&&!(t!=null&&t.touchesRange(l,l+s.chunk[o].length))&&i.add(s.chunk[o])}return i}class fN{constructor(e,t,r,i=0){this.layer=e,this.skip=t,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],r=e+t.from[this.rangeIndex];if(this.from=r,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Af{constructor(e){this.heap=e}static from(e,t=null,r=-1){let i=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=r&&i.push(new fN(o,t,r,s));return i.length==1?i[0]:new Af(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let r of this.heap)r.goto(e,t);for(let r=this.heap.length>>1;r>=0;r--)$v(this.heap,r);return this.next(),this}forward(e,t){for(let r of this.heap)r.forward(e,t);for(let r=this.heap.length>>1;r>=0;r--)$v(this.heap,r);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),$v(this.heap,0)}}}function $v(n,e){for(let t=n[e];;){let r=(e<<1)+1;if(r>=n.length)break;let i=n[r];if(r+1<n.length&&i.compare(n[r+1])>=0&&(i=n[r+1],r++),t.compare(i)<0)break;n[r]=t,n[e]=i,e=r}}class Vh{constructor(e,t,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Af.from(e,t,r)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){Jp(this.active,e),Jp(this.activeTo,e),Jp(this.activeRank,e),this.minActive=lk(this.active,this.activeTo)}addActive(e){let t=0,{value:r,to:i,rank:s}=this.cursor;for(;t<this.activeRank.length&&(s-this.activeRank[t]||i-this.activeTo[t])>0;)t++;Zp(this.active,t,r),Zp(this.activeTo,t,i),Zp(this.activeRank,t,s),e&&Zp(e,t,this.cursor.from),this.minActive=lk(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&Jp(r,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(r),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&t.push(this.active[r]);return t.reverse()}openEnd(e){let t=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)t++;return t}}function ak(n,e,t,r,i,s){n.goto(e),t.goto(r);let o=r+i,l=r,u=r-e;for(;;){let h=n.to+u-t.to,d=h||n.endSide-t.endSide,m=d<0?n.to+u:t.to,y=Math.min(m,o);if(n.point||t.point?n.point&&t.point&&(n.point==t.point||n.point.eq(t.point))&&VO(n.activeForPoint(n.to),t.activeForPoint(t.to))||s.comparePoint(l,y,n.point,t.point):y>l&&!VO(n.active,t.active)&&s.compareRange(l,y,n.active,t.active),m>o)break;(h||n.openEnd!=t.openEnd)&&s.boundChange&&s.boundChange(m),l=m,d<=0&&n.next(),d>=0&&t.next()}}function VO(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!n[t].eq(e[t]))return!1;return!0}function Jp(n,e){for(let t=e,r=n.length-1;t<r;t++)n[t]=n[t+1];n.pop()}function Zp(n,e,t){for(let r=n.length-1;r>=e;r--)n[r+1]=n[r];n[e]=t}function lk(n,e){let t=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||n[i].endSide-n[t].endSide)<0&&(t=i,r=e[i]);return t}function Gu(n,e,t=n.length){let r=0;for(let i=0;i<t&&i<n.length;)n.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=En(n,i));return r}function FO(n,e,t,r){for(let i=0,s=0;;){if(s>=e)return i;if(i==n.length)break;s+=n.charCodeAt(i)==9?t-s%t:1,i=En(n,i)}return r===!0?-1:n.length}const QO="",ck=typeof Symbol>"u"?"__"+QO:Symbol.for(QO),jO=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),uk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class La{constructor(e,t){this.rules=[];let{finish:r}=t||{};function i(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,l,u,h){let d=[],m=/^@(\w+)\b/.exec(o[0]),y=m&&m[1]=="keyframes";if(m&&l==null)return u.push(o[0]+";");for(let v in l){let S=l[v];if(/&/.test(v))s(v.split(/,\s*/).map(b=>o.map(T=>b.replace(/&/,T))).reduce((b,T)=>b.concat(T)),S,u);else if(S&&typeof S=="object"){if(!m)throw new RangeError("The value of a property ("+v+") should be a primitive value.");s(i(v),S,d,y)}else S!=null&&d.push(v.replace(/_.*/,"").replace(/[A-Z]/g,b=>"-"+b.toLowerCase())+": "+S+";")}(d.length||y)&&u.push((r&&!m&&!h?o.map(r):o).join(", ")+" {"+d.join(" ")+"}")}for(let o in e)s(i(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=uk[ck]||1;return uk[ck]=e+1,QO+e.toString(36)}static mount(e,t,r){let i=e[jO],s=r&&r.nonce;i?s&&i.setNonce(s):i=new LW(e,s),i.mount(Array.isArray(t)?t:[t],e)}}let hk=new Map;class LW{constructor(e,t){let r=e.ownerDocument||e,i=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let s=hk.get(r);if(s)return e[jO]=s;this.sheet=new i.CSSStyleSheet,hk.set(r,this)}else this.styleTag=r.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[jO]=this}mount(e,t){let r=this.sheet,i=0,s=0;for(let o=0;o<e.length;o++){let l=e[o],u=this.modules.indexOf(l);if(u<s&&u>-1&&(this.modules.splice(u,1),s--,u=-1),u==-1){if(this.modules.splice(s++,0,l),r)for(let h=0;h<l.rules.length;h++)r.insertRule(l.rules[h],i++)}else{for(;s<u;)i+=this.modules[s++].rules.length;i+=l.rules.length,s++}}if(r)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let o="";for(let u=0;u<this.modules.length;u++)o+=this.modules[u].getRules()+`
`;this.styleTag.textContent=o;let l=t.head||t;this.styleTag.parentNode!=l&&l.insertBefore(this.styleTag,l.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var Va={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Rf={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},VW=typeof navigator<"u"&&/Mac/.test(navigator.platform),FW=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var bn=0;bn<10;bn++)Va[48+bn]=Va[96+bn]=String(bn);for(var bn=1;bn<=24;bn++)Va[bn+111]="F"+bn;for(var bn=65;bn<=90;bn++)Va[bn]=String.fromCharCode(bn+32),Rf[bn]=String.fromCharCode(bn);for(var Bv in Va)Rf.hasOwnProperty(Bv)||(Rf[Bv]=Va[Bv]);function QW(n){var e=VW&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||FW&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Rf:Va)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function If(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function zO(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function Vm(n,e){if(!e.anchorNode)return!1;try{return zO(n,e.anchorNode)}catch{return!1}}function Pu(n){return n.nodeType==3?ql(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function cf(n,e,t,r){return t?fk(n,e,t,r,-1)||fk(n,e,t,r,1):!1}function Ul(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function _g(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}function fk(n,e,t,r,i){for(;;){if(n==t&&e==r)return!0;if(e==(i<0?0:Ss(n))){if(n.nodeName=="DIV")return!1;let s=n.parentNode;if(!s||s.nodeType!=1)return!1;e=Ul(n)+(i<0?0:1),n=s}else if(n.nodeType==1){if(n=n.childNodes[e+(i<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=i<0?Ss(n):0}else return!1}}function Ss(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function hd(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function jW(n){let e=n.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function dN(n,e){let t=e.width/n.offsetWidth,r=e.height/n.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-n.offsetWidth)<1)&&(t=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-n.offsetHeight)<1)&&(r=1),{scaleX:t,scaleY:r}}function zW(n,e,t,r,i,s,o,l){let u=n.ownerDocument,h=u.defaultView||window;for(let d=n,m=!1;d&&!m;)if(d.nodeType==1){let y,v=d==u.body,S=1,b=1;if(v)y=jW(h);else{if(/^(fixed|sticky)$/.test(getComputedStyle(d).position)&&(m=!0),d.scrollHeight<=d.clientHeight&&d.scrollWidth<=d.clientWidth){d=d.assignedSlot||d.parentNode;continue}let M=d.getBoundingClientRect();({scaleX:S,scaleY:b}=dN(d,M)),y={left:M.left,right:M.left+d.clientWidth*S,top:M.top,bottom:M.top+d.clientHeight*b}}let T=0,k=0;if(i=="nearest")e.top<y.top?(k=e.top-(y.top+o),t>0&&e.bottom>y.bottom+k&&(k=e.bottom-y.bottom+o)):e.bottom>y.bottom&&(k=e.bottom-y.bottom+o,t<0&&e.top-k<y.top&&(k=e.top-(y.top+o)));else{let M=e.bottom-e.top,F=y.bottom-y.top;k=(i=="center"&&M<=F?e.top+M/2-F/2:i=="start"||i=="center"&&t<0?e.top-o:e.bottom-F+o)-y.top}if(r=="nearest"?e.left<y.left?(T=e.left-(y.left+s),t>0&&e.right>y.right+T&&(T=e.right-y.right+s)):e.right>y.right&&(T=e.right-y.right+s,t<0&&e.left<y.left+T&&(T=e.left-(y.left+s))):T=(r=="center"?e.left+(e.right-e.left)/2-(y.right-y.left)/2:r=="start"==l?e.left-s:e.right-(y.right-y.left)+s)-y.left,T||k)if(v)h.scrollBy(T,k);else{let M=0,F=0;if(k){let z=d.scrollTop;d.scrollTop+=k/b,F=(d.scrollTop-z)*b}if(T){let z=d.scrollLeft;d.scrollLeft+=T/S,M=(d.scrollLeft-z)*S}e={left:e.left-M,top:e.top-F,right:e.right-M,bottom:e.bottom-F},M&&Math.abs(M-T)<1&&(r="nearest"),F&&Math.abs(F-k)<1&&(i="nearest")}if(v)break;(e.top<y.top||e.bottom>y.bottom||e.left<y.left||e.right>y.right)&&(e={left:Math.max(e.left,y.left),right:Math.min(e.right,y.right),top:Math.max(e.top,y.top),bottom:Math.min(e.bottom,y.bottom)}),d=d.assignedSlot||d.parentNode}else if(d.nodeType==11)d=d.host;else break}function $W(n){let e=n.ownerDocument,t,r;for(let i=n.parentNode;i&&!(i==e.body||t&&r);)if(i.nodeType==1)!r&&i.scrollHeight>i.clientHeight&&(r=i),!t&&i.scrollWidth>i.clientWidth&&(t=i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;return{x:t,y:r}}class BW{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:r}=e;this.set(t,Math.min(e.anchorOffset,t?Ss(t):0),r,Math.min(e.focusOffset,r?Ss(r):0))}set(e,t,r,i){this.anchorNode=e,this.anchorOffset=t,this.focusNode=r,this.focusOffset=i}}let Vc=null;function pN(n){if(n.setActive)return n.setActive();if(Vc)return n.focus(Vc);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(Vc==null?{get preventScroll(){return Vc={preventScroll:!0},!0}}:void 0),!Vc){Vc=!1;for(let t=0;t<e.length;){let r=e[t++],i=e[t++],s=e[t++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=s&&(r.scrollLeft=s)}}}let dk;function ql(n,e,t=e){let r=dk||(dk=document.createRange());return r.setEnd(n,t),r.setStart(n,e),r}function ru(n,e,t,r){let i={key:e,code:e,keyCode:t,which:t,cancelable:!0};r&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=r);let s=new KeyboardEvent("keydown",i);s.synthetic=!0,n.dispatchEvent(s);let o=new KeyboardEvent("keyup",i);return o.synthetic=!0,n.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function UW(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function mN(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}function qW(n,e){let t=e.focusNode,r=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=r)return!1;for(r=Math.min(r,Ss(t));;)if(r){if(t.nodeType!=1)return!1;let i=t.childNodes[r-1];i.contentEditable=="false"?r--:(t=i,r=Ss(t))}else{if(t==n)return!0;r=Ul(t),t=t.parentNode}}function gN(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}function yN(n,e){for(let t=n,r=e;;){if(t.nodeType==3&&r>0)return{node:t,offset:r};if(t.nodeType==1&&r>0){if(t.contentEditable=="false")return null;t=t.childNodes[r-1],r=Ss(t)}else if(t.parentNode&&!_g(t))r=Ul(t),t=t.parentNode;else return null}}function vN(n,e){for(let t=n,r=e;;){if(t.nodeType==3&&r<t.nodeValue.length)return{node:t,offset:r};if(t.nodeType==1&&r<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[r],r=0}else if(t.parentNode&&!_g(t))r=Ul(t)+1,t=t.parentNode;else return null}}class zn{constructor(e,t,r=!0){this.node=e,this.offset=t,this.precise=r}static before(e,t){return new zn(e.parentNode,Ul(e),t)}static after(e,t){return new zn(e.parentNode,Ul(e)+1,t)}}const US=[];class yt{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let r of this.children){if(r==e)return t;t+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let r=this.dom,i=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=i?i.nextSibling:r.firstChild)){let l=yt.get(s);(!l||!l.parent&&l.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,t),o.flags&=-8}if(s=i?i.nextSibling:r.firstChild,t&&!t.written&&t.node==r&&s!=o.dom&&(t.written=!0),o.dom.parentNode==r)for(;s&&s!=o.dom;)s=pk(s);else r.insertBefore(o.dom,s);i=o.dom}for(s=i?i.nextSibling:r.firstChild,s&&t&&t.node==r&&(t.written=!0);s;)s=pk(s)}else if(this.flags&1)for(let r of this.children)r.flags&7&&(r.sync(e,t),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let r;if(e==this.dom)r=this.dom.childNodes[t];else{let i=Ss(e)==0?0:t==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;i==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?i=-1:i=1),e=s}i<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!yt.get(r);)r=r.nextSibling;if(!r)return this.length;for(let i=0,s=0;;i++){let o=this.children[i];if(o.dom==r)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,t,r=0){let i=-1,s=-1,o=-1,l=-1;for(let u=0,h=r,d=r;u<this.children.length;u++){let m=this.children[u],y=h+m.length;if(h<e&&y>t)return m.domBoundsAround(e,t,h);if(y>=e&&i==-1&&(i=u,s=h),h>t&&m.dom.parentNode==this.dom){o=u,l=d;break}d=y,h=y+m.breakAfter}return{from:s,to:l<0?r+this.length:l,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,r=US){this.markDirty();for(let i=e;i<t;i++){let s=this.children[i];s.parent==this&&r.indexOf(s)<0&&s.destroy()}r.length<250?this.children.splice(e,t-e,...r):this.children=[].concat(this.children.slice(0,e),r,this.children.slice(t));for(let i=0;i<r.length;i++)r[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new wN(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,r,i,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}yt.prototype.breakAfter=0;function pk(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class wN{constructor(e,t,r){this.children=e,this.pos=t,this.i=r,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function ON(n,e,t,r,i,s,o,l,u){let{children:h}=n,d=h.length?h[e]:null,m=s.length?s[s.length-1]:null,y=m?m.breakAfter:o;if(!(e==r&&d&&!o&&!y&&s.length<2&&d.merge(t,i,s.length?m:null,t==0,l,u))){if(r<h.length){let v=h[r];v&&(i<v.length||v.breakAfter&&(m!=null&&m.breakAfter))?(e==r&&(v=v.split(i),i=0),!y&&m&&v.merge(0,i,m,!0,0,u)?s[s.length-1]=v:((i||v.children.length&&!v.children[0].length)&&v.merge(0,i,null,!1,0,u),s.push(v))):v!=null&&v.breakAfter&&(m?m.breakAfter=1:o=1),r++}for(d&&(d.breakAfter=o,t>0&&(!o&&s.length&&d.merge(t,d.length,s[0],!1,l,0)?d.breakAfter=s.shift().breakAfter:(t<d.length||d.children.length&&d.children[d.children.length-1].length==0)&&d.merge(t,d.length,null,!1,l,0),e++));e<r&&s.length;)if(h[r-1].become(s[s.length-1]))r--,s.pop(),u=s.length?0:l;else if(h[e].become(s[0]))e++,s.shift(),l=s.length?0:u;else break;!s.length&&e&&r<h.length&&!h[e-1].breakAfter&&h[r].merge(0,0,h[e-1],!1,l,u)&&e--,(e<r||s.length)&&n.replaceChildren(e,r,s)}}function xN(n,e,t,r,i,s){let o=n.childCursor(),{i:l,off:u}=o.findPos(t,1),{i:h,off:d}=o.findPos(e,-1),m=e-t;for(let y of r)m+=y.length;n.length+=m,ON(n,h,d,l,u,r,0,i,s)}let gr=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},$O=typeof document<"u"?document:{documentElement:{style:{}}};const BO=/Edge\/(\d+)/.exec(gr.userAgent),SN=/MSIE \d/.test(gr.userAgent),UO=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(gr.userAgent),Iy=!!(SN||UO||BO),mk=!Iy&&/gecko\/(\d+)/i.test(gr.userAgent),Uv=!Iy&&/Chrome\/(\d+)/.exec(gr.userAgent),WW="webkitFontSmoothing"in $O.documentElement.style,bN=!Iy&&/Apple Computer/.test(gr.vendor),gk=bN&&(/Mobile\/\w+/.test(gr.userAgent)||gr.maxTouchPoints>2);var Te={mac:gk||/Mac/.test(gr.platform),windows:/Win/.test(gr.platform),linux:/Linux|X11/.test(gr.platform),ie:Iy,ie_version:SN?$O.documentMode||6:UO?+UO[1]:BO?+BO[1]:0,gecko:mk,gecko_version:mk?+(/Firefox\/(\d+)/.exec(gr.userAgent)||[0,0])[1]:0,chrome:!!Uv,chrome_version:Uv?+Uv[1]:0,ios:gk,android:/Android\b/.test(gr.userAgent),safari:bN,webkit_version:WW?+(/\bAppleWebKit\/(\d+)/.exec(gr.userAgent)||[0,0])[1]:0,tabSize:$O.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const HW=256;class Mi extends yt{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,r){return this.flags&8||r&&(!(r instanceof Mi)||this.length-(t-e)+r.length>HW||r.flags&8)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new Mi(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new zn(this.dom,e)}domBoundsAround(e,t,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return GW(this.dom,e,t)}}class yo extends yt{constructor(e,t=[],r=0){super(),this.mark=e,this.children=t,this.length=r;for(let i of t)i.setParent(this)}setAttrs(e){if(mN(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,r,i,s,o){return r&&(!(r instanceof yo&&r.mark.eq(this.mark))||e&&s<=0||t<this.length&&o<=0)?!1:(xN(this,e,t,r?r.children.slice():[],s-1,o-1),this.markDirty(),!0)}split(e){let t=[],r=0,i=-1,s=0;for(let l of this.children){let u=r+l.length;u>e&&t.push(r<e?l.split(e-r):l),i<0&&r>=e&&(i=s),r=u,s++}let o=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new yo(this.mark,t,o)}domAtPos(e){return TN(this,e)}coordsAt(e,t){return EN(this,e,t)}}function GW(n,e,t){let r=n.nodeValue.length;e>r&&(e=r);let i=e,s=e,o=0;e==0&&t<0||e==r&&t>=0?Te.chrome||Te.gecko||(e?(i--,o=1):s<r&&(s++,o=-1)):t<0?i--:s<r&&s++;let l=ql(n,i,s).getClientRects();if(!l.length)return null;let u=l[(o?o<0:t>=0)?0:l.length-1];return Te.safari&&!o&&u.width==0&&(u=Array.prototype.find.call(l,h=>h.width)||u),o?hd(u,o<0):u||null}class pa extends yt{static create(e,t,r){return new pa(e,t,r)}constructor(e,t,r){super(),this.widget=e,this.length=t,this.side=r,this.prevWidget=null}split(e){let t=pa.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,r,i,s,o){return r&&(!(r instanceof pa)||!this.widget.compare(r.widget)||e>0&&s<=0||t<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-t),!0)}become(e){return e instanceof pa&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return it.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,r=t&&t.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):it.empty}domAtPos(e){return(this.length?e==0:this.side>0)?zn.before(this.dom):zn.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let r=this.widget.coordsAt(this.dom,e,t);if(r)return r;let i=this.dom.getClientRects(),s=null;if(!i.length)return null;let o=this.side?this.side<0:e>0;for(let l=o?i.length-1:0;s=i[l],!(e>0?l==0:l==i.length-1||s.top<s.bottom);l+=o?-1:1);return hd(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Au extends yt{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Au&&e.side==this.side}split(){return new Au(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?zn.before(this.dom):zn.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return it.empty}get isHidden(){return!0}}Mi.prototype.children=pa.prototype.children=Au.prototype.children=US;function TN(n,e){let t=n.dom,{children:r}=n,i=0;for(let s=0;i<r.length;i++){let o=r[i],l=s+o.length;if(!(l==s&&o.getSide()<=0)){if(e>s&&e<l&&o.dom.parentNode==t)return o.domAtPos(e-s);if(e<=s)break;s=l}}for(let s=i;s>0;s--){let o=r[s-1];if(o.dom.parentNode==t)return o.domAtPos(o.length)}for(let s=i;s<r.length;s++){let o=r[s];if(o.dom.parentNode==t)return o.domAtPos(0)}return new zn(t,0)}function _N(n,e,t){let r,{children:i}=n;t>0&&e instanceof yo&&i.length&&(r=i[i.length-1])instanceof yo&&r.mark.eq(e.mark)?_N(r,e.children[0],t-1):(i.push(e),e.setParent(n)),n.length+=e.length}function EN(n,e,t){let r=null,i=-1,s=null,o=-1;function l(h,d){for(let m=0,y=0;m<h.children.length&&y<=d;m++){let v=h.children[m],S=y+v.length;S>=d&&(v.children.length?l(v,d-y):(!s||s.isHidden&&(t>0||KW(s,v)))&&(S>d||y==S&&v.getSide()>0)?(s=v,o=d-y):(y<d||y==S&&v.getSide()<0&&!v.isHidden)&&(r=v,i=d-y)),y=S}}l(n,e);let u=(t<0?r:s)||r||s;return u?u.coordsAt(Math.max(0,u==r?i:o),t):XW(n)}function XW(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=Pu(e);return t[t.length-1]||null}function KW(n,e){let t=n.coordsAt(0,1),r=e.coordsAt(0,1);return t&&r&&r.top<t.bottom}function qO(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}const yk=Object.create(null);function Eg(n,e,t){if(n==e)return!0;n||(n=yk),e||(e=yk);let r=Object.keys(n),i=Object.keys(e);if(r.length-(t&&r.indexOf(t)>-1?1:0)!=i.length-(t&&i.indexOf(t)>-1?1:0))return!1;for(let s of r)if(s!=t&&(i.indexOf(s)==-1||n[s]!==e[s]))return!1;return!0}function WO(n,e,t){let r=!1;if(e)for(let i in e)t&&i in t||(r=!0,i=="style"?n.style.cssText="":n.removeAttribute(i));if(t)for(let i in t)e&&e[i]==t[i]||(r=!0,i=="style"?n.style.cssText=t[i]:n.setAttribute(i,t[i]));return r}function YW(n){let e=Object.create(null);for(let t=0;t<n.attributes.length;t++){let r=n.attributes[t];e[r.name]=r.value}return e}class Es{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Zn=function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n}(Zn||(Zn={}));class Re extends Bl{constructor(e,t,r,i){super(),this.startSide=e,this.endSide=t,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new fd(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return t+=r&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new Fa(e,t,t,r,e.widget||null,!1)}static replace(e){let t=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:s,end:o}=kN(e,t);r=(s?t?-3e8:-1:5e8)-1,i=(o?t?2e8:1:-6e8)+1}return new Fa(e,r,i,t,e.widget||null,!0)}static line(e){return new dd(e)}static set(e,t=!1){return ot.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Re.none=ot.empty;class fd extends Re{constructor(e){let{start:t,end:r}=kN(e);super(t?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,r;return this==e||e instanceof fd&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((r=e.attrs)===null||r===void 0?void 0:r.class))&&Eg(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}fd.prototype.point=!1;class dd extends Re{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof dd&&this.spec.class==e.spec.class&&Eg(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}dd.prototype.mapMode=_n.TrackBefore;dd.prototype.point=!0;class Fa extends Re{constructor(e,t,r,i,s,o){super(t,r,s,e),this.block=i,this.isReplace=o,this.mapMode=i?t<=0?_n.TrackBefore:_n.TrackAfter:_n.TrackDel}get type(){return this.startSide!=this.endSide?Zn.WidgetRange:this.startSide<=0?Zn.WidgetBefore:Zn.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Fa&&JW(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}Fa.prototype.point=!0;function kN(n,e=!1){let{inclusiveStart:t,inclusiveEnd:r}=n;return t==null&&(t=n.inclusive),r==null&&(r=n.inclusive),{start:t??e,end:r??e}}function JW(n,e){return n==e||!!(n&&e&&n.compare(e))}function Fm(n,e,t,r=0){let i=t.length-1;i>=0&&t[i]+r>=n?t[i]=Math.max(t[i],e):t.push(n,e)}class qt extends yt{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,r,i,s,o){if(r){if(!(r instanceof qt))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),xN(this,e,t,r?r.children.slice():[],s,o),!0}split(e){let t=new qt;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i:r,off:i}=this.childPos(e);i&&(t.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let s=r;s<this.children.length;s++)t.append(this.children[s],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Eg(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){_N(this,e,t)}addLineDeco(e){let t=e.spec.attributes,r=e.spec.class;t&&(this.attrs=qO(t,this.attrs||{})),r&&(this.attrs=qO({class:r},this.attrs||{}))}domAtPos(e){return TN(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var r;this.dom?this.flags&4&&(mN(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(WO(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let i=this.dom.lastChild;for(;i&&yt.get(i)instanceof yo;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((r=yt.get(i))===null||r===void 0?void 0:r.isEditable)==!1&&(!Te.ios||!this.children.some(s=>s instanceof Mi))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let r of this.children){if(!(r instanceof Mi)||/[^ -~]/.test(r.text))return null;let i=Pu(r.dom);if(i.length!=1)return null;e+=i[0].width,t=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let r=EN(this,e,t);if(!this.children.length&&r&&this.parent){let{heightOracle:i}=this.parent.view.viewState,s=r.bottom-r.top;if(Math.abs(s-i.lineHeight)<2&&i.textHeight<s){let o=(s-i.textHeight)/2;return{top:r.top+o,bottom:r.bottom-o,left:r.left,right:r.left}}}return r}become(e){return e instanceof qt&&this.children.length==0&&e.children.length==0&&Eg(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let r=0,i=0;r<e.children.length;r++){let s=e.children[r],o=i+s.length;if(o>=t){if(s instanceof qt)return s;if(o>t)break}i=o+s.breakAfter}return null}}class ao extends yt{constructor(e,t,r){super(),this.widget=e,this.length=t,this.deco=r,this.breakAfter=0,this.prevWidget=null}merge(e,t,r,i,s,o){return r&&(!(r instanceof ao)||!this.widget.compare(r.widget)||e>0&&s<=0||t<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?zn.before(this.dom):zn.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let r=new ao(this.widget,t,this.deco);return r.breakAfter=this.breakAfter,r}get children(){return US}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):it.empty}domBoundsAround(){return null}become(e){return e instanceof ao&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){let r=this.widget.coordsAt(this.dom,e,t);return r||(this.widget instanceof HO?null:hd(this.dom.getBoundingClientRect(),this.length?e==0:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:r}=this.deco;return t==r?!1:e<0?t<0:r>0}}class HO extends Es{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class uf{constructor(e,t,r,i){this.doc=e,this.pos=t,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof ao&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new qt),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(em(new Au(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof ao)&&this.getLine()}buildText(e,t,r){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:l}=this.cursor.next(this.skip);if(this.skip=0,l)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-r)),this.getLine().append(em(new Mi(this.text.slice(this.textOff,this.textOff+i)),t),r),this.atCursorPos=!0,this.textOff+=i,e-=i,r=0}}span(e,t,r,i){this.buildText(t-e,r,i),this.pos=t,this.openStart<0&&(this.openStart=i)}point(e,t,r,i,s,o){if(this.disallowBlockEffectsFor[o]&&r instanceof Fa){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=t-e;if(r instanceof Fa)if(r.block)r.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new ao(r.widget||Ru.block,l,r));else{let u=pa.create(r.widget||Ru.inline,l,l?0:r.startSide),h=this.atCursorPos&&!u.isEditable&&s<=i.length&&(e<t||r.startSide>0),d=!u.isEditable&&(e<t||s>i.length||r.startSide<=0),m=this.getLine();this.pendingBuffer==2&&!h&&!u.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),h&&(m.append(em(new Au(1),i),s),s=i.length+Math.max(0,s-i.length)),m.append(em(u,i),s),this.atCursorPos=d,this.pendingBuffer=d?e<t||s>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=s)}static build(e,t,r,i,s){let o=new uf(e,t,r,s);return o.openEnd=ot.spans(i,t,r,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function em(n,e){for(let t of e)n=new yo(t,[n],n.length);return n}class Ru extends Es{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Ru.inline=new Ru("span");Ru.block=new Ru("div");var Et=function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n}(Et||(Et={}));const Wl=Et.LTR,qS=Et.RTL;function CN(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const ZW=CN("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),e6=CN("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),GO=Object.create(null),Yi=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);GO[e]=t,GO[t]=-e}function PN(n){return n<=247?ZW[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?e6[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8204?256:64336<=n&&n<=65023?4:1}const t6=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class ma{get dir(){return this.level%2?qS:Wl}constructor(e,t,r){this.from=e,this.to=t,this.level=r}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,r,i){let s=-1;for(let o=0;o<e.length;o++){let l=e[o];if(l.from<=t&&l.to>=t){if(l.level==r)return o;(s<0||(i!=0?i<0?l.from<t:l.to>t:e[s].level>l.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}function AN(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++){let r=n[t],i=e[t];if(r.from!=i.from||r.to!=i.to||r.direction!=i.direction||!AN(r.inner,i.inner))return!1}return!0}const gt=[];function n6(n,e,t,r,i){for(let s=0;s<=r.length;s++){let o=s?r[s-1].to:e,l=s<r.length?r[s].from:t,u=s?256:i;for(let h=o,d=u,m=u;h<l;h++){let y=PN(n.charCodeAt(h));y==512?y=d:y==8&&m==4&&(y=16),gt[h]=y==4?2:y,y&7&&(m=y),d=y}for(let h=o,d=u,m=u;h<l;h++){let y=gt[h];if(y==128)h<l-1&&d==gt[h+1]&&d&24?y=gt[h]=d:gt[h]=256;else if(y==64){let v=h+1;for(;v<l&&gt[v]==64;)v++;let S=h&&d==8||v<t&&gt[v]==8?m==1?1:8:256;for(let b=h;b<v;b++)gt[b]=S;h=v-1}else y==8&&m==1&&(gt[h]=1);d=y,y&7&&(m=y)}}}function r6(n,e,t,r,i){let s=i==1?2:1;for(let o=0,l=0,u=0;o<=r.length;o++){let h=o?r[o-1].to:e,d=o<r.length?r[o].from:t;for(let m=h,y,v,S;m<d;m++)if(v=GO[y=n.charCodeAt(m)])if(v<0){for(let b=l-3;b>=0;b-=3)if(Yi[b+1]==-v){let T=Yi[b+2],k=T&2?i:T&4?T&1?s:i:0;k&&(gt[m]=gt[Yi[b]]=k),l=b;break}}else{if(Yi.length==189)break;Yi[l++]=m,Yi[l++]=y,Yi[l++]=u}else if((S=gt[m])==2||S==1){let b=S==i;u=b?0:1;for(let T=l-3;T>=0;T-=3){let k=Yi[T+2];if(k&2)break;if(b)Yi[T+2]|=2;else{if(k&4)break;Yi[T+2]|=4}}}}}function i6(n,e,t,r){for(let i=0,s=r;i<=t.length;i++){let o=i?t[i-1].to:n,l=i<t.length?t[i].from:e;for(let u=o;u<l;){let h=gt[u];if(h==256){let d=u+1;for(;;)if(d==l){if(i==t.length)break;d=t[i++].to,l=i<t.length?t[i].from:e}else if(gt[d]==256)d++;else break;let m=s==1,y=(d<e?gt[d]:r)==1,v=m==y?m?1:2:r;for(let S=d,b=i,T=b?t[b-1].to:n;S>u;)S==T&&(S=t[--b].from,T=b?t[b-1].to:n),gt[--S]=v;u=d}else s=h,u++}}}function XO(n,e,t,r,i,s,o){let l=r%2?2:1;if(r%2==i%2)for(let u=e,h=0;u<t;){let d=!0,m=!1;if(h==s.length||u<s[h].from){let b=gt[u];b!=l&&(d=!1,m=b==16)}let y=!d&&l==1?[]:null,v=d?r:r+1,S=u;e:for(;;)if(h<s.length&&S==s[h].from){if(m)break e;let b=s[h];if(!d)for(let T=b.to,k=h+1;;){if(T==t)break e;if(k<s.length&&s[k].from==T)T=s[k++].to;else{if(gt[T]==l)break e;break}}if(h++,y)y.push(b);else{b.from>u&&o.push(new ma(u,b.from,v));let T=b.direction==Wl!=!(v%2);KO(n,T?r+1:r,i,b.inner,b.from,b.to,o),u=b.to}S=b.to}else{if(S==t||(d?gt[S]!=l:gt[S]==l))break;S++}y?XO(n,u,S,r+1,i,y,o):u<S&&o.push(new ma(u,S,v)),u=S}else for(let u=t,h=s.length;u>e;){let d=!0,m=!1;if(!h||u>s[h-1].to){let b=gt[u-1];b!=l&&(d=!1,m=b==16)}let y=!d&&l==1?[]:null,v=d?r:r+1,S=u;e:for(;;)if(h&&S==s[h-1].to){if(m)break e;let b=s[--h];if(!d)for(let T=b.from,k=h;;){if(T==e)break e;if(k&&s[k-1].to==T)T=s[--k].from;else{if(gt[T-1]==l)break e;break}}if(y)y.push(b);else{b.to<u&&o.push(new ma(b.to,u,v));let T=b.direction==Wl!=!(v%2);KO(n,T?r+1:r,i,b.inner,b.from,b.to,o),u=b.from}S=b.from}else{if(S==e||(d?gt[S-1]!=l:gt[S-1]==l))break;S--}y?XO(n,S,u,r+1,i,y,o):S<u&&o.push(new ma(S,u,v)),u=S}}function KO(n,e,t,r,i,s,o){let l=e%2?2:1;n6(n,i,s,r,l),r6(n,i,s,r,l),i6(i,s,r,l),XO(n,i,s,e,t,r,o)}function s6(n,e,t){if(!n)return[new ma(0,0,e==qS?1:0)];if(e==Wl&&!t.length&&!t6.test(n))return RN(n.length);if(t.length)for(;n.length>gt.length;)gt[gt.length]=256;let r=[],i=e==Wl?0:1;return KO(n,i,i,t,0,n.length,r),r}function RN(n){return[new ma(0,n,0)]}let IN="";function o6(n,e,t,r,i){var s;let o=r.head-n.from,l=ma.find(e,o,(s=r.bidiLevel)!==null&&s!==void 0?s:-1,r.assoc),u=e[l],h=u.side(i,t);if(o==h){let y=l+=i?1:-1;if(y<0||y>=e.length)return null;u=e[l=y],o=u.side(!i,t),h=u.side(i,t)}let d=En(n.text,o,u.forward(i,t));(d<u.from||d>u.to)&&(d=h),IN=n.text.slice(Math.min(o,d),Math.max(o,d));let m=l==(i?e.length-1:0)?null:e[l+(i?1:-1)];return m&&d==h&&m.level+(i?0:1)<u.level?ie.cursor(m.side(!i,t)+n.from,m.forward(i,t)?1:-1,m.level):ie.cursor(d+n.from,u.forward(i,t)?-1:1,u.level)}function a6(n,e,t){for(let r=e;r<t;r++){let i=PN(n.charCodeAt(r));if(i==1)return Wl;if(i==2||i==4)return qS}return Wl}const NN=Se.define(),DN=Se.define(),MN=Se.define(),LN=Se.define(),YO=Se.define(),VN=Se.define(),FN=Se.define(),WS=Se.define(),HS=Se.define(),QN=Se.define({combine:n=>n.some(e=>e)}),jN=Se.define({combine:n=>n.some(e=>e)}),zN=Se.define();class iu{constructor(e,t="nearest",r="nearest",i=5,s=5,o=!1){this.range=e,this.y=t,this.x=r,this.yMargin=i,this.xMargin=s,this.isSnapshot=o}map(e){return e.empty?this:new iu(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new iu(ie.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const tm=$e.define({map:(n,e)=>n.map(e)}),$N=$e.define();function wr(n,e,t){let r=n.facet(LN);r.length?r[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const no=Se.define({combine:n=>n.length?n[0]:!0});let l6=0;const Gh=Se.define();class zt{constructor(e,t,r,i,s){this.id=e,this.create=t,this.domEventHandlers=r,this.domEventObservers=i,this.extension=s(this)}static define(e,t){const{eventHandlers:r,eventObservers:i,provide:s,decorations:o}=t||{};return new zt(l6++,e,r,i,l=>{let u=[Gh.of(l)];return o&&u.push(Nf.of(h=>{let d=h.plugin(l);return d?o(d):Re.none})),s&&u.push(s(l)),u})}static fromClass(e,t){return zt.define(r=>new e(r),t)}}class qv{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(r){if(wr(t.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){wr(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(r){wr(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const BN=Se.define(),GS=Se.define(),Nf=Se.define(),UN=Se.define(),XS=Se.define(),qN=Se.define();function vk(n,e){let t=n.state.facet(qN);if(!t.length)return t;let r=t.map(s=>s instanceof Function?s(n):s),i=[];return ot.spans(r,e.from,e.to,{point(){},span(s,o,l,u){let h=s-e.from,d=o-e.from,m=i;for(let y=l.length-1;y>=0;y--,u--){let v=l[y].spec.bidiIsolate,S;if(v==null&&(v=a6(e.text,h,d)),u>0&&m.length&&(S=m[m.length-1]).to==h&&S.direction==v)S.to=d,m=S.inner;else{let b={from:h,to:d,direction:v,inner:[]};m.push(b),m=b.inner}}}}),i}const WN=Se.define();function KS(n){let e=0,t=0,r=0,i=0;for(let s of n.state.facet(WN)){let o=s(n);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(t=Math.max(t,o.right)),o.top!=null&&(r=Math.max(r,o.top)),o.bottom!=null&&(i=Math.max(i,o.bottom)))}return{left:e,right:t,top:r,bottom:i}}const Xh=Se.define();class ai{constructor(e,t,r,i){this.fromA=e,this.toA=t,this.fromB=r,this.toB=i}join(e){return new ai(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,r=this;for(;t>0;t--){let i=e[t-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(t-1,1)}}return e.splice(t,0,r),e}static extendWithRanges(e,t){if(t.length==0)return e;let r=[];for(let i=0,s=0,o=0,l=0;;i++){let u=i==e.length?null:e[i],h=o-l,d=u?u.fromB:1e9;for(;s<t.length&&t[s]<d;){let m=t[s],y=t[s+1],v=Math.max(l,m),S=Math.min(d,y);if(v<=S&&new ai(v+h,S+h,v,S).addToSet(r),y>d)break;s+=2}if(!u)return r;new ai(u.fromA,u.toA,u.fromB,u.toB).addToSet(r),o=u.toA,l=u.toB}}}class kg{constructor(e,t,r){this.view=e,this.state=t,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=Jt.empty(this.startState.doc.length);for(let s of r)this.changes=this.changes.compose(s.changes);let i=[];this.changes.iterChangedRanges((s,o,l,u)=>i.push(new ai(s,o,l,u))),this.changedRanges=i}static create(e,t,r){return new kg(e,t,r)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class wk extends yt{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Re.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new qt],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new ai(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:h,toA:d})=>d<this.minWidthFrom||h>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?i=this.domChanged.newSel.head:!m6(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let s=i>-1?u6(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:h,to:d}=this.hasComposition;r=new ai(h,d,e.changes.mapPos(h,-1),e.changes.mapPos(d,1)).addToSet(r.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(Te.ie||Te.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,l=this.updateDeco(),u=d6(o,l,e.changes);return r=ai.extendWithRanges(r,u),!(this.flags&7)&&r.length==0?!1:(this.updateInner(r,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,r);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=Te.chrome||Te.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||i.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof ao&&o.widget instanceof HO&&s.push(o.dom);i.updateGaps(s)}updateChildren(e,t,r){let i=r?r.range.addToSet(e.slice()):e,s=this.childCursor(t);for(let o=i.length-1;;o--){let l=o>=0?i[o]:null;if(!l)break;let{fromA:u,toA:h,fromB:d,toB:m}=l,y,v,S,b;if(r&&r.range.fromB<m&&r.range.toB>d){let z=uf.build(this.view.state.doc,d,r.range.fromB,this.decorations,this.dynamicDecorationMap),$=uf.build(this.view.state.doc,r.range.toB,m,this.decorations,this.dynamicDecorationMap);v=z.breakAtStart,S=z.openStart,b=$.openEnd;let U=this.compositionView(r);$.breakAtStart?U.breakAfter=1:$.content.length&&U.merge(U.length,U.length,$.content[0],!1,$.openStart,0)&&(U.breakAfter=$.content[0].breakAfter,$.content.shift()),z.content.length&&U.merge(0,0,z.content[z.content.length-1],!0,0,z.openEnd)&&z.content.pop(),y=z.content.concat(U).concat($.content)}else({content:y,breakAtStart:v,openStart:S,openEnd:b}=uf.build(this.view.state.doc,d,m,this.decorations,this.dynamicDecorationMap));let{i:T,off:k}=s.findPos(h,1),{i:M,off:F}=s.findPos(u,-1);ON(this,M,F,T,k,y,v,S,b)}r&&this.fixCompositionDOM(r)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let r of t.effects)r.is($N)&&(this.editContextFormatting=r.value)}compositionView(e){let t=new Mi(e.text.nodeValue);t.flags|=8;for(let{deco:i}of e.marks)t=new yo(i,[t],t.length);let r=new qt;return r.append(t,0),r}fixCompositionDOM(e){let t=(s,o)=>{o.flags|=8|(o.children.some(u=>u.flags&7)?1:0),this.markedForComposition.add(o);let l=yt.get(s);l&&l!=o&&(l.dom=null),o.setDOM(s)},r=this.childPos(e.range.fromB,1),i=this.children[r.i];t(e.line,i);for(let s=e.marks.length-1;s>=-1;s--)r=i.childPos(r.off,1),i=i.children[r.i],t(s>=0?e.marks[s].node:e.text,i)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,i=r==this.dom,s=!i&&!(this.view.state.facet(no)||this.dom.tabIndex>-1)&&Vm(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(i||t||s))return;let o=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,u=this.moveToLine(this.domAtPos(l.anchor)),h=l.empty?u:this.moveToLine(this.domAtPos(l.head));if(Te.gecko&&l.empty&&!this.hasComposition&&c6(u)){let m=document.createTextNode("");this.view.observer.ignore(()=>u.node.insertBefore(m,u.node.childNodes[u.offset]||null)),u=h=new zn(m,0),o=!0}let d=this.view.observer.selectionRange;(o||!d.focusNode||(!cf(u.node,u.offset,d.anchorNode,d.anchorOffset)||!cf(h.node,h.offset,d.focusNode,d.focusOffset))&&!this.suppressWidgetCursorChange(d,l))&&(this.view.observer.ignore(()=>{Te.android&&Te.chrome&&this.dom.contains(d.focusNode)&&p6(d.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let m=If(this.view.root);if(m)if(l.empty){if(Te.gecko){let y=h6(u.node,u.offset);if(y&&y!=3){let v=(y==1?yN:vN)(u.node,u.offset);v&&(u=new zn(v.node,v.offset))}}m.collapse(u.node,u.offset),l.bidiLevel!=null&&m.caretBidiLevel!==void 0&&(m.caretBidiLevel=l.bidiLevel)}else if(m.extend){m.collapse(u.node,u.offset);try{m.extend(h.node,h.offset)}catch{}}else{let y=document.createRange();l.anchor>l.head&&([u,h]=[h,u]),y.setEnd(h.node,h.offset),y.setStart(u.node,u.offset),m.removeAllRanges(),m.addRange(y)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(u,h)),this.impreciseAnchor=u.precise?null:new zn(d.anchorNode,d.anchorOffset),this.impreciseHead=h.precise?null:new zn(d.focusNode,d.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&cf(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,r=If(e.root),{anchorNode:i,anchorOffset:s}=e.observer.selectionRange;if(!r||!t.empty||!t.assoc||!r.modify)return;let o=qt.find(this,t.head);if(!o)return;let l=o.posAtStart;if(t.head==l||t.head==l+o.length)return;let u=this.coordsAt(t.head,-1),h=this.coordsAt(t.head,1);if(!u||!h||u.bottom>h.top)return;let d=this.domAtPos(t.head+t.assoc);r.collapse(d.node,d.offset),r.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let m=e.observer.selectionRange;e.docView.posFromDOM(m.anchorNode,m.anchorOffset)!=t.from&&r.collapse(i,s)}moveToLine(e){let t=this.dom,r;if(e.node!=t)return e;for(let i=e.offset;!r&&i<t.childNodes.length;i++){let s=yt.get(t.childNodes[i]);s instanceof qt&&(r=s.domAtPos(0))}for(let i=e.offset-1;!r&&i>=0;i--){let s=yt.get(t.childNodes[i]);s instanceof qt&&(r=s.domAtPos(s.length))}return r?new zn(r.node,r.offset,!0):e}nearest(e){for(let t=e;t;){let r=yt.get(t);if(r&&r.rootView==this)return r;t=t.parentNode}return null}posFromDOM(e,t){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,t)+r.posAtStart}domAtPos(e){let{i:t,off:r}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let i=this.children[t];if(r<i.length||i instanceof qt)break;t++,r=0}return this.children[t].domAtPos(r)}coordsAt(e,t){let r=null,i=0;for(let s=this.length,o=this.children.length-1;o>=0;o--){let l=this.children[o],u=s-l.breakAfter,h=u-l.length;if(u<e)break;if(h<=e&&(h<e||l.covers(-1))&&(u>e||l.covers(1))&&(!r||l instanceof qt&&!(r instanceof qt&&t>=0)))r=l,i=h;else if(r&&h==e&&u==e&&l instanceof ao&&Math.abs(t)<2){if(l.deco.startSide<0)break;o&&(r=null)}s=h}return r?r.coordsAt(e-i,t):null}coordsForChar(e){let{i:t,off:r}=this.childPos(e,1),i=this.children[t];if(!(i instanceof qt))return null;for(;i.children.length;){let{i:l,off:u}=i.childPos(r,1);for(;;l++){if(l==i.children.length)return null;if((i=i.children[l]).length)break}r=u}if(!(i instanceof Mi))return null;let s=En(i.text,r);if(s==r)return null;let o=ql(i.dom,r,s).getClientRects();for(let l=0;l<o.length;l++){let u=o[l];if(l==o.length-1||u.top<u.bottom&&u.left<u.right)return u}return null}measureVisibleLineHeights(e){let t=[],{from:r,to:i}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,u=this.view.textDirection==Et.LTR;for(let h=0,d=0;d<this.children.length;d++){let m=this.children[d],y=h+m.length;if(y>i)break;if(h>=r){let v=m.dom.getBoundingClientRect();if(t.push(v.height),o){let S=m.dom.lastChild,b=S?Pu(S):[];if(b.length){let T=b[b.length-1],k=u?T.right-v.left:v.right-T.left;k>l&&(l=k,this.minWidth=s,this.minWidthFrom=h,this.minWidthTo=y)}}}h=y+m.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?Et.RTL:Et.LTR}measureTextSize(){for(let s of this.children)if(s instanceof qt){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),t,r,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=Pu(e.firstChild)[0];t=e.getBoundingClientRect().height,r=s?s.width/27:7,i=s?s.height:t,e.remove()}),{lineHeight:t,charWidth:r,textHeight:i}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new wN(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let r=0,i=0;;i++){let s=i==t.viewports.length?null:t.viewports[i],o=s?s.from-1:this.length;if(o>r){let l=(t.lineBlockAt(o).bottom-t.lineBlockAt(r).top)/this.view.scaleY;e.push(Re.replace({widget:new HO(l),block:!0,inclusive:!0,isBlockGap:!0}).range(r,o))}if(!s)break;r=s.to+1}return Re.set(e)}updateDeco(){let e=1,t=this.view.state.facet(Nf).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),r=!1,i=this.view.state.facet(UN).map((s,o)=>{let l=typeof s=="function";return l&&(r=!0),l?s(this.view):s});for(i.length&&(this.dynamicDecorationMap[e++]=r,t.push(ot.join(i))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let h=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=h.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let h of this.view.state.facet(zN))try{if(h(this.view,e.range,e))return!0}catch(d){wr(this.view.state,d,"scroll handler")}let{range:t}=e,r=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),i;if(!r)return;!t.empty&&(i=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let s=KS(this.view),o={left:r.left-s.left,top:r.top-s.top,right:r.right+s.right,bottom:r.bottom+s.bottom},{offsetWidth:l,offsetHeight:u}=this.view.scrollDOM;zW(this.view.scrollDOM,o,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,l),-l),Math.max(Math.min(e.yMargin,u),-u),this.view.textDirection==Et.LTR)}}function c6(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}function HN(n,e){let t=n.observer.selectionRange;if(!t.focusNode)return null;let r=yN(t.focusNode,t.focusOffset),i=vN(t.focusNode,t.focusOffset),s=r||i;if(i&&r&&i.node!=r.node){let l=yt.get(i.node);if(!l||l instanceof Mi&&l.text!=i.node.nodeValue)s=i;else if(n.docView.lastCompositionAfterCursor){let u=yt.get(r.node);!u||u instanceof Mi&&u.text!=r.node.nodeValue||(s=i)}}if(n.docView.lastCompositionAfterCursor=s!=r,!s)return null;let o=e-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}function u6(n,e,t){let r=HN(n,t);if(!r)return null;let{node:i,from:s,to:o}=r,l=i.nodeValue;if(/[\n\r]/.test(l)||n.state.doc.sliceString(r.from,r.to)!=l)return null;let u=e.invertedDesc,h=new ai(u.mapPos(s),u.mapPos(o),s,o),d=[];for(let m=i.parentNode;;m=m.parentNode){let y=yt.get(m);if(y instanceof yo)d.push({node:m,deco:y.mark});else{if(y instanceof qt||m.nodeName=="DIV"&&m.parentNode==n.contentDOM)return{range:h,text:i,marks:d,line:m};if(m!=n.contentDOM)d.push({node:m,deco:new fd({inclusive:!0,attributes:YW(m),tagName:m.tagName.toLowerCase()})});else return null}}}function h6(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}let f6=class{constructor(){this.changes=[]}compareRange(e,t){Fm(e,t,this.changes)}comparePoint(e,t){Fm(e,t,this.changes)}boundChange(e){Fm(e,e,this.changes)}};function d6(n,e,t){let r=new f6;return ot.compare(n,e,t,r),r.changes}function p6(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function m6(n,e){let t=!1;return e&&n.iterChangedRanges((r,i)=>{r<e.to&&i>e.from&&(t=!0)}),t}function g6(n,e,t=1){let r=n.charCategorizer(e),i=n.doc.lineAt(e),s=e-i.from;if(i.length==0)return ie.cursor(e);s==0?t=1:s==i.length&&(t=-1);let o=s,l=s;t<0?o=En(i.text,s,!1):l=En(i.text,s);let u=r(i.text.slice(o,l));for(;o>0;){let h=En(i.text,o,!1);if(r(i.text.slice(h,o))!=u)break;o=h}for(;l<i.length;){let h=En(i.text,l);if(r(i.text.slice(l,h))!=u)break;l=h}return ie.range(o+i.from,l+i.from)}function y6(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}function v6(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}function Wv(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}function Ok(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}function xk(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}function JO(n,e,t){let r,i,s,o,l=!1,u,h,d,m;for(let S=n.firstChild;S;S=S.nextSibling){let b=Pu(S);for(let T=0;T<b.length;T++){let k=b[T];i&&Wv(i,k)&&(k=Ok(xk(k,i.bottom),i.top));let M=y6(e,k),F=v6(t,k);if(M==0&&F==0)return S.nodeType==3?Sk(S,e,t):JO(S,e,t);if(!r||o>F||o==F&&s>M){r=S,i=k,s=M,o=F;let z=F?t<k.top?-1:1:M?e<k.left?-1:1:0;l=!z||(z>0?T<b.length-1:T>0)}M==0?t>k.bottom&&(!d||d.bottom<k.bottom)?(u=S,d=k):t<k.top&&(!m||m.top>k.top)&&(h=S,m=k):d&&Wv(d,k)?d=xk(d,k.bottom):m&&Wv(m,k)&&(m=Ok(m,k.top))}}if(d&&d.bottom>=t?(r=u,i=d):m&&m.top<=t&&(r=h,i=m),!r)return{node:n,offset:0};let y=Math.max(i.left,Math.min(i.right,e));if(r.nodeType==3)return Sk(r,y,t);if(l&&r.contentEditable!="false")return JO(r,y,t);let v=Array.prototype.indexOf.call(n.childNodes,r)+(e>=(i.left+i.right)/2?1:0);return{node:n,offset:v}}function Sk(n,e,t){let r=n.nodeValue.length,i=-1,s=1e9,o=0;for(let l=0;l<r;l++){let u=ql(n,l,l+1).getClientRects();for(let h=0;h<u.length;h++){let d=u[h];if(d.top==d.bottom)continue;o||(o=e-d.left);let m=(d.top>t?d.top-t:t-d.bottom)-1;if(d.left-1<=e&&d.right+1>=e&&m<s){let y=e>=(d.left+d.right)/2,v=y;if((Te.chrome||Te.gecko)&&ql(n,l).getBoundingClientRect().left==d.right&&(v=!y),m<=0)return{node:n,offset:l+(v?1:0)};i=l+(v?1:0),s=m}}}return{node:n,offset:i>-1?i:o>0?n.nodeValue.length:0}}function GN(n,e,t,r=-1){var i,s;let o=n.contentDOM.getBoundingClientRect(),l=o.top+n.viewState.paddingTop,u,{docHeight:h}=n.viewState,{x:d,y:m}=e,y=m-l;if(y<0)return 0;if(y>h)return n.state.doc.length;for(let z=n.viewState.heightOracle.textHeight/2,$=!1;u=n.elementAtHeight(y),u.type!=Zn.Text;)for(;y=r>0?u.bottom+z:u.top-z,!(y>=0&&y<=h);){if($)return t?null:0;$=!0,r=-r}m=l+y;let v=u.from;if(v<n.viewport.from)return n.viewport.from==0?0:t?null:bk(n,o,u,d,m);if(v>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:t?null:bk(n,o,u,d,m);let S=n.dom.ownerDocument,b=n.root.elementFromPoint?n.root:S,T=b.elementFromPoint(d,m);T&&!n.contentDOM.contains(T)&&(T=null),T||(d=Math.max(o.left+1,Math.min(o.right-1,d)),T=b.elementFromPoint(d,m),T&&!n.contentDOM.contains(T)&&(T=null));let k,M=-1;if(T&&((i=n.docView.nearest(T))===null||i===void 0?void 0:i.isEditable)!=!1){if(S.caretPositionFromPoint){let z=S.caretPositionFromPoint(d,m);z&&({offsetNode:k,offset:M}=z)}else if(S.caretRangeFromPoint){let z=S.caretRangeFromPoint(d,m);z&&({startContainer:k,startOffset:M}=z,(!n.contentDOM.contains(k)||Te.safari&&w6(k,M,d)||Te.chrome&&O6(k,M,d))&&(k=void 0))}k&&(M=Math.min(Ss(k),M))}if(!k||!n.docView.dom.contains(k)){let z=qt.find(n.docView,v);if(!z)return y>u.top+u.height/2?u.to:u.from;({node:k,offset:M}=JO(z.dom,d,m))}let F=n.docView.nearest(k);if(!F)return null;if(F.isWidget&&((s=F.dom)===null||s===void 0?void 0:s.nodeType)==1){let z=F.dom.getBoundingClientRect();return e.y<z.top||e.y<=z.bottom&&e.x<=(z.left+z.right)/2?F.posAtStart:F.posAtEnd}else return F.localPosFromDOM(k,M)+F.posAtStart}function bk(n,e,t,r,i){let s=Math.round((r-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&t.height>n.defaultLineHeight*1.5){let l=n.viewState.heightOracle.textHeight,u=Math.floor((i-t.top-(n.defaultLineHeight-l)*.5)/l);s+=u*n.viewState.heightOracle.lineLength}let o=n.state.sliceDoc(t.from,t.to);return t.from+FO(o,s,n.state.tabSize)}function w6(n,e,t){let r;if(n.nodeType!=3||e!=(r=n.nodeValue.length))return!1;for(let i=n.nextSibling;i;i=i.nextSibling)if(i.nodeType!=1||i.nodeName!="BR")return!1;return ql(n,r-1,r).getBoundingClientRect().left>t}function O6(n,e,t){if(e!=0)return!1;for(let i=n;;){let s=i.parentNode;if(!s||s.nodeType!=1||s.firstChild!=i)return!1;if(s.classList.contains("cm-line"))break;i=s}let r=n.nodeType==1?n.getBoundingClientRect():ql(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect();return t-r.left>5}function ZO(n,e,t){let r=n.lineBlockAt(e);if(Array.isArray(r.type)){let i;for(let s of r.type){if(s.from>e)break;if(!(s.to<e)){if(s.from<e&&s.to>e)return s;(!i||s.type==Zn.Text&&(i.type!=s.type||(t<0?s.from<e:s.to>e)))&&(i=s)}}return i||r}return r}function x6(n,e,t,r){let i=ZO(n,e.head,e.assoc||-1),s=!r||i.type!=Zn.Text||!(n.lineWrapping||i.widgetLineBreaks)?null:n.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(s){let o=n.dom.getBoundingClientRect(),l=n.textDirectionAt(i.from),u=n.posAtCoords({x:t==(l==Et.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(u!=null)return ie.cursor(u,t?-1:1)}return ie.cursor(t?i.to:i.from,t?-1:1)}function Tk(n,e,t,r){let i=n.state.doc.lineAt(e.head),s=n.bidiSpans(i),o=n.textDirectionAt(i.from);for(let l=e,u=null;;){let h=o6(i,s,o,l,t),d=IN;if(!h){if(i.number==(t?n.state.doc.lines:1))return l;d=`
`,i=n.state.doc.line(i.number+(t?1:-1)),s=n.bidiSpans(i),h=n.visualLineSide(i,!t)}if(u){if(!u(d))return l}else{if(!r)return h;u=r(d)}l=h}}function S6(n,e,t){let r=n.state.charCategorizer(e),i=r(t);return s=>{let o=r(s);return i==At.Space&&(i=o),i==o}}function b6(n,e,t,r){let i=e.head,s=t?1:-1;if(i==(t?n.state.doc.length:0))return ie.cursor(i,e.assoc);let o=e.goalColumn,l,u=n.contentDOM.getBoundingClientRect(),h=n.coordsAtPos(i,e.assoc||-1),d=n.documentTop;if(h)o==null&&(o=h.left-u.left),l=s<0?h.top:h.bottom;else{let v=n.viewState.lineBlockAt(i);o==null&&(o=Math.min(u.right-u.left,n.defaultCharacterWidth*(i-v.from))),l=(s<0?v.top:v.bottom)+d}let m=u.left+o,y=r??n.viewState.heightOracle.textHeight>>1;for(let v=0;;v+=10){let S=l+(y+v)*s,b=GN(n,{x:m,y:S},!1,s);if(S<u.top||S>u.bottom||(s<0?b<i:b>i)){let T=n.docView.coordsForChar(b),k=!T||S<T.top?-1:1;return ie.cursor(b,k,void 0,o)}}}function Qm(n,e,t){for(;;){let r=0;for(let i of n)i.between(e-1,e+1,(s,o,l)=>{if(e>s&&e<o){let u=r||t||(e-s<o-e?-1:1);e=u<0?s:o,r=u}});if(!r)return e}}function Hv(n,e,t){let r=Qm(n.state.facet(XS).map(i=>i(n)),t.from,e.head>t.from?-1:1);return r==t.from?t:ie.cursor(r,r<t.from?1:-1)}const Kh="";class T6{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(tt.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Kh}readRange(e,t){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i);let s=this.text.length;this.readNode(i);let o=i.nextSibling;if(o==t)break;let l=yt.get(i),u=yt.get(o);(l&&u?l.breakAfter:(l?l.breakAfter:_g(i))||_g(o)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>s)&&this.lineBreak(),i=o}return this.findPointBefore(r,t),this}readTextNode(e){let t=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,t.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,l;if(this.lineSeparator?(s=t.indexOf(this.lineSeparator,r),o=this.lineSeparator.length):(l=i.exec(t))&&(s=l.index,o=l[0].length),this.append(t.slice(r,s<0?t.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let u of this.points)u.node==e&&u.pos>this.text.length&&(u.pos-=o-1);r=s+o}}readNode(e){if(e.cmIgnore)return;let t=yt.get(e),r=t&&t.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==t&&(r.pos=this.text.length)}findPointInside(e,t){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(_6(e,r.node,r.offset)?t:0))}}function _6(n,e,t){for(;;){if(!e||t<Ss(e))return!1;if(e==n)return!0;t=Ul(e)+1,e=e.parentNode}}class _k{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class E6{constructor(e,t,r,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,r,0))){let l=s||o?[]:P6(e),u=new T6(l,e.state);u.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=u.text,this.newSel=A6(l,this.bounds.from)}else{let l=e.observer.selectionRange,u=s&&s.node==l.focusNode&&s.offset==l.focusOffset||!zO(e.contentDOM,l.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(l.focusNode,l.focusOffset),h=o&&o.node==l.anchorNode&&o.offset==l.anchorOffset||!zO(e.contentDOM,l.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(l.anchorNode,l.anchorOffset),d=e.viewport;if((Te.ios||Te.chrome)&&e.state.selection.main.empty&&u!=h&&(d.from>0||d.to<e.state.doc.length)){let m=Math.min(u,h),y=Math.max(u,h),v=d.from-m,S=d.to-y;(v==0||v==1||m==0)&&(S==0||S==-1||y==e.state.doc.length)&&(u=0,h=e.state.doc.length)}this.newSel=ie.single(h,u)}}}function XN(n,e){let t,{newSel:r}=e,i=n.state.selection.main,s=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:l}=e.bounds,u=i.from,h=null;(s===8||Te.android&&e.text.length<l-o)&&(u=i.to,h="end");let d=C6(n.state.doc.sliceString(o,l,Kh),e.text,u-o,h);d&&(Te.chrome&&s==13&&d.toB==d.from+2&&e.text.slice(d.from,d.toB)==Kh+Kh&&d.toB--,t={from:o+d.from,to:o+d.toA,insert:it.of(e.text.slice(d.from,d.toB).split(Kh))})}else r&&(!n.hasFocus&&n.state.facet(no)||r.main.eq(i))&&(r=null);if(!t&&!r)return!1;if(!t&&e.typeOver&&!i.empty&&r&&r.main.empty?t={from:i.from,to:i.to,insert:n.state.doc.slice(i.from,i.to)}:(Te.mac||Te.android)&&t&&t.from==t.to&&t.from==i.head-1&&/^\. ?$/.test(t.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(r&&t.insert.length==2&&(r=ie.single(r.main.anchor-1,r.main.head-1)),t={from:t.from,to:t.to,insert:it.of([t.insert.toString().replace("."," ")])}):t&&t.from>=i.from&&t.to<=i.to&&(t.from!=i.from||t.to!=i.to)&&i.to-i.from-(t.to-t.from)<=4?t={from:i.from,to:i.to,insert:n.state.doc.slice(i.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,i.to))}:Te.chrome&&t&&t.from==t.to&&t.from==i.head&&t.insert.toString()==`
 `&&n.lineWrapping&&(r&&(r=ie.single(r.main.anchor-1,r.main.head-1)),t={from:i.from,to:i.to,insert:it.of([" "])}),t)return YS(n,t,r,s);if(r&&!r.main.eq(i)){let o=!1,l="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(o=!0),l=n.inputState.lastSelectionOrigin),n.dispatch({selection:r,scrollIntoView:o,userEvent:l}),!0}else return!1}function YS(n,e,t,r=-1){if(Te.ios&&n.inputState.flushIOSKey(e))return!0;let i=n.state.selection.main;if(Te.android&&(e.to==i.to&&(e.from==i.from||e.from==i.from-1&&n.state.sliceDoc(e.from,i.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&ru(n.contentDOM,"Enter",13)||(e.from==i.from-1&&e.to==i.to&&e.insert.length==0||r==8&&e.insert.length<e.to-e.from&&e.to>i.head)&&ru(n.contentDOM,"Backspace",8)||e.from==i.from&&e.to==i.to+1&&e.insert.length==0&&ru(n.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();n.inputState.composing>=0&&n.inputState.composing++;let o,l=()=>o||(o=k6(n,e,t));return n.state.facet(VN).some(u=>u(n,e.from,e.to,s,l))||n.dispatch(l()),!0}function k6(n,e,t){let r,i=n.state,s=i.selection.main;if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&n.inputState.composing<0){let l=s.from<e.from?i.sliceDoc(s.from,e.from):"",u=s.to>e.to?i.sliceDoc(e.to,s.to):"";r=i.replaceSelection(n.state.toText(l+e.insert.sliceString(0,void 0,n.state.lineBreak)+u))}else{let l=i.changes(e),u=t&&t.main.to<=l.newLength?t.main:void 0;if(i.selection.ranges.length>1&&n.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let h=n.state.sliceDoc(e.from,e.to),d,m=t&&HN(n,t.main.head);if(m){let S=e.insert.length-(e.to-e.from);d={from:m.from,to:m.to-S}}else d=n.state.doc.lineAt(s.head);let y=s.to-e.to,v=s.to-s.from;r=i.changeByRange(S=>{if(S.from==s.from&&S.to==s.to)return{changes:l,range:u||S.map(l)};let b=S.to-y,T=b-h.length;if(S.to-S.from!=v||n.state.sliceDoc(T,b)!=h||S.to>=d.from&&S.from<=d.to)return{range:S};let k=i.changes({from:T,to:b,insert:e.insert}),M=S.to-s.to;return{changes:k,range:u?ie.range(Math.max(0,u.anchor+M),Math.max(0,u.head+M)):S.map(k)}})}else r={changes:l,selection:u&&i.selection.replaceRange(u)}}let o="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,o+=".compose",n.inputState.compositionFirstChange&&(o+=".start",n.inputState.compositionFirstChange=!1)),i.update(r,{userEvent:o,scrollIntoView:!0})}function C6(n,e,t,r){let i=Math.min(n.length,e.length),s=0;for(;s<i&&n.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==i&&n.length==e.length)return null;let o=n.length,l=e.length;for(;o>0&&l>0&&n.charCodeAt(o-1)==e.charCodeAt(l-1);)o--,l--;if(r=="end"){let u=Math.max(0,s-Math.min(o,l));t-=o+u-s}if(o<s&&n.length<e.length){let u=t<=s&&t>=o?s-t:0;s-=u,l=s+(l-o),o=s}else if(l<s){let u=t<=s&&t>=l?s-t:0;s-=u,o=s+(o-l),l=s}return{from:s,toA:o,toB:l}}function P6(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:s}=n.observer.selectionRange;return t&&(e.push(new _k(t,r)),(i!=t||s!=r)&&e.push(new _k(i,s))),e}function A6(n,e){if(n.length==0)return null;let t=n[0].pos,r=n.length==2?n[1].pos:t;return t>-1&&r>-1?ie.single(t+e,r+e):null}class R6{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Te.safari&&e.contentDOM.addEventListener("input",()=>null),Te.gecko&&H6(e.contentDOM.ownerDocument)}handleEvent(e){!Q6(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,t){let r=this.handlers[e];if(r){for(let i of r.observers)i(this.view,t);for(let i of r.handlers){if(t.defaultPrevented)break;if(i(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=I6(e),r=this.handlers,i=this.view.contentDOM;for(let s in t)if(s!="scroll"){let o=!t[s].handlers.length,l=r[s];l&&o!=!l.handlers.length&&(i.removeEventListener(s,this.handleEvent),l=null),l||i.addEventListener(s,this.handleEvent,{passive:o})}for(let s in r)s!="scroll"&&!t[s]&&i.removeEventListener(s,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&YN.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),Te.android&&Te.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return Te.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=KN.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||N6.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,ru(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:Te.safari&&!Te.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function Ek(n,e){return(t,r)=>{try{return e.call(n,r,t)}catch(i){wr(t.state,i)}}}function I6(n){let e=Object.create(null);function t(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of n){let i=r.spec;if(i&&i.domEventHandlers)for(let s in i.domEventHandlers){let o=i.domEventHandlers[s];o&&t(s).handlers.push(Ek(r.value,o))}if(i&&i.domEventObservers)for(let s in i.domEventObservers){let o=i.domEventObservers[s];o&&t(s).observers.push(Ek(r.value,o))}}for(let r in Li)t(r).handlers.push(Li[r]);for(let r in li)t(r).observers.push(li[r]);return e}const KN=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],N6="dthko",YN=[16,17,18,20,91,92,224,225],nm=6;function rm(n){return Math.max(0,n)*.7+8}function D6(n,e){return Math.max(Math.abs(n.clientX-e.clientX),Math.abs(n.clientY-e.clientY))}class M6{constructor(e,t,r,i){this.view=e,this.startEvent=t,this.style=r,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=$W(e.contentDOM),this.atoms=e.state.facet(XS).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(tt.allowMultipleSelections)&&L6(e,t),this.dragging=F6(e,t)&&eD(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&D6(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,r=0,i=0,s=0,o=this.view.win.innerWidth,l=this.view.win.innerHeight;this.scrollParents.x&&({left:i,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:l}=this.scrollParents.y.getBoundingClientRect());let u=KS(this.view);e.clientX-u.left<=i+nm?t=-rm(i-e.clientX):e.clientX+u.right>=o-nm&&(t=rm(e.clientX-o)),e.clientY-u.top<=s+nm?r=-rm(s-e.clientY):e.clientY+u.bottom>=l-nm&&(r=rm(e.clientY-l)),this.setScrollSpeed(t,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let r=0;r<e.ranges.length;r++){let i=e.ranges[r],s=null;if(i.empty){let o=Qm(this.atoms,i.from,0);o!=i.from&&(s=ie.cursor(o,-1))}else{let o=Qm(this.atoms,i.from,-1),l=Qm(this.atoms,i.to,1);(o!=i.from||l!=i.to)&&(s=ie.range(i.from==i.anchor?o:l,i.from==i.head?o:l))}s&&(t||(t=e.ranges.slice()),t[r]=s)}return t?ie.create(t,e.mainIndex):e}select(e){let{view:t}=this,r=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function L6(n,e){let t=n.state.facet(NN);return t.length?t[0](e):Te.mac?e.metaKey:e.ctrlKey}function V6(n,e){let t=n.state.facet(DN);return t.length?t[0](e):Te.mac?!e.altKey:!e.ctrlKey}function F6(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let r=If(n.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let s=0;s<i.length;s++){let o=i[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function Q6(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,r;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(r=yt.get(t))&&r.ignoreEvent(e))return!1;return!0}const Li=Object.create(null),li=Object.create(null),JN=Te.ie&&Te.ie_version<15||Te.ios&&Te.webkit_version<604;function j6(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),ZN(n,t.value)},50)}function Ny(n,e,t){for(let r of n.facet(e))t=r(t,n);return t}function ZN(n,e){e=Ny(n.state,WS,e);let{state:t}=n,r,i=1,s=t.toText(e),o=s.lines==t.selection.ranges.length;if(ex!=null&&t.selection.ranges.every(u=>u.empty)&&ex==s.toString()){let u=-1;r=t.changeByRange(h=>{let d=t.doc.lineAt(h.from);if(d.from==u)return{range:h};u=d.from;let m=t.toText((o?s.line(i++).text:e)+t.lineBreak);return{changes:{from:d.from,insert:m},range:ie.cursor(h.from+m.length)}})}else o?r=t.changeByRange(u=>{let h=s.line(i++);return{changes:{from:u.from,to:u.to,insert:h.text},range:ie.cursor(u.from+h.length)}}):r=t.replaceSelection(s);n.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}li.scroll=n=>{n.inputState.lastScrollTop=n.scrollDOM.scrollTop,n.inputState.lastScrollLeft=n.scrollDOM.scrollLeft};Li.keydown=(n,e)=>(n.inputState.setSelectionOrigin("select"),e.keyCode==27&&n.inputState.tabFocusMode!=0&&(n.inputState.tabFocusMode=Date.now()+2e3),!1);li.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};li.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};Li.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let r of n.state.facet(MN))if(t=r(n,e),t)break;if(!t&&e.button==0&&(t=B6(n,e)),t){let r=!n.hasFocus;n.inputState.startMouseSelection(new M6(n,e,t,r)),r&&n.observer.ignore(()=>{pN(n.contentDOM);let s=n.root.activeElement;s&&!s.contains(n.contentDOM)&&s.blur()});let i=n.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}return!1};function kk(n,e,t,r){if(r==1)return ie.cursor(e,t);if(r==2)return g6(n.state,e,t);{let i=qt.find(n.docView,e),s=n.state.doc.lineAt(i?i.posAtEnd:e),o=i?i.posAtStart:s.from,l=i?i.posAtEnd:s.to;return l<n.state.doc.length&&l==s.to&&l++,ie.range(o,l)}}let Ck=(n,e,t)=>e>=t.top&&e<=t.bottom&&n>=t.left&&n<=t.right;function z6(n,e,t,r){let i=qt.find(n.docView,e);if(!i)return 1;let s=e-i.posAtStart;if(s==0)return 1;if(s==i.length)return-1;let o=i.coordsAt(s,-1);if(o&&Ck(t,r,o))return-1;let l=i.coordsAt(s,1);return l&&Ck(t,r,l)?1:o&&o.bottom>=r?-1:1}function Pk(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:z6(n,t,e.clientX,e.clientY)}}const $6=Te.ie&&Te.ie_version<=11;let Ak=null,Rk=0,Ik=0;function eD(n){if(!$6)return n.detail;let e=Ak,t=Ik;return Ak=n,Ik=Date.now(),Rk=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(Rk+1)%3:1}function B6(n,e){let t=Pk(n,e),r=eD(e),i=n.state.selection;return{update(s){s.docChanged&&(t.pos=s.changes.mapPos(t.pos),i=i.map(s.changes))},get(s,o,l){let u=Pk(n,s),h,d=kk(n,u.pos,u.bias,r);if(t.pos!=u.pos&&!o){let m=kk(n,t.pos,t.bias,r),y=Math.min(m.from,d.from),v=Math.max(m.to,d.to);d=y<d.from?ie.range(y,v):ie.range(v,y)}return o?i.replaceRange(i.main.extend(d.from,d.to)):l&&r==1&&i.ranges.length>1&&(h=U6(i,u.pos))?h:l?i.addRange(d):ie.create([d])}}}function U6(n,e){for(let t=0;t<n.ranges.length;t++){let{from:r,to:i}=n.ranges[t];if(r<=e&&i>=e)return ie.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}return null}Li.dragstart=(n,e)=>{let{selection:{main:t}}=n.state;if(e.target.draggable){let i=n.docView.nearest(e.target);if(i&&i.isWidget){let s=i.posAtStart,o=s+i.length;(s>=t.to||o<=t.from)&&(t=ie.range(s,o))}}let{inputState:r}=n;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",Ny(n.state,HS,n.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Li.dragend=n=>(n.inputState.draggedContent=null,!1);function Nk(n,e,t,r){if(t=Ny(n.state,WS,t),!t)return;let i=n.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=n.inputState,o=r&&s&&V6(n,e)?{from:s.from,to:s.to}:null,l={from:i,insert:t},u=n.state.changes(o?[o,l]:l);n.focus(),n.dispatch({changes:u,selection:{anchor:u.mapPos(i,-1),head:u.mapPos(i,1)},userEvent:o?"move.drop":"input.drop"}),n.inputState.draggedContent=null}Li.drop=(n,e)=>{if(!e.dataTransfer)return!1;if(n.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let r=Array(t.length),i=0,s=()=>{++i==t.length&&Nk(n,e,r.filter(o=>o!=null).join(n.state.lineBreak),!1)};for(let o=0;o<t.length;o++){let l=new FileReader;l.onerror=s,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(r[o]=l.result),s()},l.readAsText(t[o])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return Nk(n,e,r,!0),!0}return!1};Li.paste=(n,e)=>{if(n.state.readOnly)return!0;n.observer.flush();let t=JN?null:e.clipboardData;return t?(ZN(n,t.getData("text/plain")||t.getData("text/uri-list")),!0):(j6(n),!1)};function q6(n,e){let t=n.dom.parentNode;if(!t)return;let r=t.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),n.focus()},50)}function W6(n){let e=[],t=[],r=!1;for(let i of n.selection.ranges)i.empty||(e.push(n.sliceDoc(i.from,i.to)),t.push(i));if(!e.length){let i=-1;for(let{from:s}of n.selection.ranges){let o=n.doc.lineAt(s);o.number>i&&(e.push(o.text),t.push({from:o.from,to:Math.min(n.doc.length,o.to+1)})),i=o.number}r=!0}return{text:Ny(n,HS,e.join(n.lineBreak)),ranges:t,linewise:r}}let ex=null;Li.copy=Li.cut=(n,e)=>{let{text:t,ranges:r,linewise:i}=W6(n.state);if(!t&&!i)return!1;ex=i?t:null,e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let s=JN?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",t),!0):(q6(n,t),!1)};const tD=Ts.define();function nD(n,e){let t=[];for(let r of n.facet(FN)){let i=r(n,e);i&&t.push(i)}return t.length?n.update({effects:t,annotations:tD.of(!0)}):null}function rD(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let t=nD(n.state,e);t?n.dispatch(t):n.update([])}},10)}li.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),rD(n)};li.blur=n=>{n.observer.clearSelectionRange(),rD(n)};li.compositionstart=li.compositionupdate=n=>{n.observer.editContext||(n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0))};li.compositionend=n=>{n.observer.editContext||(n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,Te.chrome&&Te.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50))};li.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};Li.beforeinput=(n,e)=>{var t,r;if(e.inputType=="insertReplacementText"&&n.observer.editContext){let s=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),o=e.getTargetRanges();if(s&&o.length){let l=o[0],u=n.posAtDOM(l.startContainer,l.startOffset),h=n.posAtDOM(l.endContainer,l.endOffset);return YS(n,{from:u,to:h,insert:n.state.toText(s)},null),!0}}let i;if(Te.chrome&&Te.android&&(i=KN.find(s=>s.inputType==e.inputType))&&(n.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let s=((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>s+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}return Te.ios&&e.inputType=="deleteContentForward"&&n.observer.flushSoon(),Te.safari&&e.inputType=="insertText"&&n.inputState.composing>=0&&setTimeout(()=>li.compositionend(n,e),20),!1};const Dk=new Set;function H6(n){Dk.has(n)||(Dk.add(n),n.addEventListener("copy",()=>{}),n.addEventListener("cut",()=>{}))}const Mk=["pre-wrap","normal","pre-line","break-spaces"];let Iu=!1;function Lk(){Iu=!1}class G6{constructor(e){this.lineWrapping=e,this.doc=it.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let r=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((t-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return Mk.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(t=!0,this.heightSamples[Math.floor(i*10)]=!0)}return t}refresh(e,t,r,i,s,o){let l=Mk.indexOf(e)>-1,u=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=l;if(this.lineWrapping=l,this.lineHeight=t,this.charWidth=r,this.textHeight=i,this.lineLength=s,u){this.heightSamples={};for(let h=0;h<o.length;h++){let d=o[h];d<0?h++:this.heightSamples[Math.floor(d*10)]=!0}}return u}}class X6{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class as{constructor(e,t,r,i,s){this.from=e,this.length=t,this.top=r,this.height=i,this._content=s}get type(){return typeof this._content=="number"?Zn.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Fa?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new as(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var _t=function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n}(_t||(_t={}));const jm=.001;class er{constructor(e,t,r=2){this.length=e,this.height=t,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>jm&&(Iu=!0),this.height=e)}replace(e,t,r){return er.of(r)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,r,i){let s=this,o=r.doc;for(let l=i.length-1;l>=0;l--){let{fromA:u,toA:h,fromB:d,toB:m}=i[l],y=s.lineAt(u,_t.ByPosNoHeight,r.setDoc(t),0,0),v=y.to>=h?y:s.lineAt(h,_t.ByPosNoHeight,r,0,0);for(m+=v.to-h,h=v.to;l>0&&y.from<=i[l-1].toA;)u=i[l-1].fromA,d=i[l-1].fromB,l--,u<y.from&&(y=s.lineAt(u,_t.ByPosNoHeight,r,0,0));d+=y.from-u,u=y.from;let S=JS.build(r.setDoc(o),e,d,m);s=Cg(s,s.replace(u,h,S))}return s.updateHeight(r,0)}static empty(){return new Lr(0,0)}static of(e){if(e.length==1)return e[0];let t=0,r=e.length,i=0,s=0;for(;;)if(t==r)if(i>s*2){let l=e[t-1];l.break?e.splice(--t,1,l.left,null,l.right):e.splice(--t,1,l.left,l.right),r+=1+l.break,i-=l.size}else if(s>i*2){let l=e[r];l.break?e.splice(r,1,l.left,null,l.right):e.splice(r,1,l.left,l.right),r+=2+l.break,s-=l.size}else break;else if(i<s){let l=e[t++];l&&(i+=l.size)}else{let l=e[--r];l&&(s+=l.size)}let o=0;return e[t-1]==null?(o=1,t--):e[t]==null&&(o=1,r++),new K6(er.of(e.slice(0,t)),o,er.of(e.slice(r)))}}function Cg(n,e){return n==e?n:(n.constructor!=e.constructor&&(Iu=!0),e)}er.prototype.size=1;class iD extends er{constructor(e,t,r){super(e,t),this.deco=r}blockAt(e,t,r,i){return new as(i,this.length,r,this.height,this.deco||0)}lineAt(e,t,r,i,s){return this.blockAt(0,r,i,s)}forEachLine(e,t,r,i,s,o){e<=s+this.length&&t>=s&&o(this.blockAt(0,r,i,s))}updateHeight(e,t=0,r=!1,i){return i&&i.from<=t&&i.more&&this.setHeight(i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Lr extends iD{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,r,i){return new as(i,this.length,r,this.height,this.breaks)}replace(e,t,r){let i=r[0];return r.length==1&&(i instanceof Lr||i instanceof xn&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof xn?i=new Lr(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):er.of(r)}updateHeight(e,t=0,r=!1,i){return i&&i.from<=t&&i.more?this.setHeight(i.heights[i.index++]):(r||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class xn extends er{constructor(e){super(e,0)}heightMetrics(e,t){let r=e.doc.lineAt(t).number,i=e.doc.lineAt(t+this.length).number,s=i-r+1,o,l=0;if(e.lineWrapping){let u=Math.min(this.height,e.lineHeight*s);o=u/s,this.length>s+1&&(l=(this.height-u)/(this.length-s-1))}else o=this.height/s;return{firstLine:r,lastLine:i,perLine:o,perChar:l}}blockAt(e,t,r,i){let{firstLine:s,lastLine:o,perLine:l,perChar:u}=this.heightMetrics(t,i);if(t.lineWrapping){let h=i+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),d=t.doc.lineAt(h),m=l+d.length*u,y=Math.max(r,e-m/2);return new as(d.from,d.length,y,m,0)}else{let h=Math.max(0,Math.min(o-s,Math.floor((e-r)/l))),{from:d,length:m}=t.doc.line(s+h);return new as(d,m,r+l*h,l,0)}}lineAt(e,t,r,i,s){if(t==_t.ByHeight)return this.blockAt(e,r,i,s);if(t==_t.ByPosNoHeight){let{from:v,to:S}=r.doc.lineAt(e);return new as(v,S-v,0,0,0)}let{firstLine:o,perLine:l,perChar:u}=this.heightMetrics(r,s),h=r.doc.lineAt(e),d=l+h.length*u,m=h.number-o,y=i+l*m+u*(h.from-s-m);return new as(h.from,h.length,Math.max(i,Math.min(y,i+this.height-d)),d,0)}forEachLine(e,t,r,i,s,o){e=Math.max(e,s),t=Math.min(t,s+this.length);let{firstLine:l,perLine:u,perChar:h}=this.heightMetrics(r,s);for(let d=e,m=i;d<=t;){let y=r.doc.lineAt(d);if(d==e){let S=y.number-l;m+=u*S+h*(e-s-S)}let v=u+h*y.length;o(new as(y.from,y.length,m,v,0)),m+=v,d=y.to+1}}replace(e,t,r){let i=this.length-t;if(i>0){let s=r[r.length-1];s instanceof xn?r[r.length-1]=new xn(s.length+i):r.push(null,new xn(i-1))}if(e>0){let s=r[0];s instanceof xn?r[0]=new xn(e+s.length):r.unshift(new xn(e-1),null)}return er.of(r)}decomposeLeft(e,t){t.push(new xn(e-1),null)}decomposeRight(e,t){t.push(null,new xn(this.length-e-1))}updateHeight(e,t=0,r=!1,i){let s=t+this.length;if(i&&i.from<=t+this.length&&i.more){let o=[],l=Math.max(t,i.from),u=-1;for(i.from>t&&o.push(new xn(i.from-t-1).updateHeight(e,t));l<=s&&i.more;){let d=e.doc.lineAt(l).length;o.length&&o.push(null);let m=i.heights[i.index++];u==-1?u=m:Math.abs(m-u)>=jm&&(u=-2);let y=new Lr(d,m);y.outdated=!1,o.push(y),l+=d+1}l<=s&&o.push(null,new xn(s-l).updateHeight(e,l));let h=er.of(o);return(u<0||Math.abs(h.height-this.height)>=jm||Math.abs(u-this.heightMetrics(e,t).perLine)>=jm)&&(Iu=!0),Cg(this,h)}else(r||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class K6 extends er{constructor(e,t,r){super(e.length+t+r.length,e.height+r.height,t|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,t,r,i){let s=r+this.left.height;return e<s?this.left.blockAt(e,t,r,i):this.right.blockAt(e,t,s,i+this.left.length+this.break)}lineAt(e,t,r,i,s){let o=i+this.left.height,l=s+this.left.length+this.break,u=t==_t.ByHeight?e<o:e<l,h=u?this.left.lineAt(e,t,r,i,s):this.right.lineAt(e,t,r,o,l);if(this.break||(u?h.to<l:h.from>l))return h;let d=t==_t.ByPosNoHeight?_t.ByPosNoHeight:_t.ByPos;return u?h.join(this.right.lineAt(l,d,r,o,l)):this.left.lineAt(l,d,r,i,s).join(h)}forEachLine(e,t,r,i,s,o){let l=i+this.left.height,u=s+this.left.length+this.break;if(this.break)e<u&&this.left.forEachLine(e,t,r,i,s,o),t>=u&&this.right.forEachLine(e,t,r,l,u,o);else{let h=this.lineAt(u,_t.ByPos,r,i,s);e<h.from&&this.left.forEachLine(e,h.from-1,r,i,s,o),h.to>=e&&h.from<=t&&o(h),t>h.to&&this.right.forEachLine(h.to+1,t,r,l,u,o)}}replace(e,t,r){let i=this.left.length+this.break;if(t<i)return this.balanced(this.left.replace(e,t,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,t-i,r));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let l of r)s.push(l);if(e>0&&Vk(s,o-1),t<this.length){let l=s.length;this.decomposeRight(t,s),Vk(s,l)}return er.of(s)}decomposeLeft(e,t){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(r++,e>=r&&t.push(null)),e>r&&this.right.decomposeLeft(e-r,t)}decomposeRight(e,t){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,t);e<r&&this.left.decomposeRight(e,t),this.break&&e<i&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?er.of(this.break?[e,null,t]:[e,t]):(this.left=Cg(this.left,e),this.right=Cg(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,r=!1,i){let{left:s,right:o}=this,l=t+s.length+this.break,u=null;return i&&i.from<=t+s.length&&i.more?u=s=s.updateHeight(e,t,r,i):s.updateHeight(e,t,r),i&&i.from<=l+o.length&&i.more?u=o=o.updateHeight(e,l,r,i):o.updateHeight(e,l,r),u?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Vk(n,e){let t,r;n[e]==null&&(t=n[e-1])instanceof xn&&(r=n[e+1])instanceof xn&&n.splice(e-1,3,new xn(t.length+1+r.length))}const Y6=5;class JS{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let r=Math.min(t,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof Lr?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new Lr(r-this.pos,-1)),this.writtenTo=r,t>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,r){if(e<t||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0,s=r.widget?r.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let o=t-e;r.block?this.addBlock(new iD(o,i,r)):(o||s||i>=Y6)&&this.addLineDeco(i,s,o)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Lr(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let r=new xn(t-e);return this.oracle.doc.lineAt(e).to==t&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Lr)return e;let t=new Lr(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,r){let i=this.ensureLine();i.length+=r,i.collapsed+=r,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=t,this.writtenTo=this.pos=this.pos+r}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof Lr)&&!this.isCovered?this.nodes.push(new Lr(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof Lr&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,t,r,i){let s=new JS(r,e);return ot.spans(t,r,i,s,0),s.finish(r)}}function J6(n,e,t){let r=new Z6;return ot.compare(n,e,t,r,0),r.changes}class Z6{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,r,i){(e<t||r&&r.heightRelevant||i&&i.heightRelevant)&&Fm(e,t,this.changes,5)}}function e8(n,e){let t=n.getBoundingClientRect(),r=n.ownerDocument,i=r.defaultView||window,s=Math.max(0,t.left),o=Math.min(i.innerWidth,t.right),l=Math.max(0,t.top),u=Math.min(i.innerHeight,t.bottom);for(let h=n.parentNode;h&&h!=r.body;)if(h.nodeType==1){let d=h,m=window.getComputedStyle(d);if((d.scrollHeight>d.clientHeight||d.scrollWidth>d.clientWidth)&&m.overflow!="visible"){let y=d.getBoundingClientRect();s=Math.max(s,y.left),o=Math.min(o,y.right),l=Math.max(l,y.top),u=Math.min(h==n.parentNode?i.innerHeight:u,y.bottom)}h=m.position=="absolute"||m.position=="fixed"?d.offsetParent:d.parentNode}else if(h.nodeType==11)h=h.host;else break;return{left:s-t.left,right:Math.max(s,o)-t.left,top:l-(t.top+e),bottom:Math.max(l,u)-(t.top+e)}}function t8(n){let e=n.getBoundingClientRect(),t=n.ownerDocument.defaultView||window;return e.left<t.innerWidth&&e.right>0&&e.top<t.innerHeight&&e.bottom>0}function n8(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class Gv{constructor(e,t,r,i){this.from=e,this.to=t,this.size=r,this.displaySize=i}static same(e,t){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=t[r];if(i.from!=s.from||i.to!=s.to||i.size!=s.size)return!1}return!0}draw(e,t){return Re.replace({widget:new r8(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class r8 extends Es{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class Fk{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=Qk,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Et.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(GS).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new G6(t),this.stateDeco=e.facet(Nf).filter(r=>typeof r!="function"),this.heightMap=er.empty().applyChanges(this.stateDeco,it.empty,this.heightOracle.setDoc(e.doc),[new ai(0,0,0,e.doc.length)]);for(let r=0;r<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());r++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Re.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let r=0;r<=1;r++){let i=r?t.head:t.anchor;if(!e.some(({from:s,to:o})=>i>=s&&i<=o)){let{from:s,to:o}=this.lineBlockAt(i);e.push(new im(s,o))}}return this.viewports=e.sort((r,i)=>r.from-i.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?Qk:new ZS(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Yh(e,this.scaler))})}update(e,t=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(Nf).filter(d=>typeof d!="function");let i=e.changedRanges,s=ai.extendWithRanges(i,J6(r,this.stateDeco,e?e.changes:Jt.empty(this.state.doc.length))),o=this.heightMap.height,l=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);Lk(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=o||Iu)&&(e.flags|=2),l?(this.scrollAnchorPos=e.changes.mapPos(l.from,-1),this.scrollAnchorHeight=l.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let u=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<u.from||t.range.head>u.to)||!this.viewportIsAppropriate(u))&&(u=this.getViewport(0,t));let h=u.from!=this.viewport.from||u.to!=this.viewport.to;this.viewport=u,e.flags|=this.updateForViewport(),(h||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(jN)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,r=window.getComputedStyle(t),i=this.heightOracle,s=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?Et.RTL:Et.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),l=t.getBoundingClientRect(),u=o||this.mustMeasureContent||this.contentDOMHeight!=l.height;this.contentDOMHeight=l.height,this.mustMeasureContent=!1;let h=0,d=0;if(l.width&&l.height){let{scaleX:z,scaleY:$}=dN(t,l);(z>.005&&Math.abs(this.scaleX-z)>.005||$>.005&&Math.abs(this.scaleY-$)>.005)&&(this.scaleX=z,this.scaleY=$,h|=16,o=u=!0)}let m=(parseInt(r.paddingTop)||0)*this.scaleY,y=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=m||this.paddingBottom!=y)&&(this.paddingTop=m,this.paddingBottom=y,h|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(u=!0),this.editorWidth=e.scrollDOM.clientWidth,h|=16);let v=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=v&&(this.scrollAnchorHeight=-1,this.scrollTop=v),this.scrolledToBottom=gN(e.scrollDOM);let S=(this.printing?n8:e8)(t,this.paddingTop),b=S.top-this.pixelViewport.top,T=S.bottom-this.pixelViewport.bottom;this.pixelViewport=S;let k=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(k!=this.inView&&(this.inView=k,k&&(u=!0)),!this.inView&&!this.scrollTarget&&!t8(e.dom))return 0;let M=l.width;if((this.contentDOMWidth!=M||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=l.width,this.editorHeight=e.scrollDOM.clientHeight,h|=16),u){let z=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(z)&&(o=!0),o||i.lineWrapping&&Math.abs(M-this.contentDOMWidth)>i.charWidth){let{lineHeight:$,charWidth:U,textHeight:C}=e.docView.measureTextSize();o=$>0&&i.refresh(s,$,U,C,M/U,z),o&&(e.docView.minWidth=0,h|=16)}b>0&&T>0?d=Math.max(b,T):b<0&&T<0&&(d=Math.min(b,T)),Lk();for(let $ of this.viewports){let U=$.from==this.viewport.from?z:e.docView.measureVisibleLineHeights($);this.heightMap=(o?er.empty().applyChanges(this.stateDeco,it.empty,this.heightOracle,[new ai(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,o,new X6($.from,U))}Iu&&(h|=2)}let F=!this.viewportIsAppropriate(this.viewport,d)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return F&&(h&2&&(h|=this.updateScaler()),this.viewport=this.getViewport(d,this.scrollTarget),h|=this.updateForViewport()),(h&2||F)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),h|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),h}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:l}=this,u=new im(i.lineAt(o-r*1e3,_t.ByHeight,s,0,0).from,i.lineAt(l+(1-r)*1e3,_t.ByHeight,s,0,0).to);if(t){let{head:h}=t.range;if(h<u.from||h>u.to){let d=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),m=i.lineAt(h,_t.ByPos,s,0,0),y;t.y=="center"?y=(m.top+m.bottom)/2-d/2:t.y=="start"||t.y=="nearest"&&h<u.from?y=m.top:y=m.bottom-d,u=new im(i.lineAt(y-1e3/2,_t.ByHeight,s,0,0).from,i.lineAt(y+d+1e3/2,_t.ByHeight,s,0,0).to)}}return u}mapViewport(e,t){let r=t.mapPos(e.from,-1),i=t.mapPos(e.to,1);return new im(this.heightMap.lineAt(r,_t.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,_t.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,_t.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(t,_t.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:l}=this;return(e==0||i<=o-Math.max(10,Math.min(-r,250)))&&(t==this.state.doc.length||s>=l+Math.max(10,Math.min(r,250)))&&i>o-2*1e3&&s<l+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let r=[];for(let i of e)t.touchesRange(i.from,i.to)||r.push(new Gv(t.mapPos(i.from),t.mapPos(i.to),i.size,i.displaySize));return r}ensureLineGaps(e,t){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,s=i>>1,o=i<<1;if(this.defaultTextDirection!=Et.LTR&&!r)return[];let l=[],u=(d,m,y,v)=>{if(m-d<s)return;let S=this.state.selection.main,b=[S.from];S.empty||b.push(S.to);for(let k of b)if(k>d&&k<m){u(d,k-10,y,v),u(k+10,m,y,v);return}let T=s8(e,k=>k.from>=y.from&&k.to<=y.to&&Math.abs(k.from-d)<s&&Math.abs(k.to-m)<s&&!b.some(M=>k.from<M&&k.to>M));if(!T){if(m<y.to&&t&&r&&t.visibleRanges.some(F=>F.from<=m&&F.to>=m)){let F=t.moveToLineBoundary(ie.cursor(m),!1,!0).head;F>d&&(m=F)}let k=this.gapSize(y,d,m,v),M=r||k<2e6?k:2e6;T=new Gv(d,m,k,M)}l.push(T)},h=d=>{if(d.length<o||d.type!=Zn.Text)return;let m=i8(d.from,d.to,this.stateDeco);if(m.total<o)return;let y=this.scrollTarget?this.scrollTarget.range.head:null,v,S;if(r){let b=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,T,k;if(y!=null){let M=om(m,y),F=((this.visibleBottom-this.visibleTop)/2+b)/d.height;T=M-F,k=M+F}else T=(this.visibleTop-d.top-b)/d.height,k=(this.visibleBottom-d.top+b)/d.height;v=sm(m,T),S=sm(m,k)}else{let b=m.total*this.heightOracle.charWidth,T=i*this.heightOracle.charWidth,k=0;if(b>2e6)for(let U of e)U.from>=d.from&&U.from<d.to&&U.size!=U.displaySize&&U.from*this.heightOracle.charWidth+k<this.pixelViewport.left&&(k=U.size-U.displaySize);let M=this.pixelViewport.left+k,F=this.pixelViewport.right+k,z,$;if(y!=null){let U=om(m,y),C=((F-M)/2+T)/b;z=U-C,$=U+C}else z=(M-T)/b,$=(F+T)/b;v=sm(m,z),S=sm(m,$)}v>d.from&&u(d.from,v,d,m),S<d.to&&u(S,d.to,d,m)};for(let d of this.viewportLines)Array.isArray(d.type)?d.type.forEach(h):h(d);return l}gapSize(e,t,r,i){let s=om(i,r)-om(i,t);return this.heightOracle.lineWrapping?e.height*s:i.total*this.heightOracle.charWidth*s}updateLineGaps(e){Gv.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Re.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let r=[];ot.spans(t,this.viewport.from,this.viewport.to,{span(s,o){r.push({from:s,to:o})},point(){}},20);let i=0;if(r.length!=this.visibleRanges.length)i=12;else for(let s=0;s<r.length&&!(i&8);s++){let o=this.visibleRanges[s],l=r[s];(o.from!=l.from||o.to!=l.to)&&(i|=4,e&&e.mapPos(o.from,-1)==l.from&&e.mapPos(o.to,1)==l.to||(i|=8))}return this.visibleRanges=r,i}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||Yh(this.heightMap.lineAt(e,_t.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||Yh(this.heightMap.lineAt(this.scaler.fromDOM(e),_t.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return Yh(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class im{constructor(e,t){this.from=e,this.to=t}}function i8(n,e,t){let r=[],i=n,s=0;return ot.spans(t,n,e,{span(){},point(o,l){o>i&&(r.push({from:i,to:o}),s+=o-i),i=l}},20),i<e&&(r.push({from:i,to:e}),s+=e-i),{total:s,ranges:r}}function sm({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let r=Math.floor(n*t);for(let i=0;;i++){let{from:s,to:o}=e[i],l=o-s;if(r<=l)return s+r;r-=l}}function om(n,e){let t=0;for(let{from:r,to:i}of n.ranges){if(e<=i){t+=e-r;break}t+=i-r}return t/n.total}function s8(n,e){for(let t of n)if(e(t))return t}const Qk={toDOM(n){return n},fromDOM(n){return n},scale:1,eq(n){return n==this}};class ZS{constructor(e,t,r){let i=0,s=0,o=0;this.viewports=r.map(({from:l,to:u})=>{let h=t.lineAt(l,_t.ByPos,e,0,0).top,d=t.lineAt(u,_t.ByPos,e,0,0).bottom;return i+=d-h,{from:l,to:u,top:h,bottom:d,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(t.height-i);for(let l of this.viewports)l.domTop=o+(l.top-s)*this.scale,o=l.domBottom=l.domTop+(l.bottom-l.top),s=l.bottom}toDOM(e){for(let t=0,r=0,i=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.top)return i+(e-r)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);r=s.bottom,i=s.domBottom}}fromDOM(e){for(let t=0,r=0,i=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.domTop)return r+(e-i)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);r=s.bottom,i=s.domBottom}}eq(e){return e instanceof ZS?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,r)=>t.from==e.viewports[r].from&&t.to==e.viewports[r].to):!1}}function Yh(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),r=e.toDOM(n.bottom);return new as(n.from,n.length,t,r-t,Array.isArray(n._content)?n._content.map(i=>Yh(i,e)):n._content)}const am=Se.define({combine:n=>n.join(" ")}),tx=Se.define({combine:n=>n.indexOf(!0)>-1}),nx=La.newName(),sD=La.newName(),oD=La.newName(),aD={"&light":"."+sD,"&dark":"."+oD};function rx(n,e,t){return new La(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return n;if(!t||!t[i])throw new RangeError(`Unsupported selector: ${i}`);return t[i]}):n+" "+r}})}const o8=rx("."+nx,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},aD),a8={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Xv=Te.ie&&Te.ie_version<=11;class l8{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new BW,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let r of t)this.queue.push(r);(Te.ie&&Te.ie_version<=11||Te.ios&&e.composing)&&t.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&e.constructor.EDIT_CONTEXT!==!1&&!(Te.chrome&&Te.chrome_version<126)&&(this.editContext=new u8(e),e.state.facet(no)&&(e.contentDOM.editContext=this.editContext.editContext)),Xv&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,r)=>t!=e[r]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(no)?r.root.activeElement!=this.dom:!Vm(this.dom,i))return;let s=i.anchorNode&&r.docView.nearest(i.anchorNode);if(s&&s.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(Te.ie&&Te.ie_version<=11||Te.android&&Te.chrome)&&!r.state.selection.main.empty&&i.focusNode&&cf(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=If(e.root);if(!t)return!1;let r=Te.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&c8(this.view,t)||t;if(!r||this.selectionRange.eq(r))return!1;let i=Vm(this.dom,r);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&qW(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let r=this.dom;r;)if(r.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=t)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,a8),Xv&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Xv&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var r;if(!this.delayedAndroidKey){let i=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&ru(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,r=-1,i=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(i=!0),t==-1?{from:t,to:r}=o:(t=Math.min(o.from,t),r=Math.max(o.to,r)))}return{from:t,to:r,typeOver:i}}readChange(){let{from:e,to:t,typeOver:r}=this.processRecords(),i=this.selectionChanged&&Vm(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new E6(this.view,e,t,r);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let r=this.view.state,i=XN(this.view,t);return this.view.state==r&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let r=jk(t,e.previousSibling||e.target.previousSibling,-1),i=jk(t,e.nextSibling||e.target.nextSibling,1);return{from:r?t.posAfter(r):t.posAtStart,to:i?t.posBefore(i):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(no)!=e.state.facet(no)&&(e.view.contentDOM.editContext=e.state.facet(no)?this.editContext.editContext:null))}destroy(){var e,t,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function jk(n,e,t){for(;e;){let r=yt.get(e);if(r&&r.parent==n)return r;let i=e.parentNode;e=i!=n.dom?i:t>0?e.nextSibling:e.previousSibling}return null}function zk(n,e){let t=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=n.docView.domAtPos(n.state.selection.main.anchor);return cf(o.node,o.offset,i,s)&&([t,r,i,s]=[i,s,t,r]),{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:s}}function c8(n,e){if(e.getComposedRanges){let i=e.getComposedRanges(n.root)[0];if(i)return zk(n,i)}let t=null;function r(i){i.preventDefault(),i.stopImmediatePropagation(),t=i.getTargetRanges()[0]}return n.contentDOM.addEventListener("beforeinput",r,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",r,!0),t?zk(n,t):null}class u8{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=r=>{let i=e.state.selection.main,{anchor:s,head:o}=i,l=this.toEditorPos(r.updateRangeStart),u=this.toEditorPos(r.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:r.updateRangeStart,editorBase:l,drifted:!1});let h={from:l,to:u,insert:it.of(r.text.split(`
`))};if(h.from==this.from&&s<this.from?h.from=s:h.to==this.to&&s>this.to&&(h.to=s),h.from==h.to&&!h.insert.length){let d=ie.single(this.toEditorPos(r.selectionStart),this.toEditorPos(r.selectionEnd));d.main.eq(i)||e.dispatch({selection:d,userEvent:"select"});return}if((Te.mac||Te.android)&&h.from==o-1&&/^\. ?$/.test(r.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(h={from:l,to:u,insert:it.of([r.text.replace("."," ")])}),this.pendingContextChange=h,!e.state.readOnly){let d=this.to-this.from+(h.to-h.from+h.insert.length);YS(e,h,ie.single(this.toEditorPos(r.selectionStart,d),this.toEditorPos(r.selectionEnd,d)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state))},this.handlers.characterboundsupdate=r=>{let i=[],s=null;for(let o=this.toEditorPos(r.rangeStart),l=this.toEditorPos(r.rangeEnd);o<l;o++){let u=e.coordsForChar(o);s=u&&new DOMRect(u.left,u.top,u.right-u.left,u.bottom-u.top)||s||new DOMRect,i.push(s)}t.updateCharacterBounds(r.rangeStart,i)},this.handlers.textformatupdate=r=>{let i=[];for(let s of r.getTextFormats()){let o=s.underlineStyle,l=s.underlineThickness;if(o!="None"&&l!="None"){let u=this.toEditorPos(s.rangeStart),h=this.toEditorPos(s.rangeEnd);if(u<h){let d=`text-decoration: underline ${o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${l=="Thin"?1:2}px`;i.push(Re.mark({attributes:{style:d}}).range(u,h))}}}e.dispatch({effects:$N.of(Re.set(i))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:r}=this.composing;this.composing=null,r&&this.reset(e.state)}};for(let r in this.handlers)t.addEventListener(r,this.handlers[r]);this.measureReq={read:r=>{this.editContext.updateControlBounds(r.contentDOM.getBoundingClientRect());let i=If(r.root);i&&i.rangeCount&&this.editContext.updateSelectionBounds(i.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,r=!1,i=this.pendingContextChange;return e.changes.iterChanges((s,o,l,u,h)=>{if(r)return;let d=h.length-(o-s);if(i&&o>=i.to)if(i.from==s&&i.to==o&&i.insert.eq(h)){i=this.pendingContextChange=null,t+=d,this.to+=d;return}else i=null,this.revertPending(e.state);if(s+=t,o+=t,o<=this.from)this.from+=d,this.to+=d;else if(s<this.to){if(s<this.from||o>this.to||this.to-this.from+h.length>3e4){r=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(o),h.toString()),this.to+=d}t+=d}),i&&!r&&this.revertPending(e.state),!r}update(e){let t=this.pendingContextChange,r=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(r.from,r.to)&&e.transactions.some(i=>!i.isUserEvent("input.type")&&i.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),i=this.toContextPos(t.head);(this.editContext.selectionStart!=r||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(r,i)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let r=this.composing;return r&&r.drifted?r.editorBase+(e-r.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Oe{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:r}=e;this.dispatchTransactions=e.dispatchTransactions||r&&(i=>i.forEach(s=>r(s,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=e.root||UW(e.parent)||document,this.viewState=new Fk(e.state||tt.create(e)),e.scrollTo&&e.scrollTo.is(tm)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Gh).map(i=>new qv(i));for(let i of this.plugins)i.update(this);this.observer=new l8(this),this.inputState=new R6(this),this.inputState.ensureHandlers(this.plugins),this.docView=new wk(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=e.length==1&&e[0]instanceof Wt?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,r=!1,i,s=this.state;for(let y of e){if(y.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=y.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,l=0,u=null;e.some(y=>y.annotation(tD))?(this.inputState.notifiedFocused=o,l=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,u=nD(s,o),u||(l=1));let h=this.observer.delayedAndroidKey,d=null;if(h?(this.observer.clearDelayedAndroidKey(),d=this.observer.readChange(),(d&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(d=null)):this.observer.clear(),s.facet(tt.phrases)!=this.state.facet(tt.phrases))return this.setState(s);i=kg.create(this,s,e),i.flags|=l;let m=this.viewState.scrollTarget;try{this.updateState=2;for(let y of e){if(m&&(m=m.map(y.changes)),y.scrollIntoView){let{main:v}=y.state.selection;m=new iu(v.empty?v:ie.cursor(v.head,v.head>v.anchor?-1:1))}for(let v of y.effects)v.is(tm)&&(m=v.value.clip(this.state))}this.viewState.update(i,m),this.bidiCache=Pg.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),t=this.docView.update(i),this.state.facet(Xh)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(y=>y.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(am)!=i.state.facet(am)&&(this.viewState.mustMeasureContent=!0),(t||r||m||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!i.empty)for(let y of this.state.facet(YO))try{y(i)}catch(v){wr(this.state,v,"update listener")}(u||d)&&Promise.resolve().then(()=>{u&&this.state==u.startState&&this.dispatch(u),d&&!XN(this,d)&&h.force&&ru(this.contentDOM,h.key,h.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new Fk(e),this.plugins=e.facet(Gh).map(r=>new qv(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new wk(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(Gh),r=e.state.facet(Gh);if(t!=r){let i=[];for(let s of r){let o=t.indexOf(s);if(o<0)i.push(new qv(s));else{let l=this.plugins[o];l.mustUpdate=e,i.push(l)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);t!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(r){wr(this.state,r,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,r=this.scrollDOM,i=r.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let l=0;;l++){if(o<0)if(gN(r))s=-1,o=this.viewState.heightMap.height;else{let v=this.viewState.scrollAnchorAt(i);s=v.from,o=v.top}this.updateState=1;let u=this.viewState.measure(this);if(!u&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let h=[];u&4||([this.measureRequests,h]=[h,this.measureRequests]);let d=h.map(v=>{try{return v.read(this)}catch(S){return wr(this.state,S),$k}}),m=kg.create(this,this.state,[]),y=!1;m.flags|=u,t?t.flags|=u:t=m,this.updateState=2,m.empty||(this.updatePlugins(m),this.inputState.update(m),this.updateAttrs(),y=this.docView.update(m),y&&this.docViewUpdate());for(let v=0;v<h.length;v++)if(d[v]!=$k)try{let S=h[v];S.write&&S.write(d[v],this)}catch(S){wr(this.state,S)}if(y&&this.docView.updateSelection(!0),!m.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let S=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(S>1||S<-1){i=i+S,r.scrollTop=i/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let l of this.state.facet(YO))l(t)}get themeClasses(){return nx+" "+(this.state.facet(tx)?oD:sD)+" "+this.state.facet(am)}updateAttrs(){let e=Bk(this,BN,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(no)?"true":"false",class:"cm-content",style:`${Te.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),Bk(this,GS,t);let r=this.observer.ignore(()=>{let i=WO(this.contentDOM,this.contentAttrs,t),s=WO(this.dom,this.editorAttrs,e);return i||s});return this.editorAttrs=e,this.contentAttrs=t,r}showAnnouncements(e){let t=!0;for(let r of e)for(let i of r.effects)if(i.is(Oe.announce)){t&&(this.announceDOM.textContent=""),t=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(Xh);let e=this.state.facet(Oe.cspNonce);La.mount(this.root,this.styleModules.concat(o8).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(r=>r.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,r){return Hv(this,e,Tk(this,e,t,r))}moveByGroup(e,t){return Hv(this,e,Tk(this,e,t,r=>S6(this,e.head,r)))}visualLineSide(e,t){let r=this.bidiSpans(e),i=this.textDirectionAt(e.from),s=r[t?r.length-1:0];return ie.cursor(s.side(t,i)+e.from,s.forward(!t,i)?1:-1)}moveToLineBoundary(e,t,r=!0){return x6(this,e,t,r)}moveVertically(e,t,r){return Hv(this,e,b6(this,e,t,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),GN(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let r=this.docView.coordsAt(e,t);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),s=this.bidiSpans(i),o=s[ma.find(s,e-i.from,-1,t)];return hd(r,o.dir==Et.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(QN)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>h8)return RN(e.length);let t=this.textDirectionAt(e.from),r;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==t&&(s.fresh||AN(s.isolates,r=vk(this,e))))return s.order;r||(r=vk(this,e));let i=s6(e.text,t,r);return this.bidiCache.push(new Pg(e.from,e.to,t,r,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Te.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{pN(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return tm.of(new iu(typeof e=="number"?ie.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return tm.of(new iu(ie.cursor(r.from),"start","start",r.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return zt.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return zt.define(()=>({}),{eventObservers:e})}static theme(e,t){let r=La.newName(),i=[am.of(r),Xh.of(rx(`.${r}`,e))];return t&&t.dark&&i.push(tx.of(!0)),i}static baseTheme(e){return qa.lowest(Xh.of(rx("."+nx,e,aD)))}static findFromDOM(e){var t;let r=e.querySelector(".cm-content"),i=r&&yt.get(r)||yt.get(e);return((t=i==null?void 0:i.rootView)===null||t===void 0?void 0:t.view)||null}}Oe.styleModule=Xh;Oe.inputHandler=VN;Oe.clipboardInputFilter=WS;Oe.clipboardOutputFilter=HS;Oe.scrollHandler=zN;Oe.focusChangeEffect=FN;Oe.perLineTextDirection=QN;Oe.exceptionSink=LN;Oe.updateListener=YO;Oe.editable=no;Oe.mouseSelectionStyle=MN;Oe.dragMovesSelection=DN;Oe.clickAddsSelectionRange=NN;Oe.decorations=Nf;Oe.outerDecorations=UN;Oe.atomicRanges=XS;Oe.bidiIsolatedRanges=qN;Oe.scrollMargins=WN;Oe.darkTheme=tx;Oe.cspNonce=Se.define({combine:n=>n.length?n[0]:""});Oe.contentAttributes=GS;Oe.editorAttributes=BN;Oe.lineWrapping=Oe.contentAttributes.of({class:"cm-lineWrapping"});Oe.announce=$e.define();const h8=4096,$k={};class Pg{constructor(e,t,r,i,s,o){this.from=e,this.to=t,this.dir=r,this.isolates=i,this.fresh=s,this.order=o}static update(e,t){if(t.empty&&!e.some(s=>s.fresh))return e;let r=[],i=e.length?e[e.length-1].dir:Et.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==i&&!t.touchesRange(o.from,o.to)&&r.push(new Pg(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return r}}function Bk(n,e,t){for(let r=n.state.facet(e),i=r.length-1;i>=0;i--){let s=r[i],o=typeof s=="function"?s(n):s;o&&qO(o,t)}return t}const f8=Te.mac?"mac":Te.windows?"win":Te.linux?"linux":"key";function d8(n,e){const t=n.split(/-(?!$)/);let r=t[t.length-1];r=="Space"&&(r=" ");let i,s,o,l;for(let u=0;u<t.length-1;++u){const h=t[u];if(/^(cmd|meta|m)$/i.test(h))l=!0;else if(/^a(lt)?$/i.test(h))i=!0;else if(/^(c|ctrl|control)$/i.test(h))s=!0;else if(/^s(hift)?$/i.test(h))o=!0;else if(/^mod$/i.test(h))e=="mac"?l=!0:s=!0;else throw new Error("Unrecognized modifier name: "+h)}return i&&(r="Alt-"+r),s&&(r="Ctrl-"+r),l&&(r="Meta-"+r),o&&(r="Shift-"+r),r}function lm(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}const p8=qa.default(Oe.domEventHandlers({keydown(n,e){return cD(lD(e.state),n,e,"editor")}})),pd=Se.define({enables:p8}),Uk=new WeakMap;function lD(n){let e=n.facet(pd),t=Uk.get(e);return t||Uk.set(e,t=y8(e.reduce((r,i)=>r.concat(i),[]))),t}function m8(n,e,t){return cD(lD(n.state),e,n,t)}let sa=null;const g8=4e3;function y8(n,e=f8){let t=Object.create(null),r=Object.create(null),i=(o,l)=>{let u=r[o];if(u==null)r[o]=l;else if(u!=l)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,l,u,h,d)=>{var m,y;let v=t[o]||(t[o]=Object.create(null)),S=l.split(/ (?!$)/).map(k=>d8(k,e));for(let k=1;k<S.length;k++){let M=S.slice(0,k).join(" ");i(M,!0),v[M]||(v[M]={preventDefault:!0,stopPropagation:!1,run:[F=>{let z=sa={view:F,prefix:M,scope:o};return setTimeout(()=>{sa==z&&(sa=null)},g8),!0}]})}let b=S.join(" ");i(b,!1);let T=v[b]||(v[b]={preventDefault:!1,stopPropagation:!1,run:((y=(m=v._any)===null||m===void 0?void 0:m.run)===null||y===void 0?void 0:y.slice())||[]});u&&T.run.push(u),h&&(T.preventDefault=!0),d&&(T.stopPropagation=!0)};for(let o of n){let l=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let h of l){let d=t[h]||(t[h]=Object.create(null));d._any||(d._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:m}=o;for(let y in d)d[y].run.push(v=>m(v,ix))}let u=o[e]||o.key;if(u)for(let h of l)s(h,u,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(h,"Shift-"+u,o.shift,o.preventDefault,o.stopPropagation)}return t}let ix=null;function cD(n,e,t,r){ix=e;let i=QW(e),s=mr(i,0),o=os(s)==i.length&&i!=" ",l="",u=!1,h=!1,d=!1;sa&&sa.view==t&&sa.scope==r&&(l=sa.prefix+" ",YN.indexOf(e.keyCode)<0&&(h=!0,sa=null));let m=new Set,y=T=>{if(T){for(let k of T.run)if(!m.has(k)&&(m.add(k),k(t)))return T.stopPropagation&&(d=!0),!0;T.preventDefault&&(T.stopPropagation&&(d=!0),h=!0)}return!1},v=n[r],S,b;return v&&(y(v[l+lm(i,e,!o)])?u=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Te.windows&&e.ctrlKey&&e.altKey)&&(S=Va[e.keyCode])&&S!=i?(y(v[l+lm(S,e,!0)])||e.shiftKey&&(b=Rf[e.keyCode])!=i&&b!=S&&y(v[l+lm(b,e,!1)]))&&(u=!0):o&&e.shiftKey&&y(v[l+lm(i,e,!0)])&&(u=!0),!u&&y(v._any)&&(u=!0)),h&&(u=!0),u&&d&&e.stopPropagation(),ix=null,u}class md{constructor(e,t,r,i,s){this.className=e,this.left=t,this.top=r,this.width=i,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,r){if(r.empty){let i=e.coordsAtPos(r.head,r.assoc||1);if(!i)return[];let s=uD(e);return[new md(t,i.left-s.left,i.top-s.top,null,i.bottom-i.top)]}else return v8(e,t,r)}}function uD(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==Et.LTR?e.left:e.right-n.scrollDOM.clientWidth*n.scaleX)-n.scrollDOM.scrollLeft*n.scaleX,top:e.top-n.scrollDOM.scrollTop*n.scaleY}}function qk(n,e,t,r){let i=n.coordsAtPos(e,t*2);if(!i)return r;let s=n.dom.getBoundingClientRect(),o=(i.top+i.bottom)/2,l=n.posAtCoords({x:s.left+1,y:o}),u=n.posAtCoords({x:s.right-1,y:o});return l==null||u==null?r:{from:Math.max(r.from,Math.min(l,u)),to:Math.min(r.to,Math.max(l,u))}}function v8(n,e,t){if(t.to<=n.viewport.from||t.from>=n.viewport.to)return[];let r=Math.max(t.from,n.viewport.from),i=Math.min(t.to,n.viewport.to),s=n.textDirection==Et.LTR,o=n.contentDOM,l=o.getBoundingClientRect(),u=uD(n),h=o.querySelector(".cm-line"),d=h&&window.getComputedStyle(h),m=l.left+(d?parseInt(d.paddingLeft)+Math.min(0,parseInt(d.textIndent)):0),y=l.right-(d?parseInt(d.paddingRight):0),v=ZO(n,r,1),S=ZO(n,i,-1),b=v.type==Zn.Text?v:null,T=S.type==Zn.Text?S:null;if(b&&(n.lineWrapping||v.widgetLineBreaks)&&(b=qk(n,r,1,b)),T&&(n.lineWrapping||S.widgetLineBreaks)&&(T=qk(n,i,-1,T)),b&&T&&b.from==T.from&&b.to==T.to)return M(F(t.from,t.to,b));{let $=b?F(t.from,null,b):z(v,!1),U=T?F(null,t.to,T):z(S,!0),C=[];return(b||v).to<(T||S).from-(b&&T?1:0)||v.widgetLineBreaks>1&&$.bottom+n.defaultLineHeight/2<U.top?C.push(k(m,$.bottom,y,U.top)):$.bottom<U.top&&n.elementAtHeight(($.bottom+U.top)/2).type==Zn.Text&&($.bottom=U.top=($.bottom+U.top)/2),M($).concat(C).concat(M(U))}function k($,U,C,P){return new md(e,$-u.left,U-u.top,C-$,P-U)}function M({top:$,bottom:U,horizontal:C}){let P=[];for(let A=0;A<C.length;A+=2)P.push(k(C[A],$,C[A+1],U));return P}function F($,U,C){let P=1e9,A=-1e9,L=[];function Q(te,me,ge,fe,Z){let ee=n.coordsAtPos(te,te==C.to?-2:2),se=n.coordsAtPos(ge,ge==C.from?2:-2);!ee||!se||(P=Math.min(ee.top,se.top,P),A=Math.max(ee.bottom,se.bottom,A),Z==Et.LTR?L.push(s&&me?m:ee.left,s&&fe?y:se.right):L.push(!s&&fe?m:se.left,!s&&me?y:ee.right))}let V=$??C.from,N=U??C.to;for(let te of n.visibleRanges)if(te.to>V&&te.from<N)for(let me=Math.max(te.from,V),ge=Math.min(te.to,N);;){let fe=n.state.doc.lineAt(me);for(let Z of n.bidiSpans(fe)){let ee=Z.from+fe.from,se=Z.to+fe.from;if(ee>=ge)break;se>me&&Q(Math.max(ee,me),$==null&&ee<=V,Math.min(se,ge),U==null&&se>=N,Z.dir)}if(me=fe.to+1,me>=ge)break}return L.length==0&&Q(V,$==null,N,U==null,n.textDirection),{top:P,bottom:A,horizontal:L}}function z($,U){let C=l.top+(U?$.top:$.bottom);return{top:C,bottom:C,horizontal:[]}}}function w8(n,e){return n.constructor==e.constructor&&n.eq(e)}class O8{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(zm)!=e.state.facet(zm)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,r=e.facet(zm);for(;t<r.length&&r[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,r)=>!w8(t,this.drawn[r]))){let t=this.dom.firstChild,r=0;for(let i of e)i.update&&t&&i.constructor&&this.drawn[r].constructor&&i.update(t,this.drawn[r])?(t=t.nextSibling,r++):this.dom.insertBefore(i.draw(),t);for(;t;){let i=t.nextSibling;t.remove(),t=i}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const zm=Se.define();function hD(n){return[zt.define(e=>new O8(e,n)),zm.of(n)]}const Df=Se.define({combine(n){return _s(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function x8(n={}){return[Df.of(n),S8,b8,T8,jN.of(!0)]}function fD(n){return n.startState.facet(Df)!=n.state.facet(Df)}const S8=hD({above:!0,markers(n){let{state:e}=n,t=e.facet(Df),r=[];for(let i of e.selection.ranges){let s=i==e.selection.main;if(i.empty||t.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",l=i.empty?i:ie.cursor(i.head,i.head>i.anchor?-1:1);for(let u of md.forRange(n,o,l))r.push(u)}}return r},update(n,e){n.transactions.some(r=>r.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=fD(n);return t&&Wk(n.state,e),n.docChanged||n.selectionSet||t},mount(n,e){Wk(e.state,n)},class:"cm-cursorLayer"});function Wk(n,e){e.style.animationDuration=n.facet(Df).cursorBlinkRate+"ms"}const b8=hD({above:!1,markers(n){return n.state.selection.ranges.map(e=>e.empty?[]:md.forRange(n,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(n,e){return n.docChanged||n.selectionSet||n.viewportChanged||fD(n)},class:"cm-selectionLayer"}),T8=qa.highest(Oe.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),dD=$e.define({map(n,e){return n==null?null:e.mapPos(n)}}),Jh=pn.define({create(){return null},update(n,e){return n!=null&&(n=e.changes.mapPos(n)),e.effects.reduce((t,r)=>r.is(dD)?r.value:t,n)}}),_8=zt.fromClass(class{constructor(n){this.view=n,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(n){var e;let t=n.state.field(Jh);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(n.startState.field(Jh)!=t||n.docChanged||n.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:n}=this,e=n.state.field(Jh),t=e!=null&&n.coordsAtPos(e);if(!t)return null;let r=n.scrollDOM.getBoundingClientRect();return{left:t.left-r.left+n.scrollDOM.scrollLeft*n.scaleX,top:t.top-r.top+n.scrollDOM.scrollTop*n.scaleY,height:t.bottom-t.top}}drawCursor(n){if(this.cursor){let{scaleX:e,scaleY:t}=this.view;n?(this.cursor.style.left=n.left/e+"px",this.cursor.style.top=n.top/t+"px",this.cursor.style.height=n.height/t+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(n){this.view.state.field(Jh)!=n&&this.view.dispatch({effects:dD.of(n)})}},{eventObservers:{dragover(n){this.setDropPos(this.view.posAtCoords({x:n.clientX,y:n.clientY}))},dragleave(n){(n.target==this.view.contentDOM||!this.view.contentDOM.contains(n.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function E8(){return[Jh,_8]}function Hk(n,e,t,r,i){e.lastIndex=0;for(let s=n.iterRange(t,r),o=t,l;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;l=e.exec(s.value);)i(o+l.index,l)}function k8(n,e){let t=n.visibleRanges;if(t.length==1&&t[0].from==n.viewport.from&&t[0].to==n.viewport.to)return t;let r=[];for(let{from:i,to:s}of t)i=Math.max(n.state.doc.lineAt(i).from,i-e),s=Math.min(n.state.doc.lineAt(s).to,s+e),r.length&&r[r.length-1].to>=i?r[r.length-1].to=s:r.push({from:i,to:s});return r}class C8{constructor(e){const{regexp:t,decoration:r,decorate:i,boundary:s,maxLength:o=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,i)this.addMatch=(l,u,h,d)=>i(d,h,h+l[0].length,l,u);else if(typeof r=="function")this.addMatch=(l,u,h,d)=>{let m=r(l,u,h);m&&d(h,h+l[0].length,m)};else if(r)this.addMatch=(l,u,h,d)=>d(h,h+l[0].length,r);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let t=new go,r=t.add.bind(t);for(let{from:i,to:s}of k8(e,this.maxLength))Hk(e.state.doc,this.regexp,i,s,(o,l)=>this.addMatch(l,e,o,r));return t.finish()}updateDeco(e,t){let r=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((s,o,l,u)=>{u>=e.view.viewport.from&&l<=e.view.viewport.to&&(r=Math.min(l,r),i=Math.max(u,i))}),e.viewportMoved||i-r>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,t.map(e.changes),r,i):t}updateRange(e,t,r,i){for(let s of e.visibleRanges){let o=Math.max(s.from,r),l=Math.min(s.to,i);if(l>o){let u=e.state.doc.lineAt(o),h=u.to<l?e.state.doc.lineAt(l):u,d=Math.max(s.from,u.from),m=Math.min(s.to,h.to);if(this.boundary){for(;o>u.from;o--)if(this.boundary.test(u.text[o-1-u.from])){d=o;break}for(;l<h.to;l++)if(this.boundary.test(h.text[l-h.from])){m=l;break}}let y=[],v,S=(b,T,k)=>y.push(k.range(b,T));if(u==h)for(this.regexp.lastIndex=d-u.from;(v=this.regexp.exec(u.text))&&v.index<m-u.from;)this.addMatch(v,e,v.index+u.from,S);else Hk(e.state.doc,this.regexp,d,m,(b,T)=>this.addMatch(T,e,b,S));t=t.update({filterFrom:d,filterTo:m,filter:(b,T)=>b<d||T>m,add:y})}}return t}}const sx=/x/.unicode!=null?"gu":"g",P8=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,sx),A8={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Kv=null;function R8(){var n;if(Kv==null&&typeof document<"u"&&document.body){let e=document.body.style;Kv=((n=e.tabSize)!==null&&n!==void 0?n:e.MozTabSize)!=null}return Kv||!1}const $m=Se.define({combine(n){let e=_s(n,{render:null,specialChars:P8,addSpecialChars:null});return(e.replaceTabs=!R8())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,sx)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,sx)),e}});function I8(n={}){return[$m.of(n),N8()]}let Gk=null;function N8(){return Gk||(Gk=zt.fromClass(class{constructor(n){this.view=n,this.decorations=Re.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(n.state.facet($m)),this.decorations=this.decorator.createDeco(n)}makeDecorator(n){return new C8({regexp:n.specialChars,decoration:(e,t,r)=>{let{doc:i}=t.state,s=mr(e[0],0);if(s==9){let o=i.lineAt(r),l=t.state.tabSize,u=Gu(o.text,l,r-o.from);return Re.replace({widget:new V8((l-u%l)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=Re.replace({widget:new L8(n,s)}))},boundary:n.replaceTabs?void 0:/[^]/})}update(n){let e=n.state.facet($m);n.startState.facet($m)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(n.view)):this.decorations=this.decorator.updateDeco(n,this.decorations)}},{decorations:n=>n.decorations}))}const D8="";function M8(n){return n>=32?D8:n==10?"":String.fromCharCode(9216+n)}class L8 extends Es{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=M8(this.code),r=e.state.phrase("Control character")+" "+(A8[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,r,t);if(i)return i;let s=document.createElement("span");return s.textContent=t,s.title=r,s.setAttribute("aria-label",r),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class V8 extends Es{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function F8(){return j8}const Q8=Re.line({class:"cm-activeLine"}),j8=zt.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,t=[];for(let r of n.state.selection.ranges){let i=n.lineBlockAt(r.head);i.from>e&&(t.push(Q8.range(i.from)),e=i.from)}return Re.set(t)}},{decorations:n=>n.decorations});class z8 extends Es{constructor(e){super(),this.content=e}toDOM(e){let t=document.createElement("span");return t.className="cm-placeholder",t.style.pointerEvents="none",t.appendChild(typeof this.content=="string"?document.createTextNode(this.content):typeof this.content=="function"?this.content(e):this.content.cloneNode(!0)),typeof this.content=="string"?t.setAttribute("aria-label","placeholder "+this.content):t.setAttribute("aria-hidden","true"),t}coordsAt(e){let t=e.firstChild?Pu(e.firstChild):[];if(!t.length)return null;let r=window.getComputedStyle(e.parentNode),i=hd(t[0],r.direction!="rtl"),s=parseInt(r.lineHeight);return i.bottom-i.top>s*1.5?{left:i.left,right:i.right,top:i.top,bottom:i.top+s}:i}ignoreEvent(){return!1}}function $8(n){return zt.fromClass(class{constructor(e){this.view=e,this.placeholder=n?Re.set([Re.widget({widget:new z8(n),side:1}).range(0)]):Re.none}get decorations(){return this.view.state.doc.length?Re.none:this.placeholder}},{decorations:e=>e.decorations})}const ox=2e3;function B8(n,e,t){let r=Math.min(e.line,t.line),i=Math.max(e.line,t.line),s=[];if(e.off>ox||t.off>ox||e.col<0||t.col<0){let o=Math.min(e.off,t.off),l=Math.max(e.off,t.off);for(let u=r;u<=i;u++){let h=n.doc.line(u);h.length<=l&&s.push(ie.range(h.from+o,h.to+l))}}else{let o=Math.min(e.col,t.col),l=Math.max(e.col,t.col);for(let u=r;u<=i;u++){let h=n.doc.line(u),d=FO(h.text,o,n.tabSize,!0);if(d<0)s.push(ie.cursor(h.to));else{let m=FO(h.text,l,n.tabSize);s.push(ie.range(h.from+d,h.from+m))}}}return s}function U8(n,e){let t=n.coordsAtPos(n.viewport.from);return t?Math.round(Math.abs((t.left-e)/n.defaultCharacterWidth)):-1}function Xk(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1),r=n.state.doc.lineAt(t),i=t-r.from,s=i>ox?-1:i==r.length?U8(n,e.clientX):Gu(r.text,n.state.tabSize,t-r.from);return{line:r.number,col:s,off:i}}function q8(n,e){let t=Xk(n,e),r=n.state.selection;return t?{update(i){if(i.docChanged){let s=i.changes.mapPos(i.startState.doc.line(t.line).from),o=i.state.doc.lineAt(s);t={line:o.number,col:t.col,off:Math.min(t.off,o.length)},r=r.map(i.changes)}},get(i,s,o){let l=Xk(n,i);if(!l)return r;let u=B8(n.state,t,l);return u.length?o?ie.create(u.concat(r.ranges)):ie.create(u):r}}:null}function W8(n){let e=t=>t.altKey&&t.button==0;return Oe.mouseSelectionStyle.of((t,r)=>e(r)?q8(t,r):null)}const H8={Alt:[18,n=>!!n.altKey],Control:[17,n=>!!n.ctrlKey],Shift:[16,n=>!!n.shiftKey],Meta:[91,n=>!!n.metaKey]},G8={style:"cursor: crosshair"};function X8(n={}){let[e,t]=H8[n.key||"Alt"],r=zt.fromClass(class{constructor(i){this.view=i,this.isDown=!1}set(i){this.isDown!=i&&(this.isDown=i,this.view.update([]))}},{eventObservers:{keydown(i){this.set(i.keyCode==e||t(i))},keyup(i){(i.keyCode==e||!t(i))&&this.set(!1)},mousemove(i){this.set(t(i))}}});return[r,Oe.contentAttributes.of(i=>{var s;return!((s=i.plugin(r))===null||s===void 0)&&s.isDown?G8:null})]}const Fh="-10000px";class pD{constructor(e,t,r,i){this.facet=t,this.createTooltipView=r,this.removeTooltipView=i,this.input=e.state.facet(t),this.tooltips=this.input.filter(o=>o);let s=null;this.tooltipViews=this.tooltips.map(o=>s=r(o,s))}update(e,t){var r;let i=e.state.facet(this.facet),s=i.filter(u=>u);if(i===this.input){for(let u of this.tooltipViews)u.update&&u.update(e);return!1}let o=[],l=t?[]:null;for(let u=0;u<s.length;u++){let h=s[u],d=-1;if(h){for(let m=0;m<this.tooltips.length;m++){let y=this.tooltips[m];y&&y.create==h.create&&(d=m)}if(d<0)o[u]=this.createTooltipView(h,u?o[u-1]:null),l&&(l[u]=!!h.above);else{let m=o[u]=this.tooltipViews[d];l&&(l[u]=t[d]),m.update&&m.update(e)}}}for(let u of this.tooltipViews)o.indexOf(u)<0&&(this.removeTooltipView(u),(r=u.destroy)===null||r===void 0||r.call(u));return t&&(l.forEach((u,h)=>t[h]=u),t.length=l.length),this.input=i,this.tooltips=s,this.tooltipViews=o,!0}}function K8(n){let e=n.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const Yv=Se.define({combine:n=>{var e,t,r;return{position:Te.ios?"absolute":((e=n.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=n.find(i=>i.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((r=n.find(i=>i.tooltipSpace))===null||r===void 0?void 0:r.tooltipSpace)||K8}}}),Kk=new WeakMap,e1=zt.fromClass(class{constructor(n){this.view=n,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=n.state.facet(Yv);this.position=e.position,this.parent=e.parent,this.classes=n.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new pD(n,t1,(t,r)=>this.createTooltip(t,r),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),n.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let n of this.manager.tooltipViews)this.intersectionObserver.observe(n.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(n){n.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(n,this.above);e&&this.observeIntersection();let t=e||n.geometryChanged,r=n.state.facet(Yv);if(r.position!=this.position&&!this.madeAbsolute){this.position=r.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;t=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(n,e){let t=n.create(this.view),r=e?e.dom:null;if(t.dom.classList.add("cm-tooltip"),n.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let i=document.createElement("div");i.className="cm-tooltip-arrow",t.dom.appendChild(i)}return t.dom.style.position=this.position,t.dom.style.top=Fh,t.dom.style.left="0px",this.container.insertBefore(t.dom,r),t.mount&&t.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(t.dom),t}destroy(){var n,e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let r of this.manager.tooltipViews)r.dom.remove(),(n=r.destroy)===null||n===void 0||n.call(r);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let n=1,e=1,t=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:s}=this.manager.tooltipViews[0];if(Te.gecko)t=s.offsetParent!=this.container.ownerDocument.body;else if(s.style.top==Fh&&s.style.left=="0px"){let o=s.getBoundingClientRect();t=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(t||this.position=="absolute")if(this.parent){let s=this.parent.getBoundingClientRect();s.width&&s.height&&(n=s.width/this.parent.offsetWidth,e=s.height/this.parent.offsetHeight)}else({scaleX:n,scaleY:e}=this.view.viewState);let r=this.view.scrollDOM.getBoundingClientRect(),i=KS(this.view);return{visible:{left:r.left+i.left,top:r.top+i.top,right:r.right-i.right,bottom:r.bottom-i.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((s,o)=>{let l=this.manager.tooltipViews[o];return l.getCoords?l.getCoords(s.pos):this.view.coordsAtPos(s.pos)}),size:this.manager.tooltipViews.map(({dom:s})=>s.getBoundingClientRect()),space:this.view.state.facet(Yv).tooltipSpace(this.view),scaleX:n,scaleY:e,makeAbsolute:t}}writeMeasure(n){var e;if(n.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let l of this.manager.tooltipViews)l.dom.style.position="absolute"}let{visible:t,space:r,scaleX:i,scaleY:s}=n,o=[];for(let l=0;l<this.manager.tooltips.length;l++){let u=this.manager.tooltips[l],h=this.manager.tooltipViews[l],{dom:d}=h,m=n.pos[l],y=n.size[l];if(!m||u.clip!==!1&&(m.bottom<=Math.max(t.top,r.top)||m.top>=Math.min(t.bottom,r.bottom)||m.right<Math.max(t.left,r.left)-.1||m.left>Math.min(t.right,r.right)+.1)){d.style.top=Fh;continue}let v=u.arrow?h.dom.querySelector(".cm-tooltip-arrow"):null,S=v?7:0,b=y.right-y.left,T=(e=Kk.get(h))!==null&&e!==void 0?e:y.bottom-y.top,k=h.offset||J8,M=this.view.textDirection==Et.LTR,F=y.width>r.right-r.left?M?r.left:r.right-y.width:M?Math.max(r.left,Math.min(m.left-(v?14:0)+k.x,r.right-b)):Math.min(Math.max(r.left,m.left-b+(v?14:0)-k.x),r.right-b),z=this.above[l];!u.strictSide&&(z?m.top-T-S-k.y<r.top:m.bottom+T+S+k.y>r.bottom)&&z==r.bottom-m.bottom>m.top-r.top&&(z=this.above[l]=!z);let $=(z?m.top-r.top:r.bottom-m.bottom)-S;if($<T&&h.resize!==!1){if($<this.view.defaultLineHeight){d.style.top=Fh;continue}Kk.set(h,T),d.style.height=(T=$)/s+"px"}else d.style.height&&(d.style.height="");let U=z?m.top-T-S-k.y:m.bottom+S+k.y,C=F+b;if(h.overlap!==!0)for(let P of o)P.left<C&&P.right>F&&P.top<U+T&&P.bottom>U&&(U=z?P.top-T-2-S:P.bottom+S+2);if(this.position=="absolute"?(d.style.top=(U-n.parent.top)/s+"px",Yk(d,(F-n.parent.left)/i)):(d.style.top=U/s+"px",Yk(d,F/i)),v){let P=m.left+(M?k.x:-k.x)-(F+14-7);v.style.left=P/i+"px"}h.overlap!==!0&&o.push({left:F,top:U,right:C,bottom:U+T}),d.classList.toggle("cm-tooltip-above",z),d.classList.toggle("cm-tooltip-below",!z),h.positioned&&h.positioned(n.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let n of this.manager.tooltipViews)n.dom.style.top=Fh}},{eventObservers:{scroll(){this.maybeMeasure()}}});function Yk(n,e){let t=parseInt(n.style.left,10);(isNaN(t)||Math.abs(e-t)>1)&&(n.style.left=e+"px")}const Y8=Oe.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),J8={x:0,y:0},t1=Se.define({enables:[e1,Y8]}),Ag=Se.define({combine:n=>n.reduce((e,t)=>e.concat(t),[])});class Dy{static create(e){return new Dy(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new pD(e,Ag,(t,r)=>this.createHostedView(t,r),t=>t.dom.remove())}createHostedView(e,t){let r=e.create(this.view);return r.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(r.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&r.mount&&r.mount(this.view),r}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let r of this.manager.tooltipViews){let i=r[e];if(i!==void 0){if(t===void 0)t=i;else if(t!==i)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const Z8=t1.compute([Ag],n=>{let e=n.facet(Ag);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.map(t=>{var r;return(r=t.end)!==null&&r!==void 0?r:t.pos})),create:Dy.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class eH{constructor(e,t,r,i,s){this.view=e,this.source=t,this.field=r,this.setHover=i,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,r=e.docView.nearest(t.target);if(!r)return;let i,s=1;if(r instanceof pa)i=r.posAtStart;else{if(i=e.posAtCoords(t),i==null)return;let l=e.coordsAtPos(i);if(!l||t.y<l.top||t.y>l.bottom||t.x<l.left-e.defaultCharacterWidth||t.x>l.right+e.defaultCharacterWidth)return;let u=e.bidiSpans(e.state.doc.lineAt(i)).find(d=>d.from<=i&&d.to>=i),h=u&&u.dir==Et.RTL?-1:1;s=t.x<l.left?-h:h}let o=this.source(e,i,s);if(o!=null&&o.then){let l=this.pending={pos:i};o.then(u=>{this.pending==l&&(this.pending=null,u&&!(Array.isArray(u)&&!u.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(u)?u:[u])}))},u=>wr(e.state,u,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(e1),t=e?e.manager.tooltips.findIndex(r=>r.create==Dy.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,r;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:i,tooltip:s}=this;if(i.length&&s&&!tH(s.dom,e)||this.pending){let{pos:o}=i[0]||this.pending,l=(r=(t=i[0])===null||t===void 0?void 0:t.end)!==null&&r!==void 0?r:o;(o==l?this.view.posAtCoords(this.lastMove)!=o:!nH(this.view,o,l,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:r}=this;r&&r.dom.contains(e.relatedTarget)?this.watchTooltipLeave(r.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=r=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(r.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const cm=4;function tH(n,e){let{left:t,right:r,top:i,bottom:s}=n.getBoundingClientRect(),o;if(o=n.querySelector(".cm-tooltip-arrow")){let l=o.getBoundingClientRect();i=Math.min(l.top,i),s=Math.max(l.bottom,s)}return e.clientX>=t-cm&&e.clientX<=r+cm&&e.clientY>=i-cm&&e.clientY<=s+cm}function nH(n,e,t,r,i,s){let o=n.scrollDOM.getBoundingClientRect(),l=n.documentTop+n.documentPadding.top+n.contentHeight;if(o.left>r||o.right<r||o.top>i||Math.min(o.bottom,l)<i)return!1;let u=n.posAtCoords({x:r,y:i},!1);return u>=e&&u<=t}function rH(n,e={}){let t=$e.define(),r=pn.define({create(){return[]},update(i,s){if(i.length&&(e.hideOnChange&&(s.docChanged||s.selection)?i=[]:e.hideOn&&(i=i.filter(o=>!e.hideOn(s,o))),s.docChanged)){let o=[];for(let l of i){let u=s.changes.mapPos(l.pos,-1,_n.TrackDel);if(u!=null){let h=Object.assign(Object.create(null),l);h.pos=u,h.end!=null&&(h.end=s.changes.mapPos(h.end)),o.push(h)}}i=o}for(let o of s.effects)o.is(t)&&(i=o.value),o.is(iH)&&(i=[]);return i},provide:i=>Ag.from(i)});return{active:r,extension:[r,zt.define(i=>new eH(i,n,r,t,e.hoverTime||300)),Z8]}}function mD(n,e){let t=n.plugin(e1);if(!t)return null;let r=t.manager.tooltips.indexOf(e);return r<0?null:t.manager.tooltipViews[r]}const iH=$e.define(),Jk=Se.define({combine(n){let e,t;for(let r of n)e=e||r.topContainer,t=t||r.bottomContainer;return{topContainer:e,bottomContainer:t}}});function Mf(n,e){let t=n.plugin(gD),r=t?t.specs.indexOf(e):-1;return r>-1?t.panels[r]:null}const gD=zt.fromClass(class{constructor(n){this.input=n.state.facet(Lf),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(n));let e=n.state.facet(Jk);this.top=new um(n,!0,e.topContainer),this.bottom=new um(n,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(n){let e=n.state.facet(Jk);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new um(n.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new um(n.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=n.state.facet(Lf);if(t!=this.input){let r=t.filter(u=>u),i=[],s=[],o=[],l=[];for(let u of r){let h=this.specs.indexOf(u),d;h<0?(d=u(n.view),l.push(d)):(d=this.panels[h],d.update&&d.update(n)),i.push(d),(d.top?s:o).push(d)}this.specs=r,this.panels=i,this.top.sync(s),this.bottom.sync(o);for(let u of l)u.dom.classList.add("cm-panel"),u.mount&&u.mount()}else for(let r of this.panels)r.update&&r.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>Oe.scrollMargins.of(e=>{let t=e.plugin(n);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class um{constructor(e,t,r){this.view=e,this.top=t,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=Zk(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=Zk(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function Zk(n){let e=n.nextSibling;return n.remove(),e}const Lf=Se.define({enables:gD});class vo extends Bl{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}vo.prototype.elementClass="";vo.prototype.toDOM=void 0;vo.prototype.mapMode=_n.TrackBefore;vo.prototype.startSide=vo.prototype.endSide=-1;vo.prototype.point=!0;const Bm=Se.define(),sH=Se.define(),oH={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>ot.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},hf=Se.define();function aH(n){return[yD(),hf.of(Object.assign(Object.assign({},oH),n))]}const eC=Se.define({combine:n=>n.some(e=>e)});function yD(n){return[lH]}const lH=zt.fromClass(class{constructor(n){this.view=n,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=n.state.facet(hf).map(e=>new nC(n,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!n.state.facet(eC),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,r=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(r<(t.to-t.from)*.8)}n.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(eC)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&this.dom.remove();let t=ot.iter(this.view.state.facet(Bm),this.view.viewport.from),r=[],i=this.gutters.map(s=>new cH(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(s.type)){let o=!0;for(let l of s.type)if(l.type==Zn.Text&&o){ax(t,r,l.from);for(let u of i)u.line(this.view,l,r);o=!1}else if(l.widget)for(let u of i)u.widget(this.view,l)}else if(s.type==Zn.Text){ax(t,r,s.from);for(let o of i)o.line(this.view,s,r)}else if(s.widget)for(let o of i)o.widget(this.view,s);for(let s of i)s.finish();n&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(n){let e=n.startState.facet(hf),t=n.state.facet(hf),r=n.docChanged||n.heightChanged||n.viewportChanged||!ot.eq(n.startState.facet(Bm),n.state.facet(Bm),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let i of this.gutters)i.update(n)&&(r=!0);else{r=!0;let i=[];for(let s of t){let o=e.indexOf(s);o<0?i.push(new nC(this.view,s)):(this.gutters[o].update(n),i.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),i.indexOf(s)<0&&s.destroy();for(let s of i)this.dom.appendChild(s.dom);this.gutters=i}return r}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove()}},{provide:n=>Oe.scrollMargins.of(e=>{let t=e.plugin(n);return!t||t.gutters.length==0||!t.fixed?null:e.textDirection==Et.LTR?{left:t.dom.offsetWidth*e.scaleX}:{right:t.dom.offsetWidth*e.scaleX}})});function tC(n){return Array.isArray(n)?n:[n]}function ax(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}class cH{constructor(e,t,r){this.gutter=e,this.height=r,this.i=0,this.cursor=ot.iter(e.markers,t.from)}addElement(e,t,r){let{gutter:i}=this,s=(t.top-this.height)/e.scaleY,o=t.height/e.scaleY;if(this.i==i.elements.length){let l=new vD(e,o,s,r);i.elements.push(l),i.dom.appendChild(l.dom)}else i.elements[this.i].update(e,o,s,r);this.height=t.bottom,this.i++}line(e,t,r){let i=[];ax(this.cursor,i,t.from),r.length&&(i=i.concat(r));let s=this.gutter.config.lineMarker(e,t,i);s&&i.unshift(s);let o=this.gutter;i.length==0&&!o.config.renderEmptyElements||this.addElement(e,t,i)}widget(e,t){let r=this.gutter.config.widgetMarker(e,t.widget,t),i=r?[r]:null;for(let s of e.state.facet(sH)){let o=s(e,t.widget,t);o&&(i||(i=[])).push(o)}i&&this.addElement(e,t,i)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class nC{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in t.domEventHandlers)this.dom.addEventListener(r,i=>{let s=i.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let u=s.getBoundingClientRect();o=(u.top+u.bottom)/2}else o=i.clientY;let l=e.lineBlockAtHeight(o-e.documentTop);t.domEventHandlers[r](e,l,i)&&i.preventDefault()});this.markers=tC(t.markers(e)),t.initialSpacer&&(this.spacer=new vD(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=tC(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!ot.eq(this.markers,t,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class vD{constructor(e,t,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,r,i)}update(e,t,r,i){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),uH(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,t){let r="cm-gutterElement",i=this.dom.firstChild;for(let s=0,o=0;;){let l=o,u=s<t.length?t[s++]:null,h=!1;if(u){let d=u.elementClass;d&&(r+=" "+d);for(let m=o;m<this.markers.length;m++)if(this.markers[m].compare(u)){l=m,h=!0;break}}else l=this.markers.length;for(;o<l;){let d=this.markers[o++];if(d.toDOM){d.destroy(i);let m=i.nextSibling;i.remove(),i=m}}if(!u)break;u.toDOM&&(h?i=i.nextSibling:this.dom.insertBefore(u.toDOM(e),i)),h&&o++}this.dom.className=r,this.markers=t}destroy(){this.setMarkers(null,[])}}function uH(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}const hH=Se.define(),fH=Se.define(),qc=Se.define({combine(n){return _s(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let r=Object.assign({},e);for(let i in t){let s=r[i],o=t[i];r[i]=s?(l,u,h)=>s(l,u,h)||o(l,u,h):o}return r}})}});class Jv extends vo{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Zv(n,e){return n.state.facet(qc).formatNumber(e,n.state)}const dH=hf.compute([qc],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(hH)},lineMarker(e,t,r){return r.some(i=>i.toDOM)?null:new Jv(Zv(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,r)=>{for(let i of e.state.facet(fH)){let s=i(e,t,r);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(qc)!=e.state.facet(qc),initialSpacer(e){return new Jv(Zv(e,rC(e.state.doc.lines)))},updateSpacer(e,t){let r=Zv(t.view,rC(t.view.state.doc.lines));return r==e.number?e:new Jv(r)},domEventHandlers:n.facet(qc).domEventHandlers}));function pH(n={}){return[qc.of(n),yD(),dH]}function rC(n){let e=9;for(;e<n;)e=e*10+9;return e}const mH=new class extends vo{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},gH=Bm.compute(["selection"],n=>{let e=[],t=-1;for(let r of n.selection.ranges){let i=n.doc.lineAt(r.head).from;i>t&&(t=i,e.push(mH.range(i)))}return ot.of(e)});function yH(){return gH}const wD=1024;let vH=0;class ew{constructor(e,t){this.from=e,this.to=t}}class Xe{constructor(e={}){this.id=vH++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Sr.match(e)),t=>{let r=e(t);return r===void 0?null:[this,r]}}}Xe.closedBy=new Xe({deserialize:n=>n.split(" ")});Xe.openedBy=new Xe({deserialize:n=>n.split(" ")});Xe.group=new Xe({deserialize:n=>n.split(" ")});Xe.isolate=new Xe({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}});Xe.contextHash=new Xe({perNode:!0});Xe.lookAhead=new Xe({perNode:!0});Xe.mounted=new Xe({perNode:!0});class Rg{constructor(e,t,r){this.tree=e,this.overlay=t,this.parser=r}static get(e){return e&&e.props&&e.props[Xe.mounted.id]}}const wH=Object.create(null);class Sr{constructor(e,t,r,i=0){this.name=e,this.props=t,this.id=r,this.flags=i}static define(e){let t=e.props&&e.props.length?Object.create(null):wH,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new Sr(e.name||"",t,e.id,r);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(i)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[s[0].id]=s[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(Xe.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let r in e)for(let i of r.split(" "))t[i]=e[r];return r=>{for(let i=r.prop(Xe.group),s=-1;s<(i?i.length:0);s++){let o=t[s<0?r.name:i[s]];if(o)return o}}}}Sr.none=new Sr("",Object.create(null),0,8);class n1{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let r of this.types){let i=null;for(let s of e){let o=s(r);o&&(i||(i=Object.assign({},r.props)),i[o[0].id]=o[1])}t.push(i?new Sr(r.name,i,r.id,r.flags):r)}return new n1(t)}}const hm=new WeakMap,iC=new WeakMap;var en;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(en||(en={}));class Ht{constructor(e,t,r,i,s){if(this.type=e,this.children=t,this.positions=r,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,l]of s)this.props[typeof o=="number"?o:o.id]=l}}toString(){let e=Rg.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let r of this.children){let i=r.toString();i&&(t&&(t+=","),t+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new cx(this.topNode,e)}cursorAt(e,t=0,r=0){let i=hm.get(this)||this.topNode,s=new cx(i);return s.moveTo(e,t),hm.set(this,s._tree),s}get topNode(){return new xr(this,0,0,null)}resolve(e,t=0){let r=Vf(hm.get(this)||this.topNode,e,t,!1);return hm.set(this,r),r}resolveInner(e,t=0){let r=Vf(iC.get(this)||this.topNode,e,t,!0);return iC.set(this,r),r}resolveStack(e,t=0){return SH(this,e,t)}iterate(e){let{enter:t,leave:r,from:i=0,to:s=this.length}=e,o=e.mode||0,l=(o&en.IncludeAnonymous)>0;for(let u=this.cursor(o|en.IncludeAnonymous);;){let h=!1;if(u.from<=s&&u.to>=i&&(!l&&u.type.isAnonymous||t(u)!==!1)){if(u.firstChild())continue;h=!0}for(;h&&r&&(l||!u.type.isAnonymous)&&r(u),!u.nextSibling();){if(!u.parent())return;h=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:s1(Sr.none,this.children,this.positions,0,this.children.length,0,this.length,(t,r,i)=>new Ht(this.type,t,r,i,this.propValues),e.makeTree||((t,r,i)=>new Ht(Sr.none,t,r,i)))}static build(e){return bH(e)}}Ht.empty=new Ht(Sr.none,[],[],0);class r1{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new r1(this.buffer,this.index)}}class Qa{constructor(e,t,r){this.buffer=e,this.length=t,this.set=r}get type(){return Sr.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],r=this.buffer[e+3],i=this.set.types[t],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),e+=4,r==e)return s;let o=[];for(;e<r;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,t,r,i,s){let{buffer:o}=this,l=-1;for(let u=e;u!=t&&!(OD(s,i,o[u+1],o[u+2])&&(l=u,r>0));u=o[u+3]);return l}slice(e,t,r){let i=this.buffer,s=new Uint16Array(t-e),o=0;for(let l=e,u=0;l<t;){s[u++]=i[l++],s[u++]=i[l++]-r;let h=s[u++]=i[l++]-r;s[u++]=i[l++]-e,o=Math.max(o,h)}return new Qa(s,o,this.set)}}function OD(n,e,t,r){switch(n){case-2:return t<e;case-1:return r>=e&&t<e;case 0:return t<e&&r>e;case 1:return t<=e&&r>e;case 2:return r>e;case 4:return!0}}function Vf(n,e,t,r){for(var i;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let o=!r&&n instanceof xr&&n.index<0?null:n.parent;if(!o)return n;n=o}let s=r?0:en.IgnoreOverlays;if(r)for(let o=n,l=o.parent;l;o=l,l=o.parent)o instanceof xr&&o.index<0&&((i=l.enter(e,t,s))===null||i===void 0?void 0:i.from)!=o.from&&(n=l);for(;;){let o=n.enter(e,t,s);if(!o)return n;n=o}}class xD{cursor(e=0){return new cx(this,e)}getChild(e,t=null,r=null){let i=sC(this,e,t,r);return i.length?i[0]:null}getChildren(e,t=null,r=null){return sC(this,e,t,r)}resolve(e,t=0){return Vf(this,e,t,!1)}resolveInner(e,t=0){return Vf(this,e,t,!0)}matchContext(e){return lx(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),r=this;for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(r=t,t=i.prevSibling):t=i}return r}get node(){return this}get next(){return this.parent}}class xr extends xD{constructor(e,t,r,i){super(),this._tree=e,this.from=t,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,r,i,s=0){for(let o=this;;){for(let{children:l,positions:u}=o._tree,h=t>0?l.length:-1;e!=h;e+=t){let d=l[e],m=u[e]+o.from;if(OD(i,r,m,m+d.length)){if(d instanceof Qa){if(s&en.ExcludeBuffers)continue;let y=d.findChild(0,d.buffer.length,t,r-m,i);if(y>-1)return new ls(new OH(o,d,e,m),null,y)}else if(s&en.IncludeAnonymous||!d.type.isAnonymous||i1(d)){let y;if(!(s&en.IgnoreMounts)&&(y=Rg.get(d))&&!y.overlay)return new xr(y.tree,m,e,o);let v=new xr(d,m,e,o);return s&en.IncludeAnonymous||!v.type.isAnonymous?v:v.nextChild(t<0?d.children.length-1:0,t,r,i)}}}if(s&en.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,r=0){let i;if(!(r&en.IgnoreOverlays)&&(i=Rg.get(this._tree))&&i.overlay){let s=e-this.from;for(let{from:o,to:l}of i.overlay)if((t>0?o<=s:o<s)&&(t<0?l>=s:l>s))return new xr(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function sC(n,e,t,r){let i=n.cursor(),s=[];if(!i.firstChild())return s;if(t!=null){for(let o=!1;!o;)if(o=i.type.is(t),!i.nextSibling())return s}for(;;){if(r!=null&&i.type.is(r))return s;if(i.type.is(e)&&s.push(i.node),!i.nextSibling())return r==null?s:[]}}function lx(n,e,t=e.length-1){for(let r=n;t>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[t]&&e[t]!=r.name)return!1;t--}}return!0}class OH{constructor(e,t,r,i){this.parent=e,this.buffer=t,this.index=r,this.start=i}}class ls extends xD{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,r){super(),this.context=e,this._parent=t,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,t,r){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.context.start,r);return s<0?null:new ls(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,r=0){if(r&en.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return s<0?null:new ls(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new ls(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new ls(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:r}=this.context,i=this.index+4,s=r.buffer[this.index+3];if(s>i){let o=r.buffer[this.index+1];e.push(r.slice(i,s,o)),t.push(0)}return new Ht(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function SD(n){if(!n.length)return null;let e=0,t=n[0];for(let s=1;s<n.length;s++){let o=n[s];(o.from>t.from||o.to<t.to)&&(t=o,e=s)}let r=t instanceof xr&&t.index<0?null:t.parent,i=n.slice();return r?i[e]=r:i.splice(e,1),new xH(i,t)}class xH{constructor(e,t){this.heads=e,this.node=t}get next(){return SD(this.heads)}}function SH(n,e,t){let r=n.resolveInner(e,t),i=null;for(let s=r instanceof xr?r:r.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(i||(i=[r])).push(o.resolve(e,t)),s=o}else{let o=Rg.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let l=new xr(o.tree,o.overlay[0].from+s.from,-1,s);(i||(i=[r])).push(Vf(l,e,t,!1))}}return i?SD(i):r}class cx{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof xr)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=t||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof xr?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,r,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,r);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,r=this.mode){return this.buffer?r&en.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&en.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&en.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(t.findChild(i,this.index,-1,0,4))}else{let i=t.buffer[this.index+3];if(i<(r<0?t.buffer.length:t.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(i.buffer.buffer[s+3]<this.index)return!1;({index:t,parent:r}=i)}else({index:t,_parent:r}=this._tree);for(;r;{index:t,_parent:r}=r)if(t>-1)for(let s=t+e,o=e<0?-1:r._tree.children.length;s!=o;s+=e){let l=r._tree.children[s];if(this.mode&en.IncludeAnonymous||l instanceof Qa||!l.type.isAnonymous||i1(l))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==i){if(i==this.index)return o;t=o,r=s+1;break e}i=this.stack[--s]}for(let i=r;i<this.stack.length;i++)t=new ls(this.buffer,t,this.stack[i]);return this.bufferNode=new ls(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&t&&t(this),i=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return lx(this.node.parent,e);let{buffer:t}=this.buffer,{types:r}=t.set;for(let i=e.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return lx(this._tree,e,i);let o=r[t.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[i]&&e[i]!=o.name)return!1;i--}}return!0}}function i1(n){return n.children.some(e=>e instanceof Qa||!e.type.isAnonymous||i1(e))}function bH(n){var e;let{buffer:t,nodeSet:r,maxBufferLength:i=wD,reused:s=[],minRepeatType:o=r.types.length}=n,l=Array.isArray(t)?new r1(t,t.length):t,u=r.types,h=0,d=0;function m($,U,C,P,A,L){let{id:Q,start:V,end:N,size:te}=l,me=d,ge=h;for(;te<0;)if(l.next(),te==-1){let q=s[Q];C.push(q),P.push(V-$);return}else if(te==-3){h=Q;return}else if(te==-4){d=Q;return}else throw new RangeError(`Unrecognized record size: ${te}`);let fe=u[Q],Z,ee,se=V-$;if(N-V<=i&&(ee=T(l.pos-U,A))){let q=new Uint16Array(ee.size-ee.skip),K=l.pos-ee.size,ue=q.length;for(;l.pos>K;)ue=k(ee.start,q,ue);Z=new Qa(q,N-ee.start,r),se=ee.start-$}else{let q=l.pos-te;l.next();let K=[],ue=[],we=Q>=o?Q:-1,ke=0,Qe=N;for(;l.pos>q;)we>=0&&l.id==we&&l.size>=0?(l.end<=Qe-i&&(S(K,ue,V,ke,l.end,Qe,we,me,ge),ke=K.length,Qe=l.end),l.next()):L>2500?y(V,q,K,ue):m(V,q,K,ue,we,L+1);if(we>=0&&ke>0&&ke<K.length&&S(K,ue,V,ke,V,Qe,we,me,ge),K.reverse(),ue.reverse(),we>-1&&ke>0){let Pe=v(fe,ge);Z=s1(fe,K,ue,0,K.length,0,N-V,Pe,Pe)}else Z=b(fe,K,ue,N-V,me-N,ge)}C.push(Z),P.push(se)}function y($,U,C,P){let A=[],L=0,Q=-1;for(;l.pos>U;){let{id:V,start:N,end:te,size:me}=l;if(me>4)l.next();else{if(Q>-1&&N<Q)break;Q<0&&(Q=te-i),A.push(V,N,te),L++,l.next()}}if(L){let V=new Uint16Array(L*4),N=A[A.length-2];for(let te=A.length-3,me=0;te>=0;te-=3)V[me++]=A[te],V[me++]=A[te+1]-N,V[me++]=A[te+2]-N,V[me++]=me;C.push(new Qa(V,A[2]-N,r)),P.push(N-$)}}function v($,U){return(C,P,A)=>{let L=0,Q=C.length-1,V,N;if(Q>=0&&(V=C[Q])instanceof Ht){if(!Q&&V.type==$&&V.length==A)return V;(N=V.prop(Xe.lookAhead))&&(L=P[Q]+V.length+N)}return b($,C,P,A,L,U)}}function S($,U,C,P,A,L,Q,V,N){let te=[],me=[];for(;$.length>P;)te.push($.pop()),me.push(U.pop()+C-A);$.push(b(r.types[Q],te,me,L-A,V-L,N)),U.push(A-C)}function b($,U,C,P,A,L,Q){if(L){let V=[Xe.contextHash,L];Q=Q?[V].concat(Q):[V]}if(A>25){let V=[Xe.lookAhead,A];Q=Q?[V].concat(Q):[V]}return new Ht($,U,C,P,Q)}function T($,U){let C=l.fork(),P=0,A=0,L=0,Q=C.end-i,V={size:0,start:0,skip:0};e:for(let N=C.pos-$;C.pos>N;){let te=C.size;if(C.id==U&&te>=0){V.size=P,V.start=A,V.skip=L,L+=4,P+=4,C.next();continue}let me=C.pos-te;if(te<0||me<N||C.start<Q)break;let ge=C.id>=o?4:0,fe=C.start;for(C.next();C.pos>me;){if(C.size<0)if(C.size==-3)ge+=4;else break e;else C.id>=o&&(ge+=4);C.next()}A=fe,P+=te,L+=ge}return(U<0||P==$)&&(V.size=P,V.start=A,V.skip=L),V.size>4?V:void 0}function k($,U,C){let{id:P,start:A,end:L,size:Q}=l;if(l.next(),Q>=0&&P<o){let V=C;if(Q>4){let N=l.pos-(Q-4);for(;l.pos>N;)C=k($,U,C)}U[--C]=V,U[--C]=L-$,U[--C]=A-$,U[--C]=P}else Q==-3?h=P:Q==-4&&(d=P);return C}let M=[],F=[];for(;l.pos>0;)m(n.start||0,n.bufferStart||0,M,F,-1,0);let z=(e=n.length)!==null&&e!==void 0?e:M.length?F[0]+M[0].length:0;return new Ht(u[n.topID],M.reverse(),F.reverse(),z)}const oC=new WeakMap;function Um(n,e){if(!n.isAnonymous||e instanceof Qa||e.type!=n)return 1;let t=oC.get(e);if(t==null){t=1;for(let r of e.children){if(r.type!=n||!(r instanceof Ht)){t=1;break}t+=Um(n,r)}oC.set(e,t)}return t}function s1(n,e,t,r,i,s,o,l,u){let h=0;for(let S=r;S<i;S++)h+=Um(n,e[S]);let d=Math.ceil(h*1.5/8),m=[],y=[];function v(S,b,T,k,M){for(let F=T;F<k;){let z=F,$=b[F],U=Um(n,S[F]);for(F++;F<k;F++){let C=Um(n,S[F]);if(U+C>=d)break;U+=C}if(F==z+1){if(U>d){let C=S[z];v(C.children,C.positions,0,C.children.length,b[z]+M);continue}m.push(S[z])}else{let C=b[F-1]+S[F-1].length-$;m.push(s1(n,S,b,z,F,$,C,null,u))}y.push($+M-s)}}return v(e,t,r,i,0),(l||u)(m,y,o)}class TH{constructor(){this.map=new WeakMap}setBuffer(e,t,r){let i=this.map.get(e);i||this.map.set(e,i=new Map),i.set(t,r)}getBuffer(e,t){let r=this.map.get(e);return r&&r.get(t)}set(e,t){e instanceof ls?this.setBuffer(e.context.buffer,e.index,t):e instanceof xr&&this.map.set(e.tree,t)}get(e){return e instanceof ls?this.getBuffer(e.context.buffer,e.index):e instanceof xr?this.map.get(e.tree):void 0}cursorSet(e,t){e.buffer?this.setBuffer(e.buffer.buffer,e.index,t):this.map.set(e.tree,t)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class Rl{constructor(e,t,r,i,s=!1,o=!1){this.from=e,this.to=t,this.tree=r,this.offset=i,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],r=!1){let i=[new Rl(0,e.length,e,0,!1,r)];for(let s of t)s.to>e.length&&i.push(s);return i}static applyChanges(e,t,r=128){if(!t.length)return e;let i=[],s=1,o=e.length?e[0]:null;for(let l=0,u=0,h=0;;l++){let d=l<t.length?t[l]:null,m=d?d.fromA:1e9;if(m-u>=r)for(;o&&o.from<m;){let y=o;if(u>=y.from||m<=y.to||h){let v=Math.max(y.from,u)-h,S=Math.min(y.to,m)-h;y=v>=S?null:new Rl(v,S,y.tree,y.offset+h,l>0,!!d)}if(y&&i.push(y),o.to>m)break;o=s<e.length?e[s++]:null}if(!d)break;u=d.toA,h=d.toA-d.toB}return i}}class bD{startParse(e,t,r){return typeof e=="string"&&(e=new _H(e)),r=r?r.length?r.map(i=>new ew(i.from,i.to)):[new ew(0,0)]:[new ew(0,e.length)],this.createParse(e,t||[],r)}parse(e,t,r){let i=this.startParse(e,t,r);for(;;){let s=i.advance();if(s)return s}}}class _H{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new Xe({perNode:!0});let EH=0;class ni{constructor(e,t,r,i){this.name=e,this.set=t,this.base=r,this.modified=i,this.id=EH++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let r=typeof e=="string"?e:"?";if(e instanceof ni&&(t=e),t!=null&&t.base)throw new Error("Can not derive from a modified tag");let i=new ni(r,[],null,[]);if(i.set.push(i),t)for(let s of t.set)i.set.push(s);return i}static defineModifier(e){let t=new Ig(e);return r=>r.modified.indexOf(t)>-1?r:Ig.get(r.base||r,r.modified.concat(t).sort((i,s)=>i.id-s.id))}}let kH=0;class Ig{constructor(e){this.name=e,this.instances=[],this.id=kH++}static get(e,t){if(!t.length)return e;let r=t[0].instances.find(l=>l.base==e&&CH(t,l.modified));if(r)return r;let i=[],s=new ni(e.name,i,e,t);for(let l of t)l.instances.push(s);let o=PH(t);for(let l of e.set)if(!l.modified.length)for(let u of o)i.push(Ig.get(l,u));return s}}function CH(n,e){return n.length==e.length&&n.every((t,r)=>t==e[r])}function PH(n){let e=[[]];for(let t=0;t<n.length;t++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(n[t]));return e.sort((t,r)=>r.length-t.length)}function TD(n){let e=Object.create(null);for(let t in n){let r=n[t];Array.isArray(r)||(r=[r]);for(let i of t.split(" "))if(i){let s=[],o=2,l=i;for(let m=0;;){if(l=="..."&&m>0&&m+3==i.length){o=1;break}let y=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!y)throw new RangeError("Invalid path: "+i);if(s.push(y[0]=="*"?"":y[0][0]=='"'?JSON.parse(y[0]):y[0]),m+=y[0].length,m==i.length)break;let v=i[m++];if(m==i.length&&v=="!"){o=0;break}if(v!="/")throw new RangeError("Invalid path: "+i);l=i.slice(m)}let u=s.length-1,h=s[u];if(!h)throw new RangeError("Invalid path: "+i);let d=new Ng(r,o,u>0?s.slice(0,u):null);e[h]=d.sort(e[h])}}return _D.add(e)}const _D=new Xe;class Ng{constructor(e,t,r,i){this.tags=e,this.mode=t,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Ng.empty=new Ng([],2,null);function ED(n,e){let t=Object.create(null);for(let s of n)if(!Array.isArray(s.tag))t[s.tag.id]=s.class;else for(let o of s.tag)t[o.id]=s.class;let{scope:r,all:i=null}=e||{};return{style:s=>{let o=i;for(let l of s)for(let u of l.set){let h=t[u.id];if(h){o=o?o+" "+h:h;break}}return o},scope:r}}function AH(n,e){let t=null;for(let r of n){let i=r.style(e);i&&(t=t?t+" "+i:i)}return t}function RH(n,e,t,r=0,i=n.length){let s=new IH(r,Array.isArray(e)?e:[e],t);s.highlightRange(n.cursor(),r,i,"",s.highlighters),s.flush(i)}class IH{constructor(e,t,r){this.at=e,this.highlighters=t,this.span=r,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,r,i,s){let{type:o,from:l,to:u}=e;if(l>=r||u<=t)return;o.isTop&&(s=this.highlighters.filter(v=>!v.scope||v.scope(o)));let h=i,d=NH(e)||Ng.empty,m=AH(s,d.tags);if(m&&(h&&(h+=" "),h+=m,d.mode==1&&(i+=(i?" ":"")+m)),this.startSpan(Math.max(t,l),h),d.opaque)return;let y=e.tree&&e.tree.prop(Xe.mounted);if(y&&y.overlay){let v=e.node.enter(y.overlay[0].from+l,1),S=this.highlighters.filter(T=>!T.scope||T.scope(y.tree.type)),b=e.firstChild();for(let T=0,k=l;;T++){let M=T<y.overlay.length?y.overlay[T]:null,F=M?M.from+l:u,z=Math.max(t,k),$=Math.min(r,F);if(z<$&&b)for(;e.from<$&&(this.highlightRange(e,z,$,i,s),this.startSpan(Math.min($,e.to),h),!(e.to>=F||!e.nextSibling())););if(!M||F>r)break;k=M.to+l,k>t&&(this.highlightRange(v.cursor(),Math.max(t,M.from+l),Math.min(r,k),"",S),this.startSpan(Math.min(r,k),h))}b&&e.parent()}else if(e.firstChild()){y&&(i="");do if(!(e.to<=t)){if(e.from>=r)break;this.highlightRange(e,t,r,i,s),this.startSpan(Math.min(r,e.to),h)}while(e.nextSibling());e.parent()}}}function NH(n){let e=n.type.prop(_D);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const ve=ni.define,fm=ve(),Jo=ve(),aC=ve(Jo),lC=ve(Jo),Zo=ve(),dm=ve(Zo),tw=ve(Zo),es=ve(),vl=ve(es),Ji=ve(),Zi=ve(),ux=ve(),Qh=ve(ux),pm=ve(),X={comment:fm,lineComment:ve(fm),blockComment:ve(fm),docComment:ve(fm),name:Jo,variableName:ve(Jo),typeName:aC,tagName:ve(aC),propertyName:lC,attributeName:ve(lC),className:ve(Jo),labelName:ve(Jo),namespace:ve(Jo),macroName:ve(Jo),literal:Zo,string:dm,docString:ve(dm),character:ve(dm),attributeValue:ve(dm),number:tw,integer:ve(tw),float:ve(tw),bool:ve(Zo),regexp:ve(Zo),escape:ve(Zo),color:ve(Zo),url:ve(Zo),keyword:Ji,self:ve(Ji),null:ve(Ji),atom:ve(Ji),unit:ve(Ji),modifier:ve(Ji),operatorKeyword:ve(Ji),controlKeyword:ve(Ji),definitionKeyword:ve(Ji),moduleKeyword:ve(Ji),operator:Zi,derefOperator:ve(Zi),arithmeticOperator:ve(Zi),logicOperator:ve(Zi),bitwiseOperator:ve(Zi),compareOperator:ve(Zi),updateOperator:ve(Zi),definitionOperator:ve(Zi),typeOperator:ve(Zi),controlOperator:ve(Zi),punctuation:ux,separator:ve(ux),bracket:Qh,angleBracket:ve(Qh),squareBracket:ve(Qh),paren:ve(Qh),brace:ve(Qh),content:es,heading:vl,heading1:ve(vl),heading2:ve(vl),heading3:ve(vl),heading4:ve(vl),heading5:ve(vl),heading6:ve(vl),contentSeparator:ve(es),list:ve(es),quote:ve(es),emphasis:ve(es),strong:ve(es),link:ve(es),monospace:ve(es),strikethrough:ve(es),inserted:ve(),deleted:ve(),changed:ve(),invalid:ve(),meta:pm,documentMeta:ve(pm),annotation:ve(pm),processingInstruction:ve(pm),definition:ni.defineModifier("definition"),constant:ni.defineModifier("constant"),function:ni.defineModifier("function"),standard:ni.defineModifier("standard"),local:ni.defineModifier("local"),special:ni.defineModifier("special")};for(let n in X){let e=X[n];e instanceof ni&&(e.name=n)}ED([{tag:X.link,class:"tok-link"},{tag:X.heading,class:"tok-heading"},{tag:X.emphasis,class:"tok-emphasis"},{tag:X.strong,class:"tok-strong"},{tag:X.keyword,class:"tok-keyword"},{tag:X.atom,class:"tok-atom"},{tag:X.bool,class:"tok-bool"},{tag:X.url,class:"tok-url"},{tag:X.labelName,class:"tok-labelName"},{tag:X.inserted,class:"tok-inserted"},{tag:X.deleted,class:"tok-deleted"},{tag:X.literal,class:"tok-literal"},{tag:X.string,class:"tok-string"},{tag:X.number,class:"tok-number"},{tag:[X.regexp,X.escape,X.special(X.string)],class:"tok-string2"},{tag:X.variableName,class:"tok-variableName"},{tag:X.local(X.variableName),class:"tok-variableName tok-local"},{tag:X.definition(X.variableName),class:"tok-variableName tok-definition"},{tag:X.special(X.variableName),class:"tok-variableName2"},{tag:X.definition(X.propertyName),class:"tok-propertyName tok-definition"},{tag:X.typeName,class:"tok-typeName"},{tag:X.namespace,class:"tok-namespace"},{tag:X.className,class:"tok-className"},{tag:X.macroName,class:"tok-macroName"},{tag:X.propertyName,class:"tok-propertyName"},{tag:X.operator,class:"tok-operator"},{tag:X.comment,class:"tok-comment"},{tag:X.meta,class:"tok-meta"},{tag:X.invalid,class:"tok-invalid"},{tag:X.punctuation,class:"tok-punctuation"}]);var nw;const Wc=new Xe;function DH(n){return Se.define({combine:n?e=>e.concat(n):void 0})}const MH=new Xe;class Ai{constructor(e,t,r=[],i=""){this.data=e,this.name=i,tt.prototype.hasOwnProperty("tree")||Object.defineProperty(tt.prototype,"tree",{get(){return dn(this)}}),this.parser=t,this.extension=[ja.of(this),tt.languageData.of((s,o,l)=>{let u=cC(s,o,l),h=u.type.prop(Wc);if(!h)return[];let d=s.facet(h),m=u.type.prop(MH);if(m){let y=u.resolve(o-u.from,l);for(let v of m)if(v.test(y,s)){let S=s.facet(v.facet);return v.type=="replace"?S:S.concat(d)}}return d})].concat(r)}isActiveAt(e,t,r=-1){return cC(e,t,r).type.prop(Wc)==this.data}findRegions(e){let t=e.facet(ja);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let r=[],i=(s,o)=>{if(s.prop(Wc)==this.data){r.push({from:o,to:o+s.length});return}let l=s.prop(Xe.mounted);if(l){if(l.tree.prop(Wc)==this.data){if(l.overlay)for(let u of l.overlay)r.push({from:u.from+o,to:u.to+o});else r.push({from:o,to:o+s.length});return}else if(l.overlay){let u=r.length;if(i(l.tree,l.overlay[0].from+o),r.length>u)return}}for(let u=0;u<s.children.length;u++){let h=s.children[u];h instanceof Ht&&i(h,s.positions[u]+o)}};return i(dn(e),0),r}get allowsNesting(){return!0}}Ai.setState=$e.define();function cC(n,e,t){let r=n.facet(ja),i=dn(n).topNode;if(!r||r.allowsNesting)for(let s=i;s;s=s.enter(e,t,en.ExcludeBuffers))s.type.isTop&&(i=s);return i}class Dg extends Ai{constructor(e,t,r){super(e,t,[],r),this.parser=t}static define(e){let t=DH(e.languageData);return new Dg(t,e.parser.configure({props:[Wc.add(r=>r.isTop?t:void 0)]}),e.name)}configure(e,t){return new Dg(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function dn(n){let e=n.field(Ai.state,!1);return e?e.tree:Ht.empty}class LH{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let r=this.cursorPos-this.string.length;return e<r||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-r,t-r)}}let jh=null;class Mg{constructor(e,t,r=[],i,s,o,l,u){this.parser=e,this.state=t,this.fragments=r,this.tree=i,this.treeLen=s,this.viewport=o,this.skipped=l,this.scheduleOn=u,this.parse=null,this.tempSkipped=[]}static create(e,t,r){return new Mg(e,t,[],Ht.empty,0,r,[],null)}startParse(){return this.parser.startParse(new LH(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=Ht.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(Rl.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Rl.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=jh;jh=this;try{return e()}finally{jh=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=uC(e,t.from,t.to);return e}changes(e,t){let{fragments:r,tree:i,treeLen:s,viewport:o,skipped:l}=this;if(this.takeTree(),!e.empty){let u=[];if(e.iterChangedRanges((h,d,m,y)=>u.push({fromA:h,toA:d,fromB:m,toB:y})),r=Rl.applyChanges(r,u),i=Ht.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){l=[];for(let h of this.skipped){let d=e.mapPos(h.from,1),m=e.mapPos(h.to,-1);d<m&&l.push({from:d,to:m})}}}return new Mg(this.parser,t,r,i,s,o,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:s}=this.skipped[r];i<e.to&&s>e.from&&(this.fragments=uC(this.fragments,i,s),this.skipped.splice(r--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends bD{createParse(t,r,i){let s=i[0].from,o=i[i.length-1].to;return{parsedPos:s,advance(){let u=jh;if(u){for(let h of i)u.tempSkipped.push(h);e&&(u.scheduleOn=u.scheduleOn?Promise.all([u.scheduleOn,e]):e)}return this.parsedPos=o,new Ht(Sr.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return jh}}function uC(n,e,t){return Rl.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class Nu{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,r)||t.takeTree(),new Nu(t)}static init(e){let t=Math.min(3e3,e.doc.length),r=Mg.create(e.facet(ja).parser,e,{from:0,to:t});return r.work(20,t)||r.takeTree(),new Nu(r)}}Ai.state=pn.define({create:Nu.init,update(n,e){for(let t of e.effects)if(t.is(Ai.setState))return t.value;return e.startState.facet(ja)!=e.state.facet(ja)?Nu.init(e.state):n.apply(e)}});let kD=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(kD=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const rw=typeof navigator<"u"&&(!((nw=navigator.scheduling)===null||nw===void 0)&&nw.isInputPending)?()=>navigator.scheduling.isInputPending():null,VH=zt.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Ai.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Ai.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=kD(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,s=r.field(Ai.state);if(s.tree==s.context.tree&&s.context.isDone(i+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!rw?Math.max(25,e.timeRemaining()-5):1e9),l=s.context.treeLen<i&&r.doc.length>i+1e3,u=s.context.work(()=>rw&&rw()||Date.now()>o,i+(l?0:1e5));this.chunkBudget-=Date.now()-t,(u||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:Ai.setState.of(new Nu(s.context))})),this.chunkBudget>0&&!(u&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>wr(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),ja=Se.define({combine(n){return n.length?n[0]:null},enables:n=>[Ai.state,VH,Oe.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]});class FH{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const QH=Se.define(),gd=Se.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function Lg(n){let e=n.facet(gd);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function Ff(n,e){let t="",r=n.tabSize,i=n.facet(gd)[0];if(i=="	"){for(;e>=r;)t+="	",e-=r;i=" "}for(let s=0;s<e;s++)t+=i;return t}function o1(n,e){n instanceof tt&&(n=new My(n));for(let r of n.state.facet(QH)){let i=r(n,e);if(i!==void 0)return i}let t=dn(n.state);return t.length>=e?jH(n,t,e):null}class My{constructor(e,t={}){this.state=e,this.options=t,this.unit=Lg(e)}lineAt(e,t=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:s}=this.options;return i!=null&&i>=r.from&&i<=r.to?s&&i==e?{text:"",from:e}:(t<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,t);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,t=1){let{text:r,from:i}=this.lineAt(e,t),s=this.countColumn(r,e-i),o=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return o>-1&&(s+=o-this.countColumn(r,r.search(/\S|$/))),s}countColumn(e,t=e.length){return Gu(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:r,from:i}=this.lineAt(e,t),s=this.options.overrideIndentation;if(s){let o=s(i);if(o>-1)return o}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const CD=new Xe;function jH(n,e,t){let r=e.resolveStack(t),i=e.resolveInner(t,-1).resolve(t,0).enterUnfinishedNodesBefore(t);if(i!=r.node){let s=[];for(let o=i;o&&!(o.from==r.node.from&&o.type==r.node.type);o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)r={node:s[o],next:r}}return PD(r,n,t)}function PD(n,e,t){for(let r=n;r;r=r.next){let i=$H(r.node);if(i)return i(a1.create(e,t,r))}return 0}function zH(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function $H(n){let e=n.type.prop(CD);if(e)return e;let t=n.firstChild,r;if(t&&(r=t.type.prop(Xe.closedBy))){let i=n.lastChild,s=i&&r.indexOf(i.name)>-1;return o=>AD(o,!0,1,void 0,s&&!zH(o)?i.from:void 0)}return n.parent==null?BH:null}function BH(){return 0}class a1 extends My{constructor(e,t,r){super(e.state,e.options),this.base=e,this.pos=t,this.context=r}get node(){return this.context.node}static create(e,t,r){return new a1(e,t,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(t.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(UH(r,e))break;t=this.state.doc.lineAt(r.from)}return this.lineIndent(t.from)}continue(){return PD(this.context.next,this.base,this.pos)}}function UH(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function qH(n){let e=n.node,t=e.childAfter(e.from),r=e.lastChild;if(!t)return null;let i=n.options.simulateBreak,s=n.state.doc.lineAt(t.from),o=i==null||i<=s.from?s.to:Math.min(s.to,i);for(let l=t.to;;){let u=e.childAfter(l);if(!u||u==r)return null;if(!u.type.isSkipped){if(u.from>=o)return null;let h=/^ */.exec(s.text.slice(t.to-s.from))[0].length;return{from:t.from,to:t.to+h}}l=u.to}}function iw({closing:n,align:e=!0,units:t=1}){return r=>AD(r,e,t,n)}function AD(n,e,t,r,i){let s=n.textAfter,o=s.match(/^\s*/)[0].length,l=r&&s.slice(o,o+r.length)==r||i==n.pos+o,u=e?qH(n):null;return u?l?n.column(u.from):n.column(u.to):n.baseIndent+(l?0:n.unit*t)}const WH=200;function HH(){return tt.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let e=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!e.length)return n;let t=n.newDoc,{head:r}=n.newSelection.main,i=t.lineAt(r);if(r>i.from+WH)return n;let s=t.sliceString(i.from,r);if(!e.some(h=>h.test(s)))return n;let{state:o}=n,l=-1,u=[];for(let{head:h}of o.selection.ranges){let d=o.doc.lineAt(h);if(d.from==l)continue;l=d.from;let m=o1(o,d.from);if(m==null)continue;let y=/^\s*/.exec(d.text)[0],v=Ff(o,m);y!=v&&u.push({from:d.from,to:d.from+y.length,insert:v})}return u.length?[n,{changes:u,sequential:!0}]:n})}const GH=Se.define(),RD=new Xe;function XH(n){let e=n.firstChild,t=n.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?n.to:t.from}:null}function KH(n,e,t){let r=dn(n);if(r.length<t)return null;let i=r.resolveStack(t,1),s=null;for(let o=i;o;o=o.next){let l=o.node;if(l.to<=t||l.from>t)continue;if(s&&l.from<e)break;let u=l.type.prop(RD);if(u&&(l.to<r.length-50||r.length==n.doc.length||!YH(l))){let h=u(l,n);h&&h.from<=t&&h.from>=e&&h.to>t&&(s=h)}}return s}function YH(n){let e=n.lastChild;return e&&e.to==n.to&&e.type.isError}function Vg(n,e,t){for(let r of n.facet(GH)){let i=r(n,e,t);if(i)return i}return KH(n,e,t)}function ID(n,e){let t=e.mapPos(n.from,1),r=e.mapPos(n.to,-1);return t>=r?void 0:{from:t,to:r}}const Ly=$e.define({map:ID}),yd=$e.define({map:ID});function ND(n){let e=[];for(let{head:t}of n.state.selection.ranges)e.some(r=>r.from<=t&&r.to>=t)||e.push(n.lineBlockAt(t));return e}const Hl=pn.define({create(){return Re.none},update(n,e){n=n.map(e.changes);for(let t of e.effects)if(t.is(Ly)&&!JH(n,t.value.from,t.value.to)){let{preparePlaceholder:r}=e.state.facet(LD),i=r?Re.replace({widget:new s7(r(e.state,t.value))}):hC;n=n.update({add:[i.range(t.value.from,t.value.to)]})}else t.is(yd)&&(n=n.update({filter:(r,i)=>t.value.from!=r||t.value.to!=i,filterFrom:t.value.from,filterTo:t.value.to}));if(e.selection){let t=!1,{head:r}=e.selection.main;n.between(r,r,(i,s)=>{i<r&&s>r&&(t=!0)}),t&&(n=n.update({filterFrom:r,filterTo:r,filter:(i,s)=>s<=r||i>=r}))}return n},provide:n=>Oe.decorations.from(n),toJSON(n,e){let t=[];return n.between(0,e.doc.length,(r,i)=>{t.push(r,i)}),t},fromJSON(n){if(!Array.isArray(n)||n.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<n.length;){let r=n[t++],i=n[t++];if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(hC.range(r,i))}return Re.set(e,!0)}});function Fg(n,e,t){var r;let i=null;return(r=n.field(Hl,!1))===null||r===void 0||r.between(e,t,(s,o)=>{(!i||i.from>s)&&(i={from:s,to:o})}),i}function JH(n,e,t){let r=!1;return n.between(e,e,(i,s)=>{i==e&&s==t&&(r=!0)}),r}function DD(n,e){return n.field(Hl,!1)?e:e.concat($e.appendConfig.of(VD()))}const ZH=n=>{for(let e of ND(n)){let t=Vg(n.state,e.from,e.to);if(t)return n.dispatch({effects:DD(n.state,[Ly.of(t),MD(n,t)])}),!0}return!1},e7=n=>{if(!n.state.field(Hl,!1))return!1;let e=[];for(let t of ND(n)){let r=Fg(n.state,t.from,t.to);r&&e.push(yd.of(r),MD(n,r,!1))}return e.length&&n.dispatch({effects:e}),e.length>0};function MD(n,e,t=!0){let r=n.state.doc.lineAt(e.from).number,i=n.state.doc.lineAt(e.to).number;return Oe.announce.of(`${n.state.phrase(t?"Folded lines":"Unfolded lines")} ${r} ${n.state.phrase("to")} ${i}.`)}const t7=n=>{let{state:e}=n,t=[];for(let r=0;r<e.doc.length;){let i=n.lineBlockAt(r),s=Vg(e,i.from,i.to);s&&t.push(Ly.of(s)),r=(s?n.lineBlockAt(s.to):i).to+1}return t.length&&n.dispatch({effects:DD(n.state,t)}),!!t.length},n7=n=>{let e=n.state.field(Hl,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,n.state.doc.length,(r,i)=>{t.push(yd.of({from:r,to:i}))}),n.dispatch({effects:t}),!0},r7=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:ZH},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:e7},{key:"Ctrl-Alt-[",run:t7},{key:"Ctrl-Alt-]",run:n7}],i7={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},LD=Se.define({combine(n){return _s(n,i7)}});function VD(n){return[Hl,l7]}function FD(n,e){let{state:t}=n,r=t.facet(LD),i=o=>{let l=n.lineBlockAt(n.posAtDOM(o.target)),u=Fg(n.state,l.from,l.to);u&&n.dispatch({effects:yd.of(u)}),o.preventDefault()};if(r.placeholderDOM)return r.placeholderDOM(n,i,e);let s=document.createElement("span");return s.textContent=r.placeholderText,s.setAttribute("aria-label",t.phrase("folded code")),s.title=t.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=i,s}const hC=Re.replace({widget:new class extends Es{toDOM(n){return FD(n,null)}}});class s7 extends Es{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return FD(e,this.value)}}const o7={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class sw extends vo{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function a7(n={}){let e=Object.assign(Object.assign({},o7),n),t=new sw(e,!0),r=new sw(e,!1),i=zt.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(ja)!=o.state.facet(ja)||o.startState.field(Hl,!1)!=o.state.field(Hl,!1)||dn(o.startState)!=dn(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let l=new go;for(let u of o.viewportLineBlocks){let h=Fg(o.state,u.from,u.to)?r:Vg(o.state,u.from,u.to)?t:null;h&&l.add(u.from,u.from,h)}return l.finish()}}),{domEventHandlers:s}=e;return[i,aH({class:"cm-foldGutter",markers(o){var l;return((l=o.plugin(i))===null||l===void 0?void 0:l.markers)||ot.empty},initialSpacer(){return new sw(e,!1)},domEventHandlers:Object.assign(Object.assign({},s),{click:(o,l,u)=>{if(s.click&&s.click(o,l,u))return!0;let h=Fg(o.state,l.from,l.to);if(h)return o.dispatch({effects:yd.of(h)}),!0;let d=Vg(o.state,l.from,l.to);return d?(o.dispatch({effects:Ly.of(d)}),!0):!1}})}),VD()]}const l7=Oe.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class vd{constructor(e,t){this.specs=e;let r;function i(l){let u=La.newName();return(r||(r=Object.create(null)))["."+u]=l,u}const s=typeof t.all=="string"?t.all:t.all?i(t.all):void 0,o=t.scope;this.scope=o instanceof Ai?l=>l.prop(Wc)==o.data:o?l=>l==o:void 0,this.style=ED(e.map(l=>({tag:l.tag,class:l.class||i(Object.assign({},l,{tag:null}))})),{all:s}).style,this.module=r?new La(r):null,this.themeType=t.themeType}static define(e,t){return new vd(e,t||{})}}const hx=Se.define(),QD=Se.define({combine(n){return n.length?[n[0]]:null}});function ow(n){let e=n.facet(hx);return e.length?e:n.facet(QD)}function jD(n,e){let t=[u7],r;return n instanceof vd&&(n.module&&t.push(Oe.styleModule.of(n.module)),r=n.themeType),e!=null&&e.fallback?t.push(QD.of(n)):r?t.push(hx.computeN([Oe.darkTheme],i=>i.facet(Oe.darkTheme)==(r=="dark")?[n]:[])):t.push(hx.of(n)),t}class c7{constructor(e){this.markCache=Object.create(null),this.tree=dn(e.state),this.decorations=this.buildDeco(e,ow(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=dn(e.state),r=ow(e.state),i=r!=ow(e.startState),{viewport:s}=e.view,o=e.changes.mapPos(this.decoratedTo,1);t.length<s.to&&!i&&t.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(t!=this.tree||e.viewportChanged||i)&&(this.tree=t,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=s.to)}buildDeco(e,t){if(!t||!this.tree.length)return Re.none;let r=new go;for(let{from:i,to:s}of e.visibleRanges)RH(this.tree,t,(o,l,u)=>{r.add(o,l,this.markCache[u]||(this.markCache[u]=Re.mark({class:u})))},i,s);return r.finish()}}const u7=qa.high(zt.fromClass(c7,{decorations:n=>n.decorations})),h7=vd.define([{tag:X.meta,color:"#404740"},{tag:X.link,textDecoration:"underline"},{tag:X.heading,textDecoration:"underline",fontWeight:"bold"},{tag:X.emphasis,fontStyle:"italic"},{tag:X.strong,fontWeight:"bold"},{tag:X.strikethrough,textDecoration:"line-through"},{tag:X.keyword,color:"#708"},{tag:[X.atom,X.bool,X.url,X.contentSeparator,X.labelName],color:"#219"},{tag:[X.literal,X.inserted],color:"#164"},{tag:[X.string,X.deleted],color:"#a11"},{tag:[X.regexp,X.escape,X.special(X.string)],color:"#e40"},{tag:X.definition(X.variableName),color:"#00f"},{tag:X.local(X.variableName),color:"#30a"},{tag:[X.typeName,X.namespace],color:"#085"},{tag:X.className,color:"#167"},{tag:[X.special(X.variableName),X.macroName],color:"#256"},{tag:X.definition(X.propertyName),color:"#00c"},{tag:X.comment,color:"#940"},{tag:X.invalid,color:"#f00"}]),f7=Oe.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),zD=1e4,$D="()[]{}",BD=Se.define({combine(n){return _s(n,{afterCursor:!0,brackets:$D,maxScanDistance:zD,renderMatch:m7})}}),d7=Re.mark({class:"cm-matchingBracket"}),p7=Re.mark({class:"cm-nonmatchingBracket"});function m7(n){let e=[],t=n.matched?d7:p7;return e.push(t.range(n.start.from,n.start.to)),n.end&&e.push(t.range(n.end.from,n.end.to)),e}const g7=pn.define({create(){return Re.none},update(n,e){if(!e.docChanged&&!e.selection)return n;let t=[],r=e.state.facet(BD);for(let i of e.state.selection.ranges){if(!i.empty)continue;let s=cs(e.state,i.head,-1,r)||i.head>0&&cs(e.state,i.head-1,1,r)||r.afterCursor&&(cs(e.state,i.head,1,r)||i.head<e.state.doc.length&&cs(e.state,i.head+1,-1,r));s&&(t=t.concat(r.renderMatch(s,e.state)))}return Re.set(t,!0)},provide:n=>Oe.decorations.from(n)}),y7=[g7,f7];function v7(n={}){return[BD.of(n),y7]}const w7=new Xe;function fx(n,e,t){let r=n.prop(e<0?Xe.openedBy:Xe.closedBy);if(r)return r;if(n.name.length==1){let i=t.indexOf(n.name);if(i>-1&&i%2==(e<0?1:0))return[t[i+e]]}return null}function dx(n){let e=n.type.prop(w7);return e?e(n.node):n}function cs(n,e,t,r={}){let i=r.maxScanDistance||zD,s=r.brackets||$D,o=dn(n),l=o.resolveInner(e,t);for(let u=l;u;u=u.parent){let h=fx(u.type,t,s);if(h&&u.from<u.to){let d=dx(u);if(d&&(t>0?e>=d.from&&e<d.to:e>d.from&&e<=d.to))return O7(n,e,t,u,d,h,s)}}return x7(n,e,t,o,l.type,i,s)}function O7(n,e,t,r,i,s,o){let l=r.parent,u={from:i.from,to:i.to},h=0,d=l==null?void 0:l.cursor();if(d&&(t<0?d.childBefore(r.from):d.childAfter(r.to)))do if(t<0?d.to<=r.from:d.from>=r.to){if(h==0&&s.indexOf(d.type.name)>-1&&d.from<d.to){let m=dx(d);return{start:u,end:m?{from:m.from,to:m.to}:void 0,matched:!0}}else if(fx(d.type,t,o))h++;else if(fx(d.type,-t,o)){if(h==0){let m=dx(d);return{start:u,end:m&&m.from<m.to?{from:m.from,to:m.to}:void 0,matched:!1}}h--}}while(t<0?d.prevSibling():d.nextSibling());return{start:u,matched:!1}}function x7(n,e,t,r,i,s,o){let l=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),u=o.indexOf(l);if(u<0||u%2==0!=t>0)return null;let h={from:t<0?e-1:e,to:t>0?e+1:e},d=n.doc.iterRange(e,t>0?n.doc.length:0),m=0;for(let y=0;!d.next().done&&y<=s;){let v=d.value;t<0&&(y+=v.length);let S=e+y*t;for(let b=t>0?0:v.length-1,T=t>0?v.length:-1;b!=T;b+=t){let k=o.indexOf(v[b]);if(!(k<0||r.resolveInner(S+b,1).type!=i))if(k%2==0==t>0)m++;else{if(m==1)return{start:h,end:{from:S+b,to:S+b+1},matched:k>>1==u>>1};m--}}t>0&&(y+=v.length)}return d.done?{start:h,matched:!1}:null}const S7=Object.create(null),fC=[Sr.none],dC=[],pC=Object.create(null),b7=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])b7[n]=T7(S7,e);function aw(n,e){dC.indexOf(n)>-1||(dC.push(n),console.warn(e))}function T7(n,e){let t=[];for(let l of e.split(" ")){let u=[];for(let h of l.split(".")){let d=n[h]||X[h];d?typeof d=="function"?u.length?u=u.map(d):aw(h,`Modifier ${h} used at start of tag`):u.length?aw(h,`Tag ${h} used as modifier`):u=Array.isArray(d)?d:[d]:aw(h,`Unknown highlighting tag ${h}`)}for(let h of u)t.push(h)}if(!t.length)return 0;let r=e.replace(/ /g,"_"),i=r+" "+t.map(l=>l.id),s=pC[i];if(s)return s.id;let o=pC[i]=Sr.define({id:fC.length,name:r,props:[TD({[r]:t})]});return fC.push(o),o.id}Et.RTL,Et.LTR;const _7=n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.from),r=c1(n.state,t.from);return r.line?E7(n):r.block?C7(n):!1};function l1(n,e){return({state:t,dispatch:r})=>{if(t.readOnly)return!1;let i=n(e,t);return i?(r(t.update(i)),!0):!1}}const E7=l1(R7,0),k7=l1(UD,0),C7=l1((n,e)=>UD(n,e,A7(e)),0);function c1(n,e){let t=n.languageDataAt("commentTokens",e,1);return t.length?t[0]:{}}const zh=50;function P7(n,{open:e,close:t},r,i){let s=n.sliceDoc(r-zh,r),o=n.sliceDoc(i,i+zh),l=/\s*$/.exec(s)[0].length,u=/^\s*/.exec(o)[0].length,h=s.length-l;if(s.slice(h-e.length,h)==e&&o.slice(u,u+t.length)==t)return{open:{pos:r-l,margin:l&&1},close:{pos:i+u,margin:u&&1}};let d,m;i-r<=2*zh?d=m=n.sliceDoc(r,i):(d=n.sliceDoc(r,r+zh),m=n.sliceDoc(i-zh,i));let y=/^\s*/.exec(d)[0].length,v=/\s*$/.exec(m)[0].length,S=m.length-v-t.length;return d.slice(y,y+e.length)==e&&m.slice(S,S+t.length)==t?{open:{pos:r+y+e.length,margin:/\s/.test(d.charAt(y+e.length))?1:0},close:{pos:i-v-t.length,margin:/\s/.test(m.charAt(S-1))?1:0}}:null}function A7(n){let e=[];for(let t of n.selection.ranges){let r=n.doc.lineAt(t.from),i=t.to<=r.to?r:n.doc.lineAt(t.to);i.from>r.from&&i.from==t.to&&(i=t.to==r.to+1?r:n.doc.lineAt(t.to-1));let s=e.length-1;s>=0&&e[s].to>r.from?e[s].to=i.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return e}function UD(n,e,t=e.selection.ranges){let r=t.map(s=>c1(e,s.from).block);if(!r.every(s=>s))return null;let i=t.map((s,o)=>P7(e,r[o],s.from,s.to));if(n!=2&&!i.every(s=>s))return{changes:e.changes(t.map((s,o)=>i[o]?[]:[{from:s.from,insert:r[o].open+" "},{from:s.to,insert:" "+r[o].close}]))};if(n!=1&&i.some(s=>s)){let s=[];for(let o=0,l;o<i.length;o++)if(l=i[o]){let u=r[o],{open:h,close:d}=l;s.push({from:h.pos-u.open.length,to:h.pos+h.margin},{from:d.pos-d.margin,to:d.pos+u.close.length})}return{changes:s}}return null}function R7(n,e,t=e.selection.ranges){let r=[],i=-1;for(let{from:s,to:o}of t){let l=r.length,u=1e9,h=c1(e,s).line;if(h){for(let d=s;d<=o;){let m=e.doc.lineAt(d);if(m.from>i&&(s==o||o>m.from)){i=m.from;let y=/^\s*/.exec(m.text)[0].length,v=y==m.length,S=m.text.slice(y,y+h.length)==h?y:-1;y<m.text.length&&y<u&&(u=y),r.push({line:m,comment:S,token:h,indent:y,empty:v,single:!1})}d=m.to+1}if(u<1e9)for(let d=l;d<r.length;d++)r[d].indent<r[d].line.text.length&&(r[d].indent=u);r.length==l+1&&(r[l].single=!0)}}if(n!=2&&r.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:l,token:u,indent:h,empty:d,single:m}of r)(m||!d)&&s.push({from:l.from+h,insert:u+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(n!=1&&r.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:l,token:u}of r)if(l>=0){let h=o.from+l,d=h+u.length;o.text[d-o.from]==" "&&d++,s.push({from:h,to:d})}return{changes:s}}return null}const px=Ts.define(),I7=Ts.define(),N7=Se.define(),qD=Se.define({combine(n){return _s(n,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(r,i)=>e(r,i)||t(r,i)})}}),WD=pn.define({create(){return us.empty},update(n,e){let t=e.state.facet(qD),r=e.annotation(px);if(r){let u=Or.fromTransaction(e,r.selection),h=r.side,d=h==0?n.undone:n.done;return u?d=Qg(d,d.length,t.minDepth,u):d=XD(d,e.startState.selection),new us(h==0?r.rest:d,h==0?d:r.rest)}let i=e.annotation(I7);if((i=="full"||i=="before")&&(n=n.isolate()),e.annotation(Wt.addToHistory)===!1)return e.changes.empty?n:n.addMapping(e.changes.desc);let s=Or.fromTransaction(e),o=e.annotation(Wt.time),l=e.annotation(Wt.userEvent);return s?n=n.addChanges(s,o,l,t,e):e.selection&&(n=n.addSelection(e.startState.selection,o,l,t.newGroupDelay)),(i=="full"||i=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}},fromJSON(n){return new us(n.done.map(Or.fromJSON),n.undone.map(Or.fromJSON))}});function D7(n={}){return[WD,qD.of(n),Oe.domEventHandlers({beforeinput(e,t){let r=e.inputType=="historyUndo"?HD:e.inputType=="historyRedo"?mx:null;return r?(e.preventDefault(),r(t)):!1}})]}function Vy(n,e){return function({state:t,dispatch:r}){if(!e&&t.readOnly)return!1;let i=t.field(WD,!1);if(!i)return!1;let s=i.pop(n,t,e);return s?(r(s),!0):!1}}const HD=Vy(0,!1),mx=Vy(1,!1),M7=Vy(0,!0),L7=Vy(1,!0);class Or{constructor(e,t,r,i,s){this.changes=e,this.effects=t,this.mapped=r,this.startSelection=i,this.selectionsAfter=s}setSelAfter(e){return new Or(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,r;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new Or(e.changes&&Jt.fromJSON(e.changes),[],e.mapped&&vs.fromJSON(e.mapped),e.startSelection&&ie.fromJSON(e.startSelection),e.selectionsAfter.map(ie.fromJSON))}static fromTransaction(e,t){let r=ii;for(let i of e.startState.facet(N7)){let s=i(e);s.length&&(r=r.concat(s))}return!r.length&&e.changes.empty?null:new Or(e.changes.invert(e.startState.doc),r,void 0,t||e.startState.selection,ii)}static selection(e){return new Or(void 0,ii,void 0,void 0,e)}}function Qg(n,e,t,r){let i=e+1>t+20?e-t-1:0,s=n.slice(i,e);return s.push(r),s}function V7(n,e){let t=[],r=!1;return n.iterChangedRanges((i,s)=>t.push(i,s)),e.iterChangedRanges((i,s,o,l)=>{for(let u=0;u<t.length;){let h=t[u++],d=t[u++];l>=h&&o<=d&&(r=!0)}}),r}function F7(n,e){return n.ranges.length==e.ranges.length&&n.ranges.filter((t,r)=>t.empty!=e.ranges[r].empty).length===0}function GD(n,e){return n.length?e.length?n.concat(e):n:e}const ii=[],Q7=200;function XD(n,e){if(n.length){let t=n[n.length-1],r=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-Q7));return r.length&&r[r.length-1].eq(e)?n:(r.push(e),Qg(n,n.length-1,1e9,t.setSelAfter(r)))}else return[Or.selection([e])]}function j7(n){let e=n[n.length-1],t=n.slice();return t[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function lw(n,e){if(!n.length)return n;let t=n.length,r=ii;for(;t;){let i=z7(n[t-1],e,r);if(i.changes&&!i.changes.empty||i.effects.length){let s=n.slice(0,t);return s[t-1]=i,s}else e=i.mapped,t--,r=i.selectionsAfter}return r.length?[Or.selection(r)]:ii}function z7(n,e,t){let r=GD(n.selectionsAfter.length?n.selectionsAfter.map(l=>l.map(e)):ii,t);if(!n.changes)return Or.selection(r);let i=n.changes.map(e),s=e.mapDesc(n.changes,!0),o=n.mapped?n.mapped.composeDesc(s):s;return new Or(i,$e.mapEffects(n.effects,e),o,n.startSelection.map(s),r)}const $7=/^(input\.type|delete)($|\.)/;class us{constructor(e,t,r=0,i=void 0){this.done=e,this.undone=t,this.prevTime=r,this.prevUserEvent=i}isolate(){return this.prevTime?new us(this.done,this.undone):this}addChanges(e,t,r,i,s){let o=this.done,l=o[o.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!r||$7.test(r))&&(!l.selectionsAfter.length&&t-this.prevTime<i.newGroupDelay&&i.joinToEvent(s,V7(l.changes,e.changes))||r=="input.type.compose")?o=Qg(o,o.length-1,i.minDepth,new Or(e.changes.compose(l.changes),GD($e.mapEffects(e.effects,l.changes),l.effects),l.mapped,l.startSelection,ii)):o=Qg(o,o.length,i.minDepth,e),new us(o,ii,t,r)}addSelection(e,t,r,i){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:ii;return s.length>0&&t-this.prevTime<i&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&F7(s[s.length-1],e)?this:new us(XD(this.done,e),this.undone,t,r)}addMapping(e){return new us(lw(this.done,e),lw(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,r){let i=e==0?this.done:this.undone;if(i.length==0)return null;let s=i[i.length-1],o=s.selectionsAfter[0]||t.selection;if(r&&s.selectionsAfter.length)return t.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:px.of({side:e,rest:j7(i),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let l=i.length==1?ii:i.slice(0,i.length-1);return s.mapped&&(l=lw(l,s.mapped)),t.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:px.of({side:e,rest:l,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}us.empty=new us(ii,ii);const B7=[{key:"Mod-z",run:HD,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:mx,preventDefault:!0},{linux:"Ctrl-Shift-z",run:mx,preventDefault:!0},{key:"Mod-u",run:M7,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:L7,preventDefault:!0}];function Xu(n,e){return ie.create(n.ranges.map(e),n.mainIndex)}function ks(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Vi({state:n,dispatch:e},t){let r=Xu(n.selection,t);return r.eq(n.selection,!0)?!1:(e(ks(n,r)),!0)}function Fy(n,e){return ie.cursor(e?n.to:n.from)}function KD(n,e){return Vi(n,t=>t.empty?n.moveByChar(t,e):Fy(t,e))}function Bn(n){return n.textDirectionAt(n.state.selection.main.head)==Et.LTR}const YD=n=>KD(n,!Bn(n)),JD=n=>KD(n,Bn(n));function ZD(n,e){return Vi(n,t=>t.empty?n.moveByGroup(t,e):Fy(t,e))}const U7=n=>ZD(n,!Bn(n)),q7=n=>ZD(n,Bn(n));function W7(n,e,t){if(e.type.prop(t))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function Qy(n,e,t){let r=dn(n).resolveInner(e.head),i=t?Xe.closedBy:Xe.openedBy;for(let u=e.head;;){let h=t?r.childAfter(u):r.childBefore(u);if(!h)break;W7(n,h,i)?r=h:u=t?h.to:h.from}let s=r.type.prop(i),o,l;return s&&(o=t?cs(n,r.from,1):cs(n,r.to,-1))&&o.matched?l=t?o.end.to:o.end.from:l=t?r.to:r.from,ie.cursor(l,t?-1:1)}const H7=n=>Vi(n,e=>Qy(n.state,e,!Bn(n))),G7=n=>Vi(n,e=>Qy(n.state,e,Bn(n)));function eM(n,e){return Vi(n,t=>{if(!t.empty)return Fy(t,e);let r=n.moveVertically(t,e);return r.head!=t.head?r:n.moveToLineBoundary(t,e)})}const tM=n=>eM(n,!1),nM=n=>eM(n,!0);function rM(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,r=0,i;if(e){for(let s of n.state.facet(Oe.scrollMargins)){let o=s(n);o!=null&&o.top&&(t=Math.max(o==null?void 0:o.top,t)),o!=null&&o.bottom&&(r=Math.max(o==null?void 0:o.bottom,r))}i=n.scrollDOM.clientHeight-t-r}else i=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:r,selfScroll:e,height:Math.max(n.defaultLineHeight,i-5)}}function iM(n,e){let t=rM(n),{state:r}=n,i=Xu(r.selection,o=>o.empty?n.moveVertically(o,e,t.height):Fy(o,e));if(i.eq(r.selection))return!1;let s;if(t.selfScroll){let o=n.coordsAtPos(r.selection.main.head),l=n.scrollDOM.getBoundingClientRect(),u=l.top+t.marginTop,h=l.bottom-t.marginBottom;o&&o.top>u&&o.bottom<h&&(s=Oe.scrollIntoView(i.main.head,{y:"start",yMargin:o.top-u}))}return n.dispatch(ks(r,i),{effects:s}),!0}const mC=n=>iM(n,!1),gx=n=>iM(n,!0);function Wa(n,e,t){let r=n.lineBlockAt(e.head),i=n.moveToLineBoundary(e,t);if(i.head==e.head&&i.head!=(t?r.to:r.from)&&(i=n.moveToLineBoundary(e,t,!1)),!t&&i.head==r.from&&r.length){let s=/^\s*/.exec(n.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;s&&e.head!=r.from+s&&(i=ie.cursor(r.from+s))}return i}const X7=n=>Vi(n,e=>Wa(n,e,!0)),K7=n=>Vi(n,e=>Wa(n,e,!1)),Y7=n=>Vi(n,e=>Wa(n,e,!Bn(n))),J7=n=>Vi(n,e=>Wa(n,e,Bn(n))),Z7=n=>Vi(n,e=>ie.cursor(n.lineBlockAt(e.head).from,1)),eG=n=>Vi(n,e=>ie.cursor(n.lineBlockAt(e.head).to,-1));function tG(n,e,t){let r=!1,i=Xu(n.selection,s=>{let o=cs(n,s.head,-1)||cs(n,s.head,1)||s.head>0&&cs(n,s.head-1,1)||s.head<n.doc.length&&cs(n,s.head+1,-1);if(!o||!o.end)return s;r=!0;let l=o.start.from==s.head?o.end.to:o.end.from;return ie.cursor(l)});return r?(e(ks(n,i)),!0):!1}const nG=({state:n,dispatch:e})=>tG(n,e);function ci(n,e){let t=Xu(n.state.selection,r=>{let i=e(r);return ie.range(r.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return t.eq(n.state.selection)?!1:(n.dispatch(ks(n.state,t)),!0)}function sM(n,e){return ci(n,t=>n.moveByChar(t,e))}const oM=n=>sM(n,!Bn(n)),aM=n=>sM(n,Bn(n));function lM(n,e){return ci(n,t=>n.moveByGroup(t,e))}const rG=n=>lM(n,!Bn(n)),iG=n=>lM(n,Bn(n)),sG=n=>ci(n,e=>Qy(n.state,e,!Bn(n))),oG=n=>ci(n,e=>Qy(n.state,e,Bn(n)));function cM(n,e){return ci(n,t=>n.moveVertically(t,e))}const uM=n=>cM(n,!1),hM=n=>cM(n,!0);function fM(n,e){return ci(n,t=>n.moveVertically(t,e,rM(n).height))}const gC=n=>fM(n,!1),yC=n=>fM(n,!0),aG=n=>ci(n,e=>Wa(n,e,!0)),lG=n=>ci(n,e=>Wa(n,e,!1)),cG=n=>ci(n,e=>Wa(n,e,!Bn(n))),uG=n=>ci(n,e=>Wa(n,e,Bn(n))),hG=n=>ci(n,e=>ie.cursor(n.lineBlockAt(e.head).from)),fG=n=>ci(n,e=>ie.cursor(n.lineBlockAt(e.head).to)),vC=({state:n,dispatch:e})=>(e(ks(n,{anchor:0})),!0),wC=({state:n,dispatch:e})=>(e(ks(n,{anchor:n.doc.length})),!0),OC=({state:n,dispatch:e})=>(e(ks(n,{anchor:n.selection.main.anchor,head:0})),!0),xC=({state:n,dispatch:e})=>(e(ks(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),dG=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),pG=({state:n,dispatch:e})=>{let t=jy(n).map(({from:r,to:i})=>ie.range(r,Math.min(i+1,n.doc.length)));return e(n.update({selection:ie.create(t),userEvent:"select"})),!0},mG=({state:n,dispatch:e})=>{let t=Xu(n.selection,r=>{let i=dn(n),s=i.resolveStack(r.from,1);if(r.empty){let o=i.resolveStack(r.from,-1);o.node.from>=s.node.from&&o.node.to<=s.node.to&&(s=o)}for(let o=s;o;o=o.next){let{node:l}=o;if((l.from<r.from&&l.to>=r.to||l.to>r.to&&l.from<=r.from)&&o.next)return ie.range(l.to,l.from)}return r});return t.eq(n.selection)?!1:(e(ks(n,t)),!0)},gG=({state:n,dispatch:e})=>{let t=n.selection,r=null;return t.ranges.length>1?r=ie.create([t.main]):t.main.empty||(r=ie.create([ie.cursor(t.main.head)])),r?(e(ks(n,r)),!0):!1};function wd(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:r}=n,i=r.changeByRange(s=>{let{from:o,to:l}=s;if(o==l){let u=e(s);u<o?(t="delete.backward",u=mm(n,u,!1)):u>o&&(t="delete.forward",u=mm(n,u,!0)),o=Math.min(o,u),l=Math.max(l,u)}else o=mm(n,o,!1),l=mm(n,l,!0);return o==l?{range:s}:{changes:{from:o,to:l},range:ie.cursor(o,o<s.head?-1:1)}});return i.changes.empty?!1:(n.dispatch(r.update(i,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?Oe.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function mm(n,e,t){if(n instanceof Oe)for(let r of n.state.facet(Oe.atomicRanges).map(i=>i(n)))r.between(e,e,(i,s)=>{i<e&&s>e&&(e=t?s:i)});return e}const dM=(n,e,t)=>wd(n,r=>{let i=r.from,{state:s}=n,o=s.doc.lineAt(i),l,u;if(t&&!e&&i>o.from&&i<o.from+200&&!/[^ \t]/.test(l=o.text.slice(0,i-o.from))){if(l[l.length-1]=="	")return i-1;let h=Gu(l,s.tabSize),d=h%Lg(s)||Lg(s);for(let m=0;m<d&&l[l.length-1-m]==" ";m++)i--;u=i}else u=En(o.text,i-o.from,e,e)+o.from,u==i&&o.number!=(e?s.doc.lines:1)?u+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(u-o.from,i-o.from))&&(u=En(o.text,u-o.from,!1,!1)+o.from);return u}),yx=n=>dM(n,!1,!0),pM=n=>dM(n,!0,!1),mM=(n,e)=>wd(n,t=>{let r=t.head,{state:i}=n,s=i.doc.lineAt(r),o=i.charCategorizer(r);for(let l=null;;){if(r==(e?s.to:s.from)){r==t.head&&s.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let u=En(s.text,r-s.from,e)+s.from,h=s.text.slice(Math.min(r,u)-s.from,Math.max(r,u)-s.from),d=o(h);if(l!=null&&d!=l)break;(h!=" "||r!=t.head)&&(l=d),r=u}return r}),gM=n=>mM(n,!1),yG=n=>mM(n,!0),vG=n=>wd(n,e=>{let t=n.lineBlockAt(e.head).to;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),wG=n=>wd(n,e=>{let t=n.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),OG=n=>wd(n,e=>{let t=n.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),xG=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:it.of(["",""])},range:ie.cursor(r.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},SG=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>{if(!r.empty||r.from==0||r.from==n.doc.length)return{range:r};let i=r.from,s=n.doc.lineAt(i),o=i==s.from?i-1:En(s.text,i-s.from,!1)+s.from,l=i==s.to?i+1:En(s.text,i-s.from,!0)+s.from;return{changes:{from:o,to:l,insert:n.doc.slice(i,l).append(n.doc.slice(o,i))},range:ie.cursor(l)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function jy(n){let e=[],t=-1;for(let r of n.selection.ranges){let i=n.doc.lineAt(r.from),s=n.doc.lineAt(r.to);if(!r.empty&&r.to==s.from&&(s=n.doc.lineAt(r.to-1)),t>=i.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(r)}else e.push({from:i.from,to:s.to,ranges:[r]});t=s.number+1}return e}function yM(n,e,t){if(n.readOnly)return!1;let r=[],i=[];for(let s of jy(n)){if(t?s.to==n.doc.length:s.from==0)continue;let o=n.doc.lineAt(t?s.to+1:s.from-1),l=o.length+1;if(t){r.push({from:s.to,to:o.to},{from:s.from,insert:o.text+n.lineBreak});for(let u of s.ranges)i.push(ie.range(Math.min(n.doc.length,u.anchor+l),Math.min(n.doc.length,u.head+l)))}else{r.push({from:o.from,to:s.from},{from:s.to,insert:n.lineBreak+o.text});for(let u of s.ranges)i.push(ie.range(u.anchor-l,u.head-l))}}return r.length?(e(n.update({changes:r,scrollIntoView:!0,selection:ie.create(i,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const bG=({state:n,dispatch:e})=>yM(n,e,!1),TG=({state:n,dispatch:e})=>yM(n,e,!0);function vM(n,e,t){if(n.readOnly)return!1;let r=[];for(let i of jy(n))t?r.push({from:i.from,insert:n.doc.slice(i.from,i.to)+n.lineBreak}):r.push({from:i.to,insert:n.lineBreak+n.doc.slice(i.from,i.to)});return e(n.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const _G=({state:n,dispatch:e})=>vM(n,e,!1),EG=({state:n,dispatch:e})=>vM(n,e,!0),kG=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(jy(e).map(({from:i,to:s})=>(i>0?i--:s<e.doc.length&&s++,{from:i,to:s}))),r=Xu(e.selection,i=>{let s;if(n.lineWrapping){let o=n.lineBlockAt(i.head),l=n.coordsAtPos(i.head,i.assoc||1);l&&(s=o.bottom+n.documentTop-l.bottom+n.defaultLineHeight/2)}return n.moveVertically(i,!0,s)}).map(t);return n.dispatch({changes:t,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function CG(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=dn(n).resolveInner(e),r=t.childBefore(e),i=t.childAfter(e),s;return r&&i&&r.to<=e&&i.from>=e&&(s=r.type.prop(Xe.closedBy))&&s.indexOf(i.name)>-1&&n.doc.lineAt(r.to).from==n.doc.lineAt(i.from).from&&!/\S/.test(n.sliceDoc(r.to,i.from))?{from:r.to,to:i.from}:null}const SC=wM(!1),PG=wM(!0);function wM(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:s,to:o}=i,l=e.doc.lineAt(s),u=!n&&s==o&&CG(e,s);n&&(s=o=(o<=l.to?l:e.doc.lineAt(o)).to);let h=new My(e,{simulateBreak:s,simulateDoubleBreak:!!u}),d=o1(h,s);for(d==null&&(d=Gu(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));o<l.to&&/\s/.test(l.text[o-l.from]);)o++;u?{from:s,to:o}=u:s>l.from&&s<l.from+100&&!/\S/.test(l.text.slice(0,s))&&(s=l.from);let m=["",Ff(e,d)];return u&&m.push(Ff(e,h.lineIndent(l.from,-1))),{changes:{from:s,to:o,insert:it.of(m)},range:ie.cursor(s+1+m[1].length)}});return t(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function u1(n,e){let t=-1;return n.changeByRange(r=>{let i=[];for(let o=r.from;o<=r.to;){let l=n.doc.lineAt(o);l.number>t&&(r.empty||r.to>l.from)&&(e(l,i,r),t=l.number),o=l.to+1}let s=n.changes(i);return{changes:i,range:ie.range(s.mapPos(r.anchor,1),s.mapPos(r.head,1))}})}const AG=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),r=new My(n,{overrideIndentation:s=>{let o=t[s];return o??-1}}),i=u1(n,(s,o,l)=>{let u=o1(r,s.from);if(u==null)return;/\S/.test(s.text)||(u=0);let h=/^\s*/.exec(s.text)[0],d=Ff(n,u);(h!=d||l.from<s.from+h.length)&&(t[s.from]=u,o.push({from:s.from,to:s.from+h.length,insert:d}))});return i.changes.empty||e(n.update(i,{userEvent:"indent"})),!0},OM=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(u1(n,(t,r)=>{r.push({from:t.from,insert:n.facet(gd)})}),{userEvent:"input.indent"})),!0),xM=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(u1(n,(t,r)=>{let i=/^\s*/.exec(t.text)[0];if(!i)return;let s=Gu(i,n.tabSize),o=0,l=Ff(n,Math.max(0,s-Lg(n)));for(;o<i.length&&o<l.length&&i.charCodeAt(o)==l.charCodeAt(o);)o++;r.push({from:t.from+o,to:t.from+i.length,insert:l.slice(o)})}),{userEvent:"delete.dedent"})),!0),RG=n=>(n.setTabFocusMode(),!0),IG=[{key:"Ctrl-b",run:YD,shift:oM,preventDefault:!0},{key:"Ctrl-f",run:JD,shift:aM},{key:"Ctrl-p",run:tM,shift:uM},{key:"Ctrl-n",run:nM,shift:hM},{key:"Ctrl-a",run:Z7,shift:hG},{key:"Ctrl-e",run:eG,shift:fG},{key:"Ctrl-d",run:pM},{key:"Ctrl-h",run:yx},{key:"Ctrl-k",run:vG},{key:"Ctrl-Alt-h",run:gM},{key:"Ctrl-o",run:xG},{key:"Ctrl-t",run:SG},{key:"Ctrl-v",run:gx}],NG=[{key:"ArrowLeft",run:YD,shift:oM,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:U7,shift:rG,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:Y7,shift:cG,preventDefault:!0},{key:"ArrowRight",run:JD,shift:aM,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:q7,shift:iG,preventDefault:!0},{mac:"Cmd-ArrowRight",run:J7,shift:uG,preventDefault:!0},{key:"ArrowUp",run:tM,shift:uM,preventDefault:!0},{mac:"Cmd-ArrowUp",run:vC,shift:OC},{mac:"Ctrl-ArrowUp",run:mC,shift:gC},{key:"ArrowDown",run:nM,shift:hM,preventDefault:!0},{mac:"Cmd-ArrowDown",run:wC,shift:xC},{mac:"Ctrl-ArrowDown",run:gx,shift:yC},{key:"PageUp",run:mC,shift:gC},{key:"PageDown",run:gx,shift:yC},{key:"Home",run:K7,shift:lG,preventDefault:!0},{key:"Mod-Home",run:vC,shift:OC},{key:"End",run:X7,shift:aG,preventDefault:!0},{key:"Mod-End",run:wC,shift:xC},{key:"Enter",run:SC,shift:SC},{key:"Mod-a",run:dG},{key:"Backspace",run:yx,shift:yx},{key:"Delete",run:pM},{key:"Mod-Backspace",mac:"Alt-Backspace",run:gM},{key:"Mod-Delete",mac:"Alt-Delete",run:yG},{mac:"Mod-Backspace",run:wG},{mac:"Mod-Delete",run:OG}].concat(IG.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),DG=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:H7,shift:sG},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:G7,shift:oG},{key:"Alt-ArrowUp",run:bG},{key:"Shift-Alt-ArrowUp",run:_G},{key:"Alt-ArrowDown",run:TG},{key:"Shift-Alt-ArrowDown",run:EG},{key:"Escape",run:gG},{key:"Mod-Enter",run:PG},{key:"Alt-l",mac:"Ctrl-l",run:pG},{key:"Mod-i",run:mG,preventDefault:!0},{key:"Mod-[",run:xM},{key:"Mod-]",run:OM},{key:"Mod-Alt-\\",run:AG},{key:"Shift-Mod-k",run:kG},{key:"Shift-Mod-\\",run:nG},{key:"Mod-/",run:_7},{key:"Alt-A",run:k7},{key:"Ctrl-m",mac:"Shift-Alt-m",run:RG}].concat(NG),MG={key:"Tab",run:OM,shift:xM};function mt(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var i=t[r];typeof i=="string"?n.setAttribute(r,i):i!=null&&(n[r]=i)}e++}for(;e<arguments.length;e++)SM(n,arguments[e]);return n}function SM(n,e){if(typeof e=="string")n.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)n.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)SM(n,e[t]);else throw new RangeError("Unsupported child node: "+e)}const bC=typeof String.prototype.normalize=="function"?n=>n.normalize("NFKD"):n=>n;class Du{constructor(e,t,r=0,i=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=s?l=>s(bC(l)):bC,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return mr(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=jS(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=os(e);let i=this.normalize(t);if(i.length)for(let s=0,o=r;;s++){let l=i.charCodeAt(s),u=this.match(l,o,this.bufferPos+this.bufferStart);if(s==i.length-1){if(u)return this.value=u,this;break}o==r&&s<t.length&&t.charCodeAt(s)==l&&o++}}}match(e,t,r){let i=null;for(let s=0;s<this.matches.length;s+=2){let o=this.matches[s],l=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?i={from:this.matches[s+1],to:r}:(this.matches[s]++,l=!0)),l||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:t,to:r}:this.matches.push(1,t)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}typeof Symbol<"u"&&(Du.prototype[Symbol.iterator]=function(){return this});const bM={from:-1,to:-1,match:/.*/.exec("")},h1="gm"+(/x/.unicode==null?"":"u");class TM{constructor(e,t,r,i=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=bM,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new _M(e,t,r,i,s);this.re=new RegExp(t,h1+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.iter=e.iter();let o=e.lineAt(i);this.curLineStart=o.from,this.matchPos=jg(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let r=this.curLineStart+t.index,i=r+t[0].length;if(this.matchPos=jg(this.text,i+(r==i?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<i||r>this.value.to)&&(!this.test||this.test(r,i,t)))return this.value={from:r,to:i,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const cw=new WeakMap;class su{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,r){let i=cw.get(e);if(!i||i.from>=r||i.to<=t){let l=new su(t,e.sliceString(t,r));return cw.set(e,l),l}if(i.from==t&&i.to==r)return i;let{text:s,from:o}=i;return o>t&&(s=e.sliceString(t,o)+s,o=t),i.to<r&&(s+=e.sliceString(i.to,r)),cw.set(e,new su(o,s)),new su(t,s.slice(t-o,r-o))}}class _M{constructor(e,t,r,i,s){this.text=e,this.to=s,this.done=!1,this.value=bM,this.matchPos=jg(e,i),this.re=new RegExp(t,h1+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.flat=su.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let r=this.flat.from+t.index,i=r+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,i,t)))return this.value={from:r,to:i,match:t},this.matchPos=jg(this.text,i+(r==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=su.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(TM.prototype[Symbol.iterator]=_M.prototype[Symbol.iterator]=function(){return this});function LG(n){try{return new RegExp(n,h1),!0}catch{return!1}}function jg(n,e){if(e>=n.length)return e;let t=n.lineAt(e),r;for(;e<t.to&&(r=t.text.charCodeAt(e-t.from))>=56320&&r<57344;)e++;return e}function vx(n){let e=String(n.state.doc.lineAt(n.state.selection.main.head).number),t=mt("input",{class:"cm-textfield",name:"line",value:e}),r=mt("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),n.dispatch({effects:ff.of(!1)}),n.focus()):s.keyCode==13&&(s.preventDefault(),i())},onsubmit:s=>{s.preventDefault(),i()}},mt("label",n.state.phrase("Go to line"),": ",t)," ",mt("button",{class:"cm-button",type:"submit"},n.state.phrase("go")),mt("button",{name:"close",onclick:()=>{n.dispatch({effects:ff.of(!1)}),n.focus()},"aria-label":n.state.phrase("close"),type:"button"},[""]));function i(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!s)return;let{state:o}=n,l=o.doc.lineAt(o.selection.main.head),[,u,h,d,m]=s,y=d?+d.slice(1):0,v=h?+h:l.number;if(h&&m){let T=v/100;u&&(T=T*(u=="-"?-1:1)+l.number/o.doc.lines),v=Math.round(o.doc.lines*T)}else h&&u&&(v=v*(u=="-"?-1:1)+l.number);let S=o.doc.line(Math.max(1,Math.min(o.doc.lines,v))),b=ie.cursor(S.from+Math.max(0,Math.min(y,S.length)));n.dispatch({effects:[ff.of(!1),Oe.scrollIntoView(b.from,{y:"center"})],selection:b}),n.focus()}return{dom:r}}const ff=$e.define(),TC=pn.define({create(){return!0},update(n,e){for(let t of e.effects)t.is(ff)&&(n=t.value);return n},provide:n=>Lf.from(n,e=>e?vx:null)}),VG=n=>{let e=Mf(n,vx);if(!e){let t=[ff.of(!0)];n.state.field(TC,!1)==null&&t.push($e.appendConfig.of([TC,FG])),n.dispatch({effects:t}),e=Mf(n,vx)}return e&&e.dom.querySelector("input").select(),!0},FG=Oe.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),QG={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},jG=Se.define({combine(n){return _s(n,QG,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function zG(n){return[WG,qG]}const $G=Re.mark({class:"cm-selectionMatch"}),BG=Re.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function _C(n,e,t,r){return(t==0||n(e.sliceDoc(t-1,t))!=At.Word)&&(r==e.doc.length||n(e.sliceDoc(r,r+1))!=At.Word)}function UG(n,e,t,r){return n(e.sliceDoc(t,t+1))==At.Word&&n(e.sliceDoc(r-1,r))==At.Word}const qG=zt.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.selectionSet||n.docChanged||n.viewportChanged)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=n.state.facet(jG),{state:t}=n,r=t.selection;if(r.ranges.length>1)return Re.none;let i=r.main,s,o=null;if(i.empty){if(!e.highlightWordAroundCursor)return Re.none;let u=t.wordAt(i.head);if(!u)return Re.none;o=t.charCategorizer(i.head),s=t.sliceDoc(u.from,u.to)}else{let u=i.to-i.from;if(u<e.minSelectionLength||u>200)return Re.none;if(e.wholeWords){if(s=t.sliceDoc(i.from,i.to),o=t.charCategorizer(i.head),!(_C(o,t,i.from,i.to)&&UG(o,t,i.from,i.to)))return Re.none}else if(s=t.sliceDoc(i.from,i.to),!s)return Re.none}let l=[];for(let u of n.visibleRanges){let h=new Du(t.doc,s,u.from,u.to);for(;!h.next().done;){let{from:d,to:m}=h.value;if((!o||_C(o,t,d,m))&&(i.empty&&d<=i.from&&m>=i.to?l.push(BG.range(d,m)):(d>=i.to||m<=i.from)&&l.push($G.range(d,m)),l.length>e.maxMatches))return Re.none}}return Re.set(l)}},{decorations:n=>n.decorations}),WG=Oe.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),HG=({state:n,dispatch:e})=>{let{selection:t}=n,r=ie.create(t.ranges.map(i=>n.wordAt(i.head)||ie.cursor(i.head)),t.mainIndex);return r.eq(t)?!1:(e(n.update({selection:r})),!0)};function GG(n,e){let{main:t,ranges:r}=n.selection,i=n.wordAt(t.head),s=i&&i.from==t.from&&i.to==t.to;for(let o=!1,l=new Du(n.doc,e,r[r.length-1].to);;)if(l.next(),l.done){if(o)return null;l=new Du(n.doc,e,0,Math.max(0,r[r.length-1].from-1)),o=!0}else{if(o&&r.some(u=>u.from==l.value.from))continue;if(s){let u=n.wordAt(l.value.from);if(!u||u.from!=l.value.from||u.to!=l.value.to)continue}return l.value}}const XG=({state:n,dispatch:e})=>{let{ranges:t}=n.selection;if(t.some(s=>s.from===s.to))return HG({state:n,dispatch:e});let r=n.sliceDoc(t[0].from,t[0].to);if(n.selection.ranges.some(s=>n.sliceDoc(s.from,s.to)!=r))return!1;let i=GG(n,r);return i?(e(n.update({selection:n.selection.addRange(ie.range(i.from,i.to),!1),effects:Oe.scrollIntoView(i.to)})),!0):!1},Ku=Se.define({combine(n){return _s(n,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new aX(e),scrollToMatch:e=>Oe.scrollIntoView(e)})}});class EM{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||LG(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new ZG(this):new YG(this)}getCursor(e,t=0,r){let i=e.doc?e:tt.create({doc:e});return r==null&&(r=i.doc.length),this.regexp?Bc(this,i,t,r):$c(this,i,t,r)}}class kM{constructor(e){this.spec=e}}function $c(n,e,t,r){return new Du(e.doc,n.unquoted,t,r,n.caseSensitive?void 0:i=>i.toLowerCase(),n.wholeWord?KG(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function KG(n,e){return(t,r,i,s)=>((s>t||s+i.length<r)&&(s=Math.max(0,t-2),i=n.sliceString(s,Math.min(n.length,r+2))),(e(zg(i,t-s))!=At.Word||e($g(i,t-s))!=At.Word)&&(e($g(i,r-s))!=At.Word||e(zg(i,r-s))!=At.Word))}class YG extends kM{constructor(e){super(e)}nextMatch(e,t,r){let i=$c(this.spec,e,r,e.doc.length).nextOverlapping();if(i.done){let s=Math.min(e.doc.length,t+this.spec.unquoted.length);i=$c(this.spec,e,0,s).nextOverlapping()}return i.done||i.value.from==t&&i.value.to==r?null:i.value}prevMatchInRange(e,t,r){for(let i=r;;){let s=Math.max(t,i-1e4-this.spec.unquoted.length),o=$c(this.spec,e,s,i),l=null;for(;!o.nextOverlapping().done;)l=o.value;if(l)return l;if(s==t)return null;i-=1e4}}prevMatch(e,t,r){let i=this.prevMatchInRange(e,0,t);return i||(i=this.prevMatchInRange(e,Math.max(0,r-this.spec.unquoted.length),e.doc.length)),i&&(i.from!=t||i.to!=r)?i:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let r=$c(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=t)return null;i.push(r.value)}return i}highlight(e,t,r,i){let s=$c(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}function Bc(n,e,t,r){return new TM(e.doc,n.search,{ignoreCase:!n.caseSensitive,test:n.wholeWord?JG(e.charCategorizer(e.selection.main.head)):void 0},t,r)}function zg(n,e){return n.slice(En(n,e,!1),e)}function $g(n,e){return n.slice(e,En(n,e))}function JG(n){return(e,t,r)=>!r[0].length||(n(zg(r.input,r.index))!=At.Word||n($g(r.input,r.index))!=At.Word)&&(n($g(r.input,r.index+r[0].length))!=At.Word||n(zg(r.input,r.index+r[0].length))!=At.Word)}class ZG extends kM{nextMatch(e,t,r){let i=Bc(this.spec,e,r,e.doc.length).next();return i.done&&(i=Bc(this.spec,e,0,t).next()),i.done?null:i.value}prevMatchInRange(e,t,r){for(let i=1;;i++){let s=Math.max(t,r-i*1e4),o=Bc(this.spec,e,s,r),l=null;for(;!o.next().done;)l=o.value;if(l&&(s==t||l.from>s+10))return l;if(s==t)return null}}prevMatch(e,t,r){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(t,r)=>{if(r=="&")return e.match[0];if(r=="$")return"$";for(let i=r.length;i>0;i--){let s=+r.slice(0,i);if(s>0&&s<e.match.length)return e.match[s]+r.slice(i)}return t})}matchAll(e,t){let r=Bc(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=t)return null;i.push(r.value)}return i}highlight(e,t,r,i){let s=Bc(this.spec,e,Math.max(0,t-250),Math.min(r+250,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}const Qf=$e.define(),f1=$e.define(),Sa=pn.define({create(n){return new uw(wx(n).create(),null)},update(n,e){for(let t of e.effects)t.is(Qf)?n=new uw(t.value.create(),n.panel):t.is(f1)&&(n=new uw(n.query,t.value?d1:null));return n},provide:n=>Lf.from(n,e=>e.panel)});class uw{constructor(e,t){this.query=e,this.panel=t}}const eX=Re.mark({class:"cm-searchMatch"}),tX=Re.mark({class:"cm-searchMatch cm-searchMatch-selected"}),nX=zt.fromClass(class{constructor(n){this.view=n,this.decorations=this.highlight(n.state.field(Sa))}update(n){let e=n.state.field(Sa);(e!=n.startState.field(Sa)||n.docChanged||n.selectionSet||n.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:n,panel:e}){if(!e||!n.spec.valid)return Re.none;let{view:t}=this,r=new go;for(let i=0,s=t.visibleRanges,o=s.length;i<o;i++){let{from:l,to:u}=s[i];for(;i<o-1&&u>s[i+1].from-2*250;)u=s[++i].to;n.highlight(t.state,l,u,(h,d)=>{let m=t.state.selection.ranges.some(y=>y.from==h&&y.to==d);r.add(h,d,m?tX:eX)})}return r.finish()}},{decorations:n=>n.decorations});function Od(n){return e=>{let t=e.state.field(Sa,!1);return t&&t.query.spec.valid?n(e,t):AM(e)}}const Bg=Od((n,{query:e})=>{let{to:t}=n.state.selection.main,r=e.nextMatch(n.state,t,t);if(!r)return!1;let i=ie.single(r.from,r.to),s=n.state.facet(Ku);return n.dispatch({selection:i,effects:[p1(n,r),s.scrollToMatch(i.main,n)],userEvent:"select.search"}),PM(n),!0}),Ug=Od((n,{query:e})=>{let{state:t}=n,{from:r}=t.selection.main,i=e.prevMatch(t,r,r);if(!i)return!1;let s=ie.single(i.from,i.to),o=n.state.facet(Ku);return n.dispatch({selection:s,effects:[p1(n,i),o.scrollToMatch(s.main,n)],userEvent:"select.search"}),PM(n),!0}),rX=Od((n,{query:e})=>{let t=e.matchAll(n.state,1e3);return!t||!t.length?!1:(n.dispatch({selection:ie.create(t.map(r=>ie.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),iX=({state:n,dispatch:e})=>{let t=n.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:r,to:i}=t.main,s=[],o=0;for(let l=new Du(n.doc,n.sliceDoc(r,i));!l.next().done;){if(s.length>1e3)return!1;l.value.from==r&&(o=s.length),s.push(ie.range(l.value.from,l.value.to))}return e(n.update({selection:ie.create(s,o),userEvent:"select.search.matches"})),!0},EC=Od((n,{query:e})=>{let{state:t}=n,{from:r,to:i}=t.selection.main;if(t.readOnly)return!1;let s=e.nextMatch(t,r,r);if(!s)return!1;let o=s,l=[],u,h,d=[];if(o.from==r&&o.to==i&&(h=t.toText(e.getReplacement(o)),l.push({from:o.from,to:o.to,insert:h}),o=e.nextMatch(t,o.from,o.to),d.push(Oe.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(r).number)+"."))),o){let m=l.length==0||l[0].from>=s.to?0:s.to-s.from-h.length;u=ie.single(o.from-m,o.to-m),d.push(p1(n,o)),d.push(t.facet(Ku).scrollToMatch(u.main,n))}return n.dispatch({changes:l,selection:u,effects:d,userEvent:"input.replace"}),!0}),sX=Od((n,{query:e})=>{if(n.state.readOnly)return!1;let t=e.matchAll(n.state,1e9).map(i=>{let{from:s,to:o}=i;return{from:s,to:o,insert:e.getReplacement(i)}});if(!t.length)return!1;let r=n.state.phrase("replaced $ matches",t.length)+".";return n.dispatch({changes:t,effects:Oe.announce.of(r),userEvent:"input.replace.all"}),!0});function d1(n){return n.state.facet(Ku).createPanel(n)}function wx(n,e){var t,r,i,s,o;let l=n.selection.main,u=l.empty||l.to>l.from+100?"":n.sliceDoc(l.from,l.to);if(e&&!u)return e;let h=n.facet(Ku);return new EM({search:((t=e==null?void 0:e.literal)!==null&&t!==void 0?t:h.literal)?u:u.replace(/\n/g,"\\n"),caseSensitive:(r=e==null?void 0:e.caseSensitive)!==null&&r!==void 0?r:h.caseSensitive,literal:(i=e==null?void 0:e.literal)!==null&&i!==void 0?i:h.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:h.regexp,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:h.wholeWord})}function CM(n){let e=Mf(n,d1);return e&&e.dom.querySelector("[main-field]")}function PM(n){let e=CM(n);e&&e==n.root.activeElement&&e.select()}const AM=n=>{let e=n.state.field(Sa,!1);if(e&&e.panel){let t=CM(n);if(t&&t!=n.root.activeElement){let r=wx(n.state,e.query.spec);r.valid&&n.dispatch({effects:Qf.of(r)}),t.focus(),t.select()}}else n.dispatch({effects:[f1.of(!0),e?Qf.of(wx(n.state,e.query.spec)):$e.appendConfig.of(cX)]});return!0},RM=n=>{let e=n.state.field(Sa,!1);if(!e||!e.panel)return!1;let t=Mf(n,d1);return t&&t.dom.contains(n.root.activeElement)&&n.focus(),n.dispatch({effects:f1.of(!1)}),!0},oX=[{key:"Mod-f",run:AM,scope:"editor search-panel"},{key:"F3",run:Bg,shift:Ug,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Bg,shift:Ug,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:RM,scope:"editor search-panel"},{key:"Mod-Shift-l",run:iX},{key:"Mod-Alt-g",run:VG},{key:"Mod-d",run:XG,preventDefault:!0}];class aX{constructor(e){this.view=e;let t=this.query=e.state.field(Sa).query.spec;this.commit=this.commit.bind(this),this.searchField=mt("input",{value:t.search,placeholder:Nr(e,"Find"),"aria-label":Nr(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=mt("input",{value:t.replace,placeholder:Nr(e,"Replace"),"aria-label":Nr(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=mt("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=mt("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=mt("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function r(i,s,o){return mt("button",{class:"cm-button",name:i,onclick:s,type:"button"},o)}this.dom=mt("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>Bg(e),[Nr(e,"next")]),r("prev",()=>Ug(e),[Nr(e,"previous")]),r("select",()=>rX(e),[Nr(e,"all")]),mt("label",null,[this.caseField,Nr(e,"match case")]),mt("label",null,[this.reField,Nr(e,"regexp")]),mt("label",null,[this.wordField,Nr(e,"by word")]),...e.state.readOnly?[]:[mt("br"),this.replaceField,r("replace",()=>EC(e),[Nr(e,"replace")]),r("replaceAll",()=>sX(e),[Nr(e,"replace all")])],mt("button",{name:"close",onclick:()=>RM(e),"aria-label":Nr(e,"close"),type:"button"},[""])])}commit(){let e=new EM({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Qf.of(e)}))}keydown(e){m8(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Ug:Bg)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),EC(this.view))}update(e){for(let t of e.transactions)for(let r of t.effects)r.is(Qf)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Ku).top}}function Nr(n,e){return n.state.phrase(e)}const gm=30,ym=/[\s\.,:;?!]/;function p1(n,{from:e,to:t}){let r=n.state.doc.lineAt(e),i=n.state.doc.lineAt(t).to,s=Math.max(r.from,e-gm),o=Math.min(i,t+gm),l=n.state.sliceDoc(s,o);if(s!=r.from){for(let u=0;u<gm;u++)if(!ym.test(l[u+1])&&ym.test(l[u])){l=l.slice(u);break}}if(o!=i){for(let u=l.length-1;u>l.length-gm;u--)if(!ym.test(l[u-1])&&ym.test(l[u])){l=l.slice(0,u);break}}return Oe.announce.of(`${n.state.phrase("current match")}. ${l} ${n.state.phrase("on line")} ${r.number}.`)}const lX=Oe.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),cX=[Sa,qa.low(nX),lX];class IM{constructor(e,t,r,i){this.state=e,this.pos=t,this.explicit=r,this.view=i,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=dn(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),r=Math.max(t.from,this.pos-250),i=t.text.slice(r-t.from,this.pos-t.from),s=i.search(DM(e,!1));return s<0?null:{from:r+s,to:this.pos,text:i.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,t,r){e=="abort"&&this.abortListeners&&(this.abortListeners.push(t),r&&r.onDocChange&&(this.abortOnDocChange=!0))}}function kC(n){let e=Object.keys(n).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function uX(n){let e=Object.create(null),t=Object.create(null);for(let{label:i}of n){e[i[0]]=!0;for(let s=1;s<i.length;s++)t[i[s]]=!0}let r=kC(e)+kC(t)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function NM(n){let e=n.map(i=>typeof i=="string"?{label:i}:i),[t,r]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:uX(e);return i=>{let s=i.matchBefore(r);return s||i.explicit?{from:s?s.from:i.pos,options:e,validFor:t}:null}}function hX(n,e){return t=>{for(let r=dn(t.state).resolveInner(t.pos,-1);r;r=r.parent){if(n.indexOf(r.name)>-1)return null;if(r.type.isTop)break}return e(t)}}class CC{constructor(e,t,r,i){this.completion=e,this.source=t,this.match=r,this.score=i}}function Il(n){return n.selection.main.from}function DM(n,e){var t;let{source:r}=n,i=e&&r[0]!="^",s=r[r.length-1]!="$";return!i&&!s?n:new RegExp(`${i?"^":""}(?:${r})${s?"$":""}`,(t=n.flags)!==null&&t!==void 0?t:n.ignoreCase?"i":"")}const m1=Ts.define();function fX(n,e,t,r){let{main:i}=n.selection,s=t-i.from,o=r-i.from;return Object.assign(Object.assign({},n.changeByRange(l=>{if(l!=i&&t!=r&&n.sliceDoc(l.from+s,l.from+o)!=n.sliceDoc(t,r))return{range:l};let u=n.toText(e);return{changes:{from:l.from+s,to:r==i.from?l.to:l.from+o,insert:u},range:ie.cursor(l.from+s+u.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}const PC=new WeakMap;function dX(n){if(!Array.isArray(n))return n;let e=PC.get(n);return e||PC.set(n,e=NM(n)),e}const qg=$e.define(),jf=$e.define();class pX{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let r=mr(e,t),i=os(r);this.chars.push(r);let s=e.slice(t,t+i),o=s.toUpperCase();this.folded.push(mr(o==s?s.toLowerCase():o,0)),t+=i}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:r,any:i,precise:s,byWord:o}=this;if(t.length==1){let M=mr(e,0),F=os(M),z=F==e.length?0:-100;if(M!=t[0])if(M==r[0])z+=-200;else return null;return this.ret(z,[0,F])}let l=e.indexOf(this.pattern);if(l==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let u=t.length,h=0;if(l<0){for(let M=0,F=Math.min(e.length,200);M<F&&h<u;){let z=mr(e,M);(z==t[h]||z==r[h])&&(i[h++]=M),M+=os(z)}if(h<u)return null}let d=0,m=0,y=!1,v=0,S=-1,b=-1,T=/[a-z]/.test(e),k=!0;for(let M=0,F=Math.min(e.length,200),z=0;M<F&&m<u;){let $=mr(e,M);l<0&&(d<u&&$==t[d]&&(s[d++]=M),v<u&&($==t[v]||$==r[v]?(v==0&&(S=M),b=M+1,v++):v=0));let U,C=$<255?$>=48&&$<=57||$>=97&&$<=122?2:$>=65&&$<=90?1:0:(U=jS($))!=U.toLowerCase()?1:U!=U.toUpperCase()?2:0;(!M||C==1&&T||z==0&&C!=0)&&(t[m]==$||r[m]==$&&(y=!0)?o[m++]=M:o.length&&(k=!1)),z=C,M+=os($)}return m==u&&o[0]==0&&k?this.result(-100+(y?-200:0),o,e):v==u&&S==0?this.ret(-200-e.length+(b==e.length?0:-100),[0,b]):l>-1?this.ret(-700-e.length,[l,l+this.pattern.length]):v==u?this.ret(-900-e.length,[S,b]):m==u?this.result(-100+(y?-200:0)+-700+(k?0:-1100),o,e):t.length==2?null:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,t,r){let i=[],s=0;for(let o of t){let l=o+(this.astral?os(mr(r,o)):1);s&&i[s-1]==o?i[s-1]=l:(i[s++]=o,i[s++]=l)}return this.ret(e-r.length,i)}}class mX{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),r=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return r==null?null:(this.matched=[0,t.length],this.score=r+(e.length==this.pattern.length?0:-100),this)}}const fn=Se.define({combine(n){return _s(n,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:gX,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>r=>AC(e(r),t(r)),optionClass:(e,t)=>r=>AC(e(r),t(r)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})}});function AC(n,e){return n?e?n+" "+e:n:e}function gX(n,e,t,r,i,s){let o=n.textDirection==Et.RTL,l=o,u=!1,h="top",d,m,y=e.left-i.left,v=i.right-e.right,S=r.right-r.left,b=r.bottom-r.top;if(l&&y<Math.min(S,v)?l=!1:!l&&v<Math.min(S,y)&&(l=!0),S<=(l?y:v))d=Math.max(i.top,Math.min(t.top,i.bottom-b))-e.top,m=Math.min(400,l?y:v);else{u=!0,m=Math.min(400,(o?e.right:i.right-e.left)-30);let M=i.bottom-e.bottom;M>=b||M>e.top?d=t.bottom-e.top:(h="bottom",d=e.bottom-t.top)}let T=(e.bottom-e.top)/s.offsetHeight,k=(e.right-e.left)/s.offsetWidth;return{style:`${h}: ${d/T}px; max-width: ${m/k}px`,class:"cm-completionInfo-"+(u?o?"left-narrow":"right-narrow":l?"left":"right")}}function yX(n){let e=n.addToOptions.slice();return n.icons&&e.push({render(t){let r=document.createElement("div");return r.classList.add("cm-completionIcon"),t.type&&r.classList.add(...t.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),r.setAttribute("aria-hidden","true"),r},position:20}),e.push({render(t,r,i,s){let o=document.createElement("span");o.className="cm-completionLabel";let l=t.displayLabel||t.label,u=0;for(let h=0;h<s.length;){let d=s[h++],m=s[h++];d>u&&o.appendChild(document.createTextNode(l.slice(u,d)));let y=o.appendChild(document.createElement("span"));y.appendChild(document.createTextNode(l.slice(d,m))),y.className="cm-completionMatchedText",u=m}return u<l.length&&o.appendChild(document.createTextNode(l.slice(u))),o},position:50},{render(t){if(!t.detail)return null;let r=document.createElement("span");return r.className="cm-completionDetail",r.textContent=t.detail,r},position:80}),e.sort((t,r)=>t.position-r.position).map(t=>t.render)}function hw(n,e,t){if(n<=t)return{from:0,to:n};if(e<0&&(e=0),e<=n>>1){let i=Math.floor(e/t);return{from:i*t,to:(i+1)*t}}let r=Math.floor((n-e)/t);return{from:n-(r+1)*t,to:n-r*t}}class vX{constructor(e,t,r){this.view=e,this.stateField=t,this.applyCompletion=r,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:u=>this.placeInfo(u),key:this},this.space=null,this.currentClass="";let i=e.state.field(t),{options:s,selected:o}=i.open,l=e.state.facet(fn);this.optionContent=yX(l),this.optionClass=l.optionClass,this.tooltipClass=l.tooltipClass,this.range=hw(s.length,o,l.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",u=>{let{options:h}=e.state.field(t).open;for(let d=u.target,m;d&&d!=this.dom;d=d.parentNode)if(d.nodeName=="LI"&&(m=/-(\d+)$/.exec(d.id))&&+m[1]<h.length){this.applyCompletion(e,h[+m[1]]),u.preventDefault();return}}),this.dom.addEventListener("focusout",u=>{let h=e.state.field(this.stateField,!1);h&&h.tooltip&&e.state.facet(fn).closeOnBlur&&u.relatedTarget!=e.contentDOM&&e.dispatch({effects:jf.of(null)})}),this.showOptions(s,i.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let r=e.state.field(this.stateField),i=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),r!=i){let{options:s,selected:o,disabled:l}=r.open;(!i.open||i.open.options!=s)&&(this.range=hw(s.length,o,e.state.facet(fn).maxRenderedOptions),this.showOptions(s,r.id)),this.updateSel(),l!=((t=i.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!l)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let r of this.currentClass.split(" "))r&&this.dom.classList.remove(r);for(let r of t.split(" "))r&&this.dom.classList.add(r);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=hw(t.options.length,t.selected,this.view.state.facet(fn).maxRenderedOptions),this.showOptions(t.options,e.id)),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:r}=t.options[t.selected],{info:i}=r;if(!i)return;let s=typeof i=="string"?document.createTextNode(i):i(r);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,r)}).catch(o=>wr(this.view.state,o,"completion info")):this.addInfoPane(s,r)}}addInfoPane(e,t){this.destroyInfo();let r=this.info=document.createElement("div");if(r.className="cm-tooltip cm-completionInfo",e.nodeType!=null)r.appendChild(e),this.infoDestroy=null;else{let{dom:i,destroy:s}=e;r.appendChild(i),this.infoDestroy=s||null}this.dom.appendChild(r),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let r=this.list.firstChild,i=this.range.from;r;r=r.nextSibling,i++)r.nodeName!="LI"||!r.id?i--:i==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),t=r):r.hasAttribute("aria-selected")&&r.removeAttribute("aria-selected");return t&&OX(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.documentElement;s={left:0,top:0,right:o.clientWidth,bottom:o.clientHeight}}return i.top>Math.min(s.bottom,t.bottom)-10||i.bottom<Math.max(s.top,t.top)+10?null:this.view.state.facet(fn).positionInfo(this.view,t,i,r,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,r){const i=document.createElement("ul");i.id=t,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions")),i.addEventListener("mousedown",o=>{o.target==i&&o.preventDefault()});let s=null;for(let o=r.from;o<r.to;o++){let{completion:l,match:u}=e[o],{section:h}=l;if(h){let y=typeof h=="string"?h:h.name;if(y!=s&&(o>r.from||r.from==0))if(s=y,typeof h!="string"&&h.header)i.appendChild(h.header(h));else{let v=i.appendChild(document.createElement("completion-section"));v.textContent=y}}const d=i.appendChild(document.createElement("li"));d.id=t+"-"+o,d.setAttribute("role","option");let m=this.optionClass(l);m&&(d.className=m);for(let y of this.optionContent){let v=y(l,this.view.state,this.view,u);v&&d.appendChild(v)}}return r.from&&i.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function wX(n,e){return t=>new vX(t,n,e)}function OX(n,e){let t=n.getBoundingClientRect(),r=e.getBoundingClientRect(),i=t.height/n.offsetHeight;r.top<t.top?n.scrollTop-=(t.top-r.top)/i:r.bottom>t.bottom&&(n.scrollTop+=(r.bottom-t.bottom)/i)}function RC(n){return(n.boost||0)*100+(n.apply?10:0)+(n.info?5:0)+(n.type?1:0)}function xX(n,e){let t=[],r=null,i=h=>{t.push(h);let{section:d}=h.completion;if(d){r||(r=[]);let m=typeof d=="string"?d:d.name;r.some(y=>y.name==m)||r.push(typeof d=="string"?{name:m}:d)}},s=e.facet(fn);for(let h of n)if(h.hasResult()){let d=h.result.getMatch;if(h.result.filter===!1)for(let m of h.result.options)i(new CC(m,h.source,d?d(m):[],1e9-t.length));else{let m=e.sliceDoc(h.from,h.to),y,v=s.filterStrict?new mX(m):new pX(m);for(let S of h.result.options)if(y=v.match(S.label)){let b=S.displayLabel?d?d(S,y.matched):[]:y.matched;i(new CC(S,h.source,b,y.score+(S.boost||0)))}}}if(r){let h=Object.create(null),d=0,m=(y,v)=>{var S,b;return((S=y.rank)!==null&&S!==void 0?S:1e9)-((b=v.rank)!==null&&b!==void 0?b:1e9)||(y.name<v.name?-1:1)};for(let y of r.sort(m))d-=1e5,h[y.name]=d;for(let y of t){let{section:v}=y.completion;v&&(y.score+=h[typeof v=="string"?v:v.name])}}let o=[],l=null,u=s.compareCompletions;for(let h of t.sort((d,m)=>m.score-d.score||u(d.completion,m.completion))){let d=h.completion;!l||l.label!=d.label||l.detail!=d.detail||l.type!=null&&d.type!=null&&l.type!=d.type||l.apply!=d.apply||l.boost!=d.boost?o.push(h):RC(h.completion)>RC(l)&&(o[o.length-1]=h),l=h.completion}return o}class Hc{constructor(e,t,r,i,s,o){this.options=e,this.attrs=t,this.tooltip=r,this.timestamp=i,this.selected=s,this.disabled=o}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new Hc(this.options,IC(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,r,i,s,o){if(i&&!o&&e.some(h=>h.isPending))return i.setDisabled();let l=xX(e,t);if(!l.length)return i&&e.some(h=>h.isPending)?i.setDisabled():null;let u=t.facet(fn).selectOnOpen?0:-1;if(i&&i.selected!=u&&i.selected!=-1){let h=i.options[i.selected].completion;for(let d=0;d<l.length;d++)if(l[d].completion==h){u=d;break}}return new Hc(l,IC(r,u),{pos:e.reduce((h,d)=>d.hasResult()?Math.min(h,d.from):h,1e8),create:kX,above:s.aboveCursor},i?i.timestamp:Date.now(),u,!1)}map(e){return new Hc(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new Hc(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class Wg{constructor(e,t,r){this.active=e,this.id=t,this.open=r}static start(){return new Wg(_X,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,r=t.facet(fn),s=(r.override||t.languageDataAt("autocomplete",Il(t)).map(dX)).map(u=>(this.active.find(d=>d.source==u)||new si(u,this.active.some(d=>d.state!=0)?1:0)).update(e,r));s.length==this.active.length&&s.every((u,h)=>u==this.active[h])&&(s=this.active);let o=this.open,l=e.effects.some(u=>u.is(g1));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(u=>u.hasResult()&&e.changes.touchesRange(u.from,u.to))||!SX(s,this.active)||l?o=Hc.build(s,t,this.id,o,r,l):o&&o.disabled&&!s.some(u=>u.isPending)&&(o=null),!o&&s.every(u=>!u.isPending)&&s.some(u=>u.hasResult())&&(s=s.map(u=>u.hasResult()?new si(u.source,0):u));for(let u of e.effects)u.is(LM)&&(o=o&&o.setSelected(u.value,this.id));return s==this.active&&o==this.open?this:new Wg(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?bX:TX}}function SX(n,e){if(n==e)return!0;for(let t=0,r=0;;){for(;t<n.length&&!n[t].hasResult();)t++;for(;r<e.length&&!e[r].hasResult();)r++;let i=t==n.length,s=r==e.length;if(i||s)return i==s;if(n[t++].result!=e[r++].result)return!1}}const bX={"aria-autocomplete":"list"},TX={};function IC(n,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":n};return e>-1&&(t["aria-activedescendant"]=n+"-"+e),t}const _X=[];function MM(n,e){if(n.isUserEvent("input.complete")){let r=n.annotation(m1);if(r&&e.activateOnCompletion(r))return 12}let t=n.isUserEvent("input.type");return t&&e.activateOnTyping?5:t?1:n.isUserEvent("delete.backward")?2:n.selection?8:n.docChanged?16:0}class si{constructor(e,t,r=!1){this.source=e,this.state=t,this.explicit=r}hasResult(){return!1}get isPending(){return this.state==1}update(e,t){let r=MM(e,t),i=this;(r&8||r&16&&this.touches(e))&&(i=new si(i.source,0)),r&4&&i.state==0&&(i=new si(this.source,1)),i=i.updateFor(e,r);for(let s of e.effects)if(s.is(qg))i=new si(i.source,1,s.value);else if(s.is(jf))i=new si(i.source,0);else if(s.is(g1))for(let o of s.value)o.source==i.source&&(i=o);return i}updateFor(e,t){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(Il(e.state))}}class ou extends si{constructor(e,t,r,i,s,o){super(e,3,t),this.limit=r,this.result=i,this.from=s,this.to=o}hasResult(){return!0}updateFor(e,t){var r;if(!(t&3))return this.map(e.changes);let i=this.result;i.map&&!e.changes.empty&&(i=i.map(i,e.changes));let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),l=Il(e.state);if(l>o||!i||t&2&&(Il(e.startState)==this.from||l<this.limit))return new si(this.source,t&4?1:0);let u=e.changes.mapPos(this.limit);return EX(i.validFor,e.state,s,o)?new ou(this.source,this.explicit,u,i,s,o):i.update&&(i=i.update(i,s,o,new IM(e.state,l,!1)))?new ou(this.source,this.explicit,u,i,i.from,(r=i.to)!==null&&r!==void 0?r:Il(e.state)):new si(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new ou(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new si(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function EX(n,e,t,r){if(!n)return!1;let i=e.sliceDoc(t,r);return typeof n=="function"?n(i,t,r,e):DM(n,!0).test(i)}const g1=$e.define({map(n,e){return n.map(t=>t.map(e))}}),LM=$e.define(),yr=pn.define({create(){return Wg.start()},update(n,e){return n.update(e)},provide:n=>[t1.from(n,e=>e.tooltip),Oe.contentAttributes.from(n,e=>e.attrs)]});function y1(n,e){const t=e.completion.apply||e.completion.label;let r=n.state.field(yr).active.find(i=>i.source==e.source);return r instanceof ou?(typeof t=="string"?n.dispatch(Object.assign(Object.assign({},fX(n.state,t,r.from,r.to)),{annotations:m1.of(e.completion)})):t(n,e.completion,r.from,r.to),!0):!1}const kX=wX(yr,y1);function vm(n,e="option"){return t=>{let r=t.state.field(yr,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<t.state.facet(fn).interactionDelay)return!1;let i=1,s;e=="page"&&(s=mD(t,r.open.tooltip))&&(i=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=r.open.options,l=r.open.selected>-1?r.open.selected+i*(n?1:-1):n?0:o-1;return l<0?l=e=="page"?0:o-1:l>=o&&(l=e=="page"?o-1:0),t.dispatch({effects:LM.of(l)}),!0}}const CX=n=>{let e=n.state.field(yr,!1);return n.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<n.state.facet(fn).interactionDelay?!1:y1(n,e.open.options[e.open.selected])},NC=n=>n.state.field(yr,!1)?(n.dispatch({effects:qg.of(!0)}),!0):!1,PX=n=>{let e=n.state.field(yr,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(n.dispatch({effects:jf.of(null)}),!0)};class AX{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const RX=50,IX=1e3,NX=zt.fromClass(class{constructor(n){this.view=n,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of n.state.field(yr).active)e.isPending&&this.startQuery(e)}update(n){let e=n.state.field(yr),t=n.state.facet(fn);if(!n.selectionSet&&!n.docChanged&&n.startState.field(yr)==e)return;let r=n.transactions.some(s=>{let o=MM(s,t);return o&8||(s.selection||s.docChanged)&&!(o&3)});for(let s=0;s<this.running.length;s++){let o=this.running[s];if(r||o.context.abortOnDocChange&&n.docChanged||o.updates.length+n.transactions.length>RX&&Date.now()-o.time>IX){for(let l of o.context.abortListeners)try{l()}catch(u){wr(this.view.state,u)}o.context.abortListeners=null,this.running.splice(s--,1)}else o.updates.push(...n.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),n.transactions.some(s=>s.effects.some(o=>o.is(qg)))&&(this.pendingStart=!0);let i=this.pendingStart?50:t.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(s=>s.isPending&&!this.running.some(o=>o.active.source==s.source))?setTimeout(()=>this.startUpdate(),i):-1,this.composing!=0)for(let s of n.transactions)s.isUserEvent("input.type")?this.composing=2:this.composing==2&&s.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:n}=this.view,e=n.field(yr);for(let t of e.active)t.isPending&&!this.running.some(r=>r.active.source==t.source)&&this.startQuery(t);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(fn).updateSyncTime))}startQuery(n){let{state:e}=this.view,t=Il(e),r=new IM(e,t,n.explicit,this.view),i=new AX(n,r);this.running.push(i),Promise.resolve(n.source(r)).then(s=>{i.context.aborted||(i.done=s||null,this.scheduleAccept())},s=>{this.view.dispatch({effects:jf.of(null)}),wr(this.view.state,s)})}scheduleAccept(){this.running.every(n=>n.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(fn).updateSyncTime))}accept(){var n;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(fn),r=this.view.state.field(yr);for(let i=0;i<this.running.length;i++){let s=this.running[i];if(s.done===void 0)continue;if(this.running.splice(i--,1),s.done){let l=Il(s.updates.length?s.updates[0].startState:this.view.state),u=Math.min(l,s.done.from+(s.active.explicit?0:1)),h=new ou(s.active.source,s.active.explicit,u,s.done,s.done.from,(n=s.done.to)!==null&&n!==void 0?n:l);for(let d of s.updates)h=h.update(d,t);if(h.hasResult()){e.push(h);continue}}let o=r.active.find(l=>l.source==s.active.source);if(o&&o.isPending)if(s.done==null){let l=new si(s.active.source,0);for(let u of s.updates)l=l.update(u,t);l.isPending||e.push(l)}else this.startQuery(o)}(e.length||r.open&&r.open.disabled)&&this.view.dispatch({effects:g1.of(e)})}},{eventHandlers:{blur(n){let e=this.view.state.field(yr,!1);if(e&&e.tooltip&&this.view.state.facet(fn).closeOnBlur){let t=e.open&&mD(this.view,e.open.tooltip);(!t||!t.dom.contains(n.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:jf.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:qg.of(!1)}),20),this.composing=0}}}),DX=typeof navigator=="object"&&/Win/.test(navigator.platform),MX=qa.highest(Oe.domEventHandlers({keydown(n,e){let t=e.state.field(yr,!1);if(!t||!t.open||t.open.disabled||t.open.selected<0||n.key.length>1||n.ctrlKey&&!(DX&&n.altKey)||n.metaKey)return!1;let r=t.open.options[t.open.selected],i=t.active.find(o=>o.source==r.source),s=r.completion.commitCharacters||i.result.commitCharacters;return s&&s.indexOf(n.key)>-1&&y1(e,r),!1}})),VM=Oe.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class LX{constructor(e,t,r,i){this.field=e,this.line=t,this.from=r,this.to=i}}class v1{constructor(e,t,r){this.field=e,this.from=t,this.to=r}map(e){let t=e.mapPos(this.from,-1,_n.TrackDel),r=e.mapPos(this.to,1,_n.TrackDel);return t==null||r==null?null:new v1(this.field,t,r)}}class w1{constructor(e,t){this.lines=e,this.fieldPositions=t}instantiate(e,t){let r=[],i=[t],s=e.doc.lineAt(t),o=/^\s*/.exec(s.text)[0];for(let u of this.lines){if(r.length){let h=o,d=/^\t*/.exec(u)[0].length;for(let m=0;m<d;m++)h+=e.facet(gd);i.push(t+h.length-d),u=h+u.slice(d)}r.push(u),t+=u.length+1}let l=this.fieldPositions.map(u=>new v1(u.field,i[u.line]+u.from,i[u.line]+u.to));return{text:r,ranges:l}}static parse(e){let t=[],r=[],i=[],s;for(let o of e.split(/\r\n?|\n/)){for(;s=/[#$]\{(?:(\d+)(?::([^}]*))?|((?:\\[{}]|[^}])*))\}/.exec(o);){let l=s[1]?+s[1]:null,u=s[2]||s[3]||"",h=-1,d=u.replace(/\\[{}]/g,m=>m[1]);for(let m=0;m<t.length;m++)(l!=null?t[m].seq==l:d&&t[m].name==d)&&(h=m);if(h<0){let m=0;for(;m<t.length&&(l==null||t[m].seq!=null&&t[m].seq<l);)m++;t.splice(m,0,{seq:l,name:d}),h=m;for(let y of i)y.field>=h&&y.field++}i.push(new LX(h,r.length,s.index,s.index+d.length)),o=o.slice(0,s.index)+u+o.slice(s.index+s[0].length)}o=o.replace(/\\([{}])/g,(l,u,h)=>{for(let d of i)d.line==r.length&&d.from>h&&(d.from--,d.to--);return u}),r.push(o)}return new w1(r,i)}}let VX=Re.widget({widget:new class extends Es{toDOM(){let n=document.createElement("span");return n.className="cm-snippetFieldPosition",n}ignoreEvent(){return!1}}}),FX=Re.mark({class:"cm-snippetField"});class Yu{constructor(e,t){this.ranges=e,this.active=t,this.deco=Re.set(e.map(r=>(r.from==r.to?VX:FX).range(r.from,r.to)))}map(e){let t=[];for(let r of this.ranges){let i=r.map(e);if(!i)return null;t.push(i)}return new Yu(t,this.active)}selectionInsideField(e){return e.ranges.every(t=>this.ranges.some(r=>r.field==this.active&&r.from<=t.from&&r.to>=t.to))}}const xd=$e.define({map(n,e){return n&&n.map(e)}}),QX=$e.define(),zf=pn.define({create(){return null},update(n,e){for(let t of e.effects){if(t.is(xd))return t.value;if(t.is(QX)&&n)return new Yu(n.ranges,t.value)}return n&&e.docChanged&&(n=n.map(e.changes)),n&&e.selection&&!n.selectionInsideField(e.selection)&&(n=null),n},provide:n=>Oe.decorations.from(n,e=>e?e.deco:Re.none)});function O1(n,e){return ie.create(n.filter(t=>t.field==e).map(t=>ie.range(t.from,t.to)))}function jX(n){let e=w1.parse(n);return(t,r,i,s)=>{let{text:o,ranges:l}=e.instantiate(t.state,i),{main:u}=t.state.selection,h={changes:{from:i,to:s==u.from?u.to:s,insert:it.of(o)},scrollIntoView:!0,annotations:r?[m1.of(r),Wt.userEvent.of("input.complete")]:void 0};if(l.length&&(h.selection=O1(l,0)),l.some(d=>d.field>0)){let d=new Yu(l,0),m=h.effects=[xd.of(d)];t.state.field(zf,!1)===void 0&&m.push($e.appendConfig.of([zf,qX,WX,VM]))}t.dispatch(t.state.update(h))}}function FM(n){return({state:e,dispatch:t})=>{let r=e.field(zf,!1);if(!r||n<0&&r.active==0)return!1;let i=r.active+n,s=n>0&&!r.ranges.some(o=>o.field==i+n);return t(e.update({selection:O1(r.ranges,i),effects:xd.of(s?null:new Yu(r.ranges,i)),scrollIntoView:!0})),!0}}const zX=({state:n,dispatch:e})=>n.field(zf,!1)?(e(n.update({effects:xd.of(null)})),!0):!1,$X=FM(1),BX=FM(-1),UX=[{key:"Tab",run:$X,shift:BX},{key:"Escape",run:zX}],DC=Se.define({combine(n){return n.length?n[0]:UX}}),qX=qa.highest(pd.compute([DC],n=>n.facet(DC)));function Gs(n,e){return Object.assign(Object.assign({},e),{apply:jX(n)})}const WX=Oe.domEventHandlers({mousedown(n,e){let t=e.state.field(zf,!1),r;if(!t||(r=e.posAtCoords({x:n.clientX,y:n.clientY}))==null)return!1;let i=t.ranges.find(s=>s.from<=r&&s.to>=r);return!i||i.field==t.active?!1:(e.dispatch({selection:O1(t.ranges,i.field),effects:xd.of(t.ranges.some(s=>s.field>i.field)?new Yu(t.ranges,i.field):null),scrollIntoView:!0}),!0)}}),$f={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},_l=$e.define({map(n,e){let t=e.mapPos(n,-1,_n.TrackAfter);return t??void 0}}),x1=new class extends Bl{};x1.startSide=1;x1.endSide=-1;const QM=pn.define({create(){return ot.empty},update(n,e){if(n=n.map(e.changes),e.selection){let t=e.state.doc.lineAt(e.selection.main.head);n=n.update({filter:r=>r>=t.from&&r<=t.to})}for(let t of e.effects)t.is(_l)&&(n=n.update({add:[x1.range(t.value,t.value+1)]}));return n}});function HX(){return[XX,QM]}const fw="()[]{}<>";function jM(n){for(let e=0;e<fw.length;e+=2)if(fw.charCodeAt(e)==n)return fw.charAt(e+1);return jS(n<128?n:n+1)}function zM(n,e){return n.languageDataAt("closeBrackets",e)[0]||$f}const GX=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),XX=Oe.inputHandler.of((n,e,t,r)=>{if((GX?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let i=n.state.selection.main;if(r.length>2||r.length==2&&os(mr(r,0))==1||e!=i.from||t!=i.to)return!1;let s=JX(n.state,r);return s?(n.dispatch(s),!0):!1}),KX=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let r=zM(n,n.selection.main.head).brackets||$f.brackets,i=null,s=n.changeByRange(o=>{if(o.empty){let l=ZX(n.doc,o.head);for(let u of r)if(u==l&&zy(n.doc,o.head)==jM(mr(u,0)))return{changes:{from:o.head-u.length,to:o.head+u.length},range:ie.cursor(o.head-u.length)}}return{range:i=o}});return i||e(n.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!i},YX=[{key:"Backspace",run:KX}];function JX(n,e){let t=zM(n,n.selection.main.head),r=t.brackets||$f.brackets;for(let i of r){let s=jM(mr(i,0));if(e==i)return s==i?nK(n,i,r.indexOf(i+i+i)>-1,t):eK(n,i,s,t.before||$f.before);if(e==s&&$M(n,n.selection.main.from))return tK(n,i,s)}return null}function $M(n,e){let t=!1;return n.field(QM).between(0,n.doc.length,r=>{r==e&&(t=!0)}),t}function zy(n,e){let t=n.sliceString(e,e+2);return t.slice(0,os(mr(t,0)))}function ZX(n,e){let t=n.sliceString(e-2,e);return os(mr(t,0))==t.length?t:t.slice(1)}function eK(n,e,t,r){let i=null,s=n.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:t,from:o.to}],effects:_l.of(o.to+e.length),range:ie.range(o.anchor+e.length,o.head+e.length)};let l=zy(n.doc,o.head);return!l||/\s/.test(l)||r.indexOf(l)>-1?{changes:{insert:e+t,from:o.head},effects:_l.of(o.head+e.length),range:ie.cursor(o.head+e.length)}:{range:i=o}});return i?null:n.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function tK(n,e,t){let r=null,i=n.changeByRange(s=>s.empty&&zy(n.doc,s.head)==t?{changes:{from:s.head,to:s.head+t.length,insert:t},range:ie.cursor(s.head+t.length)}:r={range:s});return r?null:n.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function nK(n,e,t,r){let i=r.stringPrefixes||$f.stringPrefixes,s=null,o=n.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:e,from:l.to}],effects:_l.of(l.to+e.length),range:ie.range(l.anchor+e.length,l.head+e.length)};let u=l.head,h=zy(n.doc,u),d;if(h==e){if(MC(n,u))return{changes:{insert:e+e,from:u},effects:_l.of(u+e.length),range:ie.cursor(u+e.length)};if($M(n,u)){let y=t&&n.sliceDoc(u,u+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:u,to:u+y.length,insert:y},range:ie.cursor(u+y.length)}}}else{if(t&&n.sliceDoc(u-2*e.length,u)==e+e&&(d=LC(n,u-2*e.length,i))>-1&&MC(n,d))return{changes:{insert:e+e+e+e,from:u},effects:_l.of(u+e.length),range:ie.cursor(u+e.length)};if(n.charCategorizer(u)(h)!=At.Word&&LC(n,u,i)>-1&&!rK(n,u,e,i))return{changes:{insert:e+e,from:u},effects:_l.of(u+e.length),range:ie.cursor(u+e.length)}}return{range:s=l}});return s?null:n.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function MC(n,e){let t=dn(n).resolveInner(e+1);return t.parent&&t.from==e}function rK(n,e,t,r){let i=dn(n).resolveInner(e,-1),s=r.reduce((o,l)=>Math.max(o,l.length),0);for(let o=0;o<5;o++){let l=n.sliceDoc(i.from,Math.min(i.to,i.from+t.length+s)),u=l.indexOf(t);if(!u||u>-1&&r.indexOf(l.slice(0,u))>-1){let d=i.firstChild;for(;d&&d.from==i.from&&d.to-d.from>t.length+u;){if(n.sliceDoc(d.to-t.length,d.to)==t)return!1;d=d.firstChild}return!0}let h=i.to==e&&i.parent;if(!h)break;i=h}return!1}function LC(n,e,t){let r=n.charCategorizer(e);if(r(n.sliceDoc(e-1,e))!=At.Word)return e;for(let i of t){let s=e-i.length;if(n.sliceDoc(s,e)==i&&r(n.sliceDoc(s-1,s))!=At.Word)return s}return-1}function iK(n={}){return[MX,yr,fn.of(n),NX,sK,VM]}const BM=[{key:"Ctrl-Space",run:NC},{mac:"Alt-`",run:NC},{key:"Escape",run:PX},{key:"ArrowDown",run:vm(!0)},{key:"ArrowUp",run:vm(!1)},{key:"PageDown",run:vm(!0,"page")},{key:"PageUp",run:vm(!1,"page")},{key:"Enter",run:CX}],sK=qa.highest(pd.computeN([fn],n=>n.facet(fn).defaultKeymap?[BM]:[]));class VC{constructor(e,t,r){this.from=e,this.to=t,this.diagnostic=r}}class Sl{constructor(e,t,r){this.diagnostics=e,this.panel=t,this.selected=r}static init(e,t,r){let i=r.facet(Bf).markerFilter;i&&(e=i(e,r));let s=e.slice().sort((d,m)=>d.from-m.from||d.to-m.to),o=new go,l=[],u=0;for(let d=0;;){let m=d==s.length?null:s[d];if(!m&&!l.length)break;let y,v;for(l.length?(y=u,v=l.reduce((b,T)=>Math.min(b,T.to),m&&m.from>y?m.from:1e8)):(y=m.from,v=m.to,l.push(m),d++);d<s.length;){let b=s[d];if(b.from==y&&(b.to>b.from||b.to==y))l.push(b),d++,v=Math.min(b.to,v);else{v=Math.min(b.from,v);break}}let S=vK(l);if(l.some(b=>b.from==b.to||b.from==b.to-1&&r.doc.lineAt(b.from).to==b.from))o.add(y,y,Re.widget({widget:new pK(S),diagnostics:l.slice()}));else{let b=l.reduce((T,k)=>k.markClass?T+" "+k.markClass:T,"");o.add(y,v,Re.mark({class:"cm-lintRange cm-lintRange-"+S+b,diagnostics:l.slice(),inclusiveEnd:l.some(T=>T.to>v)}))}u=v;for(let b=0;b<l.length;b++)l[b].to<=u&&l.splice(b--,1)}let h=o.finish();return new Sl(h,t,Mu(h))}}function Mu(n,e=null,t=0){let r=null;return n.between(t,1e9,(i,s,{spec:o})=>{if(!(e&&o.diagnostics.indexOf(e)<0))if(!r)r=new VC(i,s,e||o.diagnostics[0]);else{if(o.diagnostics.indexOf(r.diagnostic)<0)return!1;r=new VC(r.from,s,r.diagnostic)}}),r}function oK(n,e){let t=e.pos,r=e.end||t,i=n.state.facet(Bf).hideOn(n,t,r);if(i!=null)return i;let s=n.startState.doc.lineAt(e.pos);return!!(n.effects.some(o=>o.is(UM))||n.changes.touchesRange(s.from,Math.max(s.to,r)))}function aK(n,e){return n.field(Qr,!1)?e:e.concat($e.appendConfig.of(wK))}const UM=$e.define(),S1=$e.define(),qM=$e.define(),Qr=pn.define({create(){return new Sl(Re.none,null,null)},update(n,e){if(e.docChanged&&n.diagnostics.size){let t=n.diagnostics.map(e.changes),r=null,i=n.panel;if(n.selected){let s=e.changes.mapPos(n.selected.from,1);r=Mu(t,n.selected.diagnostic,s)||Mu(t,null,s)}!t.size&&i&&e.state.facet(Bf).autoPanel&&(i=null),n=new Sl(t,i,r)}for(let t of e.effects)if(t.is(UM)){let r=e.state.facet(Bf).autoPanel?t.value.length?Uf.open:null:n.panel;n=Sl.init(t.value,r,e.state)}else t.is(S1)?n=new Sl(n.diagnostics,t.value?Uf.open:null,n.selected):t.is(qM)&&(n=new Sl(n.diagnostics,n.panel,t.value));return n},provide:n=>[Lf.from(n,e=>e.panel),Oe.decorations.from(n,e=>e.diagnostics)]}),lK=Re.mark({class:"cm-lintRange cm-lintRange-active"});function cK(n,e,t){let{diagnostics:r}=n.state.field(Qr),i,s=-1,o=-1;r.between(e-(t<0?1:0),e+(t>0?1:0),(u,h,{spec:d})=>{if(e>=u&&e<=h&&(u==h||(e>u||t>0)&&(e<h||t<0)))return i=d.diagnostics,s=u,o=h,!1});let l=n.state.facet(Bf).tooltipFilter;return i&&l&&(i=l(i,n.state)),i?{pos:s,end:o,above:n.state.doc.lineAt(s).to<o,create(){return{dom:uK(n,i)}}}:null}function uK(n,e){return mt("ul",{class:"cm-tooltip-lint"},e.map(t=>HM(n,t,!1)))}const hK=n=>{let e=n.state.field(Qr,!1);(!e||!e.panel)&&n.dispatch({effects:aK(n.state,[S1.of(!0)])});let t=Mf(n,Uf.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},FC=n=>{let e=n.state.field(Qr,!1);return!e||!e.panel?!1:(n.dispatch({effects:S1.of(!1)}),!0)},fK=n=>{let e=n.state.field(Qr,!1);if(!e)return!1;let t=n.state.selection.main,r=e.diagnostics.iter(t.to+1);return!r.value&&(r=e.diagnostics.iter(0),!r.value||r.from==t.from&&r.to==t.to)?!1:(n.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)},dK=[{key:"Mod-Shift-m",run:hK,preventDefault:!0},{key:"F8",run:fK}],Bf=Se.define({combine(n){return Object.assign({sources:n.map(e=>e.source).filter(e=>e!=null)},_s(n.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,t)=>e?t?r=>e(r)||t(r):e:t}))}});function WM(n){let e=[];if(n)e:for(let{name:t}of n){for(let r=0;r<t.length;r++){let i=t[r];if(/[a-zA-Z]/.test(i)&&!e.some(s=>s.toLowerCase()==i.toLowerCase())){e.push(i);continue e}}e.push("")}return e}function HM(n,e,t){var r;let i=t?WM(e.actions):[];return mt("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},mt("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(n):e.message),(r=e.actions)===null||r===void 0?void 0:r.map((s,o)=>{let l=!1,u=y=>{if(y.preventDefault(),l)return;l=!0;let v=Mu(n.state.field(Qr).diagnostics,e);v&&s.apply(n,v.from,v.to)},{name:h}=s,d=i[o]?h.indexOf(i[o]):-1,m=d<0?h:[h.slice(0,d),mt("u",h.slice(d,d+1)),h.slice(d+1)];return mt("button",{type:"button",class:"cm-diagnosticAction",onclick:u,onmousedown:u,"aria-label":` Action: ${h}${d<0?"":` (access key "${i[o]})"`}.`},m)}),e.source&&mt("div",{class:"cm-diagnosticSource"},e.source))}class pK extends Es{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return mt("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class QC{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=HM(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Uf{constructor(e){this.view=e,this.items=[];let t=i=>{if(i.keyCode==27)FC(this.view),this.view.focus();else if(i.keyCode==38||i.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(i.keyCode==40||i.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(i.keyCode==36)this.moveSelection(0);else if(i.keyCode==35)this.moveSelection(this.items.length-1);else if(i.keyCode==13)this.view.focus();else if(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=WM(s.actions);for(let l=0;l<o.length;l++)if(o[l].toUpperCase().charCodeAt(0)==i.keyCode){let u=Mu(this.view.state.field(Qr).diagnostics,s);u&&s.actions[l].apply(e,u.from,u.to)}}else return;i.preventDefault()},r=i=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(i.target)&&this.moveSelection(s)};this.list=mt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:r}),this.dom=mt("div",{class:"cm-panel-lint"},this.list,mt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>FC(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(Qr).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(Qr),r=0,i=!1,s=null,o=new Set;for(e.between(0,this.view.state.doc.length,(l,u,{spec:h})=>{for(let d of h.diagnostics){if(o.has(d))continue;o.add(d);let m=-1,y;for(let v=r;v<this.items.length;v++)if(this.items[v].diagnostic==d){m=v;break}m<0?(y=new QC(this.view,d),this.items.splice(r,0,y),i=!0):(y=this.items[m],m>r&&(this.items.splice(r,m-r),i=!0)),t&&y.diagnostic==t.diagnostic?y.dom.hasAttribute("aria-selected")||(y.dom.setAttribute("aria-selected","true"),s=y):y.dom.hasAttribute("aria-selected")&&y.dom.removeAttribute("aria-selected"),r++}});r<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();this.items.length==0&&(this.items.push(new QC(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:l,panel:u})=>{let h=u.height/this.list.offsetHeight;l.top<u.top?this.list.scrollTop-=(u.top-l.top)/h:l.bottom>u.bottom&&(this.list.scrollTop+=(l.bottom-u.bottom)/h)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function t(){let r=e;e=r.nextSibling,r.remove()}for(let r of this.items)if(r.dom.parentNode==this.list){for(;e!=r.dom;)t();e=r.dom.nextSibling}else this.list.insertBefore(r.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(Qr),r=Mu(t.diagnostics,this.items[e].diagnostic);r&&this.view.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:qM.of(r)})}static open(e){return new Uf(e)}}function mK(n,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(n)}</svg>')`}function wm(n){return mK(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${n}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const gK=Oe.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:wm("#d11")},".cm-lintRange-warning":{backgroundImage:wm("orange")},".cm-lintRange-info":{backgroundImage:wm("#999")},".cm-lintRange-hint":{backgroundImage:wm("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function yK(n){return n=="error"?4:n=="warning"?3:n=="info"?2:1}function vK(n){let e="hint",t=1;for(let r of n){let i=yK(r.severity);i>t&&(t=i,e=r.severity)}return e}const wK=[Qr,Oe.decorations.compute([Qr],n=>{let{selected:e,panel:t}=n.field(Qr);return!e||!t||e.from==e.to?Re.none:Re.set([lK.range(e.from,e.to)])}),rH(cK,{hideOn:oK}),gK];var jC=function(e){e===void 0&&(e={});var{crosshairCursor:t=!1}=e,r=[];e.closeBracketsKeymap!==!1&&(r=r.concat(YX)),e.defaultKeymap!==!1&&(r=r.concat(DG)),e.searchKeymap!==!1&&(r=r.concat(oX)),e.historyKeymap!==!1&&(r=r.concat(B7)),e.foldKeymap!==!1&&(r=r.concat(r7)),e.completionKeymap!==!1&&(r=r.concat(BM)),e.lintKeymap!==!1&&(r=r.concat(dK));var i=[];return e.lineNumbers!==!1&&i.push(pH()),e.highlightActiveLineGutter!==!1&&i.push(yH()),e.highlightSpecialChars!==!1&&i.push(I8()),e.history!==!1&&i.push(D7()),e.foldGutter!==!1&&i.push(a7()),e.drawSelection!==!1&&i.push(x8()),e.dropCursor!==!1&&i.push(E8()),e.allowMultipleSelections!==!1&&i.push(tt.allowMultipleSelections.of(!0)),e.indentOnInput!==!1&&i.push(HH()),e.syntaxHighlighting!==!1&&i.push(jD(h7,{fallback:!0})),e.bracketMatching!==!1&&i.push(v7()),e.closeBrackets!==!1&&i.push(HX()),e.autocompletion!==!1&&i.push(iK()),e.rectangularSelection!==!1&&i.push(W8()),t!==!1&&i.push(X8()),e.highlightActiveLine!==!1&&i.push(F8()),e.highlightSelectionMatches!==!1&&i.push(zG()),e.tabSize&&typeof e.tabSize=="number"&&i.push(gd.of(" ".repeat(e.tabSize))),i.concat([pd.of(r.flat())]).filter(Boolean)};const OK="#e5c07b",zC="#e06c75",xK="#56b6c2",SK="#ffffff",qm="#abb2bf",Ox="#7d8799",bK="#61afef",TK="#98c379",$C="#d19a66",_K="#c678dd",EK="#21252b",BC="#2c313a",UC="#282c34",dw="#353a42",kK="#3E4451",qC="#528bff",CK=Oe.theme({"&":{color:qm,backgroundColor:UC},".cm-content":{caretColor:qC},".cm-cursor, .cm-dropCursor":{borderLeftColor:qC},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:kK},".cm-panels":{backgroundColor:EK,color:qm},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:UC,color:Ox,border:"none"},".cm-activeLineGutter":{backgroundColor:BC},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:dw},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:dw,borderBottomColor:dw},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:BC,color:qm}}},{dark:!0}),PK=vd.define([{tag:X.keyword,color:_K},{tag:[X.name,X.deleted,X.character,X.propertyName,X.macroName],color:zC},{tag:[X.function(X.variableName),X.labelName],color:bK},{tag:[X.color,X.constant(X.name),X.standard(X.name)],color:$C},{tag:[X.definition(X.name),X.separator],color:qm},{tag:[X.typeName,X.className,X.number,X.changed,X.annotation,X.modifier,X.self,X.namespace],color:OK},{tag:[X.operator,X.operatorKeyword,X.url,X.escape,X.regexp,X.link,X.special(X.string)],color:xK},{tag:[X.meta,X.comment],color:Ox},{tag:X.strong,fontWeight:"bold"},{tag:X.emphasis,fontStyle:"italic"},{tag:X.strikethrough,textDecoration:"line-through"},{tag:X.link,color:Ox,textDecoration:"underline"},{tag:X.heading,fontWeight:"bold",color:zC},{tag:[X.atom,X.bool,X.special(X.variableName)],color:$C},{tag:[X.processingInstruction,X.string,X.inserted],color:TK},{tag:X.invalid,color:SK}]),AK=[CK,jD(PK)];var RK=Oe.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),IK=function(e){e===void 0&&(e={});var{indentWithTab:t=!0,editable:r=!0,readOnly:i=!1,theme:s="light",placeholder:o="",basicSetup:l=!0}=e,u=[];switch(t&&u.unshift(pd.of([MG])),l&&(typeof l=="boolean"?u.unshift(jC()):u.unshift(jC(l))),o&&u.unshift($8(o)),s){case"light":u.push(RK);break;case"dark":u.push(AK);break;case"none":break;default:u.push(s);break}return r===!1&&u.push(Oe.editable.of(!1)),i&&u.push(tt.readOnly.of(!0)),[...u]},NK=n=>({line:n.state.doc.lineAt(n.state.selection.main.from),lineCount:n.state.doc.lines,lineBreak:n.state.lineBreak,length:n.state.doc.length,readOnly:n.state.readOnly,tabSize:n.state.tabSize,selection:n.state.selection,selectionAsSingle:n.state.selection.asSingle().main,ranges:n.state.selection.ranges,selectionCode:n.state.sliceDoc(n.state.selection.main.from,n.state.selection.main.to),selections:n.state.selection.ranges.map(e=>n.state.sliceDoc(e.from,e.to)),selectedText:n.state.selection.ranges.some(e=>!e.empty)}),WC=Ts.define(),DK=[];function MK(n){var{value:e,selection:t,onChange:r,onStatistics:i,onCreateEditor:s,onUpdate:o,extensions:l=DK,autoFocus:u,theme:h="light",height:d=null,minHeight:m=null,maxHeight:y=null,width:v=null,minWidth:S=null,maxWidth:b=null,placeholder:T="",editable:k=!0,readOnly:M=!1,indentWithTab:F=!0,basicSetup:z=!0,root:$,initialState:U}=n,[C,P]=I.useState(),[A,L]=I.useState(),[Q,V]=I.useState(),N=Oe.theme({"&":{height:d,minHeight:m,maxHeight:y,width:v,minWidth:S,maxWidth:b},"& .cm-scroller":{height:"100% !important"}}),te=Oe.updateListener.of(fe=>{if(fe.docChanged&&typeof r=="function"&&!fe.transactions.some(se=>se.annotation(WC))){var Z=fe.state.doc,ee=Z.toString();r(ee,fe)}i&&i(NK(fe))}),me=IK({theme:h,editable:k,readOnly:M,placeholder:T,indentWithTab:F,basicSetup:z}),ge=[te,N,...me];return o&&typeof o=="function"&&ge.push(Oe.updateListener.of(o)),ge=ge.concat(l),I.useLayoutEffect(()=>{if(C&&!Q){var fe={doc:e,selection:t,extensions:ge},Z=U?tt.fromJSON(U.json,fe,U.fields):tt.create(fe);if(V(Z),!A){var ee=new Oe({state:Z,parent:C,root:$});L(ee),s&&s(ee,Z)}}return()=>{A&&(V(void 0),L(void 0))}},[C,Q]),I.useEffect(()=>{n.container&&P(n.container)},[n.container]),I.useEffect(()=>()=>{A&&(A.destroy(),L(void 0))},[A]),I.useEffect(()=>{u&&A&&A.focus()},[u,A]),I.useEffect(()=>{A&&A.dispatch({effects:$e.reconfigure.of(ge)})},[h,l,d,m,y,v,S,b,T,k,M,F,z,r,o]),I.useEffect(()=>{if(e!==void 0){var fe=A?A.state.doc.toString():"";A&&e!==fe&&A.dispatch({changes:{from:0,to:fe.length,insert:e||""},annotations:[WC.of(!0)]})}},[e,A]),{state:Q,setState:V,view:A,setView:L,container:C,setContainer:P}}var LK=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],GM=I.forwardRef((n,e)=>{var{className:t,value:r="",selection:i,extensions:s=[],onChange:o,onStatistics:l,onCreateEditor:u,onUpdate:h,autoFocus:d,theme:m="light",height:y,minHeight:v,maxHeight:S,width:b,minWidth:T,maxWidth:k,basicSetup:M,placeholder:F,indentWithTab:z,editable:$,readOnly:U,root:C,initialState:P}=n,A=gW(n,LK),L=I.useRef(null),{state:Q,view:V,container:N,setContainer:te}=MK({root:C,value:r,autoFocus:d,theme:m,height:y,minHeight:v,maxHeight:S,width:b,minWidth:T,maxWidth:k,basicSetup:M,placeholder:F,indentWithTab:z,editable:$,readOnly:U,selection:i,onChange:o,onStatistics:l,onCreateEditor:u,onUpdate:h,extensions:s,initialState:P});I.useImperativeHandle(e,()=>({editor:L.current,state:Q,view:V}),[L,N,Q,V]);var me=I.useCallback(fe=>{L.current=fe,te(fe)},[te]);if(typeof r!="string")throw new Error("value must be typeof string but got "+typeof r);var ge=typeof m=="string"?"cm-theme-"+m:"cm-theme";return D.jsx("div",_O({ref:me,className:""+ge+(t?" "+t:"")},A))});GM.displayName="CodeMirror";var HC={};class Hg{constructor(e,t,r,i,s,o,l,u,h,d=0,m){this.p=e,this.stack=t,this.state=r,this.reducePos=i,this.pos=s,this.score=o,this.buffer=l,this.bufferBase=u,this.curContext=h,this.lookAhead=d,this.parent=m}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,r=0){let i=e.parser.context;return new Hg(e,[],t,r,r,0,[],0,i?new GC(i,i.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let r=e>>19,i=e&65535,{parser:s}=this.p,o=this.reducePos<this.pos-25;o&&this.setLookAhead(this.pos);let l=s.dynamicPrecedence(i);if(l&&(this.score+=l),r==0){this.pushState(s.getGoto(this.state,i,!0),this.reducePos),i<s.minRepeatTerm&&this.storeNode(i,this.reducePos,this.reducePos,o?8:4,!0),this.reduceContext(i,this.reducePos);return}let u=this.stack.length-(r-1)*3-(e&262144?6:0),h=u?this.stack[u-2]:this.p.ranges[0].from,d=this.reducePos-h;d>=2e3&&!(!((t=this.p.parser.nodeSet.types[i])===null||t===void 0)&&t.isAnonymous)&&(h==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=d):this.p.lastBigReductionSize<d&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=h,this.p.lastBigReductionSize=d));let m=u?this.stack[u-1]:0,y=this.bufferBase+this.buffer.length-m;if(i<s.minRepeatTerm||e&131072){let v=s.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(i,h,v,y+4,!0)}if(e&262144)this.state=this.stack[u];else{let v=this.stack[u-3];this.state=s.getGoto(v,i,!0)}for(;this.stack.length>u;)this.stack.pop();this.reduceContext(i,h)}storeNode(e,t,r,i=4,s=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let o=this,l=this.buffer.length;if(l==0&&o.parent&&(l=o.bufferBase-o.parent.bufferBase,o=o.parent),l>0&&o.buffer[l-4]==0&&o.buffer[l-1]>-1){if(t==r)return;if(o.buffer[l-2]>=t){o.buffer[l-2]=r;return}}}if(!s||this.pos==r)this.buffer.push(e,t,r,i);else{let o=this.buffer.length;if(o>0&&this.buffer[o-4]!=0){let l=!1;for(let u=o;u>0&&this.buffer[u-2]>r;u-=4)if(this.buffer[u-1]>=0){l=!0;break}if(l)for(;o>0&&this.buffer[o-2]>r;)this.buffer[o]=this.buffer[o-4],this.buffer[o+1]=this.buffer[o-3],this.buffer[o+2]=this.buffer[o-2],this.buffer[o+3]=this.buffer[o-1],o-=4,i>4&&(i-=4)}this.buffer[o]=e,this.buffer[o+1]=t,this.buffer[o+2]=r,this.buffer[o+3]=i}}shift(e,t,r,i){if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let s=e,{parser:o}=this.p;(i>this.pos||t<=o.maxNode)&&(this.pos=i,o.stateFlag(s,1)||(this.reducePos=i)),this.pushState(s,r),this.shiftContext(t,r),t<=o.maxNode&&this.buffer.push(t,r,i,4)}else this.pos=i,this.shiftContext(t,r),t<=this.p.parser.maxNode&&this.buffer.push(t,r,i,4)}apply(e,t,r,i){e&65536?this.reduce(e):this.shift(e,t,r,i)}useNode(e,t){let r=this.p.reused.length-1;(r<0||this.p.reused[r]!=e)&&(this.p.reused.push(e),r++);let i=this.pos;this.reducePos=this.pos=i+e.length,this.pushState(t,i),this.buffer.push(r,i,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let r=e.buffer.slice(t),i=e.bufferBase+t;for(;e&&i==e.bufferBase;)e=e.parent;return new Hg(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,r,i,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let r=e<=this.p.parser.maxNode;r&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,r?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new VK(this);;){let r=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(r==0)return!1;if((r&65536)==0)return!0;t.reduce(r)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let i=[];for(let s=0,o;s<t.length;s+=2)(o=t[s+1])!=this.state&&this.p.parser.hasAction(o,e)&&i.push(t[s],o);if(this.stack.length<120)for(let s=0;i.length<8&&s<t.length;s+=2){let o=t[s+1];i.some((l,u)=>u&1&&l==o)||i.push(t[s],o)}t=i}let r=[];for(let i=0;i<t.length&&r.length<4;i+=2){let s=t[i+1];if(s==this.state)continue;let o=this.split();o.pushState(s,this.pos),o.storeNode(0,o.pos,o.pos,4,!0),o.shiftContext(t[i],this.pos),o.reducePos=this.pos,o.score-=200,r.push(o)}return r}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if((t&65536)==0)return!1;if(!e.validAction(this.state,t)){let r=t>>19,i=t&65535,s=this.stack.length-r*3;if(s<0||e.getGoto(this.stack[s],i,!1)<0){let o=this.findForcedReduction();if(o==null)return!1;t=o}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],r=(i,s)=>{if(!t.includes(i))return t.push(i),e.allActions(i,o=>{if(!(o&393216))if(o&65536){let l=(o>>19)-s;if(l>1){let u=o&65535,h=this.stack.length-l*3;if(h>=0&&e.getGoto(this.stack[h],u,!1)>=0)return l<<19|65536|u}}else{let l=r(o,s+1);if(l!=null)return l}})};return r(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new GC(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class GC{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class VK{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,r=e>>19;r==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(r-1)*3;let i=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=i}}class Gg{constructor(e,t,r){this.stack=e,this.pos=t,this.index=r,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new Gg(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new Gg(this.stack,this.pos,this.index)}}function Om(n,e=Uint16Array){if(typeof n!="string")return n;let t=null;for(let r=0,i=0;r<n.length;){let s=0;for(;;){let o=n.charCodeAt(r++),l=!1;if(o==126){s=65535;break}o>=92&&o--,o>=34&&o--;let u=o-32;if(u>=46&&(u-=46,l=!0),s+=u,l)break;s*=46}t?t[i++]=s:t=new e(s)}return t}class Wm{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const XC=new Wm;class FK{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=XC,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let r=this.range,i=this.rangeIndex,s=this.pos+e;for(;s<r.from;){if(!i)return null;let o=this.ranges[--i];s-=r.from-o.to,r=o}for(;t<0?s>r.to:s>=r.to;){if(i==this.ranges.length-1)return null;let o=this.ranges[++i];s+=o.from-r.to,r=o}return s}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,r,i;if(t>=0&&t<this.chunk.length)r=this.pos+e,i=this.chunk.charCodeAt(t);else{let s=this.resolveOffset(e,1);if(s==null)return-1;if(r=s,r>=this.chunk2Pos&&r<this.chunk2Pos+this.chunk2.length)i=this.chunk2.charCodeAt(r-this.chunk2Pos);else{let o=this.rangeIndex,l=this.range;for(;l.to<=r;)l=this.ranges[++o];this.chunk2=this.input.chunk(this.chunk2Pos=r),r+this.chunk2.length>l.to&&(this.chunk2=this.chunk2.slice(0,l.to-r)),i=this.chunk2.charCodeAt(0)}}return r>=this.token.lookAhead&&(this.token.lookAhead=r+1),i}acceptToken(e,t=0){let r=t?this.resolveOffset(t,-1):this.pos;if(r==null||r<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=r}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=XC,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let r="";for(let i of this.ranges){if(i.from>=t)break;i.to>e&&(r+=this.input.read(Math.max(i.from,e),Math.min(i.to,t)))}return r}}class au{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:r}=t.p;QK(this.data,e,t,this.id,r.data,r.tokenPrecTable)}}au.prototype.contextual=au.prototype.fallback=au.prototype.extend=!1;au.prototype.fallback=au.prototype.extend=!1;class $y{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function QK(n,e,t,r,i,s){let o=0,l=1<<r,{dialect:u}=t.p.parser;e:for(;(l&n[o])!=0;){let h=n[o+1];for(let v=o+3;v<h;v+=2)if((n[v+1]&l)>0){let S=n[v];if(u.allows(S)&&(e.token.value==-1||e.token.value==S||jK(S,e.token.value,i,s))){e.acceptToken(S);break}}let d=e.next,m=0,y=n[o+2];if(e.next<0&&y>m&&n[h+y*3-3]==65535){o=n[h+y*3-1];continue e}for(;m<y;){let v=m+y>>1,S=h+v+(v<<1),b=n[S],T=n[S+1]||65536;if(d<b)y=v;else if(d>=T)m=v+1;else{o=n[S+2],e.advance();continue e}}break}}function KC(n,e,t){for(let r=e,i;(i=n[r])!=65535;r++)if(i==t)return r-e;return-1}function jK(n,e,t,r){let i=KC(t,r,e);return i<0||KC(t,r,n)<i}const Dr=typeof process<"u"&&HC&&/\bparse\b/.test(HC.LOG);let pw=null;function YC(n,e,t){let r=n.cursor(en.IncludeAnonymous);for(r.moveTo(e);;)if(!(t<0?r.childBefore(e):r.childAfter(e)))for(;;){if((t<0?r.to<e:r.from>e)&&!r.type.isError)return t<0?Math.max(0,Math.min(r.to-1,e-25)):Math.min(n.length,Math.max(r.from+1,e+25));if(t<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return t<0?0:n.length}}class zK{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?YC(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?YC(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let r=this.trees[t],i=this.index[t];if(i==r.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let s=r.children[i],o=this.start[t]+r.positions[i];if(o>e)return this.nextStart=o,null;if(s instanceof Ht){if(o==e){if(o<this.safeFrom)return null;let l=o+s.length;if(l<=this.safeTo){let u=s.prop(Xe.lookAhead);if(!u||l+u<this.fragment.to)return s}}this.index[t]++,o+s.length>=Math.max(this.safeFrom,e)&&(this.trees.push(s),this.start.push(o),this.index.push(0))}else this.index[t]++,this.nextStart=o+s.length}}}class $K{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(r=>new Wm)}getActions(e){let t=0,r=null,{parser:i}=e.p,{tokenizers:s}=i,o=i.stateSlot(e.state,3),l=e.curContext?e.curContext.hash:0,u=0;for(let h=0;h<s.length;h++){if((1<<h&o)==0)continue;let d=s[h],m=this.tokens[h];if(!(r&&!d.fallback)&&((d.contextual||m.start!=e.pos||m.mask!=o||m.context!=l)&&(this.updateCachedToken(m,d,e),m.mask=o,m.context=l),m.lookAhead>m.end+25&&(u=Math.max(m.lookAhead,u)),m.value!=0)){let y=t;if(m.extended>-1&&(t=this.addActions(e,m.extended,m.end,t)),t=this.addActions(e,m.value,m.end,t),!d.extend&&(r=m,t>y))break}}for(;this.actions.length>t;)this.actions.pop();return u&&e.setLookAhead(u),!r&&e.pos==this.stream.end&&(r=new Wm,r.value=e.p.parser.eofTerm,r.start=r.end=e.pos,t=this.addActions(e,r.value,r.end,t)),this.mainToken=r,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new Wm,{pos:r,p:i}=e;return t.start=r,t.end=Math.min(r+1,i.stream.end),t.value=r==i.stream.end?i.parser.eofTerm:0,t}updateCachedToken(e,t,r){let i=this.stream.clipPos(r.pos);if(t.token(this.stream.reset(i,e),r),e.value>-1){let{parser:s}=r.p;for(let o=0;o<s.specialized.length;o++)if(s.specialized[o]==e.value){let l=s.specializers[o](this.stream.read(e.start,e.end),r);if(l>=0&&r.p.parser.dialect.allows(l>>1)){(l&1)==0?e.value=l>>1:e.extended=l>>1;break}}}else e.value=0,e.end=this.stream.clipPos(i+1)}putAction(e,t,r,i){for(let s=0;s<i;s+=3)if(this.actions[s]==e)return i;return this.actions[i++]=e,this.actions[i++]=t,this.actions[i++]=r,i}addActions(e,t,r,i){let{state:s}=e,{parser:o}=e.p,{data:l}=o;for(let u=0;u<2;u++)for(let h=o.stateSlot(s,u?2:1);;h+=3){if(l[h]==65535)if(l[h+1]==1)h=eo(l,h+2);else{i==0&&l[h+1]==2&&(i=this.putAction(eo(l,h+2),t,r,i));break}l[h]==t&&(i=this.putAction(eo(l,h+1),t,r,i))}return i}}class BK{constructor(e,t,r,i){this.parser=e,this.input=t,this.ranges=i,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new FK(t,i),this.tokens=new $K(e,this.stream),this.topTerm=e.top[1];let{from:s}=i[0];this.stacks=[Hg.start(this,e.top[0],s)],this.fragments=r.length&&this.stream.end-s>e.bufferLength*4?new zK(r,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,r=this.stacks=[],i,s;if(this.bigReductionCount>300&&e.length==1){let[o]=e;for(;o.forceReduce()&&o.stack.length&&o.stack[o.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let o=0;o<e.length;o++){let l=e[o];for(;;){if(this.tokens.mainToken=null,l.pos>t)r.push(l);else{if(this.advanceStack(l,r,e))continue;{i||(i=[],s=[]),i.push(l);let u=this.tokens.getMainToken(l);s.push(u.value,u.end)}}break}}if(!r.length){let o=i&&WK(i);if(o)return Dr&&console.log("Finish with "+this.stackID(o)),this.stackToTree(o);if(this.parser.strict)throw Dr&&i&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&i){let o=this.stoppedAt!=null&&i[0].pos>this.stoppedAt?i[0]:this.runRecovery(i,s,r);if(o)return Dr&&console.log("Force-finish "+this.stackID(o)),this.stackToTree(o.forceAll())}if(this.recovering){let o=this.recovering==1?1:this.recovering*3;if(r.length>o)for(r.sort((l,u)=>u.score-l.score);r.length>o;)r.pop();r.some(l=>l.reducePos>t)&&this.recovering--}else if(r.length>1){e:for(let o=0;o<r.length-1;o++){let l=r[o];for(let u=o+1;u<r.length;u++){let h=r[u];if(l.sameState(h)||l.buffer.length>500&&h.buffer.length>500)if((l.score-h.score||l.buffer.length-h.buffer.length)>0)r.splice(u--,1);else{r.splice(o--,1);continue e}}}r.length>12&&r.splice(12,r.length-12)}this.minStackPos=r[0].pos;for(let o=1;o<r.length;o++)r[o].pos<this.minStackPos&&(this.minStackPos=r[o].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,r){let i=e.pos,{parser:s}=this,o=Dr?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&i>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let h=e.curContext&&e.curContext.tracker.strict,d=h?e.curContext.hash:0;for(let m=this.fragments.nodeAt(i);m;){let y=this.parser.nodeSet.types[m.type.id]==m.type?s.getGoto(e.state,m.type.id):-1;if(y>-1&&m.length&&(!h||(m.prop(Xe.contextHash)||0)==d))return e.useNode(m,y),Dr&&console.log(o+this.stackID(e)+` (via reuse of ${s.getName(m.type.id)})`),!0;if(!(m instanceof Ht)||m.children.length==0||m.positions[0]>0)break;let v=m.children[0];if(v instanceof Ht&&m.positions[0]==0)m=v;else break}}let l=s.stateSlot(e.state,4);if(l>0)return e.reduce(l),Dr&&console.log(o+this.stackID(e)+` (via always-reduce ${s.getName(l&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let u=this.tokens.getActions(e);for(let h=0;h<u.length;){let d=u[h++],m=u[h++],y=u[h++],v=h==u.length||!r,S=v?e:e.split(),b=this.tokens.mainToken;if(S.apply(d,m,b?b.start:S.pos,y),Dr&&console.log(o+this.stackID(S)+` (via ${(d&65536)==0?"shift":`reduce of ${s.getName(d&65535)}`} for ${s.getName(m)} @ ${i}${S==e?"":", split"})`),v)return!0;S.pos>i?t.push(S):r.push(S)}return!1}advanceFully(e,t){let r=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>r)return JC(e,t),!0}}runRecovery(e,t,r){let i=null,s=!1;for(let o=0;o<e.length;o++){let l=e[o],u=t[o<<1],h=t[(o<<1)+1],d=Dr?this.stackID(l)+" -> ":"";if(l.deadEnd&&(s||(s=!0,l.restart(),Dr&&console.log(d+this.stackID(l)+" (restarted)"),this.advanceFully(l,r))))continue;let m=l.split(),y=d;for(let v=0;m.forceReduce()&&v<10&&(Dr&&console.log(y+this.stackID(m)+" (via force-reduce)"),!this.advanceFully(m,r));v++)Dr&&(y=this.stackID(m)+" -> ");for(let v of l.recoverByInsert(u))Dr&&console.log(d+this.stackID(v)+" (via recover-insert)"),this.advanceFully(v,r);this.stream.end>l.pos?(h==l.pos&&(h++,u=0),l.recoverByDelete(u,h),Dr&&console.log(d+this.stackID(l)+` (via recover-delete ${this.parser.getName(u)})`),JC(l,r)):(!i||i.score<l.score)&&(i=l)}return i}stackToTree(e){return e.close(),Ht.build({buffer:Gg.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(pw||(pw=new WeakMap)).get(e);return t||pw.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function JC(n,e){for(let t=0;t<e.length;t++){let r=e[t];if(r.pos==n.pos&&r.sameState(n)){e[t].score<n.score&&(e[t]=n);return}}e.push(n)}class UK{constructor(e,t,r){this.source=e,this.flags=t,this.disabled=r}allows(e){return!this.disabled||this.disabled[e]==0}}const mw=n=>n;class qK{constructor(e){this.start=e.start,this.shift=e.shift||mw,this.reduce=e.reduce||mw,this.reuse=e.reuse||mw,this.hash=e.hash||(()=>0),this.strict=e.strict!==!1}}class Xg extends bD{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let l=0;l<e.repeatNodeCount;l++)t.push("");let r=Object.keys(e.topRules).map(l=>e.topRules[l][1]),i=[];for(let l=0;l<t.length;l++)i.push([]);function s(l,u,h){i[l].push([u,u.deserialize(String(h))])}if(e.nodeProps)for(let l of e.nodeProps){let u=l[0];typeof u=="string"&&(u=Xe[u]);for(let h=1;h<l.length;){let d=l[h++];if(d>=0)s(d,u,l[h++]);else{let m=l[h+-d];for(let y=-d;y>0;y--)s(l[h++],u,m);h++}}}this.nodeSet=new n1(t.map((l,u)=>Sr.define({name:u>=this.minRepeatTerm?void 0:l,id:u,props:i[u],top:r.indexOf(u)>-1,error:u==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(u)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=wD;let o=Om(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let l=0;l<this.specializerSpecs.length;l++)this.specialized[l]=this.specializerSpecs[l].term;this.specializers=this.specializerSpecs.map(ZC),this.states=Om(e.states,Uint32Array),this.data=Om(e.stateData),this.goto=Om(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(l=>typeof l=="number"?new au(o,l):l),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,r){let i=new BK(this,e,t,r);for(let s of this.wrappers)i=s(i,e,t,r);return i}getGoto(e,t,r=!1){let i=this.goto;if(t>=i[0])return-1;for(let s=i[t+1];;){let o=i[s++],l=o&1,u=i[s++];if(l&&r)return u;for(let h=s+(o>>1);s<h;s++)if(i[s]==e)return u;if(l)return-1}}hasAction(e,t){let r=this.data;for(let i=0;i<2;i++)for(let s=this.stateSlot(e,i?2:1),o;;s+=3){if((o=r[s])==65535)if(r[s+1]==1)o=r[s=eo(r,s+2)];else{if(r[s+1]==2)return eo(r,s+2);break}if(o==t||o==0)return eo(r,s+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,r=>r==t?!0:null)}allActions(e,t){let r=this.stateSlot(e,4),i=r?t(r):void 0;for(let s=this.stateSlot(e,1);i==null;s+=3){if(this.data[s]==65535)if(this.data[s+1]==1)s=eo(this.data,s+2);else break;i=t(eo(this.data,s+1))}return i}nextStates(e){let t=[];for(let r=this.stateSlot(e,1);;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=eo(this.data,r+2);else break;if((this.data[r+2]&1)==0){let i=this.data[r+1];t.some((s,o)=>o&1&&s==i)||t.push(this.data[r],i)}}return t}configure(e){let t=Object.assign(Object.create(Xg.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let r=this.topRules[e.top];if(!r)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=r}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(r=>{let i=e.tokenizers.find(s=>s.from==r);return i?i.to:r})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((r,i)=>{let s=e.specializers.find(l=>l.from==r.external);if(!s)return r;let o=Object.assign(Object.assign({},r),{external:s.to});return t.specializers[i]=ZC(o),o})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),r=t.map(()=>!1);if(e)for(let s of e.split(" ")){let o=t.indexOf(s);o>=0&&(r[o]=!0)}let i=null;for(let s=0;s<t.length;s++)if(!r[s])for(let o=this.dialects[t[s]],l;(l=this.data[o++])!=65535;)(i||(i=new Uint8Array(this.maxTerm+1)))[l]=1;return new UK(e,r,i)}static deserialize(e){return new Xg(e)}}function eo(n,e){return n[e]|n[e+1]<<16}function WK(n){let e=null;for(let t of n){let r=t.p.stoppedAt;(t.pos==t.p.stream.end||r!=null&&t.pos>r)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function ZC(n){if(n.external){let e=n.extend?1:0;return(t,r)=>n.external(t,r)<<1|e}return n.get}const HK=1,XM=194,KM=195,GK=196,eP=197,XK=198,KK=199,YK=200,JK=2,YM=3,tP=201,ZK=24,eY=25,tY=49,nY=50,rY=55,iY=56,sY=57,oY=59,aY=60,lY=61,cY=62,uY=63,hY=65,fY=238,dY=71,pY=241,mY=242,gY=243,yY=244,vY=245,wY=246,OY=247,xY=248,JM=72,SY=249,bY=250,TY=251,_Y=252,EY=253,kY=254,CY=255,PY=256,AY=73,RY=77,IY=263,NY=112,DY=130,MY=151,LY=152,VY=155,Gl=10,qf=13,b1=32,By=9,T1=35,FY=40,QY=46,xx=123,nP=125,ZM=39,eL=34,rP=92,jY=111,zY=120,$Y=78,BY=117,UY=85,qY=new Set([eY,tY,nY,IY,hY,DY,iY,sY,fY,cY,uY,JM,AY,RY,aY,lY,MY,LY,VY,NY]);function gw(n){return n==Gl||n==qf}function yw(n){return n>=48&&n<=57||n>=65&&n<=70||n>=97&&n<=102}const WY=new $y((n,e)=>{let t;if(n.next<0)n.acceptToken(KK);else if(e.context.flags&Hm)gw(n.next)&&n.acceptToken(XK,1);else if(((t=n.peek(-1))<0||gw(t))&&e.canShift(eP)){let r=0;for(;n.next==b1||n.next==By;)n.advance(),r++;(n.next==Gl||n.next==qf||n.next==T1)&&n.acceptToken(eP,-r)}else gw(n.next)&&n.acceptToken(GK,1)},{contextual:!0}),HY=new $y((n,e)=>{let t=e.context;if(t.flags)return;let r=n.peek(-1);if(r==Gl||r==qf){let i=0,s=0;for(;;){if(n.next==b1)i++;else if(n.next==By)i+=8-i%8;else break;n.advance(),s++}i!=t.indent&&n.next!=Gl&&n.next!=qf&&n.next!=T1&&(i<t.indent?n.acceptToken(KM,-s):n.acceptToken(XM))}}),Hm=1,tL=2,Ks=4,Ys=8,Js=16,Zs=32;function Gm(n,e,t){this.parent=n,this.indent=e,this.flags=t,this.hash=(n?n.hash+n.hash<<8:0)+e+(e<<4)+t+(t<<6)}const GY=new Gm(null,0,0);function XY(n){let e=0;for(let t=0;t<n.length;t++)e+=n.charCodeAt(t)==By?8-e%8:1;return e}const iP=new Map([[pY,0],[mY,Ks],[gY,Ys],[yY,Ys|Ks],[vY,Js],[wY,Js|Ks],[OY,Js|Ys],[xY,Js|Ys|Ks],[SY,Zs],[bY,Zs|Ks],[TY,Zs|Ys],[_Y,Zs|Ys|Ks],[EY,Zs|Js],[kY,Zs|Js|Ks],[CY,Zs|Js|Ys],[PY,Zs|Js|Ys|Ks]].map(([n,e])=>[n,e|tL])),KY=new qK({start:GY,reduce(n,e,t,r){return n.flags&Hm&&qY.has(e)||(e==dY||e==JM)&&n.flags&tL?n.parent:n},shift(n,e,t,r){return e==XM?new Gm(n,XY(r.read(r.pos,t.pos)),0):e==KM?n.parent:e==ZK||e==rY||e==oY||e==YM?new Gm(n,0,Hm):iP.has(e)?new Gm(n,0,iP.get(e)|n.flags&Hm):n},hash(n){return n.hash}}),YY=new $y(n=>{for(let e=0;e<5;e++){if(n.next!="print".charCodeAt(e))return;n.advance()}if(!/\w/.test(String.fromCharCode(n.next)))for(let e=0;;e++){let t=n.peek(e);if(!(t==b1||t==By)){t!=FY&&t!=QY&&t!=Gl&&t!=qf&&t!=T1&&n.acceptToken(HK);return}}}),JY=new $y((n,e)=>{let{flags:t}=e.context,r=t&Ks?eL:ZM,i=(t&Ys)>0,s=!(t&Js),o=(t&Zs)>0,l=n.pos;for(;!(n.next<0);)if(o&&n.next==xx)if(n.peek(1)==xx)n.advance(2);else{if(n.pos==l){n.acceptToken(YM,1);return}break}else if(s&&n.next==rP){if(n.pos==l){n.advance();let u=n.next;u>=0&&(n.advance(),ZY(n,u)),n.acceptToken(JK);return}break}else if(n.next==rP&&!s&&n.peek(1)>-1)n.advance(2);else if(n.next==r&&(!i||n.peek(1)==r&&n.peek(2)==r)){if(n.pos==l){n.acceptToken(tP,i?3:1);return}break}else if(n.next==Gl){if(i)n.advance();else if(n.pos==l){n.acceptToken(tP);return}break}else n.advance();n.pos>l&&n.acceptToken(YK)});function ZY(n,e){if(e==jY)for(let t=0;t<2&&n.next>=48&&n.next<=55;t++)n.advance();else if(e==zY)for(let t=0;t<2&&yw(n.next);t++)n.advance();else if(e==BY)for(let t=0;t<4&&yw(n.next);t++)n.advance();else if(e==UY)for(let t=0;t<8&&yw(n.next);t++)n.advance();else if(e==$Y&&n.next==xx){for(n.advance();n.next>=0&&n.next!=nP&&n.next!=ZM&&n.next!=eL&&n.next!=Gl;)n.advance();n.next==nP&&n.advance()}}const eJ=TD({'async "*" "**" FormatConversion FormatSpec':X.modifier,"for while if elif else try except finally return raise break continue with pass assert await yield match case":X.controlKeyword,"in not and or is del":X.operatorKeyword,"from def class global nonlocal lambda":X.definitionKeyword,import:X.moduleKeyword,"with as print":X.keyword,Boolean:X.bool,None:X.null,VariableName:X.variableName,"CallExpression/VariableName":X.function(X.variableName),"FunctionDefinition/VariableName":X.function(X.definition(X.variableName)),"ClassDefinition/VariableName":X.definition(X.className),PropertyName:X.propertyName,"CallExpression/MemberExpression/PropertyName":X.function(X.propertyName),Comment:X.lineComment,Number:X.number,String:X.string,FormatString:X.special(X.string),Escape:X.escape,UpdateOp:X.updateOperator,"ArithOp!":X.arithmeticOperator,BitOp:X.bitwiseOperator,CompareOp:X.compareOperator,AssignOp:X.definitionOperator,Ellipsis:X.punctuation,At:X.meta,"( )":X.paren,"[ ]":X.squareBracket,"{ }":X.brace,".":X.derefOperator,", ;":X.separator}),tJ={__proto__:null,await:44,or:54,and:56,in:60,not:62,is:64,if:70,else:72,lambda:76,yield:94,from:96,async:102,for:104,None:162,True:164,False:164,del:178,pass:182,break:186,continue:190,return:194,raise:202,import:206,as:208,global:212,nonlocal:214,assert:218,type:223,elif:236,while:240,try:246,except:248,finally:250,with:254,def:258,class:268,match:279,case:285},nJ=Xg.deserialize({version:14,states:"##jO`QeOOP$}OSOOO&WQtO'#HUOOQS'#Co'#CoOOQS'#Cp'#CpO'vQdO'#CnO*UQtO'#HTOOQS'#HU'#HUOOQS'#DU'#DUOOQS'#HT'#HTO*rQdO'#D_O+VQdO'#DfO+gQdO'#DjO+zOWO'#DuO,VOWO'#DvO.[QtO'#GuOOQS'#Gu'#GuO'vQdO'#GtO0ZQtO'#GtOOQS'#Eb'#EbO0rQdO'#EcOOQS'#Gs'#GsO0|QdO'#GrOOQV'#Gr'#GrO1XQdO'#FYOOQS'#G^'#G^O1^QdO'#FXOOQV'#IS'#ISOOQV'#Gq'#GqOOQV'#Fq'#FqQ`QeOOO'vQdO'#CqO1lQdO'#C}O1sQdO'#DRO2RQdO'#HYO2cQtO'#EVO'vQdO'#EWOOQS'#EY'#EYOOQS'#E['#E[OOQS'#E^'#E^O2wQdO'#E`O3_QdO'#EdO3rQdO'#EfO3zQtO'#EfO1XQdO'#EiO0rQdO'#ElO1XQdO'#EnO0rQdO'#EtO0rQdO'#EwO4VQdO'#EyO4^QdO'#FOO4iQdO'#EzO0rQdO'#FOO1XQdO'#FQO1XQdO'#FVO4nQdO'#F[P4uOdO'#GpPOOO)CBd)CBdOOQS'#Ce'#CeOOQS'#Cf'#CfOOQS'#Cg'#CgOOQS'#Ch'#ChOOQS'#Ci'#CiOOQS'#Cj'#CjOOQS'#Cl'#ClO'vQdO,59OO'vQdO,59OO'vQdO,59OO'vQdO,59OO'vQdO,59OO'vQdO,59OO5TQdO'#DoOOQS,5:Y,5:YO5hQdO'#HdOOQS,5:],5:]O5uQ!fO,5:]O5zQtO,59YO1lQdO,59bO1lQdO,59bO1lQdO,59bO8jQdO,59bO8oQdO,59bO8vQdO,59jO8}QdO'#HTO:TQdO'#HSOOQS'#HS'#HSOOQS'#D['#D[O:lQdO,59aO'vQdO,59aO:zQdO,59aOOQS,59y,59yO;PQdO,5:RO'vQdO,5:ROOQS,5:Q,5:QO;_QdO,5:QO;dQdO,5:XO'vQdO,5:XO'vQdO,5:VOOQS,5:U,5:UO;uQdO,5:UO;zQdO,5:WOOOW'#Fy'#FyO<POWO,5:aOOQS,5:a,5:aO<[QdO'#HwOOOW'#Dw'#DwOOOW'#Fz'#FzO<lOWO,5:bOOQS,5:b,5:bOOQS'#F}'#F}O<zQtO,5:iO?lQtO,5=`O@VQ#xO,5=`O@vQtO,5=`OOQS,5:},5:}OA_QeO'#GWOBqQdO,5;^OOQV,5=^,5=^OB|QtO'#IPOCkQdO,5;tOOQS-E:[-E:[OOQV,5;s,5;sO4dQdO'#FQOOQV-E9o-E9oOCsQtO,59]OEzQtO,59iOFeQdO'#HVOFpQdO'#HVO1XQdO'#HVOF{QdO'#DTOGTQdO,59mOGYQdO'#HZO'vQdO'#HZO0rQdO,5=tOOQS,5=t,5=tO0rQdO'#EROOQS'#ES'#ESOGwQdO'#GPOHXQdO,58|OHXQdO,58|O*xQdO,5:oOHgQtO'#H]OOQS,5:r,5:rOOQS,5:z,5:zOHzQdO,5;OOI]QdO'#IOO1XQdO'#H}OOQS,5;Q,5;QOOQS'#GT'#GTOIqQtO,5;QOJPQdO,5;QOJUQdO'#IQOOQS,5;T,5;TOJdQdO'#H|OOQS,5;W,5;WOJuQdO,5;YO4iQdO,5;`O4iQdO,5;cOJ}QtO'#ITO'vQdO'#ITOKXQdO,5;eO4VQdO,5;eO0rQdO,5;jO1XQdO,5;lOK^QeO'#EuOLjQgO,5;fO!!kQdO'#IUO4iQdO,5;jO!!vQdO,5;lO!#OQdO,5;qO!#ZQtO,5;vO'vQdO,5;vPOOO,5=[,5=[P!#bOSO,5=[P!#jOdO,5=[O!&bQtO1G.jO!&iQtO1G.jO!)YQtO1G.jO!)dQtO1G.jO!+}QtO1G.jO!,bQtO1G.jO!,uQdO'#HcO!-TQtO'#GuO0rQdO'#HcO!-_QdO'#HbOOQS,5:Z,5:ZO!-gQdO,5:ZO!-lQdO'#HeO!-wQdO'#HeO!.[QdO,5>OOOQS'#Ds'#DsOOQS1G/w1G/wOOQS1G.|1G.|O!/[QtO1G.|O!/cQtO1G.|O1lQdO1G.|O!0OQdO1G/UOOQS'#DZ'#DZO0rQdO,59tOOQS1G.{1G.{O!0VQdO1G/eO!0gQdO1G/eO!0oQdO1G/fO'vQdO'#H[O!0tQdO'#H[O!0yQtO1G.{O!1ZQdO,59iO!2aQdO,5=zO!2qQdO,5=zO!2yQdO1G/mO!3OQtO1G/mOOQS1G/l1G/lO!3`QdO,5=uO!4VQdO,5=uO0rQdO1G/qO!4tQdO1G/sO!4yQtO1G/sO!5ZQtO1G/qOOQS1G/p1G/pOOQS1G/r1G/rOOOW-E9w-E9wOOQS1G/{1G/{O!5kQdO'#HxO0rQdO'#HxO!5|QdO,5>cOOOW-E9x-E9xOOQS1G/|1G/|OOQS-E9{-E9{O!6[Q#xO1G2zO!6{QtO1G2zO'vQdO,5<jOOQS,5<j,5<jOOQS-E9|-E9|OOQS,5<r,5<rOOQS-E:U-E:UOOQV1G0x1G0xO1XQdO'#GRO!7dQtO,5>kOOQS1G1`1G1`O!8RQdO1G1`OOQS'#DV'#DVO0rQdO,5=qOOQS,5=q,5=qO!8WQdO'#FrO!8cQdO,59oO!8kQdO1G/XO!8uQtO,5=uOOQS1G3`1G3`OOQS,5:m,5:mO!9fQdO'#GtOOQS,5<k,5<kOOQS-E9}-E9}O!9wQdO1G.hOOQS1G0Z1G0ZO!:VQdO,5=wO!:gQdO,5=wO0rQdO1G0jO0rQdO1G0jO!:xQdO,5>jO!;ZQdO,5>jO1XQdO,5>jO!;lQdO,5>iOOQS-E:R-E:RO!;qQdO1G0lO!;|QdO1G0lO!<RQdO,5>lO!<aQdO,5>lO!<oQdO,5>hO!=VQdO,5>hO!=hQdO'#EpO0rQdO1G0tO!=sQdO1G0tO!=xQgO1G0zO!AvQgO1G0}O!EqQdO,5>oO!E{QdO,5>oO!FTQtO,5>oO0rQdO1G1PO!F_QdO1G1PO4iQdO1G1UO!!vQdO1G1WOOQV,5;a,5;aO!FdQfO,5;aO!FiQgO1G1QO!JjQdO'#GZO4iQdO1G1QO4iQdO1G1QO!JzQdO,5>pO!KXQdO,5>pO1XQdO,5>pOOQV1G1U1G1UO!KaQdO'#FSO!KrQ!fO1G1WO!KzQdO1G1WOOQV1G1]1G1]O4iQdO1G1]O!LPQdO1G1]O!LXQdO'#F^OOQV1G1b1G1bO!#ZQtO1G1bPOOO1G2v1G2vP!L^OSO1G2vOOQS,5=},5=}OOQS'#Dp'#DpO0rQdO,5=}O!LfQdO,5=|O!LyQdO,5=|OOQS1G/u1G/uO!MRQdO,5>PO!McQdO,5>PO!MkQdO,5>PO!NOQdO,5>PO!N`QdO,5>POOQS1G3j1G3jOOQS7+$h7+$hO!8kQdO7+$pO#!RQdO1G.|O#!YQdO1G.|OOQS1G/`1G/`OOQS,5<`,5<`O'vQdO,5<`OOQS7+%P7+%PO#!aQdO7+%POOQS-E9r-E9rOOQS7+%Q7+%QO#!qQdO,5=vO'vQdO,5=vOOQS7+$g7+$gO#!vQdO7+%PO##OQdO7+%QO##TQdO1G3fOOQS7+%X7+%XO##eQdO1G3fO##mQdO7+%XOOQS,5<_,5<_O'vQdO,5<_O##rQdO1G3aOOQS-E9q-E9qO#$iQdO7+%]OOQS7+%_7+%_O#$wQdO1G3aO#%fQdO7+%_O#%kQdO1G3gO#%{QdO1G3gO#&TQdO7+%]O#&YQdO,5>dO#&sQdO,5>dO#&sQdO,5>dOOQS'#Dx'#DxO#'UO&jO'#DzO#'aO`O'#HyOOOW1G3}1G3}O#'fQdO1G3}O#'nQdO1G3}O#'yQ#xO7+(fO#(jQtO1G2UP#)TQdO'#GOOOQS,5<m,5<mOOQS-E:P-E:POOQS7+&z7+&zOOQS1G3]1G3]OOQS,5<^,5<^OOQS-E9p-E9pOOQS7+$s7+$sO#)bQdO,5=`O#){QdO,5=`O#*^QtO,5<aO#*qQdO1G3cOOQS-E9s-E9sOOQS7+&U7+&UO#+RQdO7+&UO#+aQdO,5<nO#+uQdO1G4UOOQS-E:Q-E:QO#,WQdO1G4UOOQS1G4T1G4TOOQS7+&W7+&WO#,iQdO7+&WOOQS,5<p,5<pO#,tQdO1G4WOOQS-E:S-E:SOOQS,5<l,5<lO#-SQdO1G4SOOQS-E:O-E:OO1XQdO'#EqO#-jQdO'#EqO#-uQdO'#IRO#-}QdO,5;[OOQS7+&`7+&`O0rQdO7+&`O#.SQgO7+&fO!JmQdO'#GXO4iQdO7+&fO4iQdO7+&iO#2QQtO,5<tO'vQdO,5<tO#2[QdO1G4ZOOQS-E:W-E:WO#2fQdO1G4ZO4iQdO7+&kO0rQdO7+&kOOQV7+&p7+&pO!KrQ!fO7+&rO!KzQdO7+&rO`QeO1G0{OOQV-E:X-E:XO4iQdO7+&lO4iQdO7+&lOOQV,5<u,5<uO#2nQdO,5<uO!JmQdO,5<uOOQV7+&l7+&lO#2yQgO7+&lO#6tQdO,5<vO#7PQdO1G4[OOQS-E:Y-E:YO#7^QdO1G4[O#7fQdO'#IWO#7tQdO'#IWO1XQdO'#IWOOQS'#IW'#IWO#8PQdO'#IVOOQS,5;n,5;nO#8XQdO,5;nO0rQdO'#FUOOQV7+&r7+&rO4iQdO7+&rOOQV7+&w7+&wO4iQdO7+&wO#8^QfO,5;xOOQV7+&|7+&|POOO7+(b7+(bO#8cQdO1G3iOOQS,5<c,5<cO#8qQdO1G3hOOQS-E9u-E9uO#9UQdO,5<dO#9aQdO,5<dO#9tQdO1G3kOOQS-E9v-E9vO#:UQdO1G3kO#:^QdO1G3kO#:nQdO1G3kO#:UQdO1G3kOOQS<<H[<<H[O#:yQtO1G1zOOQS<<Hk<<HkP#;WQdO'#FtO8vQdO1G3bO#;eQdO1G3bO#;jQdO<<HkOOQS<<Hl<<HlO#;zQdO7+)QOOQS<<Hs<<HsO#<[QtO1G1yP#<{QdO'#FsO#=YQdO7+)RO#=jQdO7+)RO#=rQdO<<HwO#=wQdO7+({OOQS<<Hy<<HyO#>nQdO,5<bO'vQdO,5<bOOQS-E9t-E9tOOQS<<Hw<<HwOOQS,5<g,5<gO0rQdO,5<gO#>sQdO1G4OOOQS-E9y-E9yO#?^QdO1G4OO<[QdO'#H{OOOO'#D{'#D{OOOO'#F|'#F|O#?oO&jO,5:fOOOW,5>e,5>eOOOW7+)i7+)iO#?zQdO7+)iO#@SQdO1G2zO#@mQdO1G2zP'vQdO'#FuO0rQdO<<IpO1XQdO1G2YP1XQdO'#GSO#AOQdO7+)pO#AaQdO7+)pOOQS<<Ir<<IrP1XQdO'#GUP0rQdO'#GQOOQS,5;],5;]O#ArQdO,5>mO#BQQdO,5>mOOQS1G0v1G0vOOQS<<Iz<<IzOOQV-E:V-E:VO4iQdO<<JQOOQV,5<s,5<sO4iQdO,5<sOOQV<<JQ<<JQOOQV<<JT<<JTO#BYQtO1G2`P#BdQdO'#GYO#BkQdO7+)uO#BuQgO<<JVO4iQdO<<JVOOQV<<J^<<J^O4iQdO<<J^O!KrQ!fO<<J^O#FpQgO7+&gOOQV<<JW<<JWO#FzQgO<<JWOOQV1G2a1G2aO1XQdO1G2aO#JuQdO1G2aO4iQdO<<JWO1XQdO1G2bP0rQdO'#G[O#KQQdO7+)vO#K_QdO7+)vOOQS'#FT'#FTO0rQdO,5>rO#KgQdO,5>rO#KrQdO,5>rO#K}QdO,5>qO#L`QdO,5>qOOQS1G1Y1G1YOOQS,5;p,5;pOOQV<<Jc<<JcO#LhQdO1G1dOOQS7+)T7+)TP#LmQdO'#FwO#L}QdO1G2OO#MbQdO1G2OO#MrQdO1G2OP#M}QdO'#FxO#N[QdO7+)VO#NlQdO7+)VO#NlQdO7+)VO#NtQdO7+)VO$ UQdO7+(|O8vQdO7+(|OOQSAN>VAN>VO$ oQdO<<LmOOQSAN>cAN>cO0rQdO1G1|O$!PQtO1G1|P$!ZQdO'#FvOOQS1G2R1G2RP$!hQdO'#F{O$!uQdO7+)jO$#`QdO,5>gOOOO-E9z-E9zOOOW<<MT<<MTO$#nQdO7+(fOOQSAN?[AN?[OOQS7+'t7+'tO$$XQdO<<M[OOQS,5<q,5<qO$$jQdO1G4XOOQS-E:T-E:TOOQVAN?lAN?lOOQV1G2_1G2_O4iQdOAN?qO$$xQgOAN?qOOQVAN?xAN?xO4iQdOAN?xOOQV<<JR<<JRO4iQdOAN?rO4iQdO7+'{OOQV7+'{7+'{O1XQdO7+'{OOQVAN?rAN?rOOQS7+'|7+'|O$(sQdO<<MbOOQS1G4^1G4^O0rQdO1G4^OOQS,5<w,5<wO$)QQdO1G4]OOQS-E:Z-E:ZOOQU'#G_'#G_O$)cQfO7+'OO$)nQdO'#F_O$*uQdO7+'jO$+VQdO7+'jOOQS7+'j7+'jO$+bQdO<<LqO$+rQdO<<LqO$+rQdO<<LqO$+zQdO'#H^OOQS<<Lh<<LhO$,UQdO<<LhOOQS7+'h7+'hOOQS'#D|'#D|OOOO1G4R1G4RO$,oQdO1G4RO$,wQdO1G4RP!=hQdO'#GVOOQVG25]G25]O4iQdOG25]OOQVG25dG25dOOQVG25^G25^OOQV<<Kg<<KgO4iQdO<<KgOOQS7+)x7+)xP$-SQdO'#G]OOQU-E:]-E:]OOQV<<Jj<<JjO$-vQtO'#FaOOQS'#Fc'#FcO$.WQdO'#FbO$.xQdO'#FbOOQS'#Fb'#FbO$.}QdO'#IYO$)nQdO'#FiO$)nQdO'#FiO$/fQdO'#FjO$)nQdO'#FkO$/mQdO'#IZOOQS'#IZ'#IZO$0[QdO,5;yOOQS<<KU<<KUO$0dQdO<<KUO$0tQdOANB]O$1UQdOANB]O$1^QdO'#H_OOQS'#H_'#H_O1sQdO'#DcO$1wQdO,5=xOOQSANBSANBSOOOO7+)m7+)mO$2`QdO7+)mOOQVLD*wLD*wOOQVANARANARO5uQ!fO'#GaO$2hQtO,5<SO$)nQdO'#FmOOQS,5<W,5<WOOQS'#Fd'#FdO$3YQdO,5;|O$3_QdO,5;|OOQS'#Fg'#FgO$)nQdO'#G`O$4PQdO,5<QO$4kQdO,5>tO$4{QdO,5>tO1XQdO,5<PO$5^QdO,5<TO$5cQdO,5<TO$)nQdO'#I[O$5hQdO'#I[O$5mQdO,5<UOOQS,5<V,5<VO0rQdO'#FpOOQU1G1e1G1eO4iQdO1G1eOOQSAN@pAN@pO$5rQdOG27wO$6SQdO,59}OOQS1G3d1G3dOOOO<<MX<<MXOOQS,5<{,5<{OOQS-E:_-E:_O$6XQtO'#FaO$6`QdO'#I]O$6nQdO'#I]O$6vQdO,5<XOOQS1G1h1G1hO$6{QdO1G1hO$7QQdO,5<zOOQS-E:^-E:^O$7lQdO,5=OO$8TQdO1G4`OOQS-E:b-E:bOOQS1G1k1G1kOOQS1G1o1G1oO$8eQdO,5>vO$)nQdO,5>vOOQS1G1p1G1pOOQS,5<[,5<[OOQU7+'P7+'PO$+zQdO1G/iO$)nQdO,5<YO$8sQdO,5>wO$8zQdO,5>wOOQS1G1s1G1sOOQS7+'S7+'SP$)nQdO'#GdO$9SQdO1G4bO$9^QdO1G4bO$9fQdO1G4bOOQS7+%T7+%TO$9tQdO1G1tO$:SQtO'#FaO$:ZQdO,5<}OOQS,5<},5<}O$:iQdO1G4cOOQS-E:a-E:aO$)nQdO,5<|O$:pQdO,5<|O$:uQdO7+)|OOQS-E:`-E:`O$;PQdO7+)|O$)nQdO,5<ZP$)nQdO'#GcO$;XQdO1G2hO$)nQdO1G2hP$;gQdO'#GbO$;nQdO<<MhO$;xQdO1G1uO$<WQdO7+(SO8vQdO'#C}O8vQdO,59bO8vQdO,59bO8vQdO,59bO$<fQtO,5=`O8vQdO1G.|O0rQdO1G/XO0rQdO7+$pP$<yQdO'#GOO'vQdO'#GtO$=WQdO,59bO$=]QdO,59bO$=dQdO,59mO$=iQdO1G/UO1sQdO'#DRO8vQdO,59j",stateData:"$>S~O%cOS%^OSSOS%]PQ~OPdOVaOfoOhYOopOs!POvqO!PrO!Q{O!T!SO!U!RO!XZO!][O!h`O!r`O!s`O!t`O!{tO!}uO#PvO#RwO#TxO#XyO#ZzO#^|O#_|O#a}O#c!OO#l!QO#o!TO#s!UO#u!VO#z!WO#}hO$P!XO%oRO%pRO%tSO%uWO&Z]O&[]O&]]O&^]O&_]O&`]O&a]O&b]O&c^O&d^O&e^O&f^O&g^O&h^O&i^O&j^O~O%]!YO~OV!aO_!aOa!bOh!iO!X!kO!f!mO%j![O%k!]O%l!^O%m!_O%n!_O%o!`O%p!`O%q!aO%r!aO%s!aO~Ok%xXl%xXm%xXn%xXo%xXp%xXs%xXz%xX{%xX!x%xX#g%xX%[%xX%_%xX%z%xXg%xX!T%xX!U%xX%{%xX!W%xX![%xX!Q%xX#[%xXt%xX!m%xX~P%SOfoOhYO!XZO!][O!h`O!r`O!s`O!t`O%oRO%pRO%tSO%uWO&Z]O&[]O&]]O&^]O&_]O&`]O&a]O&b]O&c^O&d^O&e^O&f^O&g^O&h^O&i^O&j^O~Oz%wX{%wX#g%wX%[%wX%_%wX%z%wX~Ok!pOl!qOm!oOn!oOo!rOp!sOs!tO!x%wX~P)pOV!zOg!|Oo0cOv0qO!PrO~P'vOV#OOo0cOv0qO!W#PO~P'vOV#SOa#TOo0cOv0qO![#UO~P'vOQ#XO%`#XO%a#ZO~OQ#^OR#[O%`#^O%a#`O~OV%iX_%iXa%iXh%iXk%iXl%iXm%iXn%iXo%iXp%iXs%iXz%iX!X%iX!f%iX%j%iX%k%iX%l%iX%m%iX%n%iX%o%iX%p%iX%q%iX%r%iX%s%iXg%iX!T%iX!U%iX~O&Z]O&[]O&]]O&^]O&_]O&`]O&a]O&b]O&c^O&d^O&e^O&f^O&g^O&h^O&i^O&j^O{%iX!x%iX#g%iX%[%iX%_%iX%z%iX%{%iX!W%iX![%iX!Q%iX#[%iXt%iX!m%iX~P,eOz#dO{%hX!x%hX#g%hX%[%hX%_%hX%z%hX~Oo0cOv0qO~P'vO#g#gO%[#iO%_#iO~O%uWO~O!T#nO#u!VO#z!WO#}hO~OopO~P'vOV#sOa#tO%uWO{wP~OV#xOo0cOv0qO!Q#yO~P'vO{#{O!x$QO%z#|O#g!yX%[!yX%_!yX~OV#xOo0cOv0qO#g#SX%[#SX%_#SX~P'vOo0cOv0qO#g#WX%[#WX%_#WX~P'vOh$WO%uWO~O!f$YO!r$YO%uWO~OV$eO~P'vO!U$gO#s$hO#u$iO~O{$jO~OV$qO~P'vOS$sO%[$rO%_$rO%c$tO~OV$}Oa$}Og%POo0cOv0qO~P'vOo0cOv0qO{%SO~P'vO&Y%UO~Oa!bOh!iO!X!kO!f!mOVba_bakbalbambanbaobapbasbazba{ba!xba#gba%[ba%_ba%jba%kba%lba%mba%nba%oba%pba%qba%rba%sba%zbagba!Tba!Uba%{ba!Wba![ba!Qba#[batba!mba~On%ZO~Oo%ZO~P'vOo0cO~P'vOk0eOl0fOm0dOn0dOo0mOp0nOs0rOg%wX!T%wX!U%wX%{%wX!W%wX![%wX!Q%wX#[%wX!m%wX~P)pO%{%]Og%vXz%vX!T%vX!U%vX!W%vX{%vX~Og%_Oz%`O!T%dO!U%cO~Og%_O~Oz%gO!T%dO!U%cO!W&SX~O!W%kO~Oz%lO{%nO!T%dO!U%cO![%}X~O![%rO~O![%sO~OQ#XO%`#XO%a%uO~OV%wOo0cOv0qO!PrO~P'vOQ#^OR#[O%`#^O%a%zO~OV!qa_!qaa!qah!qak!qal!qam!qan!qao!qap!qas!qaz!qa{!qa!X!qa!f!qa!x!qa#g!qa%[!qa%_!qa%j!qa%k!qa%l!qa%m!qa%n!qa%o!qa%p!qa%q!qa%r!qa%s!qa%z!qag!qa!T!qa!U!qa%{!qa!W!qa![!qa!Q!qa#[!qat!qa!m!qa~P#yOz%|O{%ha!x%ha#g%ha%[%ha%_%ha%z%ha~P%SOV&OOopOvqO{%ha!x%ha#g%ha%[%ha%_%ha%z%ha~P'vOz%|O{%ha!x%ha#g%ha%[%ha%_%ha%z%ha~OPdOVaOopOvqO!PrO!Q{O!{tO!}uO#PvO#RwO#TxO#XyO#ZzO#^|O#_|O#a}O#c!OO#g$zX%[$zX%_$zX~P'vO#g#gO%[&TO%_&TO~O!f&UOh&sX%[&sXz&sX#[&sX#g&sX%_&sX#Z&sXg&sX~Oh!iO%[&WO~Okealeameaneaoeapeaseazea{ea!xea#gea%[ea%_ea%zeagea!Tea!Uea%{ea!Wea![ea!Qea#[eatea!mea~P%SOsqazqa{qa#gqa%[qa%_qa%zqa~Ok!pOl!qOm!oOn!oOo!rOp!sO!xqa~PEcO%z&YOz%yX{%yX~O%uWOz%yX{%yX~Oz&]O{wX~O{&_O~Oz%lO#g%}X%[%}X%_%}Xg%}X{%}X![%}X!m%}X%z%}X~OV0lOo0cOv0qO!PrO~P'vO%z#|O#gUa%[Ua%_Ua~Oz&hO#g&PX%[&PX%_&PXn&PX~P%SOz&kO!Q&jO#g#Wa%[#Wa%_#Wa~Oz&lO#[&nO#g&rX%[&rX%_&rXg&rX~O!f$YO!r$YO#Z&qO%uWO~O#Z&qO~Oz&sO#g&tX%[&tX%_&tX~Oz&uO#g&pX%[&pX%_&pX{&pX~O!X&wO%z&xO~Oz&|On&wX~P%SOn'PO~OPdOVaOopOvqO!PrO!Q{O!{tO!}uO#PvO#RwO#TxO#XyO#ZzO#^|O#_|O#a}O#c!OO%['UO~P'vOt'YO#p'WO#q'XOP#naV#naf#nah#nao#nas#nav#na!P#na!Q#na!T#na!U#na!X#na!]#na!h#na!r#na!s#na!t#na!{#na!}#na#P#na#R#na#T#na#X#na#Z#na#^#na#_#na#a#na#c#na#l#na#o#na#s#na#u#na#z#na#}#na$P#na%X#na%o#na%p#na%t#na%u#na&Z#na&[#na&]#na&^#na&_#na&`#na&a#na&b#na&c#na&d#na&e#na&f#na&g#na&h#na&i#na&j#na%Z#na%_#na~Oz'ZO#[']O{&xX~Oh'_O!X&wO~Oh!iO{$jO!X&wO~O{'eO~P%SO%['hO%_'hO~OS'iO%['hO%_'hO~OV!aO_!aOa!bOh!iO!X!kO!f!mO%l!^O%m!_O%n!_O%o!`O%p!`O%q!aO%r!aO%s!aOkWilWimWinWioWipWisWizWi{Wi!xWi#gWi%[Wi%_Wi%jWi%zWigWi!TWi!UWi%{Wi!WWi![Wi!QWi#[WitWi!mWi~O%k!]O~P!#uO%kWi~P!#uOV!aO_!aOa!bOh!iO!X!kO!f!mO%o!`O%p!`O%q!aO%r!aO%s!aOkWilWimWinWioWipWisWizWi{Wi!xWi#gWi%[Wi%_Wi%jWi%kWi%lWi%zWigWi!TWi!UWi%{Wi!WWi![Wi!QWi#[WitWi!mWi~O%m!_O%n!_O~P!&pO%mWi%nWi~P!&pOa!bOh!iO!X!kO!f!mOkWilWimWinWioWipWisWizWi{Wi!xWi#gWi%[Wi%_Wi%jWi%kWi%lWi%mWi%nWi%oWi%pWi%zWigWi!TWi!UWi%{Wi!WWi![Wi!QWi#[WitWi!mWi~OV!aO_!aO%q!aO%r!aO%s!aO~P!)nOVWi_Wi%qWi%rWi%sWi~P!)nO!T%dO!U%cOg&VXz&VX~O%z'kO%{'kO~P,eOz'mOg&UX~Og'oO~Oz'pO{'rO!W&XX~Oo0cOv0qOz'pO{'sO!W&XX~P'vO!W'uO~Om!oOn!oOo!rOp!sOkjisjizji{ji!xji#gji%[ji%_ji%zji~Ol!qO~P!.aOlji~P!.aOk0eOl0fOm0dOn0dOo0mOp0nO~Ot'wO~P!/jOV'|Og'}Oo0cOv0qO~P'vOg'}Oz(OO~Og(QO~O!U(SO~Og(TOz(OO!T%dO!U%cO~P%SOk0eOl0fOm0dOn0dOo0mOp0nOgqa!Tqa!Uqa%{qa!Wqa![qa!Qqa#[qatqa!mqa~PEcOV'|Oo0cOv0qO!W&Sa~P'vOz(WO!W&Sa~O!W(XO~Oz(WO!T%dO!U%cO!W&Sa~P%SOV(]Oo0cOv0qO![%}a#g%}a%[%}a%_%}ag%}a{%}a!m%}a%z%}a~P'vOz(^O![%}a#g%}a%[%}a%_%}ag%}a{%}a!m%}a%z%}a~O![(aO~Oz(^O!T%dO!U%cO![%}a~P%SOz(dO!T%dO!U%cO![&Ta~P%SOz(gO{&lX![&lX!m&lX%z&lX~O{(kO![(mO!m(nO%z(jO~OV&OOopOvqO{%hi!x%hi#g%hi%[%hi%_%hi%z%hi~P'vOz(pO{%hi!x%hi#g%hi%[%hi%_%hi%z%hi~O!f&UOh&sa%[&saz&sa#[&sa#g&sa%_&sa#Z&sag&sa~O%[(uO~OV#sOa#tO%uWO~Oz&]O{wa~OopOvqO~P'vOz(^O#g%}a%[%}a%_%}ag%}a{%}a![%}a!m%}a%z%}a~P%SOz(zO#g%hX%[%hX%_%hX%z%hX~O%z#|O#gUi%[Ui%_Ui~O#g&Pa%[&Pa%_&Pan&Pa~P'vOz(}O#g&Pa%[&Pa%_&Pan&Pa~O%uWO#g&ra%[&ra%_&rag&ra~Oz)SO#g&ra%[&ra%_&rag&ra~Og)VO~OV)WOh$WO%uWO~O#Z)XO~O%uWO#g&ta%[&ta%_&ta~Oz)ZO#g&ta%[&ta%_&ta~Oo0cOv0qO#g&pa%[&pa%_&pa{&pa~P'vOz)^O#g&pa%[&pa%_&pa{&pa~OV)`Oa)`O%uWO~O%z)eO~Ot)hO#j)gOP#hiV#hif#hih#hio#his#hiv#hi!P#hi!Q#hi!T#hi!U#hi!X#hi!]#hi!h#hi!r#hi!s#hi!t#hi!{#hi!}#hi#P#hi#R#hi#T#hi#X#hi#Z#hi#^#hi#_#hi#a#hi#c#hi#l#hi#o#hi#s#hi#u#hi#z#hi#}#hi$P#hi%X#hi%o#hi%p#hi%t#hi%u#hi&Z#hi&[#hi&]#hi&^#hi&_#hi&`#hi&a#hi&b#hi&c#hi&d#hi&e#hi&f#hi&g#hi&h#hi&i#hi&j#hi%Z#hi%_#hi~Ot)iOP#kiV#kif#kih#kio#kis#kiv#ki!P#ki!Q#ki!T#ki!U#ki!X#ki!]#ki!h#ki!r#ki!s#ki!t#ki!{#ki!}#ki#P#ki#R#ki#T#ki#X#ki#Z#ki#^#ki#_#ki#a#ki#c#ki#l#ki#o#ki#s#ki#u#ki#z#ki#}#ki$P#ki%X#ki%o#ki%p#ki%t#ki%u#ki&Z#ki&[#ki&]#ki&^#ki&_#ki&`#ki&a#ki&b#ki&c#ki&d#ki&e#ki&f#ki&g#ki&h#ki&i#ki&j#ki%Z#ki%_#ki~OV)kOn&wa~P'vOz)lOn&wa~Oz)lOn&wa~P%SOn)pO~O%Y)tO~Ot)wO#p'WO#q)vOP#niV#nif#nih#nio#nis#niv#ni!P#ni!Q#ni!T#ni!U#ni!X#ni!]#ni!h#ni!r#ni!s#ni!t#ni!{#ni!}#ni#P#ni#R#ni#T#ni#X#ni#Z#ni#^#ni#_#ni#a#ni#c#ni#l#ni#o#ni#s#ni#u#ni#z#ni#}#ni$P#ni%X#ni%o#ni%p#ni%t#ni%u#ni&Z#ni&[#ni&]#ni&^#ni&_#ni&`#ni&a#ni&b#ni&c#ni&d#ni&e#ni&f#ni&g#ni&h#ni&i#ni&j#ni%Z#ni%_#ni~OV)zOo0cOv0qO{$jO~P'vOo0cOv0qO{&xa~P'vOz*OO{&xa~OV*SOa*TOg*WO%q*UO%uWO~O{$jO&{*YO~Oh'_O~Oh!iO{$jO~O%[*_O~O%[*aO%_*aO~OV$}Oa$}Oo0cOv0qOg&Ua~P'vOz*dOg&Ua~Oo0cOv0qO{*gO!W&Xa~P'vOz*hO!W&Xa~Oo0cOv0qOz*hO{*kO!W&Xa~P'vOo0cOv0qOz*hO!W&Xa~P'vOz*hO{*kO!W&Xa~Om0dOn0dOo0mOp0nOgjikjisjizji!Tji!Uji%{ji!Wji{ji![ji#gji%[ji%_ji!Qji#[jitji!mji%zji~Ol0fO~P!NkOlji~P!NkOV'|Og*pOo0cOv0qO~P'vOn*rO~Og*pOz*tO~Og*uO~OV'|Oo0cOv0qO!W&Si~P'vOz*vO!W&Si~O!W*wO~OV(]Oo0cOv0qO![%}i#g%}i%[%}i%_%}ig%}i{%}i!m%}i%z%}i~P'vOz*zO!T%dO!U%cO![&Ti~Oz*}O![%}i#g%}i%[%}i%_%}ig%}i{%}i!m%}i%z%}i~O![+OO~Oa+QOo0cOv0qO![&Ti~P'vOz*zO![&Ti~O![+SO~OV+UOo0cOv0qO{&la![&la!m&la%z&la~P'vOz+VO{&la![&la!m&la%z&la~O!]+YO&n+[O![!nX~O![+^O~O{(kO![+_O~O{(kO![+_O!m+`O~OV&OOopOvqO{%hq!x%hq#g%hq%[%hq%_%hq%z%hq~P'vOz$ri{$ri!x$ri#g$ri%[$ri%_$ri%z$ri~P%SOV&OOopOvqO~P'vOV&OOo0cOv0qO#g%ha%[%ha%_%ha%z%ha~P'vOz+aO#g%ha%[%ha%_%ha%z%ha~Oz$ia#g$ia%[$ia%_$ian$ia~P%SO#g&Pi%[&Pi%_&Pin&Pi~P'vOz+dO#g#Wq%[#Wq%_#Wq~O#[+eOz$va#g$va%[$va%_$vag$va~O%uWO#g&ri%[&ri%_&rig&ri~Oz+gO#g&ri%[&ri%_&rig&ri~OV+iOh$WO%uWO~O%uWO#g&ti%[&ti%_&ti~Oo0cOv0qO#g&pi%[&pi%_&pi{&pi~P'vO{#{Oz#eX!W#eX~Oz+mO!W&uX~O!W+oO~Ot+rO#j)gOP#hqV#hqf#hqh#hqo#hqs#hqv#hq!P#hq!Q#hq!T#hq!U#hq!X#hq!]#hq!h#hq!r#hq!s#hq!t#hq!{#hq!}#hq#P#hq#R#hq#T#hq#X#hq#Z#hq#^#hq#_#hq#a#hq#c#hq#l#hq#o#hq#s#hq#u#hq#z#hq#}#hq$P#hq%X#hq%o#hq%p#hq%t#hq%u#hq&Z#hq&[#hq&]#hq&^#hq&_#hq&`#hq&a#hq&b#hq&c#hq&d#hq&e#hq&f#hq&g#hq&h#hq&i#hq&j#hq%Z#hq%_#hq~On$|az$|a~P%SOV)kOn&wi~P'vOz+yOn&wi~Oz,TO{$jO#[,TO~O#q,VOP#nqV#nqf#nqh#nqo#nqs#nqv#nq!P#nq!Q#nq!T#nq!U#nq!X#nq!]#nq!h#nq!r#nq!s#nq!t#nq!{#nq!}#nq#P#nq#R#nq#T#nq#X#nq#Z#nq#^#nq#_#nq#a#nq#c#nq#l#nq#o#nq#s#nq#u#nq#z#nq#}#nq$P#nq%X#nq%o#nq%p#nq%t#nq%u#nq&Z#nq&[#nq&]#nq&^#nq&_#nq&`#nq&a#nq&b#nq&c#nq&d#nq&e#nq&f#nq&g#nq&h#nq&i#nq&j#nq%Z#nq%_#nq~O#[,WOz%Oa{%Oa~Oo0cOv0qO{&xi~P'vOz,YO{&xi~O{#{O%z,[Og&zXz&zX~O%uWOg&zXz&zX~Oz,`Og&yX~Og,bO~O%Y,eO~O!T%dO!U%cOg&Viz&Vi~OV$}Oa$}Oo0cOv0qOg&Ui~P'vO{,hOz$la!W$la~Oo0cOv0qO{,iOz$la!W$la~P'vOo0cOv0qO{*gO!W&Xi~P'vOz,lO!W&Xi~Oo0cOv0qOz,lO!W&Xi~P'vOz,lO{,oO!W&Xi~Og$hiz$hi!W$hi~P%SOV'|Oo0cOv0qO~P'vOn,qO~OV'|Og,rOo0cOv0qO~P'vOV'|Oo0cOv0qO!W&Sq~P'vOz$gi![$gi#g$gi%[$gi%_$gig$gi{$gi!m$gi%z$gi~P%SOV(]Oo0cOv0qO~P'vOa+QOo0cOv0qO![&Tq~P'vOz,sO![&Tq~O![,tO~OV(]Oo0cOv0qO![%}q#g%}q%[%}q%_%}qg%}q{%}q!m%}q%z%}q~P'vO{,uO~OV+UOo0cOv0qO{&li![&li!m&li%z&li~P'vOz,zO{&li![&li!m&li%z&li~O!]+YO&n+[O![!na~O{(kO![,}O~OV&OOo0cOv0qO#g%hi%[%hi%_%hi%z%hi~P'vOz-OO#g%hi%[%hi%_%hi%z%hi~O%uWO#g&rq%[&rq%_&rqg&rq~Oz-RO#g&rq%[&rq%_&rqg&rq~OV)`Oa)`O%uWO!W&ua~Oz-TO!W&ua~On$|iz$|i~P%SOV)kO~P'vOV)kOn&wq~P'vOt-XOP#myV#myf#myh#myo#mys#myv#my!P#my!Q#my!T#my!U#my!X#my!]#my!h#my!r#my!s#my!t#my!{#my!}#my#P#my#R#my#T#my#X#my#Z#my#^#my#_#my#a#my#c#my#l#my#o#my#s#my#u#my#z#my#}#my$P#my%X#my%o#my%p#my%t#my%u#my&Z#my&[#my&]#my&^#my&_#my&`#my&a#my&b#my&c#my&d#my&e#my&f#my&g#my&h#my&i#my&j#my%Z#my%_#my~O%Z-]O%_-]O~P`O#q-^OP#nyV#nyf#nyh#nyo#nys#nyv#ny!P#ny!Q#ny!T#ny!U#ny!X#ny!]#ny!h#ny!r#ny!s#ny!t#ny!{#ny!}#ny#P#ny#R#ny#T#ny#X#ny#Z#ny#^#ny#_#ny#a#ny#c#ny#l#ny#o#ny#s#ny#u#ny#z#ny#}#ny$P#ny%X#ny%o#ny%p#ny%t#ny%u#ny&Z#ny&[#ny&]#ny&^#ny&_#ny&`#ny&a#ny&b#ny&c#ny&d#ny&e#ny&f#ny&g#ny&h#ny&i#ny&j#ny%Z#ny%_#ny~Oz-aO{$jO#[-aO~Oo0cOv0qO{&xq~P'vOz-dO{&xq~O%z,[Og&zaz&za~O{#{Og&zaz&za~OV*SOa*TO%q*UO%uWOg&ya~Oz-hOg&ya~O$S-lO~OV$}Oa$}Oo0cOv0qO~P'vOo0cOv0qO{-mOz$li!W$li~P'vOo0cOv0qOz$li!W$li~P'vO{-mOz$li!W$li~Oo0cOv0qO{*gO~P'vOo0cOv0qO{*gO!W&Xq~P'vOz-pO!W&Xq~Oo0cOv0qOz-pO!W&Xq~P'vOs-sO!T%dO!U%cOg&Oq!W&Oq![&Oqz&Oq~P!/jOa+QOo0cOv0qO![&Ty~P'vOz$ji![$ji~P%SOa+QOo0cOv0qO~P'vOV+UOo0cOv0qO~P'vOV+UOo0cOv0qO{&lq![&lq!m&lq%z&lq~P'vO{(kO![-xO!m-yO%z-wO~OV&OOo0cOv0qO#g%hq%[%hq%_%hq%z%hq~P'vO%uWO#g&ry%[&ry%_&ryg&ry~OV)`Oa)`O%uWO!W&ui~Ot-}OP#m!RV#m!Rf#m!Rh#m!Ro#m!Rs#m!Rv#m!R!P#m!R!Q#m!R!T#m!R!U#m!R!X#m!R!]#m!R!h#m!R!r#m!R!s#m!R!t#m!R!{#m!R!}#m!R#P#m!R#R#m!R#T#m!R#X#m!R#Z#m!R#^#m!R#_#m!R#a#m!R#c#m!R#l#m!R#o#m!R#s#m!R#u#m!R#z#m!R#}#m!R$P#m!R%X#m!R%o#m!R%p#m!R%t#m!R%u#m!R&Z#m!R&[#m!R&]#m!R&^#m!R&_#m!R&`#m!R&a#m!R&b#m!R&c#m!R&d#m!R&e#m!R&f#m!R&g#m!R&h#m!R&i#m!R&j#m!R%Z#m!R%_#m!R~Oo0cOv0qO{&xy~P'vOV*SOa*TO%q*UO%uWOg&yi~O$S-lO%Z.VO%_.VO~OV.aOh._O!X.^O!].`O!h.YO!s.[O!t.[O%p.XO%uWO&Z]O&[]O&]]O&^]O&_]O&`]O&a]O&b]O~Oo0cOv0qOz$lq!W$lq~P'vO{.fOz$lq!W$lq~Oo0cOv0qO{*gO!W&Xy~P'vOz.gO!W&Xy~Oo0cOv.kO~P'vOs-sO!T%dO!U%cOg&Oy!W&Oy![&Oyz&Oy~P!/jO{(kO![.nO~O{(kO![.nO!m.oO~OV*SOa*TO%q*UO%uWO~Oh.tO!f.rOz$TX#[$TX%j$TXg$TX~Os$TX{$TX!W$TX![$TX~P$-bO%o.vO%p.vOs$UXz$UX{$UX#[$UX%j$UX!W$UXg$UX![$UX~O!h.xO~Oz.|O#[/OO%j.yOs&|X{&|X!W&|Xg&|X~Oa/RO~P$)zOh.tOs&}Xz&}X{&}X#[&}X%j&}X!W&}Xg&}X![&}X~Os/VO{$jO~Oo0cOv0qOz$ly!W$ly~P'vOo0cOv0qO{*gO!W&X!R~P'vOz/ZO!W&X!R~Og&RXs&RX!T&RX!U&RX!W&RX![&RXz&RX~P!/jOs-sO!T%dO!U%cOg&Qa!W&Qa![&Qaz&Qa~O{(kO![/^O~O!f.rOh$[as$[az$[a{$[a#[$[a%j$[a!W$[ag$[a![$[a~O!h/eO~O%o.vO%p.vOs$Uaz$Ua{$Ua#[$Ua%j$Ua!W$Uag$Ua![$Ua~O%j.yOs$Yaz$Ya{$Ya#[$Ya!W$Yag$Ya![$Ya~Os&|a{&|a!W&|ag&|a~P$)nOz/jOs&|a{&|a!W&|ag&|a~O!W/mO~Og/mO~O{/oO~O![/pO~Oo0cOv0qO{*gO!W&X!Z~P'vO{/sO~O%z/tO~P$-bOz/uO#[/OO%j.yOg'PX~Oz/uOg'PX~Og/wO~O!h/xO~O#[/OOs%Saz%Sa{%Sa%j%Sa!W%Sag%Sa![%Sa~O#[/OO%j.yOs%Waz%Wa{%Wa!W%Wag%Wa~Os&|i{&|i!W&|ig&|i~P$)nOz/zO#[/OO%j.yO!['Oa~Og'Pa~P$)nOz0SOg'Pa~Oa0UO!['Oi~P$)zOz0WO!['Oi~Oz0WO#[/OO%j.yO!['Oi~O#[/OO%j.yOg$biz$bi~O%z0ZO~P$-bO#[/OO%j.yOg%Vaz%Va~Og'Pi~P$)nO{0^O~Oa0UO!['Oq~P$)zOz0`O!['Oq~O#[/OO%j.yOz%Ui![%Ui~Oa0UO~P$)zOa0UO!['Oy~P$)zO#[/OO%j.yOg$ciz$ci~O#[/OO%j.yOz%Uq![%Uq~Oz+aO#g%ha%[%ha%_%ha%z%ha~P%SOV&OOo0cOv0qO~P'vOn0hO~Oo0hO~P'vO{0iO~Ot0jO~P!/jO&]&Z&j&h&i&g&f&d&e&c&b&`&a&_&^&[%u~",goto:"!=j'QPPPPPP'RP'Z*s+[+t,_,y-fP.SP'Z.r.r'ZPPP'Z2[PPPPPP2[5PPP5PP7b7k=sPP=v>h>kPP'Z'ZPP>zPP'Z'ZPP'Z'Z'Z'Z'Z?O?w'ZP?zP@QDXGuGyPG|HWH['ZPPPH_Hk'RP'R'RP'RP'RP'RP'RP'R'R'RP'RPP'RPP'RP'RPHqH}IVPI^IdPI^PI^I^PPPI^PKrPK{LVL]KrPI^LfPI^PLmLsPLwM]MzNeLwLwNkNxLwLwLwLw! ^! d! g! l! o! y!!P!!]!!o!!u!#P!#V!#s!#y!$P!$Z!$a!$g!$y!%T!%Z!%a!%k!%q!%w!%}!&T!&Z!&e!&k!&u!&{!'U!'[!'k!'s!'}!(UPPPPPPPPPPP!([!(_!(e!(n!(x!)TPPPPPPPPPPPP!-u!/Z!3^!6oPP!6w!7W!7a!8Y!8P!8c!8i!8l!8o!8r!8z!9jPPPPPPPPPPPPPPPPP!9m!9q!9wP!:]!:a!:m!:v!;S!;j!;m!;p!;v!;|!<S!<VP!<_!<h!=d!=g]eOn#g$j)t,P'}`OTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!i!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$e$g$h$j$q$}%S%Z%^%`%c%g%l%n%w%|&O&Z&_&h&j&k&u&x&|'P'W'Z'l'm'p'r's'w'|(O(S(W(](^(d(g(p(r(z(})^)e)g)k)l)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+Q+U+V+Y+a+c+d+k+x+y,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0l0n0r{!cQ#c#p$R$d$p%e%j%p%q&`'O'g(q(|)j*o*x+w,v0g}!dQ#c#p$R$d$p$u%e%j%p%q&`'O'g(q(|)j*o*x+w,v0g!P!eQ#c#p$R$d$p$u$v%e%j%p%q&`'O'g(q(|)j*o*x+w,v0g!R!fQ#c#p$R$d$p$u$v$w%e%j%p%q&`'O'g(q(|)j*o*x+w,v0g!T!gQ#c#p$R$d$p$u$v$w$x%e%j%p%q&`'O'g(q(|)j*o*x+w,v0g!V!hQ#c#p$R$d$p$u$v$w$x$y%e%j%p%q&`'O'g(q(|)j*o*x+w,v0g!Z!hQ!n#c#p$R$d$p$u$v$w$x$y$z%e%j%p%q&`'O'g(q(|)j*o*x+w,v0g'}TOTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!i!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$e$g$h$j$q$}%S%Z%^%`%c%g%l%n%w%|&O&Z&_&h&j&k&u&x&|'P'W'Z'l'm'p'r's'w'|(O(S(W(](^(d(g(p(r(z(})^)e)g)k)l)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+Q+U+V+Y+a+c+d+k+x+y,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0l0n0r&eVOYZ[dnprxy}!P!Q!U!i!k!o!p!q!s!t#[#d#g#y#{#}$Q$h$j$}%S%Z%^%`%g%l%n%w%|&Z&_&j&k&u&x'P'W'Z'l'm'p'r's'w(O(W(^(d(g(p(r(z)^)e)g)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+U+V+Y+a+d+k,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0n0r%oXOYZ[dnrxy}!P!Q!U!i!k#[#d#g#y#{#}$Q$h$j$}%S%^%`%g%l%n%w%|&Z&_&j&k&u&x'P'W'Z'l'm'p'r's'w(O(W(^(d(g(p(r(z)^)e)g)p)t)z*O*Y*d*g*h*k*q*t*v*y*z*}+U+V+Y+a+d+k,P,X,Y,],g,h,i,k,l,o,s,u,w,y,z-O-d-f-m-p.f.g/V/Z0i0j0kQ#vqQ/[.kR0o0q't`OTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$e$g$h$j$q$}%S%Z%^%`%c%g%l%n%w%|&O&Z&_&h&j&k&u&x&|'P'W'Z'l'p'r's'w'|(O(S(W(](^(d(g(p(r(z(})^)e)g)k)l)p)t)z*O*Y*g*h*k*q*r*t*v*y*z*}+Q+U+V+Y+a+c+d+k+x+y,P,X,Y,],h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0l0n0rh#jhz{$W$Z&l&q)S)X+f+g-RW#rq&].k0qQ$]|Q$a!OQ$n!VQ$o!WW$|!i'm*d,gS&[#s#tQ'S$iQ(s&UQ)U&nU)Y&s)Z+jW)a&w+m-T-{Q*Q']W*R'_,`-h.TQ+l)`S,_*S*TQ-Q+eQ-_,TQ-c,WQ.R-al.W-l.^._.a.z.|/R/j/o/t/y0U0Z0^Q/S.`Q/a.tQ/l/OU0P/u0S0[X0V/z0W0_0`R&Z#r!_!wYZ!P!Q!k%S%`%g'p'r's(O(W)g*g*h*k*q*t*v,h,i,k,l,o-m-p.f.g/ZR%^!vQ!{YQ%x#[Q&d#}Q&g$QR,{+YT.j-s/s!Y!jQ!n#c#p$R$d$p$u$v$w$x$y$z%e%j%p%q&`'O'g(q(|)j*o*x+w,v0gQ&X#kQ'c$oR*^'dR'l$|Q%V!mR/_.r'|_OTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!i!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$e$g$h$j$q$}%S%Z%^%`%c%g%l%n%w%|&O&Z&_&h&j&k&u&x&|'P'W'Z'l'm'p'r's'w'|(O(S(W(](^(d(g(p(r(z(})^)e)g)k)l)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+Q+U+V+Y+a+c+d+k+x+y,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0l0n0rS#a_#b!P.[-l.^._.`.a.t.z.|/R/j/o/t/u/y/z0S0U0W0Z0[0^0_0`'|_OTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!i!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$e$g$h$j$q$}%S%Z%^%`%c%g%l%n%w%|&O&Z&_&h&j&k&u&x&|'P'W'Z'l'm'p'r's'w'|(O(S(W(](^(d(g(p(r(z(})^)e)g)k)l)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+Q+U+V+Y+a+c+d+k+x+y,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0l0n0rT#a_#bT#^^#_R(o%xa(l%x(n(o+`,{-y-z.oT+[(k+]R-z,{Q$PsQ+l)aQ,^*RR-e,_X#}s$O$P&fQ&y$aQ'a$nQ'd$oR)s'SQ)b&wV-S+m-T-{ZgOn$j)t,PXkOn)t,PQ$k!TQ&z$bQ&{$cQ'^$mQ'b$oQ)q'RQ)x'WQ){'XQ)|'YQ*Z'`S*]'c'dQ+s)gQ+u)hQ+v)iQ+z)oS+|)r*[Q,Q)vQ,R)wS,S)y)zQ,d*^Q-V+rQ-W+tQ-Y+{S-Z+},OQ-`,UQ-b,VQ-|-XQ.O-[Q.P-^Q.Q-_Q.p-}Q.q.RQ/W.dR/r/XWkOn)t,PR#mjQ'`$nS)r'S'aR,O)sQ,]*RR-f,^Q*['`Q+})rR-[,OZiOjn)t,PQ'f$pR*`'gT-j,e-ku.c-l.^._.a.t.z.|/R/j/o/t/u/y0S0U0Z0[0^t.c-l.^._.a.t.z.|/R/j/o/t/u/y0S0U0Z0[0^Q/S.`X0V/z0W0_0`!P.Z-l.^._.`.a.t.z.|/R/j/o/t/u/y/z0S0U0W0Z0[0^0_0`Q.w.YR/f.xg.z.].{/b/i/n/|0O0Q0]0a0bu.b-l.^._.a.t.z.|/R/j/o/t/u/y0S0U0Z0[0^X.u.W.b/a0PR/c.tV0R/u0S0[R/X.dQnOS#on,PR,P)tQ&^#uR(x&^S%m#R#wS(_%m(bT(b%p&`Q%a!yQ%h!}W(P%a%h(U(YQ(U%eR(Y%jQ&i$RR)O&iQ(e%qQ*{(`T+R(e*{Q'n%OR*e'nS'q%R%SY*i'q*j,m-q.hU*j'r's'tU,m*k*l*mS-q,n,oR.h-rQ#Y]R%t#YQ#_^R%y#_Q(h%vS+W(h+XR+X(iQ+](kR,|+]Q#b_R%{#bQ#ebQ%}#cW&Q#e%}({+bQ({&cR+b0gQ$OsS&e$O&fR&f$PQ&v$_R)_&vQ&V#jR(t&VQ&m$VS)T&m+hR+h)UQ$Z{R&p$ZQ&t$]R)[&tQ+n)bR-U+nQ#hfR&S#hQ)f&zR+q)fQ&}$dS)m&})nR)n'OQ'V$kR)u'VQ'[$lS*P'[,ZR,Z*QQ,a*VR-i,aWjOn)t,PR#ljQ-k,eR.U-kd.{.]/b/i/n/|0O0Q0]0a0bR/h.{U.s.W/a0PR/`.sQ/{/nS0X/{0YR0Y/|S/v/b/cR0T/vQ.}.]R/k.}R!ZPXmOn)t,PWlOn)t,PR'T$jYfOn$j)t,PR&R#g[sOn#g$j)t,PR&d#}&dQOYZ[dnprxy}!P!Q!U!i!k!o!p!q!s!t#[#d#g#y#{#}$Q$h$j$}%S%Z%^%`%g%l%n%w%|&Z&_&j&k&u&x'P'W'Z'l'm'p'r's'w(O(W(^(d(g(p(r(z)^)e)g)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+U+V+Y+a+d+k,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0n0rQ!nTQ#caQ#poU$Rt%c(SS$d!R$gQ$p!XQ$u!cQ$v!dQ$w!eQ$x!fQ$y!gQ$z!hQ%e!zQ%j#OQ%p#SQ%q#TQ&`#xQ'O$eQ'g$qQ(q&OU(|&h(}+cW)j&|)l+x+yQ*o'|Q*x(]Q+w)kQ,v+QR0g0lQ!yYQ!}ZQ$b!PQ$c!QQ%R!kQ't%S^'{%`%g(O(W*q*t*v^*f'p*h,k,l-p.g/ZQ*l'rQ*m'sQ+t)gQ,j*gQ,n*kQ-n,hQ-o,iQ-r,oQ.e-mR/Y.f[bOn#g$j)t,P!^!vYZ!P!Q!k%S%`%g'p'r's(O(W)g*g*h*k*q*t*v,h,i,k,l,o-m-p.f.g/ZQ#R[Q#fdS#wrxQ$UyW$_}$Q'P)pS$l!U$hW${!i'm*d,gS%v#[+Y`&P#d%|(p(r(z+a-O0kQ&a#yQ&b#{Q&c#}Q'j$}Q'z%^W([%l(^*y*}Q(`%nQ(i%wQ(v&ZS(y&_0iQ)P&jQ)Q&kU)]&u)^+kQ)d&xQ)y'WY)}'Z*O,X,Y-dQ*b'lS*n'w0jW+P(d*z,s,wW+T(g+V,y,zQ+p)eQ,U)zQ,c*YQ,x+UQ-P+dQ-e,]Q-v,uQ.S-fR/q/VhUOn#d#g$j%|&_'w(p(r)t,P%U!uYZ[drxy}!P!Q!U!i!k#[#y#{#}$Q$h$}%S%^%`%g%l%n%w&Z&j&k&u&x'P'W'Z'l'm'p'r's(O(W(^(d(g(z)^)e)g)p)z*O*Y*d*g*h*k*q*t*v*y*z*}+U+V+Y+a+d+k,X,Y,],g,h,i,k,l,o,s,u,w,y,z-O-d-f-m-p.f.g/V/Z0i0j0kQ#qpW%W!o!s0d0nQ%X!pQ%Y!qQ%[!tQ%f0cS'v%Z0hQ'x0eQ'y0fQ,p*rQ-u,qS.i-s/sR0p0rU#uq.k0qR(w&][cOn#g$j)t,PZ!xY#[#}$Q+YQ#W[Q#zrR$TxQ%b!yQ%i!}Q%o#RQ'j${Q(V%eQ(Z%jQ(c%pQ(f%qQ*|(`Q,f*bQ-t,pQ.m-uR/].lQ$StQ(R%cR*s(SQ.l-sR/}/sR#QZR#V[R%Q!iQ%O!iV*c'm*d,g!Z!lQ!n#c#p$R$d$p$u$v$w$x$y$z%e%j%p%q&`'O'g(q(|)j*o*x+w,v0gR%T!kT#]^#_Q%x#[R,{+YQ(m%xS+_(n(oQ,}+`Q-x,{S.n-y-zR/^.oT+Z(k+]Q$`}Q&g$QQ)o'PR+{)pQ$XzQ)W&qR+i)XQ$XzQ&o$WQ)W&qR+i)XQ#khW$Vz$W&q)XQ$[{Q&r$ZZ)R&l)S+f+g-RR$^|R)c&wXlOn)t,PQ$f!RR'Q$gQ$m!UR'R$hR*X'_Q*V'_V-g,`-h.TQ.d-lQ/P.^R/Q._U.]-l.^._Q/U.aQ/b.tQ/g.zU/i.|/j/yQ/n/RQ/|/oQ0O/tU0Q/u0S0[Q0]0UQ0a0ZR0b0^R/T.`R/d.t",nodeNames:" print Escape { Comment Script AssignStatement * BinaryExpression BitOp BitOp BitOp BitOp ArithOp ArithOp @ ArithOp ** UnaryExpression ArithOp BitOp AwaitExpression await ) ( ParenthesizedExpression BinaryExpression or and CompareOp in not is UnaryExpression ConditionalExpression if else LambdaExpression lambda ParamList VariableName AssignOp , : NamedExpression AssignOp YieldExpression yield from TupleExpression ComprehensionExpression async for LambdaExpression ] [ ArrayExpression ArrayComprehensionExpression } { DictionaryExpression DictionaryComprehensionExpression SetExpression SetComprehensionExpression CallExpression ArgList AssignOp MemberExpression . PropertyName Number String FormatString FormatReplacement FormatSelfDoc FormatConversion FormatSpec FormatReplacement FormatSelfDoc ContinuedString Ellipsis None Boolean TypeDef AssignOp UpdateStatement UpdateOp ExpressionStatement DeleteStatement del PassStatement pass BreakStatement break ContinueStatement continue ReturnStatement return YieldStatement PrintStatement RaiseStatement raise ImportStatement import as ScopeStatement global nonlocal AssertStatement assert TypeDefinition type TypeParamList TypeParam StatementGroup ; IfStatement Body elif WhileStatement while ForStatement TryStatement try except finally WithStatement with FunctionDefinition def ParamList AssignOp TypeDef ClassDefinition class DecoratedStatement Decorator At MatchStatement match MatchBody MatchClause case CapturePattern LiteralPattern ArithOp ArithOp AsPattern OrPattern LogicOp AttributePattern SequencePattern MappingPattern StarPattern ClassPattern PatternArgList KeywordPattern KeywordPattern Guard",maxTerm:277,context:KY,nodeProps:[["isolate",-5,4,71,72,73,77,""],["group",-15,6,85,87,88,90,92,94,96,98,99,100,102,105,108,110,"Statement Statement",-22,8,18,21,25,40,49,50,56,57,60,61,62,63,64,67,70,71,72,79,80,81,82,"Expression",-10,114,116,119,121,122,126,128,133,135,138,"Statement",-9,143,144,147,148,150,151,152,153,154,"Pattern"],["openedBy",23,"(",54,"[",58,"{"],["closedBy",24,")",55,"]",59,"}"]],propSources:[eJ],skippedNodes:[0,4],repeatNodeCount:34,tokenData:"!2|~R!`OX%TXY%oY[%T[]%o]p%Tpq%oqr'ars)Yst*xtu%Tuv,dvw-hwx.Uxy/tyz0[z{0r{|2S|}2p}!O3W!O!P4_!P!Q:Z!Q!R;k!R![>_![!]Do!]!^Es!^!_FZ!_!`Gk!`!aHX!a!b%T!b!cIf!c!dJU!d!eK^!e!hJU!h!i!#f!i!tJU!t!u!,|!u!wJU!w!x!.t!x!}JU!}#O!0S#O#P&o#P#Q!0j#Q#R!1Q#R#SJU#S#T%T#T#UJU#U#VK^#V#YJU#Y#Z!#f#Z#fJU#f#g!,|#g#iJU#i#j!.t#j#oJU#o#p!1n#p#q!1s#q#r!2a#r#s!2f#s$g%T$g;'SJU;'S;=`KW<%lOJU`%YT&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%T`%lP;=`<%l%To%v]&n`%c_OX%TXY%oY[%T[]%o]p%Tpq%oq#O%T#O#P&o#P#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To&tX&n`OY%TYZ%oZ]%T]^%o^#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc'f[&n`O!_%T!_!`([!`#T%T#T#U(r#U#f%T#f#g(r#g#h(r#h#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc(cTmR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc(yT!mR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk)aV&n`&[ZOr%Trs)vs#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk){V&n`Or%Trs*bs#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk*iT&n`&^ZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To+PZS_&n`OY*xYZ%TZ]*x]^%T^#o*x#o#p+r#p#q*x#q#r+r#r;'S*x;'S;=`,^<%lO*x_+wTS_OY+rZ]+r^;'S+r;'S;=`,W<%lO+r_,ZP;=`<%l+ro,aP;=`<%l*xj,kV%rQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tj-XT!xY&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tj-oV%lQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk.]V&n`&ZZOw%Twx.rx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk.wV&n`Ow%Twx/^x#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk/eT&n`&]ZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk/{ThZ&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc0cTgR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk0yXVZ&n`Oz%Tz{1f{!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk1mVaR&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk2ZV%oZ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc2wTzR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To3_W%pZ&n`O!_%T!_!`-Q!`!a3w!a#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Td4OT&{S&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk4fX!fQ&n`O!O%T!O!P5R!P!Q%T!Q![6T![#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk5WV&n`O!O%T!O!P5m!P#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk5tT!rZ&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti6[a!hX&n`O!Q%T!Q![6T![!g%T!g!h7a!h!l%T!l!m9s!m#R%T#R#S6T#S#X%T#X#Y7a#Y#^%T#^#_9s#_#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti7fZ&n`O{%T{|8X|}%T}!O8X!O!Q%T!Q![8s![#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti8^V&n`O!Q%T!Q![8s![#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti8z]!hX&n`O!Q%T!Q![8s![!l%T!l!m9s!m#R%T#R#S8s#S#^%T#^#_9s#_#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti9zT!hX&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk:bX%qR&n`O!P%T!P!Q:}!Q!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tj;UV%sQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti;ro!hX&n`O!O%T!O!P=s!P!Q%T!Q![>_![!d%T!d!e?q!e!g%T!g!h7a!h!l%T!l!m9s!m!q%T!q!rA]!r!z%T!z!{Bq!{#R%T#R#S>_#S#U%T#U#V?q#V#X%T#X#Y7a#Y#^%T#^#_9s#_#c%T#c#dA]#d#l%T#l#mBq#m#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti=xV&n`O!Q%T!Q![6T![#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti>fc!hX&n`O!O%T!O!P=s!P!Q%T!Q![>_![!g%T!g!h7a!h!l%T!l!m9s!m#R%T#R#S>_#S#X%T#X#Y7a#Y#^%T#^#_9s#_#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti?vY&n`O!Q%T!Q!R@f!R!S@f!S#R%T#R#S@f#S#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti@mY!hX&n`O!Q%T!Q!R@f!R!S@f!S#R%T#R#S@f#S#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TiAbX&n`O!Q%T!Q!YA}!Y#R%T#R#SA}#S#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TiBUX!hX&n`O!Q%T!Q!YA}!Y#R%T#R#SA}#S#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TiBv]&n`O!Q%T!Q![Co![!c%T!c!iCo!i#R%T#R#SCo#S#T%T#T#ZCo#Z#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TiCv]!hX&n`O!Q%T!Q![Co![!c%T!c!iCo!i#R%T#R#SCo#S#T%T#T#ZCo#Z#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%ToDvV{_&n`O!_%T!_!`E]!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TcEdT%{R&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkEzT#gZ&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkFbXmR&n`O!^%T!^!_F}!_!`([!`!a([!a#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TjGUV%mQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkGrV%zZ&n`O!_%T!_!`([!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkH`WmR&n`O!_%T!_!`([!`!aHx!a#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TjIPV%nQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkIoV_Q#}P&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%ToJ_]&n`&YS%uZO!Q%T!Q![JU![!c%T!c!}JU!}#R%T#R#SJU#S#T%T#T#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUoKZP;=`<%lJUoKge&n`&YS%uZOr%Trs)Ysw%Twx.Ux!Q%T!Q![JU![!c%T!c!tJU!t!uLx!u!}JU!}#R%T#R#SJU#S#T%T#T#fJU#f#gLx#g#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUoMRa&n`&YS%uZOr%TrsNWsw%Twx! vx!Q%T!Q![JU![!c%T!c!}JU!}#R%T#R#SJU#S#T%T#T#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUkN_V&n`&`ZOr%TrsNts#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkNyV&n`Or%Trs! `s#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk! gT&n`&bZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk! }V&n`&_ZOw%Twx!!dx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!!iV&n`Ow%Twx!#Ox#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!#VT&n`&aZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To!#oe&n`&YS%uZOr%Trs!%Qsw%Twx!&px!Q%T!Q![JU![!c%T!c!tJU!t!u!(`!u!}JU!}#R%T#R#SJU#S#T%T#T#fJU#f#g!(`#g#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUk!%XV&n`&dZOr%Trs!%ns#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!%sV&n`Or%Trs!&Ys#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!&aT&n`&fZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!&wV&n`&cZOw%Twx!'^x#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!'cV&n`Ow%Twx!'xx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!(PT&n`&eZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To!(ia&n`&YS%uZOr%Trs!)nsw%Twx!+^x!Q%T!Q![JU![!c%T!c!}JU!}#R%T#R#SJU#S#T%T#T#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUk!)uV&n`&hZOr%Trs!*[s#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!*aV&n`Or%Trs!*vs#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!*}T&n`&jZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!+eV&n`&gZOw%Twx!+zx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!,PV&n`Ow%Twx!,fx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!,mT&n`&iZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To!-Vi&n`&YS%uZOr%TrsNWsw%Twx! vx!Q%T!Q![JU![!c%T!c!dJU!d!eLx!e!hJU!h!i!(`!i!}JU!}#R%T#R#SJU#S#T%T#T#UJU#U#VLx#V#YJU#Y#Z!(`#Z#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUo!.}a&n`&YS%uZOr%Trs)Ysw%Twx.Ux!Q%T!Q![JU![!c%T!c!}JU!}#R%T#R#SJU#S#T%T#T#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUk!0ZT!XZ&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc!0qT!WR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tj!1XV%kQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%T~!1sO!]~k!1zV%jR&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%T~!2fO![~i!2mT%tX&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%T",tokenizers:[YY,HY,WY,JY,0,1,2,3,4],topRules:{Script:[0,5]},specialized:[{term:221,get:n=>tJ[n]||-1}],tokenPrec:7668}),sP=new TH,nL=new Set(["Script","Body","FunctionDefinition","ClassDefinition","LambdaExpression","ForStatement","MatchClause"]);function xm(n){return(e,t,r)=>{if(r)return!1;let i=e.node.getChild("VariableName");return i&&t(i,n),!0}}const rJ={FunctionDefinition:xm("function"),ClassDefinition:xm("class"),ForStatement(n,e,t){if(t){for(let r=n.node.firstChild;r;r=r.nextSibling)if(r.name=="VariableName")e(r,"variable");else if(r.name=="in")break}},ImportStatement(n,e){var t,r;let{node:i}=n,s=((t=i.firstChild)===null||t===void 0?void 0:t.name)=="from";for(let o=i.getChild("import");o;o=o.nextSibling)o.name=="VariableName"&&((r=o.nextSibling)===null||r===void 0?void 0:r.name)!="as"&&e(o,s?"variable":"namespace")},AssignStatement(n,e){for(let t=n.node.firstChild;t;t=t.nextSibling)if(t.name=="VariableName")e(t,"variable");else if(t.name==":"||t.name=="AssignOp")break},ParamList(n,e){for(let t=null,r=n.node.firstChild;r;r=r.nextSibling)r.name=="VariableName"&&(!t||!/\*|AssignOp/.test(t.name))&&e(r,"variable"),t=r},CapturePattern:xm("variable"),AsPattern:xm("variable"),__proto__:null};function rL(n,e){let t=sP.get(e);if(t)return t;let r=[],i=!0;function s(o,l){let u=n.sliceString(o.from,o.to);r.push({label:u,type:l})}return e.cursor(en.IncludeAnonymous).iterate(o=>{if(o.name){let l=rJ[o.name];if(l&&l(o,s,i)||!i&&nL.has(o.name))return!1;i=!1}else if(o.to-o.from>8192){for(let l of rL(n,o.node))r.push(l);return!1}}),sP.set(e,r),r}const oP=/^[\w\xa1-\uffff][\w\d\xa1-\uffff]*$/,iL=["String","FormatString","Comment","PropertyName"];function iJ(n){let e=dn(n.state).resolveInner(n.pos,-1);if(iL.indexOf(e.name)>-1)return null;let t=e.name=="VariableName"||e.to-e.from<20&&oP.test(n.state.sliceDoc(e.from,e.to));if(!t&&!n.explicit)return null;let r=[];for(let i=e;i;i=i.parent)nL.has(i.name)&&(r=r.concat(rL(n.state.doc,i)));return{options:r,from:t?e.from:n.pos,validFor:oP}}const sJ=["__annotations__","__builtins__","__debug__","__doc__","__import__","__name__","__loader__","__package__","__spec__","False","None","True"].map(n=>({label:n,type:"constant"})).concat(["ArithmeticError","AssertionError","AttributeError","BaseException","BlockingIOError","BrokenPipeError","BufferError","BytesWarning","ChildProcessError","ConnectionAbortedError","ConnectionError","ConnectionRefusedError","ConnectionResetError","DeprecationWarning","EOFError","Ellipsis","EncodingWarning","EnvironmentError","Exception","FileExistsError","FileNotFoundError","FloatingPointError","FutureWarning","GeneratorExit","IOError","ImportError","ImportWarning","IndentationError","IndexError","InterruptedError","IsADirectoryError","KeyError","KeyboardInterrupt","LookupError","MemoryError","ModuleNotFoundError","NameError","NotADirectoryError","NotImplemented","NotImplementedError","OSError","OverflowError","PendingDeprecationWarning","PermissionError","ProcessLookupError","RecursionError","ReferenceError","ResourceWarning","RuntimeError","RuntimeWarning","StopAsyncIteration","StopIteration","SyntaxError","SyntaxWarning","SystemError","SystemExit","TabError","TimeoutError","TypeError","UnboundLocalError","UnicodeDecodeError","UnicodeEncodeError","UnicodeError","UnicodeTranslateError","UnicodeWarning","UserWarning","ValueError","Warning","ZeroDivisionError"].map(n=>({label:n,type:"type"}))).concat(["bool","bytearray","bytes","classmethod","complex","float","frozenset","int","list","map","memoryview","object","range","set","staticmethod","str","super","tuple","type"].map(n=>({label:n,type:"class"}))).concat(["abs","aiter","all","anext","any","ascii","bin","breakpoint","callable","chr","compile","delattr","dict","dir","divmod","enumerate","eval","exec","exit","filter","format","getattr","globals","hasattr","hash","help","hex","id","input","isinstance","issubclass","iter","len","license","locals","max","min","next","oct","open","ord","pow","print","property","quit","repr","reversed","round","setattr","slice","sorted","sum","vars","zip"].map(n=>({label:n,type:"function"}))),oJ=[Gs("def ${name}(${params}):\n	${}",{label:"def",detail:"function",type:"keyword"}),Gs("for ${name} in ${collection}:\n	${}",{label:"for",detail:"loop",type:"keyword"}),Gs("while ${}:\n	${}",{label:"while",detail:"loop",type:"keyword"}),Gs("try:\n	${}\nexcept ${error}:\n	${}",{label:"try",detail:"/ except block",type:"keyword"}),Gs(`if \${}:
	
`,{label:"if",detail:"block",type:"keyword"}),Gs("if ${}:\n	${}\nelse:\n	${}",{label:"if",detail:"/ else block",type:"keyword"}),Gs("class ${name}:\n	def __init__(self, ${params}):\n			${}",{label:"class",detail:"definition",type:"keyword"}),Gs("import ${module}",{label:"import",detail:"statement",type:"keyword"}),Gs("from ${module} import ${names}",{label:"from",detail:"import",type:"keyword"})],aJ=hX(iL,NM(sJ.concat(oJ)));function vw(n){let{node:e,pos:t}=n,r=n.lineIndent(t,-1),i=null;for(;;){let s=e.childBefore(t);if(s)if(s.name=="Comment")t=s.from;else if(s.name=="Body"||s.name=="MatchBody")n.baseIndentFor(s)+n.unit<=r&&(i=s),e=s;else if(s.name=="MatchClause")e=s;else if(s.type.is("Statement"))e=s;else break;else break}return i}function ww(n,e){let t=n.baseIndentFor(e),r=n.lineAt(n.pos,-1),i=r.from+r.text.length;return/^\s*($|#)/.test(r.text)&&n.node.to<i+100&&!/\S/.test(n.state.sliceDoc(i,n.node.to))&&n.lineIndent(n.pos,-1)<=t||/^\s*(else:|elif |except |finally:|case\s+[^=:]+:)/.test(n.textAfter)&&n.lineIndent(n.pos,-1)>t?null:t+n.unit}const Ow=Dg.define({name:"python",parser:nJ.configure({props:[CD.add({Body:n=>{var e;let t=vw(n);return(e=ww(n,t||n.node))!==null&&e!==void 0?e:n.continue()},MatchBody:n=>{var e;let t=vw(n);return(e=ww(n,t||n.node))!==null&&e!==void 0?e:n.continue()},IfStatement:n=>/^\s*(else:|elif )/.test(n.textAfter)?n.baseIndent:n.continue(),"ForStatement WhileStatement":n=>/^\s*else:/.test(n.textAfter)?n.baseIndent:n.continue(),TryStatement:n=>/^\s*(except |finally:|else:)/.test(n.textAfter)?n.baseIndent:n.continue(),MatchStatement:n=>/^\s*case /.test(n.textAfter)?n.baseIndent+n.unit:n.continue(),"TupleExpression ComprehensionExpression ParamList ArgList ParenthesizedExpression":iw({closing:")"}),"DictionaryExpression DictionaryComprehensionExpression SetExpression SetComprehensionExpression":iw({closing:"}"}),"ArrayExpression ArrayComprehensionExpression":iw({closing:"]"}),MemberExpression:n=>n.baseIndent+n.unit,"String FormatString":()=>null,Script:n=>{var e;let t=vw(n);return(e=t&&ww(n,t))!==null&&e!==void 0?e:n.continue()}}),RD.add({"ArrayExpression DictionaryExpression SetExpression TupleExpression":XH,Body:(n,e)=>({from:n.from+1,to:n.to-(n.to==e.doc.length?0:1)}),"String FormatString":(n,e)=>({from:e.doc.lineAt(n.from).to,to:n.to})})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"'''",'"""'],stringPrefixes:["f","fr","rf","r","u","b","br","rb","F","FR","RF","R","U","B","BR","RB"]},commentTokens:{line:"#"},indentOnInput:/^\s*([\}\]\)]|else:|elif |except |finally:|case\s+[^:]*:?)$/}});function lJ(){return new FH(Ow,[Ow.data.of({autocomplete:iJ}),Ow.data.of({autocomplete:aJ})])}const aP=async(n,e,t)=>{const r=Ey(ud,"users",n),i=await j2(r);if(i.exists()){const o=i.data().progress||[],l=new Date().toISOString().split("T")[0],u=o.findIndex(y=>y.date===l);u!==-1?o[u]={date:l,status:t}:o.push({date:l,status:t});let h=0;const d=o.filter(y=>y.status==="solved").map(y=>new Date(y.date)).sort((y,v)=>v.getTime()-y.getTime());if(d.length>0){h=1;for(let y=1;y<d.length&&(d[y-1].getTime()-d[y].getTime())/864e5===1;y++)h++}const m=o.filter(y=>y.status==="solved").length;await sW(r,{progress:o,challengesSolved:m,streak:h})}};var xw,lP;function cJ(){if(lP)return xw;lP=1;var n={linear:function(e,t,r,i){var s=r-t;return s*e/i+t},easeInQuad:function(e,t,r,i){var s=r-t;return s*(e/=i)*e+t},easeOutQuad:function(e,t,r,i){var s=r-t;return-s*(e/=i)*(e-2)+t},easeInOutQuad:function(e,t,r,i){var s=r-t;return(e/=i/2)<1?s/2*e*e+t:-s/2*(--e*(e-2)-1)+t},easeInCubic:function(e,t,r,i){var s=r-t;return s*(e/=i)*e*e+t},easeOutCubic:function(e,t,r,i){var s=r-t;return s*((e=e/i-1)*e*e+1)+t},easeInOutCubic:function(e,t,r,i){var s=r-t;return(e/=i/2)<1?s/2*e*e*e+t:s/2*((e-=2)*e*e+2)+t},easeInQuart:function(e,t,r,i){var s=r-t;return s*(e/=i)*e*e*e+t},easeOutQuart:function(e,t,r,i){var s=r-t;return-s*((e=e/i-1)*e*e*e-1)+t},easeInOutQuart:function(e,t,r,i){var s=r-t;return(e/=i/2)<1?s/2*e*e*e*e+t:-s/2*((e-=2)*e*e*e-2)+t},easeInQuint:function(e,t,r,i){var s=r-t;return s*(e/=i)*e*e*e*e+t},easeOutQuint:function(e,t,r,i){var s=r-t;return s*((e=e/i-1)*e*e*e*e+1)+t},easeInOutQuint:function(e,t,r,i){var s=r-t;return(e/=i/2)<1?s/2*e*e*e*e*e+t:s/2*((e-=2)*e*e*e*e+2)+t},easeInSine:function(e,t,r,i){var s=r-t;return-s*Math.cos(e/i*(Math.PI/2))+s+t},easeOutSine:function(e,t,r,i){var s=r-t;return s*Math.sin(e/i*(Math.PI/2))+t},easeInOutSine:function(e,t,r,i){var s=r-t;return-s/2*(Math.cos(Math.PI*e/i)-1)+t},easeInExpo:function(e,t,r,i){var s=r-t;return e==0?t:s*Math.pow(2,10*(e/i-1))+t},easeOutExpo:function(e,t,r,i){var s=r-t;return e==i?t+s:s*(-Math.pow(2,-10*e/i)+1)+t},easeInOutExpo:function(e,t,r,i){var s=r-t;return e===0?t:e===i?t+s:(e/=i/2)<1?s/2*Math.pow(2,10*(e-1))+t:s/2*(-Math.pow(2,-10*--e)+2)+t},easeInCirc:function(e,t,r,i){var s=r-t;return-s*(Math.sqrt(1-(e/=i)*e)-1)+t},easeOutCirc:function(e,t,r,i){var s=r-t;return s*Math.sqrt(1-(e=e/i-1)*e)+t},easeInOutCirc:function(e,t,r,i){var s=r-t;return(e/=i/2)<1?-s/2*(Math.sqrt(1-e*e)-1)+t:s/2*(Math.sqrt(1-(e-=2)*e)+1)+t},easeInElastic:function(e,t,r,i){var s=r-t,o,l,u;return u=1.70158,l=0,o=s,e===0?t:(e/=i)===1?t+s:(l||(l=i*.3),o<Math.abs(s)?(o=s,u=l/4):u=l/(2*Math.PI)*Math.asin(s/o),-(o*Math.pow(2,10*(e-=1))*Math.sin((e*i-u)*(2*Math.PI)/l))+t)},easeOutElastic:function(e,t,r,i){var s=r-t,o,l,u;return u=1.70158,l=0,o=s,e===0?t:(e/=i)===1?t+s:(l||(l=i*.3),o<Math.abs(s)?(o=s,u=l/4):u=l/(2*Math.PI)*Math.asin(s/o),o*Math.pow(2,-10*e)*Math.sin((e*i-u)*(2*Math.PI)/l)+s+t)},easeInOutElastic:function(e,t,r,i){var s=r-t,o,l,u;return u=1.70158,l=0,o=s,e===0?t:(e/=i/2)===2?t+s:(l||(l=i*(.3*1.5)),o<Math.abs(s)?(o=s,u=l/4):u=l/(2*Math.PI)*Math.asin(s/o),e<1?-.5*(o*Math.pow(2,10*(e-=1))*Math.sin((e*i-u)*(2*Math.PI)/l))+t:o*Math.pow(2,-10*(e-=1))*Math.sin((e*i-u)*(2*Math.PI)/l)*.5+s+t)},easeInBack:function(e,t,r,i,s){var o=r-t;return s===void 0&&(s=1.70158),o*(e/=i)*e*((s+1)*e-s)+t},easeOutBack:function(e,t,r,i,s){var o=r-t;return s===void 0&&(s=1.70158),o*((e=e/i-1)*e*((s+1)*e+s)+1)+t},easeInOutBack:function(e,t,r,i,s){var o=r-t;return s===void 0&&(s=1.70158),(e/=i/2)<1?o/2*(e*e*(((s*=1.525)+1)*e-s))+t:o/2*((e-=2)*e*(((s*=1.525)+1)*e+s)+2)+t},easeInBounce:function(e,t,r,i){var s=r-t,o;return o=n.easeOutBounce(i-e,0,s,i),s-o+t},easeOutBounce:function(e,t,r,i){var s=r-t;return(e/=i)<1/2.75?s*(7.5625*e*e)+t:e<2/2.75?s*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?s*(7.5625*(e-=2.25/2.75)*e+.9375)+t:s*(7.5625*(e-=2.625/2.75)*e+.984375)+t},easeInOutBounce:function(e,t,r,i){var s=r-t,o;return e<i/2?(o=n.easeInBounce(e*2,0,s,i),o*.5+t):(o=n.easeOutBounce(e*2-i,0,s,i),o*.5+s*.5+t)}};return xw=n,xw}var uJ=cJ();function hJ(n){return n*Math.PI/180}function Mr(n,e){return n+Math.random()*(e-n)}function fJ(n,e){return Math.floor(n+Math.random()*(e-n+1))}var df;(function(n){n[n.Circle=0]="Circle",n[n.Square=1]="Square",n[n.Strip=2]="Strip"})(df||(df={}));var ea;(function(n){n[n.Positive=1]="Positive",n[n.Negative=-1]="Negative"})(ea||(ea={}));const dJ=1e3/60;class pJ{constructor(e,t,r,i){this.getOptions=t;const{colors:s,initialVelocityX:o,initialVelocityY:l}=this.getOptions();this.context=e,this.x=r,this.y=i,this.w=Mr(5,20),this.h=Mr(5,20),this.radius=Mr(5,10),this.vx=typeof o=="number"?Mr(-o,o):Mr(o.min,o.max),this.vy=typeof l=="number"?Mr(-l,0):Mr(l.min,l.max),this.shape=fJ(0,2),this.angle=hJ(Mr(0,360)),this.angularSpin=Mr(-.2,.2),this.color=s[Math.floor(Math.random()*s.length)],this.rotateY=Mr(0,1),this.rotationDirection=Mr(0,1)?ea.Positive:ea.Negative}update(e){const{gravity:t,wind:r,friction:i,opacity:s,drawShape:o}=this.getOptions(),l=e/dJ;this.x+=this.vx*l,this.y+=this.vy*l,this.vy+=t*l,this.vx+=r*l,this.vx*=i**l,this.vy*=i**l,this.rotateY>=1&&this.rotationDirection===ea.Positive?this.rotationDirection=ea.Negative:this.rotateY<=-1&&this.rotationDirection===ea.Negative&&(this.rotationDirection=ea.Positive);const u=.1*this.rotationDirection*l;if(this.rotateY+=u,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=s,this.context.lineCap="round",this.context.lineWidth=2,o&&typeof o=="function")o.call(this,this.context);else switch(this.shape){case df.Circle:{this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break}case df.Square:{this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break}case df.Strip:{this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h);break}}this.context.closePath(),this.context.restore()}}class mJ{constructor(e,t){this.x=0,this.y=0,this.w=0,this.h=0,this.lastNumberOfPieces=0,this.tweenProgress=0,this.tweenFrom=0,this.particles=[],this.particlesGenerated=0,this.removeParticleAt=i=>{this.particles.splice(i,1)},this.getParticle=()=>{const i=Mr(this.x,this.w+this.x),s=Mr(this.y,this.h+this.y);return new pJ(this.context,this.getOptions,i,s)},this.animate=i=>{const{canvas:s,context:o,particlesGenerated:l,lastNumberOfPieces:u}=this,{run:h,recycle:d,numberOfPieces:m,debug:y,tweenFunction:v,tweenDuration:S}=this.getOptions();if(!h)return!1;const b=this.particles.length,T=d?b:l;if(T<m){u!==m&&(this.tweenProgress=0,this.tweenFrom=T,this.lastNumberOfPieces=m),this.tweenProgress=Math.min(S,Math.max(0,this.tweenProgress+i));const k=v(this.tweenProgress,this.tweenFrom,m,S),M=Math.round(k-T);for(let F=0;F<M;F++)this.particles.push(this.getParticle());this.particlesGenerated+=M}y&&(o.font="12px sans-serif",o.fillStyle="#333",o.textAlign="right",o.fillText(`Particles: ${b}`,s.width-10,s.height-20));for(let k=this.particles.length-1;k>=0;k--){const M=this.particles[k];M.update(i),(M.y>s.height||M.y<-100||M.x>s.width+100||M.x<-100)&&(d&&T<=m?this.particles[k]=this.getParticle():this.removeParticleAt(k))}return b>0||T<m},this.canvas=e;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.getOptions=t}}const _1={width:typeof window<"u"?window.innerWidth:300,height:typeof window<"u"?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:uJ.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0};class gJ{constructor(e,t){this.lastFrameTime=0,this.setOptionsWithDefaults=i=>{const s={confettiSource:{x:0,y:0,w:this.canvas.width,h:0}};this._options={...s,..._1,...i},Object.assign(this,i.confettiSource)},this.update=(i=0)=>{const{options:{run:s,onConfettiComplete:o,frameRate:l},canvas:u,context:h}=this,d=Math.min(i-this.lastFrameTime,50);if(l&&d<1e3/l){this.rafId=requestAnimationFrame(this.update);return}this.lastFrameTime=i-(l?d%l:0),s&&(h.fillStyle="white",h.clearRect(0,0,u.width,u.height)),this.generator.animate(d)?this.rafId=requestAnimationFrame(this.update):(o&&typeof o=="function"&&this.generator.particlesGenerated>0&&o.call(this,this),this._options.run=!1)},this.reset=()=>{this.generator&&this.generator.particlesGenerated>0&&(this.generator.particlesGenerated=0,this.generator.particles=[],this.generator.lastNumberOfPieces=0)},this.stop=()=>{this.options={run:!1},this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=void 0)},this.canvas=e;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.generator=new mJ(this.canvas,()=>this.options),this.options=t,this.update()}get options(){return this._options}set options(e){var i,s;const t=(i=this._options)==null?void 0:i.run,r=(s=this._options)==null?void 0:s.recycle;this.setOptionsWithDefaults(e),this.generator&&(Object.assign(this.generator,this.options.confettiSource),typeof e.recycle=="boolean"&&e.recycle&&r===!1&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),typeof e.run=="boolean"&&e.run&&t===!1&&this.update()}}const yJ=pe.createRef();class E1 extends pe.Component{constructor(e){super(e),this.canvas=pe.createRef(),this.canvas=e.canvasRef||yJ}componentDidMount(){if(this.canvas.current){const e=Sw(this.props)[0];this.confetti=new gJ(this.canvas.current,e)}}componentDidUpdate(){const e=Sw(this.props)[0];this.confetti&&(this.confetti.options=e)}componentWillUnmount(){this.confetti&&this.confetti.stop(),this.confetti=void 0}render(){const[e,t]=Sw(this.props),r={zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0,...t.style};return D.jsx("canvas",{width:e.width,height:e.height,ref:this.canvas,...t,style:r})}}E1.defaultProps={..._1};E1.displayName="ReactConfetti";function Sw(n){const e={},t={},r={},i=[...Object.keys(_1),"confettiSource","drawShape","onConfettiComplete","frameRate"],s=["canvasRef"];for(const o in n){const l=n[o];i.includes(o)?e[o]=l:s.includes(o)?s[o]=l:r[o]=l}return[e,r,t]}const vJ=pe.forwardRef((n,e)=>D.jsx(E1,{canvasRef:e,...n})),wJ=n=>{const e=I.useRef(n);return I.useEffect(()=>{e.current=n}),e},OJ=(n,e=100,t=!1)=>{const r=wJ(n),i=I.useRef(),s=[e,t,r];function o(){i.current&&clearTimeout(i.current),i.current=void 0}I.useEffect(()=>o,s);function l(){i.current=void 0}return I.useCallback(function(){const u=arguments,{current:h}=i;if(h===void 0&&t)return i.current=setTimeout(l,e),r.current.apply(null,u);h&&clearTimeout(h),i.current=setTimeout(()=>{i.current=void 0,r.current.apply(null,u)},e)},s)},xJ=(n,e,t)=>{const r=I.useState(n);return[r[0],OJ(r[1],e,t)]};function bw(n,e,t,r){const i=I.useRef(t),s=I.useRef(r);I.useEffect(()=>{i.current=t,s.current=r}),I.useEffect(()=>{const o=n&&"current"in n?n.current:n;if(!o)return;let l=0;function u(...d){l||i.current.apply(this,d)}o.addEventListener(e,u);const h=s.current;return()=>{l=1,o.removeEventListener(e,u),h&&h()}},[n,e])}const SJ={},pf=typeof window>"u"?null:window,bJ=pf&&typeof pf.visualViewport<"u"?pf.visualViewport:null,cP=()=>[document.documentElement.clientWidth,document.documentElement.clientHeight],TJ=function(n){n===void 0&&(n=SJ);const{wait:e,leading:t,initialWidth:r=0,initialHeight:i=0}=n,[s,o]=xJ(typeof document>"u"?[r,i]:cP,e,t),l=()=>o(cP);return bw(pf,"resize",l),bw(bJ,"resize",l),bw(pf,"orientationchange",l),s};var Tw,uP;function k1(){if(uP)return Tw;uP=1;function n(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return Tw=n,Tw}var _w,hP;function _J(){if(hP)return _w;hP=1;var n=typeof Vp=="object"&&Vp&&Vp.Object===Object&&Vp;return _w=n,_w}var Ew,fP;function sL(){if(fP)return Ew;fP=1;var n=_J(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=n||e||Function("return this")();return Ew=t,Ew}var kw,dP;function EJ(){if(dP)return kw;dP=1;var n=sL(),e=function(){return n.Date.now()};return kw=e,kw}var Cw,pP;function kJ(){if(pP)return Cw;pP=1;var n=/\s/;function e(t){for(var r=t.length;r--&&n.test(t.charAt(r)););return r}return Cw=e,Cw}var Pw,mP;function CJ(){if(mP)return Pw;mP=1;var n=kJ(),e=/^\s+/;function t(r){return r&&r.slice(0,n(r)+1).replace(e,"")}return Pw=t,Pw}var Aw,gP;function oL(){if(gP)return Aw;gP=1;var n=sL(),e=n.Symbol;return Aw=e,Aw}var Rw,yP;function PJ(){if(yP)return Rw;yP=1;var n=oL(),e=Object.prototype,t=e.hasOwnProperty,r=e.toString,i=n?n.toStringTag:void 0;function s(o){var l=t.call(o,i),u=o[i];try{o[i]=void 0;var h=!0}catch{}var d=r.call(o);return h&&(l?o[i]=u:delete o[i]),d}return Rw=s,Rw}var Iw,vP;function AJ(){if(vP)return Iw;vP=1;var n=Object.prototype,e=n.toString;function t(r){return e.call(r)}return Iw=t,Iw}var Nw,wP;function RJ(){if(wP)return Nw;wP=1;var n=oL(),e=PJ(),t=AJ(),r="[object Null]",i="[object Undefined]",s=n?n.toStringTag:void 0;function o(l){return l==null?l===void 0?i:r:s&&s in Object(l)?e(l):t(l)}return Nw=o,Nw}var Dw,OP;function IJ(){if(OP)return Dw;OP=1;function n(e){return e!=null&&typeof e=="object"}return Dw=n,Dw}var Mw,xP;function NJ(){if(xP)return Mw;xP=1;var n=RJ(),e=IJ(),t="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&n(i)==t}return Mw=r,Mw}var Lw,SP;function DJ(){if(SP)return Lw;SP=1;var n=CJ(),e=k1(),t=NJ(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function u(h){if(typeof h=="number")return h;if(t(h))return r;if(e(h)){var d=typeof h.valueOf=="function"?h.valueOf():h;h=e(d)?d+"":d}if(typeof h!="string")return h===0?h:+h;h=n(h);var m=s.test(h);return m||o.test(h)?l(h.slice(2),m?2:8):i.test(h)?r:+h}return Lw=u,Lw}var Vw,bP;function aL(){if(bP)return Vw;bP=1;var n=k1(),e=EJ(),t=DJ(),r="Expected a function",i=Math.max,s=Math.min;function o(l,u,h){var d,m,y,v,S,b,T=0,k=!1,M=!1,F=!0;if(typeof l!="function")throw new TypeError(r);u=t(u)||0,n(h)&&(k=!!h.leading,M="maxWait"in h,y=M?i(t(h.maxWait)||0,u):y,F="trailing"in h?!!h.trailing:F);function z(N){var te=d,me=m;return d=m=void 0,T=N,v=l.apply(me,te),v}function $(N){return T=N,S=setTimeout(P,u),k?z(N):v}function U(N){var te=N-b,me=N-T,ge=u-te;return M?s(ge,y-me):ge}function C(N){var te=N-b,me=N-T;return b===void 0||te>=u||te<0||M&&me>=y}function P(){var N=e();if(C(N))return A(N);S=setTimeout(P,U(N))}function A(N){return S=void 0,F&&d?z(N):(d=m=void 0,v)}function L(){S!==void 0&&clearTimeout(S),T=0,d=b=m=S=void 0}function Q(){return S===void 0?v:A(e())}function V(){var N=e(),te=C(N);if(d=arguments,m=this,b=N,te){if(S===void 0)return $(b);if(M)return clearTimeout(S),S=setTimeout(P,u),z(b)}return S===void 0&&(S=setTimeout(P,u)),v}return V.cancel=L,V.flush=Q,V}return Vw=o,Vw}var MJ=aL();const LJ=Gf(MJ);var Fw,TP;function VJ(){if(TP)return Fw;TP=1;var n=aL(),e=k1(),t="Expected a function";function r(i,s,o){var l=!0,u=!0;if(typeof i!="function")throw new TypeError(t);return e(o)&&(l="leading"in o?!!o.leading:l,u="trailing"in o?!!o.trailing:u),n(i,s,{leading:l,maxWait:s,trailing:u})}return Fw=r,Fw}var FJ=VJ();const QJ=Gf(FJ),jJ=(n,e,t,r)=>{switch(e){case"debounce":return LJ(n,t,r);case"throttle":return QJ(n,t,r);default:return n}},zJ=n=>{const e=I.useRef(n);return I.useEffect(()=>{e.current=n}),I.useMemo(()=>(...t)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...t)},[])},$J=n=>{const[e,t]=I.useState((n==null?void 0:n.current)||null);return n&&setTimeout(()=>{n.current!==e&&t(n.current)},0),{refProxy:I.useMemo(()=>new Proxy(i=>{i!==e&&t(i)},{get(i,s){return s==="current"?e:i[s]},set(i,s,o){return s==="current"?t(o):i[s]=o,!0}}),[e]),refElement:e,setRefElement:t}},BJ=(n,e)=>e==="border-box"?{width:n.borderBoxSize[0].inlineSize,height:n.borderBoxSize[0].blockSize}:e==="content-box"?{width:n.contentBoxSize[0].inlineSize,height:n.contentBoxSize[0].blockSize}:{width:n.contentRect.width,height:n.contentRect.height};function UJ({skipOnMount:n=!1,refreshMode:e,refreshRate:t=1e3,refreshOptions:r,handleWidth:i=!0,handleHeight:s=!0,targetRef:o,observerOptions:l,onResize:u}={}){const h=I.useRef(n),d=zJ(u),[m,y]=I.useState({width:void 0,height:void 0}),{refProxy:v,refElement:S}=$J(o),{box:b}=l||{},T=I.useCallback(M=>{if(!i&&!s)return;if(h.current){h.current=!1;return}const F=(z,$)=>i&&z.width!==$.width||s&&z.height!==$.height;M.forEach(z=>{const $=BJ(z,b);y(U=>F(U,$)?(d==null||d({width:$.width,height:$.height,entry:z}),$):U)})},[i,s,h,b]),k=I.useCallback(jJ(T,e,t,r),[T,e,t,r]);return I.useEffect(()=>{let M;return S?(M=new window.ResizeObserver(k),M.observe(S,l)):(m.width||m.height)&&(d==null||d({width:null,height:null,entry:null}),y({width:void 0,height:void 0})),()=>{var F,z,$;(F=M==null?void 0:M.disconnect)===null||F===void 0||F.call(M),($=(z=k).cancel)===null||$===void 0||$.call(z)}},[k,S]),Object.assign({ref:v},m)}const qJ=()=>{const{user:n,isAuthenticated:e}=Hu(),t=za(),{toast:r}=Tx(),[i,s]=I.useState(null),[o,l]=I.useState("unsolved"),[u,h]=I.useState(""),[d,m]=I.useState(""),[y,v]=I.useState(null),[S,b]=I.useState(!0),[T,k]=I.useState(!1),[M]=TJ(),{height:F=300,ref:z}=UJ({handleHeight:!0});I.useEffect(()=>{e||t("/login")},[e,t]),I.useEffect(()=>{(async()=>{const A=await pW();s(A),A&&h(A.code),b(!1)})(),y||(async()=>{console.log("Loading Pyodide...");const A=await window.loadPyodide({indexURL:"https://cdn.jsdelivr.net/pyodide/v0.21.3/full/"});console.log("Pyodide loaded."),v(A)})()},[y]),I.useEffect(()=>{(async()=>{if(n&&i){const P=await mW(n.uid,i.id);l(P)}})()},[n,i]);const $=async()=>{if(!y){m(" Pyodide not loaded yet...");return}if(!i){m(" No challenge loaded.");return}let C="",P=!0;try{y.runPython(u)}catch(A){m(` Error in your code definition: ${A.message}`);return}for(const A of i.testCases)try{if(!A.input){C+=` Skipped a test with missing input.
`;continue}const L=y.runPython(`str(${A.input})`);L===A.expectedOutput?C+=` Passed: ${A.input}  ${L}
`:(C+=` Failed: ${A.input}  Got ${L}, expected ${A.expectedOutput}
`,P=!1)}catch(L){C+=` Error while testing: ${A.input||"undefined"}
${L.message}
`,P=!1}m(C),i&&n&&(P&&i.testCases.length>0?(k(!0),setTimeout(()=>k(!1),1e4),await aP(n.uid,i.id,"solved"),l("solved"),r({title:"Challenge Solved "})):(await aP(n.uid,i.id,"unsolved"),l("unsolved"),r({title:"Some tests failed. Keep trying!"})))},U=()=>{const C=new Date,P=new Date;P.setHours(24,0,0,0);const A=P.getTime()-C.getTime(),L=Math.floor(A/(1e3*60*60)),Q=Math.floor(A%(1e3*60*60)/(1e3*60));return`${L}h ${Q}m left`};return S?D.jsx("div",{className:"min-h-screen flex items-center justify-center",children:D.jsx("p",{children:"Loading today's challenge..."})}):i?D.jsxs("div",{className:"relative min-h-screen",children:[T&&D.jsx(vJ,{width:M,height:document.documentElement.scrollHeight,recycle:!1,numberOfPieces:400}),D.jsx(H2,{}),D.jsxs("div",{className:"pt-24 p-6 max-w-5xl mx-auto",children:[D.jsxs("div",{className:"text-center mb-8",children:[D.jsx("h1",{className:"text-4xl font-bold flex items-center justify-center gap-4",children:" Today's Challenge "}),D.jsxs("div",{className:"flex items-center justify-center gap-2 mt-4",children:[D.jsx("h2",{className:"text-2xl font-semibold",children:i.title}),D.jsx("span",{className:`px-2 py-1 rounded-full text-sm font-medium
        ${i.difficulty==="Easy"?"bg-green-100 text-green-700":""}
        ${i.difficulty==="Medium"?"bg-orange-100 text-orange-700":""}
        ${i.difficulty==="Hard"?"bg-red-100 text-red-700":""}
      `,children:i.difficulty})]}),D.jsx("div",{className:"mt-2 flex justify-center items-center gap-4",children:D.jsx("span",{className:"text-gray-600",children:U()})}),D.jsx("p",{className:"mt-4 text-gray-700",children:i.description})]}),D.jsx(Da,{className:"mb-4",children:D.jsxs(Ma,{children:[D.jsx("div",{className:"mb-4",ref:z,children:D.jsx(GM,{value:u,height:`${F}px`,extensions:[lJ()],onChange:C=>h(C)})}),D.jsx("div",{className:"flex gap-4",children:D.jsx(uo,{onClick:$,children:"Run Code"})}),d&&D.jsx("pre",{className:"bg-gray-100 dark:bg-gray-800 mt-4 p-4 rounded text-sm whitespace-pre-wrap",children:d})]})})]})]}):D.jsx("div",{className:"min-h-screen flex items-center justify-center",children:D.jsx("p",{children:" No challenge available today."})})};var C1="Progress",P1=100,[WJ,gZ]=Xf(C1),[HJ,GJ]=WJ(C1),lL=I.forwardRef((n,e)=>{const{__scopeProgress:t,value:r=null,max:i,getValueLabel:s=XJ,...o}=n;(i||i===0)&&!_P(i)&&console.error(KJ(`${i}`,"Progress"));const l=_P(i)?i:P1;r!==null&&!EP(r,l)&&console.error(YJ(`${r}`,"Progress"));const u=EP(r,l)?r:null,h=Kg(u)?s(u,l):void 0;return D.jsx(HJ,{scope:t,value:u,max:l,children:D.jsx(Cn.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Kg(u)?u:void 0,"aria-valuetext":h,role:"progressbar","data-state":hL(u,l),"data-value":u??void 0,"data-max":l,...o,ref:e})})});lL.displayName=C1;var cL="ProgressIndicator",uL=I.forwardRef((n,e)=>{const{__scopeProgress:t,...r}=n,i=GJ(cL,t);return D.jsx(Cn.div,{"data-state":hL(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...r,ref:e})});uL.displayName=cL;function XJ(n,e){return`${Math.round(n/e*100)}%`}function hL(n,e){return n==null?"indeterminate":n===e?"complete":"loading"}function Kg(n){return typeof n=="number"}function _P(n){return Kg(n)&&!isNaN(n)&&n>0}function EP(n,e){return Kg(n)&&!isNaN(n)&&n<=e&&n>=0}function KJ(n,e){return`Invalid prop \`max\` of value \`${n}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${P1}\`.`}function YJ(n,e){return`Invalid prop \`value\` of value \`${n}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${P1} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var fL=lL,JJ=uL;const Sx=I.forwardRef(({className:n,value:e,...t},r)=>D.jsx(fL,{ref:r,className:Pn("relative h-4 w-full overflow-hidden rounded-full bg-secondary",n),...t,children:D.jsx(JJ,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));Sx.displayName=fL.displayName;const ZJ=({solved:n,unsolved:e,streak:t,total:r})=>{const i=r>0?Math.round(n/r*100):0,s=r>0?Math.round(e/r*100):0;return D.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[D.jsxs(Da,{children:[D.jsx(zl,{className:"pb-2",children:D.jsx($l,{className:"text-lg",children:"Challenge Stats"})}),D.jsx(Ma,{className:"space-y-6",children:D.jsxs("div",{className:"space-y-4",children:[D.jsxs("div",{className:"flex items-center justify-between",children:[D.jsxs("div",{className:"flex items-center",children:[D.jsx(dA,{className:"h-5 w-5 text-success mr-2"}),D.jsx("span",{children:"Solved"})]}),D.jsx("span",{className:"font-medium",children:n})]}),D.jsx(Sx,{value:i,className:"h-2 bg-gray-200"}),D.jsxs("div",{className:"flex items-center justify-between",children:[D.jsxs("div",{className:"flex items-center",children:[D.jsx(PF,{className:"h-5 w-5 text-danger mr-2"}),D.jsx("span",{children:"Unsolved"})]}),D.jsx("span",{className:"font-medium",children:e})]}),D.jsx(Sx,{value:s,className:"h-2 bg-gray-200"})]})})]}),D.jsxs(Da,{children:[D.jsx(zl,{className:"pb-2",children:D.jsx($l,{className:"text-lg",children:"Current Streak"})}),D.jsx(Ma,{children:D.jsxs("div",{className:"flex flex-col items-center justify-center h-full py-6",children:[D.jsxs("div",{className:"flex items-center mb-2",children:[D.jsx(RF,{className:"h-8 w-8 text-warning mr-2 animate-pulse-subtle"}),D.jsx("span",{className:"text-3xl font-bold",children:t})]}),D.jsx("p",{className:"text-center text-muted-foreground",children:t===0?"Start your streak by solving today's challenge!":`${t} day${t!==1?"s":""} streak - keep it going!`})]})})]})]})},eZ=()=>{var l;const{user:n,isAuthenticated:e}=Hu(),t=za(),[r,i]=I.useState({challengesSolved:0,streak:0,total:0}),[s,o]=I.useState(!0);return I.useEffect(()=>{e||t("/login")},[e,t]),I.useEffect(()=>{if(!n)return;const u=Ey(ud,"users",n.uid),h=oW(u,d=>{if(d.exists()){const m=d.data();i({challengesSolved:m.challengesSolved||0,streak:m.streak||0,total:m.progress?m.progress.length:0})}o(!1)});return()=>h()},[n]),!e||!n||s?null:D.jsxs("div",{className:"min-h-screen bg-gray-50",children:[D.jsx(H2,{}),D.jsx("div",{className:"pt-20 pb-16",children:D.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[D.jsxs("div",{className:"mb-8 text-center",children:[D.jsxs("h1",{className:"text-3xl font-bold",children:["Welcome, ",(n==null?void 0:n.displayName)||((l=n==null?void 0:n.email)==null?void 0:l.split("@")[0])," "]}),D.jsx("h2",{className:"text-2xl font-semibold mt-2 text-gray-700",children:"Your Dashboard"})]}),D.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[D.jsxs(Da,{children:[D.jsxs(zl,{className:"pb-2 flex flex-row items-center justify-between space-y-0",children:[D.jsx($l,{className:"text-sm font-medium",children:"Challenges Completed"}),D.jsx(hs,{className:"h-4 w-4 text-muted-foreground"})]}),D.jsxs(Ma,{children:[D.jsx("div",{className:"text-2xl font-bold",children:r.challengesSolved}),D.jsx("p",{className:"text-xs text-muted-foreground",children:r.total>0?`${Math.round(r.challengesSolved/r.total*100)}% completion rate`:"No challenges attempted yet"})]})]}),D.jsxs(Da,{children:[D.jsxs(zl,{className:"pb-2 flex flex-row items-center justify-between space-y-0",children:[D.jsx($l,{className:"text-sm font-medium",children:"Time Remaining"}),D.jsx(AF,{className:"h-4 w-4 text-muted-foreground"})]}),D.jsxs(Ma,{children:[D.jsx("div",{className:"text-2xl font-bold",children:(()=>{const u=new Date,h=new Date;h.setHours(24,0,0,0);const d=h.getTime()-u.getTime(),m=Math.floor(d/(1e3*60*60)),y=Math.floor(d%(1e3*60*60)/(1e3*60));return`${m}h ${y}m`})()}),D.jsx("p",{className:"text-xs text-muted-foreground",children:"Until tomorrow's challenge"})]})]})]}),D.jsx(ZJ,{solved:r.challengesSolved,unsolved:r.total-r.challengesSolved,streak:r.streak,total:r.total}),D.jsx("div",{className:"mt-8 flex justify-center",children:D.jsxs(uo,{onClick:()=>t("/challenge"),className:"flex items-center",children:[D.jsx(hs,{className:"h-4 w-4 mr-2"}),"Today's Challenge"]})})]})})]})},tZ=()=>{const n=ju(),e=za();return I.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",n.pathname)},[n.pathname]),D.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50 px-4",children:[D.jsx("div",{className:"mb-6",children:D.jsx(hs,{className:"h-16 w-16 text-primary"})}),D.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),D.jsx("p",{className:"text-xl text-gray-600 mb-6",children:"Oops! Challenge not found"}),D.jsx("p",{className:"text-gray-500 mb-8 text-center max-w-md",children:"The coding challenge you're looking for doesn't exist or has been moved."}),D.jsx(uo,{onClick:()=>e("/"),className:"flex items-center gap-2",children:"Return to Home"})]})},nZ=()=>{const[n,e]=I.useState(""),[t,r]=I.useState(""),[i,s]=I.useState(""),[o,l]=I.useState(""),{register:u}=Hu(),h=za(),[d,m]=I.useState(!1),y=async v=>{v.preventDefault(),l(""),m(!0);try{await u(n,i,t),h("/challenge")}catch(S){l(S.message||"Failed to register.")}m(!1)};return D.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50 px-4",children:D.jsxs("div",{className:"w-full max-w-md",children:[D.jsxs("div",{className:"text-center mb-8",children:[D.jsx("div",{className:"flex justify-center mb-2",children:D.jsx(hs,{className:"h-12 w-12 text-primary"})}),D.jsx("h1",{className:"text-3xl font-bold",children:"CodeForge"}),D.jsx("p",{className:"text-gray-600 mt-1",children:"One coding challenge every day"})]}),D.jsxs(Da,{children:[D.jsxs(zl,{children:[D.jsx($l,{children:"Register"}),D.jsx(FS,{children:"Create a new account"})]}),D.jsxs("form",{onSubmit:y,children:[D.jsxs(Ma,{className:"space-y-4",children:[D.jsxs("div",{children:[D.jsx(tu,{htmlFor:"name",children:"Name"}),D.jsx(eu,{id:"name",type:"text",placeholder:"Your name",value:t,onChange:v=>r(v.target.value),required:!0})]}),o&&D.jsx("div",{className:"text-red-500 text-sm",children:o}),D.jsxs("div",{className:"space-y-2",children:[D.jsx(tu,{htmlFor:"email",children:"Email"}),D.jsx(eu,{id:"email",type:"email",placeholder:"you@example.com",value:n,onChange:v=>e(v.target.value),required:!0})]}),D.jsxs("div",{className:"space-y-2",children:[D.jsx(tu,{htmlFor:"password",children:"Password"}),D.jsx(eu,{id:"password",type:"password",placeholder:"",value:i,onChange:v=>s(v.target.value),required:!0})]})]}),D.jsx(QS,{children:D.jsx(uo,{type:"submit",className:"w-full",disabled:d,children:d?"Creating account...":"Register"})})]})]}),D.jsx("div",{className:"text-center mt-6 text-sm text-gray-600",children:D.jsxs("p",{children:["Already have an account? ",D.jsx(ef,{to:"/login",className:"text-primary font-semibold",children:"Sign In"})]})})]})})},rZ=new BQ,iZ=()=>D.jsx(qQ,{client:rZ,children:D.jsxs(wQ,{children:[D.jsx(m5,{}),D.jsx(H5,{}),D.jsx(Bj,{children:D.jsx(lW,{children:D.jsxs(Lj,{children:[D.jsx(wl,{path:"/",element:D.jsx(cW,{})}),D.jsx(wl,{path:"/login",element:D.jsx(fW,{})}),D.jsx(wl,{path:"/challenge",element:D.jsx(qJ,{})}),D.jsx(wl,{path:"/dashboard",element:D.jsx(eZ,{})}),D.jsx(wl,{path:"/register",element:D.jsx(nZ,{})}),D.jsx(wl,{path:"*",element:D.jsx(tZ,{})})]})})})]})});_V.createRoot(document.getElementById("root")).render(D.jsx(pe.StrictMode,{children:D.jsx(iZ,{})}));
